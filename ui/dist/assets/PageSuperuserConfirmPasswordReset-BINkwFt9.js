import{p as G,a as K,l as M,M as O,e as W,i as Q,F as U,f as _,h as c,j as e,k as d,H as V,d as a,m as f,n as N,o as R,J as X,u as p,v as H,w as m,I as Y,x as Z,y as aa,z as sa,A as ea,s as u,K as ra,b as J,N as ta,r as oa,O as la,L as na,E as v,G as L}from"./index-DeFD_e2S.js";var ia=_('for <strong class="txt-nowrap"> </strong>',1),da=_('<label>New password</label> <input type="password" required/>',1),ua=_('<label>New password confirm</label> <input type="password" required/>',1),ca=_('<form class="m-b-base"><div class="content txt-center m-b-sm"><h4 class="m-b-xs">Reset your superuser password <!></h4></div> <!> <!> <button type="submit"><span class="txt">Set new password</span></button></form> <div class="content txt-center"><a href="/login" class="link-hint">Back to login</a></div>',1);function ma(T,k){G(k,!1);const b=f();let w=K(k,"params",8),g=f(""),h=f(""),n=f(!1);async function j(){if(!a(n)){u(n,!0);try{await J.collection("_superusers").confirmPasswordReset(w()?.token,a(g),a(h)),ta("Successfully set a new superuser password."),oa("/")}catch(y){J.error(y)}u(n,!1)}}M(()=>O(w()),()=>{u(b,la.getJWTPayload(w()?.token).email||"")}),W(),Q(),U(T,{children:(y,fa)=>{var P=ca(),q=c(P),$=d(q),z=d($),A=e(d(z));{var B=s=>{var o=ia(),r=e(c(o)),t=d(r);p(()=>na(t,a(b))),m(s,o)};V(A,s=>{a(b)&&s(B)})}var I=e($,2);N(I,{class:"form-field required",name:"password",children:R,$$slots:{default:(s,o)=>{const r=L(()=>o.uniqueId);var t=da(),i=c(t),l=e(i,2);X(l,!0),p(()=>{v(i,"for",a(r)),v(l,"id",a(r))}),H(l,()=>a(g),x=>u(g,x)),m(s,t)}}});var C=e(I,2);N(C,{class:"form-field required",name:"passwordConfirm",children:R,$$slots:{default:(s,o)=>{const r=L(()=>o.uniqueId);var t=ua(),i=c(t),l=e(i,2);p(()=>{v(i,"for",a(r)),v(l,"id",a(r))}),H(l,()=>a(h),x=>u(h,x)),m(s,t)}}});var S=e(C,2);let F;var D=e(q,2),E=d(D);Y(E,s=>ra?.(s)),p(s=>{F=Z(S,1,"btn btn-lg btn-block",null,F,s),S.disabled=a(n)},[()=>({"btn-loading":a(n)})]),aa("submit",q,sa(j)),m(y,P)},$$slots:{default:!0}}),ea()}export{ma as default};
