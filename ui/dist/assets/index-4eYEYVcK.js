const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FilterAutocompleteInput-DD1nRlog.js","./index-Bioiv-ym.js","./ListApiDocs-B-c_1vwn.js","./FieldsQueryParam-nnFv2xk1.js","./ListApiDocs-ByASLUZu.css","./ViewApiDocs-9ni0BiK0.js","./CreateApiDocs-CDUJGMU6.js","./UpdateApiDocs-C3XM_hGn.js","./AuthMethodsDocs-HEAbLsAO.js","./AuthWithPasswordDocs-DhT_9v2v.js","./AuthWithOAuth2Docs-ja_2jnKS.js","./AuthWithOtpDocs-rAm5ETO0.js","./AuthRefreshDocs-CPGzByDX.js","./CodeEditor-_7ftkqqn.js","./Leaflet-icTs_VPL.js","./Leaflet-Cbs3nKLO.css"])))=>i.map(i=>d[i]);
var Ab=Object.defineProperty;var gf=n=>{throw TypeError(n)};var Lb=(n,e,t)=>e in n?Ab(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var At=(n,e,t)=>Lb(n,typeof e!="symbol"?e+"":e,t),Lc=(n,e,t)=>e.has(n)||gf("Cannot "+t);var Yt=(n,e,t)=>(Lc(n,e,"read from private field"),t?t.call(n):e.get(n)),ci=(n,e,t)=>e.has(n)?gf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ii=(n,e,t,i)=>(Lc(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),ma=(n,e,t)=>(Lc(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();const lm=!1;var Is=Array.isArray,Nb=Array.prototype.indexOf,bd=Array.from,Fl=Object.defineProperty,Or=Object.getOwnPropertyDescriptor,cm=Object.getOwnPropertyDescriptors,Rb=Object.prototype,Fb=Array.prototype,yd=Object.getPrototypeOf,bf=Object.isExtensible;function ns(n){return typeof n=="function"}const yi=()=>{};function qb(n){return typeof(n==null?void 0:n.then)=="function"}function zb(n){return n()}function fo(n){for(var e=0;e<n.length;e++)n[e]()}function jb(){var n,e,t=new Promise((i,a)=>{n=i,e=a});return{promise:t,resolve:n,reject:e}}function ss(n,e){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const t=[];for(const i of n)if(t.push(i),t.length===e)break;return t}const xi=2,_d=4,rc=8,qa=16,Ar=32,za=64,um=128,Ai=256,ql=512,Ln=1024,Ni=2048,Lr=4096,Ji=8192,ja=16384,ac=32768,Po=65536,yf=1<<17,dm=1<<18,Mo=1<<19,fm=1<<20,$u=1<<21,xd=1<<22,Pa=1<<23,vr=Symbol("$state"),hm=Symbol("legacy props"),Vb=Symbol(""),wd=new class extends Error{constructor(){super(...arguments);At(this,"name","StaleReactionError");At(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Ub(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Ae(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function sc(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Bb(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Hb(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Wb(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Yb(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Kb(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Jb(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Zb(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Gb(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xb(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qb(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const oc=1,lc=2,vm=4,ey=8,ty=16,ny=1,iy=2,mm=4,ry=8,ay=16,sy=1,oy=2,ly=4,cy=1,uy=2,pn=Symbol(),dy="http://www.w3.org/1999/xhtml",fy="@attach";function hy(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let vy=!1;function pm(n){return n===this.v}function cc(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function my(n,e){return n!==e}function gm(n){return!cc(n,this.v)}let Cs=!1,py=!1;function gy(){Cs=!0}let tn=null;function gs(n){tn=n}function Ke(n,e=!1,t){tn={p:tn,c:null,e:null,s:n,x:null,l:Cs&&!e?{s:null,u:null,$:[]}:null}}function Je(n){var e=tn,t=e.e;if(t!==null){e.e=null;for(var i of t)Lm(i)}return n!==void 0&&(e.x=n),tn=e.p,n??{}}function da(){return!Cs||tn!==null&&tn.l===null}const by=new WeakMap;function yy(n){var e=Ft;if(e===null)return Vt.f|=Pa,n;if(e.f&ac)kd(n,e);else{if(!(e.f&um))throw!e.parent&&n instanceof Error&&bm(n),n;e.b.error(n)}}function kd(n,e){for(;e!==null;){if(e.f&um)try{e.b.error(n);return}catch(t){n=t}e=e.parent}throw n instanceof Error&&bm(n),n}function bm(n){const e=by.get(n);e&&(Fl(n,"message",{value:e.message}),Fl(n,"stack",{value:e.stack}))}let ho=[],Iu=[];function ym(){var n=ho;ho=[],fo(n)}function _y(){var n=Iu;Iu=[],fo(n)}function aa(n){ho.length===0&&queueMicrotask(ym),ho.push(n)}function xy(){ho.length>0&&ym(),Iu.length>0&&_y()}function wy(){for(var n=Ft.b;n!==null&&!n.has_pending_snippet();)n=n.parent;return n===null&&Ub(),n}function Ao(n){var e=xi|Ni,t=Vt!==null&&Vt.f&xi?Vt:null;return Ft===null||t!==null&&t.f&Ai?e|=Ai:Ft.f|=Mo,{ctx:tn,deps:null,effects:null,equals:pm,f:e,fn:n,reactions:null,rv:0,v:pn,wv:0,parent:t??Ft,ac:null}}function ky(n,e){let t=Ft;t===null&&Bb();var i=t.b,a=void 0,s=Pr(pn),o=null,l=!Vt;return My(()=>{try{var c=n()}catch(p){c=Promise.reject(p)}var u=()=>c;a=(o==null?void 0:o.then(u,u))??Promise.resolve(c),o=a;var d=en,f=i.pending;l&&(i.update_pending_count(1),f||d.increment());const h=(p,v=void 0)=>{o=null,f||d.activate(),v?v!==wd&&(s.f|=Pa,Dr(s,v)):(s.f&Pa&&(s.f^=Pa),Dr(s,p)),l&&(i.update_pending_count(-1),f||d.decrement()),km()};if(a.then(h,p=>h(null,p||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(c=>{function u(d){function f(){d===a?c(s):u(a)}d.then(f,f)}u(a)})}function Xr(n){const e=Ao(n);return Vm(e),e}function ae(n){const e=Ao(n);return e.equals=gm,e}function _m(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Ri(e[t])}}function Sy(n){for(var e=n.parent;e!==null;){if(!(e.f&xi))return e;e=e.parent}return null}function Sd(n){var e,t=Ft;qi(Sy(n));try{_m(n),e=Wm(n)}finally{qi(t)}return e}function xm(n){var e=Sd(n);if(n.equals(e)||(n.v=e,n.wv=Bm()),!Ua)if(Yr!==null)Yr.set(n,n.v);else{var t=(Jr||n.f&Ai)&&n.deps!==null?Lr:Ln;ti(n,t)}}function wm(n,e,t){const i=da()?Ao:ae;if(e.length===0){t(n.map(i));return}var a=en,s=Ft,o=Ty(),l=wy();Promise.all(e.map(c=>ky(c))).then(c=>{a==null||a.activate(),o();try{t([...n.map(i),...c])}catch(u){s.f&ja||kd(u,s)}a==null||a.deactivate(),km()}).catch(c=>{l.error(c)})}function Ty(){var n=Ft,e=Vt,t=tn;return function(){qi(n),Fi(e),gs(t)}}function km(){qi(null),Fi(null),gs(null)}const Fs=new Set;let en=null,Sl=null,Yr=null,_f=new Set,zl=[];function Sm(){const n=zl.shift();zl.length>0&&queueMicrotask(Sm),n()}let Ra=[],uc=null,Cu=!1,Tl=!1;var hs,vs,Hr,Co,Eo,Oa,ms,Da,Wr,ps,Oo,Do,Zi,Tm,$l,Eu;const ic=class ic{constructor(){ci(this,Zi);At(this,"current",new Map);ci(this,hs,new Map);ci(this,vs,new Set);ci(this,Hr,0);ci(this,Co,null);ci(this,Eo,!1);ci(this,Oa,[]);ci(this,ms,[]);ci(this,Da,[]);ci(this,Wr,[]);ci(this,ps,[]);ci(this,Oo,[]);ci(this,Do,[]);At(this,"skipped_effects",new Set)}process(e){var s;Ra=[],Sl=null;var t=null;if(Fs.size>1){t=new Map,Yr=new Map;for(const[o,l]of this.current)t.set(o,{v:o.v,wv:o.wv}),o.v=l;for(const o of Fs)if(o!==this)for(const[l,c]of Yt(o,hs))t.has(l)||(t.set(l,{v:l.v,wv:l.wv}),l.v=c)}for(const o of e)ma(this,Zi,Tm).call(this,o);if(Yt(this,Oa).length===0&&Yt(this,Hr)===0){ma(this,Zi,Eu).call(this);var i=Yt(this,Da),a=Yt(this,Wr);Ii(this,Da,[]),Ii(this,Wr,[]),Ii(this,ps,[]),Sl=en,en=null,xf(i),xf(a),en===null?en=this:Fs.delete(this),(s=Yt(this,Co))==null||s.resolve()}else ma(this,Zi,$l).call(this,Yt(this,Da)),ma(this,Zi,$l).call(this,Yt(this,Wr)),ma(this,Zi,$l).call(this,Yt(this,ps));if(t){for(const[o,{v:l,wv:c}]of t)o.wv<=c&&(o.v=l);Yr=null}for(const o of Yt(this,Oa))Aa(o);for(const o of Yt(this,ms))Aa(o);Ii(this,Oa,[]),Ii(this,ms,[])}capture(e,t){Yt(this,hs).has(e)||Yt(this,hs).set(e,t),this.current.set(e,e.v)}activate(){en=this}deactivate(){en=null,Sl=null;for(const e of _f)if(_f.delete(e),e(),en!==null)break}neuter(){Ii(this,Eo,!0)}flush(){Ra.length>0?Im():ma(this,Zi,Eu).call(this),en===this&&(Yt(this,Hr)===0&&Fs.delete(this),this.deactivate())}increment(){Ii(this,Hr,Yt(this,Hr)+1)}decrement(){if(Ii(this,Hr,Yt(this,Hr)-1),Yt(this,Hr)===0){for(const e of Yt(this,Oo))ti(e,Ni),bs(e);for(const e of Yt(this,Do))ti(e,Lr),bs(e);Ii(this,Da,[]),Ii(this,Wr,[]),this.flush()}else this.deactivate()}add_callback(e){Yt(this,vs).add(e)}settled(){return(Yt(this,Co)??Ii(this,Co,jb())).promise}static ensure(){if(en===null){const e=en=new ic;Fs.add(en),Tl||ic.enqueue(()=>{en===e&&e.flush()})}return en}static enqueue(e){zl.length===0&&queueMicrotask(Sm),zl.unshift(e)}};hs=new WeakMap,vs=new WeakMap,Hr=new WeakMap,Co=new WeakMap,Eo=new WeakMap,Oa=new WeakMap,ms=new WeakMap,Da=new WeakMap,Wr=new WeakMap,ps=new WeakMap,Oo=new WeakMap,Do=new WeakMap,Zi=new WeakSet,Tm=function(e){var d;e.f^=Ln;for(var t=e.first;t!==null;){var i=t.f,a=(i&(Ar|za))!==0,s=a&&(i&Ln)!==0,o=s||(i&Ji)!==0||this.skipped_effects.has(t);if(!o&&t.fn!==null){if(a)t.f^=Ln;else if(i&_d)Yt(this,Wr).push(t);else if(!(i&Ln))if(i&xd){var l=(d=t.b)!=null&&d.pending?Yt(this,ms):Yt(this,Oa);l.push(t)}else No(t)&&(t.f&qa&&Yt(this,ps).push(t),Aa(t));var c=t.first;if(c!==null){t=c;continue}}var u=t.parent;for(t=t.next;t===null&&u!==null;)t=u.next,u=u.parent}},$l=function(e){for(const t of e)(t.f&Ni?Yt(this,Oo):Yt(this,Do)).push(t),ti(t,Ln);e.length=0},Eu=function(){if(!Yt(this,Eo))for(const e of Yt(this,vs))e();Yt(this,vs).clear()};let vo=ic;function $m(n){var e=Tl;Tl=!0;try{for(var t;;){if(xy(),Ra.length===0&&(en==null||en.flush(),Ra.length===0))return uc=null,t;Im()}}finally{Tl=e}}function Im(){var n=os;Cu=!0;try{var e=0;for(Sf(!0);Ra.length>0;){var t=vo.ensure();if(e++>1e3){var i,a;$y()}t.process(Ra),Qr.clear()}}finally{Cu=!1,Sf(n),uc=null}}function $y(){try{Kb()}catch(n){kd(n,uc)}}let Sa=null;function xf(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var i=n[t++];if(!(i.f&(ja|Ji))&&No(i)&&(Sa=[],Aa(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?qm(i):i.fn=null),Sa.length>0)){Qr.clear();for(const a of Sa)Aa(a);Sa=[]}}Sa=null}}function bs(n){for(var e=uc=n;e.parent!==null;){e=e.parent;var t=e.f;if(Cu&&e===Ft&&t&qa)return;if(t&(za|Ar)){if(!(t&Ln))return;e.f^=Ln}}Ra.push(e)}const Qr=new Map;function Pr(n,e){var t={f:0,v:n,reactions:null,equals:pm,rv:0,wv:0};return t}function An(n,e){const t=Pr(n);return Vm(t),t}function M(n,e=!1,t=!0){var a;const i=Pr(n);return e||(i.equals=gm),Cs&&t&&tn!==null&&tn.l!==null&&((a=tn.l).s??(a.s=[])).push(i),i}function dt(n,e){return x(n,A(()=>r(n))),e}function x(n,e,t=!1){Vt!==null&&(!dr||Vt.f&yf)&&da()&&Vt.f&(xi|qa|xd|yf)&&!(ei!=null&&ei.includes(n))&&Qb();let i=t?is(e):e;return Dr(n,i)}function Dr(n,e){if(!n.equals(e)){var t=n.v;Ua?Qr.set(n,e):Qr.set(n,t),n.v=e;var i=vo.ensure();i.capture(n,t),n.f&xi&&(n.f&Ni&&Sd(n),ti(n,n.f&Ai?Lr:Ln)),n.wv=Bm(),Cm(n,Ni),da()&&Ft!==null&&Ft.f&Ln&&!(Ft.f&(Ar|za))&&(Di===null?Ny([n]):Di.push(n))}return e}function Cr(n,e=1){var t=r(n),i=e===1?t++:t--;return x(n,t),i}function Nc(n){x(n,n.v+1)}function Cm(n,e){var t=n.reactions;if(t!==null)for(var i=da(),a=t.length,s=0;s<a;s++){var o=t[s],l=o.f;if(!(!i&&o===Ft)){var c=(l&Ni)===0;c&&ti(o,e),l&xi?Cm(o,Lr):c&&(l&qa&&Sa!==null&&Sa.push(o),bs(o))}}}function is(n){if(typeof n!="object"||n===null||vr in n)return n;const e=yd(n);if(e!==Rb&&e!==Fb)return n;var t=new Map,i=Is(n),a=An(0),s=Ma,o=l=>{if(Ma===s)return l();var c=Vt,u=Ma;Fi(null),$f(s);var d=l();return Fi(c),$f(u),d};return i&&t.set("length",An(n.length)),new Proxy(n,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Gb();var d=t.get(c);return d===void 0?d=o(()=>{var f=An(u.value);return t.set(c,f),f}):x(d,u.value,!0),!0},deleteProperty(l,c){var u=t.get(c);if(u===void 0){if(c in l){const d=o(()=>An(pn));t.set(c,d),Nc(a)}}else x(u,pn),Nc(a);return!0},get(l,c,u){var p;if(c===vr)return n;var d=t.get(c),f=c in l;if(d===void 0&&(!f||(p=Or(l,c))!=null&&p.writable)&&(d=o(()=>{var v=is(f?l[c]:pn),m=An(v);return m}),t.set(c,d)),d!==void 0){var h=r(d);return h===pn?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=t.get(c);d&&(u.value=r(d))}else if(u===void 0){var f=t.get(c),h=f==null?void 0:f.v;if(f!==void 0&&h!==pn)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){var h;if(c===vr)return!0;var u=t.get(c),d=u!==void 0&&u.v!==pn||Reflect.has(l,c);if(u!==void 0||Ft!==null&&(!d||(h=Or(l,c))!=null&&h.writable)){u===void 0&&(u=o(()=>{var p=d?is(l[c]):pn,v=An(p);return v}),t.set(c,u));var f=r(u);if(f===pn)return!1}return d},set(l,c,u,d){var E;var f=t.get(c),h=c in l;if(i&&c==="length")for(var p=u;p<f.v;p+=1){var v=t.get(p+"");v!==void 0?x(v,pn):p in l&&(v=o(()=>An(pn)),t.set(p+"",v))}if(f===void 0)(!h||(E=Or(l,c))!=null&&E.writable)&&(f=o(()=>An(void 0)),x(f,is(u)),t.set(c,f));else{h=f.v!==pn;var m=o(()=>is(u));x(f,m)}var g=Reflect.getOwnPropertyDescriptor(l,c);if(g!=null&&g.set&&g.set.call(d,u),!h){if(i&&typeof c=="string"){var k=t.get("length"),_=Number(c);Number.isInteger(_)&&_>=k.v&&x(k,_+1)}Nc(a)}return!0},ownKeys(l){r(a);var c=Reflect.ownKeys(l).filter(f=>{var h=t.get(f);return h===void 0||h.v!==pn});for(var[u,d]of t)d.v!==pn&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Xb()}})}function wf(n){try{if(n!==null&&typeof n=="object"&&vr in n)return n[vr]}catch{}return n}function Em(n,e){return Object.is(wf(n),wf(e))}var Er,Om,Dm,Pm,Mm;function Iy(){if(Er===void 0){Er=window,Om=document,Dm=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;Pm=Or(e,"firstChild").get,Mm=Or(e,"nextSibling").get,bf(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),bf(t)&&(t.__t=void 0)}}function Nr(n=""){return document.createTextNode(n)}function Kr(n){return Pm.call(n)}function dc(n){return Mm.call(n)}function I(n,e){return Kr(n)}function j(n,e){{var t=Kr(n);return t instanceof Comment&&t.data===""?dc(t):t}}function y(n,e=1,t=!1){let i=n;for(;e--;)i=dc(i);return i}function Cy(n){n.textContent=""}function fc(){return!1}function Gi(n,e){if(e){const t=document.body;n.autofocus=!0,aa(()=>{document.activeElement===t&&n.focus()})}}let kf=!1;function Ey(){kf||(kf=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Es(n){var e=Vt,t=Ft;Fi(null),qi(null);try{return n()}finally{Fi(e),qi(t)}}function hc(n,e,t,i=t){n.addEventListener(e,()=>Es(t));const a=n.__on_r;a?n.__on_r=()=>{a(),i(!0)}:n.__on_r=()=>i(!0),Ey()}function Am(n){Ft===null&&Vt===null&&Yb(),Vt!==null&&Vt.f&Ai&&Ft===null&&Wb(),Ua&&Hb()}function Oy(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function yr(n,e,t,i=!0){var a=Ft;a!==null&&a.f&Ji&&(n|=Ji);var s={ctx:tn,deps:null,nodes_start:null,nodes_end:null,f:n|Ni,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Aa(s),s.f|=ac}catch(c){throw Ri(s),c}else e!==null&&bs(s);if(i){var o=s;if(t&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&!(o.f&Mo)&&(o=o.first),o!==null&&(o.parent=a,a!==null&&Oy(o,a),Vt!==null&&Vt.f&xi&&!(n&za))){var l=Vt;(l.effects??(l.effects=[])).push(o)}}return s}function Lo(n){const e=yr(rc,null,!1);return ti(e,Ln),e.teardown=n,e}function ys(n){Am();var e=Ft.f,t=!Vt&&(e&Ar)!==0&&(e&ac)===0;if(t){var i=tn;(i.e??(i.e=[])).push(n)}else return Lm(n)}function Lm(n){return yr(_d|fm,n,!1)}function Dy(n){return Am(),yr(rc|fm,n,!0)}function Py(n){vo.ensure();const e=yr(za|Mo,n,!0);return(t={})=>new Promise(i=>{t.outro?ea(e,()=>{Ri(e),i(void 0)}):(Ri(e),i(void 0))})}function qt(n){return yr(_d,n,!1)}function se(n,e){var t=tn,i={effect:null,ran:!1,deps:n};t.l.$.push(i),i.effect=Va(()=>{n(),!i.ran&&(i.ran=!0,A(e))})}function ht(){var n=tn;Va(()=>{for(var e of n.l.$){e.deps();var t=e.effect;t.f&Ln&&ti(t,Lr),No(t)&&Aa(t),e.ran=!1}})}function My(n){return yr(xd|Mo,n,!0)}function Va(n,e=0){return yr(rc|e,n,!0)}function B(n,e=[],t=[]){wm(e,t,i=>{yr(rc,()=>n(...i.map(r)),!0)})}function fa(n,e=0){var t=yr(qa|e,n,!0);return t}function gr(n,e=!0){return yr(Ar|Mo,n,!0,e)}function Nm(n){var e=n.teardown;if(e!==null){const t=Ua,i=Vt;Tf(!0),Fi(null);try{e.call(null)}finally{Tf(t),Fi(i)}}}function Rm(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const a=t.ac;a!==null&&Es(()=>{a.abort(wd)});var i=t.next;t.f&za?t.parent=null:Ri(t,e),t=i}}function Ay(n){for(var e=n.first;e!==null;){var t=e.next;e.f&Ar||Ri(e),e=t}}function Ri(n,e=!0){var t=!1;(e||n.f&dm)&&n.nodes_start!==null&&n.nodes_end!==null&&(Fm(n.nodes_start,n.nodes_end),t=!0),Rm(n,e&&!t),jl(n,0),ti(n,ja);var i=n.transitions;if(i!==null)for(const s of i)s.stop();Nm(n);var a=n.parent;a!==null&&a.first!==null&&qm(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function Fm(n,e){for(;n!==null;){var t=n===e?null:dc(n);n.remove(),n=t}}function qm(n){var e=n.parent,t=n.prev,i=n.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===n&&(e.first=i),e.last===n&&(e.last=t))}function ea(n,e){var t=[];Td(n,t,!0),zm(t,()=>{Ri(n),e&&e()})}function zm(n,e){var t=n.length;if(t>0){var i=()=>--t||e();for(var a of n)a.out(i)}else e()}function Td(n,e,t){if(!(n.f&Ji)){if(n.f^=Ji,n.transitions!==null)for(const o of n.transitions)(o.is_global||t)&&e.push(o);for(var i=n.first;i!==null;){var a=i.next,s=(i.f&Po)!==0||(i.f&Ar)!==0;Td(i,e,s?t:!1),i=a}}}function vc(n){jm(n,!0)}function jm(n,e){if(n.f&Ji){n.f^=Ji,n.f&Ln||(ti(n,Ni),bs(n));for(var t=n.first;t!==null;){var i=t.next,a=(t.f&Po)!==0||(t.f&Ar)!==0;jm(t,a?e:!1),t=i}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}let Ur=null;function Ly(n){var e=Ur;try{if(Ur=new Set,A(n),e!==null)for(var t of Ur)e.add(t);return Ur}finally{Ur=e}}function $a(n){for(var e of Ly(n))Dr(e,e.v)}let os=!1;function Sf(n){os=n}let Ua=!1;function Tf(n){Ua=n}let Vt=null,dr=!1;function Fi(n){Vt=n}let Ft=null;function qi(n){Ft=n}let ei=null;function Vm(n){Vt!==null&&(ei===null?ei=[n]:ei.push(n))}let Xn=null,bi=0,Di=null;function Ny(n){Di=n}let Um=1,mo=0,Ma=mo;function $f(n){Ma=n}let Jr=!1;function Bm(){return++Um}function No(n){var f;var e=n.f;if(e&Ni)return!0;if(e&Lr){var t=n.deps,i=(e&Ai)!==0;if(t!==null){var a,s,o=(e&ql)!==0,l=i&&Ft!==null&&!Jr,c=t.length;if((o||l)&&(Ft===null||!(Ft.f&ja))){var u=n,d=u.parent;for(a=0;a<c;a++)s=t[a],(o||!((f=s==null?void 0:s.reactions)!=null&&f.includes(u)))&&(s.reactions??(s.reactions=[])).push(u);o&&(u.f^=ql),l&&d!==null&&!(d.f&Ai)&&(u.f^=Ai)}for(a=0;a<c;a++)if(s=t[a],No(s)&&xm(s),s.wv>n.wv)return!0}(!i||Ft!==null&&!Jr)&&ti(n,Ln)}return!1}function Hm(n,e,t=!0){var i=n.reactions;if(i!==null&&!(ei!=null&&ei.includes(n)))for(var a=0;a<i.length;a++){var s=i[a];s.f&xi?Hm(s,e,!1):e===s&&(t?ti(s,Ni):s.f&Ln&&ti(s,Lr),bs(s))}}function Wm(n){var m;var e=Xn,t=bi,i=Di,a=Vt,s=Jr,o=ei,l=tn,c=dr,u=Ma,d=n.f;Xn=null,bi=0,Di=null,Jr=(d&Ai)!==0&&(dr||!os||Vt===null),Vt=d&(Ar|za)?null:n,ei=null,gs(n.ctx),dr=!1,Ma=++mo,n.ac!==null&&(Es(()=>{n.ac.abort(wd)}),n.ac=null);try{n.f|=$u;var f=n.fn,h=f(),p=n.deps;if(Xn!==null){var v;if(jl(n,bi),p!==null&&bi>0)for(p.length=bi+Xn.length,v=0;v<Xn.length;v++)p[bi+v]=Xn[v];else n.deps=p=Xn;if(!Jr||d&xi&&n.reactions!==null)for(v=bi;v<p.length;v++)((m=p[v]).reactions??(m.reactions=[])).push(n)}else p!==null&&bi<p.length&&(jl(n,bi),p.length=bi);if(da()&&Di!==null&&!dr&&p!==null&&!(n.f&(xi|Lr|Ni)))for(v=0;v<Di.length;v++)Hm(Di[v],n);return a!==null&&a!==n&&(mo++,Di!==null&&(i===null?i=Di:i.push(...Di))),n.f&Pa&&(n.f^=Pa),h}catch(g){return yy(g)}finally{n.f^=$u,Xn=e,bi=t,Di=i,Vt=a,Jr=s,ei=o,gs(l),dr=c,Ma=u}}function Ry(n,e){let t=e.reactions;if(t!==null){var i=Nb.call(t,n);if(i!==-1){var a=t.length-1;a===0?t=e.reactions=null:(t[i]=t[a],t.pop())}}t===null&&e.f&xi&&(Xn===null||!Xn.includes(e))&&(ti(e,Lr),e.f&(Ai|ql)||(e.f^=ql),_m(e),jl(e,0))}function jl(n,e){var t=n.deps;if(t!==null)for(var i=e;i<t.length;i++)Ry(n,t[i])}function Aa(n){var e=n.f;if(!(e&ja)){ti(n,Ln);var t=Ft,i=os;Ft=n,os=!0;try{e&qa?Ay(n):Rm(n),Nm(n);var a=Wm(n);n.teardown=typeof a=="function"?a:null,n.wv=Um;var s;lm&&py&&n.f&Ni&&n.deps}finally{os=i,Ft=t}}}async function Nn(){await Promise.resolve(),$m()}function r(n){var e=n.f,t=(e&xi)!==0;if(Ur==null||Ur.add(n),Vt!==null&&!dr){var i=Ft!==null&&(Ft.f&ja)!==0;if(!i&&!(ei!=null&&ei.includes(n))){var a=Vt.deps;if(Vt.f&$u)n.rv<mo&&(n.rv=mo,Xn===null&&a!==null&&a[bi]===n?bi++:Xn===null?Xn=[n]:(!Jr||!Xn.includes(n))&&Xn.push(n));else{(Vt.deps??(Vt.deps=[])).push(n);var s=n.reactions;s===null?n.reactions=[Vt]:s.includes(Vt)||s.push(Vt)}}}else if(t&&n.deps===null&&n.effects===null){var o=n,l=o.parent;l!==null&&!(l.f&Ai)&&(o.f^=Ai)}if(Ua){if(Qr.has(n))return Qr.get(n);if(t){o=n;var c=o.v;return(!(o.f&Ln)&&o.reactions!==null||Ym(o))&&(c=Sd(o)),Qr.set(o,c),c}}else if(t){if(o=n,Yr!=null&&Yr.has(o))return Yr.get(o);No(o)&&xm(o)}if(n.f&Pa)throw n.v;return n.v}function Ym(n){if(n.v===pn)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(Qr.has(e)||e.f&xi&&Ym(e))return!0;return!1}function A(n){var e=dr;try{return dr=!0,n()}finally{dr=e}}const Fy=-7169;function ti(n,e){n.f=n.f&Fy|e}function F(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(vr in n)Ou(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&vr in t&&Ou(t)}}}function Ou(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let i in n)try{Ou(n[i],e)}catch{}const t=yd(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=cm(t);for(let a in i){const s=i[a].get;if(s)try{s.call(n)}catch{}}}}}function qy(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const zy=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function jy(n){return zy.includes(n)}const Vy={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Uy(n){return n=n.toLowerCase(),Vy[n]??n}const By=["touchstart","touchmove"];function Hy(n){return By.includes(n)}const Km=new Set,Du=new Set;function Jm(n,e,t,i={}){function a(s){if(i.capture||Ys.call(e,s),!s.cancelBubble)return Es(()=>t==null?void 0:t.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?aa(()=>{e.addEventListener(n,a,i)}):e.addEventListener(n,a,i),a}function ce(n,e,t,i,a){var s={capture:i,passive:a},o=Jm(n,e,t,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Lo(()=>{e.removeEventListener(n,o,s)})}function $d(n){for(var e=0;e<n.length;e++)Km.add(n[e]);for(var t of Du)t(n)}let If=null;function Ys(n){var _;var e=this,t=e.ownerDocument,i=n.type,a=((_=n.composedPath)==null?void 0:_.call(n))||[],s=a[0]||n.target;If=n;var o=0,l=If===n&&n.__root;if(l){var c=a.indexOf(l);if(c!==-1&&(e===document||e===window)){n.__root=e;return}var u=a.indexOf(e);if(u===-1)return;c<=u&&(o=c)}if(s=a[o]||n.target,s!==e){Fl(n,"currentTarget",{configurable:!0,get(){return s||t}});var d=Vt,f=Ft;Fi(null),qi(null);try{for(var h,p=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+i];if(m!=null&&(!s.disabled||n.target===s))if(Is(m)){var[g,...k]=m;g.apply(s,[n,...k])}else m.call(s,n)}catch(E){h?p.push(E):h=E}if(n.cancelBubble||v===e||v===null)break;s=v}if(h){for(let E of p)queueMicrotask(()=>{throw E});throw h}}finally{n.__root=e,delete n.currentTarget,Fi(d),qi(f)}}}function Wy(n){var e;e=document.head.appendChild(Nr());try{fa(()=>n(e),dm)}finally{}}function Zm(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function po(n,e){var t=Ft;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function T(n,e){var t=(e&cy)!==0,i=(e&uy)!==0,a,s=!n.startsWith("<!>");return()=>{a===void 0&&(a=Zm(s?n:"<!>"+n),t||(a=Kr(a)));var o=i||Dm?document.importNode(a,!0):a.cloneNode(!0);if(t){var l=Kr(o),c=o.lastChild;po(l,c)}else po(o,o);return o}}function mr(n=""){{var e=Nr(n+"");return po(e,e),e}}function rt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=Nr();return n.append(e,t),po(e,t),n}function b(n,e){n!==null&&n.before(e)}let Pu=!0;function Ee(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function Yy(n,e){return Ky(n,e)}const Za=new Map;function Ky(n,{target:e,anchor:t,props:i={},events:a,context:s,intro:o=!0}){Iy();var l=new Set,c=f=>{for(var h=0;h<f.length;h++){var p=f[h];if(!l.has(p)){l.add(p);var v=Hy(p);e.addEventListener(p,Ys,{passive:v});var m=Za.get(p);m===void 0?(document.addEventListener(p,Ys,{passive:v}),Za.set(p,1)):Za.set(p,m+1)}}};c(bd(Km)),Du.add(c);var u=void 0,d=Py(()=>{var f=t??e.appendChild(Nr());return gr(()=>{if(s){Ke({});var h=tn;h.c=s}a&&(i.$$events=a),Pu=o,u=n(f,i)||{},Pu=!0,s&&Je()}),()=>{var v;for(var h of l){e.removeEventListener(h,Ys);var p=Za.get(h);--p===0?(document.removeEventListener(h,Ys),Za.delete(h)):Za.set(h,p)}Du.delete(c),f!==t&&((v=f.parentNode)==null||v.removeChild(f))}});return Jy.set(u,d),u}let Jy=new WeakMap;const Rc=0,Zo=1,Fc=2;function Zy(n,e,t,i,a){var s=n,o=da(),l=tn,c=pn,u,d,f,h=o?Pr(void 0):M(void 0,!1,!1),p=o?Pr(void 0):M(void 0,!1,!1),v=!1;function m(k,_){v=!0,_&&(qi(g),Fi(g),gs(l));try{k===Zo&&i&&(d?vc(d):d=gr(()=>i(s,h))),k!==Rc&&u&&ea(u,()=>u=null),k!==Zo&&d&&ea(d,()=>d=null),k!==Fc&&f&&ea(f,()=>f=null)}finally{_&&(gs(null),Fi(null),qi(null),$m())}}var g=fa(()=>{if(c!==(c=e())){if(qb(c)){var k=c;v=!1,k.then(_=>{k===c&&(Dr(h,_),m(Zo,!0))},_=>{if(k===c)throw Dr(p,_),m(Fc,!0),p.v}),aa(()=>{v||m(Rc,!0)})}else Dr(h,c),m(Zo,!1);return()=>c=pn}})}function X(n,e,t=!1){var i=n,a=null,s=null,o=pn,l=t?Po:0,c=!1;const u=(p,v=!0)=>{c=!0,h(v,p)};var d=null;function f(){d!==null&&(d.lastChild.remove(),i.before(d),d=null);var p=o?a:s,v=o?s:a;p&&vc(p),v&&ea(v,()=>{o?s=null:a=null})}const h=(p,v)=>{if(o!==(o=p)){var m=fc(),g=i;if(m&&(d=document.createDocumentFragment(),d.append(g=Nr())),o?a??(a=v&&gr(()=>v(g))):s??(s=v&&gr(()=>v(g))),m){var k=en,_=o?a:s,E=o?s:a;_&&k.skipped_effects.delete(_),E&&k.skipped_effects.add(E),k.add_callback(f)}else f()}};fa(()=>{c=!1,e(u),c||h(null,null)},l)}function Cf(n,e,t){var i=n,a=pn,s,o,l=null,c=da()?my:cc;function u(){s&&ea(s),l!==null&&(l.lastChild.remove(),i.before(l),l=null),s=o}fa(()=>{if(c(a,a=e())){var d=i,f=fc();f&&(l=document.createDocumentFragment(),l.append(d=Nr())),o=gr(()=>t(d)),f?en.add_callback(u):u()}})}let Il=null;function Nt(n,e){return e}function Gy(n,e,t){for(var i=n.items,a=[],s=e.length,o=0;o<s;o++)Td(e[o].e,a,!0);var l=s>0&&a.length===0&&t!==null;if(l){var c=t.parentNode;Cy(c),c.append(t),i.clear(),sr(n,e[0].prev,e[s-1].next)}zm(a,()=>{for(var u=0;u<s;u++){var d=e[u];l||(i.delete(d.k),sr(n,d.prev,d.next)),Ri(d.e,!l)}})}function bt(n,e,t,i,a,s=null){var o=n,l={flags:e,items:new Map,first:null},c=(e&vm)!==0;if(c){var u=n;o=u.appendChild(Nr())}var d=null,f=!1,h=new Map,p=ae(()=>{var k=t();return Is(k)?k:k==null?[]:bd(k)}),v,m;function g(){Xy(m,v,l,h,o,a,e,i,t),s!==null&&(v.length===0?d?vc(d):d=gr(()=>s(o)):d!==null&&ea(d,()=>{d=null}))}fa(()=>{m??(m=Ft),v=r(p);var k=v.length;if(!(f&&k===0)){f=k===0;var _,E,D,S;if(fc()){var C=new Set,w=en;for(E=0;E<k;E+=1){D=v[E],S=i(D,E);var $=l.items.get(S)??h.get(S);$?e&(oc|lc)&&Gm($,D,E,e):(_=Xm(null,l,null,null,D,S,E,a,e,t,!0),h.set(S,_)),C.add(S)}for(const[O,P]of l.items)C.has(O)||w.skipped_effects.add(P.e);w.add_callback(g)}else g();r(p)}})}function Xy(n,e,t,i,a,s,o,l,c){var W,te,de,pe;var u=(o&ey)!==0,d=(o&(oc|lc))!==0,f=e.length,h=t.items,p=t.first,v=p,m,g=null,k,_=[],E=[],D,S,C,w;if(u)for(w=0;w<f;w+=1)D=e[w],S=l(D,w),C=h.get(S),C!==void 0&&((W=C.a)==null||W.measure(),(k??(k=new Set)).add(C));for(w=0;w<f;w+=1){if(D=e[w],S=l(D,w),C=h.get(S),C===void 0){var $=i.get(S);if($!==void 0){i.delete(S),h.set(S,$);var O=g?g.next:v;sr(t,g,$),sr(t,$,O),qc($,O,a),g=$}else{var P=v?v.e.nodes_start:a;g=Xm(P,t,g,g===null?t.first:g.next,D,S,w,s,o,c)}h.set(S,g),_=[],E=[],v=g.next;continue}if(d&&Gm(C,D,w,o),C.e.f&Ji&&(vc(C.e),u&&((te=C.a)==null||te.unfix(),(k??(k=new Set)).delete(C))),C!==v){if(m!==void 0&&m.has(C)){if(_.length<E.length){var L=E[0],N;g=L.prev;var V=_[0],R=_[_.length-1];for(N=0;N<_.length;N+=1)qc(_[N],L,a);for(N=0;N<E.length;N+=1)m.delete(E[N]);sr(t,V.prev,R.next),sr(t,g,V),sr(t,R,L),v=L,g=R,w-=1,_=[],E=[]}else m.delete(C),qc(C,v,a),sr(t,C.prev,C.next),sr(t,C,g===null?t.first:g.next),sr(t,g,C),g=C;continue}for(_=[],E=[];v!==null&&v.k!==S;)v.e.f&Ji||(m??(m=new Set)).add(v),E.push(v),v=v.next;if(v===null)continue;C=v}_.push(C),g=C,v=C.next}if(v!==null||m!==void 0){for(var U=m===void 0?[]:bd(m);v!==null;)v.e.f&Ji||U.push(v),v=v.next;var H=U.length;if(H>0){var z=o&vm&&f===0?a:null;if(u){for(w=0;w<H;w+=1)(de=U[w].a)==null||de.measure();for(w=0;w<H;w+=1)(pe=U[w].a)==null||pe.fix()}Gy(t,U,z)}}u&&aa(()=>{var _e;if(k!==void 0)for(C of k)(_e=C.a)==null||_e.apply()}),n.first=t.first&&t.first.e,n.last=g&&g.e;for(var J of i.values())Ri(J.e);i.clear()}function Gm(n,e,t,i){i&oc&&Dr(n.v,e),i&lc?Dr(n.i,t):n.i=t}function Xm(n,e,t,i,a,s,o,l,c,u,d){var f=Il,h=(c&oc)!==0,p=(c&ty)===0,v=h?p?M(a,!1,!1):Pr(a):a,m=c&lc?Pr(o):o,g={i:m,v,k:s,a:null,e:null,prev:t,next:i};Il=g;try{if(n===null){var k=document.createDocumentFragment();k.append(n=Nr())}return g.e=gr(()=>l(n,v,m,u),vy),g.e.prev=t&&t.e,g.e.next=i&&i.e,t===null?d||(e.first=g):(t.next=g,t.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{Il=f}}function qc(n,e,t){for(var i=n.next?n.next.e.nodes_start:t,a=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==null&&s!==i;){var o=dc(s);a.before(s),s=o}}function sr(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Qy(n,e,t=!1,i=!1,a=!1){var s=n,o="";B(()=>{var l=Ft;if(o!==(o=e()??"")&&(l.nodes_start!==null&&(Fm(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),o!=="")){var c=o+"";t?c=`<svg>${c}</svg>`:i&&(c=`<math>${c}</math>`);var u=Zm(c);if((t||i)&&(u=Kr(u)),po(Kr(u),u.lastChild),t||i)for(;Kr(u);)s.before(Kr(u));else s.before(u)}})}function nn(n,e,t,i,a){var l;var s=(l=e.$$slots)==null?void 0:l[t],o=!1;s===!0&&(s=e[t==="default"?"children":t],o=!0),s===void 0?a!==null&&a(n):s(n,o?()=>i:i)}function wi(n,e,t){var i=n,a,s,o=null,l=null;function c(){s&&(ea(s),s=null),o&&(o.lastChild.remove(),i.before(o),o=null),s=l,l=null}fa(()=>{if(a!==(a=e())){var u=fc();if(a){var d=i;u&&(o=document.createDocumentFragment(),o.append(d=Nr()),s&&en.skipped_effects.add(s)),l=gr(()=>t(d,a))}u?en.add_callback(c):c()}},Po)}function nt(n,e,t){qt(()=>{var i=A(()=>e(n,t==null?void 0:t())||{});if(t&&(i!=null&&i.update)){var a=!1,s={};Va(()=>{var o=t();F(o),a&&cc(s,o)&&(s=o,i.update(o))}),a=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function e_(n,e){var t=void 0,i;fa(()=>{t!==(t=e())&&(i&&(Ri(i),i=null),t&&(i=gr(()=>{qt(()=>t(n))})))})}function Qm(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=Qm(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function t_(){for(var n,e,t=0,i="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=Qm(n))&&(i&&(i+=" "),i+=e);return i}function En(n){return typeof n=="object"?t_(n):n??""}const Ef=[...` 	
\r\fÂ \v\uFEFF`];function n_(n,e,t){var i=n==null?"":""+n;if(e&&(i=i?i+" "+e:e),t){for(var a in t)if(t[a])i=i?i+" "+a:a;else if(i.length)for(var s=a.length,o=0;(o=i.indexOf(a,o))>=0;){var l=o+s;(o===0||Ef.includes(i[o-1]))&&(l===i.length||Ef.includes(i[l]))?i=(o===0?"":i.substring(0,o))+i.substring(l+1):o=l}}return i===""?null:i}function Of(n,e=!1){var t=e?" !important;":";",i="";for(var a in n){var s=n[a];s!=null&&s!==""&&(i+=" "+a+": "+s+t)}return i}function zc(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function i_(n,e){if(e){var t="",i,a;if(Array.isArray(e)?(i=e[0],a=e[1]):i=e,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,l=!1,c=[];i&&c.push(...Object.keys(i).map(zc)),a&&c.push(...Object.keys(a).map(zc));var u=0,d=-1;const m=n.length;for(var f=0;f<m;f++){var h=n[f];if(l?h==="/"&&n[f-1]==="*"&&(l=!1):s?s===h&&(s=!1):h==="/"&&n[f+1]==="*"?l=!0:h==='"'||h==="'"?s=h:h==="("?o++:h===")"&&o--,!l&&s===!1&&o===0){if(h===":"&&d===-1)d=f;else if(h===";"||f===m-1){if(d!==-1){var p=zc(n.substring(u,d).trim());if(!c.includes(p)){h!==";"&&f++;var v=n.substring(u,f).trim();t+=" "+v+";"}}u=f+1,d=-1}}}}return i&&(t+=Of(i)),a&&(t+=Of(a,!0)),t=t.trim(),t===""?null:t}return n==null?null:String(n)}function Ue(n,e,t,i,a,s){var o=n.__className;if(o!==t||o===void 0){var l=n_(t,i,s);l==null?n.removeAttribute("class"):e?n.className=l:n.setAttribute("class",l),n.__className=t}else if(s&&a!==s)for(var c in s){var u=!!s[c];(a==null||u!==!!a[c])&&n.classList.toggle(c,u)}return s}function jc(n,e={},t,i){for(var a in t){var s=t[a];e[a]!==s&&(t[a]==null?n.style.removeProperty(a):n.style.setProperty(a,s,i))}}function r_(n,e,t,i){var a=n.__style;if(a!==e){var s=i_(e,i);s==null?n.removeAttribute("style"):n.style.cssText=s,n.__style=e}else i&&(Array.isArray(i)?(jc(n,t==null?void 0:t[0],i[0]),jc(n,t==null?void 0:t[1],i[1],"important")):jc(n,t,i));return i}function Vl(n,e,t=!1){if(n.multiple){if(e==null)return;if(!Is(e))return hy();for(var i of n.options)i.selected=e.includes(eo(i));return}for(i of n.options){var a=eo(i);if(Em(a,e)){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function ep(n){var e=new MutationObserver(()=>{Vl(n,n.__value)});e.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Lo(()=>{e.disconnect()})}function a_(n,e,t=e){var i=!0;hc(n,"change",a=>{var s=a?"[selected]":":checked",o;if(n.multiple)o=[].map.call(n.querySelectorAll(s),eo);else{var l=n.querySelector(s)??n.querySelector("option:not([disabled])");o=l&&eo(l)}t(o)}),qt(()=>{var a=e();if(Vl(n,a,i),i&&a===void 0){var s=n.querySelector(":checked");s!==null&&(a=eo(s),t(a))}n.__value=a,i=!1}),ep(n)}function eo(n){return"__value"in n?n.__value:n.value}const qs=Symbol("class"),zs=Symbol("style"),tp=Symbol("is custom element"),np=Symbol("is html");function Un(n,e){var t=mc(n);t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function ta(n,e){var t=mc(n);t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function s_(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function Y(n,e,t,i){var a=mc(n);a[e]!==(a[e]=t)&&(e==="loading"&&(n[Vb]=t),t==null?n.removeAttribute(e):typeof t!="string"&&ip(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function o_(n,e,t,i,a=!1){var s=mc(n),o=s[tp],l=!s[np],c=e||{},u=n.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class?t.class=En(t.class):(i||t[qs])&&(t.class=null),t[zs]&&(t.style??(t.style=null));var f=ip(n);for(const _ in t){let E=t[_];if(u&&_==="value"&&E==null){n.value=n.__value="",c[_]=E;continue}if(_==="class"){var h=n.namespaceURI==="http://www.w3.org/1999/xhtml";Ue(n,h,E,i,e==null?void 0:e[qs],t[qs]),c[_]=E,c[qs]=t[qs];continue}if(_==="style"){r_(n,E,e==null?void 0:e[zs],t[zs]),c[_]=E,c[zs]=t[zs];continue}var p=c[_];if(!(E===p&&!(E===void 0&&n.hasAttribute(_)))){c[_]=E;var v=_[0]+_[1];if(v!=="$$")if(v==="on"){const D={},S="$$"+_;let C=_.slice(2);var m=jy(C);if(qy(C)&&(C=C.slice(0,-7),D.capture=!0),!m&&p){if(E!=null)continue;n.removeEventListener(C,c[S],D),c[S]=null}if(E!=null)if(m)n[`__${C}`]=E,$d([C]);else{let w=function($){c[_].call(this,$)};c[S]=Jm(C,n,w,D)}else m&&(n[`__${C}`]=void 0)}else if(_==="style")Y(n,_,E);else if(_==="autofocus")Gi(n,!!E);else if(!o&&(_==="__value"||_==="value"&&E!=null))n.value=n.__value=E;else if(_==="selected"&&u)s_(n,E);else{var g=_;l||(g=Uy(g));var k=g==="defaultValue"||g==="defaultChecked";if(E==null&&!o&&!k)if(s[_]=null,g==="value"||g==="checked"){let D=n;const S=e===void 0;if(g==="value"){let C=D.defaultValue;D.removeAttribute(g),D.defaultValue=C,D.value=D.__value=S?C:null}else{let C=D.defaultChecked;D.removeAttribute(g),D.defaultChecked=C,D.checked=S?C:!1}}else n.removeAttribute(_);else k||f.includes(g)&&(o||typeof E!="string")?(n[g]=E,g in s&&(s[g]=pn)):typeof E!="function"&&Y(n,g,E)}}}return c}function _s(n,e,t=[],i=[],a,s=!1){wm(t,i,o=>{var l=void 0,c={},u=n.nodeName==="SELECT",d=!1;if(fa(()=>{var h=e(...o.map(r)),p=o_(n,l,h,a,s);d&&u&&"value"in h&&Vl(n,h.value);for(let m of Object.getOwnPropertySymbols(c))h[m]||Ri(c[m]);for(let m of Object.getOwnPropertySymbols(h)){var v=h[m];m.description===fy&&(!l||v!==l[m])&&(c[m]&&Ri(c[m]),c[m]=gr(()=>e_(n,()=>v))),p[m]=v}l=p}),u){var f=n;qt(()=>{Vl(f,l.value,!0),ep(f)})}d=!0})}function mc(n){return n.__attributes??(n.__attributes={[tp]:n.nodeName.includes("-"),[np]:n.namespaceURI===dy})}var Df=new Map;function ip(n){var e=Df.get(n.nodeName);if(e)return e;Df.set(n.nodeName,e=[]);for(var t,i=n,a=Element.prototype;a!==i;){t=cm(i);for(var s in t)t[s].set&&e.push(s);i=yd(i)}return e}const l_=()=>performance.now(),Ir={tick:n=>requestAnimationFrame(n),now:()=>l_(),tasks:new Set};function rp(){const n=Ir.now();Ir.tasks.forEach(e=>{e.c(n)||(Ir.tasks.delete(e),e.f())}),Ir.tasks.size!==0&&Ir.tick(rp)}function c_(n){let e;return Ir.tasks.size===0&&Ir.tick(rp),{promise:new Promise(t=>{Ir.tasks.add(e={c:n,f:t})}),abort(){Ir.tasks.delete(e)}}}function Go(n,e){Es(()=>{n.dispatchEvent(new CustomEvent(e))})}function u_(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Pf(n){const e={},t=n.split(";");for(const i of t){const[a,s]=i.split(":");if(!a||s===void 0)break;const o=u_(a.trim());e[o]=s.trim()}return e}const d_=n=>n;function f_(n,e,t){var i=Il,a,s,o,l=null;i.a??(i.a={element:n,measure(){a=this.element.getBoundingClientRect()},apply(){if(o==null||o.abort(),s=this.element.getBoundingClientRect(),a.left!==s.left||a.right!==s.right||a.top!==s.top||a.bottom!==s.bottom){const c=e()(this.element,{from:a,to:s},t==null?void 0:t());o=Ul(this.element,c,void 0,1,()=>{o==null||o.abort(),o=void 0})}},fix(){if(!n.getAnimations().length){var{position:c,width:u,height:d}=getComputedStyle(n);if(c!=="absolute"&&c!=="fixed"){var f=n.style;l={position:f.position,width:f.width,height:f.height,transform:f.transform},f.position="absolute",f.width=u,f.height=d;var h=n.getBoundingClientRect();if(a.left!==h.left||a.top!==h.top){var p=`translate(${a.left-h.left}px, ${a.top-h.top}px)`;f.transform=f.transform?`${f.transform} ${p}`:p}}}},unfix(){if(l){var c=n.style;c.position=l.position,c.width=l.width,c.height=l.height,c.transform=l.transform}}}),i.a.element=n}function Ct(n,e,t,i){var a=(n&sy)!==0,s=(n&oy)!==0,o=a&&s,l=(n&ly)!==0,c=o?"both":a?"in":"out",u,d=e.inert,f=e.style.overflow,h,p;function v(){return Es(()=>u??(u=t()(e,(i==null?void 0:i())??{},{direction:c})))}var m={is_global:l,in(){var E;if(e.inert=d,!a){p==null||p.abort(),(E=p==null?void 0:p.reset)==null||E.call(p);return}s||h==null||h.abort(),Go(e,"introstart"),h=Ul(e,v(),p,1,()=>{Go(e,"introend"),h==null||h.abort(),h=u=void 0,e.style.overflow=f})},out(E){if(!s){E==null||E(),u=void 0;return}e.inert=!0,Go(e,"outrostart"),p=Ul(e,v(),h,0,()=>{Go(e,"outroend"),E==null||E()})},stop:()=>{h==null||h.abort(),p==null||p.abort()}},g=Ft;if((g.transitions??(g.transitions=[])).push(m),a&&Pu){var k=l;if(!k){for(var _=g.parent;_&&_.f&Po;)for(;(_=_.parent)&&!(_.f&qa););k=!_||(_.f&ac)!==0}k&&qt(()=>{A(()=>m.in())})}}function Ul(n,e,t,i,a){var s=i===1;if(ns(e)){var o,l=!1;return aa(()=>{if(!l){var g=e({direction:s?"in":"out"});o=Ul(n,g,t,i,a)}}),{abort:()=>{l=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return a(),{abort:yi,deactivate:yi,reset:yi,t:()=>i};const{delay:c=0,css:u,tick:d,easing:f=d_}=e;var h=[];if(s&&t===void 0&&(d&&d(0,1),u)){var p=Pf(u(0,1));h.push(p,p)}var v=()=>1-i,m=n.animate(h,{duration:c,fill:"forwards"});return m.onfinish=()=>{m.cancel();var g=(t==null?void 0:t.t())??1-i;t==null||t.abort();var k=i-g,_=e.duration*Math.abs(k),E=[];if(_>0){var D=!1;if(u)for(var S=Math.ceil(_/16.666666666666668),C=0;C<=S;C+=1){var w=g+k*f(C/S),$=Pf(u(w,1-w));E.push($),D||(D=$.overflow==="hidden")}D&&(n.style.overflow="hidden"),v=()=>{var O=m.currentTime;return g+k*f(O/_)},d&&c_(()=>{if(m.playState!=="running")return!1;var O=v();return d(O,1-O),!0})}m=n.animate(E,{duration:_,fill:"forwards"}),m.onfinish=()=>{v=()=>i,d==null||d(i,1-i),a()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=yi)},deactivate:()=>{a=yi},reset:()=>{i===0&&(d==null||d(1,0))},t:()=>v()}}function _t(n,e,t=e){var i=da(),a=new WeakSet;hc(n,"input",s=>{var o=s?n.defaultValue:n.value;if(o=Uc(n)?Bc(o):o,t(o),en!==null&&a.add(en),i&&o!==(o=e())){var l=n.selectionStart,c=n.selectionEnd;n.value=o??"",c!==null&&(n.selectionStart=l,n.selectionEnd=Math.min(c,n.value.length))}}),A(e)==null&&n.value&&(t(Uc(n)?Bc(n.value):n.value),en!==null&&a.add(en)),Va(()=>{var s=e();if(n===document.activeElement){var o=Sl??en;if(a.has(o))return}Uc(n)&&s===Bc(n.value)||n.type==="date"&&!s&&!n.value||s!==n.value&&(n.value=s??"")})}const Vc=new Set;function h_(n,e,t,i,a=i){var s=t.getAttribute("type")==="checkbox",o=n;if(e!==null)for(var l of e)o=o[l]??(o[l]=[]);o.push(t),hc(t,"change",()=>{var c=t.__value;s&&(c=v_(o,c,t.checked)),a(c)},()=>a(s?[]:null)),Va(()=>{var c=i();s?(c=c||[],t.checked=c.includes(t.__value)):t.checked=Em(t.__value,c)}),Lo(()=>{var c=o.indexOf(t);c!==-1&&o.splice(c,1)}),Vc.has(o)||(Vc.add(o),aa(()=>{o.sort((c,u)=>c.compareDocumentPosition(u)===4?-1:1),Vc.delete(o)})),aa(()=>{})}function rn(n,e,t=e){hc(n,"change",i=>{var a=i?n.defaultChecked:n.checked;t(a)}),A(e)==null&&t(n.checked),Va(()=>{var i=e();n.checked=!!i})}function v_(n,e,t){for(var i=new Set,a=0;a<n.length;a+=1)n[a].checked&&i.add(n[a].__value);return t||i.delete(e),Array.from(i)}function Uc(n){var e=n.type;return e==="number"||e==="range"}function Bc(n){return n===""?null:+n}function xt(n,e,t){var i=Or(n,e);i&&i.set&&(n[e]=t,Lo(()=>{n[e]=null}))}function Mf(n,e){return n===e||(n==null?void 0:n[vr])===e}function gt(n={},e,t,i){return qt(()=>{var a,s;return Va(()=>{a=s,s=[],A(()=>{n!==t(...s)&&(e(n,...s),a&&Mf(t(...a),n)&&e(null,...a))})}),()=>{aa(()=>{s&&Mf(t(...s),n)&&e(null,...s)})}}),n}function gn(n){return function(...e){var t=e[0];return t.stopPropagation(),n==null?void 0:n.apply(this,e)}}function Et(n){return function(...e){var t=e[0];return t.preventDefault(),n==null?void 0:n.apply(this,e)}}function Ge(n=!1){const e=tn,t=e.l.u;if(!t)return;let i=()=>F(e.s);if(n){let a=0,s={};const o=Ao(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&a++,a});i=()=>r(o)}t.b.length&&Dy(()=>{Af(e,i),fo(t.b)}),ys(()=>{const a=A(()=>t.m.map(zb));return()=>{for(const s of a)typeof s=="function"&&s()}}),t.a.length&&ys(()=>{Af(e,i),fo(t.a)})}function Af(n,e){if(n.l.s)for(const t of n.l.s)r(t);e()}function F3(n){var e=Pr(0);return function(){return arguments.length===1?(x(e,r(e)+1),arguments[0]):(r(e),n())}}function ct(n,e){var s;var t=(s=n.$$events)==null?void 0:s[e.type],i=Is(t)?t.slice():t==null?[]:[t];for(var a of i)a.call(this,e)}function Id(n,e,t){if(n==null)return e(void 0),t&&t(void 0),yi;const i=A(()=>n.subscribe(e,t));return i.unsubscribe?()=>i.unsubscribe():i}const Ga=[];function ap(n,e){return{subscribe:mi(n,e).subscribe}}function mi(n,e=yi){let t=null;const i=new Set;function a(l){if(cc(n,l)&&(n=l,t)){const c=!Ga.length;for(const u of i)u[1](),Ga.push(u,n);if(c){for(let u=0;u<Ga.length;u+=2)Ga[u][0](Ga[u+1]);Ga.length=0}}}function s(l){a(l(n))}function o(l,c=yi){const u=[l,c];return i.add(u),i.size===1&&(t=e(a,s)||yi),l(n),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:a,update:s,subscribe:o}}function sp(n,e,t){const i=!Array.isArray(n),a=i?[n]:n;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return ap(t,(o,l)=>{let c=!1;const u=[];let d=0,f=yi;const h=()=>{if(d)return;f();const v=e(i?u[0]:u,o,l);s?o(v):f=typeof v=="function"?v:yi},p=a.map((v,m)=>Id(v,g=>{u[m]=g,d&=~(1<<m),c&&h()},()=>{d|=1<<m}));return c=!0,h(),function(){fo(p),f(),c=!1}})}function Cd(n){let e;return Id(n,t=>e=t)(),e}let Xo=!1,Mu=Symbol();function It(n,e,t){const i=t[e]??(t[e]={store:null,source:M(void 0),unsubscribe:yi});if(i.store!==n&&!(Mu in t))if(i.unsubscribe(),i.store=n??null,n==null)i.source.v=void 0,i.unsubscribe=yi;else{var a=!0;i.unsubscribe=Id(n,s=>{a?i.source.v=s:x(i.source,s)}),a=!1}return n&&Mu in t?Cd(n):r(i.source)}function ni(n,e){return n.set(e),e}function Rt(){const n={};function e(){Lo(()=>{for(var t in n)n[t].unsubscribe();Fl(n,Mu,{enumerable:!1,value:!0})})}return[n,e]}function m_(n){var e=Xo;try{return Xo=!1,[n(),Xo]}finally{Xo=e}}const p_={get(n,e){if(!n.exclude.includes(e))return r(n.version),e in n.special?n.special[e]():n.props[e]},set(n,e,t){if(!(e in n.special)){var i=Ft;try{qi(n.parent_effect),n.special[e]=re({get[e](){return n.props[e]}},e,mm)}finally{qi(i)}}return n.special[e](t),Cr(n.version),!0},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},deleteProperty(n,e){return n.exclude.includes(e)||(n.exclude.push(e),Cr(n.version)),!0},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function Ot(n,e){return new Proxy({props:n,exclude:e,special:{},version:Pr(0),parent_effect:Ft},p_)}const g_={get(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(ns(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i)return i[e]}},set(n,e,t){let i=n.props.length;for(;i--;){let a=n.props[i];ns(a)&&(a=a());const s=Or(a,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(ns(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i){const a=Or(i,e);return a&&!a.configurable&&(a.configurable=!0),a}}},has(n,e){if(e===vr||e===hm)return!1;for(let t of n.props)if(ns(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props)if(ns(t)&&(t=t()),!!t){for(const i in t)e.includes(i)||e.push(i);for(const i of Object.getOwnPropertySymbols(t))e.includes(i)||e.push(i)}return e}};function sn(...n){return new Proxy({props:n},g_)}function re(n,e,t,i){var E;var a=!Cs||(t&iy)!==0,s=(t&ry)!==0,o=(t&ay)!==0,l=i,c=!0,u=()=>(c&&(c=!1,l=o?A(i):i),l),d;if(s){var f=vr in n||hm in n;d=((E=Or(n,e))==null?void 0:E.set)??(f&&e in n?D=>n[e]=D:void 0)}var h,p=!1;s?[h,p]=m_(()=>n[e]):h=n[e],h===void 0&&i!==void 0&&(h=u(),d&&(a&&Zb(),d(h)));var v;if(a?v=()=>{var D=n[e];return D===void 0?u():(c=!0,D)}:v=()=>{var D=n[e];return D!==void 0&&(l=void 0),D===void 0?l:D},a&&!(t&mm))return v;if(d){var m=n.$$legacy;return function(D,S){return arguments.length>0?((!a||!S||m||p)&&d(S?v():D),D):v()}}var g=!1,k=(t&ny?Ao:ae)(()=>(g=!1,v()));s&&r(k);var _=Ft;return function(D,S){if(arguments.length>0){const C=S?r(k):a&&s?is(D):D;return x(k,C),g=!0,l!==void 0&&(l=C),D}return Ua&&g||_.f&ja?k.v:r(k)}}function vn(n){tn===null&&sc(),Cs&&tn.l!==null?op(tn).m.push(n):ys(()=>{const e=A(n);if(typeof e=="function")return e})}function Ro(n){tn===null&&sc(),vn(()=>()=>A(n))}function b_(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function Ut(){const n=tn;return n===null&&sc(),(e,t,i)=>{var s;const a=(s=n.s.$$events)==null?void 0:s[e];if(a){const o=Is(a)?a.slice():[a],l=b_(e,t,i);for(const c of o)c.call(n.x,l);return!l.defaultPrevented}return!0}}function y_(n){tn===null&&sc(),tn.l===null&&Jb(),op(tn).a.push(n)}function op(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const __="5";var om;typeof window<"u"&&((om=window.__svelte??(window.__svelte={})).v??(om.v=new Set)).add(__);class Ba extends Error{}class x_ extends Ba{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class w_ extends Ba{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class k_ extends Ba{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class rs extends Ba{}class lp extends Ba{constructor(e){super(`Invalid unit ${e}`)}}class Fn extends Ba{}class qr extends Ba{constructor(){super("Zone is an abstract class")}}const yt="numeric",Xi="short",_i="long",Bl={year:yt,month:yt,day:yt},cp={year:yt,month:Xi,day:yt},S_={year:yt,month:Xi,day:yt,weekday:Xi},up={year:yt,month:_i,day:yt},dp={year:yt,month:_i,day:yt,weekday:_i},fp={hour:yt,minute:yt},hp={hour:yt,minute:yt,second:yt},vp={hour:yt,minute:yt,second:yt,timeZoneName:Xi},mp={hour:yt,minute:yt,second:yt,timeZoneName:_i},pp={hour:yt,minute:yt,hourCycle:"h23"},gp={hour:yt,minute:yt,second:yt,hourCycle:"h23"},bp={hour:yt,minute:yt,second:yt,hourCycle:"h23",timeZoneName:Xi},yp={hour:yt,minute:yt,second:yt,hourCycle:"h23",timeZoneName:_i},_p={year:yt,month:yt,day:yt,hour:yt,minute:yt},xp={year:yt,month:yt,day:yt,hour:yt,minute:yt,second:yt},wp={year:yt,month:Xi,day:yt,hour:yt,minute:yt},kp={year:yt,month:Xi,day:yt,hour:yt,minute:yt,second:yt},T_={year:yt,month:Xi,day:yt,weekday:Xi,hour:yt,minute:yt},Sp={year:yt,month:_i,day:yt,hour:yt,minute:yt,timeZoneName:Xi},Tp={year:yt,month:_i,day:yt,hour:yt,minute:yt,second:yt,timeZoneName:Xi},$p={year:yt,month:_i,day:yt,weekday:_i,hour:yt,minute:yt,timeZoneName:_i},Ip={year:yt,month:_i,day:yt,weekday:_i,hour:yt,minute:yt,second:yt,timeZoneName:_i};class Fo{get type(){throw new qr}get name(){throw new qr}get ianaName(){return this.name}get isUniversal(){throw new qr}offsetName(e,t){throw new qr}formatOffset(e,t){throw new qr}offset(e){throw new qr}equals(e){throw new qr}get isValid(){throw new qr}}let Hc=null;class pc extends Fo{static get instance(){return Hc===null&&(Hc=new pc),Hc}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Fp(e,t,i)}formatOffset(e,t){return to(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const Au=new Map;function $_(n){let e=Au.get(n);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Au.set(n,e)),e}const I_={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function C_(n,e){const t=n.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,a,s,o,l,c,u,d]=i;return[o,a,s,l,c,u,d]}function E_(n,e){const t=n.formatToParts(e),i=[];for(let a=0;a<t.length;a++){const{type:s,value:o}=t[a],l=I_[s];s==="era"?i[l]=o:Dt(l)||(i[l]=parseInt(o,10))}return i}const Wc=new Map;class Mr extends Fo{static create(e){let t=Wc.get(e);return t===void 0&&Wc.set(e,t=new Mr(e)),t}static resetCache(){Wc.clear(),Au.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Mr.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Fp(e,t,i,this.name)}formatOffset(e,t){return to(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const i=$_(this.name);let[a,s,o,l,c,u,d]=i.formatToParts?E_(i,t):C_(i,t);l==="BC"&&(a=-Math.abs(a)+1);const h=bc({year:a,month:s,day:o,hour:c===24?0:c,minute:u,second:d,millisecond:0});let p=+t;const v=p%1e3;return p-=v>=0?v:1e3+v,(h-p)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Lf={};function O_(n,e={}){const t=JSON.stringify([n,e]);let i=Lf[t];return i||(i=new Intl.ListFormat(n,e),Lf[t]=i),i}const Lu=new Map;function Nu(n,e={}){const t=JSON.stringify([n,e]);let i=Lu.get(t);return i===void 0&&(i=new Intl.DateTimeFormat(n,e),Lu.set(t,i)),i}const Ru=new Map;function D_(n,e={}){const t=JSON.stringify([n,e]);let i=Ru.get(t);return i===void 0&&(i=new Intl.NumberFormat(n,e),Ru.set(t,i)),i}const Fu=new Map;function P_(n,e={}){const{base:t,...i}=e,a=JSON.stringify([n,i]);let s=Fu.get(a);return s===void 0&&(s=new Intl.RelativeTimeFormat(n,e),Fu.set(a,s)),s}let Ks=null;function M_(){return Ks||(Ks=new Intl.DateTimeFormat().resolvedOptions().locale,Ks)}const qu=new Map;function Cp(n){let e=qu.get(n);return e===void 0&&(e=new Intl.DateTimeFormat(n).resolvedOptions(),qu.set(n,e)),e}const zu=new Map;function A_(n){let e=zu.get(n);if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...Ep,...e}),zu.set(n,e)}return e}function L_(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let i,a;try{i=Nu(n).resolvedOptions(),a=n}catch{const c=n.substring(0,t);i=Nu(c).resolvedOptions(),a=c}const{numberingSystem:s,calendar:o}=i;return[a,s,o]}}function N_(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function R_(n){const e=[];for(let t=1;t<=12;t++){const i=$t.utc(2009,t,1);e.push(n(i))}return e}function F_(n){const e=[];for(let t=1;t<=7;t++){const i=$t.utc(2016,11,13+t);e.push(n(i))}return e}function Qo(n,e,t,i){const a=n.listingMode();return a==="error"?null:a==="en"?t(e):i(e)}function q_(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||Cp(n.locale).numberingSystem==="latn"}class z_{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:a,floor:s,...o}=i;if(!t||Object.keys(o).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=D_(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):Md(e,3);return xn(t,this.padTo)}}}class j_{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Mr.create(l).valid?(a=l,this.dt=e):(a="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,a=e.zone.name):(a="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||a,this.dtf=Nu(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class V_{constructor(e,t,i){this.opts={style:"long",...i},!t&&Np()&&(this.rtf=P_(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):ux(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Ep={firstDay:1,minimalDays:4,weekend:[6,7]};class Xt{static fromOpts(e){return Xt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,a,s=!1){const o=e||hn.defaultLocale,l=o||(s?"en-US":M_()),c=t||hn.defaultNumberingSystem,u=i||hn.defaultOutputCalendar,d=Vu(a)||hn.defaultWeekSettings;return new Xt(l,c,u,d,o)}static resetCache(){Ks=null,Lu.clear(),Ru.clear(),Fu.clear(),qu.clear(),zu.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:a}={}){return Xt.create(e,t,i,a)}constructor(e,t,i,a,s){const[o,l,c]=L_(e);this.locale=o,this.numberingSystem=t||l||null,this.outputCalendar=i||c||null,this.weekSettings=a,this.intl=N_(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=q_(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Xt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Vu(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Qo(this,e,jp,()=>{const i=this.intl==="ja"||this.intl.startsWith("ja-");t&=!i;const a=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";if(!this.monthsCache[s][e]){const o=i?l=>this.dtFormatter(l,a).format():l=>this.extract(l,a,"month");this.monthsCache[s][e]=R_(o)}return this.monthsCache[s][e]})}weekdays(e,t=!1){return Qo(this,e,Bp,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},a=t?"format":"standalone";return this.weekdaysCache[a][e]||(this.weekdaysCache[a][e]=F_(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[a][e]})}meridiems(){return Qo(this,void 0,()=>Hp,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[$t.utc(2016,11,13,9),$t.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Qo(this,e,Wp,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[$t.utc(-40,1,1),$t.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const a=this.dtFormatter(e,t),s=a.formatToParts(),o=s.find(l=>l.type.toLowerCase()===i);return o?o.value:null}numberFormatter(e={}){return new z_(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new j_(e,this.intl,t)}relFormatter(e={}){return new V_(this.intl,this.isEnglish(),e)}listFormatter(e={}){return O_(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Cp(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Rp()?A_(this.locale):Ep}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Yc=null;class Qn extends Fo{static get utcInstance(){return Yc===null&&(Yc=new Qn(0)),Yc}static instance(e){return e===0?Qn.utcInstance:new Qn(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Qn(yc(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${to(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${to(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return to(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class U_ extends Fo{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Br(n,e){if(Dt(n)||n===null)return e;if(n instanceof Fo)return n;if(J_(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?pc.instance:t==="utc"||t==="gmt"?Qn.utcInstance:Qn.parseSpecifier(t)||Mr.create(n)}else return na(n)?Qn.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new U_(n)}const Ed={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼]",gujr:"[à«¦-à«¯]",hanidec:"[ã|ä¸|äº|ä¸|å|äº|å­|ä¸|å«|ä¹]",khmr:"[á -á©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»]",limb:"[á¥-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ]",mymr:"[á-á]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹]",tibt:"[à¼ -à¼©]",latn:"\\d"},Nf={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},B_=Ed.hanidec.replace(/[\[|\]]/g,"").split("");function H_(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);if(n[t].search(Ed.hanidec)!==-1)e+=B_.indexOf(n[t]);else for(const a in Nf){const[s,o]=Nf[a];i>=s&&i<=o&&(e+=i-s)}}return parseInt(e,10)}else return e}const ju=new Map;function W_(){ju.clear()}function Bi({numberingSystem:n},e=""){const t=n||"latn";let i=ju.get(t);i===void 0&&(i=new Map,ju.set(t,i));let a=i.get(e);return a===void 0&&(a=new RegExp(`${Ed[t]}${e}`),i.set(e,a)),a}let Rf=()=>Date.now(),Ff="system",qf=null,zf=null,jf=null,Vf=60,Uf,Bf=null;class hn{static get now(){return Rf}static set now(e){Rf=e}static set defaultZone(e){Ff=e}static get defaultZone(){return Br(Ff,pc.instance)}static get defaultLocale(){return qf}static set defaultLocale(e){qf=e}static get defaultNumberingSystem(){return zf}static set defaultNumberingSystem(e){zf=e}static get defaultOutputCalendar(){return jf}static set defaultOutputCalendar(e){jf=e}static get defaultWeekSettings(){return Bf}static set defaultWeekSettings(e){Bf=Vu(e)}static get twoDigitCutoffYear(){return Vf}static set twoDigitCutoffYear(e){Vf=e%100}static get throwOnInvalid(){return Uf}static set throwOnInvalid(e){Uf=e}static resetCaches(){Xt.resetCache(),Mr.resetCache(),$t.resetCache(),W_()}}class Wi{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Op=[0,31,59,90,120,151,181,212,243,273,304,334],Dp=[0,31,60,91,121,152,182,213,244,274,305,335];function Pi(n,e){return new Wi("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function Od(n,e,t){const i=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const a=i.getUTCDay();return a===0?7:a}function Pp(n,e,t){return t+(qo(n)?Dp:Op)[e-1]}function Mp(n,e){const t=qo(n)?Dp:Op,i=t.findIndex(s=>s<e),a=e-t[i];return{month:i+1,day:a}}function Dd(n,e){return(n-e+7)%7+1}function Hl(n,e=4,t=1){const{year:i,month:a,day:s}=n,o=Pp(i,a,s),l=Dd(Od(i,a,s),t);let c=Math.floor((o-l+14-e)/7),u;return c<1?(u=i-1,c=go(u,e,t)):c>go(i,e,t)?(u=i+1,c=1):u=i,{weekYear:u,weekNumber:c,weekday:l,..._c(n)}}function Hf(n,e=4,t=1){const{weekYear:i,weekNumber:a,weekday:s}=n,o=Dd(Od(i,1,e),t),l=ls(i);let c=a*7+s-o-7+e,u;c<1?(u=i-1,c+=ls(u)):c>l?(u=i+1,c-=ls(i)):u=i;const{month:d,day:f}=Mp(u,c);return{year:u,month:d,day:f,..._c(n)}}function Kc(n){const{year:e,month:t,day:i}=n,a=Pp(e,t,i);return{year:e,ordinal:a,..._c(n)}}function Wf(n){const{year:e,ordinal:t}=n,{month:i,day:a}=Mp(e,t);return{year:e,month:i,day:a,..._c(n)}}function Yf(n,e){if(!Dt(n.localWeekday)||!Dt(n.localWeekNumber)||!Dt(n.localWeekYear)){if(!Dt(n.weekday)||!Dt(n.weekNumber)||!Dt(n.weekYear))throw new rs("Cannot mix locale-based week fields with ISO-based week fields");return Dt(n.localWeekday)||(n.weekday=n.localWeekday),Dt(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),Dt(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Y_(n,e=4,t=1){const i=gc(n.weekYear),a=Mi(n.weekNumber,1,go(n.weekYear,e,t)),s=Mi(n.weekday,1,7);return i?a?s?!1:Pi("weekday",n.weekday):Pi("week",n.weekNumber):Pi("weekYear",n.weekYear)}function K_(n){const e=gc(n.year),t=Mi(n.ordinal,1,ls(n.year));return e?t?!1:Pi("ordinal",n.ordinal):Pi("year",n.year)}function Ap(n){const e=gc(n.year),t=Mi(n.month,1,12),i=Mi(n.day,1,Wl(n.year,n.month));return e?t?i?!1:Pi("day",n.day):Pi("month",n.month):Pi("year",n.year)}function Lp(n){const{hour:e,minute:t,second:i,millisecond:a}=n,s=Mi(e,0,23)||e===24&&t===0&&i===0&&a===0,o=Mi(t,0,59),l=Mi(i,0,59),c=Mi(a,0,999);return s?o?l?c?!1:Pi("millisecond",a):Pi("second",i):Pi("minute",t):Pi("hour",e)}function Dt(n){return typeof n>"u"}function na(n){return typeof n=="number"}function gc(n){return typeof n=="number"&&n%1===0}function J_(n){return typeof n=="string"}function Z_(n){return Object.prototype.toString.call(n)==="[object Date]"}function Np(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Rp(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function G_(n){return Array.isArray(n)?n:[n]}function Kf(n,e,t){if(n.length!==0)return n.reduce((i,a)=>{const s=[e(a),a];return i&&t(i[0],s[0])===i[0]?i:s},null)[1]}function X_(n,e){return e.reduce((t,i)=>(t[i]=n[i],t),{})}function xs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Vu(n){if(n==null)return null;if(typeof n!="object")throw new Fn("Week settings must be an object");if(!Mi(n.firstDay,1,7)||!Mi(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!Mi(e,1,7)))throw new Fn("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function Mi(n,e,t){return gc(n)&&n>=e&&n<=t}function Q_(n,e){return n-e*Math.floor(n/e)}function xn(n,e=2){const t=n<0;let i;return t?i="-"+(""+-n).padStart(e,"0"):i=(""+n).padStart(e,"0"),i}function Vr(n){if(!(Dt(n)||n===null||n===""))return parseInt(n,10)}function pa(n){if(!(Dt(n)||n===null||n===""))return parseFloat(n)}function Pd(n){if(!(Dt(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function Md(n,e,t="round"){const i=10**e;switch(t){case"expand":return n>0?Math.ceil(n*i)/i:Math.floor(n*i)/i;case"trunc":return Math.trunc(n*i)/i;case"round":return Math.round(n*i)/i;case"floor":return Math.floor(n*i)/i;case"ceil":return Math.ceil(n*i)/i;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function qo(n){return n%4===0&&(n%100!==0||n%400===0)}function ls(n){return qo(n)?366:365}function Wl(n,e){const t=Q_(e-1,12)+1,i=n+(e-t)/12;return t===2?qo(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function bc(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function Jf(n,e,t){return-Dd(Od(n,1,e),t)+e-1}function go(n,e=4,t=1){const i=Jf(n,e,t),a=Jf(n+1,e,t);return(ls(n)-i+a)/7}function Uu(n){return n>99?n:n>hn.twoDigitCutoffYear?1900+n:2e3+n}function Fp(n,e,t,i=null){const a=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:e,...s},l=new Intl.DateTimeFormat(t,o).formatToParts(a).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function yc(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,a=t<0||Object.is(t,-0)?-i:i;return t*60+a}function qp(n){const e=Number(n);if(typeof n=="boolean"||n===""||!Number.isFinite(e))throw new Fn(`Invalid unit value ${n}`);return e}function Yl(n,e){const t={};for(const i in n)if(xs(n,i)){const a=n[i];if(a==null)continue;t[e(i)]=qp(a)}return t}function to(n,e){const t=Math.trunc(Math.abs(n/60)),i=Math.trunc(Math.abs(n%60)),a=n>=0?"+":"-";switch(e){case"short":return`${a}${xn(t,2)}:${xn(i,2)}`;case"narrow":return`${a}${t}${i>0?`:${i}`:""}`;case"techie":return`${a}${xn(t,2)}${xn(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function _c(n){return X_(n,["hour","minute","second","millisecond"])}const ex=["January","February","March","April","May","June","July","August","September","October","November","December"],zp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tx=["J","F","M","A","M","J","J","A","S","O","N","D"];function jp(n){switch(n){case"narrow":return[...tx];case"short":return[...zp];case"long":return[...ex];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Vp=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Up=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],nx=["M","T","W","T","F","S","S"];function Bp(n){switch(n){case"narrow":return[...nx];case"short":return[...Up];case"long":return[...Vp];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Hp=["AM","PM"],ix=["Before Christ","Anno Domini"],rx=["BC","AD"],ax=["B","A"];function Wp(n){switch(n){case"narrow":return[...ax];case"short":return[...rx];case"long":return[...ix];default:return null}}function sx(n){return Hp[n.hour<12?0:1]}function ox(n,e){return Bp(e)[n.weekday-1]}function lx(n,e){return jp(e)[n.month-1]}function cx(n,e){return Wp(e)[n.year<0?0:1]}function ux(n,e,t="always",i=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){const f=n==="days";switch(e){case 1:return f?"tomorrow":`next ${a[n][0]}`;case-1:return f?"yesterday":`last ${a[n][0]}`;case 0:return f?"today":`this ${a[n][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,u=a[n],d=i?c?u[1]:u[2]||u[1]:c?a[n][0]:n;return o?`${l} ${d} ago`:`in ${l} ${d}`}function Zf(n,e){let t="";for(const i of n)i.literal?t+=i.val:t+=e(i.val);return t}const dx={D:Bl,DD:cp,DDD:up,DDDD:dp,t:fp,tt:hp,ttt:vp,tttt:mp,T:pp,TT:gp,TTT:bp,TTTT:yp,f:_p,ff:wp,fff:Sp,ffff:$p,F:xp,FF:kp,FFF:Tp,FFFF:Ip};class zn{static create(e,t={}){return new zn(e,t)}static parseFormat(e){let t=null,i="",a=!1;const s=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?((i.length>0||a)&&s.push({literal:a||/^\s+$/.test(i),val:i===""?"'":i}),t=null,i="",a=!a):a||l===t?i+=l:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=l,t=l)}return i.length>0&&s.push({literal:a||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return dx[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,i=void 0){if(this.opts.forceSimple)return xn(e,t);const a={...this.opts};return t>0&&(a.padTo=t),i&&(a.signDisplay=i),this.loc.numberFormatter(a).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(p,v)=>this.loc.extract(e,p,v),o=p=>e.isOffsetFixed&&e.offset===0&&p.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,p.format):"",l=()=>i?sx(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(p,v)=>i?lx(e,p):s(v?{month:p}:{month:p,day:"numeric"},"month"),u=(p,v)=>i?ox(e,p):s(v?{weekday:p}:{weekday:p,month:"long",day:"numeric"},"weekday"),d=p=>{const v=zn.macroTokenToFormatOpts(p);return v?this.formatWithSystemDefault(e,v):p},f=p=>i?cx(e,p):s({era:p},"era"),h=p=>{switch(p){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return a?s({day:"numeric"},"day"):this.num(e.day);case"dd":return a?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return a?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return a?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return a?s({month:"numeric"},"month"):this.num(e.month);case"MM":return a?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return a?s({year:"numeric"},"year"):this.num(e.year);case"yy":return a?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return a?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return a?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(p)}};return Zf(zn.parseFormat(t),h)}formatDurationFromString(e,t){const i=this.opts.signMode==="negativeLargestOnly"?-1:1,a=d=>{switch(d[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(d,f)=>h=>{const p=a(h);if(p){const v=f.isNegativeDuration&&p!==f.largestUnit?i:1;let m;return this.opts.signMode==="negativeLargestOnly"&&p!==f.largestUnit?m="never":this.opts.signMode==="all"?m="always":m="auto",this.num(d.get(p)*v,h.length,m)}else return h},o=zn.parseFormat(t),l=o.reduce((d,{literal:f,val:h})=>f?d:d.concat(h),[]),c=e.shiftTo(...l.map(a).filter(d=>d)),u={isNegativeDuration:c<0,largestUnit:Object.keys(c.values)[0]};return Zf(o,s(c,u))}}const Yp=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Os(...n){const e=n.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function Ds(...n){return e=>n.reduce(([t,i,a],s)=>{const[o,l,c]=s(e,a);return[{...t,...o},l||i,c]},[{},null,1]).slice(0,2)}function Ps(n,...e){if(n==null)return[null,null];for(const[t,i]of e){const a=t.exec(n);if(a)return i(a)}return[null,null]}function Kp(...n){return(e,t)=>{const i={};let a;for(a=0;a<n.length;a++)i[n[a]]=Vr(e[t+a]);return[i,null,t+a]}}const Jp=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,fx=`(?:${Jp.source}?(?:\\[(${Yp.source})\\])?)?`,Ad=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Zp=RegExp(`${Ad.source}${fx}`),Ld=RegExp(`(?:[Tt]${Zp.source})?`),hx=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,vx=/(\d{4})-?W(\d\d)(?:-?(\d))?/,mx=/(\d{4})-?(\d{3})/,px=Kp("weekYear","weekNumber","weekDay"),gx=Kp("year","ordinal"),bx=/(\d{4})-(\d\d)-(\d\d)/,Gp=RegExp(`${Ad.source} ?(?:${Jp.source}|(${Yp.source}))?`),yx=RegExp(`(?: ${Gp.source})?`);function cs(n,e,t){const i=n[e];return Dt(i)?t:Vr(i)}function _x(n,e){return[{year:cs(n,e),month:cs(n,e+1,1),day:cs(n,e+2,1)},null,e+3]}function Ms(n,e){return[{hours:cs(n,e,0),minutes:cs(n,e+1,0),seconds:cs(n,e+2,0),milliseconds:Pd(n[e+3])},null,e+4]}function zo(n,e){const t=!n[e]&&!n[e+1],i=yc(n[e+1],n[e+2]),a=t?null:Qn.instance(i);return[{},a,e+3]}function jo(n,e){const t=n[e]?Mr.create(n[e]):null;return[{},t,e+1]}const xx=RegExp(`^T?${Ad.source}$`),wx=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function kx(n){const[e,t,i,a,s,o,l,c,u]=n,d=e[0]==="-",f=c&&c[0]==="-",h=(p,v=!1)=>p!==void 0&&(v||p&&d)?-p:p;return[{years:h(pa(t)),months:h(pa(i)),weeks:h(pa(a)),days:h(pa(s)),hours:h(pa(o)),minutes:h(pa(l)),seconds:h(pa(c),c==="-0"),milliseconds:h(Pd(u),f)}]}const Sx={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Nd(n,e,t,i,a,s,o){const l={year:e.length===2?Uu(Vr(e)):Vr(e),month:zp.indexOf(t)+1,day:Vr(i),hour:Vr(a),minute:Vr(s)};return o&&(l.second=Vr(o)),n&&(l.weekday=n.length>3?Vp.indexOf(n)+1:Up.indexOf(n)+1),l}const Tx=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function $x(n){const[,e,t,i,a,s,o,l,c,u,d,f]=n,h=Nd(e,a,i,t,s,o,l);let p;return c?p=Sx[c]:u?p=0:p=yc(d,f),[h,new Qn(p)]}function Ix(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Cx=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ex=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Ox=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Gf(n){const[,e,t,i,a,s,o,l]=n;return[Nd(e,a,i,t,s,o,l),Qn.utcInstance]}function Dx(n){const[,e,t,i,a,s,o,l]=n;return[Nd(e,l,t,i,a,s,o),Qn.utcInstance]}const Px=Os(hx,Ld),Mx=Os(vx,Ld),Ax=Os(mx,Ld),Lx=Os(Zp),Xp=Ds(_x,Ms,zo,jo),Nx=Ds(px,Ms,zo,jo),Rx=Ds(gx,Ms,zo,jo),Fx=Ds(Ms,zo,jo);function qx(n){return Ps(n,[Px,Xp],[Mx,Nx],[Ax,Rx],[Lx,Fx])}function zx(n){return Ps(Ix(n),[Tx,$x])}function jx(n){return Ps(n,[Cx,Gf],[Ex,Gf],[Ox,Dx])}function Vx(n){return Ps(n,[wx,kx])}const Ux=Ds(Ms);function Bx(n){return Ps(n,[xx,Ux])}const Hx=Os(bx,yx),Wx=Os(Gp),Yx=Ds(Ms,zo,jo);function Kx(n){return Ps(n,[Hx,Xp],[Wx,Yx])}const Xf="Invalid Duration",Qp={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Jx={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Qp},Ci=146097/400,Xa=146097/4800,Zx={years:{quarters:4,months:12,weeks:Ci/7,days:Ci,hours:Ci*24,minutes:Ci*24*60,seconds:Ci*24*60*60,milliseconds:Ci*24*60*60*1e3},quarters:{months:3,weeks:Ci/28,days:Ci/4,hours:Ci*24/4,minutes:Ci*24*60/4,seconds:Ci*24*60*60/4,milliseconds:Ci*24*60*60*1e3/4},months:{weeks:Xa/7,days:Xa,hours:Xa*24,minutes:Xa*24*60,seconds:Xa*24*60*60,milliseconds:Xa*24*60*60*1e3},...Qp},Ia=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Gx=Ia.slice(0).reverse();function wr(n,e,t=!1){const i={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new Ht(i)}function eg(n,e){let t=e.milliseconds??0;for(const i of Gx.slice(1))e[i]&&(t+=e[i]*n[i].milliseconds);return t}function Qf(n,e){const t=eg(n,e)<0?-1:1;Ia.reduceRight((i,a)=>{if(Dt(e[a]))return i;if(i){const s=e[i]*t,o=n[a][i],l=Math.floor(s/o);e[a]+=l*t,e[i]-=l*o*t}return a},null),Ia.reduce((i,a)=>{if(Dt(e[a]))return i;if(i){const s=e[i]%1;e[i]-=s,e[a]+=s*n[i][a]}return a},null)}function eh(n){const e={};for(const[t,i]of Object.entries(n))i!==0&&(e[t]=i);return e}class Ht{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?Zx:Jx;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Xt.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return Ht.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Fn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ht({values:Yl(e,Ht.normalizeUnit),loc:Xt.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(na(e))return Ht.fromMillis(e);if(Ht.isDuration(e))return e;if(typeof e=="object")return Ht.fromObject(e);throw new Fn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=Vx(e);return i?Ht.fromObject(i,t):Ht.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=Bx(e);return i?Ht.fromObject(i,t):Ht.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Fn("need to specify a reason the Duration is invalid");const i=e instanceof Wi?e:new Wi(e,t);if(hn.throwOnInvalid)throw new k_(i);return new Ht({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new lp(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?zn.create(this.loc,i).formatDurationFromString(this,e):Xf}toHuman(e={}){if(!this.isValid)return Xf;const t=e.showZeros!==!1,i=Ia.map(a=>{const s=this.values[a];return Dt(s)||s===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:a.slice(0,-1)}).format(s)}).filter(a=>a);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Md(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},$t.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?eg(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Ht.fromDurationLike(e),i={};for(const a of Ia)(xs(t.values,a)||xs(this.values,a))&&(i[a]=t.get(a)+this.get(a));return wr(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=Ht.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=qp(e(this.values[i],i));return wr(this,{values:t},!0)}get(e){return this[Ht.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Yl(e,Ht.normalizeUnit)};return wr(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:a}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:a,conversionAccuracy:i};return wr(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Qf(this.matrix,e),wr(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=eh(this.normalize().shiftToAll().toObject());return wr(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Ht.normalizeUnit(o));const t={},i={},a=this.toObject();let s;for(const o of Ia)if(e.indexOf(o)>=0){s=o;let l=0;for(const u in i)l+=this.matrix[u][o]*i[u],i[u]=0;na(a[o])&&(l+=a[o]);const c=Math.trunc(l);t[o]=c,i[o]=(l*1e3-c*1e3)/1e3}else na(a[o])&&(i[o]=a[o]);for(const o in i)i[o]!==0&&(t[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return Qf(this.matrix,t),wr(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return wr(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=eh(this.values);return wr(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,a){return i===void 0||i===0?a===void 0||a===0:i===a}for(const i of Ia)if(!t(this.values[i],e.values[i]))return!1;return!0}}const Qa="Invalid Interval";function Xx(n,e){return!n||!n.isValid?fn.invalid("missing or invalid start"):!e||!e.isValid?fn.invalid("missing or invalid end"):e<n?fn.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class fn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Fn("need to specify a reason the Interval is invalid");const i=e instanceof Wi?e:new Wi(e,t);if(hn.throwOnInvalid)throw new w_(i);return new fn({invalid:i})}static fromDateTimes(e,t){const i=js(e),a=js(t),s=Xx(i,a);return s??new fn({start:i,end:a})}static after(e,t){const i=Ht.fromDurationLike(t),a=js(e);return fn.fromDateTimes(a,a.plus(i))}static before(e,t){const i=Ht.fromDurationLike(t),a=js(e);return fn.fromDateTimes(a.minus(i),a)}static fromISO(e,t){const[i,a]=(e||"").split("/",2);if(i&&a){let s,o;try{s=$t.fromISO(i,t),o=s.isValid}catch{o=!1}let l,c;try{l=$t.fromISO(a,t),c=l.isValid}catch{c=!1}if(o&&c)return fn.fromDateTimes(s,l);if(o){const u=Ht.fromISO(a,t);if(u.isValid)return fn.after(s,u)}else if(c){const u=Ht.fromISO(i,t);if(u.isValid)return fn.before(l,u)}}return fn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let a;return t!=null&&t.useLocaleWeeks?a=this.end.reconfigure({locale:i.locale}):a=this.end,a=a.startOf(e,t),Math.floor(a.diff(i,e).get(e))+(a.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?fn.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(js).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),i=[];let{s:a}=this,s=0;for(;a<this.e;){const o=t[s]||this.e,l=+o>+this.e?this.e:o;i.push(fn.fromDateTimes(a,l)),a=l,s+=1}return i}splitBy(e){const t=Ht.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,a=1,s;const o=[];for(;i<this.e;){const l=this.start.plus(t.mapUnits(c=>c*a));s=+l>+this.e?this.e:l,o.push(fn.fromDateTimes(i,s)),i=s,a+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:fn.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return fn.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((a,s)=>a.s-s.s).reduce(([a,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[a,s.union(o)]:[a.concat([s]),o]:[a,o],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const a=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((c,u)=>c.time-u.time);for(const c of l)i+=c.type==="s"?1:-1,i===1?t=c.time:(t&&+t!=+c.time&&a.push(fn.fromDateTimes(t,c.time)),t=null);return fn.merge(a)}difference(...e){return fn.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â ${this.e.toISO()})`:Qa}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Bl,t={}){return this.isValid?zn.create(this.s.loc.clone(t),e).formatInterval(this):Qa}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Qa}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Qa}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Qa}toFormat(e,{separator:t=" â "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Qa}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Ht.invalid(this.invalidReason)}mapEndpoints(e){return fn.fromDateTimes(e(this.s),e(this.e))}}class el{static hasDST(e=hn.defaultZone){const t=$t.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Mr.isValidZone(e)}static normalizeZone(e){return Br(e,hn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Xt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Xt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Xt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null,outputCalendar:s="gregory"}={}){return(a||Xt.create(t,i,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null,outputCalendar:s="gregory"}={}){return(a||Xt.create(t,i,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null}={}){return(a||Xt.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null}={}){return(a||Xt.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Xt.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Xt.create(t,null,"gregory").eras(e)}static features(){return{relative:Np(),localeWeek:Rp()}}}function th(n,e){const t=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(n);return Math.floor(Ht.fromMillis(i).as("days"))}function Qx(n,e,t){const i=[["years",(c,u)=>u.year-c.year],["quarters",(c,u)=>u.quarter-c.quarter+(u.year-c.year)*4],["months",(c,u)=>u.month-c.month+(u.year-c.year)*12],["weeks",(c,u)=>{const d=th(c,u);return(d-d%7)/7}],["days",th]],a={},s=n;let o,l;for(const[c,u]of i)t.indexOf(c)>=0&&(o=c,a[c]=u(n,e),l=s.plus(a),l>e?(a[c]--,n=s.plus(a),n>e&&(l=n,a[c]--,n=s.plus(a))):n=l);return[n,a,l,o]}function e1(n,e,t,i){let[a,s,o,l]=Qx(n,e,t);const c=e-a,u=t.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);u.length===0&&(o<e&&(o=a.plus({[l]:1})),o!==a&&(s[l]=(s[l]||0)+c/(o-a)));const d=Ht.fromObject(s,i);return u.length>0?Ht.fromMillis(c,i).shiftTo(...u).plus(d):d}const t1="missing Intl.DateTimeFormat.formatToParts support";function Kt(n,e=t=>t){return{regex:n,deser:([t])=>e(H_(t))}}const n1="Â ",tg=`[ ${n1}]`,ng=new RegExp(tg,"g");function i1(n){return n.replace(/\./g,"\\.?").replace(ng,tg)}function nh(n){return n.replace(/\./g,"").replace(ng," ").toLowerCase()}function Hi(n,e){return n===null?null:{regex:RegExp(n.map(i1).join("|")),deser:([t])=>n.findIndex(i=>nh(t)===nh(i))+e}}function ih(n,e){return{regex:n,deser:([,t,i])=>yc(t,i),groups:e}}function tl(n){return{regex:n,deser:([e])=>e}}function r1(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a1(n,e){const t=Bi(e),i=Bi(e,"{2}"),a=Bi(e,"{3}"),s=Bi(e,"{4}"),o=Bi(e,"{6}"),l=Bi(e,"{1,2}"),c=Bi(e,"{1,3}"),u=Bi(e,"{1,6}"),d=Bi(e,"{1,9}"),f=Bi(e,"{2,4}"),h=Bi(e,"{4,6}"),p=g=>({regex:RegExp(r1(g.val)),deser:([k])=>k,literal:!0}),m=(g=>{if(n.literal)return p(g);switch(g.val){case"G":return Hi(e.eras("short"),0);case"GG":return Hi(e.eras("long"),0);case"y":return Kt(u);case"yy":return Kt(f,Uu);case"yyyy":return Kt(s);case"yyyyy":return Kt(h);case"yyyyyy":return Kt(o);case"M":return Kt(l);case"MM":return Kt(i);case"MMM":return Hi(e.months("short",!0),1);case"MMMM":return Hi(e.months("long",!0),1);case"L":return Kt(l);case"LL":return Kt(i);case"LLL":return Hi(e.months("short",!1),1);case"LLLL":return Hi(e.months("long",!1),1);case"d":return Kt(l);case"dd":return Kt(i);case"o":return Kt(c);case"ooo":return Kt(a);case"HH":return Kt(i);case"H":return Kt(l);case"hh":return Kt(i);case"h":return Kt(l);case"mm":return Kt(i);case"m":return Kt(l);case"q":return Kt(l);case"qq":return Kt(i);case"s":return Kt(l);case"ss":return Kt(i);case"S":return Kt(c);case"SSS":return Kt(a);case"u":return tl(d);case"uu":return tl(l);case"uuu":return Kt(t);case"a":return Hi(e.meridiems(),0);case"kkkk":return Kt(s);case"kk":return Kt(f,Uu);case"W":return Kt(l);case"WW":return Kt(i);case"E":case"c":return Kt(t);case"EEE":return Hi(e.weekdays("short",!1),1);case"EEEE":return Hi(e.weekdays("long",!1),1);case"ccc":return Hi(e.weekdays("short",!0),1);case"cccc":return Hi(e.weekdays("long",!0),1);case"Z":case"ZZ":return ih(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return ih(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return tl(/[a-z_+-/]{1,256}?/i);case" ":return tl(/[^\S\n\r]/);default:return p(g)}})(n)||{invalidReason:t1};return m.token=n,m}const s1={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function o1(n,e,t){const{type:i,value:a}=n;if(i==="literal"){const c=/^\s+$/.test(a);return{literal:!c,val:c?" ":a}}const s=e[i];let o=i;i==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let l=s1[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function l1(n){return[`^${n.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,n]}function c1(n,e,t){const i=n.match(e);if(i){const a={};let s=1;for(const o in t)if(xs(t,o)){const l=t[o],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(a[l.token.val[0]]=l.deser(i.slice(s,s+c))),s+=c}return[i,a]}else return[i,{}]}function u1(n){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return Dt(n.z)||(t=Mr.create(n.z)),Dt(n.Z)||(t||(t=new Qn(n.Z)),i=n.Z),Dt(n.q)||(n.M=(n.q-1)*3+1),Dt(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),Dt(n.u)||(n.S=Pd(n.u)),[Object.keys(n).reduce((s,o)=>{const l=e(o);return l&&(s[l]=n[o]),s},{}),t,i]}let Jc=null;function d1(){return Jc||(Jc=$t.fromMillis(1555555555555)),Jc}function f1(n,e){if(n.literal)return n;const t=zn.macroTokenToFormatOpts(n.val),i=sg(t,e);return i==null||i.includes(void 0)?n:i}function ig(n,e){return Array.prototype.concat(...n.map(t=>f1(t,e)))}class rg{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=ig(zn.parseFormat(t),e),this.units=this.tokens.map(i=>a1(i,e)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,a]=l1(this.units);this.regex=RegExp(i,"i"),this.handlers=a}}explainFromTokens(e){if(this.isValid){const[t,i]=c1(e,this.regex,this.handlers),[a,s,o]=i?u1(i):[null,null,void 0];if(xs(i,"a")&&xs(i,"H"))throw new rs("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:i,result:a,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function ag(n,e,t){return new rg(n,t).explainFromTokens(e)}function h1(n,e,t){const{result:i,zone:a,specificOffset:s,invalidReason:o}=ag(n,e,t);return[i,a,s,o]}function sg(n,e){if(!n)return null;const i=zn.create(e,n).dtFormatter(d1()),a=i.formatToParts(),s=i.resolvedOptions();return a.map(o=>o1(o,n,s))}const Zc="Invalid DateTime",rh=864e13;function Js(n){return new Wi("unsupported zone",`the zone "${n.name}" is not supported`)}function Gc(n){return n.weekData===null&&(n.weekData=Hl(n.c)),n.weekData}function Xc(n){return n.localWeekData===null&&(n.localWeekData=Hl(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function ga(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new $t({...t,...e,old:t})}function og(n,e,t){let i=n-e*60*1e3;const a=t.offset(i);if(e===a)return[i,e];i-=(a-e)*60*1e3;const s=t.offset(i);return a===s?[i,a]:[n-Math.min(a,s)*60*1e3,Math.max(a,s)]}function nl(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function Cl(n,e,t){return og(bc(n),e,t)}function ah(n,e){const t=n.o,i=n.c.year+Math.trunc(e.years),a=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:i,month:a,day:Math.min(n.c.day,Wl(i,a))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Ht.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=bc(s);let[c,u]=og(l,t,n.zone);return o!==0&&(c+=o,u=n.zone.offset(c)),{ts:c,o:u}}function es(n,e,t,i,a,s){const{setZone:o,zone:l}=t;if(n&&Object.keys(n).length!==0||e){const c=e||l,u=$t.fromObject(n,{...t,zone:c,specificOffset:s});return o?u:u.setZone(l)}else return $t.invalid(new Wi("unparsable",`the input "${a}" can't be parsed as ${i}`))}function il(n,e,t=!0){return n.isValid?zn.create(Xt.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function Qc(n,e,t){const i=n.c.year>9999||n.c.year<0;let a="";if(i&&n.c.year>=0&&(a+="+"),a+=xn(n.c.year,i?6:4),t==="year")return a;if(e){if(a+="-",a+=xn(n.c.month),t==="month")return a;a+="-"}else if(a+=xn(n.c.month),t==="month")return a;return a+=xn(n.c.day),a}function sh(n,e,t,i,a,s,o){let l=!t||n.c.millisecond!==0||n.c.second!==0,c="";switch(o){case"day":case"month":case"year":break;default:if(c+=xn(n.c.hour),o==="hour")break;if(e){if(c+=":",c+=xn(n.c.minute),o==="minute")break;l&&(c+=":",c+=xn(n.c.second))}else{if(c+=xn(n.c.minute),o==="minute")break;l&&(c+=xn(n.c.second))}if(o==="second")break;l&&(!i||n.c.millisecond!==0)&&(c+=".",c+=xn(n.c.millisecond,3))}return a&&(n.isOffsetFixed&&n.offset===0&&!s?c+="Z":n.o<0?(c+="-",c+=xn(Math.trunc(-n.o/60)),c+=":",c+=xn(Math.trunc(-n.o%60))):(c+="+",c+=xn(Math.trunc(n.o/60)),c+=":",c+=xn(Math.trunc(n.o%60)))),s&&(c+="["+n.zone.ianaName+"]"),c}const lg={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},v1={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},m1={ordinal:1,hour:0,minute:0,second:0,millisecond:0},El=["year","month","day","hour","minute","second","millisecond"],p1=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],g1=["year","ordinal","hour","minute","second","millisecond"];function Ol(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new lp(n);return e}function oh(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Ol(n)}}function b1(n){if(Zs===void 0&&(Zs=hn.now()),n.type!=="iana")return n.offset(Zs);const e=n.name;let t=Bu.get(e);return t===void 0&&(t=n.offset(Zs),Bu.set(e,t)),t}function lh(n,e){const t=Br(e.zone,hn.defaultZone);if(!t.isValid)return $t.invalid(Js(t));const i=Xt.fromObject(e);let a,s;if(Dt(n.year))a=hn.now();else{for(const c of El)Dt(n[c])&&(n[c]=lg[c]);const o=Ap(n)||Lp(n);if(o)return $t.invalid(o);const l=b1(t);[a,s]=Cl(n,l,t)}return new $t({ts:a,zone:t,loc:i,o:s})}function ch(n,e,t){const i=Dt(t.round)?!0:t.round,a=Dt(t.rounding)?"trunc":t.rounding,s=(l,c)=>(l=Md(l,i||t.calendary?0:2,t.calendary?"round":a),e.loc.clone(t).relFormatter(t).format(l,c)),o=l=>t.calendary?e.hasSame(n,l)?0:e.startOf(l).diff(n.startOf(l),l).get(l):e.diff(n,l).get(l);if(t.unit)return s(o(t.unit),t.unit);for(const l of t.units){const c=o(l);if(Math.abs(c)>=1)return s(c,l)}return s(n>e?-0:0,t.units[t.units.length-1])}function uh(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let Zs;const Bu=new Map;class $t{constructor(e){const t=e.zone||hn.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new Wi("invalid input"):null)||(t.isValid?null:Js(t));this.ts=Dt(e.ts)?hn.now():e.ts;let a=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[a,s]=[e.old.c,e.old.o];else{const l=na(e.o)&&!e.old?e.o:t.offset(this.ts);a=nl(this.ts,l),i=Number.isNaN(a.year)?new Wi("invalid input"):null,a=i?null:a,s=i?null:l}this._zone=t,this.loc=e.loc||Xt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=a,this.o=s,this.isLuxonDateTime=!0}static now(){return new $t({})}static local(){const[e,t]=uh(arguments),[i,a,s,o,l,c,u]=t;return lh({year:i,month:a,day:s,hour:o,minute:l,second:c,millisecond:u},e)}static utc(){const[e,t]=uh(arguments),[i,a,s,o,l,c,u]=t;return e.zone=Qn.utcInstance,lh({year:i,month:a,day:s,hour:o,minute:l,second:c,millisecond:u},e)}static fromJSDate(e,t={}){const i=Z_(e)?e.valueOf():NaN;if(Number.isNaN(i))return $t.invalid("invalid input");const a=Br(t.zone,hn.defaultZone);return a.isValid?new $t({ts:i,zone:a,loc:Xt.fromObject(t)}):$t.invalid(Js(a))}static fromMillis(e,t={}){if(na(e))return e<-rh||e>rh?$t.invalid("Timestamp out of range"):new $t({ts:e,zone:Br(t.zone,hn.defaultZone),loc:Xt.fromObject(t)});throw new Fn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(na(e))return new $t({ts:e*1e3,zone:Br(t.zone,hn.defaultZone),loc:Xt.fromObject(t)});throw new Fn("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=Br(t.zone,hn.defaultZone);if(!i.isValid)return $t.invalid(Js(i));const a=Xt.fromObject(t),s=Yl(e,oh),{minDaysInFirstWeek:o,startOfWeek:l}=Yf(s,a),c=hn.now(),u=Dt(t.specificOffset)?i.offset(c):t.specificOffset,d=!Dt(s.ordinal),f=!Dt(s.year),h=!Dt(s.month)||!Dt(s.day),p=f||h,v=s.weekYear||s.weekNumber;if((p||d)&&v)throw new rs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&d)throw new rs("Can't mix ordinal dates with month/day");const m=v||s.weekday&&!p;let g,k,_=nl(c,u);m?(g=p1,k=v1,_=Hl(_,o,l)):d?(g=g1,k=m1,_=Kc(_)):(g=El,k=lg);let E=!1;for(const P of g){const L=s[P];Dt(L)?E?s[P]=k[P]:s[P]=_[P]:E=!0}const D=m?Y_(s,o,l):d?K_(s):Ap(s),S=D||Lp(s);if(S)return $t.invalid(S);const C=m?Hf(s,o,l):d?Wf(s):s,[w,$]=Cl(C,u,i),O=new $t({ts:w,zone:i,o:$,loc:a});return s.weekday&&p&&e.weekday!==O.weekday?$t.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:$t.invalid(O.invalid)}static fromISO(e,t={}){const[i,a]=qx(e);return es(i,a,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,a]=zx(e);return es(i,a,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,a]=jx(e);return es(i,a,t,"HTTP",t)}static fromFormat(e,t,i={}){if(Dt(e)||Dt(t))throw new Fn("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:s=null}=i,o=Xt.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0}),[l,c,u,d]=h1(o,e,t);return d?$t.invalid(d):es(l,c,i,`format ${t}`,e,u)}static fromString(e,t,i={}){return $t.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,a]=Kx(e);return es(i,a,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Fn("need to specify a reason the DateTime is invalid");const i=e instanceof Wi?e:new Wi(e,t);if(hn.throwOnInvalid)throw new x_(i);return new $t({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=sg(e,Xt.fromObject(t));return i?i.map(a=>a?a.val:null).join(""):null}static expandFormat(e,t={}){return ig(zn.parseFormat(e),Xt.fromObject(t)).map(a=>a.val).join("")}static resetCache(){Zs=void 0,Bu.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Gc(this).weekYear:NaN}get weekNumber(){return this.isValid?Gc(this).weekNumber:NaN}get weekday(){return this.isValid?Gc(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Xc(this).weekday:NaN}get localWeekNumber(){return this.isValid?Xc(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Xc(this).weekYear:NaN}get ordinal(){return this.isValid?Kc(this.c).ordinal:NaN}get monthShort(){return this.isValid?el.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?el.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?el.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?el.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=bc(this.c),a=this.zone.offset(i-e),s=this.zone.offset(i+e),o=this.zone.offset(i-a*t),l=this.zone.offset(i-s*t);if(o===l)return[this];const c=i-o*t,u=i-l*t,d=nl(c,o),f=nl(u,l);return d.hour===f.hour&&d.minute===f.minute&&d.second===f.second&&d.millisecond===f.millisecond?[ga(this,{ts:c}),ga(this,{ts:u})]:[this]}get isInLeapYear(){return qo(this.year)}get daysInMonth(){return Wl(this.year,this.month)}get daysInYear(){return this.isValid?ls(this.year):NaN}get weeksInWeekYear(){return this.isValid?go(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?go(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:a}=zn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:a}}toUTC(e=0,t={}){return this.setZone(Qn.instance(e),t)}toLocal(){return this.setZone(hn.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=Br(e,hn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let a=this.ts;if(t||i){const s=e.offset(this.ts),o=this.toObject();[a]=Cl(o,s,e)}return ga(this,{ts:a,zone:e})}else return $t.invalid(Js(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const a=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return ga(this,{loc:a})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Yl(e,oh),{minDaysInFirstWeek:i,startOfWeek:a}=Yf(t,this.loc),s=!Dt(t.weekYear)||!Dt(t.weekNumber)||!Dt(t.weekday),o=!Dt(t.ordinal),l=!Dt(t.year),c=!Dt(t.month)||!Dt(t.day),u=l||c,d=t.weekYear||t.weekNumber;if((u||o)&&d)throw new rs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new rs("Can't mix ordinal dates with month/day");let f;s?f=Hf({...Hl(this.c,i,a),...t},i,a):Dt(t.ordinal)?(f={...this.toObject(),...t},Dt(t.day)&&(f.day=Math.min(Wl(f.year,f.month),f.day))):f=Wf({...Kc(this.c),...t});const[h,p]=Cl(f,this.o,this.zone);return ga(this,{ts:h,o:p})}plus(e){if(!this.isValid)return this;const t=Ht.fromDurationLike(e);return ga(this,ah(this,t))}minus(e){if(!this.isValid)return this;const t=Ht.fromDurationLike(e).negate();return ga(this,ah(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},a=Ht.normalizeUnit(e);switch(a){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(a==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(a==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?zn.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Zc}toLocaleString(e=Bl,t={}){return this.isValid?zn.create(this.loc.clone(t),e).formatDateTime(this):Zc}toLocaleParts(e={}){return this.isValid?zn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:a=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=Ol(o);const l=e==="extended";let c=Qc(this,l,o);return El.indexOf(o)>=3&&(c+="T"),c+=sh(this,l,t,i,a,s,o),c}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?Qc(this,e==="extended",Ol(t)):null}toISOWeekDate(){return il(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:a=!1,extendedZone:s=!1,format:o="extended",precision:l="milliseconds"}={}){return this.isValid?(l=Ol(l),(a&&El.indexOf(l)>=3?"T":"")+sh(this,o==="extended",t,e,i,s,l)):null}toRFC2822(){return il(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return il(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Qc(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let a="HH:mm:ss.SSS";return(t||e)&&(i&&(a+=" "),t?a+="z":e&&(a+="ZZ")),il(this,a,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Zc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return Ht.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=G_(t).map(Ht.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,c=o?e:this,u=e1(l,c,s,a);return o?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff($t.now(),e,t)}until(e){return this.isValid?fn.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const a=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,i)<=a&&a<=s.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||$t.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let a=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(a=e.unit,s=void 0),ch(t,this.plus(i),{...e,numeric:"always",units:a,unit:s})}toRelativeCalendar(e={}){return this.isValid?ch(e.base||$t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every($t.isDateTime))throw new Fn("min requires all arguments be DateTimes");return Kf(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every($t.isDateTime))throw new Fn("max requires all arguments be DateTimes");return Kf(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:a=null,numberingSystem:s=null}=i,o=Xt.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0});return ag(o,e,t)}static fromStringExplain(e,t,i={}){return $t.fromFormatExplain(e,t,i)}static buildFormatParser(e,t={}){const{locale:i=null,numberingSystem:a=null}=t,s=Xt.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0});return new rg(s,e)}static fromFormatParser(e,t,i={}){if(Dt(e)||Dt(t))throw new Fn("fromFormatParser requires an input string and a format parser");const{locale:a=null,numberingSystem:s=null}=i,o=Xt.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0});if(!o.equals(t.locale))throw new Fn(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:l,zone:c,specificOffset:u,invalidReason:d}=t.explainFromTokens(e);return d?$t.invalid(d):es(l,c,i,`format ${t.format}`,e,u)}static get DATE_SHORT(){return Bl}static get DATE_MED(){return cp}static get DATE_MED_WITH_WEEKDAY(){return S_}static get DATE_FULL(){return up}static get DATE_HUGE(){return dp}static get TIME_SIMPLE(){return fp}static get TIME_WITH_SECONDS(){return hp}static get TIME_WITH_SHORT_OFFSET(){return vp}static get TIME_WITH_LONG_OFFSET(){return mp}static get TIME_24_SIMPLE(){return pp}static get TIME_24_WITH_SECONDS(){return gp}static get TIME_24_WITH_SHORT_OFFSET(){return bp}static get TIME_24_WITH_LONG_OFFSET(){return yp}static get DATETIME_SHORT(){return _p}static get DATETIME_SHORT_WITH_SECONDS(){return xp}static get DATETIME_MED(){return wp}static get DATETIME_MED_WITH_SECONDS(){return kp}static get DATETIME_MED_WITH_WEEKDAY(){return T_}static get DATETIME_FULL(){return Sp}static get DATETIME_FULL_WITH_SECONDS(){return Tp}static get DATETIME_HUGE(){return $p}static get DATETIME_HUGE_WITH_SECONDS(){return Ip}}function js(n){if($t.isDateTime(n))return n;if(n&&n.valueOf&&na(n.valueOf()))return $t.fromJSDate(n);if(n&&typeof n=="object")return $t.fromObject(n);throw new Fn(`Unknown datetime argument: ${n}, of type ${typeof n}`)}const y1=[".jpg",".jpeg",".png",".svg",".gif",".jfif",".webp",".avif"],_1=[".mp4",".avi",".mov",".3gp",".wmv"],x1=[".aa",".aac",".m4v",".mp3",".ogg",".oga",".mogg",".amr"],w1=[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".odp",".odt",".ods",".txt"],k1=["relation","file","select"],S1=["text","email","url","editor"],cg=[{level:-4,label:"DEBUG",class:""},{level:0,label:"INFO",class:"label-success"},{level:4,label:"WARN",class:"label-warning"},{level:8,label:"ERROR",class:"label-danger"}];class q{static isObject(e){return e!==null&&typeof e=="object"&&e.constructor===Object}static clone(e){return typeof structuredClone<"u"?structuredClone(e):JSON.parse(JSON.stringify(e))}static zeroValue(e){switch(typeof e){case"string":return"";case"number":return 0;case"boolean":return!1;case"object":return e===null?null:Array.isArray(e)?[]:{};case"undefined":return;default:return null}}static isEmpty(e){return e===""||e===null||typeof e>"u"||Array.isArray(e)&&e.length===0||q.isObject(e)&&Object.keys(e).length===0}static isInput(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return t==="input"||t==="select"||t==="textarea"||(e==null?void 0:e.isContentEditable)}static isFocusable(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return q.isInput(e)||t==="button"||t==="a"||t==="details"||(e==null?void 0:e.tabIndex)>=0}static hasNonEmptyProps(e){for(let t in e)if(!q.isEmpty(e[t]))return!0;return!1}static toArray(e,t=!1){return Array.isArray(e)?e.slice():(t||!q.isEmpty(e))&&typeof e<"u"?[e]:[]}static inArray(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t)return!0;return!1}static removeByValue(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t){e.splice(i,1);break}}static pushUnique(e,t){q.inArray(e,t)||e.push(t)}static mergeUnique(e,t){for(let i of t)q.pushUnique(e,i);return e}static findByKey(e,t,i){e=Array.isArray(e)?e:[];for(let a in e)if(e[a][t]==i)return e[a];return null}static groupByKey(e,t){e=Array.isArray(e)?e:[];const i={};for(let a in e)i[e[a][t]]=i[e[a][t]]||[],i[e[a][t]].push(e[a]);return i}static removeByKey(e,t,i){for(let a in e)if(e[a][t]==i){e.splice(a,1);break}}static pushOrReplaceByKey(e,t,i="id"){for(let a=e.length-1;a>=0;a--)if(e[a][i]==t[i]){e[a]=t;return}e.push(t)}static filterDuplicatesByKey(e,t="id"){e=Array.isArray(e)?e:[];const i={};for(const a of e)i[a[t]]=a;return Object.values(i)}static filterRedactedProps(e,t="******"){const i=JSON.parse(JSON.stringify(e||{}));for(let a in i)typeof i[a]=="object"&&i[a]!==null?i[a]=q.filterRedactedProps(i[a],t):i[a]===t&&delete i[a];return i}static getNestedVal(e,t,i=null,a="."){let s=e||{},o=(t||"").split(a);for(const l of o){if(!q.isObject(s)&&!Array.isArray(s)||typeof s[l]>"u")return i;s=s[l]}return s}static setByPath(e,t,i,a="."){if(e===null||typeof e!="object"){console.warn("setByPath: data not an object or array.");return}let s=e,o=t.split(a),l=o.pop();for(const c of o)(!q.isObject(s)&&!Array.isArray(s)||!q.isObject(s[c])&&!Array.isArray(s[c]))&&(s[c]={}),s=s[c];s[l]=i}static deleteByPath(e,t,i="."){let a=e||{},s=(t||"").split(i),o=s.pop();for(const l of s)(!q.isObject(a)&&!Array.isArray(a)||!q.isObject(a[l])&&!Array.isArray(a[l]))&&(a[l]={}),a=a[l];Array.isArray(a)?a.splice(o,1):q.isObject(a)&&delete a[o],s.length>0&&(Array.isArray(a)&&!a.length||q.isObject(a)&&!Object.keys(a).length)&&(Array.isArray(e)&&e.length>0||q.isObject(e)&&Object.keys(e).length>0)&&q.deleteByPath(e,s.join(i),i)}static randomString(e=10){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}static randomSecret(e=15){if(typeof crypto>"u")return q.randomString(e);const t=new Uint8Array(e);crypto.getRandomValues(t);const i="-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let a="";for(let s=0;s<e;s++)a+=i.charAt(t[s]%i.length);return a}static sentenize(e,t=!0){if(typeof e!="string")return"";if(e=e.trim().split("_").join(" "),e==="")return e;if(e=e[0].toUpperCase()+e.substring(1),t){let i=e[e.length-1];i!=="."&&i!=="?"&&i!=="!"&&(e+=".")}return e}static trimQuotedValue(e){return typeof e=="string"&&(e[0]=='"'||e[0]=="'"||e[0]=="`")&&e[0]==e[e.length-1]?e.slice(1,-1):e}static plainText(e){return e?(new DOMParser().parseFromString(e,"text/html").body.innerText||"").trim():""}static truncate(e,t=150,i=!0){return e=""+e,e.length<=t?e:e.substring(0,t)+(i?"...":"")}static truncateObject(e){const t={};for(let i in e){let a=e[i];typeof a=="string"&&(a=q.truncate(a,150,!0)),t[i]=a}return t}static slugify(e,t="_",i=[".","=","-"]){if(e==="")return"";const a={a:/Ð°|Ã |Ã¡|Ã¥|Ã¢/gi,b:/Ð±/gi,c:/Ñ|Ã§/gi,d:/Ð´/gi,e:/Ðµ|Ã¨|Ã©|Ãª|áº½|Ã«/gi,f:/Ñ/gi,g:/Ð³/gi,h:/Ñ/gi,i:/Ð¹|Ð¸|Ã¬|Ã­|Ã®/gi,j:/Ð¶/gi,k:/Ðº/gi,l:/Ð»/gi,m:/Ð¼/gi,n:/Ð½|Ã±/gi,o:/Ð¾|Ã²|Ã³|Ã´|Ã¸/gi,p:/Ð¿/gi,q:/Ñ/gi,r:/Ñ/gi,s:/Ñ/gi,t:/Ñ/gi,u:/Ñ|Ã¹|Ãº|Å¯|Ã»/gi,v:/Ð²/gi,w:/Ð²/gi,x:/Ñ/gi,y:/Ñ/gi,z:/Ð·/gi,ae:/Ã¤|Ã¦/gi,oe:/Ã¶/gi,ue:/Ã¼/gi,Ae:/Ã/gi,Ue:/Ã/gi,Oe:/Ã/gi,ss:/Ã/gi,and:/&/gi};for(let s in a)e=e.replace(a[s],s);return e.replace(new RegExp("["+i.join("")+"]","g")," ").replace(/[^\w\ ]/gi,"").replace(/\s+/g,t)}static escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}static splitNonEmpty(e,t=","){const i=[],a=(e||"").replaceAll("\\"+t,"{_PB_ESCAPED_}").split(t).map(s=>s.replaceAll("{_PB_ESCAPED_}",t));for(let s of a)s=s.trim(),q.isEmpty(s)||i.push(s);return i}static joinNonEmpty(e,t=", ",i=!0){e=e||[];const a=[],s=t.length>1?t.trim():t;for(let o of e)o=typeof o=="string"?o.trim():"",!q.isEmpty(o)&&(i&&(o=o.replaceAll(s,"\\"+s)),a.push(o));return a.join(t)}static getInitials(e){if(e=(e||"").split("@")[0].trim(),e.length<=2)return e.toUpperCase();const t=e.split(/[\.\_\-\ ]/);return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e[0].toUpperCase()}static formattedFileSize(e){const t=e?Math.floor(Math.log(e)/Math.log(1024)):0;return(e/Math.pow(1024,t)).toFixed(2)*1+" "+["B","KB","MB","GB","TB"][t]}static getDateTime(e){if(typeof e=="string"){const t={19:"yyyy-MM-dd HH:mm:ss",23:"yyyy-MM-dd HH:mm:ss.SSS",20:"yyyy-MM-dd HH:mm:ss'Z'",24:"yyyy-MM-dd HH:mm:ss.SSS'Z'"},i=t[e.length]||t[19];return $t.fromFormat(e,i,{zone:"UTC"})}return typeof e=="number"?$t.fromMillis(e):$t.fromJSDate(e)}static formatToUTCDate(e,t="yyyy-MM-dd HH:mm:ss"){return q.getDateTime(e).toUTC().toFormat(t)}static formatToLocalDate(e,t="yyyy-MM-dd HH:mm:ss"){return q.getDateTime(e).toLocal().toFormat(t)}static async copyToClipboard(e){var t;if(typeof e=="object")try{e=JSON.stringify(e,null,2)}catch{}if(e=""+e,!(!e.length||!((t=window==null?void 0:window.navigator)!=null&&t.clipboard)))return window.navigator.clipboard.writeText(e).catch(i=>{console.warn("Failed to copy.",i)})}static download(e,t){const i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("download",t),i.setAttribute("target","_blank"),i.click(),i.remove()}static downloadJson(e,t){t=t.endsWith(".json")?t:t+".json";const i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=window.URL.createObjectURL(i);q.download(a,t)}static getJWTPayload(e){const t=(e||"").split(".")[1]||"";if(t==="")return{};try{const i=decodeURIComponent(atob(t));return JSON.parse(i)||{}}catch(i){console.warn("Failed to parse JWT payload data.",i)}return{}}static hasImageExtension(e){return e=e||"",!!y1.find(t=>e.toLowerCase().endsWith(t))}static hasVideoExtension(e){return e=e||"",!!_1.find(t=>e.toLowerCase().endsWith(t))}static hasAudioExtension(e){return e=e||"",!!x1.find(t=>e.toLowerCase().endsWith(t))}static hasDocumentExtension(e){return e=e||"",!!w1.find(t=>e.toLowerCase().endsWith(t))}static getFileType(e){return q.hasImageExtension(e)?"image":q.hasDocumentExtension(e)?"document":q.hasVideoExtension(e)?"video":q.hasAudioExtension(e)?"audio":"file"}static generateThumb(e,t=100,i=100){return new Promise(a=>{let s=new FileReader;s.onload=function(o){let l=new Image;l.onload=function(){let c=document.createElement("canvas"),u=c.getContext("2d"),d=l.width,f=l.height;return c.width=t,c.height=i,u.drawImage(l,d>f?(d-f)/2:0,0,d>f?f:d,d>f?f:d,0,0,t,i),a(c.toDataURL(e.type))},l.src=o.target.result},s.readAsDataURL(e)})}static addValueToFormData(e,t,i){if(!(typeof i>"u"))if(q.isEmpty(i))e.append(t,"");else if(Array.isArray(i))for(const a of i)q.addValueToFormData(e,t,a);else i instanceof File?e.append(t,i):i instanceof Date?e.append(t,i.toISOString()):q.isObject(i)?e.append(t,JSON.stringify(i)):e.append(t,""+i)}static dummyCollectionRecord(e){return Object.assign({collectionId:e==null?void 0:e.id,collectionName:e==null?void 0:e.name},q.dummyCollectionSchemaData(e))}static dummyCollectionSchemaData(e,t=!1){var s;const i=(e==null?void 0:e.fields)||[],a={};for(const o of i){if(o.hidden||t&&o.primaryKey&&o.autogeneratePattern||t&&o.type==="autodate")continue;let l=null;if(o.type==="number")l=123;else if(o.type==="date"||o.type==="autodate")l="2022-01-01 10:00:00.123Z";else if(o.type=="bool")l=!0;else if(o.type=="email")l="test@example.com";else if(o.type=="url")l="https://example.com";else if(o.type=="json")l="JSON";else if(o.type=="file"){if(t)continue;l="filename.jpg",o.maxSelect!=1&&(l=[l])}else if(o.type=="select")l=(s=o==null?void 0:o.values)==null?void 0:s[0],(o==null?void 0:o.maxSelect)!=1&&(l=[l]);else if(o.type=="relation"){const u=Array.isArray(o==null?void 0:o.collectionIds)&&o.collectionIds.length>0?"collectionId:RELATION_RECORD_ID":"RELATION_RECORD_ID";l=u,(o==null?void 0:o.maxSelect)!=1&&(l=[u])}else o.type=="geoPoint"?l={lon:0,lat:0}:l="test";a[o.name]=l}return a}static getCollectionTypeIcon(e){switch(e==null?void 0:e.toLowerCase()){case"auth":return"ri-group-line";case"view":return"ri-table-line";default:return"ri-folder-2-line"}}static getFieldTypeIcon(e){switch(e){case"primary":return"ri-key-line";case"text":return"ri-text";case"number":return"ri-hashtag";case"date":return"ri-calendar-line";case"bool":return"ri-toggle-line";case"email":return"ri-mail-line";case"url":return"ri-link";case"editor":return"ri-edit-2-line";case"select":return"ri-list-check";case"json":return"ri-braces-line";case"file":return"ri-image-line";case"relation":return"ri-mind-map";case"password":return"ri-lock-password-line";case"autodate":return"ri-calendar-check-line";case"geoPoint":return"ri-map-pin-2-line";default:return"ri-star-s-line"}}static getFieldValueType(e){switch(e==null?void 0:e.type){case"bool":return"Boolean";case"number":return"Number";case"geoPoint":return"Object";case"file":return"File";case"select":case"relation":return(e==null?void 0:e.maxSelect)==1?"String":"Array<String>";default:return"String"}}static zeroDefaultStr(e){return(e==null?void 0:e.type)==="number"?"0":(e==null?void 0:e.type)==="bool"?"false":(e==null?void 0:e.type)==="geoPoint"?'{"lon":0,"lat":0}':(e==null?void 0:e.type)==="json"?'null, "", [], {}':["select","relation","file"].includes(e==null?void 0:e.type)&&(e==null?void 0:e.maxSelect)!=1?"[]":'""'}static getApiExampleUrl(e){return(window.location.href.substring(0,window.location.href.indexOf("/_"))||e||"/").replace("//localhost","//127.0.0.1")}static hasCollectionChanges(e,t,i=!1){if(e=e||{},t=t||{},e.id!=t.id)return!0;for(let u in e)if(u!=="fields"&&JSON.stringify(e[u])!==JSON.stringify(t[u]))return!0;const a=Array.isArray(e.fields)?e.fields:[],s=Array.isArray(t.fields)?t.fields:[],o=a.filter(u=>(u==null?void 0:u.id)&&!q.findByKey(s,"id",u.id)),l=s.filter(u=>(u==null?void 0:u.id)&&!q.findByKey(a,"id",u.id)),c=s.filter(u=>{const d=q.isObject(u)&&q.findByKey(a,"id",u.id);if(!d)return!1;for(let f in d)if(JSON.stringify(u[f])!=JSON.stringify(d[f]))return!0;return!1});return!!(l.length||c.length||i&&o.length)}static sortCollections(e=[]){const t=[],i=[],a=[];for(const o of e)o.type==="auth"?t.push(o):o.type==="base"?i.push(o):a.push(o);function s(o,l){return o.name>l.name?1:o.name<l.name?-1:0}return[].concat(t.sort(s),i.sort(s),a.sort(s))}static getExpandPresentableRelFields(e,t,i=2){let a=[];const s=t.find(o=>o.id==e.collectionId);if(!s)return a;for(const o of s.fields){if(!o.presentable||o.type!="relation"||i<=0)continue;const l=q.getExpandPresentableRelFields(o,t,i-1);for(const c of l)a.push(e.name+"."+c)}return a.length||a.push(e.name),a}static yieldToMain(){return new Promise(e=>{setTimeout(e,0)})}static defaultFlatpickrOptions(){return{dateFormat:"Y-m-d H:i:S",disableMobile:!0,allowInput:!0,enableTime:!0,time_24hr:!0,locale:{firstDayOfWeek:1}}}static defaultEditorOptions(){const e=["DIV","P","A","EM","B","STRONG","H1","H2","H3","H4","H5","H6","TABLE","TR","TD","TH","TBODY","THEAD","TFOOT","BR","HR","Q","SUP","SUB","DEL","IMG","OL","UL","LI","CODE"];function t(a){let s=a.parentNode;for(;a.firstChild;)s.insertBefore(a.firstChild,a);s.removeChild(a)}function i(a){if(a){for(const s of a.children)i(s);e.includes(a.tagName)?(a.removeAttribute("style"),a.removeAttribute("class")):t(a)}}return{branding:!1,promotion:!1,menubar:!1,min_height:270,height:270,max_height:700,autoresize_bottom_margin:30,convert_unsafe_embeds:!0,skin:"pocketbase",content_style:"body { font-size: 14px }",plugins:["autoresize","autolink","lists","link","image","searchreplace","fullscreen","media","table","code","codesample","directionality"],codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"CSS",value:"css"},{text:"SQL",value:"sql"},{text:"JavaScript",value:"javascript"},{text:"Go",value:"go"},{text:"Dart",value:"dart"},{text:"Zig",value:"zig"},{text:"Rust",value:"rust"},{text:"Lua",value:"lua"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"Markdown",value:"markdown"},{text:"Swift",value:"swift"},{text:"Kotlin",value:"kotlin"},{text:"Elixir",value:"elixir"},{text:"Scala",value:"scala"},{text:"Julia",value:"julia"},{text:"Haskell",value:"haskell"}],toolbar:"styles | alignleft aligncenter alignright | bold italic forecolor backcolor | bullist numlist | link image_picker table codesample direction | code fullscreen",paste_postprocess:(a,s)=>{i(s.node)},file_picker_types:"image",file_picker_callback:(a,s,o)=>{const l=document.createElement("input");l.setAttribute("type","file"),l.setAttribute("accept","image/*"),l.addEventListener("change",c=>{const u=c.target.files[0],d=new FileReader;d.addEventListener("load",()=>{if(!tinymce)return;const f="blobid"+new Date().getTime(),h=tinymce.activeEditor.editorUpload.blobCache,p=d.result.split(",")[1],v=h.create(f,u,p);h.add(v),a(v.blobUri(),{title:u.name})}),d.readAsDataURL(u)}),l.click()},setup:a=>{a.on("keydown",o=>{(o.ctrlKey||o.metaKey)&&o.code=="KeyS"&&a.formElement&&(o.preventDefault(),o.stopPropagation(),a.formElement.dispatchEvent(new KeyboardEvent("keydown",o)))});const s="tinymce_last_direction";a.on("init",()=>{var l;const o=(l=window==null?void 0:window.localStorage)==null?void 0:l.getItem(s);!a.isDirty()&&a.getContent()==""&&o=="rtl"&&a.execCommand("mceDirectionRTL")}),a.ui.registry.addMenuButton("direction",{icon:"visualchars",fetch:o=>{o([{type:"menuitem",text:"LTR content",icon:"ltr",onAction:()=>{var c;(c=window==null?void 0:window.localStorage)==null||c.setItem(s,"ltr"),a.execCommand("mceDirectionLTR")}},{type:"menuitem",text:"RTL content",icon:"rtl",onAction:()=>{var c;(c=window==null?void 0:window.localStorage)==null||c.setItem(s,"rtl"),a.execCommand("mceDirectionRTL")}}])}}),a.ui.registry.addMenuButton("image_picker",{icon:"image",fetch:o=>{o([{type:"menuitem",text:"From collection",icon:"gallery",onAction:()=>{a.dispatch("collections_file_picker",{})}},{type:"menuitem",text:"Inline",icon:"browse",onAction:()=>{a.execCommand("mceImage")}}])}})}}}static displayValue(e,t,i="N/A"){e=e||{},t=t||[];let a=[];for(const o of t){let l=e[o];typeof l>"u"||(l=q.stringifyValue(l,i),a.push(l))}if(a.length>0)return a.join(", ");const s=["title","name","slug","email","username","nickname","label","heading","message","key","identifier","id"];for(const o of s){let l=q.stringifyValue(e[o],"");if(l)return l}return i}static stringifyValue(e,t="N/A",i=150){if(q.isEmpty(e))return t;if(typeof e=="number")return""+e;if(typeof e=="boolean")return e?"True":"False";if(typeof e=="string")return e=e.indexOf("<")>=0?q.plainText(e):e,q.truncate(e,i)||t;if(Array.isArray(e)&&typeof e[0]!="object")return q.truncate(e.join(","),i);if(typeof e=="object")try{return q.truncate(JSON.stringify(e),i)||t}catch{return t}return e}static extractColumnsFromQuery(e){var o;const t="__GROUP__";e=(e||"").replace(/\([\s\S]+?\)/gm,t).replace(/[\t\r\n]|(?:\s\s)+/g," ");const i=e.match(/select\s+([\s\S]+)\s+from/),a=((o=i==null?void 0:i[1])==null?void 0:o.split(","))||[],s=[];for(let l of a){const c=l.trim().split(" ").pop();c!=""&&c!=t&&s.push(c.replace(/[\'\"\`\[\]\s]/g,""))}return s}static getAllCollectionIdentifiers(e,t=""){if(!e)return[];let i=[t+"id"];if(e.type==="view")for(let s of q.extractColumnsFromQuery(e.viewQuery))q.pushUnique(i,t+s);const a=e.fields||[];for(const s of a)s.type=="geoPoint"?(q.pushUnique(i,t+s.name+".lon"),q.pushUnique(i,t+s.name+".lat")):q.pushUnique(i,t+s.name);return i}static getCollectionAutocompleteKeys(e,t,i="",a=0){let s=e.find(l=>l.name==t||l.id==t);if(!s||a>=4)return[];s.fields=s.fields||[];let o=q.getAllCollectionIdentifiers(s,i);for(const l of s.fields){const c=i+l.name;if(l.type=="relation"&&l.collectionId){const u=q.getCollectionAutocompleteKeys(e,l.collectionId,c+".",a+1);u.length&&(o=o.concat(u))}l.maxSelect!=1&&k1.includes(l.type)?(o.push(c+":each"),o.push(c+":length")):S1.includes(l.type)&&o.push(c+":lower")}for(const l of e){l.fields=l.fields||[];for(const c of l.fields)if(c.type=="relation"&&c.collectionId==s.id){const u=i+l.name+"_via_"+c.name,d=q.getCollectionAutocompleteKeys(e,l.id,u+".",a+2);d.length&&(o=o.concat(d))}}return o}static getCollectionJoinAutocompleteKeys(e){const t=[];let i,a;for(const s of e)if(!s.system){i="@collection."+s.name+".",a=q.getCollectionAutocompleteKeys(e,s.name,i);for(const o of a)t.push(o)}return t}static getRequestAutocompleteKeys(e,t){const i=[];i.push("@request.context"),i.push("@request.method"),i.push("@request.query."),i.push("@request.body."),i.push("@request.headers."),i.push("@request.auth.collectionId"),i.push("@request.auth.collectionName");const a=e.filter(s=>s.type==="auth");for(const s of a){if(s.system)continue;const o=q.getCollectionAutocompleteKeys(e,s.id,"@request.auth.");for(const l of o)q.pushUnique(i,l)}if(t){const s=q.getCollectionAutocompleteKeys(e,t,"@request.body.");for(const o of s){i.push(o);const l=o.split(".");l.length===3&&l[2].indexOf(":")===-1&&i.push(o+":isset")}}return i}static parseIndex(e){var c,u,d,f,h;const t={unique:!1,optional:!1,schemaName:"",indexName:"",tableName:"",columns:[],where:""},a=/create\s+(unique\s+)?\s*index\s*(if\s+not\s+exists\s+)?(\S*)\s+on\s+(\S*)\s*\(([\s\S]*)\)(?:\s*where\s+([\s\S]*))?/gmi.exec((e||"").trim());if((a==null?void 0:a.length)!=7)return t;const s=/^[\"\'\`\[\{}]|[\"\'\`\]\}]$/gm;t.unique=((c=a[1])==null?void 0:c.trim().toLowerCase())==="unique",t.optional=!q.isEmpty((u=a[2])==null?void 0:u.trim());const o=(a[3]||"").split(".");o.length==2?(t.schemaName=o[0].replace(s,""),t.indexName=o[1].replace(s,"")):(t.schemaName="",t.indexName=o[0].replace(s,"")),t.tableName=(a[4]||"").replace(s,"");const l=(a[5]||"").replace(/,(?=[^\(]*\))/gmi,"{PB_TEMP}").split(",");for(let p of l){p=p.trim().replaceAll("{PB_TEMP}",",");const m=/^([\s\S]+?)(?:\s+collate\s+([\w]+))?(?:\s+(asc|desc))?$/gmi.exec(p);if((m==null?void 0:m.length)!=4)continue;const g=(f=(d=m[1])==null?void 0:d.trim())==null?void 0:f.replace(s,"");g&&t.columns.push({name:g,collate:m[2]||"",sort:((h=m[3])==null?void 0:h.toUpperCase())||""})}return t.where=a[6]||"",t}static buildIndex(e){let t="CREATE ";e.unique&&(t+="UNIQUE "),t+="INDEX ",e.optional&&(t+="IF NOT EXISTS "),e.schemaName&&(t+=`\`${e.schemaName}\`.`),t+=`\`${e.indexName||"idx_"+q.randomString(10)}\` `,t+=`ON \`${e.tableName}\` (`;const i=e.columns.filter(a=>!!(a!=null&&a.name));return i.length>1&&(t+=`
  `),t+=i.map(a=>{let s="";return a.name.includes("(")||a.name.includes(" ")?s+=a.name:s+="`"+a.name+"`",a.collate&&(s+=" COLLATE "+a.collate),a.sort&&(s+=" "+a.sort.toUpperCase()),s}).join(`,
  `),i.length>1&&(t+=`
`),t+=")",e.where&&(t+=` WHERE ${e.where}`),t}static replaceIndexTableName(e,t){const i=q.parseIndex(e);return i.tableName=t,q.buildIndex(i)}static replaceIndexColumn(e,t,i){if(t===i)return e;const a=q.parseIndex(e);let s=!1;for(let o of a.columns)o.name===t&&(o.name=i,s=!0);return s?q.buildIndex(a):e}static normalizeSearchFilter(e,t){if(e=(e||"").trim(),!e||!t.length)return e;const i=["=","!=","~","!~",">",">=","<","<="];for(const a of i)if(e.includes(a))return e;return e=isNaN(e)&&e!="true"&&e!="false"?`"${e.replace(/^[\"\'\`]|[\"\'\`]$/gm,"")}"`:e,t.map(a=>`${a}~${e}`).join("||")}static normalizeLogsFilter(e,t=[]){return q.normalizeSearchFilter(e,["level","message","data"].concat(t))}static initSchemaField(e){return Object.assign({id:"",name:"",type:"text",system:!1,hidden:!1,required:!1},e)}static triggerResize(){window.dispatchEvent(new Event("resize"))}static getHashQueryParams(){let e="";const t=window.location.hash.indexOf("?");return t>-1&&(e=window.location.hash.substring(t+1)),Object.fromEntries(new URLSearchParams(e))}static replaceHashQueryParams(e){e=e||{};let t="",i=window.location.hash;const a=i.indexOf("?");a>-1&&(t=i.substring(a+1),i=i.substring(0,a));const s=new URLSearchParams(t);for(let c in e){const u=e[c];u===null?s.delete(c):s.set(c,u)}t=s.toString(),t!=""&&(i+="?"+t);let o=window.location.href;const l=o.indexOf("#");l>-1&&(o=o.substring(0,l)),window.location.replace(o+i)}}let Hu,ba;const Wu="app-tooltip";function dh(n){return typeof n=="string"?{text:n,position:"bottom",hideOnClick:null}:n||{}}function ia(){return ba=ba||document.querySelector("."+Wu),ba||(ba=document.createElement("div"),ba.classList.add(Wu),document.body.appendChild(ba)),ba}function ug(n,e){let t=ia();if(!t.classList.contains("active")||!(e!=null&&e.text)){Yu();return}t.textContent=e.text,t.className=Wu+" active",e.class&&t.classList.add(e.class),e.position&&t.classList.add(e.position),t.style.top="0px",t.style.left="0px";let i=t.offsetHeight,a=t.offsetWidth,s=n.getBoundingClientRect(),o=0,l=0,c=5;e.position=="left"?(o=s.top+s.height/2-i/2,l=s.left-a-c):e.position=="right"?(o=s.top+s.height/2-i/2,l=s.right+c):e.position=="top"?(o=s.top-i-c,l=s.left+s.width/2-a/2):e.position=="top-left"?(o=s.top-i-c,l=s.left):e.position=="top-right"?(o=s.top-i-c,l=s.right-a):e.position=="bottom-left"?(o=s.top+s.height+c,l=s.left):e.position=="bottom-right"?(o=s.top+s.height+c,l=s.right-a):(o=s.top+s.height+c,l=s.left+s.width/2-a/2),l+a>document.documentElement.clientWidth&&(l=document.documentElement.clientWidth-a),l=l>=0?l:0,o+i>document.documentElement.clientHeight&&(o=document.documentElement.clientHeight-i),o=o>=0?o:0,t.style.top=o+"px",t.style.left=l+"px"}function Yu(){clearTimeout(Hu),ia().classList.remove("active"),ia().activeNode=void 0}function T1(n,e){ia().activeNode=n,clearTimeout(Hu),Hu=setTimeout(()=>{ia().classList.add("active"),ug(n,e)},isNaN(e.delay)?0:e.delay)}function le(n,e){let t=dh(e);function i(){T1(n,t)}function a(){Yu()}return n.addEventListener("mouseenter",i),n.addEventListener("mouseleave",a),n.addEventListener("blur",a),(t.hideOnClick===!0||t.hideOnClick===null&&q.isFocusable(n))&&n.addEventListener("click",a),ia(),{update(s){var o,l;t=dh(s),(l=(o=ia())==null?void 0:o.activeNode)!=null&&l.contains(n)&&ug(n,t)},destroy(){var s,o;(o=(s=ia())==null?void 0:s.activeNode)!=null&&o.contains(n)&&Yu(),n.removeEventListener("mouseenter",i),n.removeEventListener("mouseleave",a),n.removeEventListener("blur",a),n.removeEventListener("click",a)}}}gy();const $1=n=>n;function Rd(n){const e=n-1;return e*e*e+1}function fh(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}function Ku(n,{delay:e=0,duration:t=400,easing:i=$1}={}){const a=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:s=>`opacity: ${s*a}`}}function sa(n,{delay:e=0,duration:t=400,easing:i=Rd,x:a=0,y:s=0,opacity:o=0}={}){const l=getComputedStyle(n),c=+l.opacity,u=l.transform==="none"?"":l.transform,d=c*(1-o),[f,h]=fh(a),[p,v]=fh(s);return{delay:e,duration:t,easing:i,css:(m,g)=>`
			transform: ${u} translate(${(1-m)*f}${h}, ${(1-m)*p}${v});
			opacity: ${c-d*g}`}}function yn(n,{delay:e=0,duration:t=400,easing:i=Rd,axis:a="y"}={}){const s=getComputedStyle(n),o=+s.opacity,l=a==="y"?"height":"width",c=parseFloat(s[l]),u=a==="y"?["top","bottom"]:["left","right"],d=u.map(k=>`${k[0].toUpperCase()}${k.slice(1)}`),f=parseFloat(s[`padding${d[0]}`]),h=parseFloat(s[`padding${d[1]}`]),p=parseFloat(s[`margin${d[0]}`]),v=parseFloat(s[`margin${d[1]}`]),m=parseFloat(s[`border${d[0]}Width`]),g=parseFloat(s[`border${d[1]}Width`]);return{delay:e,duration:t,easing:i,css:k=>`overflow: hidden;opacity: ${Math.min(k*20,1)*o};${l}: ${k*c}px;padding-${u[0]}: ${k*f}px;padding-${u[1]}: ${k*h}px;margin-${u[0]}: ${k*p}px;margin-${u[1]}: ${k*v}px;border-${u[0]}-width: ${k*m}px;border-${u[1]}-width: ${k*g}px;min-${l}: 0`}}function Bn(n,{delay:e=0,duration:t=400,easing:i=Rd,start:a=0,opacity:s=0}={}){const o=getComputedStyle(n),l=+o.opacity,c=o.transform==="none"?"":o.transform,u=1-a,d=l*(1-s);return{delay:e,duration:t,easing:i,css:(f,h)=>`
			transform: ${c} scale(${1-u*h});
			opacity: ${l-d*h}
		`}}let ya,eu=[];function hh(){return ya=ya||document.querySelector(".overlays"),ya||(ya=document.createElement("div"),ya.classList.add("overlays"),document.body.appendChild(ya)),ya}var I1=T('<button type="button" aria-label="Close" class="overlay-close"><i class="ri-close-line" aria-hidden="true"></i></button>'),C1=T('<button type="button" aria-label="Close" class="btn btn-sm btn-circle btn-transparent btn-close m-l-auto"><i class="ri-close-line txt-lg" aria-hidden="true"></i></button>'),E1=T('<div><div class="overlay"></div> <div><div class="overlay-panel-section panel-header"><!> <!> <!></div> <div class="overlay-panel-section panel-content"><!></div> <div class="overlay-panel-section panel-footer"><!></div></div></div>'),O1=T('<div class="overlay-panel-wrapper" tabindex="-1"><!></div>');function _n(n,e){Ke(e,!1);let t=re(e,"class",8,""),i=re(e,"active",12,!1),a=re(e,"popup",8,!1),s=re(e,"overlayClose",8,!0),o=re(e,"btnClose",8,!0),l=re(e,"escClose",8,!0),c=re(e,"beforeOpen",8,void 0),u=re(e,"beforeHide",8,void 0);const d=Ut(),f="op_"+q.randomString(10);let h=M(),p=M(),v,m=150,g,k=M(""),_=M(i());function E(){typeof c()=="function"&&c()()===!1||i(!0)}function D(){typeof u()=="function"&&u()()===!1||i(!1)}function S(){return i()}async function C(z){var J;x(_,z),z?(v=document.activeElement,d("show"),(J=r(h))==null||J.focus()):(clearTimeout(g),d("hide"),v==null||v.focus()),await Nn(),w()}function w(){r(h)&&(i()?dt(h,r(h).style.zIndex=P()):dt(h,r(h).style=""))}function $(){q.pushUnique(eu,f),document.body.classList.add("overlay-active")}function O(){q.removeByValue(eu,f),eu.length||document.body.classList.remove("overlay-active")}function P(){return 1e3+hh().querySelectorAll(".overlay-panel-container.active").length}function L(z){i()&&l()&&z.code=="Escape"&&!q.isInput(z.target)&&r(h)&&r(h).style.zIndex==P()&&(z.preventDefault(),D())}function N(z){i()&&V(r(p))}function V(z,J){J&&x(k,""),!(!z||g)&&(g=setTimeout(()=>{if(clearTimeout(g),g=null,!z)return;if(z.scrollHeight-z.offsetHeight>0)x(k,"scrollable");else{x(k,"");return}z.scrollTop==0?x(k,r(k)+" scroll-top-reached"):z.scrollTop+z.offsetHeight==z.scrollHeight&&x(k,r(k)+" scroll-bottom-reached")},100))}vn(()=>{hh().appendChild(r(h));let z=r(h);return()=>{clearTimeout(g),O(),z==null||z.remove()}}),se(()=>(r(_),F(i())),()=>{r(_)!=i()&&C(i())}),se(()=>r(p),()=>{V(r(p),!0)}),se(()=>r(h),()=>{r(h)&&w()}),se(()=>F(i()),()=>{i()?$():O()}),ht(),Ge();var R=O1();ce("resize",Er,N),ce("keydown",Er,L);var U=I(R);{var H=z=>{var J=E1();let W;var te=I(J),de=y(te,2);let pe;var _e=I(de),ke=I(_e);{var ve=oe=>{var Q=I1();Ct(3,Q,()=>Ku,()=>({duration:m})),ce("click",Q,Et(D)),b(oe,Q)};X(ke,oe=>{o()&&!a()&&oe(ve)})}var Oe=y(ke,2);nn(Oe,e,"header",{},null);var ue=y(Oe,2);{var me=oe=>{var Q=C1();ce("click",Q,Et(D)),b(oe,Q)};X(ue,oe=>{o()&&a()&&oe(me)})}var he=y(_e,2),xe=I(he);nn(xe,e,"default",{},null),gt(he,oe=>x(p,oe),()=>r(p));var ie=y(he,2),be=I(ie);nn(be,e,"footer",{},null),B((oe,Q)=>{W=Ue(J,1,"overlay-panel-container",null,W,oe),pe=Ue(de,1,`overlay-panel ${t()??""} ${r(k)??""}`,null,pe,Q)},[()=>({padded:a(),active:i()}),()=>({popup:a()})]),ce("click",te,Et(()=>s()?D():!0)),Ct(3,te,()=>Ku,()=>({duration:m,opacity:0})),ce("scroll",he,oe=>V(oe.target)),Ct(1,de,()=>sa,()=>a()?{duration:m,y:-10}:{duration:m,x:50}),Ct(2,de,()=>sa,()=>a()?{duration:m,y:10}:{duration:m,x:50}),b(z,J)};X(U,z=>{i()&&z(H)})}return gt(R,z=>x(h,z),()=>r(h)),b(n,R),xt(e,"show",E),xt(e,"hide",D),xt(e,"isActive",S),Je({show:E,hide:D,isActive:S})}const Fd=mi({});function jn(n,e,t){Fd.set({text:n,yesCallback:e,noCallback:t})}function dg(){Fd.set({})}var D1=T('<h4 class="block center txt-break" slot="header"> </h4>'),P1=T('<button type="button" class="btn btn-transparent btn-expanded-sm"><span class="txt">No</span></button> <button type="button"><span class="txt">Yes</span></button>',1);function M1(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Fd,"$confirmation",t);let s=M(),o=M(!1),l=M(!1);se(()=>(a(),r(s)),()=>{var c,u;(c=a())!=null&&c.text&&(x(l,!1),(u=r(s))==null||u.show())}),ht(),Ge();{let c=ae(()=>!r(o)),u=ae(()=>!r(o));gt(_n(n,{class:"confirm-popup hide-content overlay-panel-sm",get overlayClose(){return r(c)},get escClose(){return r(u)},btnClose:!1,popup:!0,$$events:{hide:async()=>{var d;!r(l)&&((d=a())!=null&&d.noCallback)&&a().noCallback(),await Nn(),x(l,!1),dg()}},$$slots:{header:(d,f)=>{var h=D1(),p=I(h);B(()=>Ee(p,(a(),A(()=>{var v;return(v=a())==null?void 0:v.text})))),b(d,h)},footer:(d,f)=>{var h=P1(),p=j(h);Gi(p,!0);var v=y(p,2);let m;B(g=>{p.disabled=r(o),m=Ue(v,1,"btn btn-danger btn-expanded",null,m,g),v.disabled=r(o)},[()=>({"btn-loading":r(o)})]),ce("click",p,()=>{var g;x(l,!1),(g=r(s))==null||g.hide()}),ce("click",v,async()=>{var g,k;(g=a())!=null&&g.yesCallback&&(x(o,!0),await Promise.resolve(a().yesCallback()),x(o,!1)),x(l,!0),(k=r(s))==null||k.hide()}),b(d,h)}},$$legacy:!0}),d=>x(s,d),()=>r(s))}Je(),i()}function A1(){let n={listeners:[],scriptLoaded:!1,injected:!1};function e(i,a,s){n.injected=!0;const o=i.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.src=a,o.onload=()=>{s()},i.head&&i.head.appendChild(o)}function t(i,a,s){n.scriptLoaded?s():(n.listeners.push(s),n.injected||e(i,a,()=>{n.listeners.forEach(o=>o()),n.scriptLoaded=!0}))}return{load:t}}let L1=A1();var N1=T("<div></div>"),R1=T('<textarea style="visibility: hidden"></textarea>'),F1=T("<div><!></div>");function qd(n,e){Ke(e,!1);let t=re(e,"id",24,()=>"tinymce_svelte"+q.randomString(7)),i=re(e,"inline",8,void 0),a=re(e,"disabled",8,!1),s=re(e,"scriptSrc",24,()=>"./libs/tinymce/tinymce.min.js"),o=re(e,"conf",24,()=>({})),l=re(e,"modelEvents",8,"change input undo redo"),c=re(e,"value",12,""),u=re(e,"text",12,""),d=re(e,"cssClass",8,"tinymce-wrapper");const f=["Activate","AddUndo","BeforeAddUndo","BeforeExecCommand","BeforeGetContent","BeforeRenderUI","BeforeSetContent","BeforePaste","Blur","Change","ClearUndos","Click","ContextMenu","Copy","Cut","Dblclick","Deactivate","Dirty","Drag","DragDrop","DragEnd","DragGesture","DragOver","Drop","ExecCommand","Focus","FocusIn","FocusOut","GetContent","Hide","Init","KeyDown","KeyPress","KeyUp","LoadContent","MouseDown","MouseEnter","MouseLeave","MouseMove","MouseOut","MouseOver","MouseUp","NodeChange","ObjectResizeStart","ObjectResized","ObjectSelected","Paste","PostProcess","PostRender","PreProcess","ProgressState","Redo","Remove","Reset","ResizeEditor","SaveContent","SelectionChange","SetAttrib","SetContent","Show","Submit","Undo","VisualAid"],h=(O,P)=>{f.forEach(L=>{O.on(L,N=>{P(L.toLowerCase(),{eventName:L,event:N,editor:O})})})};let p=M(),v=M(),m=M(),g=M(c()),k=M(a());const _=Ut();function E(){return window&&window.tinymce?window.tinymce:null}function D(){const O={...o(),target:r(v),inline:i()!==void 0?i():o().inline!==void 0?o().inline:!1,readonly:a(),setup:P=>{x(m,P),P.on("init",()=>{P.setContent(c()),P.on(l(),()=>{x(g,P.getContent()),r(g)!==c()&&(c(r(g)),u(P.getContent({format:"text"})))})}),h(P,_),typeof o().setup=="function"&&o().setup(P)}};dt(v,r(v).style.visibility=""),E().init(O)}vn(()=>(E()!==null?D():L1.load(r(p).ownerDocument,s(),()=>{r(p)&&D()}),()=>{var O,P;try{r(m)&&((O=r(m).dom)==null||O.unbind(document),(P=E())==null||P.remove(r(m)))}catch{}})),se(()=>(r(m),r(g),F(c()),F(a()),r(k)),()=>{var O;try{r(m)&&r(g)!==c()&&(r(m).setContent(c()),u(r(m).getContent({format:"text"}))),r(m)&&a()!==r(k)&&(x(k,a()),typeof((O=r(m).mode)==null?void 0:O.set)=="function"?r(m).mode.set(a()?"readonly":"design"):r(m).setMode(a()?"readonly":"design"))}catch(P){console.warn("TinyMCE reactive error:",P)}}),ht(),Ge();var S=F1(),C=I(S);{var w=O=>{var P=N1();gt(P,L=>x(v,L),()=>r(v)),B(()=>Y(P,"id",t())),b(O,P)},$=O=>{var P=R1();gt(P,L=>x(v,L),()=>r(v)),B(()=>Y(P,"id",t())),b(O,P)};X(C,O=>{i()?O(w):O($,!1)})}gt(S,O=>x(p,O),()=>r(p)),B(()=>Ue(S,1,En(d()))),b(n,S),Je()}function q1(n){const e=n-1;return e*e*e+1}function z1(n,{from:e,to:t},i={}){var{delay:a=0,duration:s=C=>Math.sqrt(C)*120,easing:o=q1}=i,l=getComputedStyle(n),c=l.transform==="none"?"":l.transform,[u,d]=l.transformOrigin.split(" ").map(parseFloat);u/=n.clientWidth,d/=n.clientHeight;var f=j1(n),h=n.clientWidth/t.width/f,p=n.clientHeight/t.height/f,v=e.left+e.width*u,m=e.top+e.height*d,g=t.left+t.width*u,k=t.top+t.height*d,_=(v-g)*h,E=(m-k)*p,D=e.width/t.width,S=e.height/t.height;return{delay:a,duration:typeof s=="function"?s(Math.sqrt(_*_+E*E)):s,easing:o,css:(C,w)=>{var $=w*_,O=w*E,P=C+w*D,L=C+w*S;return`transform: ${c} translate(${$}px, ${O}px) scale(${P}, ${L});`}}}function j1(n){if("currentCSSZoom"in n)return n.currentCSSZoom;for(var e=n,t=1;e!==null;)t*=+getComputedStyle(e).zoom,e=e.parentElement;return t}const xc=mi([]);function bo(n,e=4e3){return zd(n,"info",e)}function bn(n,e=3e3){return zd(n,"success",e)}function br(n,e=4500){return zd(n,"error",e)}function zd(n,e,t){t=t||4e3;const i={message:n,type:e,duration:t,timeout:setTimeout(()=>{fg(i)},t)};xc.update(a=>(jd(a,i.message),q.pushOrReplaceByKey(a,i,"message"),a))}function fg(n){xc.update(e=>(jd(e,n),e))}function no(){xc.update(n=>{for(let e of n)jd(n,e);return[]})}function jd(n,e){let t;typeof e=="string"?t=q.findByKey(n,"message",e):t=e,t&&(clearTimeout(t.timeout),q.removeByKey(n,"message",t.message))}var V1=T('<i class="ri-information-line"></i>'),U1=T('<i class="ri-checkbox-circle-line"></i>'),B1=T('<i class="ri-error-warning-line"></i>'),H1=T('<i class="ri-alert-line"></i>'),W1=(n,e)=>fg(r(e)),Y1=T('<div><div class="icon"><!></div> <div class="content"> </div> <button type="button" class="close" aria-label="Close toast"><i class="ri-close-line"></i></button></div>'),K1=T('<div class="toasts-wrapper"></div>');function J1(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(xc,"$toasts",t);Ge();var s=K1();bt(s,13,a,o=>o.message,(o,l)=>{var c=Y1();let u;var d=I(c),f=I(d);{var h=k=>{var _=V1();b(k,_)},p=k=>{var _=rt(),E=j(_);{var D=C=>{var w=U1();b(C,w)},S=C=>{var w=rt(),$=j(w);{var O=L=>{var N=B1();b(L,N)},P=L=>{var N=H1();b(L,N)};X($,L=>{r(l).type==="warning"?L(O):L(P,!1)},!0)}b(C,w)};X(E,C=>{r(l).type==="success"?C(D):C(S,!1)},!0)}b(k,_)};X(f,k=>{r(l).type==="info"?k(h):k(p,!1)})}var v=y(d,2),m=I(v),g=y(v,2);g.__click=[W1,l],B(k=>{u=Ue(c,1,"alert txt-break",null,u,k),Ee(m,r(l).message)},[()=>({"alert-info":r(l).type=="info","alert-success":r(l).type=="success","alert-danger":r(l).type=="error","alert-warning":r(l).type=="warning"})]),Ct(1,c,()=>yn,()=>({duration:150})),Ct(2,c,()=>Ku,()=>({duration:150})),f_(c,()=>z1,()=>({duration:150})),b(o,c)}),b(n,s),Je(),i()}$d(["click"]);var Z1=T("<div><!></div>"),G1=T('<div class="toggler-container" tabindex="-1" role="menu"><!></div>');function ii(n,e){Ke(e,!0);let t=re(e,"trigger",3,void 0),i=re(e,"active",15,!1),a=re(e,"escClose",3,!0),s=re(e,"autoScroll",3,!0),o=re(e,"closableClass",3,"closable"),l=re(e,"class",3,""),c=An(void 0),u=An(void 0),d=An(void 0),f=An(void 0),h=An(void 0),p=An(!1);const v=Ut();ys(()=>{r(c)&&D(t())}),ys(()=>{var z,J,W,te,de,pe;i()?((J=(z=r(d))==null?void 0:z.classList)==null||J.add("active"),(W=r(d))==null||W.setAttribute("aria-expanded",!0),v("show")):((de=(te=r(d))==null?void 0:te.classList)==null||de.remove("active"),(pe=r(d))==null||pe.setAttribute("aria-expanded",!1),v("hide"))});function m(z=0){i()&&(clearTimeout(r(h)),x(h,setTimeout(g,z),!0))}function g(){i()&&(i(!1),x(p,!1),clearTimeout(r(f)),clearTimeout(r(h)))}function k(){var z,J;clearTimeout(r(h)),clearTimeout(r(f)),!i()&&(i(!0),(z=r(d))!=null&&z.contains(r(c))||(J=r(c))==null||J.focus(),x(f,setTimeout(()=>{var W,te,de,pe;s()&&((W=r(u))!=null&&W.scrollIntoViewIfNeeded?(te=r(u))==null||te.scrollIntoViewIfNeeded():(de=r(u))!=null&&de.scrollIntoView&&((pe=r(u))==null||pe.scrollIntoView({behavior:"smooth",block:"nearest"})))},180),!0))}function _(){i()?g():k()}function E(z){return!r(c)||z.classList.contains(o())||r(c).contains(z)&&z.closest&&z.closest("."+o())}function D(z){var J,W,te,de,pe;S(),(J=r(c))==null||J.addEventListener("click",C),(W=r(c))==null||W.addEventListener("keydown",w),x(d,z||((te=r(c))==null?void 0:te.parentNode),!0),(de=r(d))==null||de.addEventListener("click",$),(pe=r(d))==null||pe.addEventListener("keydown",O)}function S(){var z,J,W,te;clearTimeout(r(f)),clearTimeout(r(h)),(z=r(c))==null||z.removeEventListener("click",C),(J=r(c))==null||J.removeEventListener("keydown",w),(W=r(d))==null||W.removeEventListener("click",$),(te=r(d))==null||te.removeEventListener("keydown",O)}function C(z){z.stopPropagation(),E(z.target)&&g()}function w(z){(z.code==="Enter"||z.code==="Space")&&(z.stopPropagation(),E(z.target)&&m(150))}function $(z){z.preventDefault(),z.stopPropagation(),_()}function O(z){(z.code==="Enter"||z.code==="Space")&&(z.preventDefault(),z.stopPropagation(),_())}function P(z){var J,W;i()&&!((J=r(d))!=null&&J.contains(z.target))&&!((W=r(c))!=null&&W.contains(z.target))&&_()}function L(z){i()&&a()&&z.code==="Escape"&&(z.preventDefault(),g())}function N(z){var J;i()&&x(p,!((J=r(c))!=null&&J.contains(z.target)))}function V(z){var J,W,te;i()&&r(p)&&!((J=r(c))!=null&&J.contains(z.target))&&!((W=r(d))!=null&&W.contains(z.target))&&!((te=z.target)!=null&&te.closest(".flatpickr-calendar"))&&g()}vn(()=>(D(),()=>S()));var R=G1();ce("click",Er,V),ce("mousedown",Er,N),ce("keydown",Er,L),ce("focusin",Er,P);var U=I(R);{var H=z=>{var J=Z1();let W;var te=I(J);nn(te,e,"default",{},null),gt(J,de=>x(u,de),()=>r(u)),B(de=>W=Ue(J,1,En(l()),null,W,de),[()=>({active:i()})]),Ct(3,J,()=>sa,()=>({duration:150,y:3})),b(z,J)};X(U,z=>{i()&&z(H)})}return gt(R,z=>x(c,z),()=>r(c)),b(n,R),Je({hideWithDelay:m,hide:g,show:k,toggle:_})}const On=mi(""),Ju=mi(""),Vo=mi(!1),Yn=mi({});function ln(n){Yn.set(n||{})}function ri(n){Yn.update(e=>(q.deleteByPath(e,n),e))}const wc=mi({});function vh(n){wc.set(n||{})}class vi extends Error{constructor(e){var t,i,a,s;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,vi.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof vi||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(s=(a=(i=this.originalError)==null?void 0:i.cause)==null?void 0:a.message)!=null&&s.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const rl=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function X1(n,e){const t={};if(typeof n!="string")return t;const i=Object.assign({},{}).decode||Q1;let a=0;for(;a<n.length;){const s=n.indexOf("=",a);if(s===-1)break;let o=n.indexOf(";",a);if(o===-1)o=n.length;else if(o<s){a=n.lastIndexOf(";",s-1)+1;continue}const l=n.slice(a,s).trim();if(t[l]===void 0){let c=n.slice(s+1,o).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[l]=i(c)}catch{t[l]=c}}a=o+1}return t}function mh(n,e,t){const i=Object.assign({},t||{}),a=i.encode||e0;if(!rl.test(n))throw new TypeError("argument name is invalid");const s=a(e);if(s&&!rl.test(s))throw new TypeError("argument val is invalid");let o=n+"="+s;if(i.maxAge!=null){const l=i.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(l)}if(i.domain){if(!rl.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain="+i.domain}if(i.path){if(!rl.test(i.path))throw new TypeError("option path is invalid");o+="; Path="+i.path}if(i.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function Q1(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function e0(n){return encodeURIComponent(n)}const t0=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let hg;function us(n){if(n)try{const e=decodeURIComponent(hg(n.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function kc(n,e=0){let t=us(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}hg=typeof atob!="function"||t0?n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,i,a=0,s=0,o="";i=e.charAt(s++);~i&&(t=a%4?64*t+i:i,a++%4)?o+=String.fromCharCode(255&t>>(-2*a&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o}:atob;const ph="pb_auth";class Vd{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!kc(this.token)}get isSuperuser(){var t,i;let e=us(this.token);return e.type=="auth"&&(((t=this.record)==null?void 0:t.collectionName)=="_superusers"||!((i=this.record)!=null&&i.collectionName)&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),us(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=ph){const i=X1(e||"")[t]||"";let a={};try{a=JSON.parse(i),(typeof a===null||typeof a!="object"||Array.isArray(a))&&(a={})}catch{}this.save(a.token||"",a.record||a.model||null)}exportToCookie(e,t=ph){var c,u;const i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},a=us(this.token);i.expires=a!=null&&a.exp?new Date(1e3*a.exp):new Date("1970-01-01"),e=Object.assign({},i,e);const s={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let o=mh(t,JSON.stringify(s),e);const l=typeof Blob<"u"?new Blob([o]).size:o.length;if(s.record&&l>4096){s.record={id:(c=s.record)==null?void 0:c.id,email:(u=s.record)==null?void 0:u.email};const d=["collectionId","collectionName","verified"];for(const f in this.record)d.includes(f)&&(s.record[f]=this.record[f]);o=mh(t,JSON.stringify(s),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==e)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class vg extends Vd{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let i=t;typeof t!="string"&&(i=JSON.stringify(t)),window.localStorage.setItem(e,i)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)})}}class Rr{constructor(e){this.client=e}}class n0 extends Rr{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,i,a){return a=Object.assign({method:"POST",body:{email:t,template:i,collection:e}},a),this.client.send("/api/settings/test/email",a).then(()=>!0)}async generateAppleClientSecret(e,t,i,a,s,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:i,privateKey:a,duration:s}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}const i0=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function Ud(n){if(n){n.query=n.query||{};for(let e in n)i0.includes(e)||(n.query[e]=n[e],delete n[e])}}function mg(n){const e=[];for(const t in n){const i=encodeURIComponent(t),a=Array.isArray(n[t])?n[t]:[n[t]];for(let s of a)s=r0(s),s!==null&&e.push(i+"="+s)}return e.join("&")}function r0(n){return n==null?null:n instanceof Date?encodeURIComponent(n.toISOString().replace("T"," ")):encodeURIComponent(typeof n=="object"?JSON.stringify(n):n)}class pg extends Rr{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,i){var o;if(!e)throw new Error("topic must be set.");let a=e;if(i){Ud(i=Object.assign({},i));const l="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));a+=(a.includes("?")?"&":"?")+l}const s=function(l){const c=l;let u;try{u=JSON.parse(c==null?void 0:c.data)}catch{}t(u||{})};return this.subscriptions[a]||(this.subscriptions[a]=[]),this.subscriptions[a].push(s),this.isConnected?this.subscriptions[a].length===1?await this.submitSubscriptions():(o=this.eventSource)==null||o.addEventListener(a,s):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,s)}async unsubscribe(e){var i;let t=!1;if(e){const a=this.getSubscriptionsByTopic(e);for(let s in a)if(this.hasSubscriptionListeners(s)){for(let o of this.subscriptions[s])(i=this.eventSource)==null||i.removeEventListener(s,o);delete this.subscriptions[s],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var i;let t=!1;for(let a in this.subscriptions)if((a+"?").startsWith(e)){t=!0;for(let s of this.subscriptions[a])(i=this.eventSource)==null||i.removeEventListener(a,s);delete this.subscriptions[a]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var s;let i=!1;const a=this.getSubscriptionsByTopic(e);for(let o in a){if(!Array.isArray(this.subscriptions[o])||!this.subscriptions[o].length)continue;let l=!1;for(let c=this.subscriptions[o].length-1;c>=0;c--)this.subscriptions[o][c]===t&&(l=!0,delete this.subscriptions[o][c],this.subscriptions[o].splice(c,1),(s=this.eventSource)==null||s.removeEventListener(o,t));l&&(this.subscriptions[o].length||delete this.subscriptions[o],i||this.hasSubscriptionListeners(o)||(i=!0))}this.hasSubscriptionListeners()?i&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,i;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let a in this.subscriptions)if((i=this.subscriptions[a])!=null&&i.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let i in this.subscriptions)(i+"?").startsWith(e)&&(t[i]=this.subscriptions[i]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,await this.submitSubscriptions()}).then(()=>{for(let a of this.pendingConnects)a.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const i=this.getSubscriptionsByTopic("PB_CONNECT");for(let a in i)for(let s of i[a])s(e)}).catch(i=>{this.clientId="",this.connectErrorHandler(i)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new vi(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let i of this.pendingConnects)i.resolve();this.pendingConnects=[]}}}class gg extends Rr{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let i=500;return(t=Object.assign({},e,t)).batch&&(i=t.batch,delete t.batch),this._getFullList(i,t)}async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send(this.baseCrudPath,i).then(a=>{var s;return a.items=((s=a.items)==null?void 0:s.map(o=>this.decode(o)))||[],a})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(i=>{var a;if(!((a=i==null?void 0:i.items)!=null&&a.length))throw new vi({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]})}async getOne(e,t){if(!e)throw new vi({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(i=>this.decode(i))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(i=>this.decode(i))}async update(e,t,i){return i=Object.assign({method:"PATCH",body:t},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),i).then(a=>this.decode(a))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let i=[],a=async s=>this.getList(s,e||500,t).then(o=>{const l=o.items;return i=i.concat(l),l.length==o.perPage?a(s+1):i});return a(1)}}function zr(n,e,t,i){const a=i!==void 0;return a||t!==void 0?a?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,i),e):Object.assign(e,t):e}function tu(n){var e;(e=n._resetAutoRefresh)==null||e.call(n)}class a0 extends gg{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,t,i){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,i)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const i=Object.assign({},e,t);return super.getFullList(i)}async getList(e=1,t=30,i){return super.getList(e,t,i)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,i){return super.update(e,t,i).then(a=>{var s,o,l;if(((s=this.client.authStore.record)==null?void 0:s.id)===(a==null?void 0:a.id)&&(((o=this.client.authStore.record)==null?void 0:o.collectionId)===this.collectionIdOrName||((l=this.client.authStore.record)==null?void 0:l.collectionName)===this.collectionIdOrName)){let c=Object.assign({},this.client.authStore.record.expand),u=Object.assign({},this.client.authStore.record,a);c&&(u.expand=Object.assign(c,a.expand)),this.client.authStore.save(this.client.authStore.token,u)}return a})}async delete(e,t){return super.delete(e,t).then(i=>{var a,s,o;return!i||((a=this.client.authStore.record)==null?void 0:a.id)!==e||((s=this.client.authStore.record)==null?void 0:s.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.record)==null?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),i})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,t,i){let a;i=Object.assign({method:"POST",body:{identity:e,password:t}},i),this.isSuperusers&&(a=i.autoRefreshThreshold,delete i.autoRefreshThreshold,i.autoRefresh||tu(this.client));let s=await this.client.send(this.baseCollectionPath+"/auth-with-password",i);return s=this.authResponse(s),a&&this.isSuperusers&&function(l,c,u,d){tu(l);const f=l.beforeSend,h=l.authStore.record,p=l.authStore.onChange((v,m)=>{(!v||(m==null?void 0:m.id)!=(h==null?void 0:h.id)||(m!=null&&m.collectionId||h!=null&&h.collectionId)&&(m==null?void 0:m.collectionId)!=(h==null?void 0:h.collectionId))&&tu(l)});l._resetAutoRefresh=function(){p(),l.beforeSend=f,delete l._resetAutoRefresh},l.beforeSend=async(v,m)=>{var E;const g=l.authStore.token;if((E=m.query)!=null&&E.autoRefresh)return f?f(v,m):{url:v,sendOptions:m};let k=l.authStore.isValid;if(k&&kc(l.authStore.token,c))try{await u()}catch{k=!1}k||await d();const _=m.headers||{};for(let D in _)if(D.toLowerCase()=="authorization"&&g==_[D]&&l.authStore.token){_[D]=l.authStore.token;break}return m.headers=_,f?f(v,m):{url:v,sendOptions:m}}}(this.client,a,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i))),s}async authWithOAuth2Code(e,t,i,a,s,o,l){let c={method:"POST",body:{provider:e,code:t,codeVerifier:i,redirectURL:a,createData:s}};return c=zr("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",c,o,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(u=>this.authResponse(u))}authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{};let i=null;t.urlCallback||(i=gh(void 0));const a=new pg(this.client);function s(){i==null||i.close(),a.unsubscribe()}const o={},l=t.requestKey;return l&&(o.requestKey=l),this.listAuthMethods(o).then(c=>{var h;const u=c.oauth2.providers.find(p=>p.name===t.provider);if(!u)throw new vi(new Error(`Missing or invalid provider "${t.provider}".`));const d=this.client.buildURL("/api/oauth2-redirect"),f=l?(h=this.client.cancelControllers)==null?void 0:h[l]:void 0;return f&&(f.signal.onabort=()=>{s()}),new Promise(async(p,v)=>{var m;try{await a.subscribe("@oauth2",async E=>{var S;const D=a.clientId;try{if(!E.state||D!==E.state)throw new Error("State parameters don't match.");if(E.error||!E.code)throw new Error("OAuth2 redirect error or missing code: "+E.error);const C=Object.assign({},t);delete C.provider,delete C.scopes,delete C.createData,delete C.urlCallback,(S=f==null?void 0:f.signal)!=null&&S.onabort&&(f.signal.onabort=null);const w=await this.authWithOAuth2Code(u.name,E.code,u.codeVerifier,d,t.createData,C);p(w)}catch(C){v(new vi(C))}s()});const g={state:a.clientId};(m=t.scopes)!=null&&m.length&&(g.scope=t.scopes.join(" "));const k=this._replaceQueryParams(u.authURL+d,g);await(t.urlCallback||function(E){i?i.location.href=E:i=gh(E)})(k)}catch(g){s(),v(new vi(g))}})}).catch(c=>{throw s(),c})}async authRefresh(e,t){let i={method:"POST"};return i=zr("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then(a=>this.authResponse(a))}async requestPasswordReset(e,t,i){let a={method:"POST",body:{email:e}};return a=zr("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/request-password-reset",a).then(()=>!0)}async confirmPasswordReset(e,t,i,a,s){let o={method:"POST",body:{token:e,password:t,passwordConfirm:i}};return o=zr("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,a,s),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}async requestVerification(e,t,i){let a={method:"POST",body:{email:e}};return a=zr("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/request-verification",a).then(()=>!0)}async confirmVerification(e,t,i){let a={method:"POST",body:{token:e}};return a=zr("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/confirm-verification",a).then(()=>{const s=us(e),o=this.client.authStore.record;return o&&!o.verified&&o.id===s.id&&o.collectionId===s.collectionId&&(o.verified=!0,this.client.authStore.save(this.client.authStore.token,o)),!0})}async requestEmailChange(e,t,i){let a={method:"POST",body:{newEmail:e}};return a=zr("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/request-email-change",a).then(()=>!0)}async confirmEmailChange(e,t,i,a){let s={method:"POST",body:{token:e,password:t}};return s=zr("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",s,i,a),this.client.send(this.baseCollectionPath+"/confirm-email-change",s).then(()=>{const o=us(e),l=this.client.authStore.record;return l&&l.id===o.id&&l.collectionId===o.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,t,i){const a=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(a.id,i).then(()=>!0)}async requestOTP(e,t){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)}async authWithOTP(e,t,i){return i=Object.assign({method:"POST",body:{otpId:e,password:t}},i),this.client.send(this.baseCollectionPath+"/auth-with-otp",i).then(a=>this.authResponse(a))}async impersonate(e,t,i){(i=Object.assign({method:"POST",body:{duration:t}},i)).headers=i.headers||{},i.headers.Authorization||(i.headers.Authorization=this.client.authStore.token);const a=new Uo(this.client.baseURL,new Vd,this.client.lang),s=await a.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),i);return a.authStore.save(s==null?void 0:s.token,this.decode((s==null?void 0:s.record)||{})),a}_replaceQueryParams(e,t={}){let i=e,a="";e.indexOf("?")>=0&&(i=e.substring(0,e.indexOf("?")),a=e.substring(e.indexOf("?")+1));const s={},o=a.split("&");for(const l of o){if(l=="")continue;const c=l.split("=");s[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete s[l]:s[l]=t[l]);a="";for(let l in s)s.hasOwnProperty(l)&&(a!=""&&(a+="&"),a+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(s[l].replace(/%20/g,"+")));return a!=""?i+"?"+a:i}}function gh(n){if(typeof window>"u"||!(window!=null&&window.open))throw new vi(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,i=window.innerWidth,a=window.innerHeight;e=e>i?i:e,t=t>a?a:t;let s=i/2-e/2,o=a/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+o+",left="+s+",resizable,menubar=no")}class s0 extends gg{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,i){return i=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},i),this.client.send(this.baseCrudPath+"/import",i).then(()=>!0)}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then(()=>!0)}}class o0 extends Rr{async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send("/api/logs",i)}async getOne(e,t){if(!e)throw new vi({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class l0 extends Rr{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class c0 extends Rr{getUrl(e,t,i={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,i)}getURL(e,t,i={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const a=[];a.push("api"),a.push("files"),a.push(encodeURIComponent(e.collectionId||e.collectionName)),a.push(encodeURIComponent(e.id)),a.push(encodeURIComponent(t));let s=this.client.buildURL(a.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;const o=new URLSearchParams(i);s+=(s.includes("?")?"&":"?")+o}return s}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class u0 extends Rr{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class d0 extends Rr{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then(()=>!0)}}function Zu(n){return typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File||n!==null&&typeof n=="object"&&n.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function Gu(n){return n&&(n.constructor.name==="FormData"||typeof FormData<"u"&&n instanceof FormData)}function bh(n){for(const e in n){const t=Array.isArray(n[e])?n[e]:[n[e]];for(const i of t)if(Zu(i))return!0}return!1}const f0=/^[\-\.\d]+$/;function yh(n){if(typeof n!="string")return n;if(n=="true")return!0;if(n=="false")return!1;if((n[0]==="-"||n[0]>="0"&&n[0]<="9")&&f0.test(n)){let e=+n;if(""+e===n)return e}return n}class h0 extends Rr{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new v0(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,i=[];for(let a=0;a<this.requests.length;a++){const s=this.requests[a];if(i.push({method:s.method,url:s.url,headers:s.headers,body:s.json}),s.files)for(let o in s.files){const l=s.files[o]||[];for(let c of l)t.append("requests."+a+"."+o,c)}}return t.append("@jsonPayload",JSON.stringify({requests:i})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)}}class v0{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const i={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}create(e,t){t=Object.assign({body:e||{}},t);const i={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}update(e,t,i){i=Object.assign({body:t||{}},i);const a={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(a,i),this.requests.push(a)}delete(e,t){t=Object.assign({},t);const i={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(i,t),this.requests.push(i)}prepareRequest(e,t){if(Ud(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){const a=mg(t.query);a&&(e.url+=(e.url.includes("?")?"&":"?")+a)}let i=t.body;Gu(i)&&(i=function(s){let o={};return s.forEach((l,c)=>{if(c==="@jsonPayload"&&typeof l=="string")try{let u=JSON.parse(l);Object.assign(o,u)}catch(u){console.warn("@jsonPayload error:",u)}else o[c]!==void 0?(Array.isArray(o[c])||(o[c]=[o[c]]),o[c].push(yh(l))):o[c]=yh(l)}),o}(i));for(const a in i){const s=i[a];if(Zu(s))e.files[a]=e.files[a]||[],e.files[a].push(s);else if(Array.isArray(s)){const o=[],l=[];for(const c of s)Zu(c)?o.push(c):l.push(c);if(o.length>0&&o.length==s.length){e.files[a]=e.files[a]||[];for(let c of o)e.files[a].push(c)}else if(e.json[a]=l,o.length>0){let c=a;a.startsWith("+")||a.endsWith("+")||(c+="+"),e.files[c]=e.files[c]||[];for(let u of o)e.files[c].push(u)}}else e.json[a]=s}}}class Uo{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=i,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new Vd:this.authStore=new vg,this.collections=new s0(this),this.files=new c0(this),this.logs=new o0(this),this.settings=new n0(this),this.realtime=new pg(this),this.health=new l0(this),this.backups=new u0(this),this.crons=new d0(this)}get admins(){return this.collection("_superusers")}createBatch(){return new h0(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new a0(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let i in t){let a=t[i];switch(typeof a){case"boolean":case"number":a=""+a;break;case"string":a="'"+a.replace(/'/g,"\\'")+"'";break;default:a=a===null?"null":a instanceof Date?"'"+a.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(a).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+i+"}",a)}return e}getFileUrl(e,t,i={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,i)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){var i;let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(i=window.location.origin)!=null&&i.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let i=this.buildURL(e);if(this.beforeSend){const a=Object.assign({},await this.beforeSend(i,t));a.url!==void 0||a.options!==void 0?(i=a.url||i,t=a.options||t):Object.keys(a).length&&(t=a,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const a=mg(t.query);a&&(i+=(i.includes("?")?"&":"?")+a),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(i,t).then(async a=>{let s={};try{s=await a.json()}catch{}if(this.afterSend&&(s=await this.afterSend(a,s,t)),a.status>=400)throw new vi({url:a.url,status:a.status,data:s});return s}).catch(a=>{throw new vi(a)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=function(a){if(typeof FormData>"u"||a===void 0||typeof a!="object"||a===null||Gu(a)||!bh(a))return a;const s=new FormData;for(const o in a){const l=a[o];if(typeof l!="object"||bh({data:l})){const c=Array.isArray(l)?l:[l];for(let u of c)s.append(o,u)}else{let c={};c[o]=l,s.append("@jsonPayload",JSON.stringify(c))}}return s}(t.body),Ud(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||Gu(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const i=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(i);const a=new AbortController;this.cancelControllers[i]=a,t.signal=a.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let i in e)if(i.toLowerCase()==t)return e[i];return null}}const ai=mi([]),Qi=mi({}),yo=mi(!1),bg=mi({}),Bd=mi({});let io;typeof BroadcastChannel<"u"&&(io=new BroadcastChannel("collections"),io.onmessage=()=>{var n;Hd((n=Cd(Qi))==null?void 0:n.id)});function yg(){io==null||io.postMessage("reload")}function _h(n){ai.update(e=>{const t=e.find(i=>i.id==n||i.name==n);return t?Qi.set(t):e.length&&Qi.set(e.find(i=>!i.system)||e[0]),e})}function m0(n){Qi.update(e=>q.isEmpty(e==null?void 0:e.id)||e.id===n.id?n:e),ai.update(e=>(q.pushOrReplaceByKey(e,n,"id"),Wd(),yg(),q.sortCollections(e)))}function p0(n){ai.update(e=>(q.removeByKey(e,"id",n.id),Qi.update(t=>t.id===n.id?e.find(i=>!i.system)||e[0]:t),Wd(),yg(),e))}async function Hd(n=null){yo.set(!0);try{const e=[];e.push(ze.collections.getScaffolds()),e.push(ze.collections.getFullList());let[t,i]=await Promise.all(e);Bd.set(t),i=q.sortCollections(i),ai.set(i);const a=n&&i.find(s=>s.id==n||s.name==n);a?Qi.set(a):i.length&&Qi.set(i.find(s=>!s.system)||i[0]),Wd()}catch(e){ze.error(e)}yo.set(!1)}function Wd(){bg.update(n=>(ai.update(e=>{var t;for(let i of e)n[i.id]=!!((t=i.fields)!=null&&t.find(a=>a.type=="file"&&a.protected));return e}),n))}function _g(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,a,s,o=[],l="",c=n.split("/");for(c[0]||c.shift();a=c.shift();)t=a[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(i=a.indexOf("?",1),s=a.indexOf(".",1),o.push(a.substring(1,~i?i:~s?s:a.length)),l+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~i?"?":"")+"\\"+a.substring(s))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function xh(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let i="";return t>-1&&(i=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:i}}const Sc=ap(null,function(e){e(xh());const t=()=>{e(xh())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}});sp(Sc,n=>n.location);const Yd=sp(Sc,n=>n.querystring),wh=mi(void 0);async function ws(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await Nn();const e=(n.charAt(0)=="#"?"":"#")+n;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function Lt(n,e){if(e=Sh(e),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return kh(n,e),{update(t){t=Sh(t),kh(n,t)}}}function g0(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function kh(n,e){let t=e.href||n.getAttribute("href");if(t&&t.charAt(0)=="/")t="#"+t;else if(!t||t.length<2||t.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+t);n.setAttribute("href",t),n.addEventListener("click",i=>{i.preventDefault(),e.disabled||b0(i.currentTarget.getAttribute("href"))})}function Sh(n){return n&&typeof n=="string"?{href:n}:n||{}}function b0(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function y0(n,e){Ke(e,!1);let t=re(e,"routes",24,()=>({})),i=re(e,"prefix",8,""),a=re(e,"restoreScrollState",8,!1);class s{constructor(C,w){if(!w||typeof w!="function"&&(typeof w!="object"||w._sveltesparouter!==!0))throw Error("Invalid component object");if(!C||typeof C=="string"&&(C.length<1||C.charAt(0)!="/"&&C.charAt(0)!="*")||typeof C=="object"&&!(C instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:$,keys:O}=_g(C);this.path=C,typeof w=="object"&&w._sveltesparouter===!0?(this.component=w.component,this.conditions=w.conditions||[],this.userData=w.userData,this.props=w.props||{}):(this.component=()=>Promise.resolve(w),this.conditions=[],this.props={}),this._pattern=$,this._keys=O}match(C){if(i()){if(typeof i()=="string")if(C.startsWith(i()))C=C.substr(i().length)||"/";else return null;else if(i()instanceof RegExp){const P=C.match(i());if(P&&P[0])C=C.substr(P[0].length)||"/";else return null}}const w=this._pattern.exec(C);if(w===null)return null;if(this._keys===!1)return w;const $={};let O=0;for(;O<this._keys.length;){try{$[this._keys[O]]=decodeURIComponent(w[O+1]||"")||null}catch{$[this._keys[O]]=null}O++}return $}async checkConditions(C){for(let w=0;w<this.conditions.length;w++)if(!await this.conditions[w](C))return!1;return!0}}const o=[];t()instanceof Map?t().forEach((S,C)=>{o.push(new s(C,S))}):Object.keys(t()).forEach(S=>{o.push(new s(S,t()[S]))});let l=M(null),c=M(null),u=M({});const d=Ut();async function f(S,C){await Nn(),d(S,C)}let h=null,p=null;a()&&(p=S=>{S.state&&(S.state.__svelte_spa_router_scrollY||S.state.__svelte_spa_router_scrollX)?h=S.state:h=null},window.addEventListener("popstate",p),y_(()=>{g0(h)}));let v=null,m=null;const g=Sc.subscribe(async S=>{v=S;let C=0;for(;C<o.length;){const w=o[C].match(S.location);if(!w){C++;continue}const $={route:o[C].path,location:S.location,querystring:S.querystring,userData:o[C].userData,params:w&&typeof w=="object"&&Object.keys(w).length?w:null};if(!await o[C].checkConditions($)){x(l,null),m=null,f("conditionsFailed",$);return}f("routeLoading",Object.assign({},$));const O=o[C].component;if(m!=O){O.loading?(x(l,O.loading),m=O,x(c,O.loadingParams),x(u,{}),f("routeLoaded",Object.assign({},$,{component:r(l),name:r(l).name,params:r(c)}))):(x(l,null),m=null);const P=await O();if(S!=v)return;x(l,P&&P.default||P),m=O}w&&typeof w=="object"&&Object.keys(w).length?x(c,w):x(c,null),x(u,o[C].props),f("routeLoaded",Object.assign({},$,{component:r(l),name:r(l).name,params:r(c)})).then(()=>{wh.set(r(c))});return}x(l,null),m=null,wh.set(void 0)});Ro(()=>{g(),p&&window.removeEventListener("popstate",p)}),se(()=>F(a()),()=>{history.scrollRestoration=a()?"manual":"auto"}),ht(),Ge();var k=rt(),_=j(k);{var E=S=>{var C=rt(),w=j(C);wi(w,()=>r(l),($,O)=>{O($,sn({get params(){return r(c)}},()=>r(u),{$$events:{routeEvent(P){ct.call(this,e,P)}}}))}),b(S,C)},D=S=>{var C=rt(),w=j(C);wi(w,()=>r(l),($,O)=>{O($,sn(()=>r(u),{$$events:{routeEvent(P){ct.call(this,e,P)}}}))}),b(S,C)};X(_,S=>{r(c)?S(E):S(D,!1)})}b(n,k),Je()}const nu="pb_superuser_file_token";Uo.prototype.logout=function(n=!0){this.authStore.clear(),n&&ws("/login")};Uo.prototype.error=function(n,e=!0,t=""){if(!n||!(n instanceof Error)||n.isAbort)return;const i=(n==null?void 0:n.status)<<0||400,a=(n==null?void 0:n.data)||{},s=a.message||n.message||t;if(e&&s&&br(s),q.isEmpty(a.data)||ln(a.data),i===401)return this.cancelAllRequests(),this.logout();if(i===403)return this.cancelAllRequests(),ws("/")};Uo.prototype.getSuperuserFileToken=async function(n=""){let e=!0;if(n){const i=Cd(bg);e=typeof i[n]<"u"?i[n]:!0}if(!e)return"";let t=localStorage.getItem(nu)||"";return(!t||kc(t,10))&&(t&&localStorage.removeItem(nu),this._superuserFileTokenRequest||(this._superuserFileTokenRequest=this.files.getToken()),t=await this._superuserFileTokenRequest,localStorage.setItem(nu,t),this._superuserFileTokenRequest=null),t};class _0 extends vg{constructor(e="__pb_superuser_auth__"){super(e),this.save(this.token,this.record)}save(e,t){super.save(e,t),(t==null?void 0:t.collectionName)=="_superusers"&&vh(t)}clear(){super.clear(),vh(null)}}const ze=new Uo("../",new _0);ze.authStore.isValid&&ze.collection(ze.authStore.record.collectionName).authRefresh().catch(n=>{console.warn("Failed to refresh the existing auth token:",n);const e=(n==null?void 0:n.status)<<0;(e==401||e==403)&&ze.authStore.clear()});const Dl=[];let xg;function wg(n){const e=n.pattern.test(xg);Th(n,n.className,e),Th(n,n.inactiveClassName,!e)}function Th(n,e,t){(e||"").split(" ").forEach(i=>{i&&(n.node.classList.remove(i),t&&n.node.classList.add(i))})}Sc.subscribe(n=>{xg=n.location+(n.querystring?"?"+n.querystring:""),Dl.map(wg)});function Gt(n,e){if(e&&(typeof e=="string"||typeof e=="object"&&e instanceof RegExp)?e={path:e}:e=e||{},!e.path&&n.hasAttribute("href")&&(e.path=n.getAttribute("href"),e.path&&e.path.length>1&&e.path.charAt(0)=="#"&&(e.path=e.path.substring(1))),e.className||(e.className="active"),!e.path||typeof e.path=="string"&&(e.path.length<1||e.path.charAt(0)!="/"&&e.path.charAt(0)!="*"))throw Error('Invalid value for "path" argument');const{pattern:t}=typeof e.path=="string"?_g(e.path):{pattern:e.path},i={node:n,className:e.className,inactiveClassName:e.inactiveClassName,pattern:t};return Dl.push(i),wg(i),{destroy(){Dl.splice(Dl.indexOf(i),1)}}}const x0="modulepreload",w0=function(n,e){return new URL(n,e).href},$h={},Wt=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(t.map(u=>{if(u=w0(u,i),u in $h)return;$h[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!i)for(let v=o.length-1;v>=0;v--){const m=o[v];if(m.href===u&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":x0,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function k0(n,e){Ke(e,!1),t();function t(){ze.authStore.isValid?ws("/collections"):ze.logout()}Ge(),Je()}var S0=T('<div class="form-field-addon inline-error-icon"><i class="ri-error-warning-fill txt-danger"></i></div>'),T0=T('<div class="help-block help-block-error"><pre> </pre></div>'),$0=T("<div><!> <!></div>");function Ne(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s="field_"+q.randomString(7),o="Invalid value";let l=re(e,"name",8,""),c=re(e,"inlineError",8,!1),u=re(e,"class",8,void 0),d=M(),f=M([]);function h(){ri(l())}vn(()=>(r(d).addEventListener("input",h),r(d).addEventListener("change",h),()=>{r(d).removeEventListener("input",h),r(d).removeEventListener("change",h)}));function p(S){return typeof S=="object"?(S==null?void 0:S.message)||(S==null?void 0:S.code)||o:S||o}se(()=>(a(),F(l())),()=>{x(f,q.toArray(q.getNestedVal(a(),l())))}),ht(),Ge();var v=$0();let m;var g=I(v);nn(g,e,"default",{get uniqueId(){return s}},null);var k=y(g,2);{var _=S=>{var C=S0(),w=I(C);nt(w,($,O)=>le==null?void 0:le($,O),()=>({position:"left",text:r(f).map(p).join(`
`)})),Ct(3,w,()=>Bn,()=>({duration:150,start:.7})),b(S,C)},E=S=>{var C=rt(),w=j(C);bt(w,1,()=>r(f),Nt,($,O)=>{var P=T0(),L=I(P),N=I(L);B(V=>Ee(N,V),[()=>(r(O),A(()=>p(r(O))))]),Ct(3,P,()=>yn,()=>({duration:150})),b($,P)}),b(S,C)};X(k,S=>{F(c()),r(f),A(()=>c()&&r(f).length)?S(_):S(E,!1)})}gt(v,S=>x(d,S),()=>r(d)),B(S=>m=Ue(v,1,En(u()),null,m,S),[()=>({error:r(f).length})]),ce("click",v,function(S){ct.call(this,e,S)}),b(n,v),xt(e,"changed",h);var D=Je({changed:h});return i(),D}var I0=T('<a target="_blank" rel="noopener noreferrer"><i class="ri-book-open-line txt-sm"></i> <span class="txt">Docs</span></a> <span class="delimiter">|</span> <a target="_blank" rel="noopener noreferrer" title="Releases"><span class="txt"> </span></a>',1),C0=T('<div><main class="page-content"><!></main> <footer class="page-footer"><!> <!></footer></div>');function Li(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(wc,"$superuser",t);let s=re(e,"center",8,!1),o=re(e,"class",8,"");Ge();var l=C0();let c;var u=I(l),d=I(u);nn(d,e,"default",{},null);var f=y(u,2),h=I(f);nn(h,e,"footer",{},null);var p=y(h,2);{var v=m=>{var g=I0(),k=j(g),_=y(k,4),E=I(_),D=I(E);B(()=>{Y(k,"href",A(()=>"https://pocketbase.io/docs")),Y(_,"href",A(()=>"https://github.com/pocketbase/pocketbase/releases")),Ee(D,`PocketBase ${A(()=>"v0.29.3")??""}`)}),b(m,g)};X(p,m=>{a(),A(()=>{var g;return(g=a())==null?void 0:g.id})&&m(v)})}B(m=>c=Ue(l,1,`page-wrapper ${o()??""}`,null,c,m),[()=>({"center-content":s()})]),b(n,l),Je(),i()}var E0=T('<input type="text"/>'),O0=T('<button type="submit" class="btn btn-expanded-sm btn-sm btn-warning"><span class="txt">Search</span></button>'),D0=T('<button type="button" class="btn btn-transparent btn-sm btn-hint p-l-xs p-r-xs m-l-10"><span class="txt">Clear</span></button>'),P0=T('<form class="searchbar"><label class="m-l-10 txt-xl"><i class="ri-search-line"></i></label> <!> <!> <!></form>');function Tc(n,e){Ke(e,!1);const t=Ut(),i="search_"+q.randomString(7);let a=re(e,"value",12,""),s=re(e,"placeholder",8,'Search term or filter like created > "2022-01-01"...'),o=re(e,"autocompleteCollection",8,null),l=re(e,"extraAutocompleteKeys",24,()=>[]),c=M(),u=M(!1),d=M(),f=M("");function h($=!0){var O;x(f,""),$&&((O=r(d))==null||O.focus()),t("clear")}function p(){a(r(f)),t("submit",a())}async function v(){r(c)||r(u)||(x(u,!0),x(c,(await Wt(async()=>{const{default:$}=await import("./FilterAutocompleteInput-DD1nRlog.js");return{default:$}},__vite__mapDeps([0,1]),import.meta.url)).default),x(u,!1))}vn(()=>{v()}),se(()=>F(a()),()=>{typeof a()=="string"&&x(f,a())}),ht(),Ge();var m=P0(),g=I(m),k=y(g,2);{var _=$=>{var O=rt(),P=j(O);{let L=ae(()=>a()||s());wi(P,()=>r(c),(N,V)=>{V(N,{get id(){return i},singleLine:!0,disableRequestKeys:!0,disableCollectionJoinKeys:!0,get extraAutocompleteKeys(){return l()},get baseCollection(){return o()},get placeholder(){return r(L)},get value(){return r(f)},set value(R){x(f,R)},$$events:{submit:p},$$legacy:!0})})}b($,O)},E=$=>{var O=E0();gt(O,P=>x(d,P),()=>r(d)),B(()=>{Y(O,"id",i),Y(O,"placeholder",a()||s())}),_t(O,()=>r(f),P=>x(f,P)),b($,O)};X(k,$=>{r(c)&&!r(u)?$(_):$(E,!1)})}var D=y(k,2);{var S=$=>{var O=O0();Ct(3,O,()=>sa,()=>({duration:150,x:5})),b($,O)};X(D,$=>{F(a()),r(f),A(()=>(a().length||r(f).length)&&r(f)!=a())&&$(S)})}var C=y(D,2);{var w=$=>{var O=D0();Ct(3,O,()=>sa,()=>({duration:150,x:5})),ce("click",O,()=>{h(!1),p()}),b($,O)};X(C,$=>{F(a()),r(f),A(()=>a().length||r(f).length)&&$(w)})}B(()=>Y(g,"for",i)),ce("click",m,gn(function($){ct.call(this,e,$)})),ce("submit",m,Et(p)),b(n,m),Je()}var M0=T('<button type="button" aria-label="Refresh"><i class="ri-refresh-line svelte-1bvelc2"></i></button>');function $c(n,e){Ke(e,!1);const t=Ut();let i=re(e,"tooltip",28,()=>({text:"Refresh",position:"right"})),a=re(e,"class",8,""),s=M(null);function o(){t("refresh");const u=i();i(null),clearTimeout(r(s)),x(s,setTimeout(()=>{x(s,null),i(u)},150))}vn(()=>()=>clearTimeout(r(s))),Ge();var l=M0();let c;nt(l,(u,d)=>le==null?void 0:le(u,d),i),qt(()=>ce("click",l,o)),B(u=>c=Ue(l,1,`btn btn-transparent btn-circle ${a()??""}`,"svelte-1bvelc2",c,u),[()=>({refreshing:r(s)})]),b(n,l),Je()}var A0=T('<div class="scroller-wrapper svelte-3a0gfs"><!> <div><!></div> <!></div>');function Kd(n,e){Ke(e,!1);const t=Ut();let i=re(e,"class",8,""),a=re(e,"vThreshold",12,0),s=re(e,"hThreshold",12,0),o=re(e,"dispatchOnNoScroll",8,!0),l=M(null),c=M(""),u=null,d,f,h,p,v;function m(){r(l)&&dt(l,r(l).scrollTop=0)}function g(){r(l)&&dt(l,r(l).scrollLeft=0)}function k(){r(l)&&(x(c,""),h=r(l).clientWidth+2,p=r(l).clientHeight+2,d=r(l).scrollWidth-h,f=r(l).scrollHeight-p,f>0?(x(c,r(c)+" v-scroll"),a()>=p&&a(0),r(l).scrollTop-a()<=0&&(x(c,r(c)+" v-scroll-start"),t("vScrollStart")),r(l).scrollTop+a()>=f&&(x(c,r(c)+" v-scroll-end"),t("vScrollEnd"))):o()&&t("vScrollEnd"),d>0?(x(c,r(c)+" h-scroll"),s()>=h&&s(0),r(l).scrollLeft-s()<=0&&(x(c,r(c)+" h-scroll-start"),t("hScrollStart")),r(l).scrollLeft+s()>=d&&(x(c,r(c)+" h-scroll-end"),t("hScrollEnd"))):o()&&t("hScrollEnd"))}function _(){u||(u=setTimeout(()=>{k(),u=null},150))}vn(()=>(_(),v=new MutationObserver(_),v.observe(r(l),{attributeFilter:["width","height"],childList:!0,subtree:!0}),()=>{v==null||v.disconnect(),clearTimeout(u)})),Ge();var E=A0();ce("resize",Er,_);var D=I(E);nn(D,e,"before",{},null);var S=y(D,2),C=I(S);nn(C,e,"default",{},null),gt(S,$=>x(l,$),()=>r(l));var w=y(S,2);return nn(w,e,"after",{},null),B(()=>Ue(S,1,`scroller ${i()??""} ${r(c)??""}`,"svelte-3a0gfs")),ce("scroll",S,_),b(n,E),xt(e,"resetVerticalScroll",m),xt(e,"resetHorizontalScroll",g),xt(e,"refresh",k),xt(e,"throttleRefresh",_),Je({resetVerticalScroll:m,resetHorizontalScroll:g,refresh:k,throttleRefresh:_})}var L0=T('<th tabindex="0"><!></th>');function Pl(n,e){let t=re(e,"class",8,""),i=re(e,"name",8),a=re(e,"sort",12,""),s=re(e,"disable",8,!1);function o(){s()||("-"+i()===a()?a("+"+i()):a("-"+i()))}var l=L0();let c;var u=I(l);nn(u,e,"default",{},null),B(d=>{Y(l,"title",i()),c=Ue(l,1,`col-sort ${t()??""}`,null,c,d)},[()=>({"col-sort-disabled":s(),"sort-active":a()==="-"+i()||a()==="+"+i(),"sort-desc":a()==="-"+i(),"sort-asc":a()==="+"+i()})]),ce("click",l,()=>o()),ce("keydown",l,d=>{(d.code==="Enter"||d.code==="Space")&&(d.preventDefault(),o())}),b(n,l)}var N0=T('<span class="txt-nowrap"> </span>');function kg(n,e){Ke(e,!1);let t=re(e,"date",8);const i={get text(){return q.formatToLocalDate(t(),"yyyy-MM-dd HH:mm:ss.SSS")+" Local"}};Ge();var a=N0(),s=I(a);nt(a,(o,l)=>le==null?void 0:le(o,l),()=>i),B(o=>Ee(s,o),[()=>(F(t()),A(()=>t().replace("Z"," UTC")))]),b(n,a),Je()}var R0=T('<div><span class="txt"> </span></div>');function Sg(n,e){Ke(e,!1);const t=M();let i=re(e,"level",8);se(()=>F(i()),()=>{var l;x(t,(l=cg.find(c=>c.level==i()))==null?void 0:l.label)}),ht(),Ge();var a=R0(),s=I(a),o=I(s);B(()=>{Ue(a,1,`label log-level-label level-${i()??""}`,"svelte-ha6hme"),Ee(o,`${r(t)||"UNKN"} (${i()??""})`)}),b(n,a),Je()}var F0=T('<span class="loader loader-sm"></span>'),q0=T('<div class="form-field"><input type="checkbox" id="checkbox_0"/> <label for="checkbox_0"></label></div>'),z0=T('<div class="col-header-content"><i class="ri-bookmark-line"></i> <span class="txt">level</span></div>'),j0=T('<div class="col-header-content"><i class="ri-file-list-2-line"></i> <span class="txt">message</span></div>'),V0=T('<div class="col-header-content"><i></i> <span class="txt">created</span></div>'),U0=T("<span><!></span>"),B0=T('<div class="flex flex-wrap flex-gap-10 m-t-10"></div>'),H0=T('<tr tabindex="0" class="row-handle"><td class="bulk-select-col min-width"><div class="form-field"><input type="checkbox"/> <label></label></div></td><td class="col-type-text col-field-level min-width svelte-91v05h"><!></td><td class="col-type-text col-field-message svelte-91v05h"><div class="flex flex-gap-10"><span class="txt-ellipsis"> </span></div> <!></td><td class="col-type-date col-field-created"><!></td><td class="col-type-action min-width"><i class="ri-arrow-right-line"></i></td></tr>'),W0=T('<tr><td colspan="99" class="p-xs"><span class="skeleton-loader m-0"></span></td></tr>'),Y0=T('<button type="button" class="btn btn-hint btn-expanded m-t-sm"><span class="txt">Clear filters</span></button>'),K0=T('<tr><td colspan="99" class="txt-center txt-hint p-xs"><h6>No logs found.</h6> <!></td></tr>'),J0=T('<table><thead><tr><th class="bulk-select-col min-width"><!></th><!><!><!><th class="col-type-action min-width"></th></tr></thead><tbody></tbody></table>'),Z0=T('<div class="block txt-center m-t-sm"><button type="button"><span class="txt">Load more</span></button></div>'),G0=T('<div class="bulkbar svelte-91v05h"><div class="txt">Selected <strong> </strong> </div> <button type="button" class="btn btn-xs btn-transparent btn-outline p-l-5 p-r-5"><span class="txt">Reset</span></button> <div class="flex-fill"></div> <button type="button" class="btn btn-sm"><span class="txt">Download as JSON</span></button></div>'),X0=T("<!> <!> <!>",1);function Q0(n,e){Ke(e,!1);const t=M(),i=M(),a=M(),s=Ut(),o=50;let l=re(e,"filter",12,""),c=re(e,"presets",8,""),u=re(e,"zoom",24,()=>({})),d=re(e,"sort",12,"-@rowid"),f=M([]),h=M(1),p=M(0),v=M(!1),m=0,g=M({});async function k(H=1,z=!0){x(v,!0);const J=[c(),q.normalizeLogsFilter(l())];return u().min&&u().max&&J.push(`created >= "${u().min}" && created <= "${u().max}"`),ze.logs.getList(H,o,{sort:d(),skipTotal:1,filter:J.filter(Boolean).map(W=>"("+W+")").join("&&")}).then(async W=>{var de;H<=1&&_();const te=q.toArray(W.items);if(x(v,!1),x(h,W.page),x(p,((de=W.items)==null?void 0:de.length)||0),s("load",r(f).concat(te)),z){const pe=++m;for(;te.length&&m==pe;){const _e=te.splice(0,10);for(let ke of _e)q.pushOrReplaceByKey(r(f),ke);x(f,r(f)),await q.yieldToMain()}}else{for(let pe of te)q.pushOrReplaceByKey(r(f),pe);x(f,r(f))}}).catch(W=>{W!=null&&W.isAbort||(x(v,!1),console.warn(W),_(),ze.error(W,!J||(W==null?void 0:W.status)!=400))})}function _(){x(f,[]),x(g,{}),x(h,1),x(p,0)}function E(){r(a)?D():S()}function D(){x(g,{})}function S(){for(const H of r(f))dt(g,r(g)[H.id]=H);x(g,r(g))}function C(H){r(g)[H.id]?delete r(g)[H.id]:dt(g,r(g)[H.id]=H),x(g,r(g))}const w=/[-:\. ]/gi;function $(){const H=Object.values(r(g)).sort((W,te)=>W.created<te.created?1:W.created>te.created?-1:0);if(!H.length)return;if(H.length==1)return q.downloadJson(H[0],"log_"+H[0].created.replaceAll(w,"")+".json");const z=H[0].created.replaceAll(w,""),J=H[H.length-1].created.replaceAll(w,"");return q.downloadJson(H,`${H.length}_logs_${J}_to_${z}.json`)}function O(H){let z=[];if(!H.data)return z;if(H.data.type=="request"){const J=["status","execTime","auth","authId","userIP"];for(let W of J)typeof H.data[W]<"u"&&z.push({key:W});H.data.referer&&!H.data.referer.includes(window.location.host)&&z.push({key:"referer"})}else{const J=Object.keys(H.data);for(const W of J)W!="error"&&W!="details"&&z.length<6&&z.push({key:W})}return H.data.error&&z.push({key:"error",label:"label-danger"}),H.data.details&&z.push({key:"details",label:"label-warning"}),z}se(()=>(F(d()),F(l()),F(c()),F(u())),()=>{(typeof d()<"u"||typeof l()<"u"||typeof c()<"u"||typeof u()<"u")&&(_(),k(1))}),se(()=>r(p),()=>{x(t,r(p)>=o)}),se(()=>r(g),()=>{x(i,Object.keys(r(g)).length)}),se(()=>(r(f),r(i)),()=>{x(a,r(f).length&&r(i)===r(f).length)}),ht(),Ge();var P=X0(),L=j(P);Kd(L,{class:"table-wrapper",children:(H,z)=>{var J=J0();let W;var te=I(J),de=I(te),pe=I(de),_e=I(pe);{var ke=xe=>{var ie=F0();b(xe,ie)},ve=xe=>{var ie=q0(),be=I(ie);B(()=>{be.disabled=(r(f),A(()=>!r(f).length)),ta(be,r(a))}),ce("change",be,()=>E()),b(xe,ie)};X(_e,xe=>{r(v)?xe(ke):xe(ve,!1)})}var Oe=y(pe);Pl(Oe,{disable:!0,class:"col-field-level min-width",name:"level",get sort(){return d()},set sort(xe){d(xe)},children:(xe,ie)=>{var be=z0();b(xe,be)},$$slots:{default:!0},$$legacy:!0});var ue=y(Oe);Pl(ue,{disable:!0,class:"col-type-text col-field-message",name:"data",get sort(){return d()},set sort(xe){d(xe)},children:(xe,ie)=>{var be=j0();b(xe,be)},$$slots:{default:!0},$$legacy:!0});var me=y(ue);Pl(me,{disable:!0,class:"col-type-date col-field-created",name:"created",get sort(){return d()},set sort(xe){d(xe)},children:(xe,ie)=>{var be=V0(),oe=I(be);B(Q=>Ue(oe,1,Q,"svelte-91v05h"),[()=>En((F(q),A(()=>q.getFieldTypeIcon("date"))))]),b(xe,be)},$$slots:{default:!0},$$legacy:!0});var he=y(te);bt(he,5,()=>r(f),xe=>xe.id,(xe,ie)=>{const be=ae(()=>(r(ie),A(()=>{var He;return((He=r(ie).data)==null?void 0:He.type)=="request"}))),oe=ae(()=>(r(ie),A(()=>O(r(ie)))));var Q=H0(),ne=I(Q),ye=I(ne),Se=I(ye),Ie=y(Se,2),Le=y(ne),je=I(Le);Sg(je,{get level(){return r(ie),A(()=>r(ie).level)}});var Te=y(Le),Ze=I(Te),we=I(Ze),Re=I(we),Me=y(Ze,2);{var Xe=He=>{var Fe=B0();bt(Fe,5,()=>r(oe),Nt,(De,Ve)=>{var Ye=U0(),lt=I(Ye);{var We=it=>{var Qe=mr();B(()=>Ee(Qe,`${r(Ve),A(()=>r(Ve).key)??""}: ${r(ie),r(Ve),A(()=>r(ie).data[r(Ve).key])??""}ms`)),b(it,Qe)},tt=it=>{var Qe=mr();B(ft=>Ee(Qe,`${r(Ve),A(()=>r(Ve).key)??""}: ${ft??""}`),[()=>(F(q),r(ie),r(Ve),A(()=>q.stringifyValue(r(ie).data[r(Ve).key],"N/A",80)))]),b(it,Qe)};X(lt,it=>{F(r(be)),r(Ve),A(()=>r(be)&&r(Ve).key=="execTime")?it(We):it(tt,!1)})}B(()=>Ue(Ye,1,`label label-sm ${r(Ve),A(()=>r(Ve).label||"")??""}`,"svelte-91v05h")),b(De,Ye)}),b(He,Fe)};X(Me,He=>{F(r(oe)),A(()=>r(oe).length)&&He(Xe)})}var Be=y(Te),Pe=I(Be);kg(Pe,{get date(){return r(ie),A(()=>r(ie).created)}}),B(()=>{Y(Se,"id",`checkbox_${r(ie),A(()=>r(ie).id)??""}`),ta(Se,(r(g),r(ie),A(()=>r(g)[r(ie).id]))),Y(Ie,"for",`checkbox_${r(ie),A(()=>r(ie).id)??""}`),Ee(Re,(r(ie),A(()=>r(ie).message)))}),ce("change",Se,()=>C(r(ie))),ce("click",ye,gn(function(He){ct.call(this,e,He)})),ce("click",Q,()=>s("select",r(ie))),ce("keydown",Q,He=>{He.code==="Enter"&&(He.preventDefault(),s("select",r(ie)))}),b(xe,Q)},xe=>{var ie=rt(),be=j(ie);{var oe=ne=>{var ye=W0();b(ne,ye)},Q=ne=>{var ye=K0(),Se=I(ye),Ie=y(I(Se),2);{var Le=je=>{var Te=Y0();ce("click",Te,()=>l("")),b(je,Te)};X(Ie,je=>{F(l()),A(()=>{var Te;return(Te=l())==null?void 0:Te.length})&&je(Le)})}b(ne,ye)};X(be,ne=>{r(v)?ne(oe):ne(Q,!1)})}b(xe,ie)}),B(xe=>W=Ue(J,1,"table",null,W,xe),[()=>({"table-loading":r(v)})]),b(H,J)},$$slots:{default:!0}});var N=y(L,2);{var V=H=>{var z=Z0(),J=I(z);let W;B(te=>W=Ue(J,1,"btn btn-lg btn-secondary btn-expanded",null,W,te),[()=>({"btn-loading":r(v),"btn-disabled":r(v)})]),ce("click",J,()=>k(r(h)+1)),b(H,z)};X(N,H=>{r(f),r(t),A(()=>r(f).length&&r(t))&&H(V)})}var R=y(N,2);{var U=H=>{var z=G0(),J=I(z),W=y(I(J)),te=I(W),de=y(W),pe=y(J,2),_e=y(pe,4);B(()=>{Ee(te,r(i)),Ee(de,` ${r(i)===1?"log":"logs"}`)}),ce("click",pe,()=>D()),ce("click",_e,$),Ct(3,z,()=>sa,()=>({duration:150,y:5})),b(H,z)};X(R,H=>{r(i)&&H(U)})}return b(n,P),xt(e,"load",k),Je({load:k})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Bo(n){return n+.5|0}const Zr=(n,e,t)=>Math.max(Math.min(n,t),e);function Gs(n){return Zr(Bo(n*2.55),0,255)}function ra(n){return Zr(Bo(n*255),0,255)}function $r(n){return Zr(Bo(n/2.55)/100,0,1)}function Ih(n){return Zr(Bo(n*100),0,100)}const Ei={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xu=[..."0123456789ABCDEF"],ew=n=>Xu[n&15],tw=n=>Xu[(n&240)>>4]+Xu[n&15],al=n=>(n&240)>>4===(n&15),nw=n=>al(n.r)&&al(n.g)&&al(n.b)&&al(n.a);function iw(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Ei[n[1]]*17,g:255&Ei[n[2]]*17,b:255&Ei[n[3]]*17,a:e===5?Ei[n[4]]*17:255}:(e===7||e===9)&&(t={r:Ei[n[1]]<<4|Ei[n[2]],g:Ei[n[3]]<<4|Ei[n[4]],b:Ei[n[5]]<<4|Ei[n[6]],a:e===9?Ei[n[7]]<<4|Ei[n[8]]:255})),t}const rw=(n,e)=>n<255?e(n):"";function aw(n){var e=nw(n)?ew:tw;return n?"#"+e(n.r)+e(n.g)+e(n.b)+rw(n.a,e):void 0}const sw=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Tg(n,e,t){const i=e*Math.min(t,1-t),a=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function ow(n,e,t){const i=(a,s=(a+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function lw(n,e,t){const i=Tg(n,1,.5);let a;for(e+t>1&&(a=1/(e+t),e*=a,t*=a),a=0;a<3;a++)i[a]*=1-e-t,i[a]+=e;return i}function cw(n,e,t,i,a){return n===a?(e-t)/i+(e<t?6:0):e===a?(t-n)/i+2:(n-e)/i+4}function Jd(n){const t=n.r/255,i=n.g/255,a=n.b/255,s=Math.max(t,i,a),o=Math.min(t,i,a),l=(s+o)/2;let c,u,d;return s!==o&&(d=s-o,u=l>.5?d/(2-s-o):d/(s+o),c=cw(t,i,a,d,s),c=c*60+.5),[c|0,u||0,l]}function Zd(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ra)}function Gd(n,e,t){return Zd(Tg,n,e,t)}function uw(n,e,t){return Zd(lw,n,e,t)}function dw(n,e,t){return Zd(ow,n,e,t)}function $g(n){return(n%360+360)%360}function fw(n){const e=sw.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Gs(+e[5]):ra(+e[5]));const a=$g(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=uw(a,s,o):e[1]==="hsv"?i=dw(a,s,o):i=Gd(a,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function hw(n,e){var t=Jd(n);t[0]=$g(t[0]+e),t=Gd(t),n.r=t[0],n.g=t[1],n.b=t[2]}function vw(n){if(!n)return;const e=Jd(n),t=e[0],i=Ih(e[1]),a=Ih(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${a}%, ${$r(n.a)})`:`hsl(${t}, ${i}%, ${a}%)`}const Ch={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Eh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function mw(){const n={},e=Object.keys(Eh),t=Object.keys(Ch);let i,a,s,o,l;for(i=0;i<e.length;i++){for(o=l=e[i],a=0;a<t.length;a++)s=t[a],l=l.replace(s,Ch[s]);s=parseInt(Eh[o],16),n[l]=[s>>16&255,s>>8&255,s&255]}return n}let sl;function pw(n){sl||(sl=mw(),sl.transparent=[0,0,0,0]);const e=sl[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const gw=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function bw(n){const e=gw.exec(n);let t=255,i,a,s;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?Gs(o):Zr(o*255,0,255)}return i=+e[1],a=+e[3],s=+e[5],i=255&(e[2]?Gs(i):Zr(i,0,255)),a=255&(e[4]?Gs(a):Zr(a,0,255)),s=255&(e[6]?Gs(s):Zr(s,0,255)),{r:i,g:a,b:s,a:t}}}function yw(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${$r(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const iu=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ts=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function _w(n,e,t){const i=ts($r(n.r)),a=ts($r(n.g)),s=ts($r(n.b));return{r:ra(iu(i+t*(ts($r(e.r))-i))),g:ra(iu(a+t*(ts($r(e.g))-a))),b:ra(iu(s+t*(ts($r(e.b))-s))),a:n.a+t*(e.a-n.a)}}function ol(n,e,t){if(n){let i=Jd(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Gd(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Ig(n,e){return n&&Object.assign(e||{},n)}function Oh(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ra(n[3]))):(e=Ig(n,{r:0,g:0,b:0,a:1}),e.a=ra(e.a)),e}function xw(n){return n.charAt(0)==="r"?bw(n):fw(n)}class _o{constructor(e){if(e instanceof _o)return e;const t=typeof e;let i;t==="object"?i=Oh(e):t==="string"&&(i=iw(e)||pw(e)||xw(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Ig(this._rgb);return e&&(e.a=$r(e.a)),e}set rgb(e){this._rgb=Oh(e)}rgbString(){return this._valid?yw(this._rgb):void 0}hexString(){return this._valid?aw(this._rgb):void 0}hslString(){return this._valid?vw(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,a=e.rgb;let s;const o=t===s?.5:t,l=2*o-1,c=i.a-a.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;s=1-u,i.r=255&u*i.r+s*a.r+.5,i.g=255&u*i.g+s*a.g+.5,i.b=255&u*i.b+s*a.b+.5,i.a=o*i.a+(1-o)*a.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=_w(this._rgb,e._rgb,t)),this}clone(){return new _o(this.rgb)}alpha(e){return this._rgb.a=ra(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Bo(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ol(this._rgb,2,e),this}darken(e){return ol(this._rgb,2,-e),this}saturate(e){return ol(this._rgb,1,e),this}desaturate(e){return ol(this._rgb,1,-e),this}rotate(e){return hw(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function kr(){}const ww=(()=>{let n=0;return()=>n++})();function an(n){return n==null}function Cn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Bt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Wn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function rr(n,e){return Wn(n)?n:e}function Zt(n,e){return typeof n>"u"?e:n}const kw=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Mt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function jt(n,e,t,i){let a,s,o;if(Cn(n))for(s=n.length,a=0;a<s;a++)e.call(t,n[a],a);else if(Bt(n))for(o=Object.keys(n),s=o.length,a=0;a<s;a++)e.call(t,n[o[a]],o[a])}function Kl(n,e){let t,i,a,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(a=n[t],s=e[t],a.datasetIndex!==s.datasetIndex||a.index!==s.index)return!1;return!0}function Jl(n){if(Cn(n))return n.map(Jl);if(Bt(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let a=0;for(;a<i;++a)e[t[a]]=Jl(n[t[a]]);return e}return n}function Cg(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Sw(n,e,t,i){if(!Cg(n))return;const a=e[n],s=t[n];Bt(a)&&Bt(s)?xo(a,s,i):e[n]=Jl(s)}function xo(n,e,t){const i=Cn(e)?e:[e],a=i.length;if(!Bt(n))return n;t=t||{};const s=t.merger||Sw;let o;for(let l=0;l<a;++l){if(o=i[l],!Bt(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)s(c[u],n,o,t)}return n}function ro(n,e){return xo(n,e,{merger:Tw})}function Tw(n,e,t){if(!Cg(n))return;const i=e[n],a=t[n];Bt(i)&&Bt(a)?ro(i,a):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Jl(a))}const Dh={"":n=>n,x:n=>n.x,y:n=>n.y};function $w(n){const e=n.split("."),t=[];let i="";for(const a of e)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Iw(n){const e=$w(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Zl(n,e){return(Dh[e]||(Dh[e]=Iw(e)))(n)}function Xd(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Gl=n=>typeof n<"u",oa=n=>typeof n=="function",Ph=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function Cw(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Hn=Math.PI,pr=2*Hn,Ew=pr+Hn,Xl=Number.POSITIVE_INFINITY,Ow=Hn/180,Yi=Hn/2,_a=Hn/4,Mh=Hn*2/3,Eg=Math.log10,la=Math.sign;function La(n,e,t){return Math.abs(n-e)<t}function Ah(n){const e=Math.round(n);n=La(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Eg(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Dw(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((a,s)=>a-s).pop(),e}function Pw(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function wo(n){return!Pw(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Mw(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function Aw(n,e,t){let i,a,s;for(i=0,a=n.length;i<a;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ca(n){return n*(Hn/180)}function Lw(n){return n*(180/Hn)}function Lh(n){if(!Wn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Nw(n,e){const t=e.x-n.x,i=e.y-n.y,a=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*Hn&&(s+=pr),{angle:s,distance:a}}function Qu(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Rw(n,e){return(n-e+Ew)%pr-Hn}function lr(n){return(n%pr+pr)%pr}function Og(n,e,t,i){const a=lr(n),s=lr(e),o=lr(t),l=lr(s-a),c=lr(o-a),u=lr(a-s),d=lr(a-o);return a===s||a===o||i&&s===o||l>c&&u<d}function Ki(n,e,t){return Math.max(e,Math.min(t,n))}function Fw(n){return Ki(n,-32768,32767)}function Dg(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Qd(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,a=0,s;for(;i-a>1;)s=a+i>>1,t(s)?a=s:i=s;return{lo:a,hi:i}}const Ea=(n,e,t,i)=>Qd(n,t,i?a=>{const s=n[a][e];return s<t||s===t&&n[a+1][e]===t}:a=>n[a][e]<t),qw=(n,e,t)=>Qd(n,t,i=>n[i][e]>=t);function zw(n,e,t){let i=0,a=n.length;for(;i<a&&n[i]<e;)i++;for(;a>i&&n[a-1]>t;)a--;return i>0||a<n.length?n.slice(i,a):n}const Pg=["push","pop","shift","splice","unshift"];function jw(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Pg.forEach(t=>{const i="_onData"+Xd(t),a=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=a.apply(this,s);return n._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...s)}),o}})})}function Nh(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,a=i.indexOf(e);a!==-1&&i.splice(a,1),!(i.length>0)&&(Pg.forEach(s=>{delete n[s]}),delete n._chartjs)}function Vw(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const Mg=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Ag(n,e){let t=[],i=!1;return function(...a){t=a,i||(i=!0,Mg.call(window,()=>{i=!1,n.apply(e,t)}))}}function Uw(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const Bw=n=>n==="start"?"left":n==="end"?"right":"center",Rh=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2;function Hw(n,e,t){const i=e.length;let a=0,s=i;if(n._sorted){const{iScale:o,vScale:l,_parsed:c}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=o.axis,{min:f,max:h,minDefined:p,maxDefined:v}=o.getUserBounds();if(p){if(a=Math.min(Ea(c,d,f).lo,t?i:Ea(e,d,o.getPixelForValue(f)).lo),u){const m=c.slice(0,a+1).reverse().findIndex(g=>!an(g[l.axis]));a-=Math.max(0,m)}a=Ki(a,0,i-1)}if(v){let m=Math.max(Ea(c,o.axis,h,!0).hi+1,t?0:Ea(e,d,o.getPixelForValue(h),!0).hi+1);if(u){const g=c.slice(m-1).findIndex(k=>!an(k[l.axis]));m+=Math.max(0,g)}s=Ki(m,a,i)-a}else s=i-a}return{start:a,count:s}}function Ww(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,a={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=a,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,a),s}const ll=n=>n===0||n===1,Fh=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*pr/t)),qh=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*pr/t)+1,ao={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Yi)+1,easeOutSine:n=>Math.sin(n*Yi),easeInOutSine:n=>-.5*(Math.cos(Hn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>ll(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>ll(n)?n:Fh(n,.075,.3),easeOutElastic:n=>ll(n)?n:qh(n,.075,.3),easeInOutElastic(n){return ll(n)?n:n<.5?.5*Fh(n*2,.1125,.45):.5+.5*qh(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-ao.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?ao.easeInBounce(n*2)*.5:ao.easeOutBounce(n*2-1)*.5+.5};function ef(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function zh(n){return ef(n)?n:new _o(n)}function ru(n){return ef(n)?n:new _o(n).saturate(.5).darken(.1).hexString()}const Yw=["x","y","borderWidth","radius","tension"],Kw=["color","borderColor","backgroundColor"];function Jw(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Kw},numbers:{type:"number",properties:Yw}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Zw(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const jh=new Map;function Gw(n,e){e=e||{};const t=n+JSON.stringify(e);let i=jh.get(t);return i||(i=new Intl.NumberFormat(n,e),jh.set(t,i)),i}function Lg(n,e,t){return Gw(e,t).format(n)}const Xw={values(n){return Cn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let a,s=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(a="scientific"),s=Qw(n,t)}const o=Eg(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:a,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Lg(n,i,c)}};function Qw(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Ng={formatters:Xw};function ek(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ng.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Fa=Object.create(null),ed=Object.create(null);function so(n,e){if(!e)return n;const t=e.split(".");for(let i=0,a=t.length;i<a;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function au(n,e,t){return typeof e=="string"?xo(so(n,e),t):xo(so(n,""),e)}class tk{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>ru(a.backgroundColor),this.hoverBorderColor=(i,a)=>ru(a.borderColor),this.hoverColor=(i,a)=>ru(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return au(this,e,t)}get(e){return so(this,e)}describe(e,t){return au(ed,e,t)}override(e,t){return au(Fa,e,t)}route(e,t,i,a){const s=so(this,e),o=so(this,i),l="_"+t;Object.defineProperties(s,{[l]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],u=o[a];return Bt(c)?Object.assign({},u,c):Zt(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var kn=new tk({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Jw,Zw,ek]);function nk(n){return!n||an(n.size)||an(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Vh(n,e,t,i,a){let s=e[a];return s||(s=e[a]=n.measureText(a).width,t.push(a)),s>i&&(i=s),i}function xa(n,e,t){const i=n.currentDevicePixelRatio,a=t!==0?Math.max(t/2,.5):0;return Math.round((e-a)*i)/i+a}function Uh(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function td(n,e,t,i){ik(n,e,t,i)}function ik(n,e,t,i,a){let s,o,l,c,u,d,f,h;const p=e.pointStyle,v=e.rotation,m=e.radius;let g=(v||0)*Ow;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(g),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),p){default:n.arc(t,i,m,0,pr),n.closePath();break;case"triangle":d=m,n.moveTo(t+Math.sin(g)*d,i-Math.cos(g)*m),g+=Mh,n.lineTo(t+Math.sin(g)*d,i-Math.cos(g)*m),g+=Mh,n.lineTo(t+Math.sin(g)*d,i-Math.cos(g)*m),n.closePath();break;case"rectRounded":u=m*.516,c=m-u,o=Math.cos(g+_a)*c,f=Math.cos(g+_a)*c,l=Math.sin(g+_a)*c,h=Math.sin(g+_a)*c,n.arc(t-f,i-l,u,g-Hn,g-Yi),n.arc(t+h,i-o,u,g-Yi,g),n.arc(t+f,i+l,u,g,g+Yi),n.arc(t-h,i+o,u,g+Yi,g+Hn),n.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*m,d=c,n.rect(t-d,i-c,2*d,2*c);break}g+=_a;case"rectRot":f=Math.cos(g)*m,o=Math.cos(g)*m,l=Math.sin(g)*m,h=Math.sin(g)*m,n.moveTo(t-f,i-l),n.lineTo(t+h,i-o),n.lineTo(t+f,i+l),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":g+=_a;case"cross":f=Math.cos(g)*m,o=Math.cos(g)*m,l=Math.sin(g)*m,h=Math.sin(g)*m,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":f=Math.cos(g)*m,o=Math.cos(g)*m,l=Math.sin(g)*m,h=Math.sin(g)*m,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),g+=_a,f=Math.cos(g)*m,o=Math.cos(g)*m,l=Math.sin(g)*m,h=Math.sin(g)*m,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=Math.cos(g)*m,l=Math.sin(g)*m,n.moveTo(t-o,i-l),n.lineTo(t+o,i+l);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(g)*m,i+Math.sin(g)*m);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ks(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function tf(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function nf(n){n.restore()}function rk(n,e,t,i,a){if(!e)return n.lineTo(t.x,t.y);if(a==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else a==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function ak(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function sk(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),an(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function ok(n,e,t,i,a){if(a.strikethrough||a.underline){const s=n.measureText(i),o=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,u=t+s.actualBoundingBoxDescent,d=a.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=a.decorationWidth||2,n.moveTo(o,d),n.lineTo(l,d),n.stroke()}}function lk(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Bh(n,e,t,i,a,s={}){const o=Cn(e)?e:[e],l=s.strokeWidth>0&&s.strokeColor!=="";let c,u;for(n.save(),n.font=a.string,sk(n,s),c=0;c<o.length;++c)u=o[c],s.backdrop&&lk(n,s.backdrop),l&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),an(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(u,t,i,s.maxWidth)),n.fillText(u,t,i,s.maxWidth),ok(n,t,i,u,s),i+=Number(a.lineHeight);n.restore()}function Hh(n,e){const{x:t,y:i,w:a,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*Hn,Hn,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Hn,Yi,!0),n.lineTo(t+a-o.bottomRight,i+s),n.arc(t+a-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Yi,0,!0),n.lineTo(t+a,i+o.topRight),n.arc(t+a-o.topRight,i+o.topRight,o.topRight,0,-Yi,!0),n.lineTo(t+o.topLeft,i)}const ck=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function dk(n,e){const t=(""+n).match(ck);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const fk=n=>+n||0;function Rg(n,e){const t={},i=Bt(e),a=i?Object.keys(e):e,s=Bt(n)?i?o=>Zt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of a)t[o]=fk(s(o));return t}function hk(n){return Rg(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ml(n){return Rg(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ca(n){const e=hk(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function hr(n,e){n=n||{},e=e||kn.font;let t=Zt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Zt(n.style,e.style);i&&!(""+i).match(uk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:Zt(n.family,e.family),lineHeight:dk(Zt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Zt(n.weight,e.weight),string:""};return a.string=nk(a),a}function cl(n,e,t,i){let a,s,o;for(a=0,s=n.length;a<s;++a)if(o=n[a],o!==void 0&&o!==void 0)return o}function vk(n,e,t){const{min:i,max:a}=n,s=kw(e,(a-i)/2),o=(l,c)=>t&&l===0?0:l+c;return{min:o(i,-Math.abs(s)),max:o(a,s)}}function Ha(n,e){return Object.assign(Object.create(n),e)}function rf(n,e=[""],t,i,a=()=>n[0]){const s=t||n;typeof i>"u"&&(i=jg("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:a,override:l=>rf([l,...n],e,s,i)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete n[0][c],!0},get(l,c){return qg(l,c,()=>wk(c,e,n,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(l,c){return Yh(l).includes(c)},ownKeys(l){return Yh(l)},set(l,c,u){const d=l._storage||(l._storage=a());return l[c]=d[c]=u,delete l._keys,!0}})}function Ss(n,e,t,i){const a={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:Fg(n,i),setContext:s=>Ss(n,s,t,i),override:s=>Ss(n.override(s),e,t,i)};return new Proxy(a,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,l){return qg(s,o,()=>pk(s,o,l))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,l){return n[o]=l,delete s[o],!0}})}function Fg(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:a=e.allKeys}=n;return{allKeys:a,scriptable:t,indexable:i,isScriptable:oa(t)?t:()=>t,isIndexable:oa(i)?i:()=>i}}const mk=(n,e)=>n?n+Xd(e):e,af=(n,e)=>Bt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function qg(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function pk(n,e,t){const{_proxy:i,_context:a,_subProxy:s,_descriptors:o}=n;let l=i[e];return oa(l)&&o.isScriptable(e)&&(l=gk(e,l,n,t)),Cn(l)&&l.length&&(l=bk(e,l,n,o.isIndexable)),af(e,l)&&(l=Ss(l,a,s&&s[e],o)),l}function gk(n,e,t,i){const{_proxy:a,_context:s,_subProxy:o,_stack:l}=t;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let c=e(s,o||i);return l.delete(n),af(n,c)&&(c=sf(a._scopes,a,n,c)),c}function bk(n,e,t,i){const{_proxy:a,_context:s,_subProxy:o,_descriptors:l}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(Bt(e[0])){const c=e,u=a._scopes.filter(d=>d!==c);e=[];for(const d of c){const f=sf(u,a,n,d);e.push(Ss(f,s,o&&o[n],l))}}return e}function zg(n,e,t){return oa(n)?n(e,t):n}const yk=(n,e)=>n===!0?e:typeof n=="string"?Zl(e,n):void 0;function _k(n,e,t,i,a){for(const s of e){const o=yk(t,s);if(o){n.add(o);const l=zg(o._fallback,t,a);if(typeof l<"u"&&l!==t&&l!==i)return l}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function sf(n,e,t,i){const a=e._rootScopes,s=zg(e._fallback,t,i),o=[...n,...a],l=new Set;l.add(i);let c=Wh(l,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=Wh(l,o,s,c,i),c===null)?!1:rf(Array.from(l),[""],a,s,()=>xk(e,t,i))}function Wh(n,e,t,i,a){for(;t;)t=_k(n,e,t,i,a);return t}function xk(n,e,t){const i=n._getTarget();e in i||(i[e]={});const a=i[e];return Cn(a)&&Bt(t)?t:a||{}}function wk(n,e,t,i){let a;for(const s of e)if(a=jg(mk(s,n),t),typeof a<"u")return af(n,a)?sf(t,i,n,a):a}function jg(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function Yh(n){let e=n._keys;return e||(e=n._keys=kk(n._scopes)),e}function kk(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(a=>!a.startsWith("_")))e.add(i);return Array.from(e)}const Sk=Number.EPSILON||1e-14,Ts=(n,e)=>e<n.length&&!n[e].skip&&n[e],Vg=n=>n==="x"?"y":"x";function Tk(n,e,t,i){const a=n.skip?e:n,s=e,o=t.skip?e:t,l=Qu(s,a),c=Qu(o,s);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=i*u,h=i*d;return{previous:{x:s.x-f*(o.x-a.x),y:s.y-f*(o.y-a.y)},next:{x:s.x+h*(o.x-a.x),y:s.y+h*(o.y-a.y)}}}function $k(n,e,t){const i=n.length;let a,s,o,l,c,u=Ts(n,0);for(let d=0;d<i-1;++d)if(c=u,u=Ts(n,d+1),!(!c||!u)){if(La(e[d],0,Sk)){t[d]=t[d+1]=0;continue}a=t[d]/e[d],s=t[d+1]/e[d],l=Math.pow(a,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),t[d]=a*o*e[d],t[d+1]=s*o*e[d])}}function Ik(n,e,t="x"){const i=Vg(t),a=n.length;let s,o,l,c=Ts(n,0);for(let u=0;u<a;++u){if(o=l,l=c,c=Ts(n,u+1),!l)continue;const d=l[t],f=l[i];o&&(s=(d-o[t])/3,l[`cp1${t}`]=d-s,l[`cp1${i}`]=f-s*e[u]),c&&(s=(c[t]-d)/3,l[`cp2${t}`]=d+s,l[`cp2${i}`]=f+s*e[u])}}function Ck(n,e="x"){const t=Vg(e),i=n.length,a=Array(i).fill(0),s=Array(i);let o,l,c,u=Ts(n,0);for(o=0;o<i;++o)if(l=c,c=u,u=Ts(n,o+1),!!c){if(u){const d=u[e]-c[e];a[o]=d!==0?(u[t]-c[t])/d:0}s[o]=l?u?la(a[o-1])!==la(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}$k(n,a,s),Ik(n,s,e)}function ul(n,e,t){return Math.max(Math.min(n,t),e)}function Ek(n,e){let t,i,a,s,o,l=ks(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=l,l=t<i-1&&ks(n[t+1],e),s&&(a=n[t],o&&(a.cp1x=ul(a.cp1x,e.left,e.right),a.cp1y=ul(a.cp1y,e.top,e.bottom)),l&&(a.cp2x=ul(a.cp2x,e.left,e.right),a.cp2y=ul(a.cp2y,e.top,e.bottom)))}function Ok(n,e,t,i,a){let s,o,l,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Ck(n,a);else{let u=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)l=n[s],c=Tk(u,l,n[Math.min(s+1,o-(i?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&Ek(n,t)}function of(){return typeof window<"u"&&typeof document<"u"}function lf(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ql(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Ic=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Dk(n,e){return Ic(n).getPropertyValue(e)}const Pk=["top","right","bottom","left"];function Na(n,e,t){const i={};t=t?"-"+t:"";for(let a=0;a<4;a++){const s=Pk[a];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Mk=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Ak(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:a,offsetY:s}=i;let o=!1,l,c;if(Mk(a,s,n.target))l=a,c=s;else{const u=e.getBoundingClientRect();l=i.clientX-u.left,c=i.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function cr(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,a=Ic(t),s=a.boxSizing==="border-box",o=Na(a,"padding"),l=Na(a,"border","width"),{x:c,y:u,box:d}=Ak(n,t),f=o.left+(d&&l.left),h=o.top+(d&&l.top);let{width:p,height:v}=e;return s&&(p-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-f)/p*t.width/i),y:Math.round((u-h)/v*t.height/i)}}function Lk(n,e,t){let i,a;if(e===void 0||t===void 0){const s=n&&lf(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),l=Ic(s),c=Na(l,"border","width"),u=Na(l,"padding");e=o.width-u.width-c.width,t=o.height-u.height-c.height,i=Ql(l.maxWidth,s,"clientWidth"),a=Ql(l.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||Xl,maxHeight:a||Xl}}const dl=n=>Math.round(n*10)/10;function Nk(n,e,t,i){const a=Ic(n),s=Na(a,"margin"),o=Ql(a.maxWidth,n,"clientWidth")||Xl,l=Ql(a.maxHeight,n,"clientHeight")||Xl,c=Lk(n,e,t);let{width:u,height:d}=c;if(a.boxSizing==="content-box"){const h=Na(a,"border","width"),p=Na(a,"padding");u-=p.width+h.width,d-=p.height+h.height}return u=Math.max(0,u-s.width),d=Math.max(0,i?u/i:d-s.height),u=dl(Math.min(u,o,c.maxWidth)),d=dl(Math.min(d,l,c.maxHeight)),u&&!d&&(d=dl(u/2)),(e!==void 0||t!==void 0)&&i&&c.height&&d>c.height&&(d=c.height,u=dl(Math.floor(d*i))),{width:u,height:d}}function Kh(n,e,t){const i=e||1,a=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==a||o.width!==s?(n.currentDevicePixelRatio=i,o.height=a,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Rk=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};of()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Jh(n,e){const t=Dk(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ka(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Fk(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function qk(n,e,t,i){const a={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=ka(n,a,t),l=ka(a,s,t),c=ka(s,e,t),u=ka(o,l,t),d=ka(l,c,t);return ka(u,d,t)}const zk=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},jk=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function su(n,e,t){return n?zk(e,t):jk()}function Vk(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function Uk(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Ug(n){return n==="angle"?{between:Og,compare:Rw,normalize:lr}:{between:Dg,compare:(e,t)=>e-t,normalize:e=>e}}function Zh({start:n,end:e,count:t,loop:i,style:a}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:a}}function Bk(n,e,t){const{property:i,start:a,end:s}=t,{between:o,normalize:l}=Ug(i),c=e.length;let{start:u,end:d,loop:f}=n,h,p;if(f){for(u+=c,d+=c,h=0,p=c;h<p&&o(l(e[u%c][i]),a,s);++h)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:n.style}}function Bg(n,e,t){if(!t)return[n];const{property:i,start:a,end:s}=t,o=e.length,{compare:l,between:c,normalize:u}=Ug(i),{start:d,end:f,loop:h,style:p}=Bk(n,e,t),v=[];let m=!1,g=null,k,_,E;const D=()=>c(a,E,k)&&l(a,E)!==0,S=()=>l(s,k)===0||c(s,E,k),C=()=>m||D(),w=()=>!m||S();for(let $=d,O=d;$<=f;++$)_=e[$%o],!_.skip&&(k=u(_[i]),k!==E&&(m=c(k,a,s),g===null&&C()&&(g=l(k,a)===0?$:O),g!==null&&w()&&(v.push(Zh({start:g,end:$,loop:h,count:o,style:p})),g=null),O=$,E=k));return g!==null&&v.push(Zh({start:g,end:f,loop:h,count:o,style:p})),v}function Hg(n,e){const t=[],i=n.segments;for(let a=0;a<i.length;a++){const s=Bg(i[a],n.points,e);s.length&&t.push(...s)}return t}function Hk(n,e,t,i){let a=0,s=e-1;if(t&&!i)for(;a<e&&!n[a].skip;)a++;for(;a<e&&n[a].skip;)a++;for(a%=e,t&&(s+=a);s>a&&n[s%e].skip;)s--;return s%=e,{start:a,end:s}}function Wk(n,e,t,i){const a=n.length,s=[];let o=e,l=n[e],c;for(c=e+1;c<=t;++c){const u=n[c%a];u.skip||u.stop?l.skip||(i=!1,s.push({start:e%a,end:(c-1)%a,loop:i}),e=o=u.stop?c:null):(o=c,l.skip&&(e=c)),l=u}return o!==null&&s.push({start:e%a,end:o%a,loop:i}),s}function Yk(n,e){const t=n.points,i=n.options.spanGaps,a=t.length;if(!a)return[];const s=!!n._loop,{start:o,end:l}=Hk(t,a,s,i);if(i===!0)return Gh(n,[{start:o,end:l,loop:s}],t,e);const c=l<o?l+a:l,u=!!n._fullLoop&&o===0&&l===a-1;return Gh(n,Wk(t,o,c,u),t,e)}function Gh(n,e,t,i){return!i||!i.setContext||!t?e:Kk(n,e,t,i)}function Kk(n,e,t,i){const a=n._chart.getContext(),s=Xh(n.options),{_datasetIndex:o,options:{spanGaps:l}}=n,c=t.length,u=[];let d=s,f=e[0].start,h=f;function p(v,m,g,k){const _=l?-1:1;if(v!==m){for(v+=c;t[v%c].skip;)v-=_;for(;t[m%c].skip;)m+=_;v%c!==m%c&&(u.push({start:v%c,end:m%c,loop:g,style:k}),d=k,f=m%c)}}for(const v of e){f=l?f:v.start;let m=t[f%c],g;for(h=f+1;h<=v.end;h++){const k=t[h%c];g=Xh(i.setContext(Ha(a,{type:"segment",p0:m,p1:k,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),Jk(g,d)&&p(f,h-1,v.loop,d),m=k,d=g}f<h-1&&p(f,h-1,v.loop,d)}return u}function Xh(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Jk(n,e){if(!e)return!1;const t=[],i=function(a,s){return ef(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function fl(n,e,t){return n.options.clip?n[t]:e[t]}function Zk(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:fl(t,e,"left"),right:fl(t,e,"right"),top:fl(i,e,"top"),bottom:fl(i,e,"bottom")}:e}function Wg(n,e){const t=e._clip;if(t.disabled)return!1;const i=Zk(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Gk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,a){const s=t.listeners[a],o=t.duration;s.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Mg.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,l=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(a.draw(),this._notify(a,i,e,"progress")),s.length||(i.running=!1,this._notify(a,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Sr=new Gk;const Qh="transparent",Xk={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=zh(n||Qh),a=i.valid&&zh(e||Qh);return a&&a.valid?a.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Qk{constructor(e,t,i,a){const s=t[i];a=cl([e.to,a,s,e.from]);const o=cl([e.from,s,a]);this._active=!0,this._fn=e.fn||Xk[e.type||typeof o],this._easing=ao[e.easing]||ao.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const a=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=cl([e.to,t,a,e.from]),this._from=cl([e.from,a,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,a=this._prop,s=this._from,o=this._loop,l=this._to;let c;if(this._active=s!==l&&(o||t<i),!this._active){this._target[a]=l,this._notify(!0);return}if(t<0){this._target[a]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[a]=this._fn(s,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][t]()}}class Yg{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Bt(e))return;const t=Object.keys(kn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const s=e[a];if(!Bt(s))return;const o={};for(const l of t)o[l]=s[l];(Cn(s.properties)&&s.properties||[a]).forEach(l=>{(l===a||!i.has(l))&&i.set(l,o)})})}_animateOptions(e,t){const i=t.options,a=t2(e,i);if(!a)return[];const s=this._createAnimations(a,i);return i.$shared&&e2(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,a=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){a.push(...this._animateOptions(e,t));continue}const d=t[u];let f=s[u];const h=i.get(u);if(f)if(h&&f.active()){f.update(h,d,l);continue}else f.cancel();if(!h||!h.duration){e[u]=d;continue}s[u]=f=new Qk(h,e,u,d),a.push(f)}return a}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Sr.add(this._chart,i),!0}}function e2(n,e){const t=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const s=n[i[a]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function t2(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function ev(n,e){const t=n&&n.options||{},i=t.reverse,a=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:a,end:i?a:s}}function n2(n,e,t){if(t===!1)return!1;const i=ev(n,t),a=ev(e,t);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function i2(n){let e,t,i,a;return Bt(n)?(e=n.top,t=n.right,i=n.bottom,a=n.left):e=t=i=a=n,{top:e,right:t,bottom:i,left:a,disabled:n===!1}}function Kg(n,e){const t=[],i=n._getSortedDatasetMetas(e);let a,s;for(a=0,s=i.length;a<s;++a)t.push(i[a].index);return t}function tv(n,e,t,i={}){const a=n.keys,s=i.mode==="single";let o,l,c,u;if(e===null)return;let d=!1;for(o=0,l=a.length;o<l;++o){if(c=+a[o],c===t){if(d=!0,i.all)continue;break}u=n.values[c],Wn(u)&&(s||e===0||la(e)===la(u))&&(e+=u)}return!d&&!i.all?0:e}function r2(n,e){const{iScale:t,vScale:i}=e,a=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[a]:d,[s]:n[d]};return l}function ou(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function a2(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function s2(n){const{min:e,max:t,minDefined:i,maxDefined:a}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:a?t:Number.POSITIVE_INFINITY}}function o2(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function nv(n,e,t,i){for(const a of e.getMatchingVisibleMetas(i).reverse()){const s=n[a.index];if(t&&s>0||!t&&s<0)return a.index}return null}function iv(n,e){const{chart:t,_cachedMeta:i}=n,a=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:l}=i,c=s.axis,u=o.axis,d=a2(s,o,i),f=e.length;let h;for(let p=0;p<f;++p){const v=e[p],{[c]:m,[u]:g}=v,k=v._stacks||(v._stacks={});h=k[u]=o2(a,d,m),h[l]=g,h._top=nv(h,o,!0,i.type),h._bottom=nv(h,o,!1,i.type);const _=h._visualValues||(h._visualValues={});_[l]=g}}function lu(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function l2(n,e){return Ha(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function c2(n,e,t){return Ha(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Vs(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const a of e){const s=a._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const cu=n=>n==="reset"||n==="none",rv=(n,e)=>e?n:Object.assign({},n),u2=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:Kg(t,!0),values:null};class oo{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ou(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Vs(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),a=(f,h,p,v)=>f==="x"?h:f==="r"?v:p,s=t.xAxisID=Zt(i.xAxisID,lu(e,"x")),o=t.yAxisID=Zt(i.yAxisID,lu(e,"y")),l=t.rAxisID=Zt(i.rAxisID,lu(e,"r")),c=t.indexAxis,u=t.iAxisID=a(c,s,o,l),d=t.vAxisID=a(c,o,s,l);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Nh(this._data,this),e._stacked&&Vs(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Bt(t)){const a=this._cachedMeta;this._data=r2(t,a)}else if(i!==t){if(i){Nh(i,this);const a=this._cachedMeta;Vs(a),a._parsed=[]}t&&Object.isExtensible(t)&&jw(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const s=t._stacked;t._stacked=ou(t.vScale,t),t.stack!==i.stack&&(a=!0,Vs(t),t.stack=i.stack),this._resyncElements(e),(a||s!==t._stacked)&&(iv(this,t._parsed),t._stacked=ou(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:a}=this,{iScale:s,_stacked:o}=i,l=s.axis;let c=e===0&&t===a.length?!0:i._sorted,u=e>0&&i._parsed[e-1],d,f,h;if(this._parsing===!1)i._parsed=a,i._sorted=!0,h=a;else{Cn(a[e])?h=this.parseArrayData(i,a,e,t):Bt(a[e])?h=this.parseObjectData(i,a,e,t):h=this.parsePrimitiveData(i,a,e,t);const p=()=>f[l]===null||u&&f[l]<u[l];for(d=0;d<t;++d)i._parsed[d+e]=f=h[d],c&&(p()&&(c=!1),u=f);i._sorted=c}o&&iv(this,h)}parsePrimitiveData(e,t,i,a){const{iScale:s,vScale:o}=e,l=s.axis,c=o.axis,u=s.getLabels(),d=s===o,f=new Array(a);let h,p,v;for(h=0,p=a;h<p;++h)v=h+i,f[h]={[l]:d||s.parse(u[v],v),[c]:o.parse(t[v],v)};return f}parseArrayData(e,t,i,a){const{xScale:s,yScale:o}=e,l=new Array(a);let c,u,d,f;for(c=0,u=a;c<u;++c)d=c+i,f=t[d],l[c]={x:s.parse(f[0],d),y:o.parse(f[1],d)};return l}parseObjectData(e,t,i,a){const{xScale:s,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(a);let d,f,h,p;for(d=0,f=a;d<f;++d)h=d+i,p=t[h],u[d]={x:s.parse(Zl(p,l),h),y:o.parse(Zl(p,c),h)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const a=this.chart,s=this._cachedMeta,o=t[e.axis],l={keys:Kg(a,!0),values:t._stacks[e.axis]._visualValues};return tv(l,o,s.index,{mode:i})}updateRangeFromParsed(e,t,i,a){const s=i[t.axis];let o=s===null?NaN:s;const l=a&&i._stacks[t.axis];a&&l&&(a.values=l,o=tv(a,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,a=i._parsed,s=i._sorted&&e===i.iScale,o=a.length,l=this._getOtherScale(e),c=u2(t,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=s2(l);let h,p;function v(){p=a[h];const m=p[l.axis];return!Wn(p[e.axis])||d>m||f<m}for(h=0;h<o&&!(!v()&&(this.updateRangeFromParsed(u,e,p,c),s));++h);if(s){for(h=o-1;h>=0;--h)if(!v()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let a,s,o;for(a=0,s=t.length;a<s;++a)o=t[a][e.axis],Wn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,a=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:a?""+a.getLabelForValue(s[a.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=i2(Zt(this.options.clip,n2(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,a=i.data||[],s=t.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||a.length-l,u=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(e,s,l,c),d=l;d<l+c;++d){const f=a[d];f.hidden||(f.active&&u?o.push(f):f.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const a=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=c2(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=a.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=l2(this.chart.getContext(),this.index)),s.dataset=a,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const a=t==="active",s=this._cachedDataOpts,o=e+"-"+t,l=s[o],c=this.enableOptionSharing&&Gl(i);if(l)return rv(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=a?[`${e}Hover`,"hover",e,""]:[e,""],h=u.getOptionScopes(this.getDataset(),d),p=Object.keys(kn.elements[e]),v=()=>this.getContext(i,a,t),m=u.resolveNamedOptions(h,p,v,f);return m.$shared&&(m.$shared=c,s[o]=Object.freeze(rv(m,c))),m}_resolveAnimations(e,t,i){const a=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,l=s[o];if(l)return l;let c;if(a.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,t),h=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(h,this.getContext(e,i,t))}const u=new Yg(a,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||cu(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),a=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(t,s)||s!==a;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:o}}updateElement(e,t,i,a){cu(a)?Object.assign(e,i):this._resolveAnimations(t,a).update(e,i)}updateSharedOptions(e,t,i){e&&!cu(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,a){e.active=a;const s=this.getStyle(t,a);this._resolveAnimations(t,i,a).update(e,{options:!a&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const a=i.length,s=t.length,o=Math.min(s,a);o&&this.parse(0,o),s>a?this._insertElements(a,s-a,e):s<a&&this._removeElements(s,a-s)}_insertElements(e,t,i=!0){const a=this._cachedMeta,s=a.data,o=e+t;let l;const c=u=>{for(u.length+=t,l=u.length-1;l>=o;l--)u[l]=u[l-t]};for(c(s),l=e;l<o;++l)s[l]=new this.dataElementType;this._parsing&&c(a._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,a){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(e,t);i._stacked&&Vs(i,a)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,a]=e;this[t](i,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}At(oo,"defaults",{}),At(oo,"datasetElementType",null),At(oo,"dataElementType",null);class Al extends oo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:a=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:l,count:c}=Hw(t,a,o);this._drawStart=l,this._drawCount=c,Ww(t)&&(l=0,c=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=a;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(a,l,c,e)}updateElements(e,t,i,a){const s=a==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(t,a),h=o.axis,p=l.axis,{spanGaps:v,segment:m}=this.options,g=wo(v)?v:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||s||a==="none",_=t+i,E=e.length;let D=t>0&&this.getParsed(t-1);for(let S=0;S<E;++S){const C=e[S],w=k?C:{};if(S<t||S>=_){w.skip=!0;continue}const $=this.getParsed(S),O=an($[p]),P=w[h]=o.getPixelForValue($[h],S),L=w[p]=s||O?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,$,c):$[p],S);w.skip=isNaN(P)||isNaN(L)||O,w.stop=S>0&&Math.abs($[h]-D[h])>g,m&&(w.parsed=$,w.raw=u.data[S]),f&&(w.options=d||this.resolveDataElementOptions(S,C.active?"active":a)),k||this.updateElement(C,S,w,a),D=$}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,a=e.data||[];if(!a.length)return i;const s=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}At(Al,"id","line"),At(Al,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),At(Al,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function wa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class cf{constructor(e){At(this,"options");this.options=e||{}}static override(e){Object.assign(cf.prototype,e)}init(){}formats(){return wa()}parse(){return wa()}format(){return wa()}add(){return wa()}diff(){return wa()}startOf(){return wa()}endOf(){return wa()}}var Jg={_date:cf};function d2(n,e,t,i){const{controller:a,data:s,_sorted:o}=n,l=a._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&s.length){const u=l._reversePixels?qw:Ea;if(i){if(a._sharedOptions){const d=s[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const h=u(s,e,t-f),p=u(s,e,t+f);return{lo:h.lo,hi:p.hi}}}}else{const d=u(s,e,t);if(c){const{vScale:f}=a._cachedMeta,{_parsed:h}=n,p=h.slice(0,d.lo+1).reverse().findIndex(m=>!an(m[f.axis]));d.lo-=Math.max(0,p);const v=h.slice(d.hi).findIndex(m=>!an(m[f.axis]));d.hi+=Math.max(0,v)}return d}}return{lo:0,hi:s.length-1}}function Cc(n,e,t,i,a){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,c=s.length;l<c;++l){const{index:u,data:d}=s[l],{lo:f,hi:h}=d2(s[l],e,o,a);for(let p=f;p<=h;++p){const v=d[p];v.skip||i(v,u,p)}}}function f2(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,a){const s=e?Math.abs(i.x-a.x):0,o=t?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function uu(n,e,t,i,a){const s=[];return!a&&!n.isPointInArea(e)||Cc(n,t,e,function(l,c,u){!a&&!ks(l,n.chartArea,0)||l.inRange(e.x,e.y,i)&&s.push({element:l,datasetIndex:c,index:u})},!0),s}function h2(n,e,t,i){let a=[];function s(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:f}=Nw(o,{x:e.x,y:e.y});Og(f,u,d)&&a.push({element:o,datasetIndex:l,index:c})}return Cc(n,t,e,s),a}function v2(n,e,t,i,a,s){let o=[];const l=f2(t);let c=Number.POSITIVE_INFINITY;function u(d,f,h){const p=d.inRange(e.x,e.y,a);if(i&&!p)return;const v=d.getCenterPoint(a);if(!(!!s||n.isPointInArea(v))&&!p)return;const g=l(e,v);g<c?(o=[{element:d,datasetIndex:f,index:h}],c=g):g===c&&o.push({element:d,datasetIndex:f,index:h})}return Cc(n,t,e,u),o}function du(n,e,t,i,a,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?h2(n,e,t,a):v2(n,e,t,i,a,s)}function av(n,e,t,i,a){const s=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return Cc(n,t,e,(c,u,d)=>{c[o]&&c[o](e[t],a)&&(s.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(e.x,e.y,a))}),i&&!l?[]:s}var m2={modes:{index(n,e,t,i){const a=cr(e,n),s=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?uu(n,a,s,i,o):du(n,a,s,!1,i,o),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(n,e,t,i){const a=cr(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?uu(n,a,s,i,o):du(n,a,s,!1,i,o);if(l.length>0){const c=l[0].datasetIndex,u=n.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(n,e,t,i){const a=cr(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return uu(n,a,s,i,o)},nearest(n,e,t,i){const a=cr(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return du(n,a,s,t.intersect,i,o)},x(n,e,t,i){const a=cr(e,n);return av(n,a,"x",t.intersect,i)},y(n,e,t,i){const a=cr(e,n);return av(n,a,"y",t.intersect,i)}}};const Zg=["left","top","right","bottom"];function Us(n,e){return n.filter(t=>t.pos===e)}function sv(n,e){return n.filter(t=>Zg.indexOf(t.pos)===-1&&t.box.axis===e)}function Bs(n,e){return n.sort((t,i)=>{const a=e?i:t,s=e?t:i;return a.weight===s.weight?a.index-s.index:a.weight-s.weight})}function p2(n){const e=[];let t,i,a,s,o,l;for(t=0,i=(n||[]).length;t<i;++t)a=n[t],{position:s,options:{stack:o,stackWeight:l=1}}=a,e.push({index:t,box:a,pos:s,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&s+o,stackWeight:l});return e}function g2(n){const e={};for(const t of n){const{stack:i,pos:a,stackWeight:s}=t;if(!i||!Zg.includes(a))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function b2(n,e){const t=g2(n),{vBoxMaxWidth:i,hBoxMaxHeight:a}=e;let s,o,l;for(s=0,o=n.length;s<o;++s){l=n[s];const{fullSize:c}=l.box,u=t[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*i:c&&e.availableWidth,l.height=a):(l.width=i,l.height=d?d*a:c&&e.availableHeight)}return t}function y2(n){const e=p2(n),t=Bs(e.filter(u=>u.box.fullSize),!0),i=Bs(Us(e,"left"),!0),a=Bs(Us(e,"right")),s=Bs(Us(e,"top"),!0),o=Bs(Us(e,"bottom")),l=sv(e,"x"),c=sv(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:a.concat(c).concat(o).concat(l),chartArea:Us(e,"chartArea"),vertical:i.concat(a).concat(c),horizontal:s.concat(o).concat(l)}}function ov(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function Gg(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function _2(n,e,t,i){const{pos:a,box:s}=t,o=n.maxPadding;if(!Bt(a)){t.size&&(n[a]-=t.size);const f=i[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?s.height:s.width),t.size=f.size/f.count,n[a]+=t.size}s.getPadding&&Gg(o,s.getPadding());const l=Math.max(0,e.outerWidth-ov(o,n,"left","right")),c=Math.max(0,e.outerHeight-ov(o,n,"top","bottom")),u=l!==n.w,d=c!==n.h;return n.w=l,n.h=c,t.horizontal?{same:u,other:d}:{same:d,other:u}}function x2(n){const e=n.maxPadding;function t(i){const a=Math.max(e[i]-n[i],0);return n[i]+=a,a}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function w2(n,e){const t=e.maxPadding;function i(a){const s={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Xs(n,e,t,i){const a=[];let s,o,l,c,u,d;for(s=0,o=n.length,u=0;s<o;++s){l=n[s],c=l.box,c.update(l.width||e.w,l.height||e.h,w2(l.horizontal,e));const{same:f,other:h}=_2(e,t,l,i);u|=f&&a.length,d=d||h,c.fullSize||a.push(l)}return u&&Xs(a,e,t,i)||d}function hl(n,e,t,i,a){n.top=t,n.left=e,n.right=e+i,n.bottom=t+a,n.width=i,n.height=a}function lv(n,e,t,i){const a=t.padding;let{x:s,y:o}=e;for(const l of n){const c=l.box,u=i[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const f=e.w*d,h=u.size||c.height;Gl(u.start)&&(o=u.start),c.fullSize?hl(c,a.left,o,t.outerWidth-a.right-a.left,h):hl(c,e.left+u.placed,o,f,h),u.start=o,u.placed+=f,o=c.bottom}else{const f=e.h*d,h=u.size||c.width;Gl(u.start)&&(s=u.start),c.fullSize?hl(c,s,a.top,h,t.outerHeight-a.bottom-a.top):hl(c,s,e.top+u.placed,h,f),u.start=s,u.placed+=f,s=c.right}}e.x=s,e.y=o}var vl={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const a=ca(n.options.layout.padding),s=Math.max(e-a.width,0),o=Math.max(t-a.height,0),l=y2(n.boxes),c=l.vertical,u=l.horizontal;jt(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const d=c.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:a,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},a);Gg(h,ca(i));const p=Object.assign({maxPadding:h,w:s,h:o,x:a.left,y:a.top},a),v=b2(c.concat(u),f);Xs(l.fullSize,p,f,v),Xs(c,p,f,v),Xs(u,p,f,v)&&Xs(c,p,f,v),x2(p),lv(l.leftAndTop,p,f,v),p.x+=p.w,p.y+=p.h,lv(l.rightAndBottom,p,f,v),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},jt(l.chartArea,m=>{const g=m.box;Object.assign(g,n.chartArea),g.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Xg{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,a){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,a?Math.floor(t/a):i)}}isAttached(e){return!0}updateConfig(e){}}class k2 extends Xg{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ll="$chartjs",S2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},cv=n=>n===null||n==="";function T2(n,e){const t=n.style,i=n.getAttribute("height"),a=n.getAttribute("width");if(n[Ll]={initial:{height:i,width:a,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",cv(a)){const s=Jh(n,"width");s!==void 0&&(n.width=s)}if(cv(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=Jh(n,"height");s!==void 0&&(n.height=s)}return n}const Qg=Rk?{passive:!0}:!1;function $2(n,e,t){n&&n.addEventListener(e,t,Qg)}function I2(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,Qg)}function C2(n,e){const t=S2[n.type]||n.type,{x:i,y:a}=cr(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:a!==void 0?a:null}}function ec(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function E2(n,e,t){const i=n.canvas,a=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||ec(l.addedNodes,i),o=o&&!ec(l.removedNodes,i);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}function O2(n,e,t){const i=n.canvas,a=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||ec(l.removedNodes,i),o=o&&!ec(l.addedNodes,i);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}const ko=new Map;let uv=0;function eb(){const n=window.devicePixelRatio;n!==uv&&(uv=n,ko.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function D2(n,e){ko.size||window.addEventListener("resize",eb),ko.set(n,e)}function P2(n){ko.delete(n),ko.size||window.removeEventListener("resize",eb)}function M2(n,e,t){const i=n.canvas,a=i&&lf(i);if(!a)return;const s=Ag((l,c)=>{const u=a.clientWidth;t(l,c),u<a.clientWidth&&t()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||s(u,d)});return o.observe(a),D2(n,s),o}function fu(n,e,t){t&&t.disconnect(),e==="resize"&&P2(n)}function A2(n,e,t){const i=n.canvas,a=Ag(s=>{n.ctx!==null&&t(C2(s,n))},n);return $2(i,e,a),a}class L2 extends Xg{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(T2(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Ll])return!1;const i=t[Ll].initial;["height","width"].forEach(s=>{const o=i[s];an(o)?t.removeAttribute(s):t.setAttribute(s,o)});const a=i.style||{};return Object.keys(a).forEach(s=>{t.style[s]=a[s]}),t.width=t.width,delete t[Ll],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const a=e.$proxies||(e.$proxies={}),o={attach:E2,detach:O2,resize:M2}[t]||A2;a[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),a=i[t];if(!a)return;({attach:fu,detach:fu,resize:fu}[t]||I2)(e,t,a),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,a){return Nk(e,t,i,a)}isAttached(e){const t=e&&lf(e);return!!(t&&t.isConnected)}}function N2(n){return!of()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?k2:L2}var kl;let Ho=(kl=class{constructor(){At(this,"x");At(this,"y");At(this,"active",!1);At(this,"options");At(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return wo(this.x)&&wo(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const a={};return e.forEach(s=>{a[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),a}},At(kl,"defaults",{}),At(kl,"defaultRoutes"),kl);function R2(n,e){const t=n.options.ticks,i=F2(n),a=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?z2(e):[],o=s.length,l=s[0],c=s[o-1],u=[];if(o>a)return j2(e,u,s,o/a),u;const d=q2(s,e,a);if(o>0){let f,h;const p=o>1?Math.round((c-l)/(o-1)):null;for(ml(e,u,d,an(p)?0:l-p,l),f=0,h=o-1;f<h;f++)ml(e,u,d,s[f],s[f+1]);return ml(e,u,d,c,an(p)?e.length:c+p),u}return ml(e,u,d),u}function F2(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),a=n._maxLength/t;return Math.floor(Math.min(i,a))}function q2(n,e,t){const i=V2(n),a=e.length/t;if(!i)return Math.max(a,1);const s=Dw(i);for(let o=0,l=s.length-1;o<l;o++){const c=s[o];if(c>a)return c}return Math.max(a,1)}function z2(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function j2(n,e,t,i){let a=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),a++,s=t[a*i])}function ml(n,e,t,i,a){const s=Zt(i,0),o=Math.min(Zt(a,n.length),n.length);let l=0,c,u,d;for(t=Math.ceil(t),a&&(c=a-i,t=c/Math.floor(c/t)),d=s;d<0;)l++,d=Math.round(s+l*t);for(u=Math.max(s,0);u<o;u++)u===d&&(e.push(n[u]),l++,d=Math.round(s+l*t))}function V2(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const U2=n=>n==="left"?"right":n==="right"?"left":n,dv=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,fv=(n,e)=>Math.min(e||n,n);function hv(n,e){const t=[],i=n.length/e,a=n.length;let s=0;for(;s<a;s+=i)t.push(n[Math.floor(s)]);return t}function B2(n,e,t){const i=n.ticks.length,a=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,l=1e-6;let c=n.getPixelForTick(a),u;if(!(t&&(i===1?u=Math.max(c-s,o-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(a-1))/2,c+=a<e?u:-u,c<s-l||c>o+l)))return c}function H2(n,e){jt(n,t=>{const i=t.gc,a=i.length/2;let s;if(a>e){for(s=0;s<a;++s)delete t.data[i[s]];i.splice(0,a)}})}function Hs(n){return n.drawTicks?n.tickLength:0}function vv(n,e){if(!n.display)return 0;const t=hr(n.font,e),i=ca(n.padding);return(Cn(n.text)?n.text.length:1)*t.lineHeight+i.height}function W2(n,e){return Ha(n,{scale:e,type:"scale"})}function Y2(n,e,t){return Ha(n,{tick:t,index:e,type:"tick"})}function K2(n,e,t){let i=Bw(n);return(t&&e!=="right"||!t&&e==="right")&&(i=U2(i)),i}function J2(n,e,t,i){const{top:a,left:s,bottom:o,right:l,chart:c}=n,{chartArea:u,scales:d}=c;let f=0,h,p,v;const m=o-a,g=l-s;if(n.isHorizontal()){if(p=Rh(i,s,l),Bt(t)){const k=Object.keys(t)[0],_=t[k];v=d[k].getPixelForValue(_)+m-e}else t==="center"?v=(u.bottom+u.top)/2+m-e:v=dv(n,t,e);h=l-s}else{if(Bt(t)){const k=Object.keys(t)[0],_=t[k];p=d[k].getPixelForValue(_)-g+e}else t==="center"?p=(u.left+u.right)/2-g+e:p=dv(n,t,e);v=Rh(i,o,a),f=t==="left"?-Yi:Yi}return{titleX:p,titleY:v,maxWidth:h,rotation:f}}class Wo extends Ho{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:a}=this;return e=rr(e,Number.POSITIVE_INFINITY),t=rr(t,Number.NEGATIVE_INFINITY),i=rr(i,Number.POSITIVE_INFINITY),a=rr(a,Number.NEGATIVE_INFINITY),{min:rr(e,i),max:rr(t,a),minDefined:Wn(e),maxDefined:Wn(t)}}getMinMax(e){let{min:t,max:i,minDefined:a,maxDefined:s}=this.getUserBounds(),o;if(a&&s)return{min:t,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),a||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=a&&t>i?t:i,{min:rr(t,rr(i,t)),max:rr(i,rr(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Mt(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:a,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=vk(this,s,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?hv(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=R2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Mt(this.options.afterUpdate,[this])}beforeSetDimensions(){Mt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Mt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Mt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Mt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,a,s;for(i=0,a=e.length;i<a;i++)s=e[i],s.label=Mt(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Mt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Mt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=fv(this.ticks.length,e.ticks.maxTicksLimit),a=t.minRotation||0,s=t.maxRotation;let o=a,l,c,u;if(!this._isVisible()||!t.display||a>=s||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const d=this._getLabelSizes(),f=d.widest.width,h=d.highest.height,p=Ki(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/i:p/(i-1),f+6>l&&(l=p/(i-(e.offset?.5:1)),c=this.maxHeight-Hs(e.grid)-t.padding-vv(e.title,this.chart.options.font),u=Math.sqrt(f*f+h*h),o=Lw(Math.min(Math.asin(Ki((d.highest.height+6)/l,-1,1)),Math.asin(Ki(c/u,-1,1))-Math.asin(Ki(h/u,-1,1)))),o=Math.max(a,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Mt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Mt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:a,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=vv(a,t.options.font);if(l?(e.width=this.maxWidth,e.height=Hs(s)+c):(e.height=this.maxHeight,e.width=Hs(s)+c),i.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:h}=this._getLabelSizes(),p=i.padding*2,v=Ca(this.labelRotation),m=Math.cos(v),g=Math.sin(v);if(l){const k=i.mirror?0:g*f.width+m*h.height;e.height=Math.min(this.maxHeight,e.height+k+p)}else{const k=i.mirror?0:m*f.width+g*h.height;e.width=Math.min(this.maxWidth,e.width+k+p)}this._calculatePadding(u,d,g,m)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,a){const{ticks:{align:s,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;c?u?(h=a*e.width,p=i*t.height):(h=i*e.height,p=a*t.width):s==="start"?p=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,p=t.width/2),this.paddingLeft=Math.max((h-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let d=t.height/2,f=e.height/2;s==="start"?(d=0,f=e.height):s==="end"&&(d=t.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Mt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)an(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=hv(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:a,_longestTextCache:s}=this,o=[],l=[],c=Math.floor(t/fv(t,i));let u=0,d=0,f,h,p,v,m,g,k,_,E,D,S;for(f=0;f<t;f+=c){if(v=e[f].label,m=this._resolveTickFontOptions(f),a.font=g=m.string,k=s[g]=s[g]||{data:{},gc:[]},_=m.lineHeight,E=D=0,!an(v)&&!Cn(v))E=Vh(a,k.data,k.gc,E,v),D=_;else if(Cn(v))for(h=0,p=v.length;h<p;++h)S=v[h],!an(S)&&!Cn(S)&&(E=Vh(a,k.data,k.gc,E,S),D+=_);o.push(E),l.push(D),u=Math.max(E,u),d=Math.max(D,d)}H2(s,t);const C=o.indexOf(u),w=l.indexOf(d),$=O=>({width:o[O]||0,height:l[O]||0});return{first:$(0),last:$(t-1),widest:$(C),highest:$(w),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Fw(this._alignToPixels?xa(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=Y2(this.getContext(),e,i))}return this.$context||(this.$context=W2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Ca(this.labelRotation),i=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,l=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>l*a?l/i:c/a:c*a<l*i?c/i:l/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,a=this.options,{grid:s,position:o,border:l}=a,c=s.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),h=Hs(s),p=[],v=l.setContext(this.getContext()),m=v.display?v.width:0,g=m/2,k=function(H){return xa(i,H,m)};let _,E,D,S,C,w,$,O,P,L,N,V;if(o==="top")_=k(this.bottom),w=this.bottom-h,O=_-g,L=k(e.top)+g,V=e.bottom;else if(o==="bottom")_=k(this.top),L=e.top,V=k(e.bottom)-g,w=_+g,O=this.top+h;else if(o==="left")_=k(this.right),C=this.right-h,$=_-g,P=k(e.left)+g,N=e.right;else if(o==="right")_=k(this.left),P=e.left,N=k(e.right)-g,C=_+g,$=this.left+h;else if(t==="x"){if(o==="center")_=k((e.top+e.bottom)/2+.5);else if(Bt(o)){const H=Object.keys(o)[0],z=o[H];_=k(this.chart.scales[H].getPixelForValue(z))}L=e.top,V=e.bottom,w=_+g,O=w+h}else if(t==="y"){if(o==="center")_=k((e.left+e.right)/2);else if(Bt(o)){const H=Object.keys(o)[0],z=o[H];_=k(this.chart.scales[H].getPixelForValue(z))}C=_-g,$=C-h,P=e.left,N=e.right}const R=Zt(a.ticks.maxTicksLimit,f),U=Math.max(1,Math.ceil(f/R));for(E=0;E<f;E+=U){const H=this.getContext(E),z=s.setContext(H),J=l.setContext(H),W=z.lineWidth,te=z.color,de=J.dash||[],pe=J.dashOffset,_e=z.tickWidth,ke=z.tickColor,ve=z.tickBorderDash||[],Oe=z.tickBorderDashOffset;D=B2(this,E,c),D!==void 0&&(S=xa(i,D,W),u?C=$=P=N=S:w=O=L=V=S,p.push({tx1:C,ty1:w,tx2:$,ty2:O,x1:P,y1:L,x2:N,y2:V,width:W,color:te,borderDash:de,borderDashOffset:pe,tickWidth:_e,tickColor:ke,tickBorderDash:ve,tickBorderDashOffset:Oe}))}return this._ticksLength=f,this._borderValue=_,p}_computeLabelItems(e){const t=this.axis,i=this.options,{position:a,ticks:s}=i,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=s,h=Hs(i.grid),p=h+d,v=f?-d:p,m=-Ca(this.labelRotation),g=[];let k,_,E,D,S,C,w,$,O,P,L,N,V="middle";if(a==="top")C=this.bottom-v,w=this._getXAxisLabelAlignment();else if(a==="bottom")C=this.top+v,w=this._getXAxisLabelAlignment();else if(a==="left"){const U=this._getYAxisLabelAlignment(h);w=U.textAlign,S=U.x}else if(a==="right"){const U=this._getYAxisLabelAlignment(h);w=U.textAlign,S=U.x}else if(t==="x"){if(a==="center")C=(e.top+e.bottom)/2+p;else if(Bt(a)){const U=Object.keys(a)[0],H=a[U];C=this.chart.scales[U].getPixelForValue(H)+p}w=this._getXAxisLabelAlignment()}else if(t==="y"){if(a==="center")S=(e.left+e.right)/2-p;else if(Bt(a)){const U=Object.keys(a)[0],H=a[U];S=this.chart.scales[U].getPixelForValue(H)}w=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?V="top":c==="end"&&(V="bottom"));const R=this._getLabelSizes();for(k=0,_=l.length;k<_;++k){E=l[k],D=E.label;const U=s.setContext(this.getContext(k));$=this.getPixelForTick(k)+s.labelOffset,O=this._resolveTickFontOptions(k),P=O.lineHeight,L=Cn(D)?D.length:1;const H=L/2,z=U.color,J=U.textStrokeColor,W=U.textStrokeWidth;let te=w;o?(S=$,w==="inner"&&(k===_-1?te=this.options.reverse?"left":"right":k===0?te=this.options.reverse?"right":"left":te="center"),a==="top"?u==="near"||m!==0?N=-L*P+P/2:u==="center"?N=-R.highest.height/2-H*P+P:N=-R.highest.height+P/2:u==="near"||m!==0?N=P/2:u==="center"?N=R.highest.height/2-H*P:N=R.highest.height-L*P,f&&(N*=-1),m!==0&&!U.showLabelBackdrop&&(S+=P/2*Math.sin(m))):(C=$,N=(1-L)*P/2);let de;if(U.showLabelBackdrop){const pe=ca(U.backdropPadding),_e=R.heights[k],ke=R.widths[k];let ve=N-pe.top,Oe=0-pe.left;switch(V){case"middle":ve-=_e/2;break;case"bottom":ve-=_e;break}switch(w){case"center":Oe-=ke/2;break;case"right":Oe-=ke;break;case"inner":k===_-1?Oe-=ke:k>0&&(Oe-=ke/2);break}de={left:Oe,top:ve,width:ke+pe.width,height:_e+pe.height,color:U.backdropColor}}g.push({label:D,font:O,textOffset:N,options:{rotation:m,color:z,strokeColor:J,strokeWidth:W,textAlign:te,textBaseline:V,translation:[S,C],backdrop:de}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ca(this.labelRotation))return e==="top"?"left":"right";let a="center";return t.align==="start"?a="left":t.align==="end"?a="right":t.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:a,padding:s}}=this.options,o=this._getLabelSizes(),l=e+s,c=o.widest.width;let u,d;return t==="left"?a?(d=this.right+s,i==="near"?u="left":i==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,i==="near"?u="right":i==="center"?(u="center",d-=c/2):(u="left",d=this.left)):t==="right"?a?(d=this.left+s,i==="near"?u="right":i==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,i==="near"?u="left":i==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:a,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,a,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const a=this.ticks.findIndex(s=>s.value===e);return a>=0?t.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const l=(c,u,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=a.length;s<o;++s){const c=a[s];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:a}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const l=a.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,h;this.isHorizontal()?(u=xa(e,this.left,o)-o/2,d=xa(e,this.right,l)+l/2,f=h=c):(f=xa(e,this.top,o)-o/2,h=xa(e,this.bottom,l)+l/2,u=d=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,f),t.lineTo(d,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&tf(i,a);const s=this.getLabelItems(e);for(const o of s){const l=o.options,c=o.font,u=o.label,d=o.textOffset;Bh(i,u,0,d,c,l)}a&&nf(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:a}}=this;if(!i.display)return;const s=hr(i.font),o=ca(i.padding),l=i.align;let c=s.lineHeight/2;t==="bottom"||t==="center"||Bt(t)?(c+=o.bottom,Cn(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:f,rotation:h}=J2(this,c,t,l);Bh(e,i.text,0,0,s,{color:i.color,maxWidth:f,rotation:h,textAlign:K2(l,t,a),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Zt(e.grid&&e.grid.z,-1),a=Zt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Wo.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let s,o;for(s=0,o=t.length;s<o;++s){const l=t[s];l[i]===this.id&&(!e||l.type===e)&&a.push(l)}return a}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return hr(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class pl{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;X2(t)&&(i=this.register(t));const a=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in a||(a[s]=e,Z2(e,o,i),this.override&&kn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,a=this.scope;i in t&&delete t[i],a&&i in kn[a]&&(delete kn[a][i],this.override&&delete Fa[i])}}function Z2(n,e,t){const i=xo(Object.create(null),[t?kn.get(t):{},kn.get(e),n.defaults]);kn.set(e,i),n.defaultRoutes&&G2(e,n.defaultRoutes),n.descriptors&&kn.describe(e,n.descriptors)}function G2(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),a=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),l=o.pop(),c=o.join(".");kn.route(s,a,c,l)})}function X2(n){return"id"in n&&"defaults"in n}class Q2{constructor(){this.controllers=new pl(oo,"datasets",!0),this.elements=new pl(Ho,"elements"),this.plugins=new pl(Object,"plugins"),this.scales=new pl(Wo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(a=>{const s=i||this._getRegistryForType(a);i||s.isForType(a)||s===this.plugins&&a.id?this._exec(e,s,a):jt(a,o=>{const l=i||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,i){const a=Xd(e);Mt(i["before"+a],[],i),t[e](i),Mt(i["after"+a],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const a=t.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return a}}var or=new Q2;class eS{constructor(){this._init=[]}notify(e,t,i,a){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,a){a=a||{};for(const s of e){const o=s.plugin,l=o[i],c=[t,a,s.options];if(Mt(l,c,o)===!1&&a.cancelable)return!1}return!0}invalidate(){an(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,a=Zt(i.options&&i.options.plugins,{}),s=tS(i);return a===!1&&!t?[]:iS(e,s,a,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,a=(s,o)=>s.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(a(t,i),e,"stop"),this._notify(a(i,t),e,"start")}}function tS(n){const e={},t=[],i=Object.keys(or.plugins.items);for(let s=0;s<i.length;s++)t.push(or.getPlugin(i[s]));const a=n.plugins||[];for(let s=0;s<a.length;s++){const o=a[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function nS(n,e){return!e&&n===!1?null:n===!0?{}:n}function iS(n,{plugins:e,localIds:t},i,a){const s=[],o=n.getContext();for(const l of e){const c=l.id,u=nS(i[c],a);u!==null&&s.push({plugin:l,options:rS(n.config,{plugin:l,local:t[c]},u,o)})}return s}function rS(n,{plugin:e,local:t},i,a){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function nd(n,e){const t=kn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function aS(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function sS(n,e){return n===e?"_index_":"_value_"}function mv(n){if(n==="x"||n==="y"||n==="r")return n}function oS(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function id(n,...e){if(mv(n))return n;for(const t of e){const i=t.axis||oS(t.position)||n.length>1&&mv(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function pv(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function lS(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return pv(n,"x",t[0])||pv(n,"y",t[0])}return{}}function cS(n,e){const t=Fa[n.type]||{scales:{}},i=e.scales||{},a=nd(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const l=i[o];if(!Bt(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=id(o,l,lS(o,n),kn.scales[l.type]),u=sS(c,a),d=t.scales||{};s[o]=ro(Object.create(null),[{axis:c},l,d[c],d[u]])}),n.data.datasets.forEach(o=>{const l=o.type||n.type,c=o.indexAxis||nd(l,e),d=(Fa[l]||{}).scales||{};Object.keys(d).forEach(f=>{const h=aS(f,c),p=o[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),ro(s[p],[{axis:h},i[p],d[f]])})}),Object.keys(s).forEach(o=>{const l=s[o];ro(l,[kn.scales[l.type],kn.scale])}),s}function tb(n){const e=n.options||(n.options={});e.plugins=Zt(e.plugins,{}),e.scales=cS(n,e)}function nb(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function uS(n){return n=n||{},n.data=nb(n.data),tb(n),n}const gv=new Map,ib=new Set;function gl(n,e){let t=gv.get(n);return t||(t=e(),gv.set(n,t),ib.add(t)),t}const Ws=(n,e,t)=>{const i=Zl(e,t);i!==void 0&&n.add(i)};class dS{constructor(e){this._config=uS(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=nb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),tb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return gl(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return gl(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return gl(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return gl(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let a=i.get(e);return(!a||t)&&(a=new Map,i.set(e,a)),a}getOptionScopes(e,t,i){const{options:a,type:s}=this,o=this._cachedScopes(e,i),l=o.get(t);if(l)return l;const c=new Set;t.forEach(d=>{e&&(c.add(e),d.forEach(f=>Ws(c,e,f))),d.forEach(f=>Ws(c,a,f)),d.forEach(f=>Ws(c,Fa[s]||{},f)),d.forEach(f=>Ws(c,kn,f)),d.forEach(f=>Ws(c,ed,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),ib.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,Fa[t]||{},kn.datasets[t]||{},{type:t},kn,ed]}resolveNamedOptions(e,t,i,a=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=bv(this._resolverCache,e,a);let c=o;if(hS(o,t)){s.$shared=!1,i=oa(i)?i():i;const u=this.createResolver(e,i,l);c=Ss(o,i,u)}for(const u of t)s[u]=c[u];return s}createResolver(e,t,i=[""],a){const{resolver:s}=bv(this._resolverCache,e,i);return Bt(t)?Ss(s,t,void 0,a):s}}function bv(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const a=t.join();let s=i.get(a);return s||(s={resolver:rf(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},i.set(a,s)),s}const fS=n=>Bt(n)&&Object.getOwnPropertyNames(n).some(e=>oa(n[e]));function hS(n,e){const{isScriptable:t,isIndexable:i}=Fg(n);for(const a of e){const s=t(a),o=i(a),l=(o||s)&&n[a];if(s&&(oa(l)||fS(l))||o&&Cn(l))return!0}return!1}var vS="4.5.0";const mS=["top","bottom","left","right","chartArea"];function yv(n,e){return n==="top"||n==="bottom"||mS.indexOf(n)===-1&&e==="x"}function _v(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function xv(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Mt(t&&t.onComplete,[n],e)}function pS(n){const e=n.chart,t=e.options.animation;Mt(t&&t.onProgress,[n],e)}function rb(n){return of()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Nl={},wv=n=>{const e=rb(n);return Object.values(Nl).filter(t=>t.canvas===e).pop()};function gS(n,e,t){const i=Object.keys(n);for(const a of i){const s=+a;if(s>=e){const o=n[a];delete n[a],(t>0||s>e)&&(n[s+t]=o)}}}function bS(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}class ur{static register(...e){or.add(...e),kv()}static unregister(...e){or.remove(...e),kv()}constructor(e,t){const i=this.config=new dS(t),a=rb(e),s=wv(a);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||N2(a)),this.platform.updateConfig(i);const l=this.platform.acquireContext(a,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=ww(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new eS,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Uw(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Nl[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Sr.listen(this,"complete",xv),Sr.listen(this,"progress",pS),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:a,_aspectRatio:s}=this;return an(e)?t&&s?s:a?i/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return or}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Kh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Uh(this.canvas,this.ctx),this}stop(){return Sr.stop(this),this}resize(e,t){Sr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,a=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,t,s),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Kh(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Mt(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};jt(t,(i,a)=>{i.id=a})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,a=Object.keys(i).reduce((o,l)=>(o[l]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const l=t[o],c=id(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),jt(s,o=>{const l=o.options,c=l.id,u=id(c,l),d=Zt(l.type,o.dtype);(l.position===void 0||yv(l.position,u)!==yv(o.dposition))&&(l.position=o.dposition),a[c]=!0;let f=null;if(c in i&&i[c].type===d)f=i[c];else{const h=or.getScale(d);f=new h({id:c,type:d,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(l,e)}),jt(a,(o,l)=>{o||delete i[l]}),jt(i,o=>{vl.configure(this,o,o.options),vl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((a,s)=>a.index-s.index),i>t){for(let a=t;a<i;++a)this._destroyDatasetMeta(a);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(_v("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,a)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=t.length;i<a;i++){const s=t[i];let o=this.getDatasetMeta(i);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=l,o.indexAxis=s.indexAxis||nd(l,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=or.getController(l),{datasetElementType:u,dataElementType:d}=kn.datasets[l];Object.assign(c,{dataElementType:or.getElement(d),datasetElementType:u&&or.getElement(u)}),o.controller=new c(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){jt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),h=!a&&s.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),a||jt(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(_v("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){jt(this.scales,e=>{vl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Ph(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:s}of t){const o=i==="_removeElements"?-s:s;gS(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),a=i(0);for(let s=1;s<t;s++)if(!Ph(a,i(s)))return;return Array.from(a).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;vl.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],jt(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,s)=>{a._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,oa(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),a={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(t),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Sr.has(this)?this.attached&&!Sr.running(this)&&Sr.start(this):(this.draw(),xv({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let a,s;for(a=0,s=t.length;a<s;++a){const o=t[a];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},a=Wg(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&tf(t,a),e.controller.draw(),a&&nf(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return ks(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,a){const s=m2.modes[t];return typeof s=="function"?s(this,e,i,a):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let a=i.filter(s=>s&&s._dataset===t).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=Ha(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const a=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,a);Gl(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(l=>l.datasetIndex===e?a:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Sr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Uh(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Nl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},a=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};jt(this.options.events,s=>i(s,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(c,u)=>{t.addEventListener(this,c,u),e[c]=u},a=(c,u)=>{e[c]&&(t.removeEventListener(this,c,u),delete e[c])},s=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{a("attach",l),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,a("resize",s),this._stop(),this._resize(0,0),i("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){jt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},jt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const a=i?"set":"remove";let s,o,l,c;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+a+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!Kl(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const a=this.options.hover,s=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=s(t,e),l=i?e:s(e,t);o.length&&this.updateHoverStyle(o,a.mode,!1),l.length&&a.mode&&this.updateHoverStyle(l,a.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:a=[],options:s}=this,o=t,l=this._getActiveElements(e,a,i,o),c=Cw(e),u=bS(e,this._lastEvent,i,c);i&&(this._lastEvent=null,Mt(s.onHover,[e,l,this],this),c&&Mt(s.onClick,[e,l,this],this));const d=!Kl(l,a);return(d||t)&&(this._active=l,this._updateHoverStyles(l,a,t)),this._lastEvent=u,d}_getActiveElements(e,t,i,a){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,a)}}At(ur,"defaults",kn),At(ur,"instances",Nl),At(ur,"overrides",Fa),At(ur,"registry",or),At(ur,"version",vS),At(ur,"getChart",wv);function kv(){return jt(ur.instances,n=>n._plugins.invalidate())}function ab(n,e,t=e){n.lineCap=Zt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Zt(t.borderDash,e.borderDash)),n.lineDashOffset=Zt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Zt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Zt(t.borderWidth,e.borderWidth),n.strokeStyle=Zt(t.borderColor,e.borderColor)}function yS(n,e,t){n.lineTo(t.x,t.y)}function _S(n){return n.stepped?rk:n.tension||n.cubicInterpolationMode==="monotone"?ak:yS}function sb(n,e,t={}){const i=n.length,{start:a=0,end:s=i-1}=t,{start:o,end:l}=e,c=Math.max(a,o),u=Math.min(s,l),d=a<o&&s<o||a>l&&s>l;return{count:i,start:c,loop:e.loop,ilen:u<c&&!d?i+u-c:u-c}}function xS(n,e,t,i){const{points:a,options:s}=e,{count:o,start:l,loop:c,ilen:u}=sb(a,t,i),d=_S(s);let{move:f=!0,reverse:h}=i||{},p,v,m;for(p=0;p<=u;++p)v=a[(l+(h?u-p:p))%o],!v.skip&&(f?(n.moveTo(v.x,v.y),f=!1):d(n,m,v,h,s.stepped),m=v);return c&&(v=a[(l+(h?u:0))%o],d(n,m,v,h,s.stepped)),!!c}function wS(n,e,t,i){const a=e.points,{count:s,start:o,ilen:l}=sb(a,t,i),{move:c=!0,reverse:u}=i||{};let d=0,f=0,h,p,v,m,g,k;const _=D=>(o+(u?l-D:D))%s,E=()=>{m!==g&&(n.lineTo(d,g),n.lineTo(d,m),n.lineTo(d,k))};for(c&&(p=a[_(0)],n.moveTo(p.x,p.y)),h=0;h<=l;++h){if(p=a[_(h)],p.skip)continue;const D=p.x,S=p.y,C=D|0;C===v?(S<m?m=S:S>g&&(g=S),d=(f*d+D)/++f):(E(),n.lineTo(D,S),v=C,f=0,m=g=S),k=S}E()}function rd(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?wS:xS}function kS(n){return n.stepped?Fk:n.tension||n.cubicInterpolationMode==="monotone"?qk:ka}function SS(n,e,t,i){let a=e._path;a||(a=e._path=new Path2D,e.path(a,t,i)&&a.closePath()),ab(n,e.options),n.stroke(a)}function TS(n,e,t,i){const{segments:a,options:s}=e,o=rd(e);for(const l of a)ab(n,s,l.style),n.beginPath(),o(n,e,l,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const $S=typeof Path2D=="function";function IS(n,e,t,i){$S&&!e.options.segment?SS(n,e,t,i):TS(n,e,t,i)}class Gr extends Ho{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const a=i.spanGaps?this._loop:this._fullLoop;Ok(this._points,i,e,a,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Yk(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,a=e[t],s=this.points,o=Hg(this,{property:t,start:a,end:a});if(!o.length)return;const l=[],c=kS(i);let u,d;for(u=0,d=o.length;u<d;++u){const{start:f,end:h}=o[u],p=s[f],v=s[h];if(p===v){l.push(p);continue}const m=Math.abs((a-p[t])/(v[t]-p[t])),g=c(p,v,m,i.stepped);g[t]=e[t],l.push(g)}return l.length===1?l[0]:l}pathSegment(e,t,i){return rd(this)(e,this,t,i)}path(e,t,i){const a=this.segments,s=rd(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const l of a)o&=s(e,this,l,{start:t,end:t+i-1});return!!o}draw(e,t,i,a){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),IS(e,this,i,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}At(Gr,"id","line"),At(Gr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),At(Gr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),At(Gr,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Sv(n,e,t,i){const a=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<a.radius+a.hitRadius}class Rl extends Ho{constructor(t){super();At(this,"parsed");At(this,"skip");At(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,a){const s=this.options,{x:o,y:l}=this.getProps(["x","y"],a);return Math.pow(t-o,2)+Math.pow(i-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return Sv(this,t,"x",i)}inYRange(t,i){return Sv(this,t,"y",i)}getCenterPoint(t){const{x:i,y:a}=this.getProps(["x","y"],t);return{x:i,y:a}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const a=i&&t.borderWidth||0;return(i+a)*2}draw(t,i){const a=this.options;this.skip||a.radius<.1||!ks(this,i,this.size(a)/2)||(t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.fillStyle=a.backgroundColor,td(t,a,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}At(Rl,"id","point"),At(Rl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),At(Rl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function CS(n,e,t){const i=n.segments,a=n.points,s=e.points,o=[];for(const l of i){let{start:c,end:u}=l;u=Ec(c,u,a);const d=ad(t,a[c],a[u],l.loop);if(!e.segments){o.push({source:l,target:d,start:a[c],end:a[u]});continue}const f=Hg(e,d);for(const h of f){const p=ad(t,s[h.start],s[h.end],h.loop),v=Bg(l,a,p);for(const m of v)o.push({source:m,target:h,start:{[t]:Tv(d,p,"start",Math.max)},end:{[t]:Tv(d,p,"end",Math.min)}})}}return o}function ad(n,e,t,i){if(i)return;let a=e[n],s=t[n];return n==="angle"&&(a=lr(a),s=lr(s)),{property:n,start:a,end:s}}function ES(n,e){const{x:t=null,y:i=null}=n||{},a=e.points,s=[];return e.segments.forEach(({start:o,end:l})=>{l=Ec(o,l,a);const c=a[o],u=a[l];i!==null?(s.push({x:c.x,y:i}),s.push({x:u.x,y:i})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:u.y}))}),s}function Ec(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Tv(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function ob(n,e){let t=[],i=!1;return Cn(n)?(i=!0,t=n):t=ES(n,e),t.length?new Gr({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function $v(n){return n&&n.fill!==!1}function OS(n,e,t){let a=n[e].fill;const s=[e];let o;if(!t)return a;for(;a!==!1&&s.indexOf(a)===-1;){if(!Wn(a))return a;if(o=n[a],!o)return!1;if(o.visible)return a;s.push(a),a=o.fill}return!1}function DS(n,e,t){const i=LS(n);if(Bt(i))return isNaN(i.value)?!1:i;let a=parseFloat(i);return Wn(a)&&Math.floor(a)===a?PS(i[0],e,a,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function PS(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function MS(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Bt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function AS(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:Bt(n)?i=n.value:i=e.getBaseValue(),i}function LS(n){const e=n.options,t=e.fill;let i=Zt(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function NS(n){const{scale:e,index:t,line:i}=n,a=[],s=i.segments,o=i.points,l=RS(e,t);l.push(ob({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){const u=s[c];for(let d=u.start;d<=u.end;d++)FS(a,o[d],l)}return new Gr({points:a,options:{}})}function RS(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let a=0;a<i.length;a++){const s=i[a];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function FS(n,e,t){const i=[];for(let a=0;a<t.length;a++){const s=t[a],{first:o,last:l,point:c}=qS(s,e,"x");if(!(!c||o&&l)){if(o)i.unshift(c);else if(n.push(c),!l)break}}n.push(...i)}function qS(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const a=i[t],s=n.segments,o=n.points;let l=!1,c=!1;for(let u=0;u<s.length;u++){const d=s[u],f=o[d.start][t],h=o[d.end][t];if(Dg(a,f,h)){l=a===f,c=a===h;break}}return{first:l,last:c,point:i}}class lb{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:a,y:s,radius:o}=this;return t=t||{start:0,end:pr},e.arc(a,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:a}=this,s=e.angle;return{x:t+Math.cos(s)*a,y:i+Math.sin(s)*a,angle:s}}}function zS(n){const{chart:e,fill:t,line:i}=n;if(Wn(t))return jS(e,t);if(t==="stack")return NS(n);if(t==="shape")return!0;const a=VS(n);return a instanceof lb?a:ob(a,i)}function jS(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function VS(n){return(n.scale||{}).getPointPositionForValue?BS(n):US(n)}function US(n){const{scale:e={},fill:t}=n,i=MS(t,e);if(Wn(i)){const a=e.isHorizontal();return{x:a?i:null,y:a?null:i}}return null}function BS(n){const{scale:e,fill:t}=n,i=e.options,a=e.getLabels().length,s=i.reverse?e.max:e.min,o=AS(t,e,s),l=[];if(i.grid.circular){const c=e.getPointPositionForValue(0,s);return new lb({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<a;++c)l.push(e.getPointPositionForValue(c,o));return l}function hu(n,e,t){const i=zS(e),{chart:a,index:s,line:o,scale:l,axis:c}=e,u=o.options,d=u.fill,f=u.backgroundColor,{above:h=f,below:p=f}=d||{},v=a.getDatasetMeta(s),m=Wg(a,v);i&&o.points.length&&(tf(n,t),HS(n,{line:o,target:i,above:h,below:p,area:t,scale:l,axis:c,clip:m}),nf(n))}function HS(n,e){const{line:t,target:i,above:a,below:s,area:o,scale:l,clip:c}=e,u=t._loop?"angle":e.axis;n.save();let d=s;s!==a&&(u==="x"?(Iv(n,i,o.top),vu(n,{line:t,target:i,color:a,scale:l,property:u,clip:c}),n.restore(),n.save(),Iv(n,i,o.bottom)):u==="y"&&(Cv(n,i,o.left),vu(n,{line:t,target:i,color:s,scale:l,property:u,clip:c}),n.restore(),n.save(),Cv(n,i,o.right),d=a)),vu(n,{line:t,target:i,color:d,scale:l,property:u,clip:c}),n.restore()}function Iv(n,e,t){const{segments:i,points:a}=e;let s=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:u}=l,d=a[c],f=a[Ec(c,u,a)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(d.x,t),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(f.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function Cv(n,e,t){const{segments:i,points:a}=e;let s=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:u}=l,d=a[c],f=a[Ec(c,u,a)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(t,d.y),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(t,f.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function vu(n,e){const{line:t,target:i,property:a,color:s,scale:o,clip:l}=e,c=CS(t,i,a);for(const{source:u,target:d,start:f,end:h}of c){const{style:{backgroundColor:p=s}={}}=u,v=i!==!0;n.save(),n.fillStyle=p,WS(n,o,l,v&&ad(a,f,h)),n.beginPath();const m=!!t.pathSegment(n,u);let g;if(v){m?n.closePath():Ev(n,i,h,a);const k=!!i.pathSegment(n,d,{move:m,reverse:!0});g=m&&k,g||Ev(n,i,f,a)}n.closePath(),n.fill(g?"evenodd":"nonzero"),n.restore()}}function WS(n,e,t,i){const a=e.chart.chartArea,{property:s,start:o,end:l}=i||{};if(s==="x"||s==="y"){let c,u,d,f;s==="x"?(c=o,u=a.top,d=l,f=a.bottom):(c=a.left,u=o,d=a.right,f=l),n.beginPath(),t&&(c=Math.max(c,t.left),d=Math.min(d,t.right),u=Math.max(u,t.top),f=Math.min(f,t.bottom)),n.rect(c,u,d-c,f-u),n.clip()}}function Ev(n,e,t,i){const a=e.interpolate(t,i);a&&n.lineTo(a.x,a.y)}var YS={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,a=[];let s,o,l,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),l=s.dataset,c=null,l&&l.options&&l instanceof Gr&&(c={visible:n.isDatasetVisible(o),index:o,fill:DS(l,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=c,a.push(c);for(o=0;o<i;++o)c=a[o],!(!c||c.fill===!1)&&(c.fill=OS(a,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",a=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=a.length-1;o>=0;--o){const l=a[o].$filler;l&&(l.line.updateControlPoints(s,l.axis),i&&l.fill&&hu(n.ctx,l,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let a=i.length-1;a>=0;--a){const s=i[a].$filler;$v(s)&&hu(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!$v(i)||t.drawTime!=="beforeDatasetDraw"||hu(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Qs={average(n){if(!n.length)return!1;let e,t,i=new Set,a=0,s=0;for(e=0,t=n.length;e<t;++e){const l=n[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),a+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:a/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,a=Number.POSITIVE_INFINITY,s,o,l;for(s=0,o=n.length;s<o;++s){const c=n[s].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=Qu(e,u);d<a&&(a=d,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function ar(n,e){return e&&(Cn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Tr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function KS(n,e){const{element:t,datasetIndex:i,index:a}=e,s=n.getDatasetMeta(i).controller,{label:o,value:l}=s.getLabelAndValue(a);return{chart:n,label:o,parsed:s.getParsed(a),raw:n.data.datasets[i].data[a],formattedValue:l,dataset:s.getDataset(),dataIndex:a,datasetIndex:i,element:t}}function Ov(n,e){const t=n.chart.ctx,{body:i,footer:a,title:s}=n,{boxWidth:o,boxHeight:l}=e,c=hr(e.bodyFont),u=hr(e.titleFont),d=hr(e.footerFont),f=s.length,h=a.length,p=i.length,v=ca(e.padding);let m=v.height,g=0,k=i.reduce((D,S)=>D+S.before.length+S.lines.length+S.after.length,0);if(k+=n.beforeBody.length+n.afterBody.length,f&&(m+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),k){const D=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;m+=p*D+(k-p)*c.lineHeight+(k-1)*e.bodySpacing}h&&(m+=e.footerMarginTop+h*d.lineHeight+(h-1)*e.footerSpacing);let _=0;const E=function(D){g=Math.max(g,t.measureText(D).width+_)};return t.save(),t.font=u.string,jt(n.title,E),t.font=c.string,jt(n.beforeBody.concat(n.afterBody),E),_=e.displayColors?o+2+e.boxPadding:0,jt(i,D=>{jt(D.before,E),jt(D.lines,E),jt(D.after,E)}),_=0,t.font=d.string,jt(n.footer,E),t.restore(),g+=v.width,{width:g,height:m}}function JS(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function ZS(n,e,t,i){const{x:a,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&a+s+o>e.width||n==="right"&&a-s-o<0)return!0}function GS(n,e,t,i){const{x:a,width:s}=t,{width:o,chartArea:{left:l,right:c}}=n;let u="center";return i==="center"?u=a<=(l+c)/2?"left":"right":a<=s/2?u="left":a>=o-s/2&&(u="right"),ZS(u,n,e,t)&&(u="center"),u}function Dv(n,e,t){const i=t.yAlign||e.yAlign||JS(n,t);return{xAlign:t.xAlign||e.xAlign||GS(n,e,t,i),yAlign:i}}function XS(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function QS(n,e,t){let{y:i,height:a}=n;return e==="top"?i+=t:e==="bottom"?i-=a+t:i-=a/2,i}function Pv(n,e,t,i){const{caretSize:a,caretPadding:s,cornerRadius:o}=n,{xAlign:l,yAlign:c}=t,u=a+s,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=Ml(o);let v=XS(e,l);const m=QS(e,c,u);return c==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(d,h)+a:l==="right"&&(v+=Math.max(f,p)+a),{x:Ki(v,0,i.width-e.width),y:Ki(m,0,i.height-e.height)}}function bl(n,e,t){const i=ca(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function Mv(n){return ar([],Tr(n))}function eT(n,e,t){return Ha(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Av(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const cb={beforeTitle:kr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:kr,beforeBody:kr,beforeLabel:kr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return an(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:kr,afterBody:kr,beforeFooter:kr,footer:kr,afterFooter:kr};function ui(n,e,t,i){const a=n[e].call(t,i);return typeof a>"u"?cb[e].call(t,i):a}class sd extends Ho{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&t.options.animation&&i.animations,s=new Yg(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=eT(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,a=ui(i,"beforeTitle",this,e),s=ui(i,"title",this,e),o=ui(i,"afterTitle",this,e);let l=[];return l=ar(l,Tr(a)),l=ar(l,Tr(s)),l=ar(l,Tr(o)),l}getBeforeBody(e,t){return Mv(ui(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,a=[];return jt(e,s=>{const o={before:[],lines:[],after:[]},l=Av(i,s);ar(o.before,Tr(ui(l,"beforeLabel",this,s))),ar(o.lines,ui(l,"label",this,s)),ar(o.after,Tr(ui(l,"afterLabel",this,s))),a.push(o)}),a}getAfterBody(e,t){return Mv(ui(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,a=ui(i,"beforeFooter",this,e),s=ui(i,"footer",this,e),o=ui(i,"afterFooter",this,e);let l=[];return l=ar(l,Tr(a)),l=ar(l,Tr(s)),l=ar(l,Tr(o)),l}_createItems(e){const t=this._active,i=this.chart.data,a=[],s=[],o=[];let l=[],c,u;for(c=0,u=t.length;c<u;++c)l.push(KS(this.chart,t[c]));return e.filter&&(l=l.filter((d,f,h)=>e.filter(d,f,h,i))),e.itemSort&&(l=l.sort((d,f)=>e.itemSort(d,f,i))),jt(l,d=>{const f=Av(e.callbacks,d);a.push(ui(f,"labelColor",this,d)),s.push(ui(f,"labelPointStyle",this,d)),o.push(ui(f,"labelTextColor",this,d))}),this.labelColors=a,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),a=this._active;let s,o=[];if(!a.length)this.opacity!==0&&(s={opacity:0});else{const l=Qs[i.position].call(this,a,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=Ov(this,i),u=Object.assign({},l,c),d=Dv(this.chart,i,u),f=Pv(i,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,a){const s=this.getCaretPosition(e,i,a);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:a,yAlign:s}=this,{caretSize:o,cornerRadius:l}=i,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=Ml(l),{x:h,y:p}=e,{width:v,height:m}=t;let g,k,_,E,D,S;return s==="center"?(D=p+m/2,a==="left"?(g=h,k=g-o,E=D+o,S=D-o):(g=h+v,k=g+o,E=D-o,S=D+o),_=g):(a==="left"?k=h+Math.max(c,d)+o:a==="right"?k=h+v-Math.max(u,f)-o:k=this.caretX,s==="top"?(E=p,D=E-o,g=k-o,_=k+o):(E=p+m,D=E+o,g=k+o,_=k-o),S=E),{x1:g,x2:k,x3:_,y1:E,y2:D,y3:S}}drawTitle(e,t,i){const a=this.title,s=a.length;let o,l,c;if(s){const u=su(i.rtl,this.x,this.width);for(e.x=bl(this,i.titleAlign,i),t.textAlign=u.textAlign(i.titleAlign),t.textBaseline="middle",o=hr(i.titleFont),l=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,c=0;c<s;++c)t.fillText(a[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===s&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,t,i,a,s){const o=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:u}=s,d=hr(s.bodyFont),f=bl(this,"left",s),h=a.x(f),p=c<d.lineHeight?(d.lineHeight-c)/2:0,v=t.y+p;if(s.usePointStyle){const m={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},g=a.leftForLtr(h,u)+u/2,k=v+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,td(e,m,g,k),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,td(e,m,g,k)}else{e.lineWidth=Bt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=a.leftForLtr(h,u),g=a.leftForLtr(a.xPlus(h,1),u-2),k=Ml(o.borderRadius);Object.values(k).some(_=>_!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Hh(e,{x:m,y:v,w:u,h:c,radius:k}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Hh(e,{x:g,y:v+1,w:u-2,h:c-2,radius:k}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(m,v,u,c),e.strokeRect(m,v,u,c),e.fillStyle=o.backgroundColor,e.fillRect(g,v+1,u-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:a}=this,{bodySpacing:s,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=i,f=hr(i.bodyFont);let h=f.lineHeight,p=0;const v=su(i.rtl,this.x,this.width),m=function($){t.fillText($,v.x(e.x+p),e.y+h/2),e.y+=h+s},g=v.textAlign(o);let k,_,E,D,S,C,w;for(t.textAlign=o,t.textBaseline="middle",t.font=f.string,e.x=bl(this,g,i),t.fillStyle=i.bodyColor,jt(this.beforeBody,m),p=l&&g!=="right"?o==="center"?u/2+d:u+2+d:0,D=0,C=a.length;D<C;++D){for(k=a[D],_=this.labelTextColors[D],t.fillStyle=_,jt(k.before,m),E=k.lines,l&&E.length&&(this._drawColorBox(t,e,D,v,i),h=Math.max(f.lineHeight,c)),S=0,w=E.length;S<w;++S)m(E[S]),h=f.lineHeight;jt(k.after,m)}p=0,h=f.lineHeight,jt(this.afterBody,m),e.y-=s}drawFooter(e,t,i){const a=this.footer,s=a.length;let o,l;if(s){const c=su(i.rtl,this.x,this.width);for(e.x=bl(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=c.textAlign(i.footerAlign),t.textBaseline="middle",o=hr(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,l=0;l<s;++l)t.fillText(a[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,a){const{xAlign:s,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:d}=i,{topLeft:f,topRight:h,bottomLeft:p,bottomRight:v}=Ml(a.cornerRadius);t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.beginPath(),t.moveTo(l+f,c),o==="top"&&this.drawCaret(e,t,i,a),t.lineTo(l+u-h,c),t.quadraticCurveTo(l+u,c,l+u,c+h),o==="center"&&s==="right"&&this.drawCaret(e,t,i,a),t.lineTo(l+u,c+d-v),t.quadraticCurveTo(l+u,c+d,l+u-v,c+d),o==="bottom"&&this.drawCaret(e,t,i,a),t.lineTo(l+p,c+d),t.quadraticCurveTo(l,c+d,l,c+d-p),o==="center"&&s==="left"&&this.drawCaret(e,t,i,a),t.lineTo(l,c+f),t.quadraticCurveTo(l,c,l+f,c),t.closePath(),t.fill(),a.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,a=i&&i.x,s=i&&i.y;if(a||s){const o=Qs[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Ov(this,e),c=Object.assign({},o,this._size),u=Dv(t,e,c),d=Pv(e,c,u,t);(a._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const a={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ca(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,a,t),Vk(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),Uk(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,a=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),s=!Kl(i,a),o=this._positionChanged(a,t);(s||o)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,i),l=this._positionChanged(o,e),c=t||!Kl(o,s)||l;return c&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,i,a){const s=this.options;if(e.type==="mouseout")return[];if(!a)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:a,options:s}=this,o=Qs[s.position].call(this,e,t);return o!==!1&&(i!==o.x||a!==o.y)}}At(sd,"positioners",Qs);var tT={id:"tooltip",_element:sd,positioners:Qs,afterInit(n,e,t){t&&(n.tooltip=new sd({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function nT(n,e){const t=[],{bounds:a,step:s,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:h}=n,p=s||1,v=d-1,{min:m,max:g}=e,k=!an(o),_=!an(l),E=!an(u),D=(g-m)/(f+1);let S=Ah((g-m)/v/p)*p,C,w,$,O;if(S<1e-14&&!k&&!_)return[{value:m},{value:g}];O=Math.ceil(g/S)-Math.floor(m/S),O>v&&(S=Ah(O*S/v/p)*p),an(c)||(C=Math.pow(10,c),S=Math.ceil(S*C)/C),a==="ticks"?(w=Math.floor(m/S)*S,$=Math.ceil(g/S)*S):(w=m,$=g),k&&_&&s&&Mw((l-o)/s,S/1e3)?(O=Math.round(Math.min((l-o)/S,d)),S=(l-o)/O,w=o,$=l):E?(w=k?o:w,$=_?l:$,O=u-1,S=($-w)/O):(O=($-w)/S,La(O,Math.round(O),S/1e3)?O=Math.round(O):O=Math.ceil(O));const P=Math.max(Lh(S),Lh(w));C=Math.pow(10,an(c)?P:c),w=Math.round(w*C)/C,$=Math.round($*C)/C;let L=0;for(k&&(h&&w!==o?(t.push({value:o}),w<o&&L++,La(Math.round((w+L*S)*C)/C,o,Lv(o,D,n))&&L++):w<o&&L++);L<O;++L){const N=Math.round((w+L*S)*C)/C;if(_&&N>l)break;t.push({value:N})}return _&&h&&$!==l?t.length&&La(t[t.length-1].value,l,Lv(l,D,n))?t[t.length-1].value=l:t.push({value:l}):(!_||$===l)&&t.push({value:$}),t}function Lv(n,e,{horizontal:t,minRotation:i}){const a=Ca(i),s=(t?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class iT extends Wo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return an(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:a,max:s}=this;const o=c=>a=t?a:c,l=c=>s=i?s:c;if(e){const c=la(a),u=la(s);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(a===s){let c=s===0?1:Math.abs(s*.05);l(s+c),e||o(a-c)}this.min=a,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),t=t||11),t&&(a=Math.min(t,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=nT(a,s);return e.bounds==="ticks"&&Aw(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const a=(i-t)/Math.max(e.length-1,1)/2;t-=a,i+=a}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Lg(e,this.chart.options.locale,this.options.ticks.format)}}class od extends iT{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Wn(e)?e:0,this.max=Wn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Ca(this.options.ticks.minRotation),a=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}At(od,"id","linear"),At(od,"defaults",{ticks:{callback:Ng.formatters.numeric}});const Oc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hi=Object.keys(Oc);function Nv(n,e){return n-e}function Rv(n,e){if(an(e))return null;const t=n._adapter,{parser:i,round:a,isoWeekday:s}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Wn(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(a&&(o=a==="week"&&(wo(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,a)),+o)}function Fv(n,e,t,i){const a=hi.length;for(let s=hi.indexOf(n);s<a-1;++s){const o=Oc[hi[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=i)return hi[s]}return hi[a-1]}function rT(n,e,t,i,a){for(let s=hi.length-1;s>=hi.indexOf(t);s--){const o=hi[s];if(Oc[o].common&&n._adapter.diff(a,i,o)>=e-1)return o}return hi[t?hi.indexOf(t):0]}function aT(n){for(let e=hi.indexOf(n)+1,t=hi.length;e<t;++e)if(Oc[hi[e]].common)return hi[e]}function qv(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:a}=Qd(t,e),s=t[i]>=e?t[i]:t[a];n[s]=!0}}function sT(n,e,t,i){const a=n._adapter,s=+a.startOf(e[0].value,i),o=e[e.length-1].value;let l,c;for(l=s;l<=o;l=+a.add(l,1,i))c=t[l],c>=0&&(e[c].major=!0);return e}function zv(n,e,t){const i=[],a={},s=e.length;let o,l;for(o=0;o<s;++o)l=e[o],a[l]=o,i.push({value:l,major:!1});return s===0||!t?i:sT(n,i,a,t)}class So extends Wo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),a=this._adapter=new Jg._date(e.adapters.date);a.init(t),ro(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Rv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:a,max:s,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(a=Math.min(a,u.min)),!l&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),a=Wn(a)&&!isNaN(a)?a:+t.startOf(Date.now(),i),s=Wn(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(a,s-1),this.max=Math.max(a+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const s=this.min,o=this.max,l=zw(a,s,o);return this._unit=t.unit||(i.autoSkip?Fv(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):rT(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:aT(this._unit),this.initOffsets(a),e.reverse&&l.reverse(),zv(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,a,s;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?t=1-a:t=(this.getDecimalForValue(e[1])-a)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Ki(t,0,o),i=Ki(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,a=this.options,s=a.time,o=s.unit||Fv(s.minUnit,t,i,this._getLabelCapacity(t)),l=Zt(a.ticks.stepSize,1),c=o==="week"?s.isoWeekday:!1,u=wo(c)||c===!0,d={};let f=t,h,p;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":o),e.diff(i,t,o)>1e5*l)throw new Error(t+" and "+i+" are too far apart with stepSize of "+l+" "+o);const v=a.ticks.source==="data"&&this.getDataTimestamps();for(h=f,p=0;h<i;h=+e.add(h,l,o),p++)qv(d,h,v);return(h===i||a.bounds==="ticks"||p===1)&&qv(d,h,v),Object.keys(d).sort(Nv).map(m=>+m)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const a=this.options.time.displayFormats,s=this._unit,o=t||a[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,a){const s=this.options,o=s.ticks.callback;if(o)return Mt(o,[e,t,i],this);const l=s.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],f=u&&l[u],h=i[t],p=u&&f&&h&&h.major;return this._adapter.format(e,a||(p?f:d))}generateTickLabels(e){let t,i,a;for(t=0,i=e.length;t<i;++t)a=e[t],a.label=this._tickFormatFunction(a.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,a=Ca(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(a),o=Math.sin(a),l=this._resolveTickFontOptions(0).size;return{w:i*s+l*o,h:i*o+l*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,a=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,zv(this,[e],this._majorUnit),a),o=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(t=0,i=a.length;t<i;++t)e=e.concat(a[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const a=this.getLabels();for(t=0,i=a.length;t<i;++t)e.push(Rv(this,a[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Vw(e.sort(Nv))}}At(So,"id","time"),At(So,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function yl(n,e,t){let i=0,a=n.length-1,s,o,l,c;t?(e>=n[i].pos&&e<=n[a].pos&&({lo:i,hi:a}=Ea(n,"pos",e)),{pos:s,time:l}=n[i],{pos:o,time:c}=n[a]):(e>=n[i].time&&e<=n[a].time&&({lo:i,hi:a}=Ea(n,"time",e)),{time:s,pos:l}=n[i],{time:o,pos:c}=n[a]);const u=o-s;return u?l+(c-l)*(e-s)/u:l}class jv extends So{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=yl(t,this.min),this._tableRange=yl(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,a=[],s=[];let o,l,c,u,d;for(o=0,l=e.length;o<l;++o)u=e[o],u>=t&&u<=i&&a.push(u);if(a.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,l=a.length;o<l;++o)d=a[o+1],c=a[o-1],u=a[o],Math.round((d+c)/2)!==u&&s.push({time:u,pos:o/(l-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((a,s)=>a-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(yl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return yl(this._table,i*this._tableRange+this._minPos,!0)}}At(jv,"id","timeseries"),At(jv,"defaults",So.defaults);/*!
 * chartjs-adapter-luxon v1.3.1
 * https://www.chartjs.org
 * (c) 2023 chartjs-adapter-luxon Contributors
 * Released under the MIT license
 */const oT={datetime:$t.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:$t.TIME_WITH_SECONDS,minute:$t.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};Jg._date.override({_id:"luxon",_create:function(n){return $t.fromMillis(n,this.options)},init(n){this.options.locale||(this.options.locale=n.locale)},formats:function(){return oT},parse:function(n,e){const t=this.options,i=typeof n;return n===null||i==="undefined"?null:(i==="number"?n=this._create(n):i==="string"?typeof e=="string"?n=$t.fromFormat(n,e,t):n=$t.fromISO(n,t):n instanceof Date?n=$t.fromJSDate(n,t):i==="object"&&!(n instanceof $t)&&(n=$t.fromObject(n,t)),n.isValid?n.valueOf():null)},format:function(n,e){const t=this._create(n);return typeof e=="string"?t.toFormat(e):t.toLocaleString(e)},add:function(n,e,t){const i={};return i[t]=e,this._create(n).plus(i).valueOf()},diff:function(n,e,t){return this._create(n).diff(this._create(e)).as(t).valueOf()},startOf:function(n,e,t){if(e==="isoWeek"){t=Math.trunc(Math.min(Math.max(0,t),6));const i=this._create(n);return i.minus({days:(i.weekday-t+7)%7}).startOf("day").valueOf()}return e?this._create(n).startOf(e).valueOf():n},endOf:function(n,e){return this._create(n).endOf(e).valueOf()}});var z3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ub={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(n){(function(e,t,i,a){var s=["","webkit","Moz","MS","ms","o"],o=t.createElement("div"),l="function",c=Math.round,u=Math.abs,d=Date.now;function f(Z,ee,ge){return setTimeout(E(Z,ge),ee)}function h(Z,ee,ge){return Array.isArray(Z)?(p(Z,ge[ee],ge),!0):!1}function p(Z,ee,ge){var qe;if(Z)if(Z.forEach)Z.forEach(ee,ge);else if(Z.length!==a)for(qe=0;qe<Z.length;)ee.call(ge,Z[qe],qe,Z),qe++;else for(qe in Z)Z.hasOwnProperty(qe)&&ee.call(ge,Z[qe],qe,Z)}function v(Z,ee,ge){var qe="DEPRECATED METHOD: "+ee+`
`+ge+` AT 
`;return function(){var ut=new Error("get-stack-trace"),kt=ut&&ut.stack?ut.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Pt=e.console&&(e.console.warn||e.console.log);return Pt&&Pt.call(e.console,qe,kt),Z.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(ee){if(ee===a||ee===null)throw new TypeError("Cannot convert undefined or null to object");for(var ge=Object(ee),qe=1;qe<arguments.length;qe++){var ut=arguments[qe];if(ut!==a&&ut!==null)for(var kt in ut)ut.hasOwnProperty(kt)&&(ge[kt]=ut[kt])}return ge}:m=Object.assign;var g=v(function(ee,ge,qe){for(var ut=Object.keys(ge),kt=0;kt<ut.length;)(!qe||qe&&ee[ut[kt]]===a)&&(ee[ut[kt]]=ge[ut[kt]]),kt++;return ee},"extend","Use `assign`."),k=v(function(ee,ge){return g(ee,ge,!0)},"merge","Use `assign`.");function _(Z,ee,ge){var qe=ee.prototype,ut;ut=Z.prototype=Object.create(qe),ut.constructor=Z,ut._super=qe,ge&&m(ut,ge)}function E(Z,ee){return function(){return Z.apply(ee,arguments)}}function D(Z,ee){return typeof Z==l?Z.apply(ee&&ee[0]||a,ee):Z}function S(Z,ee){return Z===a?ee:Z}function C(Z,ee,ge){p(P(ee),function(qe){Z.addEventListener(qe,ge,!1)})}function w(Z,ee,ge){p(P(ee),function(qe){Z.removeEventListener(qe,ge,!1)})}function $(Z,ee){for(;Z;){if(Z==ee)return!0;Z=Z.parentNode}return!1}function O(Z,ee){return Z.indexOf(ee)>-1}function P(Z){return Z.trim().split(/\s+/g)}function L(Z,ee,ge){if(Z.indexOf&&!ge)return Z.indexOf(ee);for(var qe=0;qe<Z.length;){if(ge&&Z[qe][ge]==ee||!ge&&Z[qe]===ee)return qe;qe++}return-1}function N(Z){return Array.prototype.slice.call(Z,0)}function V(Z,ee,ge){for(var qe=[],ut=[],kt=0;kt<Z.length;){var Pt=Z[kt][ee];L(ut,Pt)<0&&qe.push(Z[kt]),ut[kt]=Pt,kt++}return qe=qe.sort(function($n,Mn){return $n[ee]>Mn[ee]}),qe}function R(Z,ee){for(var ge,qe,ut=ee[0].toUpperCase()+ee.slice(1),kt=0;kt<s.length;){if(ge=s[kt],qe=ge?ge+ut:ee,qe in Z)return qe;kt++}return a}var U=1;function H(){return U++}function z(Z){var ee=Z.ownerDocument||Z;return ee.defaultView||ee.parentWindow||e}var J=/mobile|tablet|ip(ad|hone|od)|android/i,W="ontouchstart"in e,te=R(e,"PointerEvent")!==a,de=W&&J.test(navigator.userAgent),pe="touch",_e="pen",ke="mouse",ve="kinect",Oe=25,ue=1,me=2,he=4,xe=8,ie=1,be=2,oe=4,Q=8,ne=16,ye=be|oe,Se=Q|ne,Ie=ye|Se,Le=["x","y"],je=["clientX","clientY"];function Te(Z,ee){var ge=this;this.manager=Z,this.callback=ee,this.element=Z.element,this.target=Z.options.inputTarget,this.domHandler=function(qe){D(Z.options.enable,[Z])&&ge.handler(qe)},this.init()}Te.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(z(this.element),this.evWin,this.domHandler)}};function Ze(Z){var ee,ge=Z.options.inputClass;return ge?ee=ge:te?ee=vt:de?ee=st:W?ee=zt:ee=Qe,new ee(Z,we)}function we(Z,ee,ge){var qe=ge.pointers.length,ut=ge.changedPointers.length,kt=ee&ue&&qe-ut===0,Pt=ee&(he|xe)&&qe-ut===0;ge.isFirst=!!kt,ge.isFinal=!!Pt,kt&&(Z.session={}),ge.eventType=ee,Re(Z,ge),Z.emit("hammer.input",ge),Z.recognize(ge),Z.session.prevInput=ge}function Re(Z,ee){var ge=Z.session,qe=ee.pointers,ut=qe.length;ge.firstInput||(ge.firstInput=Be(ee)),ut>1&&!ge.firstMultiple?ge.firstMultiple=Be(ee):ut===1&&(ge.firstMultiple=!1);var kt=ge.firstInput,Pt=ge.firstMultiple,on=Pt?Pt.center:kt.center,$n=ee.center=Pe(qe);ee.timeStamp=d(),ee.deltaTime=ee.timeStamp-kt.timeStamp,ee.angle=Ve(on,$n),ee.distance=De(on,$n),Me(ge,ee),ee.offsetDirection=Fe(ee.deltaX,ee.deltaY);var Mn=He(ee.deltaTime,ee.deltaX,ee.deltaY);ee.overallVelocityX=Mn.x,ee.overallVelocityY=Mn.y,ee.overallVelocity=u(Mn.x)>u(Mn.y)?Mn.x:Mn.y,ee.scale=Pt?lt(Pt.pointers,qe):1,ee.rotation=Pt?Ye(Pt.pointers,qe):0,ee.maxPointers=ge.prevInput?ee.pointers.length>ge.prevInput.maxPointers?ee.pointers.length:ge.prevInput.maxPointers:ee.pointers.length,Xe(ge,ee);var li=Z.element;$(ee.srcEvent.target,li)&&(li=ee.srcEvent.target),ee.target=li}function Me(Z,ee){var ge=ee.center,qe=Z.offsetDelta||{},ut=Z.prevDelta||{},kt=Z.prevInput||{};(ee.eventType===ue||kt.eventType===he)&&(ut=Z.prevDelta={x:kt.deltaX||0,y:kt.deltaY||0},qe=Z.offsetDelta={x:ge.x,y:ge.y}),ee.deltaX=ut.x+(ge.x-qe.x),ee.deltaY=ut.y+(ge.y-qe.y)}function Xe(Z,ee){var ge=Z.lastInterval||ee,qe=ee.timeStamp-ge.timeStamp,ut,kt,Pt,on;if(ee.eventType!=xe&&(qe>Oe||ge.velocity===a)){var $n=ee.deltaX-ge.deltaX,Mn=ee.deltaY-ge.deltaY,li=He(qe,$n,Mn);kt=li.x,Pt=li.y,ut=u(li.x)>u(li.y)?li.x:li.y,on=Fe($n,Mn),Z.lastInterval=ee}else ut=ge.velocity,kt=ge.velocityX,Pt=ge.velocityY,on=ge.direction;ee.velocity=ut,ee.velocityX=kt,ee.velocityY=Pt,ee.direction=on}function Be(Z){for(var ee=[],ge=0;ge<Z.pointers.length;)ee[ge]={clientX:c(Z.pointers[ge].clientX),clientY:c(Z.pointers[ge].clientY)},ge++;return{timeStamp:d(),pointers:ee,center:Pe(ee),deltaX:Z.deltaX,deltaY:Z.deltaY}}function Pe(Z){var ee=Z.length;if(ee===1)return{x:c(Z[0].clientX),y:c(Z[0].clientY)};for(var ge=0,qe=0,ut=0;ut<ee;)ge+=Z[ut].clientX,qe+=Z[ut].clientY,ut++;return{x:c(ge/ee),y:c(qe/ee)}}function He(Z,ee,ge){return{x:ee/Z||0,y:ge/Z||0}}function Fe(Z,ee){return Z===ee?ie:u(Z)>=u(ee)?Z<0?be:oe:ee<0?Q:ne}function De(Z,ee,ge){ge||(ge=Le);var qe=ee[ge[0]]-Z[ge[0]],ut=ee[ge[1]]-Z[ge[1]];return Math.sqrt(qe*qe+ut*ut)}function Ve(Z,ee,ge){ge||(ge=Le);var qe=ee[ge[0]]-Z[ge[0]],ut=ee[ge[1]]-Z[ge[1]];return Math.atan2(ut,qe)*180/Math.PI}function Ye(Z,ee){return Ve(ee[1],ee[0],je)+Ve(Z[1],Z[0],je)}function lt(Z,ee){return De(ee[0],ee[1],je)/De(Z[0],Z[1],je)}var We={mousedown:ue,mousemove:me,mouseup:he},tt="mousedown",it="mousemove mouseup";function Qe(){this.evEl=tt,this.evWin=it,this.pressed=!1,Te.apply(this,arguments)}_(Qe,Te,{handler:function(ee){var ge=We[ee.type];ge&ue&&ee.button===0&&(this.pressed=!0),ge&me&&ee.which!==1&&(ge=he),this.pressed&&(ge&he&&(this.pressed=!1),this.callback(this.manager,ge,{pointers:[ee],changedPointers:[ee],pointerType:ke,srcEvent:ee}))}});var ft={pointerdown:ue,pointermove:me,pointerup:he,pointercancel:xe,pointerout:xe},pt={2:pe,3:_e,4:ke,5:ve},at="pointerdown",Ce="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(at="MSPointerDown",Ce="MSPointerMove MSPointerUp MSPointerCancel");function vt(){this.evEl=at,this.evWin=Ce,Te.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_(vt,Te,{handler:function(ee){var ge=this.store,qe=!1,ut=ee.type.toLowerCase().replace("ms",""),kt=ft[ut],Pt=pt[ee.pointerType]||ee.pointerType,on=Pt==pe,$n=L(ge,ee.pointerId,"pointerId");kt&ue&&(ee.button===0||on)?$n<0&&(ge.push(ee),$n=ge.length-1):kt&(he|xe)&&(qe=!0),!($n<0)&&(ge[$n]=ee,this.callback(this.manager,kt,{pointers:ge,changedPointers:[ee],pointerType:Pt,srcEvent:ee}),qe&&ge.splice($n,1))}});var K={touchstart:ue,touchmove:me,touchend:he,touchcancel:xe},G="touchstart",fe="touchstart touchmove touchend touchcancel";function $e(){this.evTarget=G,this.evWin=fe,this.started=!1,Te.apply(this,arguments)}_($e,Te,{handler:function(ee){var ge=K[ee.type];if(ge===ue&&(this.started=!0),!!this.started){var qe=et.call(this,ee,ge);ge&(he|xe)&&qe[0].length-qe[1].length===0&&(this.started=!1),this.callback(this.manager,ge,{pointers:qe[0],changedPointers:qe[1],pointerType:pe,srcEvent:ee})}}});function et(Z,ee){var ge=N(Z.touches),qe=N(Z.changedTouches);return ee&(he|xe)&&(ge=V(ge.concat(qe),"identifier")),[ge,qe]}var ot={touchstart:ue,touchmove:me,touchend:he,touchcancel:xe},wt="touchstart touchmove touchend touchcancel";function st(){this.evTarget=wt,this.targetIds={},Te.apply(this,arguments)}_(st,Te,{handler:function(ee){var ge=ot[ee.type],qe=St.call(this,ee,ge);qe&&this.callback(this.manager,ge,{pointers:qe[0],changedPointers:qe[1],pointerType:pe,srcEvent:ee})}});function St(Z,ee){var ge=N(Z.touches),qe=this.targetIds;if(ee&(ue|me)&&ge.length===1)return qe[ge[0].identifier]=!0,[ge,ge];var ut,kt,Pt=N(Z.changedTouches),on=[],$n=this.target;if(kt=ge.filter(function(Mn){return $(Mn.target,$n)}),ee===ue)for(ut=0;ut<kt.length;)qe[kt[ut].identifier]=!0,ut++;for(ut=0;ut<Pt.length;)qe[Pt[ut].identifier]&&on.push(Pt[ut]),ee&(he|xe)&&delete qe[Pt[ut].identifier],ut++;if(on.length)return[V(kt.concat(on),"identifier"),on]}var mt=2500,Tt=25;function zt(){Te.apply(this,arguments);var Z=E(this.handler,this);this.touch=new st(this.manager,Z),this.mouse=new Qe(this.manager,Z),this.primaryTouch=null,this.lastTouches=[]}_(zt,Te,{handler:function(ee,ge,qe){var ut=qe.pointerType==pe,kt=qe.pointerType==ke;if(!(kt&&qe.sourceCapabilities&&qe.sourceCapabilities.firesTouchEvents)){if(ut)Sn.call(this,ge,qe);else if(kt&&Dn.call(this,qe))return;this.callback(ee,ge,qe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Sn(Z,ee){Z&ue?(this.primaryTouch=ee.changedPointers[0].identifier,Qt.call(this,ee)):Z&(he|xe)&&Qt.call(this,ee)}function Qt(Z){var ee=Z.changedPointers[0];if(ee.identifier===this.primaryTouch){var ge={x:ee.clientX,y:ee.clientY};this.lastTouches.push(ge);var qe=this.lastTouches,ut=function(){var kt=qe.indexOf(ge);kt>-1&&qe.splice(kt,1)};setTimeout(ut,mt)}}function Dn(Z){for(var ee=Z.srcEvent.clientX,ge=Z.srcEvent.clientY,qe=0;qe<this.lastTouches.length;qe++){var ut=this.lastTouches[qe],kt=Math.abs(ee-ut.x),Pt=Math.abs(ge-ut.y);if(kt<=Tt&&Pt<=Tt)return!0}return!1}var Kn=R(o.style,"touchAction"),mn=Kn!==a,un="compute",Rn="auto",Jn="manipulation",si="none",Ti="pan-x",zi="pan-y",Zn=Dc();function $i(Z,ee){this.manager=Z,this.set(ee)}$i.prototype={set:function(Z){Z==un&&(Z=this.compute()),mn&&this.manager.element.style&&Zn[Z]&&(this.manager.element.style[Kn]=Z),this.actions=Z.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Z=[];return p(this.manager.recognizers,function(ee){D(ee.options.enable,[ee])&&(Z=Z.concat(ee.getTouchAction()))}),ha(Z.join(" "))},preventDefaults:function(Z){var ee=Z.srcEvent,ge=Z.offsetDirection;if(this.manager.session.prevented){ee.preventDefault();return}var qe=this.actions,ut=O(qe,si)&&!Zn[si],kt=O(qe,zi)&&!Zn[zi],Pt=O(qe,Ti)&&!Zn[Ti];if(ut){var on=Z.pointers.length===1,$n=Z.distance<2,Mn=Z.deltaTime<250;if(on&&$n&&Mn)return}if(!(Pt&&kt)&&(ut||kt&&ge&ye||Pt&&ge&Se))return this.preventSrc(ee)},preventSrc:function(Z){this.manager.session.prevented=!0,Z.preventDefault()}};function ha(Z){if(O(Z,si))return si;var ee=O(Z,Ti),ge=O(Z,zi);return ee&&ge?si:ee||ge?ee?Ti:zi:O(Z,Jn)?Jn:Rn}function Dc(){if(!mn)return!1;var Z={},ee=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(ge){Z[ge]=ee?e.CSS.supports("touch-action",ge):!0}),Z}var Ka=1,Tn=2,ji=4,er=8,Vi=er,va=16,Pn=32;function oi(Z){this.options=m({},this.defaults,Z||{}),this.id=H(),this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Ka,this.simultaneous={},this.requireFail=[]}oi.prototype={defaults:{},set:function(Z){return m(this.options,Z),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Z){if(h(Z,"recognizeWith",this))return this;var ee=this.simultaneous;return Z=Ja(Z,this),ee[Z.id]||(ee[Z.id]=Z,Z.recognizeWith(this)),this},dropRecognizeWith:function(Z){return h(Z,"dropRecognizeWith",this)?this:(Z=Ja(Z,this),delete this.simultaneous[Z.id],this)},requireFailure:function(Z){if(h(Z,"requireFailure",this))return this;var ee=this.requireFail;return Z=Ja(Z,this),L(ee,Z)===-1&&(ee.push(Z),Z.requireFailure(this)),this},dropRequireFailure:function(Z){if(h(Z,"dropRequireFailure",this))return this;Z=Ja(Z,this);var ee=L(this.requireFail,Z);return ee>-1&&this.requireFail.splice(ee,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Z){return!!this.simultaneous[Z.id]},emit:function(Z){var ee=this,ge=this.state;function qe(ut){ee.manager.emit(ut,Z)}ge<er&&qe(ee.options.event+Yo(ge)),qe(ee.options.event),Z.additionalEvent&&qe(Z.additionalEvent),ge>=er&&qe(ee.options.event+Yo(ge))},tryEmit:function(Z){if(this.canEmit())return this.emit(Z);this.state=Pn},canEmit:function(){for(var Z=0;Z<this.requireFail.length;){if(!(this.requireFail[Z].state&(Pn|Ka)))return!1;Z++}return!0},recognize:function(Z){var ee=m({},Z);if(!D(this.options.enable,[this,ee])){this.reset(),this.state=Pn;return}this.state&(Vi|va|Pn)&&(this.state=Ka),this.state=this.process(ee),this.state&(Tn|ji|er|va)&&this.tryEmit(ee)},process:function(Z){},getTouchAction:function(){},reset:function(){}};function Yo(Z){return Z&va?"cancel":Z&er?"end":Z&ji?"move":Z&Tn?"start":""}function Ko(Z){return Z==ne?"down":Z==Q?"up":Z==be?"left":Z==oe?"right":""}function Ja(Z,ee){var ge=ee.manager;return ge?ge.get(Z):Z}function In(){oi.apply(this,arguments)}_(In,oi,{defaults:{pointers:1},attrTest:function(Z){var ee=this.options.pointers;return ee===0||Z.pointers.length===ee},process:function(Z){var ee=this.state,ge=Z.eventType,qe=ee&(Tn|ji),ut=this.attrTest(Z);return qe&&(ge&xe||!ut)?ee|va:qe||ut?ge&he?ee|er:ee&Tn?ee|ji:Tn:Pn}});function _r(){In.apply(this,arguments),this.pX=null,this.pY=null}_(_r,In,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ie},getTouchAction:function(){var Z=this.options.direction,ee=[];return Z&ye&&ee.push(zi),Z&Se&&ee.push(Ti),ee},directionTest:function(Z){var ee=this.options,ge=!0,qe=Z.distance,ut=Z.direction,kt=Z.deltaX,Pt=Z.deltaY;return ut&ee.direction||(ee.direction&ye?(ut=kt===0?ie:kt<0?be:oe,ge=kt!=this.pX,qe=Math.abs(Z.deltaX)):(ut=Pt===0?ie:Pt<0?Q:ne,ge=Pt!=this.pY,qe=Math.abs(Z.deltaY))),Z.direction=ut,ge&&qe>ee.threshold&&ut&ee.direction},attrTest:function(Z){return In.prototype.attrTest.call(this,Z)&&(this.state&Tn||!(this.state&Tn)&&this.directionTest(Z))},emit:function(Z){this.pX=Z.deltaX,this.pY=Z.deltaY;var ee=Ko(Z.direction);ee&&(Z.additionalEvent=this.options.event+ee),this._super.emit.call(this,Z)}});function Ls(){In.apply(this,arguments)}_(Ls,In,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[si]},attrTest:function(Z){return this._super.attrTest.call(this,Z)&&(Math.abs(Z.scale-1)>this.options.threshold||this.state&Tn)},emit:function(Z){if(Z.scale!==1){var ee=Z.scale<1?"in":"out";Z.additionalEvent=this.options.event+ee}this._super.emit.call(this,Z)}});function Ns(){oi.apply(this,arguments),this._timer=null,this._input=null}_(Ns,oi,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Rn]},process:function(Z){var ee=this.options,ge=Z.pointers.length===ee.pointers,qe=Z.distance<ee.threshold,ut=Z.deltaTime>ee.time;if(this._input=Z,!qe||!ge||Z.eventType&(he|xe)&&!ut)this.reset();else if(Z.eventType&ue)this.reset(),this._timer=f(function(){this.state=Vi,this.tryEmit()},ee.time,this);else if(Z.eventType&he)return Vi;return Pn},reset:function(){clearTimeout(this._timer)},emit:function(Z){this.state===Vi&&(Z&&Z.eventType&he?this.manager.emit(this.options.event+"up",Z):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}});function Rs(){In.apply(this,arguments)}_(Rs,In,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[si]},attrTest:function(Z){return this._super.attrTest.call(this,Z)&&(Math.abs(Z.rotation)>this.options.threshold||this.state&Tn)}});function tr(){In.apply(this,arguments)}_(tr,In,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ye|Se,pointers:1},getTouchAction:function(){return _r.prototype.getTouchAction.call(this)},attrTest:function(Z){var ee=this.options.direction,ge;return ee&(ye|Se)?ge=Z.overallVelocity:ee&ye?ge=Z.overallVelocityX:ee&Se&&(ge=Z.overallVelocityY),this._super.attrTest.call(this,Z)&&ee&Z.offsetDirection&&Z.distance>this.options.threshold&&Z.maxPointers==this.options.pointers&&u(ge)>this.options.velocity&&Z.eventType&he},emit:function(Z){var ee=Ko(Z.offsetDirection);ee&&this.manager.emit(this.options.event+ee,Z),this.manager.emit(this.options.event,Z)}});function xr(){oi.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_(xr,oi,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Jn]},process:function(Z){var ee=this.options,ge=Z.pointers.length===ee.pointers,qe=Z.distance<ee.threshold,ut=Z.deltaTime<ee.time;if(this.reset(),Z.eventType&ue&&this.count===0)return this.failTimeout();if(qe&&ut&&ge){if(Z.eventType!=he)return this.failTimeout();var kt=this.pTime?Z.timeStamp-this.pTime<ee.interval:!0,Pt=!this.pCenter||De(this.pCenter,Z.center)<ee.posThreshold;this.pTime=Z.timeStamp,this.pCenter=Z.center,!Pt||!kt?this.count=1:this.count+=1,this._input=Z;var on=this.count%ee.taps;if(on===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Vi,this.tryEmit()},ee.interval,this),Tn):Vi}return Pn},failTimeout:function(){return this._timer=f(function(){this.state=Pn},this.options.interval,this),Pn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function nr(Z,ee){return ee=ee||{},ee.recognizers=S(ee.recognizers,nr.defaults.preset),new ir(Z,ee)}nr.VERSION="2.0.7",nr.defaults={domEvents:!1,touchAction:un,enable:!0,inputTarget:null,inputClass:null,preset:[[Rs,{enable:!1}],[Ls,{enable:!1},["rotate"]],[tr,{direction:ye}],[_r,{direction:ye},["swipe"]],[xr],[xr,{event:"doubletap",taps:2},["tap"]],[Ns]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Pc=1,Jo=2;function ir(Z,ee){this.options=m({},nr.defaults,ee||{}),this.options.inputTarget=this.options.inputTarget||Z,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Z,this.input=Ze(this),this.touchAction=new $i(this,this.options.touchAction),Ui(this,!0),p(this.options.recognizers,function(ge){var qe=this.add(new ge[0](ge[1]));ge[2]&&qe.recognizeWith(ge[2]),ge[3]&&qe.requireFailure(ge[3])},this)}ir.prototype={set:function(Z){return m(this.options,Z),Z.touchAction&&this.touchAction.update(),Z.inputTarget&&(this.input.destroy(),this.input.target=Z.inputTarget,this.input.init()),this},stop:function(Z){this.session.stopped=Z?Jo:Pc},recognize:function(Z){var ee=this.session;if(!ee.stopped){this.touchAction.preventDefaults(Z);var ge,qe=this.recognizers,ut=ee.curRecognizer;(!ut||ut&&ut.state&Vi)&&(ut=ee.curRecognizer=null);for(var kt=0;kt<qe.length;)ge=qe[kt],ee.stopped!==Jo&&(!ut||ge==ut||ge.canRecognizeWith(ut))?ge.recognize(Z):ge.reset(),!ut&&ge.state&(Tn|ji|er)&&(ut=ee.curRecognizer=ge),kt++}},get:function(Z){if(Z instanceof oi)return Z;for(var ee=this.recognizers,ge=0;ge<ee.length;ge++)if(ee[ge].options.event==Z)return ee[ge];return null},add:function(Z){if(h(Z,"add",this))return this;var ee=this.get(Z.options.event);return ee&&this.remove(ee),this.recognizers.push(Z),Z.manager=this,this.touchAction.update(),Z},remove:function(Z){if(h(Z,"remove",this))return this;if(Z=this.get(Z),Z){var ee=this.recognizers,ge=L(ee,Z);ge!==-1&&(ee.splice(ge,1),this.touchAction.update())}return this},on:function(Z,ee){if(Z!==a&&ee!==a){var ge=this.handlers;return p(P(Z),function(qe){ge[qe]=ge[qe]||[],ge[qe].push(ee)}),this}},off:function(Z,ee){if(Z!==a){var ge=this.handlers;return p(P(Z),function(qe){ee?ge[qe]&&ge[qe].splice(L(ge[qe],ee),1):delete ge[qe]}),this}},emit:function(Z,ee){this.options.domEvents&&Mc(Z,ee);var ge=this.handlers[Z]&&this.handlers[Z].slice();if(!(!ge||!ge.length)){ee.type=Z,ee.preventDefault=function(){ee.srcEvent.preventDefault()};for(var qe=0;qe<ge.length;)ge[qe](ee),qe++}},destroy:function(){this.element&&Ui(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Ui(Z,ee){var ge=Z.element;if(ge.style){var qe;p(Z.options.cssProps,function(ut,kt){qe=R(ge.style,kt),ee?(Z.oldCssProps[qe]=ge.style[qe],ge.style[qe]=ut):ge.style[qe]=Z.oldCssProps[qe]||""}),ee||(Z.oldCssProps={})}}function Mc(Z,ee){var ge=t.createEvent("Event");ge.initEvent(Z,!0,!0),ge.gesture=ee,ee.target.dispatchEvent(ge)}m(nr,{INPUT_START:ue,INPUT_MOVE:me,INPUT_END:he,INPUT_CANCEL:xe,STATE_POSSIBLE:Ka,STATE_BEGAN:Tn,STATE_CHANGED:ji,STATE_ENDED:er,STATE_RECOGNIZED:Vi,STATE_CANCELLED:va,STATE_FAILED:Pn,DIRECTION_NONE:ie,DIRECTION_LEFT:be,DIRECTION_RIGHT:oe,DIRECTION_UP:Q,DIRECTION_DOWN:ne,DIRECTION_HORIZONTAL:ye,DIRECTION_VERTICAL:Se,DIRECTION_ALL:Ie,Manager:ir,Input:Te,TouchAction:$i,TouchInput:st,MouseInput:Qe,PointerEventInput:vt,TouchMouseInput:zt,SingleTouchInput:$e,Recognizer:oi,AttrRecognizer:In,Tap:xr,Pan:_r,Swipe:tr,Pinch:Ls,Rotate:Rs,Press:Ns,on:C,off:w,each:p,merge:k,extend:g,assign:m,inherit:_,bindFn:E,prefixed:R});var Ac=typeof e<"u"?e:typeof self<"u"?self:{};Ac.Hammer=nr,n.exports?n.exports=nr:e[i]=nr})(window,document,"Hammer")})(ub);var cT=ub.exports;const lo=lT(cT);/*!
* chartjs-plugin-zoom v2.2.0
* https://www.chartjs.org/chartjs-plugin-zoom/2.2.0/
 * (c) 2016-2024 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const To=n=>n&&n.enabled&&n.modifierKey,db=(n,e)=>n&&e[n+"Key"],uf=(n,e)=>n&&!e[n+"Key"];function ua(n,e,t){return n===void 0?!0:typeof n=="string"?n.indexOf(e)!==-1:typeof n=="function"?n({chart:t}).indexOf(e)!==-1:!1}function mu(n,e){return typeof n=="function"&&(n=n({chart:e})),typeof n=="string"?{x:n.indexOf("x")!==-1,y:n.indexOf("y")!==-1}:{x:!1,y:!1}}function uT(n,e){let t;return function(){return clearTimeout(t),t=setTimeout(n,e),e}}function dT({x:n,y:e},t){const i=t.scales,a=Object.keys(i);for(let s=0;s<a.length;s++){const o=i[a[s]];if(e>=o.top&&e<=o.bottom&&n>=o.left&&n<=o.right)return o}return null}function fb(n,e,t){const{mode:i="xy",scaleMode:a,overScaleMode:s}=n||{},o=dT(e,t),l=mu(i,t),c=mu(a,t);if(s){const d=mu(s,t);for(const f of["x","y"])d[f]&&(c[f]=l[f],l[f]=!1)}if(o&&c[o.axis])return[o];const u=[];return jt(t.scales,function(d){l[d.axis]&&u.push(d)}),u}const ld=new WeakMap;function cn(n){let e=ld.get(n);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},ld.set(n,e)),e}function fT(n){ld.delete(n)}function hb(n,e,t,i){const a=Math.max(0,Math.min(1,(n-e)/t||0)),s=1-a;return{min:i*a,max:i*s}}function vb(n,e){const t=n.isHorizontal()?e.x:e.y;return n.getValueForPixel(t)}function mb(n,e,t){const i=n.max-n.min,a=i*(e-1),s=vb(n,t);return hb(s,n.min,i,a)}function hT(n,e,t){const i=vb(n,t);if(i===void 0)return{min:n.min,max:n.max};const a=Math.log10(n.min),s=Math.log10(n.max),o=Math.log10(i),l=s-a,c=l*(e-1),u=hb(o,a,l,c);return{min:Math.pow(10,a+u.min),max:Math.pow(10,s-u.max)}}function vT(n,e){return e&&(e[n.id]||e[n.axis])||{}}function Vv(n,e,t,i,a){let s=t[i];if(s==="original"){const o=n.originalScaleLimits[e.id][i];s=Zt(o.options,o.scale)}return Zt(s,a)}function mT(n,e,t){const i=n.getValueForPixel(e),a=n.getValueForPixel(t);return{min:Math.min(i,a),max:Math.max(i,a)}}function pT(n,{min:e,max:t,minLimit:i,maxLimit:a},s){const o=(n-t+e)/2;e-=o,t+=o;const l=s.min.options??s.min.scale,c=s.max.options??s.max.scale,u=n/1e6;return La(e,l,u)&&(e=l),La(t,c,u)&&(t=c),e<i?(e=i,t=Math.min(i+n,a)):t>a&&(t=a,e=Math.max(a-n,i)),{min:e,max:t}}function Wa(n,{min:e,max:t},i,a=!1){const s=cn(n.chart),{options:o}=n,l=vT(n,i),{minRange:c=0}=l,u=Vv(s,n,l,"min",-1/0),d=Vv(s,n,l,"max",1/0);if(a==="pan"&&(e<u||t>d))return!0;const f=n.max-n.min,h=a?Math.max(t-e,c):f;if(a&&h===c&&f<=c)return!0;const p=pT(h,{min:e,max:t,minLimit:u,maxLimit:d},s.originalScaleLimits[n.id]);return o.min=p.min,o.max=p.max,s.updatedScaleLimits[n.id]=p,n.parse(p.min)!==n.min||n.parse(p.max)!==n.max}function gT(n,e,t,i){const a=mb(n,e,t),s={min:n.min+a.min,max:n.max-a.max};return Wa(n,s,i,!0)}function bT(n,e,t,i){const a=hT(n,e,t);return Wa(n,a,i,!0)}function yT(n,e,t,i){Wa(n,mT(n,e,t),i,!0)}const Uv=n=>n===0||isNaN(n)?0:n<0?Math.min(Math.round(n),-1):Math.max(Math.round(n),1);function _T(n){const t=n.getLabels().length-1;n.min>0&&(n.min-=1),n.max<t&&(n.max+=1)}function xT(n,e,t,i){const a=mb(n,e,t);n.min===n.max&&e<1&&_T(n);const s={min:n.min+Uv(a.min),max:n.max-Uv(a.max)};return Wa(n,s,i,!0)}function wT(n){return n.isHorizontal()?n.width:n.height}function kT(n,e,t){const a=n.getLabels().length-1;let{min:s,max:o}=n;const l=Math.max(o-s,1),c=Math.round(wT(n)/Math.max(l,10)),u=Math.round(Math.abs(e/c));let d;return e<-c?(o=Math.min(o+u,a),s=l===1?o:o-l,d=o===a):e>c&&(s=Math.max(0,s-u),o=l===1?s:s+l,d=s===0),Wa(n,{min:s,max:o},t)||d}const ST={second:500,minute:30*1e3,hour:30*60*1e3,day:12*60*60*1e3,week:3.5*24*60*60*1e3,month:15*24*60*60*1e3,quarter:60*24*60*60*1e3,year:182*24*60*60*1e3};function pb(n,e,t,i=!1){const{min:a,max:s,options:o}=n,l=o.time&&o.time.round,c=ST[l]||0,u=n.getValueForPixel(n.getPixelForValue(a+c)-e),d=n.getValueForPixel(n.getPixelForValue(s+c)-e);return isNaN(u)||isNaN(d)?!0:Wa(n,{min:u,max:d},t,i?"pan":!1)}function Bv(n,e,t){return pb(n,e,t,!0)}const cd={category:xT,default:gT,logarithmic:bT},ud={default:yT},dd={category:kT,default:pb,logarithmic:Bv,timeseries:Bv};function TT(n,e,t){const{id:i,options:{min:a,max:s}}=n;if(!e[i]||!t[i])return!0;const o=t[i];return o.min!==a||o.max!==s}function Hv(n,e){jt(n,(t,i)=>{e[i]||delete n[i]})}function As(n,e){const{scales:t}=n,{originalScaleLimits:i,updatedScaleLimits:a}=e;return jt(t,function(s){TT(s,i,a)&&(i[s.id]={min:{scale:s.min,options:s.options.min},max:{scale:s.max,options:s.options.max}})}),Hv(i,t),Hv(a,t),i}function Wv(n,e,t,i){const a=cd[n.type]||cd.default;Mt(a,[n,e,t,i])}function Yv(n,e,t,i){const a=ud[n.type]||ud.default;Mt(a,[n,e,t,i])}function $T(n){const e=n.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function df(n,e,t="none",i="api"){const{x:a=1,y:s=1,focalPoint:o=$T(n)}=typeof e=="number"?{x:e,y:e}:e,l=cn(n),{options:{limits:c,zoom:u}}=l;As(n,l);const d=a!==1,f=s!==1,h=fb(u,o,n);jt(h||n.scales,function(p){p.isHorizontal()&&d?Wv(p,a,o,c):!p.isHorizontal()&&f&&Wv(p,s,o,c)}),n.update(t),Mt(u.onZoom,[{chart:n,trigger:i}])}function gb(n,e,t,i="none",a="api"){const s=cn(n),{options:{limits:o,zoom:l}}=s,{mode:c="xy"}=l;As(n,s);const u=ua(c,"x",n),d=ua(c,"y",n);jt(n.scales,function(f){f.isHorizontal()&&u?Yv(f,e.x,t.x,o):!f.isHorizontal()&&d&&Yv(f,e.y,t.y,o)}),n.update(i),Mt(l.onZoom,[{chart:n,trigger:a}])}function IT(n,e,t,i="none",a="api"){var l;const s=cn(n);As(n,s);const o=n.scales[e];Wa(o,t,void 0,!0),n.update(i),Mt((l=s.options.zoom)==null?void 0:l.onZoom,[{chart:n,trigger:a}])}function CT(n,e="default"){const t=cn(n),i=As(n,t);jt(n.scales,function(a){const s=a.options;i[a.id]?(s.min=i[a.id].min.options,s.max=i[a.id].max.options):(delete s.min,delete s.max),delete t.updatedScaleLimits[a.id]}),n.update(e),Mt(t.options.zoom.onZoomComplete,[{chart:n}])}function ET(n,e){const t=n.originalScaleLimits[e];if(!t)return;const{min:i,max:a}=t;return Zt(a.options,a.scale)-Zt(i.options,i.scale)}function OT(n){const e=cn(n);let t=1,i=1;return jt(n.scales,function(a){const s=ET(e,a.id);if(s){const o=Math.round(s/(a.max-a.min)*100)/100;t=Math.min(t,o),i=Math.max(i,o)}}),t<1?t:i}function Kv(n,e,t,i){const{panDelta:a}=i,s=a[n.id]||0;la(s)===la(e)&&(e+=s);const o=dd[n.type]||dd.default;Mt(o,[n,e,t])?a[n.id]=0:a[n.id]=e}function bb(n,e,t,i="none"){const{x:a=0,y:s=0}=typeof e=="number"?{x:e,y:e}:e,o=cn(n),{options:{pan:l,limits:c}}=o,{onPan:u}=l||{};As(n,o);const d=a!==0,f=s!==0;jt(t||n.scales,function(h){h.isHorizontal()&&d?Kv(h,a,c,o):!h.isHorizontal()&&f&&Kv(h,s,c,o)}),n.update(i),Mt(u,[{chart:n}])}function yb(n){const e=cn(n);As(n,e);const t={};for(const i of Object.keys(n.scales)){const{min:a,max:s}=e.originalScaleLimits[i]||{min:{},max:{}};t[i]={min:a.scale,max:s.scale}}return t}function DT(n){const e=cn(n),t={};for(const i of Object.keys(n.scales))t[i]=e.updatedScaleLimits[i];return t}function PT(n){const e=yb(n);for(const t of Object.keys(n.scales)){const{min:i,max:a}=e[t];if(i!==void 0&&n.scales[t].min!==i||a!==void 0&&n.scales[t].max!==a)return!0}return!1}function Jv(n){const e=cn(n);return e.panning||e.dragging}const Zv=(n,e,t)=>Math.min(t,Math.max(e,n));function fi(n,e){const{handlers:t}=cn(n),i=t[e];i&&i.target&&(i.target.removeEventListener(e,i),delete t[e])}function co(n,e,t,i){const{handlers:a,options:s}=cn(n),o=a[t];if(o&&o.target===e)return;fi(n,t),a[t]=c=>i(n,c,s),a[t].target=e;const l=t==="wheel"?!1:void 0;e.addEventListener(t,a[t],{passive:l})}function MT(n,e){const t=cn(n);t.dragStart&&(t.dragging=!0,t.dragEnd=e,n.update("none"))}function AT(n,e){const t=cn(n);!t.dragStart||e.key!=="Escape"||(fi(n,"keydown"),t.dragging=!1,t.dragStart=t.dragEnd=null,n.update("none"))}function fd(n,e){if(n.target!==e.canvas){const t=e.canvas.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}return cr(n,e)}function _b(n,e,t){const{onZoomStart:i,onZoomRejected:a}=t;if(i){const s=fd(e,n);if(Mt(i,[{chart:n,event:e,point:s}])===!1)return Mt(a,[{chart:n,event:e}]),!1}}function LT(n,e){if(n.legend){const s=cr(e,n);if(ks(s,n.legend))return}const t=cn(n),{pan:i,zoom:a={}}=t.options;if(e.button!==0||db(To(i),e)||uf(To(a.drag),e))return Mt(a.onZoomRejected,[{chart:n,event:e}]);_b(n,e,a)!==!1&&(t.dragStart=e,co(n,n.canvas.ownerDocument,"mousemove",MT),co(n,window.document,"keydown",AT))}function NT({begin:n,end:e},t){let i=e.x-n.x,a=e.y-n.y;const s=Math.abs(i/a);s>t?i=Math.sign(i)*Math.abs(a*t):s<t&&(a=Math.sign(a)*Math.abs(i/t)),e.x=n.x+i,e.y=n.y+a}function Gv(n,e,t,{min:i,max:a,prop:s}){n[i]=Zv(Math.min(t.begin[s],t.end[s]),e[i],e[a]),n[a]=Zv(Math.max(t.begin[s],t.end[s]),e[i],e[a])}function RT(n,e,t){const i={begin:fd(e.dragStart,n),end:fd(e.dragEnd,n)};if(t){const a=n.chartArea.width/n.chartArea.height;NT(i,a)}return i}function xb(n,e,t,i){const a=ua(e,"x",n),s=ua(e,"y",n),{top:o,left:l,right:c,bottom:u,width:d,height:f}=n.chartArea,h={top:o,left:l,right:c,bottom:u},p=RT(n,t,i&&a&&s);a&&Gv(h,n.chartArea,p,{min:"left",max:"right",prop:"x"}),s&&Gv(h,n.chartArea,p,{min:"top",max:"bottom",prop:"y"});const v=h.right-h.left,m=h.bottom-h.top;return{...h,width:v,height:m,zoomX:a&&v?1+(d-v)/d:1,zoomY:s&&m?1+(f-m)/f:1}}function FT(n,e){const t=cn(n);if(!t.dragStart)return;fi(n,"mousemove");const{mode:i,onZoomComplete:a,drag:{threshold:s=0,maintainAspectRatio:o}}=t.options.zoom,l=xb(n,i,{dragStart:t.dragStart,dragEnd:e},o),c=ua(i,"x",n)?l.width:0,u=ua(i,"y",n)?l.height:0,d=Math.sqrt(c*c+u*u);if(t.dragStart=t.dragEnd=null,d<=s){t.dragging=!1,n.update("none");return}gb(n,{x:l.left,y:l.top},{x:l.right,y:l.bottom},"zoom","drag"),t.dragging=!1,t.filterNextClick=!0,Mt(a,[{chart:n}])}function qT(n,e,t){if(uf(To(t.wheel),e)){Mt(t.onZoomRejected,[{chart:n,event:e}]);return}if(_b(n,e,t)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function zT(n,e){const{handlers:{onZoomComplete:t},options:{zoom:i}}=cn(n);if(!qT(n,e,i))return;const a=e.target.getBoundingClientRect(),s=i.wheel.speed,o=e.deltaY>=0?2-1/(1-s):1+s,l={x:o,y:o,focalPoint:{x:e.clientX-a.left,y:e.clientY-a.top}};df(n,l,"zoom","wheel"),Mt(t,[{chart:n}])}function jT(n,e,t,i){t&&(cn(n).handlers[e]=uT(()=>Mt(t,[{chart:n}]),i))}function VT(n,e){const t=n.canvas,{wheel:i,drag:a,onZoomComplete:s}=e.zoom;i.enabled?(co(n,t,"wheel",zT),jT(n,"onZoomComplete",s,250)):fi(n,"wheel"),a.enabled?(co(n,t,"mousedown",LT),co(n,t.ownerDocument,"mouseup",FT)):(fi(n,"mousedown"),fi(n,"mousemove"),fi(n,"mouseup"),fi(n,"keydown"))}function UT(n){fi(n,"mousedown"),fi(n,"mousemove"),fi(n,"mouseup"),fi(n,"wheel"),fi(n,"click"),fi(n,"keydown")}function BT(n,e){return function(t,i){const{pan:a,zoom:s={}}=e.options;if(!a||!a.enabled)return!1;const o=i&&i.srcEvent;return o&&!e.panning&&i.pointerType==="mouse"&&(uf(To(a),o)||db(To(s.drag),o))?(Mt(a.onPanRejected,[{chart:n,event:i}]),!1):!0}}function HT(n,e){const t=Math.abs(n.clientX-e.clientX),i=Math.abs(n.clientY-e.clientY),a=t/i;let s,o;return a>.3&&a<1.7?s=o=!0:t>i?s=!0:o=!0,{x:s,y:o}}function wb(n,e,t){if(e.scale){const{center:i,pointers:a}=t,s=1/e.scale*t.scale,o=t.target.getBoundingClientRect(),l=HT(a[0],a[1]),c=e.options.zoom.mode,u={x:l.x&&ua(c,"x",n)?s:1,y:l.y&&ua(c,"y",n)?s:1,focalPoint:{x:i.x-o.left,y:i.y-o.top}};df(n,u,"zoom","pinch"),e.scale=t.scale}}function WT(n,e,t){if(e.options.zoom.pinch.enabled){const i=cr(t,n);Mt(e.options.zoom.onZoomStart,[{chart:n,event:t,point:i}])===!1?(e.scale=null,Mt(e.options.zoom.onZoomRejected,[{chart:n,event:t}])):e.scale=1}}function YT(n,e,t){e.scale&&(wb(n,e,t),e.scale=null,Mt(e.options.zoom.onZoomComplete,[{chart:n}]))}function kb(n,e,t){const i=e.delta;i&&(e.panning=!0,bb(n,{x:t.deltaX-i.x,y:t.deltaY-i.y},e.panScales),e.delta={x:t.deltaX,y:t.deltaY})}function KT(n,e,t){const{enabled:i,onPanStart:a,onPanRejected:s}=e.options.pan;if(!i)return;const o=t.target.getBoundingClientRect(),l={x:t.center.x-o.left,y:t.center.y-o.top};if(Mt(a,[{chart:n,event:t,point:l}])===!1)return Mt(s,[{chart:n,event:t}]);e.panScales=fb(e.options.pan,l,n),e.delta={x:0,y:0},kb(n,e,t)}function JT(n,e){e.delta=null,e.panning&&(e.panning=!1,e.filterNextClick=!0,Mt(e.options.pan.onPanComplete,[{chart:n}]))}const hd=new WeakMap;function Xv(n,e){const t=cn(n),i=n.canvas,{pan:a,zoom:s}=e,o=new lo.Manager(i);s&&s.pinch.enabled&&(o.add(new lo.Pinch),o.on("pinchstart",l=>WT(n,t,l)),o.on("pinch",l=>wb(n,t,l)),o.on("pinchend",l=>YT(n,t,l))),a&&a.enabled&&(o.add(new lo.Pan({threshold:a.threshold,enable:BT(n,t)})),o.on("panstart",l=>KT(n,t,l)),o.on("panmove",l=>kb(n,t,l)),o.on("panend",()=>JT(n,t))),hd.set(n,o)}function Qv(n){const e=hd.get(n);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),hd.delete(n))}function ZT(n,e){var o,l,c,u;const{pan:t,zoom:i}=n,{pan:a,zoom:s}=e;return((l=(o=i==null?void 0:i.zoom)==null?void 0:o.pinch)==null?void 0:l.enabled)!==((u=(c=s==null?void 0:s.zoom)==null?void 0:c.pinch)==null?void 0:u.enabled)||(t==null?void 0:t.enabled)!==(a==null?void 0:a.enabled)||(t==null?void 0:t.threshold)!==(a==null?void 0:a.threshold)}var GT="2.2.0";function _l(n,e,t){const i=t.zoom.drag,{dragStart:a,dragEnd:s}=cn(n);if(i.drawTime!==e||!s)return;const{left:o,top:l,width:c,height:u}=xb(n,t.zoom.mode,{dragStart:a,dragEnd:s},i.maintainAspectRatio),d=n.ctx;d.save(),d.beginPath(),d.fillStyle=i.backgroundColor||"rgba(225,225,225,0.3)",d.fillRect(o,l,c,u),i.borderWidth>0&&(d.lineWidth=i.borderWidth,d.strokeStyle=i.borderColor||"rgba(225,225,225)",d.strokeRect(o,l,c,u)),d.restore()}var XT={id:"zoom",version:GT,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(n,e,t){const i=cn(n);i.options=t,Object.prototype.hasOwnProperty.call(t.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(t.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(t.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),lo&&Xv(n,t),n.pan=(a,s,o)=>bb(n,a,s,o),n.zoom=(a,s)=>df(n,a,s),n.zoomRect=(a,s,o)=>gb(n,a,s,o),n.zoomScale=(a,s,o)=>IT(n,a,s,o),n.resetZoom=a=>CT(n,a),n.getZoomLevel=()=>OT(n),n.getInitialScaleBounds=()=>yb(n),n.getZoomedScaleBounds=()=>DT(n),n.isZoomedOrPanned=()=>PT(n),n.isZoomingOrPanning=()=>Jv(n)},beforeEvent(n,{event:e}){if(Jv(n))return!1;if(e.type==="click"||e.type==="mouseup"){const t=cn(n);if(t.filterNextClick)return t.filterNextClick=!1,!1}},beforeUpdate:function(n,e,t){const i=cn(n),a=i.options;i.options=t,ZT(a,t)&&(Qv(n),Xv(n,t)),VT(n,t)},beforeDatasetsDraw(n,e,t){_l(n,"beforeDatasetsDraw",t)},afterDatasetsDraw(n,e,t){_l(n,"afterDatasetsDraw",t)},beforeDraw(n,e,t){_l(n,"beforeDraw",t)},afterDraw(n,e,t){_l(n,"afterDraw",t)},stop:function(n){UT(n),lo&&Qv(n),fT(n)},panFunctions:dd,zoomFunctions:cd,zoomRectFunctions:ud},QT=T('<div class="chart-loader loader svelte-kfnurg"></div>'),e$=T('<button type="button" class="btn btn-secondary btn-sm btn-chart-zoom svelte-kfnurg">Reset zoom</button>'),t$=T('<div><div> </div> <!> <canvas class="chart-canvas svelte-kfnurg"></canvas> <!></div>');function n$(n,e){Ke(e,!1);let t=re(e,"filter",8,""),i=re(e,"zoom",28,()=>({})),a=re(e,"presets",8,""),s=M(),o=M(),l=M([]),c=M(0),u=M(!1),d=M(!1);async function f(){x(u,!0);const $=[a(),q.normalizeLogsFilter(t())].filter(Boolean).map(O=>"("+O+")").join("&&");return ze.logs.getStats({filter:$}).then(O=>{h(),O=q.toArray(O);for(let P of O)r(l).push({x:new Date(P.date),y:P.total}),x(c,r(c)+P.total)}).catch(O=>{O!=null&&O.isAbort||(h(),console.warn(O),ze.error(O,!$||(O==null?void 0:O.status)!=400))}).finally(()=>{x(u,!1)})}function h(){x(l,[]),x(c,0)}function p(){var $;($=r(o))==null||$.resetZoom()}vn(()=>(ur.register(Gr,Rl,Al,od,So,YS,tT),ur.register(XT),x(o,new ur(r(s),{type:"line",data:{datasets:[{label:"Total requests",data:r(l),borderColor:"#e34562",pointBackgroundColor:"#e34562",backgroundColor:"rgb(239,69,101,0.05)",borderWidth:2,pointRadius:1,pointBorderWidth:0,fill:!0}]},options:{resizeDelay:250,maintainAspectRatio:!1,animation:!1,interaction:{intersect:!1,mode:"index"},scales:{y:{beginAtZero:!0,grid:{color:"#edf0f3"},border:{color:"#e4e9ec"},ticks:{precision:0,maxTicksLimit:4,autoSkip:!0,color:"#666f75"}},x:{type:"time",time:{unit:"hour",tooltipFormat:"DD h a"},grid:{color:$=>{var O;return(O=$.tick)!=null&&O.major?"#edf0f3":""}},color:"#e4e9ec",ticks:{maxTicksLimit:15,autoSkip:!0,maxRotation:0,major:{enabled:!0},color:$=>{var O;return(O=$.tick)!=null&&O.major?"#16161a":"#666f75"}}}},plugins:{legend:{display:!1},zoom:{enabled:!0,zoom:{mode:"x",pinch:{enabled:!0},drag:{enabled:!0,backgroundColor:"rgba(255, 99, 132, 0.2)",borderWidth:0,threshold:10},limits:{x:{minRange:1e8},y:{minRange:1e8}},onZoomComplete:({chart:$})=>{x(d,$.isZoomedOrPanned()),r(d)?(i(i().min=q.formatToUTCDate($.scales.x.min,"yyyy-MM-dd HH")+":00:00.000Z",!0),i(i().max=q.formatToUTCDate($.scales.x.max,"yyyy-MM-dd HH")+":59:59.999Z",!0)):(i().min||i().max)&&i({})}}}}}})),()=>{var $;return($=r(o))==null?void 0:$.destroy()})),se(()=>(F(t()),F(a())),()=>{(typeof t()<"u"||typeof a()<"u")&&f()}),se(()=>(r(l),r(o)),()=>{typeof r(l)<"u"&&r(o)&&(dt(o,r(o).data.datasets[0].data=r(l)),r(o).update())}),ht(),Ge();var v=t$();let m;var g=I(v);let k;var _=I(g),E=y(g,2);{var D=$=>{var O=QT();Ct(3,O,()=>Bn,()=>({duration:150})),b($,O)};X(E,$=>{r(u)&&$(D)})}var S=y(E,2);gt(S,$=>x(s,$),()=>r(s));var C=y(S,2);{var w=$=>{var O=e$();ce("click",O,p),b($,O)};X(C,$=>{r(d)&&$(w)})}return B(($,O)=>{m=Ue(v,1,"chart-wrapper svelte-kfnurg",null,m,$),k=Ue(g,1,"total-logs entrance-right svelte-kfnurg",null,k,O),Ee(_,`Found ${r(c)??""}
        ${r(c)==1?"log":"logs"}`)},[()=>({loading:r(u)}),()=>({hidden:r(u)})]),ce("dblclick",S,p),b(n,v),xt(e,"load",f),Je({load:f})}var i$=T('<div><code class="svelte-s3jkbp"><!></code></div>');function vd(n,e){Ke(e,!1);let t=re(e,"content",8,""),i=re(e,"language",8,"javascript"),a=re(e,"class",8,""),s=M("");function o(d){return d=typeof d=="string"?d:"",d=Prism.plugins.NormalizeWhitespace.normalize(d,{"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0}),Prism.highlight(d,Prism.languages[i()]||Prism.languages.javascript,i())}se(()=>F(t()),()=>{typeof Prism<"u"&&t()&&x(s,o(t()))}),ht();var l=i$(),c=I(l),u=I(c);Qy(u,()=>r(s)),B(()=>Ue(l,1,`code-wrapper prism-light ${a()??""}`,"svelte-s3jkbp")),b(n,l),Je()}var r$=T('<i tabindex="-1" role="button"></i>');function fr(n,e){Ke(e,!1);let t=re(e,"value",8,""),i=re(e,"tooltip",8,"Copy"),a=re(e,"idleClasses",8,"ri-file-copy-line txt-sm link-hint"),s=re(e,"successClasses",8,"ri-check-line txt-sm txt-success"),o=re(e,"successDuration",8,500),l=M();function c(){q.isEmpty(t())||(q.copyToClipboard(t()),clearTimeout(r(l)),x(l,setTimeout(()=>{clearTimeout(r(l)),x(l,null)},o())))}vn(()=>()=>{r(l)&&clearTimeout(r(l))}),Ge();var u=r$();Y(u,"aria-label","Copy to clipboard"),nt(u,(d,f)=>le==null?void 0:le(d,f),()=>r(l)?void 0:i()),qt(()=>ce("click",u,gn(c))),B(()=>Ue(u,1,En(r(l)?s():a()))),b(n,u),Je()}var a$=T('<div class="block txt-center"><span class="loader"></span></div>'),s$=T('<span class="txt"> </span> <div class="copy-icon-wrapper svelte-1c23bpt"><!></div>',1),o$=T('<span class="txt txt-hint">N/A</span>'),l$=T('<tr class="svelte-1c23bpt"><td class="min-width txt-hint txt-bold">message</td><td class="svelte-1c23bpt"><!></td></tr>'),c$=T('<span class="txt txt-hint">N/A</span>'),u$=T('<span class="label label-danger log-error-label svelte-1c23bpt"> </span>'),d$=T('<span class="txt"> </span>'),f$=T('<div class="copy-icon-wrapper svelte-1c23bpt"><!></div>'),h$=T('<tr class="svelte-1c23bpt"><td> </td><td class="svelte-1c23bpt"><!> <!></td></tr>'),v$=T('<table class="table-border svelte-1c23bpt"><tbody class="svelte-1c23bpt"><tr class="svelte-1c23bpt"><td class="min-width txt-hint txt-bold">id</td><td class="svelte-1c23bpt"><span class="txt"> </span> <div class="copy-icon-wrapper svelte-1c23bpt"><!></div></td></tr><tr class="svelte-1c23bpt"><td class="min-width txt-hint txt-bold">level</td><td class="svelte-1c23bpt"><!> <div class="copy-icon-wrapper svelte-1c23bpt"><!></div></td></tr><tr class="svelte-1c23bpt"><td class="min-width txt-hint txt-bold">created</td><td class="svelte-1c23bpt"><!> <div class="copy-icon-wrapper svelte-1c23bpt"><!></div></td></tr><!><!></tbody></table>'),m$=T("<h4>Log details</h4>"),p$=T('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button> <button type="button" class="btn btn-primary"><i class="ri-download-line"></i> <span class="txt">Download as JSON</span></button>',1);function g$(n,e){Ke(e,!1);const t=M(),i="log_view",a=Ut();let s=M(),o=M({}),l=M(!1);function c(g){var k;return d(g).then(_=>{x(o,_),v()}),(k=r(s))==null?void 0:k.show()}function u(){var g;return ze.cancelRequest(i),(g=r(s))==null?void 0:g.hide()}async function d(g){if(g&&typeof g!="string")return x(l,!1),g;x(l,!0);let k={};try{k=await ze.logs.getOne(g,{requestKey:i})}catch(_){_.isAbort||(u(),console.warn("resolveModel:",_),br(`Unable to load log with id "${g}"`))}return x(l,!1),k}const f=["execTime","type","auth","authId","status","method","url","referer","remoteIP","userIP","userAgent","error","details"];function h(g){if(!g)return[];let k=[];for(let E of f)typeof g[E]<"u"&&k.push(E);const _=Object.keys(g);for(let E of _)k.includes(E)||k.push(E);return k}function p(){q.downloadJson(r(o),"log_"+r(o).created.replaceAll(/[-:\. ]/gi,"")+".json")}function v(){a("show",r(o))}function m(){a("hide",r(o)),x(o,{})}return se(()=>r(o),()=>{var g;x(t,((g=r(o).data)==null?void 0:g.type)=="request")}),ht(),Ge(),gt(_n(n,{class:"overlay-panel-lg log-panel",$$events:{hide:m},children:(g,k)=>{var _=rt(),E=j(_);{var D=C=>{var w=a$();b(C,w)},S=C=>{var w=rt(),$=j(w);{var O=P=>{var L=v$(),N=I(L),V=I(N),R=y(I(V)),U=I(R),H=I(U),z=y(U,2),J=I(z);fr(J,{get value(){return r(o),A(()=>r(o).id)}});var W=y(V),te=y(I(W)),de=I(te);Sg(de,{get level(){return r(o),A(()=>r(o).level)}});var pe=y(de,2),_e=I(pe);fr(_e,{get value(){return r(o),A(()=>r(o).level)}});var ke=y(W),ve=y(I(ke)),Oe=I(ve);kg(Oe,{get date(){return r(o),A(()=>r(o).created)}});var ue=y(Oe,2),me=I(ue);fr(me,{get value(){return r(o),A(()=>r(o).created)}});var he=y(ke);{var xe=be=>{var oe=l$(),Q=y(I(oe)),ne=I(Q);{var ye=Ie=>{var Le=s$(),je=j(Le),Te=I(je),Ze=y(je,2),we=I(Ze);fr(we,{get value(){return r(o),A(()=>r(o).message)}}),B(()=>Ee(Te,(r(o),A(()=>r(o).message)))),b(Ie,Le)},Se=Ie=>{var Le=o$();b(Ie,Le)};X(ne,Ie=>{r(o),A(()=>r(o).message)?Ie(ye):Ie(Se,!1)})}b(be,oe)};X(he,be=>{r(t)||be(xe)})}var ie=y(he);bt(ie,1,()=>(r(o),A(()=>h(r(o).data))),Nt,(be,oe)=>{const Q=ae(()=>(r(o),r(oe),A(()=>r(o).data[r(oe)]))),ne=ae(()=>(F(q),F(r(Q)),A(()=>q.isEmpty(r(Q))))),ye=ae(()=>!r(ne)&&r(Q)!==null&&typeof r(Q)=="object");var Se=h$(),Ie=I(Se);let Le;var je=I(Ie),Te=y(Ie),Ze=I(Te);{var we=Be=>{var Pe=c$();b(Be,Pe)},Re=Be=>{var Pe=rt(),He=j(Pe);{var Fe=Ve=>{{let Ye=ae(()=>(F(r(Q)),A(()=>JSON.stringify(r(Q),null,2))));vd(Ve,{get content(){return r(Ye)}})}},De=Ve=>{var Ye=rt(),lt=j(Ye);{var We=it=>{var Qe=u$(),ft=I(Qe);B(()=>Ee(ft,r(Q))),b(it,Qe)},tt=it=>{var Qe=rt(),ft=j(Qe);{var pt=Ce=>{vd(Ce,{get content(){return r(Q)},language:"html"})},at=Ce=>{var vt=d$(),K=I(vt);B(()=>Ee(K,`${r(Q)??""}${r(t)&&r(oe)=="execTime"?"ms":""}`)),b(Ce,vt)};X(ft,Ce=>{r(oe)=="details"?Ce(pt):Ce(at,!1)},!0)}b(it,Qe)};X(lt,it=>{r(oe)=="error"?it(We):it(tt,!1)},!0)}b(Ve,Ye)};X(He,Ve=>{r(ye)?Ve(Fe):Ve(De,!1)},!0)}b(Be,Pe)};X(Ze,Be=>{r(ne)?Be(we):Be(Re,!1)})}var Me=y(Ze,2);{var Xe=Be=>{var Pe=f$(),He=I(Pe);fr(He,{get value(){return r(Q)}}),b(Be,Pe)};X(Me,Be=>{r(ne)||Be(Xe)})}B(Be=>{Le=Ue(Ie,1,"min-width txt-hint txt-bold",null,Le,Be),Ee(je,`data.${r(oe)??""}`)},[()=>({"v-align-top":r(ye)})]),b(be,Se)}),B(()=>Ee(H,(r(o),A(()=>r(o).id)))),b(P,L)};X($,P=>{r(o),A(()=>{var L;return(L=r(o))==null?void 0:L.id})&&P(O)},!0)}b(C,w)};X(E,C=>{r(l)?C(D):C(S,!1)})}b(g,_)},$$slots:{default:!0,header:(g,k)=>{var _=m$();b(g,_)},footer:(g,k)=>{var _=p$(),E=j(_),D=y(E,2);B(()=>D.disabled=r(l)),ce("click",E,()=>u()),ce("click",D,()=>p()),b(g,_)}},$$legacy:!0}),g=>x(s,g),()=>r(s)),xt(e,"show",c),xt(e,"hide",u),Je({show:c,hide:u})}var b$=T('<code class="txt-xs"> </code>'),y$=T('<div>Default log levels: <div class="inline-flex flex-gap-5"></div></div>');function Sb(n,e){let t=re(e,"class",8,"");var i=y$(),a=y(I(i));bt(a,5,()=>cg,Nt,(s,o)=>{var l=b$(),c=I(l);B(()=>Ee(c,`${r(o),A(()=>r(o).level)??""}:${r(o),A(()=>r(o).label)??""}`)),b(s,l)}),B(()=>Ue(i,1,En(t()))),b(n,i)}var _$=T('<div class="block txt-center"><div class="loader"></div></div>'),x$=T('<label>Max days retention</label> <input type="number" required/> <div class="help-block">Set to <code>0</code> to disable logs persistence.</div>',1),w$=T('<label>Min log level</label> <input type="number" required min="-100" max="100"/> <div class="help-block"><p>Logs with level below the minimum will be ignored.</p> <!></div>',1),k$=T('<input type="checkbox"/> <label>Enable IP logging</label>',1),S$=T('<input type="checkbox"/> <label>Enable Auth Id logging</label>',1),T$=T('<form class="grid" autocomplete="off"><!> <!> <!> <!></form>'),$$=T("<h4>Logs settings</h4>"),I$=T('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Save changes</span></button>',1);function C$(n,e){Ke(e,!1);const t=M(),i=M(),a=Ut(),s="logs_settings_"+q.randomString(3);let o=M(),l=M(!1),c=M(!1),u=M({}),d=M({});function f(){var k;return p(),v(),(k=r(o))==null?void 0:k.show()}function h(){var k;return(k=r(o))==null?void 0:k.hide()}function p(){ln(),x(u,{}),x(d,JSON.parse(JSON.stringify(r(u)||{})))}async function v(){x(c,!0);try{const k=await ze.settings.getAll()||{};g(k)}catch(k){ze.error(k)}x(c,!1)}async function m(){if(r(i)){x(l,!0);try{const k=await ze.settings.update(q.filterRedactedProps(r(d)));g(k),x(l,!1),h(),bn("Successfully saved logs settings."),a("save",k)}catch(k){x(l,!1),ze.error(k)}}}function g(k={}){x(d,{logs:(k==null?void 0:k.logs)||{}}),x(u,JSON.parse(JSON.stringify(r(d))))}return se(()=>r(u),()=>{x(t,JSON.stringify(r(u)))}),se(()=>(r(t),r(d)),()=>{x(i,r(t)!=JSON.stringify(r(d)))}),ht(),Ge(),gt(_n(n,{popup:!0,class:"superuser-panel",beforeHide:()=>!r(l),$$events:{hide(k){ct.call(this,e,k)},show(k){ct.call(this,e,k)}},children:(k,_)=>{var E=rt(),D=j(E);{var S=w=>{var $=_$();b(w,$)},C=w=>{var $=T$(),O=I($);Ne(O,{class:"form-field required",name:"logs.maxDays",children:Ae,$$slots:{default:(V,R)=>{const U=ae(()=>R.uniqueId);var H=x$(),z=j(H),J=y(z,2);B(()=>{Y(z,"for",r(U)),Y(J,"id",r(U))}),_t(J,()=>r(d).logs.maxDays,W=>dt(d,r(d).logs.maxDays=W)),b(V,H)}}});var P=y(O,2);Ne(P,{class:"form-field",name:"logs.minLevel",children:Ae,$$slots:{default:(V,R)=>{const U=ae(()=>R.uniqueId);var H=w$(),z=j(H),J=y(z,2),W=y(J,2),te=y(I(W),2);Sb(te,{}),B(()=>Y(z,"for",r(U))),_t(J,()=>r(d).logs.minLevel,de=>dt(d,r(d).logs.minLevel=de)),b(V,H)}}});var L=y(P,2);Ne(L,{class:"form-field form-field-toggle",name:"logs.logIP",children:Ae,$$slots:{default:(V,R)=>{const U=ae(()=>R.uniqueId);var H=k$(),z=j(H),J=y(z,2);B(()=>{Y(z,"id",r(U)),Y(J,"for",r(U))}),rn(z,()=>r(d).logs.logIP,W=>dt(d,r(d).logs.logIP=W)),b(V,H)}}});var N=y(L,2);Ne(N,{class:"form-field form-field-toggle",name:"logs.logAuthId",children:Ae,$$slots:{default:(V,R)=>{const U=ae(()=>R.uniqueId);var H=S$(),z=j(H),J=y(z,2);B(()=>{Y(z,"id",r(U)),Y(J,"for",r(U))}),rn(z,()=>r(d).logs.logAuthId,W=>dt(d,r(d).logs.logAuthId=W)),b(V,H)}}}),B(()=>Y($,"id",s)),ce("submit",$,Et(m)),b(w,$)};X(D,w=>{r(c)?w(S):w(C,!1)})}b(k,E)},$$slots:{default:!0,header:(k,_)=>{var E=$$();b(k,E)},footer:(k,_)=>{var E=I$(),D=j(E),S=y(D,2);let C;B(w=>{D.disabled=r(l),Y(S,"form",s),C=Ue(S,1,"btn btn-expanded",null,C,w),S.disabled=!r(i)||r(l)},[()=>({"btn-loading":r(l)})]),ce("click",D,h),b(k,E)}},$$legacy:!0}),k=>x(o,k),()=>r(o)),xt(e,"show",f),xt(e,"hide",h),Je({show:f,hide:h})}var E$=T('<input type="checkbox"/> <label>Include requests by superusers</label>',1),O$=T('<div class="page-header-wrapper m-b-0"><header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item"> </div></nav> <button type="button" aria-label="Logs settings" class="btn btn-transparent btn-circle"><i class="ri-settings-4-line"></i></button> <!> <div class="flex-fill"></div> <div class="inline-flex"><!></div></header> <!> <!> <!></div> <!>',1),D$=T("<!> <!> <!>",1);function P$(n,e){var $;Ke(e,!1);const[t,i]=Rt(),a=()=>It(On,"$pageTitle",t),s=()=>It(Yd,"$querystring",t),o=M();ni(On,"Logs");const l="logId",c="superuserRequests",u="superuserLogRequests",d=new URLSearchParams(s());let f=M(),h=M(),p=M(1),v=M(d.get("filter")||""),m=M({}),g=M((d.get(c)||(($=window.localStorage)==null?void 0:$.getItem(u)))<<0),k=M(r(g));function _(){Cr(p)}function E(O={}){let P={};P.filter=r(v)||null,P[c]=r(g)<<0||null,q.replaceHashQueryParams(Object.assign(P,O))}se(()=>r(f),()=>{d.get(l)&&r(f)&&r(f).show(d.get(l))}),se(()=>r(g),()=>{x(o,r(g)?"":'data.auth!="_superusers"')}),se(()=>(r(k),r(g)),()=>{var O;r(k)!=r(g)&&(x(k,r(g)),(O=window.localStorage)==null||O.setItem(u,r(g)<<0),E())}),se(()=>r(v),()=>{typeof r(v)<"u"&&E()}),ht(),Ge();var D=D$(),S=j(D);Li(S,{children:(O,P)=>{var L=O$(),N=j(L),V=I(N),R=I(V),U=I(R),H=I(U),z=y(R,2);nt(z,(ve,Oe)=>le==null?void 0:le(ve,Oe),()=>({text:"Logs settings",position:"right"})),qt(()=>ce("click",z,()=>{var ve;return(ve=r(h))==null?void 0:ve.show()}));var J=y(z,2);$c(J,{$$events:{refresh:()=>_()}});var W=y(J,4),te=I(W);Ne(te,{class:"form-field form-field-toggle m-0",children:Ae,$$slots:{default:(ve,Oe)=>{const ue=ae(()=>Oe.uniqueId);var me=E$(),he=j(me),xe=y(he,2);B(()=>{Y(he,"id",r(ue)),Y(xe,"for",r(ue))}),rn(he,()=>r(g),ie=>x(g,ie)),b(ve,me)}}});var de=y(V,2);Tc(de,{get value(){return r(v)},placeholder:"Search term or filter like `level > 0 && data.auth = 'guest'`",extraAutocompleteKeys:["level","message","data."],$$events:{submit:ve=>x(v,ve.detail)}});var pe=y(de,2);Sb(pe,{class:"block txt-sm txt-hint m-t-xs m-b-base"});var _e=y(pe,2);Cf(_e,()=>r(p),ve=>{n$(ve,{get filter(){return r(v)},get presets(){return r(o)},get zoom(){return r(m)},set zoom(Oe){x(m,Oe)},$$legacy:!0})});var ke=y(N,2);Cf(ke,()=>r(p),ve=>{Q0(ve,{get presets(){return r(o)},get filter(){return r(v)},set filter(Oe){x(v,Oe)},get zoom(){return r(m)},set zoom(Oe){x(m,Oe)},$$events:{select:Oe=>{var ue;return(ue=r(f))==null?void 0:ue.show(Oe==null?void 0:Oe.detail)}},$$legacy:!0})}),B(()=>Ee(H,a())),b(O,L)},$$slots:{default:!0}});var C=y(S,2);gt(g$(C,{$$events:{show:O=>{var L;let P={};P[l]=((L=O.detail)==null?void 0:L.id)||null,q.replaceHashQueryParams(P)},hide:()=>{let O={};O[l]=null,q.replaceHashQueryParams(O)}},$$legacy:!0}),O=>x(f,O),()=>r(f));var w=y(C,2);gt(C$(w,{$$events:{save:_},$$legacy:!0}),O=>x(h,O),()=>r(h)),b(n,D),Je(),i()}var M$=T('<hr class="m-t-sm m-b-sm"/>'),A$=T('<div class="sidebar-item disabled"> </div>'),L$=T('<button type="button"> </button>'),N$=T("<!> <!>",1),R$=T('<div class="docs-content-wrapper"><aside><nav class="sidebar-content"></nav></aside> <div class="docs-content"></div></div>'),F$=T('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button>');function q$(n,e){Ke(e,!1);const t={list:{label:"List/Search",component:Wt(()=>import("./ListApiDocs-B-c_1vwn.js"),__vite__mapDeps([2,3,4]),import.meta.url)},view:{label:"View",component:Wt(()=>import("./ViewApiDocs-9ni0BiK0.js"),__vite__mapDeps([5,3]),import.meta.url)},create:{label:"Create",component:Wt(()=>import("./CreateApiDocs-CDUJGMU6.js"),__vite__mapDeps([6,3]),import.meta.url)},update:{label:"Update",component:Wt(()=>import("./UpdateApiDocs-C3XM_hGn.js"),__vite__mapDeps([7,3]),import.meta.url)},delete:{label:"Delete",component:Wt(()=>import("./DeleteApiDocs-BaVdKhPU.js"),[],import.meta.url)},realtime:{label:"Realtime",component:Wt(()=>import("./RealtimeApiDocs-Cvost1Nl.js"),[],import.meta.url)},batch:{label:"Batch",component:Wt(()=>import("./BatchApiDocs-MHCfqZGG.js"),[],import.meta.url)}},i={"list-auth-methods":{label:"List auth methods",component:Wt(()=>import("./AuthMethodsDocs-HEAbLsAO.js"),__vite__mapDeps([8,3]),import.meta.url)},"auth-with-password":{label:"Auth with password",component:Wt(()=>import("./AuthWithPasswordDocs-DhT_9v2v.js"),__vite__mapDeps([9,3]),import.meta.url)},"auth-with-oauth2":{label:"Auth with OAuth2",component:Wt(()=>import("./AuthWithOAuth2Docs-ja_2jnKS.js"),__vite__mapDeps([10,3]),import.meta.url)},"auth-with-otp":{label:"Auth with OTP",component:Wt(()=>import("./AuthWithOtpDocs-rAm5ETO0.js"),__vite__mapDeps([11,3]),import.meta.url)},refresh:{label:"Auth refresh",component:Wt(()=>import("./AuthRefreshDocs-CPGzByDX.js"),__vite__mapDeps([12,3]),import.meta.url)},verification:{label:"Verification",component:Wt(()=>import("./VerificationDocs-CJS7GEcu.js"),[],import.meta.url)},"password-reset":{label:"Password reset",component:Wt(()=>import("./PasswordResetDocs-BgMW9h0d.js"),[],import.meta.url)},"email-change":{label:"Email change",component:Wt(()=>import("./EmailChangeDocs-D1eR4BZ1.js"),[],import.meta.url)}};let a=M(),s=M({}),o=M(),l=M([]);r(l).length&&x(o,Object.keys(r(l))[0]);function c(f){var h;return x(s,f),d(Object.keys(r(l))[0]),(h=r(a))==null?void 0:h.show()}function u(){var f;return(f=r(a))==null?void 0:f.hide()}function d(f){x(o,f)}return se(()=>(r(s),r(l)),()=>{r(s).type==="auth"?(x(l,Object.assign({},t,i)),dt(l,r(l)["auth-with-password"].disabled=!r(s).passwordAuth.enabled),dt(l,r(l)["auth-with-oauth2"].disabled=!r(s).oauth2.enabled),dt(l,r(l)["auth-with-otp"].disabled=!r(s).otp.enabled)):r(s).type==="view"?(x(l,Object.assign({},t)),delete r(l).create,delete r(l).update,delete r(l).delete,delete r(l).realtime,delete r(l).batch):x(l,Object.assign({},t))}),ht(),Ge(),gt(_n(n,{class:"docs-panel",$$events:{hide(f){ct.call(this,e,f)},show(f){ct.call(this,e,f)}},children:(f,h)=>{var p=R$(),v=I(p);let m;var g=I(v);bt(g,7,()=>(r(l),A(()=>Object.entries(r(l)))),([_,E])=>_,(_,E,D)=>{var S=Xr(()=>ss(r(E),2));let C=()=>r(S)[0],w=()=>r(S)[1];var $=N$(),O=j($);{var P=R=>{var U=M$();b(R,U)};X(O,R=>{F(r(D)),A(()=>r(D)===Object.keys(t).length)&&R(P)})}var L=y(O,2);{var N=R=>{var U=A$(),H=I(U);nt(U,(z,J)=>le==null?void 0:le(z,J),()=>({position:"left",text:"Not enabled for the collection"})),B(()=>Ee(H,(w(),A(()=>w().label)))),b(R,U)},V=R=>{var U=L$();let H;var z=I(U);B(J=>{H=Ue(U,1,"sidebar-item",null,H,J),Ee(z,(w(),A(()=>w().label)))},[()=>({active:r(o)===C()})]),ce("click",U,()=>d(C())),b(R,U)};X(L,R=>{w(),A(()=>w().disabled)?R(N):R(V,!1)})}b(_,$)});var k=y(v,2);bt(k,5,()=>(r(l),A(()=>Object.entries(r(l)))),([_,E])=>_,(_,E)=>{var D=Xr(()=>ss(r(E),2));let S=()=>r(D)[0],C=()=>r(D)[1];var w=rt(),$=j(w);{var O=P=>{var L=rt(),N=j(L);Zy(N,()=>(C(),A(()=>C().component)),null,(V,R)=>{var U=ae(()=>{var{default:z}=r(R);return{TabComponent:z}}),H=ae(()=>r(U).TabComponent);r(H)(V,{get collection(){return r(s)}})}),b(P,L)};X($,P=>{r(o)===S()&&P(O)})}b(_,w)}),B(_=>m=Ue(v,1,"docs-sidebar",null,m,_),[()=>{var _;return{compact:((_=r(s))==null?void 0:_.type)==="auth"}}]),b(f,p)},$$slots:{default:!0,footer:(f,h)=>{var p=F$();ce("click",p,()=>u()),b(f,p)}},$$legacy:!0}),f=>x(a,f),()=>r(a)),xt(e,"show",c),xt(e,"hide",u),xt(e,"changeTab",d),Je({show:c,hide:u,changeTab:d})}var z$=T('<div class="accordion-content"><!></div>'),j$=T('<div><button type="button"><!></button> <!></div>');function Fr(n,e){Ke(e,!1);const t=Ut();let i=M(),a=M(),s=re(e,"class",8,""),o=re(e,"draggable",8,!1),l=re(e,"active",12,!1),c=re(e,"interactive",8,!0),u=re(e,"single",8,!1),d=M(!1);function f(){return!!l()}function h(){m(),l(!0),t("expand")}function p(){l(!1),clearTimeout(r(a)),t("collapse")}function v(){t("toggle"),l()?p():h()}function m(){if(u()&&r(i).closest(".accordions")){const w=r(i).closest(".accordions").querySelectorAll(".accordion.active .accordion-header.interactive");for(const $ of w)$.click()}}vn(()=>()=>clearTimeout(r(a))),se(()=>(F(l()),r(a),r(i)),()=>{l()&&(clearTimeout(r(a)),x(a,setTimeout(()=>{var w,$;(w=r(i))!=null&&w.scrollIntoViewIfNeeded?r(i).scrollIntoViewIfNeeded():($=r(i))!=null&&$.scrollIntoView&&r(i).scrollIntoView({behavior:"smooth",block:"nearest"})},200)))}),ht(),Ge();var g=j$();let k;var _=I(g);let E;var D=I(_);nn(D,e,"header",{get active(){return l()}},null);var S=y(_,2);{var C=w=>{var $=z$(),O=I($);nn(O,e,"default",{},null),Ct(3,$,()=>yn,()=>({delay:10,duration:150})),b(w,$)};X(S,w=>{l()&&w(C)})}return gt(g,w=>x(i,w),()=>r(i)),B((w,$)=>{k=Ue(g,1,`accordion ${r(d)?"drag-over":""} ${s()??""}`,null,k,w),E=Ue(_,1,"accordion-header",null,E,$),Y(_,"draggable",o()),Y(_,"aria-expanded",l())},[()=>({active:l()}),()=>({interactive:c()})]),ce("click",_,Et(()=>c()&&v())),ce("drop",_,Et(w=>{o()&&(x(d,!1),m(),t("drop",w))})),ce("dragstart",_,w=>o()&&t("dragstart",w)),ce("dragenter",_,w=>{o()&&(x(d,!0),t("dragenter",w))}),ce("dragleave",_,w=>{o()&&(x(d,!1),t("dragleave",w))}),ce("dragover",_,Et(function(w){ct.call(this,e,w)})),b(n,g),xt(e,"isExpanded",f),xt(e,"expand",h),xt(e,"collapse",p),xt(e,"toggle",v),xt(e,"collapseSiblings",m),Je({isExpanded:f,expand:h,collapse:p,toggle:v,collapseSiblings:m})}let em;var V$=T('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),U$=T('<div class="help-block">Available placeholder parameters: <!></div>'),B$=T('<label>Subject</label> <input type="text" spellcheck="false" required/> <!>',1),H$=T('<textarea class="txt-mono" spellcheck="false" rows="14" required></textarea>'),W$=T('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),Y$=T('<div class="help-block">Available placeholder parameters: <!></div>'),K$=T("<label>Body (HTML)</label> <!> <!>",1),J$=T("<!> <!>",1),Z$=T('<i class="ri-error-warning-fill txt-danger"></i>'),G$=T('<div class="inline-flex"><i class="ri-draft-line"></i> <span class="txt"> </span></div> <div class="flex-fill"></div> <!>',1);function X$(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["expand","collapse","collapseSiblings","key","title","config","placeholders"]);Ke(e,!1);const[a,s]=Rt(),o=()=>It(Yn,"$errors",a),l=M();let c=re(e,"key",8),u=re(e,"title",8),d=re(e,"config",28,()=>({})),f=re(e,"placeholders",24,()=>[]),h=M(),p=M(em),v=M(!1);function m(){var S;(S=r(h))==null||S.expand()}function g(){var S;(S=r(h))==null||S.collapse()}function k(){var S;(S=r(h))==null||S.collapseSiblings()}async function _(){r(p)||r(v)||(x(v,!0),x(p,(await Wt(async()=>{const{default:S}=await import("./CodeEditor-_7ftkqqn.js");return{default:S}},__vite__mapDeps([13,1]),import.meta.url)).default),em=r(p),x(v,!1))}function E(S){S=S.replace("*",""),q.copyToClipboard(S),bo(`Copied ${S} to clipboard`,2e3)}_(),se(()=>(o(),F(c())),()=>{x(l,!q.isEmpty(q.getNestedVal(o(),c())))}),se(()=>(F(d()),F(c())),()=>{d().enabled||ri(c())}),ht(),Ge(),gt(Fr(n,sn(()=>i,{$$events:{expand(S){ct.call(this,e,S)},collapse(S){ct.call(this,e,S)},toggle(S){ct.call(this,e,S)}},children:(S,C)=>{var w=J$(),$=j(w);Ne($,{class:"form-field required",get name(){return`${c()??""}.subject`},children:Ae,$$slots:{default:(P,L)=>{const N=ae(()=>L.uniqueId);var V=B$(),R=j(V),U=y(R,2),H=y(U,2);{var z=J=>{var W=U$(),te=y(I(W));bt(te,1,f,Nt,(de,pe)=>{var _e=V$(),ke=j(_e),ve=I(ke);B(()=>Ee(ve,"{"+r(pe)+"}")),ce("click",ke,()=>E("{"+r(pe)+"}")),b(de,_e)}),b(J,W)};X(H,J=>{F(f()),A(()=>{var W;return((W=f())==null?void 0:W.length)>0})&&J(z)})}B(()=>{Y(R,"for",r(N)),Y(U,"id",r(N))}),_t(U,()=>d().subject,J=>d(d().subject=J,!0)),b(P,V)}}});var O=y($,2);Ne(O,{class:"form-field m-0 required",get name(){return`${c()??""}.body`},children:Ae,$$slots:{default:(P,L)=>{const N=ae(()=>L.uniqueId);var V=K$(),R=j(V),U=y(R,2);{var H=te=>{var de=rt(),pe=j(de);wi(pe,()=>r(p),(_e,ke)=>{ke(_e,{get id(){return r(N)},language:"html",get value(){return d().body},set value(ve){d(d().body=ve,!0)},$$legacy:!0})}),b(te,de)},z=te=>{var de=H$();B(()=>Y(de,"id",r(N))),_t(de,()=>d().body,pe=>d(d().body=pe,!0)),b(te,de)};X(U,te=>{r(p)&&!r(v)?te(H):te(z,!1)})}var J=y(U,2);{var W=te=>{var de=Y$(),pe=y(I(de));bt(pe,1,f,Nt,(_e,ke)=>{var ve=W$(),Oe=j(ve),ue=I(Oe);B(()=>Ee(ue,"{"+r(ke)+"}")),ce("click",Oe,()=>E("{"+r(ke)+"}")),b(_e,ve)}),b(te,de)};X(J,te=>{F(f()),A(()=>{var de;return((de=f())==null?void 0:de.length)>0})&&te(W)})}B(()=>Y(R,"for",r(N))),b(P,V)}}}),b(S,w)},$$slots:{default:!0,header:(S,C)=>{var w=G$(),$=j(w),O=y(I($),2),P=I(O),L=y($,4);{var N=V=>{var R=Z$();nt(R,(U,H)=>le==null?void 0:le(U,H),()=>({text:"Has errors",position:"left"})),Ct(3,R,()=>Bn,()=>({duration:150,start:.7})),b(V,R)};X(L,V=>{r(l)&&V(N)})}B(()=>Ee(P,u())),b(S,w)}},$$legacy:!0})),S=>x(h,S),()=>r(h)),xt(e,"expand",m),xt(e,"collapse",g),xt(e,"collapseSiblings",k);var D=Je({expand:m,collapse:g,collapseSiblings:k});return s(),D}var Q$=T('<label> </label> <input type="number" required placeholder="No change"/> <div class="help-block"><span>Invalidate all previously issued tokens</span></div>',1);function eI(n,e){Ke(e,!1);let t=re(e,"key",8),i=re(e,"label",8),a=re(e,"duration",12),s=re(e,"secret",12);Ge(),Ne(n,{class:"form-field required",get name(){return`${t()??""}.duration`},children:Ae,$$slots:{default:(o,l)=>{const c=ae(()=>l.uniqueId);var u=Q$(),d=j(u),f=I(d),h=y(d,2),p=y(h,2),v=I(p);let m;B(g=>{Y(d,"for",r(c)),Ee(f,`${i()??""} duration (in seconds)`),Y(h,"id",r(c)),m=Ue(v,1,"link-primary",null,m,g)},[()=>({"txt-success":!!s()})]),_t(h,a),ce("click",v,()=>{s()?s(void 0):s(q.randomSecret(50))}),b(o,u)}}}),Je()}var tI=T('<div class="col-sm-6"><!></div>'),nI=T('<div class="grid"></div>'),iI=T('<i class="ri-error-warning-fill txt-danger"></i>'),rI=T('<div class="inline-flex"><i class="ri-key-2-line"></i> <span class="txt">Tokens options (invalidate, duration)</span></div> <div class="flex-fill"></div> <!>',1);function aI(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s=M(),o=M();let l=re(e,"collection",12),c=M([]);function u(d){if(q.isEmpty(d))return!1;for(let f of r(c))if(d[f.key])return!0;return!1}se(()=>F(l()),()=>{var d,f;x(s,((d=l())==null?void 0:d.system)&&((f=l())==null?void 0:f.name)==="_superusers")}),se(()=>r(s),()=>{x(c,r(s)?[{key:"authToken",label:"Auth"},{key:"passwordResetToken",label:"Password reset"},{key:"fileToken",label:"Protected file access"}]:[{key:"authToken",label:"Auth"},{key:"verificationToken",label:"Email verification"},{key:"passwordResetToken",label:"Password reset"},{key:"emailChangeToken",label:"Email change"},{key:"fileToken",label:"Protected file access"}])}),se(()=>a(),()=>{x(o,u(a()))}),ht(),Ge(),Fr(n,{single:!0,children:(d,f)=>{var h=nI();bt(h,5,()=>r(c),p=>p.key,(p,v)=>{var m=tI(),g=I(m);eI(g,{get key(){return r(v),A(()=>r(v).key)},get label(){return r(v),A(()=>r(v).label)},get duration(){return l()[r(v).key].duration},set duration(k){l(l()[r(v).key].duration=k,!0)},get secret(){return l()[r(v).key].secret},set secret(k){l(l()[r(v).key].secret=k,!0)},$$legacy:!0}),b(p,m)}),b(d,h)},$$slots:{default:!0,header:(d,f)=>{var h=rI(),p=y(j(h),4);{var v=m=>{var g=iI();nt(g,(k,_)=>le==null?void 0:le(k,_),()=>({text:"Has errors",position:"left"})),Ct(3,g,()=>Bn,()=>({duration:150,start:.7})),b(m,g)};X(p,m=>{r(o)&&m(v)})}b(d,h)}}}),Je(),i()}let tm;var sI=T('<div class="txt-center"><span class="loader"></span></div>'),oI=T('<button type="button" class="btn btn-sm btn-transparent btn-hint lock-toggle svelte-dnx4io"><i class="ri-lock-line" aria-hidden="true"></i> <span class="txt">Set Superusers only</span></button>'),lI=T('<small class="txt svelte-dnx4io">Unlock and set custom rule</small>'),cI=T('<button type="button" class="unlock-overlay svelte-dnx4io"><!> <div class="icon svelte-dnx4io" aria-hidden="true"><i class="ri-lock-unlock-line svelte-dnx4io"></i></div></button>'),uI=T('<div class="input-wrapper svelte-dnx4io"><label><!> <span> </span> <!> <!></label> <!> <!></div> <div class="help-block"><!></div>',1);function jr(n,e){Ke(e,!1);const t=M(),i=M();let a=re(e,"collection",8,null),s=re(e,"rule",12,null),o=re(e,"label",8,"Rule"),l=re(e,"formKey",8,"rule"),c=re(e,"required",8,!1),u=re(e,"disabled",8,!1),d=re(e,"superuserToggle",8,!0),f=re(e,"placeholder",8,"Leave empty to grant everyone access..."),h=M(null),p=null,v=M(tm),m=M(!1);g();async function g(){r(v)||r(m)||(x(m,!0),x(v,(await Wt(async()=>{const{default:w}=await import("./FilterAutocompleteInput-DD1nRlog.js");return{default:w}},__vite__mapDeps([0,1]),import.meta.url)).default),tm=r(v),x(m,!1))}async function k(){var w;s(p||""),await Nn(),(w=r(h))==null||w.focus()}function _(){p=s(),s(null)}se(()=>(F(d()),F(s())),()=>{x(t,d()&&s()===null)}),se(()=>(F(u()),F(a())),()=>{x(i,u()||a().system)}),ht(),Ge();var E=rt(),D=j(E);{var S=w=>{var $=sI();b(w,$)},C=w=>{{let $=ae(()=>c()?"requied":""),O=ae(()=>r(t)?"disabled":"");Ne(w,{get class(){return`form-field rule-field ${r($)??""} ${r(O)??""}`},get name(){return l()},children:Ae,$$slots:{default:(P,L)=>{const N=ae(()=>L.uniqueId);var V=uI(),R=j(V),U=I(R),H=I(U);nn(H,e,"beforeLabel",{get isSuperuserOnly(){return r(t)}},null);var z=y(H,2);let J;var W=I(z),te=y(z,2);nn(te,e,"afterLabel",{get isSuperuserOnly(){return r(t)}},null);var de=y(te,2);{var pe=me=>{var he=oI();B(()=>{Y(he,"aria-hidden",r(i)),he.disabled=r(i)}),ce("click",he,_),b(me,he)};X(de,me=>{d()&&!r(t)&&me(pe)})}var _e=y(U,2);{let me=ae(()=>r(i)||r(t)),he=ae(()=>r(t)?"":f());wi(_e,()=>r(v),(xe,ie)=>{gt(ie(xe,{get id(){return r(N)},get baseCollection(){return a()},get disabled(){return r(me)},get placeholder(){return r(he)},get value(){return s()},set value(be){s(be)},$$legacy:!0}),be=>x(h,be),()=>r(h))})}var ke=y(_e,2);{var ve=me=>{var he=cI(),xe=I(he);{var ie=be=>{var oe=lI();b(be,oe)};X(xe,be=>{r(i)||be(ie)})}B(()=>{he.disabled=r(i),Y(he,"aria-hidden",r(i))}),Ct(3,he,()=>Bn,()=>({duration:150,start:.98})),ce("click",he,k),b(me,he)};X(ke,me=>{d()&&r(t)&&me(ve)})}nt(R,(me,he)=>le==null?void 0:le(me,he),()=>a().system?{text:"System collection rule cannot be changed.",position:"top"}:void 0);var Oe=y(R,2),ue=I(Oe);nn(ue,e,"default",{get isSuperuserOnly(){return r(t)}},null),B(me=>{Y(U,"for",r(N)),J=Ue(z,1,"txt",null,J,me),Ee(W,`${o()??""}
                    ${r(t)?"- Superusers only":""}`)},[()=>({"txt-hint":r(t)})]),b(P,V)}}})}};X(D,w=>{r(m)?w(S):w(C,!1)})}b(n,E),Je()}var dI=T('<input type="checkbox"/> <label><span class="txt">Enable</span></label>',1),fI=T("<p>This optional rule could be used to enable/disable MFA per account basis.</p> <p>For example, to require MFA only for accounts with non-empty email you can set it to <code>email != ''</code>.</p> <p>Leave the rule empty to require MFA for everyone.</p>",1),hI=T(`<div class="content m-b-sm"><p class="txt-bold">This feature is experimental and may change in the future.</p> <p>Multi-factor authentication (MFA) requires the user to authenticate with any 2 different auth
            methods (otp, identity/password, oauth2) before issuing an auth token. <a target="_blank" rel="noopener noreferrer" class="txt-sm link-hint" title="Learn more"><em>(Learn more)</em></a>.</p></div> <div class="grid"><!> <div><!></div></div>`,1),vI=T('<span class="label label-success">Enabled</span>'),mI=T('<span class="label">Disabled</span>'),pI=T('<i class="ri-error-warning-fill txt-danger"></i>'),gI=T('<div class="inline-flex"><i class="ri-shield-check-line"></i> <span class="txt">Multi-factor authentication (MFA)</span></div> <div class="flex-fill"></div> <!> <!>',1);function bI(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s=M();let o=re(e,"collection",12);se(()=>a(),()=>{var l;x(s,!q.isEmpty((l=a())==null?void 0:l.mfa))}),ht(),Ge(),Fr(n,{single:!0,children:(l,c)=>{var u=hI(),d=j(u),f=y(I(d),2),h=y(I(f)),p=y(d,2),v=I(p);Ne(v,{class:"form-field form-field-toggle",name:"mfa.enabled",children:Ae,$$slots:{default:(_,E)=>{const D=ae(()=>E.uniqueId);var S=dI(),C=j(S),w=y(C,2);B(()=>{Y(C,"id",r(D)),Y(w,"for",r(D))}),rn(C,()=>o().mfa.enabled,$=>o(o().mfa.enabled=$,!0)),b(_,S)}}});var m=y(v,2);let g;var k=I(m);{let _=ae(()=>(F(o()),A(()=>!o().mfa.enabled)));jr(k,{label:"MFA rule",formKey:"mfa.rule",superuserToggle:!1,get disabled(){return r(_)},placeholder:"Leave empty to require MFA for everyone",get collection(){return o()},get rule(){return o().mfa.rule},set rule(E){o(o().mfa.rule=E,!0)},children:(E,D)=>{var S=fI();b(E,S)},$$slots:{default:!0},$$legacy:!0})}B(_=>{Y(h,"href",A(()=>"https://pocketbase.io/docs/authentication#multi-factor-authentication")),g=Ue(m,1,"content",null,g,_)},[()=>({fade:!o().mfa.enabled})]),b(l,u)},$$slots:{default:!0,header:(l,c)=>{var u=gI(),d=y(j(u),4);{var f=m=>{var g=vI();b(m,g)},h=m=>{var g=mI();b(m,g)};X(d,m=>{F(o()),A(()=>o().mfa.enabled)?m(f):m(h,!1)})}var p=y(d,2);{var v=m=>{var g=pI();nt(g,(k,_)=>le==null?void 0:le(k,_),()=>({text:"Has errors",position:"left"})),Ct(3,g,()=>Bn,()=>({duration:150,start:.7})),b(m,g)};X(p,m=>{r(s)&&m(v)})}b(l,u)}}}),Je(),i()}var yI=T('<span class="txt"> </span>'),_I=T('<span class="clear"><i class="ri-close-line"></i></span>'),xI=T('<div class="option"><!> <!></div>'),wI=T("<div> </div>"),kI=T('<div class="addon suffix p-r-5"><button type="button" class="btn btn-sm btn-circle btn-transparent clear"><i class="ri-close-line"></i></button></div>'),SI=T('<div class="form-field form-field-sm options-search"><label class="input-group"><div class="addon p-r-0"><i class="ri-search-line"></i></div> <input type="text"/> <!></label></div>'),TI=T('<div tabindex="0" role="menuitem"><!></div>'),$I=T('<div class="txt-missing"> </div>'),II=T('<!> <!> <div class="options-list"></div> <!>',1),CI=T('<div><div role="button"></div> <!></div>');function as(n,e){Ke(e,!1);const t=M(),i=M();let a=re(e,"id",8,""),s=re(e,"noOptionsText",8,"No options found"),o=re(e,"selectPlaceholder",8,"- Select -"),l=re(e,"searchPlaceholder",8,"Search..."),c=re(e,"items",24,()=>[]),u=re(e,"multiple",8,!1),d=re(e,"disabled",8,!1),f=re(e,"readonly",8,!1),h=re(e,"upside",8,!1),p=re(e,"zeroFunc",8,()=>u()?[]:void 0),v=re(e,"selected",28,()=>p()()),m=re(e,"toggle",24,u),g=re(e,"closable",8,!0),k=re(e,"labelComponent",8,void 0),_=re(e,"labelComponentProps",24,()=>({})),E=re(e,"optionComponent",8,void 0),D=re(e,"optionComponentProps",24,()=>({})),S=re(e,"searchable",8,!1),C=re(e,"searchFunc",8,void 0);const w=Ut();let $=re(e,"class",8,""),O=M(),P=M(""),L=M(void 0),N=M(void 0);function V(oe){var ne;if(q.isEmpty(v()))return;let Q=q.toArray(v());q.inArray(Q,oe)&&(q.removeByValue(Q,oe),v(u()?Q:(Q==null?void 0:Q[0])||p()())),w("change",{selected:v()}),(ne=r(L))==null||ne.dispatchEvent(new CustomEvent("change",{detail:v(),bubbles:!0}))}function R(oe){var Q;if(u()){let ne=q.toArray(v());q.inArray(ne,oe)||v([...ne,oe])}else v(oe);w("change",{selected:v()}),(Q=r(L))==null||Q.dispatchEvent(new CustomEvent("change",{detail:v(),bubbles:!0}))}function U(oe){return r(i)(oe)?V(oe):R(oe)}function H(){var oe;v(p()()),w("change",{selected:v()}),(oe=r(L))==null||oe.dispatchEvent(new CustomEvent("change",{detail:v(),bubbles:!0}))}function z(){var oe,Q;(oe=r(O))!=null&&oe.show&&((Q=r(O))==null||Q.show())}function J(){var oe,Q;(oe=r(O))!=null&&oe.hide&&((Q=r(O))==null||Q.hide())}function W(){if(q.isEmpty(v())||q.isEmpty(c()))return;let oe=q.toArray(v()),Q=[];for(const ne of oe)q.inArray(c(),ne)||Q.push(ne);if(Q.length){for(const ne of Q)q.removeByValue(oe,ne);v(u()?oe:oe[0])}}function te(oe,Q){let ne=(""+Q).replace(/\s+/g,"").toLowerCase(),ye=oe;try{typeof oe=="object"&&oe!==null&&(ye=JSON.stringify(oe))}catch{}return(""+ye).replace(/\s+/g,"").toLowerCase().includes(ne)}function de(){x(P,"")}function pe(oe,Q){oe=oe||[];const ne=C()||te;return oe.filter(ye=>ne(ye,Q))||[]}function _e(oe,Q){oe.preventDefault(),m()&&u()?U(Q):R(Q)}function ke(oe,Q){(oe.code==="Enter"||oe.code==="Space")&&(_e(oe,Q),g()&&J())}function ve(){de(),setTimeout(()=>{var Q;const oe=(Q=r(L))==null?void 0:Q.querySelector(".dropdown-item.option.selected");oe&&(oe.focus(),oe.scrollIntoView({block:"nearest"}))},0)}function Oe(oe){var Q;oe.stopPropagation(),!f()&&!d()&&((Q=r(O))==null||Q.toggle())}vn(()=>{const oe=document.querySelectorAll(`label[for="${a()}"]`);for(const Q of oe)Q.addEventListener("click",Oe);return()=>{for(const Q of oe)Q.removeEventListener("click",Oe)}}),se(()=>F(c()),()=>{c()&&(W(),de())}),se(()=>(F(c()),r(P)),()=>{x(t,pe(c(),r(P)))}),se(()=>F(v()),()=>{x(i,function(oe){const Q=q.toArray(v());return q.inArray(Q,oe)})}),ht(),Ge();var ue=CI();let me;var he=I(ue);let xe;bt(he,5,()=>(F(q),F(v()),A(()=>q.toArray(v()))),Nt,(oe,Q)=>{var ne=xI(),ye=I(ne);{var Se=Te=>{var Ze=rt(),we=j(Ze);wi(we,k,(Re,Me)=>{Me(Re,sn({get item(){return r(Q)}},_))}),b(Te,Ze)},Ie=Te=>{var Ze=yI(),we=I(Ze);B(()=>Ee(we,r(Q))),b(Te,Ze)};X(ye,Te=>{k()?Te(Se):Te(Ie,!1)})}var Le=y(ye,2);{var je=Te=>{var Ze=_I();nt(Ze,(we,Re)=>le==null?void 0:le(we,Re),()=>"Clear"),qt(()=>ce("click",Ze,Et(gn(()=>V(r(Q)))))),b(Te,Ze)};X(Le,Te=>{(u()||m())&&Te(je)})}b(oe,ne)},oe=>{var Q=wI();let ne;var ye=I(Q);B(Se=>{ne=Ue(Q,1,"block txt-placeholder",null,ne,Se),Ee(ye,o())},[()=>({"link-hint":!d()&&!f()})]),b(oe,Q)}),gt(he,oe=>x(N,oe),()=>r(N));var ie=y(he,2);{var be=oe=>{{let Q=ae(()=>h()?"dropdown-upside":"");gt(ii(oe,{get class(){return`dropdown dropdown-block options-dropdown dropdown-left ${r(Q)??""}`},get trigger(){return r(N)},$$events:{show:ve,hide(ne){ct.call(this,e,ne)}},children:(ne,ye)=>{var Se=II(),Ie=j(Se);{var Le=we=>{var Re=SI(),Me=I(Re),Xe=y(I(Me),2);Gi(Xe,!0);var Be=y(Xe,2);{var Pe=He=>{var Fe=kI(),De=I(Fe);ce("click",De,Et(gn(de))),b(He,Fe)};X(Be,He=>{r(P),A(()=>r(P).length)&&He(Pe)})}B(()=>Y(Xe,"placeholder",l())),_t(Xe,()=>r(P),He=>x(P,He)),b(we,Re)};X(Ie,we=>{S()&&we(Le)})}var je=y(Ie,2);nn(je,e,"beforeOptions",{},null);var Te=y(je,2);bt(Te,5,()=>r(t),Nt,(we,Re)=>{var Me=TI();let Xe;var Be=I(Me);{var Pe=Fe=>{var De=rt(),Ve=j(De);wi(Ve,E,(Ye,lt)=>{lt(Ye,sn({get item(){return r(Re)}},D))}),b(Fe,De)},He=Fe=>{var De=mr();B(()=>Ee(De,r(Re))),b(Fe,De)};X(Be,Fe=>{E()?Fe(Pe):Fe(He,!1)})}B(Fe=>Xe=Ue(Me,1,"dropdown-item option",null,Xe,Fe),[()=>({closable:g(),selected:r(i)(r(Re))})]),ce("click",Me,Fe=>_e(Fe,r(Re))),ce("keydown",Me,Fe=>ke(Fe,r(Re))),b(we,Me)},we=>{var Re=rt(),Me=j(Re);{var Xe=Be=>{var Pe=$I(),He=I(Pe);B(()=>Ee(He,s())),b(Be,Pe)};X(Me,Be=>{s()&&Be(Xe)})}b(we,Re)});var Ze=y(Te,2);nn(Ze,e,"afterOptions",{},null),b(ne,Se)},$$slots:{default:!0},$$legacy:!0}),ne=>x(O,ne),()=>r(O))}};X(ie,oe=>{!d()&&!f()&&oe(be)})}return gt(ue,oe=>x(L,oe),()=>r(L)),B((oe,Q)=>{me=Ue(ue,1,`select ${$()??""}`,null,me,oe),Y(he,"tabindex",d()||f()?"-1":"0"),xe=Ue(he,1,"selected-container",null,xe,Q)},[()=>({upside:h(),multiple:u(),disabled:d(),readonly:f()}),()=>({disabled:d(),readonly:f()})]),b(n,ue),xt(e,"deselectItem",V),xt(e,"selectItem",R),xt(e,"toggleItem",U),xt(e,"reset",H),xt(e,"showDropdown",z),xt(e,"hideDropdown",J),Je({deselectItem:V,selectItem:R,toggleItem:U,reset:H,showDropdown:z,hideDropdown:J})}var EI=T('<div class="form-field-addon"><button type="button" class="btn btn-transparent btn-circle"><i class="ri-key-line"></i></button></div> <input/>',1),OI=T("<input/>");function ff(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","mask"]);Ke(e,!1);let a=re(e,"value",12,void 0),s=re(e,"mask",12,!1),o=M();async function l(){var h;a(""),s(!1),await Nn(),(h=r(o))==null||h.focus()}Ge();var c=rt(),u=j(c);{var d=h=>{var p=EI(),v=j(p),m=I(v);nt(m,(k,_)=>le==null?void 0:le(k,_),()=>({position:"left",text:"Set new value"})),qt(()=>ce("click",m,Et(l)));var g=y(v,2);_s(g,()=>({disabled:!0,type:"text",placeholder:"******",...i})),b(h,p)},f=h=>{var p=OI();_s(p,()=>({type:"password",autocomplete:"new-password",...i})),gt(p,v=>x(o,v),()=>r(o)),_t(p,a),b(h,p)};X(u,h=>{s()?h(d):h(f,!1)})}b(n,c),Je()}var DI=T('<label>Client ID</label> <input type="text"/>',1),PI=T("<label>Client secret</label> <!>",1),MI=T('<div class="col-lg-12"><!></div>'),AI=T('<form autocomplete="off"><!> <!> <!></form>'),LI=T("<img/>"),NI=T('<i class="ri-puzzle-line txt-sm txt-hint"></i>'),RI=T('<figure class="provider-logo"><!></figure> <h4 class="center txt-break"> <small class="txt-hint"> </small></h4>',1),FI=T('<button type="button" class="btn btn-transparent btn-circle btn-hint btn-sm" aria-label="Remove provider"><i class="ri-delete-bin-7-line" aria-hidden="true"></i></button> <div class="flex-fill"></div>',1),qI=T('<!> <button type="button" class="btn btn-transparent">Cancel</button> <button type="submit" class="btn btn-expanded"><span class="txt">Set provider config</span></button>',1);function zI(n,e){Ke(e,!1);const t=M(),i=M(),a=Ut(),s="provider_popup_"+q.randomString(5);let o=M(),l=M({}),c=M({}),u=M(!1),d=M(""),f=M(!1),h=M(0);function p(k,_,E){var D;x(h,E||0),x(u,q.isEmpty(_)),x(l,Object.assign({},k)),x(c,Object.assign({},_)),x(f,!!r(c).clientId),x(d,JSON.stringify(r(c))),(D=r(o))==null||D.show()}function v(){var k;ri(r(i)),(k=r(o))==null||k.hide()}async function m(){a("submit",{uiOptions:r(l),config:r(c)}),v()}async function g(){jn(`Do you really want to remove the "${r(l).title}" OAuth2 provider from the collection?`,()=>{a("remove",{uiOptions:r(l)}),v()})}return se(()=>(r(c),r(d)),()=>{x(t,JSON.stringify(r(c))!=r(d))}),se(()=>r(h),()=>{x(i,"oauth2.providers."+r(h))}),ht(),Ge(),gt(_n(n,{btnClose:!1,$$events:{show(k){ct.call(this,e,k)},hide(k){ct.call(this,e,k)}},children:(k,_)=>{var E=AI(),D=I(E);Ne(D,{class:"form-field required",get name(){return`${r(i)??""}.clientId`},children:Ae,$$slots:{default:($,O)=>{const P=ae(()=>O.uniqueId);var L=DI(),N=j(L),V=y(N,2);B(()=>{Y(N,"for",r(P)),Y(V,"id",r(P))}),_t(V,()=>r(c).clientId,R=>dt(c,r(c).clientId=R)),b($,L)}}});var S=y(D,2);Ne(S,{class:"form-field required",get name(){return`${r(i)??""}.clientSecret`},children:Ae,$$slots:{default:($,O)=>{const P=ae(()=>O.uniqueId);var L=PI(),N=j(L),V=y(N,2);ff(V,{get id(){return r(P)},get mask(){return r(f)},set mask(R){x(f,R)},get value(){return r(c).clientSecret},set value(R){dt(c,r(c).clientSecret=R)},$$legacy:!0}),B(()=>Y(N,"for",r(P))),b($,L)}}});var C=y(S,2);{var w=$=>{var O=MI(),P=I(O);wi(P,()=>r(l).optionsComponent,(L,N)=>{N(L,sn({get key(){return r(i)}},()=>r(l).optionsComponentProps||{},{get config(){return r(c)},set config(V){x(c,V)},$$legacy:!0}))}),b($,O)};X(C,$=>{r(l),A(()=>r(l).optionsComponent)&&$(w)})}B(()=>Y(E,"id",s)),ce("submit",E,Et(()=>m())),b(k,E)},$$slots:{default:!0,header:(k,_)=>{var E=RI(),D=j(E),S=I(D);{var C=N=>{var V=LI();B(()=>{Y(V,"src",`${A(()=>"./")??""}images/oauth2/${r(l),A(()=>r(l).logo)??""}`),Y(V,"alt",`${r(l),A(()=>r(l).title)??""} logo`)}),b(N,V)},w=N=>{var V=NI();b(N,V)};X(S,N=>{r(l),A(()=>r(l).logo)?N(C):N(w,!1)})}var $=y(D,2),O=I($),P=y(O),L=I(P);B(()=>{Ee(O,`${r(l),A(()=>r(l).title)??""} `),Ee(L,`(${r(l),A(()=>r(l).key)??""})`)}),b(k,E)},footer:(k,_)=>{var E=qI(),D=j(E);{var S=$=>{var O=FI(),P=j(O);nt(P,(L,N)=>le==null?void 0:le(L,N),()=>({text:"Remove provider",position:"right"})),qt(()=>ce("click",P,g)),b($,O)};X(D,$=>{r(u)||$(S)})}var C=y(D,2),w=y(C,2);B(()=>{Y(w,"form",s),w.disabled=!r(t)}),ce("click",C,v),b(k,E)}},$$legacy:!0}),k=>x(o,k),()=>r(o)),xt(e,"show",p),xt(e,"hide",v),Je({show:p,hide:v})}var jI=T('<label>Client ID</label> <input type="text" required/>',1),VI=T('<label>Team ID</label> <input type="text" required/>',1),UI=T('<label>Key ID</label> <input type="text" required/>',1),BI=T('<label><span class="txt">Duration (in seconds)</span> <i class="ri-information-line link-hint"></i></label> <input type="number" required/>',1),HI=T('<label>Private key</label> <textarea required rows="8"></textarea> <div class="help-block">The key is not stored on the server and it is used only for generating the signed JWT.</div>',1),WI=T('<form autocomplete="off"><div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <!></div></form>'),YI=T('<h4 class="center txt-break">Generate Apple client secret</h4>'),KI=T('<button type="button" class="btn btn-transparent">Close</button> <button type="submit"><i class="ri-key-line"></i> <span class="txt">Generate and set secret</span></button>',1);function JI(n,e){Ke(e,!1);const t=M(),i=Ut(),a="apple_secret_"+q.randomString(5),s=15777e3;let o=M(),l=M(),c=M(),u=M(),d=M(),f=M(),h=M(!1);function p(g={}){var k;x(l,g.clientId||""),x(c,g.teamId||""),x(u,g.keyId||""),x(d,g.privateKey||""),x(f,g.duration||s),ln({}),(k=r(o))==null||k.show()}function v(){var g;return(g=r(o))==null?void 0:g.hide()}async function m(){var g;x(h,!0);try{const k=await ze.settings.generateAppleClientSecret(r(l),r(c),r(u),r(d).trim(),r(f));x(h,!1),bn("Successfully generated client secret."),i("submit",k),(g=r(o))==null||g.hide()}catch(k){ze.error(k)}x(h,!1)}se(()=>{},()=>{x(t,!0)}),ht(),Ge();{let g=ae(()=>!r(h)),k=ae(()=>!r(h));gt(_n(n,{get overlayClose(){return r(g)},get escClose(){return r(k)},beforeHide:()=>!r(h),popup:!0,$$events:{show(_){ct.call(this,e,_)},hide(_){ct.call(this,e,_)}},children:(_,E)=>{var D=WI(),S=I(D),C=I(S),w=I(C);Ne(w,{class:"form-field required",name:"clientId",children:Ae,$$slots:{default:(U,H)=>{const z=ae(()=>H.uniqueId);var J=jI(),W=j(J),te=y(W,2);B(()=>{Y(W,"for",r(z)),Y(te,"id",r(z))}),_t(te,()=>r(l),de=>x(l,de)),b(U,J)}}});var $=y(C,2),O=I($);Ne(O,{class:"form-field required",name:"teamId",children:Ae,$$slots:{default:(U,H)=>{const z=ae(()=>H.uniqueId);var J=VI(),W=j(J),te=y(W,2);B(()=>{Y(W,"for",r(z)),Y(te,"id",r(z))}),_t(te,()=>r(c),de=>x(c,de)),b(U,J)}}});var P=y($,2),L=I(P);Ne(L,{class:"form-field required",name:"keyId",children:Ae,$$slots:{default:(U,H)=>{const z=ae(()=>H.uniqueId);var J=UI(),W=j(J),te=y(W,2);B(()=>{Y(W,"for",r(z)),Y(te,"id",r(z))}),_t(te,()=>r(u),de=>x(u,de)),b(U,J)}}});var N=y(P,2),V=I(N);Ne(V,{class:"form-field required",name:"duration",children:Ae,$$slots:{default:(U,H)=>{const z=ae(()=>H.uniqueId);var J=BI(),W=j(J),te=y(I(W),2);nt(te,(pe,_e)=>le==null?void 0:le(pe,_e),()=>({text:`Max ${s} seconds (~${s/(60*60*24*30)<<0} months).`,position:"top"}));var de=y(W,2);Y(de,"max",s),B(()=>{Y(W,"for",r(z)),Y(de,"id",r(z))}),_t(de,()=>r(f),pe=>x(f,pe)),b(U,J)}}});var R=y(N,2);Ne(R,{class:"form-field required",name:"privateKey",children:Ae,$$slots:{default:(U,H)=>{const z=ae(()=>H.uniqueId);var J=HI(),W=j(J),te=y(W,2);Y(te,"placeholder",`-----BEGIN PRIVATE KEY-----
...
-----END PRIVATE KEY-----`),B(()=>{Y(W,"for",r(z)),Y(te,"id",r(z))}),_t(te,()=>r(d),de=>x(d,de)),b(U,J)}}}),B(()=>Y(D,"id",a)),ce("submit",D,Et(()=>m())),b(_,D)},$$slots:{default:!0,header:(_,E)=>{var D=YI();b(_,D)},footer:(_,E)=>{var D=KI(),S=j(D),C=y(S,2);let w;B($=>{S.disabled=r(h),Y(C,"form",a),w=Ue(C,1,"btn btn-expanded",null,w,$),C.disabled=!r(t)||r(h)},[()=>({"btn-loading":r(h)})]),ce("click",S,v),b(_,D)}},$$legacy:!0}),_=>x(o,_),()=>r(o))}return xt(e,"show",p),xt(e,"hide",v),Je({show:p,hide:v})}var ZI=T('<button type="button"><i class="ri-key-line"></i> <span class="txt">Generate secret</span></button> <!>',1);function GI(n,e){Ke(e,!1);let t=re(e,"key",8,""),i=re(e,"config",28,()=>({})),a=M();Ge();var s=ZI(),o=j(s),l=y(o,2);gt(JI(l,{$$events:{submit:c=>{var u;i(i().clientSecret=((u=c.detail)==null?void 0:u.secret)||"",!0)}},$$legacy:!0}),c=>x(a,c),()=>r(a)),B(()=>Ue(o,1,`btn btn-sm btn-secondary btn-provider-${t()??""}`)),ce("click",o,()=>{var c;return(c=r(a))==null?void 0:c.show({clientId:i().clientId})}),b(n,s),Je()}var XI=T('<label>Auth URL</label> <input type="url" required/> <div class="help-block"></div>',1),QI=T('<label>Token URL</label> <input type="url" required/> <div class="help-block"></div>',1),eC=T('<div class="section-title">Azure AD endpoints</div> <!> <!>',1);function tC(n,e){Ke(e,!1);let t=re(e,"key",8,""),i=re(e,"config",28,()=>({}));Ge();var a=eC(),s=y(j(a),2);Ne(s,{class:"form-field required",get name(){return`${t()??""}.authURL`},children:Ae,$$slots:{default:(l,c)=>{const u=ae(()=>c.uniqueId);var d=XI(),f=j(d),h=y(f,2),p=y(h,2);p.textContent="Ex. https://login.microsoftonline.com/YOUR_DIRECTORY_TENANT_ID/oauth2/v2.0/authorize",B(()=>{Y(f,"for",r(u)),Y(h,"id",r(u))}),_t(h,()=>i().authURL,v=>i(i().authURL=v,!0)),b(l,d)}}});var o=y(s,2);Ne(o,{class:"form-field required",get name(){return`${t()??""}.tokenURL`},children:Ae,$$slots:{default:(l,c)=>{const u=ae(()=>c.uniqueId);var d=QI(),f=j(d),h=y(f,2),p=y(h,2);p.textContent="Ex. https://login.microsoftonline.com/YOUR_DIRECTORY_TENANT_ID/oauth2/v2.0/token",B(()=>{Y(f,"for",r(u)),Y(h,"id",r(u))}),_t(h,()=>i().tokenURL,v=>i(i().tokenURL=v,!0)),b(l,d)}}}),b(n,a),Je()}var nC=T("<i></i>"),iC=T('<!> <span class="txt"> </span>',1);function nm(n,e){Ke(e,!1);let t=re(e,"item",24,()=>({}));Ge();var i=iC(),a=j(i);{var s=c=>{var u=nC();B(()=>Ue(u,1,`icon ${F(t()),A(()=>t().icon)??""}`)),b(c,u)};X(a,c=>{F(t()),A(()=>t().icon)&&c(s)})}var o=y(a,2),l=I(o);B(()=>Ee(l,(F(t()),A(()=>t().label||t().name||t().title||t().id||t().value)))),b(n,i),Je()}function Vn(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["items","multiple","selected","labelComponent","optionComponent","selectionKey","keyOfSelected"]);Ke(e,!1);let a=re(e,"items",24,()=>[]),s=re(e,"multiple",8,!1),o=re(e,"selected",28,()=>s()?[]:void 0),l=re(e,"labelComponent",8,nm),c=re(e,"optionComponent",8,nm),u=re(e,"selectionKey",8,"value"),d=re(e,"keyOfSelected",28,()=>s()?[]:void 0),f=JSON.stringify(d());function h(v){v=q.toArray(v,!0);let m=[];for(let g of v){const k=q.findByKey(a(),u(),g);k&&m.push(k)}v.length&&!m.length||o(s()?m:m[0])}async function p(v){if(!a().length)return;let m=q.toArray(v,!0).map(k=>k[u()]),g=s()?m:m[0];JSON.stringify(g)!=f&&(d(g),f=JSON.stringify(d()))}se(()=>(F(a()),F(d())),()=>{a()&&h(d())}),se(()=>F(o()),()=>{p(o())}),ht(),Ge(),as(n,sn({get items(){return a()},get multiple(){return s()},get labelComponent(){return l()},get optionComponent(){return c()}},()=>i,{get selected(){return o()},set selected(v){o(v)},$$events:{show(v){ct.call(this,e,v)},hide(v){ct.call(this,e,v)},change(v){ct.call(this,e,v)}},$$slots:{afterOptions:(v,m)=>{var g=rt(),k=j(g);nn(k,e,"afterOptions",{},null),b(v,g)}},$$legacy:!0})),Je()}var rC=T("<input/>");function $o(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","separator","readonly","disabled"]);Ke(e,!1);const a=M();let s=re(e,"value",28,()=>[]),o=re(e,"separator",8,","),l=re(e,"readonly",8,null),c=re(e,"disabled",8,null);se(()=>(F(s()),F(o())),()=>{x(a,q.joinNonEmpty(s(),o()+" "))}),ht(),Ge();var u=rC();_s(u,()=>({type:(F(i),A(()=>i.type||"text")),value:r(a),disabled:c(),readonly:l(),...i})),ce("input",u,d=>{s(q.splitNonEmpty(d.target.value,o()))}),b(n,u),Je()}var aC=T('<label>Display name</label> <input type="text" required/>',1),sC=T('<label>Auth URL</label> <input type="url" required/>',1),oC=T('<label>Token URL</label> <input type="url" required/>',1),lC=T("<label>Fetch user info from</label> <!>",1),cC=T('<label>User info URL</label> <input type="url" required/>',1),uC=T('<div class="content"><!></div>'),dC=T('<label><span class="txt">JWKS verification URL</span> <i class="ri-information-line link-hint"></i></label> <input type="url"/>',1),fC=T('<label><span class="txt">Issuers</span> <i class="ri-information-line link-hint"></i></label> <!>',1),hC=T('<div class="content"><p class="txt-hint txt-sm m-b-xs"><em>Both fields are considered optional because the parsed <code>id_token</code> is a direct result of the trusted server code->token exchange response.</em></p> <!> <!></div>'),vC=T('<input type="checkbox"/> <label><span class="txt">Support PKCE</span> <i class="ri-information-line link-hint"></i></label>',1),mC=T('<!> <div class="section-title">Endpoints</div> <!> <!> <!> <div class="sub-panel m-b-base"><!></div> <!>',1);function pu(n,e){Ke(e,!1);let t=re(e,"key",8,""),i=re(e,"config",28,()=>({}));const a=[{label:"User info URL",value:!0},{label:"ID Token",value:!1}];let s=M(!!i().userInfoURL);q.isEmpty(i().pkce)&&i(i().pkce=!0,!0),i().displayName||i(i().displayName="OIDC",!0),i().extra||(i(i().extra={},!0),x(s,!0));function o(){r(s)?i(i().extra={},!0):(i(i().userInfoURL="",!0),i(i().extra=i().extra||{},!0))}se(()=>r(s),()=>{typeof r(s)!==void 0&&o()}),ht(),Ge();var l=mC(),c=j(l);Ne(c,{class:"form-field required",get name(){return`${t()??""}.displayName`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=aC(),S=j(D),C=y(S,2);B(()=>{Y(S,"for",r(E)),Y(C,"id",r(E))}),_t(C,()=>i().displayName,w=>i(i().displayName=w,!0)),b(k,D)}}});var u=y(c,4);Ne(u,{class:"form-field required",get name(){return`${t()??""}.authURL`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=sC(),S=j(D),C=y(S,2);B(()=>{Y(S,"for",r(E)),Y(C,"id",r(E))}),_t(C,()=>i().authURL,w=>i(i().authURL=w,!0)),b(k,D)}}});var d=y(u,2);Ne(d,{class:"form-field required",get name(){return`${t()??""}.tokenURL`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=oC(),S=j(D),C=y(S,2);B(()=>{Y(S,"for",r(E)),Y(C,"id",r(E))}),_t(C,()=>i().tokenURL,w=>i(i().tokenURL=w,!0)),b(k,D)}}});var f=y(d,2);Ne(f,{class:"form-field m-b-xs",children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=lC(),S=j(D),C=y(S,2);Vn(C,{get id(){return r(E)},get items(){return a},get keyOfSelected(){return r(s)},set keyOfSelected(w){x(s,w)},$$legacy:!0}),B(()=>Y(S,"for",r(E))),b(k,D)}}});var h=y(f,2),p=I(h);{var v=k=>{var _=uC(),E=I(_);Ne(E,{class:"form-field required",get name(){return`${t()??""}.userInfoURL`},children:Ae,$$slots:{default:(D,S)=>{const C=ae(()=>S.uniqueId);var w=cC(),$=j(w),O=y($,2);B(()=>{Y($,"for",r(C)),Y(O,"id",r(C))}),_t(O,()=>i().userInfoURL,P=>i(i().userInfoURL=P,!0)),b(D,w)}}}),Ct(3,_,()=>yn,()=>({delay:10,duration:150})),b(k,_)},m=k=>{var _=hC(),E=y(I(_),2);Ne(E,{class:"form-field m-b-xs",get name(){return`${t()??""}.extra.jwksURL`},children:Ae,$$slots:{default:(S,C)=>{const w=ae(()=>C.uniqueId);var $=dC(),O=j($),P=y(I(O),2);nt(P,(N,V)=>le==null?void 0:le(N,V),()=>({text:"URL to the public token verification keys.",position:"top"}));var L=y(O,2);B(()=>{Y(O,"for",r(w)),Y(L,"id",r(w))}),_t(L,()=>i().extra.jwksURL,N=>i(i().extra.jwksURL=N,!0)),b(S,$)}}});var D=y(E,2);Ne(D,{class:"form-field",get name(){return`${t()??""}.extra.issuers`},children:Ae,$$slots:{default:(S,C)=>{const w=ae(()=>C.uniqueId);var $=fC(),O=j($),P=y(I(O),2);nt(P,(N,V)=>le==null?void 0:le(N,V),()=>({text:"Comma separated list of accepted values for the iss token claim validation.",position:"top"}));var L=y(O,2);$o(L,{get id(){return r(w)},get value(){return i().extra.issuers},set value(N){i(i().extra.issuers=N,!0)},$$legacy:!0}),B(()=>Y(O,"for",r(w))),b(S,$)}}}),Ct(3,_,()=>yn,()=>({delay:10,duration:150})),b(k,_)};X(p,k=>{r(s)?k(v):k(m,!1)})}var g=y(h,2);Ne(g,{class:"form-field",get name(){return`${t()??""}.pkce`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=vC(),S=j(D),C=y(S,2),w=y(I(C),2);nt(w,($,O)=>le==null?void 0:le($,O),()=>({text:"Usually it should be safe to be always enabled as most providers will just ignore the extra query parameters if they don't support PKCE.",position:"right"})),B(()=>{Y(S,"id",r(E)),Y(C,"for",r(E))}),rn(S,()=>i().pkce,$=>i(i().pkce=$,!0)),b(k,D)}}}),b(n,l),Je()}var pC=T('<label>Auth URL</label> <input type="url"/>',1),gC=T('<label>Token URL</label> <input type="url"/>',1),bC=T('<label>User info URL</label> <input type="url"/>',1),yC=T('<div class="section-title"> </div> <!> <!> <!>',1);function gu(n,e){Ke(e,!1);const t=M();let i=re(e,"key",8,""),a=re(e,"config",28,()=>({})),s=re(e,"required",8,!1),o=re(e,"title",8,"Provider endpoints");se(()=>(F(s()),F(a())),()=>{var p;x(t,s()&&((p=a())==null?void 0:p.enabled))}),ht(),Ge();var l=yC(),c=j(l),u=I(c),d=y(c,2);{let p=ae(()=>r(t)?"required":"");Ne(d,{get class(){return`form-field ${r(p)??""}`},get name(){return`${i()??""}.authURL`},children:Ae,$$slots:{default:(v,m)=>{const g=ae(()=>m.uniqueId);var k=pC(),_=j(k),E=y(_,2);B(()=>{Y(_,"for",r(g)),Y(E,"id",r(g)),E.required=r(t)}),_t(E,()=>a().authURL,D=>a(a().authURL=D,!0)),b(v,k)}}})}var f=y(d,2);{let p=ae(()=>r(t)?"required":"");Ne(f,{get class(){return`form-field ${r(p)??""}`},get name(){return`${i()??""}.tokenURL`},children:Ae,$$slots:{default:(v,m)=>{const g=ae(()=>m.uniqueId);var k=gC(),_=j(k),E=y(_,2);B(()=>{Y(_,"for",r(g)),Y(E,"id",r(g)),E.required=r(t)}),_t(E,()=>a().tokenURL,D=>a(a().tokenURL=D,!0)),b(v,k)}}})}var h=y(f,2);{let p=ae(()=>r(t)?"required":"");Ne(h,{get class(){return`form-field ${r(p)??""}`},get name(){return`${i()??""}.userInfoURL`},children:Ae,$$slots:{default:(v,m)=>{const g=ae(()=>m.uniqueId);var k=bC(),_=j(k),E=y(_,2);B(()=>{Y(_,"for",r(g)),Y(E,"id",r(g)),E.required=r(t)}),_t(E,()=>a().userInfoURL,D=>a(a().userInfoURL=D,!0)),b(v,k)}}})}B(()=>Ee(u,o())),b(n,l),Je()}const hf=[{key:"apple",title:"Apple",logo:"apple.svg",optionsComponent:GI},{key:"google",title:"Google",logo:"google.svg"},{key:"microsoft",title:"Microsoft",logo:"microsoft.svg",optionsComponent:tC},{key:"yandex",title:"Yandex",logo:"yandex.svg"},{key:"facebook",title:"Facebook",logo:"facebook.svg"},{key:"instagram2",title:"Instagram",logo:"instagram.svg"},{key:"github",title:"GitHub",logo:"github.svg"},{key:"gitlab",title:"GitLab",logo:"gitlab.svg",optionsComponent:gu,optionsComponentProps:{title:"Self-hosted endpoints (optional)"}},{key:"bitbucket",title:"Bitbucket",logo:"bitbucket.svg"},{key:"gitee",title:"Gitee",logo:"gitee.svg"},{key:"gitea",title:"Gitea",logo:"gitea.svg",optionsComponent:gu,optionsComponentProps:{title:"Self-hosted endpoints (optional)"}},{key:"discord",title:"Discord",logo:"discord.svg"},{key:"twitter",title:"X/Twitter",logo:"twitter.svg"},{key:"kakao",title:"Kakao",logo:"kakao.svg"},{key:"vk",title:"VK",logo:"vk.svg"},{key:"linear",title:"Linear",logo:"linear.svg"},{key:"notion",title:"Notion",logo:"notion.svg"},{key:"monday",title:"monday.com",logo:"monday.svg"},{key:"box",title:"Box",logo:"box.svg"},{key:"spotify",title:"Spotify",logo:"spotify.svg"},{key:"trakt",title:"Trakt",logo:"trakt.svg"},{key:"twitch",title:"Twitch",logo:"twitch.svg"},{key:"patreon",title:"Patreon (v2)",logo:"patreon.svg"},{key:"strava",title:"Strava",logo:"strava.svg"},{key:"wakatime",title:"WakaTime",logo:"wakatime.svg"},{key:"livechat",title:"LiveChat",logo:"livechat.svg"},{key:"mailcow",title:"mailcow",logo:"mailcow.svg",optionsComponent:gu,optionsComponentProps:{required:!0}},{key:"planningcenter",title:"Planning Center",logo:"planningcenter.svg"},{key:"oidc",title:"OpenID Connect",logo:"oidc.svg",optionsComponent:pu},{key:"oidc2",title:"(2) OpenID Connect",logo:"oidc.svg",optionsComponent:pu},{key:"oidc3",title:"(3) OpenID Connect",logo:"oidc.svg",optionsComponent:pu}];var _C=T('<button type="button" class="btn btn-transparent btn-sm btn-hint p-l-xs p-r-xs m-l-10"><span class="txt">Clear</span></button>'),xC=T('<label class="m-l-10 txt-xl"><i class="ri-search-line"></i></label> <input type="text" placeholder="Search provider"/> <!>',1),wC=T("<img/>"),kC=T('<div class="col-6"><button type="button" class="provider-card handle"><figure class="provider-logo"><!></figure> <div class="content"><div class="title"> </div> <em class="txt-hint txt-sm m-r-auto"> </em></div></button></div>'),SC=T('<button type="button" class="btn btn-sm btn-secondary">Clear filter</button>'),TC=T('<div class="flex inline-flex"><span class="txt-hint">No providers to select.</span> <!></div>'),$C=T('<!> <div class="grid grid-sm"></div>',1),IC=T('<h4 class="center txt-break">Add OAuth2 provider</h4>'),CC=T('<button type="button" class="btn btn-transparent">Cancel</button>');function EC(n,e){Ke(e,!1);const t=Ut();let i=re(e,"disabled",24,()=>[]),a=M(),s=M(""),o=M([]);function l(){var h;f(),(h=r(a))==null||h.show()}function c(){var h;return(h=r(a))==null?void 0:h.hide()}function u(h){t("select",h),c()}function d(){const h=(r(s)||"").toLowerCase();return hf.filter(p=>!i().includes(p.key)&&(h==""||p.key.toLowerCase().includes(h)||p.title.toLowerCase().includes(h)))}function f(){x(s,"")}return se(()=>(r(s),F(i())),()=>{(r(s)!==-1||i()!==-1)&&x(o,d())}),ht(),Ge(),gt(_n(n,{btnClose:!1,$$events:{show(h){ct.call(this,e,h)},hide(h){ct.call(this,e,h)}},children:(h,p)=>{var v=$C(),m=j(v);Ne(m,{class:"searchbar m-b-sm",children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=xC(),S=j(D),C=y(S,2),w=y(C,2);{var $=O=>{var P=_C();Ct(3,P,()=>sa,()=>({duration:150,x:5})),ce("click",P,()=>x(s,"")),b(O,P)};X(w,O=>{r(s)!=""&&O($)})}B(()=>{Y(S,"for",r(E)),Y(C,"id",r(E))}),_t(C,()=>r(s),O=>x(s,O)),b(k,D)}}});var g=y(m,2);bt(g,5,()=>r(o),k=>k.key,(k,_)=>{var E=kC(),D=I(E),S=I(D),C=I(S);{var w=V=>{var R=wC();B(()=>{Y(R,"src",`${A(()=>"./")??""}images/oauth2/${r(_),A(()=>r(_).logo)??""}`),Y(R,"alt",`${r(_),A(()=>r(_).title)??""} logo`)}),b(V,R)};X(C,V=>{r(_),A(()=>r(_).logo)&&V(w)})}var $=y(S,2),O=I($),P=I(O),L=y(O,2),N=I(L);B(()=>{Ee(P,(r(_),A(()=>r(_).title))),Ee(N,(r(_),A(()=>r(_).key)))}),ce("click",D,()=>u(r(_))),b(k,E)},k=>{var _=TC(),E=y(I(_),2);{var D=S=>{var C=SC();ce("click",C,f),b(S,C)};X(E,S=>{r(s)!=""&&S(D)})}b(k,_)}),b(h,v)},$$slots:{default:!0,header:(h,p)=>{var v=IC();b(h,v)},footer:(h,p)=>{var v=CC();ce("click",v,c),b(h,v)}},$$legacy:!0}),h=>x(a,h),()=>r(a)),xt(e,"show",l),xt(e,"hide",c),Je({show:l,hide:c})}var OC=T('<input type="checkbox"/> <label>Enable</label>',1),DC=T("<img/>"),PC=T('<i class="ri-puzzle-line txt-sm txt-hint"></i>'),MC=T('<button type="button" class="btn btn-circle btn-hint btn-transparent" aria-label="Provider settings"><i class="ri-settings-4-line"></i></button>'),AC=T('<div class="col-lg-6"><div><figure class="provider-logo"><!></figure> <div class="content"><div class="title"> </div> <em class="txt-hint txt-sm m-r-auto"> </em></div> <!></div></div>'),LC=T('<i class="ri-arrow-up-s-line txt-sm"></i>'),NC=T('<i class="ri-arrow-down-s-line txt-sm"></i>'),RC=T("<label>OAuth2 full name</label> <!>",1),FC=T("<label>OAuth2 avatar</label> <!>",1),qC=T("<label>OAuth2 id</label> <!>",1),zC=T("<label>OAuth2 username</label> <!>",1),jC=T('<div class="block"><div class="grid grid-sm p-t-xs"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div></div>'),VC=T('<!> <div class="grid grid-sm"><!> <div class="col-lg-6"><button class="btn btn-block btn-lg btn-secondary txt-base"><i class="ri-add-line"></i> <span class="txt">Add provider</span></button></div></div> <button type="button"><strong class="txt"> </strong> <!></button> <!>',1),UC=T('<span> </span> <span class="label label-success">Enabled</span>',1),BC=T('<span class="label">Disabled</span>'),HC=T('<i class="ri-error-warning-fill txt-danger"></i>'),WC=T('<div class="inline-flex"><i class="ri-pass-expired-line"></i> <span class="txt">OAuth2</span></div> <div class="flex-fill"></div> <!> <!>',1),YC=T("<!> <!> <!>",1);function KC(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s=M(),o=M();let l=re(e,"collection",12);const c=["id","email","emailVisibility","verified","tokenKey","password"],u=["text","editor","url","email","json"],d=u.concat("file");let f=M(),h=M(),p=M(!1),v=M([]),m=M([]);function g(C=[]){var w,$;x(v,((w=C==null?void 0:C.filter(O=>u.includes(O.type)&&!c.includes(O.name)))==null?void 0:w.map(O=>O.name))||[]),x(m,(($=C==null?void 0:C.filter(O=>d.includes(O.type)&&!c.includes(O.name)))==null?void 0:$.map(O=>O.name))||[])}function k(C){for(let w of hf)if(w.key==C)return w;return null}se(()=>F(l()),()=>{g(l().fields)}),se(()=>F(l()),()=>{q.isEmpty(l().oauth2)&&l(l().oauth2={enabled:!1,mappedFields:{},providers:[]},!0)}),se(()=>a(),()=>{var C;x(s,!q.isEmpty((C=a())==null?void 0:C.oauth2))}),se(()=>F(l()),()=>{var C,w;x(o,((w=(C=l().oauth2)==null?void 0:C.providers)==null?void 0:w.length)||0)}),ht(),Ge();var _=YC(),E=j(_);Fr(E,{single:!0,children:(C,w)=>{var $=VC(),O=j($);Ne(O,{class:"form-field form-field-toggle",name:"oauth2.enabled",children:Ae,$$slots:{default:(pe,_e)=>{const ke=ae(()=>_e.uniqueId);var ve=OC(),Oe=j(ve),ue=y(Oe,2);B(()=>{Y(Oe,"id",r(ke)),Y(ue,"for",r(ke))}),rn(Oe,()=>l().oauth2.enabled,me=>l(l().oauth2.enabled=me,!0)),b(pe,ve)}}});var P=y(O,2),L=I(P);bt(L,3,()=>(F(l()),A(()=>l().oauth2.providers)),pe=>pe.name,(pe,_e,ke)=>{const ve=ae(()=>(r(_e),A(()=>k(r(_e).name))));var Oe=AC(),ue=I(Oe);let me;var he=I(ue),xe=I(he);{var ie=je=>{var Te=DC();B(()=>{Y(Te,"src",`${A(()=>"./")??""}images/oauth2/${F(r(ve)),A(()=>r(ve).logo)??""}`),Y(Te,"alt",`${F(r(ve)),A(()=>r(ve).title)??""} logo`)}),b(je,Te)},be=je=>{var Te=PC();b(je,Te)};X(xe,je=>{F(r(ve)),A(()=>{var Te;return(Te=r(ve))==null?void 0:Te.logo})?je(ie):je(be,!1)})}var oe=y(he,2),Q=I(oe),ne=I(Q),ye=y(Q,2),Se=I(ye),Ie=y(oe,2);{var Le=je=>{var Te=MC();nt(Te,(Ze,we)=>le==null?void 0:le(Ze,we),()=>({text:"Edit config",position:"left"})),qt(()=>ce("click",Te,()=>{var Ze;(Ze=r(h))==null||Ze.show(r(ve),r(_e),r(ke))})),b(je,Te)};X(Ie,je=>{r(ve)&&je(Le)})}B(je=>{me=Ue(ue,1,"provider-card",null,me,je),Ee(ne,(r(_e),F(r(ve)),A(()=>{var Te;return r(_e).displayName||((Te=r(ve))==null?void 0:Te.title)||"Custom"}))),Ee(Se,(r(_e),A(()=>r(_e).name)))},[()=>{var je,Te,Ze;return{error:!q.isEmpty((Ze=(Te=(je=a())==null?void 0:je.oauth2)==null?void 0:Te.providers)==null?void 0:Ze[r(ke)])}}]),b(pe,Oe)});var N=y(L,2),V=I(N),R=y(P,2),U=I(R),H=I(U),z=y(U,2);{var J=pe=>{var _e=LC();b(pe,_e)},W=pe=>{var _e=NC();b(pe,_e)};X(z,pe=>{r(p)?pe(J):pe(W,!1)})}var te=y(R,2);{var de=pe=>{var _e=jC(),ke=I(_e),ve=I(ke),Oe=I(ve);Ne(Oe,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.name",children:Ae,$$slots:{default:(oe,Q)=>{const ne=ae(()=>Q.uniqueId);var ye=RC(),Se=j(ye),Ie=y(Se,2);as(Ie,{get id(){return r(ne)},get items(){return r(v)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.name},set selected(Le){l(l().oauth2.mappedFields.name=Le,!0)},$$legacy:!0}),B(()=>Y(Se,"for",r(ne))),b(oe,ye)}}});var ue=y(ve,2),me=I(ue);Ne(me,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.avatarURL",children:Ae,$$slots:{default:(oe,Q)=>{const ne=ae(()=>Q.uniqueId);var ye=FC(),Se=j(ye),Ie=y(Se,2);as(Ie,{get id(){return r(ne)},get items(){return r(m)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.avatarURL},set selected(Le){l(l().oauth2.mappedFields.avatarURL=Le,!0)},$$legacy:!0}),B(()=>Y(Se,"for",r(ne))),b(oe,ye)}}});var he=y(ue,2),xe=I(he);Ne(xe,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.id",children:Ae,$$slots:{default:(oe,Q)=>{const ne=ae(()=>Q.uniqueId);var ye=qC(),Se=j(ye),Ie=y(Se,2);as(Ie,{get id(){return r(ne)},get items(){return r(v)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.id},set selected(Le){l(l().oauth2.mappedFields.id=Le,!0)},$$legacy:!0}),B(()=>Y(Se,"for",r(ne))),b(oe,ye)}}});var ie=y(he,2),be=I(ie);Ne(be,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.username",children:Ae,$$slots:{default:(oe,Q)=>{const ne=ae(()=>Q.uniqueId);var ye=zC(),Se=j(ye),Ie=y(Se,2);as(Ie,{get id(){return r(ne)},get items(){return r(v)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.username},set selected(Le){l(l().oauth2.mappedFields.username=Le,!0)},$$legacy:!0}),B(()=>Y(Se,"for",r(ne))),b(oe,ye)}}}),Ct(3,_e,()=>yn,()=>({duration:150})),b(pe,_e)};X(te,pe=>{r(p)&&pe(de)})}B(()=>{Ue(R,1,`m-t-25 btn btn-sm ${r(p)?"btn-secondary":"btn-hint btn-transparent"}`),Ee(H,`Optional ${F(l()),A(()=>l().name)??""} create fields map`)}),ce("click",V,()=>{var pe;return(pe=r(f))==null?void 0:pe.show()}),ce("click",R,()=>x(p,!r(p))),b(C,$)},$$slots:{default:!0,header:(C,w)=>{var $=WC(),O=y(j($),4);{var P=R=>{var U=UC(),H=j(U);let z;var J=I(H);B(W=>{z=Ue(H,1,"label",null,z,W),Ee(J,`${r(o)??""}
                ${r(o)==1?"provider":"providers"}`)},[()=>({"label-warning":!r(o),"label-info":r(o)>0})]),b(R,U)},L=R=>{var U=BC();b(R,U)};X(O,R=>{F(l()),A(()=>l().oauth2.enabled)?R(P):R(L,!1)})}var N=y(O,2);{var V=R=>{var U=HC();nt(U,(H,z)=>le==null?void 0:le(H,z),()=>({text:"Has errors",position:"left"})),Ct(3,U,()=>Bn,()=>({duration:150,start:.7})),b(R,U)};X(N,R=>{r(s)&&R(V)})}b(C,$)}}});var D=y(E,2);{let C=ae(()=>(F(l()),A(()=>{var w,$;return(($=(w=l().oauth2)==null?void 0:w.providers)==null?void 0:$.map(O=>O.name))||[]})));gt(EC(D,{get disabled(){return r(C)},$$events:{select:w=>{var $,O;r(h).show(w.detail,{},((O=($=l().oauth2)==null?void 0:$.providers)==null?void 0:O.length)||0)}},$$legacy:!0}),w=>x(f,w),()=>r(f))}var S=y(D,2);gt(zI(S,{$$events:{remove:C=>{const w=C.detail.uiOptions;q.removeByKey(l().oauth2.providers,"name",w.key),l(l().oauth2.providers=l().oauth2.providers,!0)},submit:C=>{const w=C.detail.uiOptions,$=C.detail.config;l(l().oauth2.providers=l().oauth2.providers||[],!0),q.pushOrReplaceByKey(l().oauth2.providers,Object.assign({name:w.key},$),"name"),l(l().oauth2.providers=l().oauth2.providers,!0)}},$$legacy:!0}),C=>x(h,C),()=>r(h)),b(n,_),Je(),i()}var JC=T('<i class="ri-information-line link-hint"></i>'),ZC=T('<input type="checkbox"/> <label>Enable</label> <!>',1),GC=T('<label>Duration (in seconds)</label> <input type="number" min="0" step="1" required/>',1),XC=T('<label>Generated password length</label> <input type="number" min="0" step="1" required/>',1),QC=T('<!> <div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>',1),eE=T('<span class="label label-success">Enabled</span>'),tE=T('<span class="label">Disabled</span>'),nE=T('<i class="ri-error-warning-fill txt-danger"></i>'),iE=T('<div class="inline-flex"><i class="ri-time-line"></i> <span class="txt">One-time password (OTP)</span></div> <div class="flex-fill"></div> <!> <!>',1);function rE(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s=M(),o=M();let l=re(e,"collection",12);se(()=>F(l()),()=>{var c,u;x(s,((c=l())==null?void 0:c.system)&&((u=l())==null?void 0:u.name)==="_superusers")}),se(()=>F(l()),()=>{q.isEmpty(l().otp)&&l(l().otp={enabled:!0,duration:300,length:8},!0)}),se(()=>a(),()=>{var c;x(o,!q.isEmpty((c=a())==null?void 0:c.otp))}),ht(),Ge(),Fr(n,{single:!0,children:(c,u)=>{var d=QC(),f=j(d);Ne(f,{class:"form-field form-field-toggle",name:"otp.enabled",children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=ZC(),S=j(D),C=y(S,2),w=y(C,2);{var $=O=>{var P=JC();nt(P,(L,N)=>le==null?void 0:le(L,N),()=>({text:"Superusers can have OTP only as part of Two-factor authentication.",position:"right"})),b(O,P)};X(w,O=>{r(s)&&O($)})}B(()=>{Y(S,"id",r(E)),Y(C,"for",r(E))}),rn(S,()=>l().otp.enabled,O=>l(l().otp.enabled=O,!0)),ce("change",S,O=>{r(s)&&l(l().mfa.enabled=O.target.checked,!0)}),b(k,D)}}});var h=y(f,2),p=I(h),v=I(p);Ne(v,{class:"form-field form-field-toggle required",name:"otp.duration",children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=GC(),S=j(D),C=y(S,2);B(()=>{Y(S,"for",r(E)),Y(C,"id",r(E))}),_t(C,()=>l().otp.duration,w=>l(l().otp.duration=w,!0)),b(k,D)}}});var m=y(p,2),g=I(m);Ne(g,{class:"form-field form-field-toggle required",name:"otp.length",children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=XC(),S=j(D),C=y(S,2);B(()=>{Y(S,"for",r(E)),Y(C,"id",r(E))}),_t(C,()=>l().otp.length,w=>l(l().otp.length=w,!0)),b(k,D)}}}),b(c,d)},$$slots:{default:!0,header:(c,u)=>{var d=iE(),f=y(j(d),4);{var h=g=>{var k=eE();b(g,k)},p=g=>{var k=tE();b(g,k)};X(f,g=>{F(l()),A(()=>l().otp.enabled)?g(h):g(p,!1)})}var v=y(f,2);{var m=g=>{var k=nE();nt(k,(_,E)=>le==null?void 0:le(_,E),()=>({text:"Has errors",position:"left"})),Ct(3,k,()=>Bn,()=>({duration:150,start:.7})),b(g,k)};X(v,g=>{r(o)&&g(m)})}b(c,d)}}}),Je(),i()}var aE=T('<i class="ri-information-line link-hint"></i>'),sE=T('<input type="checkbox"/> <label>Enable</label> <!>',1),oE=T('<label><span class="txt">Unique identity fields</span></label> <!>',1),lE=T("<!> <!>",1),cE=T('<span class="label label-success">Enabled</span>'),uE=T('<span class="label">Disabled</span>'),dE=T('<i class="ri-error-warning-fill txt-danger"></i>'),fE=T('<div class="inline-flex"><i class="ri-lock-password-line"></i> <span class="txt">Identity/Password</span></div> <div class="flex-fill"></div> <!> <!>',1);function hE(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s=M(),o=M();let l=re(e,"collection",12),c=M([]),u=M("");function d(){var p,v;x(c,[{value:"email"}]);const f=((p=l())==null?void 0:p.fields)||[],h=((v=l())==null?void 0:v.indexes)||[];x(u,h.join(""));for(let m of h){const g=q.parseIndex(m);if(!g.unique||g.columns.length!=1||g.columns[0].name=="email")continue;const k=f.find(_=>!_.hidden&&_.name.toLowerCase()==g.columns[0].name.toLowerCase());k&&r(c).push({value:k.name})}}se(()=>F(l()),()=>{var f,h;x(s,((f=l())==null?void 0:f.system)&&((h=l())==null?void 0:h.name)==="_superusers")}),se(()=>F(l()),()=>{var f;q.isEmpty((f=l())==null?void 0:f.passwordAuth)&&l(l().passwordAuth={enabled:!0,identityFields:["email"]},!0)}),se(()=>a(),()=>{var f;x(o,!q.isEmpty((f=a())==null?void 0:f.passwordAuth))}),se(()=>(F(l()),r(u)),()=>{l()&&r(u)!=l().indexes.join("")&&d()}),ht(),Ge(),Fr(n,{single:!0,children:(f,h)=>{var p=lE(),v=j(p);Ne(v,{class:"form-field form-field-toggle",name:"passwordAuth.enabled",children:Ae,$$slots:{default:(g,k)=>{const _=ae(()=>k.uniqueId);var E=sE(),D=j(E),S=y(D,2),C=y(S,2);{var w=$=>{var O=aE();nt(O,(P,L)=>le==null?void 0:le(P,L),()=>({text:"Superusers are required to have password auth enabled.",position:"right"})),b($,O)};X(C,$=>{r(s)&&$(w)})}B(()=>{Y(D,"id",r(_)),D.disabled=r(s),Y(S,"for",r(_))}),rn(D,()=>l().passwordAuth.enabled,$=>l(l().passwordAuth.enabled=$,!0)),b(g,E)}}});var m=y(v,2);Ne(m,{class:"form-field required m-0",name:"passwordAuth.identityFields",children:Ae,$$slots:{default:(g,k)=>{const _=ae(()=>k.uniqueId);var E=oE(),D=j(E),S=y(D,2);Vn(S,{get items(){return r(c)},multiple:!0,get keyOfSelected(){return l().passwordAuth.identityFields},set keyOfSelected(C){l(l().passwordAuth.identityFields=C,!0)},$$legacy:!0}),B(()=>Y(D,"for",r(_))),b(g,E)}}}),b(f,p)},$$slots:{default:!0,header:(f,h)=>{var p=fE(),v=y(j(p),4);{var m=E=>{var D=cE();b(E,D)},g=E=>{var D=uE();b(E,D)};X(v,E=>{F(l()),A(()=>l().passwordAuth.enabled)?E(m):E(g,!1)})}var k=y(v,2);{var _=E=>{var D=dE();nt(D,(S,C)=>le==null?void 0:le(S,C),()=>({text:"Has errors",position:"left"})),Ct(3,D,()=>Bn,()=>({duration:150,start:.7})),b(E,D)};X(k,E=>{r(o)&&E(_)})}b(f,p)}}}),Je(),i()}var vE=T('<div class="form-field-block"><input type="radio" name="template"/> <label> </label></div>'),mE=T("<label>Auth collection</label> <!>",1),pE=T('<label>To email address</label> <input type="email" required/>',1),gE=T('<form autocomplete="off"><!> <!> <!></form>'),bE=T('<h4 class="center txt-break">Send test email</h4>'),yE=T('<button type="button" class="btn btn-transparent">Close</button> <button type="submit"><i class="ri-mail-send-line"></i> <span class="txt">Send</span></button>',1);function Tb(n,e){Ke(e,!1);const t=M(),i=[],a=Ut(),s="email_test_"+q.randomString(5),o="last_email_test",l="email_test_request",c=[{label:"Verification",value:"verification"},{label:"Password reset",value:"password-reset"},{label:"Confirm email change",value:"email-change"},{label:"OTP",value:"otp"},{label:"Login alert",value:"login-alert"}];let u=M(),d=M(""),f=M(localStorage.getItem(o)),h=M(c[0].value),p=M(!1),v=null,m=M([]),g=M(!1),k=M(!1);function _(C="",w="",$=""){var O;ln({}),x(k,!1),x(d,C||""),r(d)||S(),x(f,w||localStorage.getItem(o)),x(h,$||c[0].value),(O=r(u))==null||O.show()}function E(){var C;return clearTimeout(v),(C=r(u))==null?void 0:C.hide()}async function D(){if(!(!r(t)||r(p)||!r(d))){x(p,!0),localStorage==null||localStorage.setItem(o,r(f)),clearTimeout(v),v=setTimeout(()=>{ze.cancelRequest(l),br("Test email send timeout.")},3e4);try{await ze.settings.testEmail(r(d),r(f),r(h),{$cancelKey:l}),bn("Successfully sent test email."),a("submit"),x(p,!1),await Nn(),E()}catch(C){x(p,!1),ze.error(C)}clearTimeout(v)}}async function S(){var C;x(k,!0),x(g,!0);try{x(m,await ze.collections.getFullList({filter:"type='auth'",sort:"+name",requestKey:s+"_collections_loading"})),x(d,((C=r(m)[0])==null?void 0:C.id)||""),x(g,!1)}catch(w){w.isAbort||(x(g,!1),ze.error(w))}}se(()=>(r(f),r(h),r(d)),()=>{x(t,!!r(f)&&!!r(h)&&!!r(d))}),ht(),Ge();{let C=ae(()=>!r(p)),w=ae(()=>!r(p));gt(_n(n,{class:"overlay-panel-sm email-test-popup",get overlayClose(){return r(C)},get escClose(){return r(w)},beforeHide:()=>!r(p),popup:!0,$$events:{show($){ct.call(this,e,$)},hide($){ct.call(this,e,$)}},children:($,O)=>{var P=gE(),L=I(P);Ne(L,{class:"form-field required",name:"template",children:Ae,$$slots:{default:(U,H)=>{const z=ae(()=>H.uniqueId);var J=rt(),W=j(J);bt(W,1,()=>c,te=>te.value,(te,de)=>{var pe=vE(),_e=I(pe),ke,ve=y(_e,2),Oe=I(ve);B(()=>{Y(_e,"id",(F(r(z)),r(de),A(()=>r(z)+r(de).value))),ke!==(ke=(r(de),A(()=>r(de).value)))&&(_e.value=(_e.__value=(r(de),A(()=>r(de).value)))??""),Y(ve,"for",(F(r(z)),r(de),A(()=>r(z)+r(de).value))),Ee(Oe,(r(de),A(()=>r(de).label)))}),h_(i,[],_e,()=>(r(de),A(()=>r(de).value),r(h)),ue=>x(h,ue)),b(te,pe)}),b(U,J)}}});var N=y(L,2);{var V=U=>{Ne(U,{class:"form-field required",name:"collection",children:Ae,$$slots:{default:(H,z)=>{const J=ae(()=>z.uniqueId);var W=mE(),te=j(W),de=y(te,2);{let pe=ae(()=>r(g)?"Loading auth collections...":"Select auth collection");Vn(de,{get id(){return r(J)},get selectPlaceholder(){return r(pe)},noOptionsText:"No auth collections found",selectionKey:"id",get items(){return r(m)},get keyOfSelected(){return r(d)},set keyOfSelected(_e){x(d,_e)},$$legacy:!0})}B(()=>Y(te,"for",r(J))),b(H,W)}}})};X(N,U=>{r(k)&&U(V)})}var R=y(N,2);Ne(R,{class:"form-field required m-0",name:"email",children:Ae,$$slots:{default:(U,H)=>{const z=ae(()=>H.uniqueId);var J=pE(),W=j(J),te=y(W,2);Gi(te,!0),B(()=>{Y(W,"for",r(z)),Y(te,"id",r(z))}),_t(te,()=>r(f),de=>x(f,de)),b(U,J)}}}),B(()=>Y(P,"id",s)),ce("submit",P,Et(()=>D())),b($,P)},$$slots:{default:!0,header:($,O)=>{var P=bE();b($,P)},footer:($,O)=>{var P=yE(),L=j(P),N=y(L,2);let V;B(R=>{L.disabled=r(p),Y(N,"form",s),V=Ue(N,1,"btn btn-expanded",null,V,R),N.disabled=!r(t)||r(p)},[()=>({"btn-loading":r(p)})]),ce("click",L,E),b($,P)}},$$legacy:!0}),$=>x(u,$),()=>r(u))}return xt(e,"show",_),xt(e,"hide",E),Je({show:_,hide:E})}var _E=T('<input type="checkbox"/> <label>Send email alert for new logins</label>',1),xE=T('<h4 class="section-title"><div class="flex"><span class="txt">Auth methods</span> <div class="m-l-auto handle"><!></div></div></h4> <div class="accordions m-b-35"><!> <!> <!> <!></div> <h4 class="section-title"><span class="txt">Mail templates</span> <button type="button" class="btn btn-xs m-l-auto btn-secondary">Send test email</button></h4> <div class="accordions m-b-35"><div class="accordions"></div></div> <h4 class="section-title">Other</h4> <div class="accordions m-b-base"><!></div> <!>',1);function wE(n,e){Ke(e,!1);const t=M(),i=M(),a=M(),s=M(),o=M(),l=M();let c=re(e,"collection",12),u=M([]),d=M();se(()=>F(c()),()=>{x(t,c().system&&c().name==="_superusers")}),se(()=>F(c()),()=>{var V;typeof((V=c().otp)==null?void 0:V.emailTemplate)>"u"&&(c(c().otp=c().otp||{},!0),c(c().otp.emailTemplate={},!0))}),se(()=>F(c()),()=>{var V;typeof((V=c().authAlert)==null?void 0:V.emailTemplate)>"u"&&(c(c().authAlert=c().authAlert||{},!0),c(c().authAlert.emailTemplate={},!0))}),se(()=>F(c()),()=>{x(i,{key:"resetPasswordTemplate",label:"Default Password reset email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().resetPasswordTemplate})}),se(()=>F(c()),()=>{x(a,{key:"verificationTemplate",label:"Default Verification email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().verificationTemplate})}),se(()=>F(c()),()=>{x(s,{key:"confirmEmailChangeTemplate",label:"Default Confirm email change email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().confirmEmailChangeTemplate})}),se(()=>F(c()),()=>{x(o,{key:"otp.emailTemplate",label:"Default OTP email template",placeholders:["APP_NAME","APP_URL","RECORD:*","OTP","OTP_ID"],config:c().otp.emailTemplate})}),se(()=>F(c()),()=>{x(l,{key:"authAlert.emailTemplate",label:"Default Login alert email template",placeholders:["APP_NAME","APP_URL","RECORD:*"],config:c().authAlert.emailTemplate})}),se(()=>(r(t),r(i),r(o),r(l),r(a),r(s)),()=>{x(u,r(t)?[r(i),r(o),r(l)]:[r(a),r(i),r(s),r(o),r(l)])}),ht(),Ge();var f=xE(),h=j(f),p=I(h),v=y(I(p),2),m=I(v);Ne(m,{class:"form-field form-field-sm form-field-toggle m-0",name:"authAlert.enabled",inlineError:!0,children:Ae,$$slots:{default:(V,R)=>{const U=ae(()=>R.uniqueId);var H=_E(),z=j(H),J=y(z,2);B(()=>{Y(z,"id",r(U)),Y(J,"for",r(U))}),rn(z,()=>c().authAlert.enabled,W=>c(c().authAlert.enabled=W,!0)),b(V,H)}}});var g=y(h,2),k=I(g);hE(k,{get collection(){return c()},set collection(V){c(V)},$$legacy:!0});var _=y(k,2);{var E=V=>{KC(V,{get collection(){return c()},set collection(R){c(R)},$$legacy:!0})};X(_,V=>{r(t)||V(E)})}var D=y(_,2);rE(D,{get collection(){return c()},set collection(V){c(V)},$$legacy:!0});var S=y(D,2);bI(S,{get collection(){return c()},set collection(V){c(V)},$$legacy:!0});var C=y(g,2),w=y(I(C),2),$=y(C,2),O=I($);bt(O,5,()=>r(u),V=>V.key,(V,R,U)=>{{let H=ae(()=>(r(R),A(()=>{var z;return(z=r(R))==null?void 0:z.placeholders})));X$(V,{single:!0,get key(){return r(R),A(()=>r(R).key)},get title(){return r(R),A(()=>r(R).label)},get placeholders(){return r(H)},get config(){return r(R).config},set config(z){r(R).config=z,$a(()=>r(u))},$$legacy:!0})}});var P=y($,4),L=I(P);aI(L,{get collection(){return c()},set collection(V){c(V)},$$legacy:!0});var N=y(P,2);gt(Tb(N,{$$legacy:!0}),V=>x(d,V),()=>r(d)),ce("click",w,()=>{var V;return(V=r(d))==null?void 0:V.show(c().id)}),b(n,f),Je()}var kE=T("<div><!></div>");function $s(n,e){Ke(e,!1);const t=Ut();let i=re(e,"index",8),a=re(e,"list",28,()=>[]),s=re(e,"group",8,"default"),o=re(e,"disabled",8,!1),l=re(e,"dragHandleClass",8,""),c=M(!1),u=M(!1);function d(m,g){if(!(!m||o())){if(l()&&!m.target.classList.contains(l())){x(u,!1),x(c,!1),m.preventDefault();return}x(c,!0),m.dataTransfer.effectAllowed="move",m.dataTransfer.dropEffect="move",m.dataTransfer.setData("text/plain",JSON.stringify({index:g,group:s()})),t("drag",m)}}function f(m,g){if(x(u,!1),x(c,!1),!m||o())return;m.dataTransfer.dropEffect="move";let k={};try{k=JSON.parse(m.dataTransfer.getData("text/plain"))}catch{}if(k.group!=s())return;const _=k.index<<0;_<g?(a().splice(g+1,0,a()[_]),a().splice(_,1)):(a().splice(g,0,a()[_]),a().splice(_+1,1)),a(a()),t("sort",{oldIndex:_,newIndex:g,list:a()})}Ge();var h=kE();let p;var v=I(h);nn(v,e,"default",{get dragging(){return r(c)},get dragover(){return r(u)}},null),B(m=>{Y(h,"draggable",!o()),p=Ue(h,1,"draggable svelte-19c69j7",null,p,m)},[()=>({dragging:r(c),dragover:r(u)})]),ce("dragover",h,Et(()=>{x(u,!0)})),ce("dragleave",h,Et(()=>{x(u,!1)})),ce("dragend",h,()=>{x(u,!1),x(c,!1)}),ce("dragstart",h,m=>d(m,i())),ce("drop",h,m=>f(m,i())),b(n,h),Je()}var SE=T('<input type="checkbox"/> <label>Unique</label>',1),TE=T('<textarea disabled rows="7" placeholder="Loading..."></textarea>'),$E=T('<button type="button"> </button>'),IE=T('<div class="inline-flex gap-10"><span class="txt txt-hint">Presets</span> <!></div>'),CE=T("<!> <!> <!>",1),EE=T("<h4> </h4>"),OE=T('<button type="button" class="btn btn-sm btn-circle btn-hint btn-transparent m-r-auto"><i class="ri-delete-bin-7-line"></i></button>'),DE=T('<!> <button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button"><span class="txt">Set index</span></button>',1);function PE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["show","hide","collection"]);Ke(e,!1);const a=M(),s=M(),o=M(),l=Ut();let c=re(e,"collection",8),u=M(),d=M(""),f=M(""),h=M(""),p=M(),v=M(!1);function m(S,C){var w;return x(h,q.isEmpty(C)?"":C),x(d,S||k()),x(f,r(d)),(w=r(u))==null?void 0:w.show()}function g(){var S;return(S=r(u))==null?void 0:S.hide()}function k(){var C;const S=q.parseIndex("");return S.tableName=((C=c())==null?void 0:C.name)||"",q.buildIndex(S)}function _(){l("remove",r(d)),g()}function E(){r(o).length&&(l("submit",{old:r(d),new:r(f)}),g())}function D(S){const C=q.clone(r(s)),w=C.columns.find($=>$.name==S);w?q.removeByValue(C.columns,w):q.pushUnique(C.columns,{name:S}),x(f,q.buildIndex(C))}return vn(async()=>{x(v,!0);try{x(p,(await Wt(async()=>{const{default:S}=await import("./CodeEditor-_7ftkqqn.js");return{default:S}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(S){console.warn(S)}x(v,!1)}),se(()=>F(c()),()=>{var S,C,w;x(a,((w=(C=(S=c())==null?void 0:S.fields)==null?void 0:C.filter($=>!$.toDelete&&$.name!="id"))==null?void 0:w.map($=>$.name))||[])}),se(()=>r(f),()=>{x(s,q.parseIndex(r(f)))}),se(()=>r(s),()=>{var S;x(o,((S=r(s).columns)==null?void 0:S.map(C=>C.name))||[])}),ht(),Ge(),gt(_n(n,sn({popup:!0},()=>i,{$$events:{hide(S){ct.call(this,e,S)},show(S){ct.call(this,e,S)}},children:(S,C)=>{var w=CE(),$=j(w);Ne($,{class:"form-field form-field-toggle m-b-sm",children:Ae,$$slots:{default:(N,V)=>{const R=ae(()=>V.uniqueId);var U=SE(),H=j(U),z=y(H,2);B(()=>{Y(H,"id",r(R)),ta(H,(r(s),A(()=>r(s).unique))),Y(z,"for",r(R))}),ce("change",H,J=>{var W;dt(s,r(s).unique=J.target.checked),dt(s,r(s).tableName=r(s).tableName||((W=c())==null?void 0:W.name)),x(f,q.buildIndex(r(s)))}),b(N,U)}}});var O=y($,2);{let N=ae(()=>`indexes.${r(h)||""}`);Ne(O,{class:"form-field required m-b-sm",get name(){return r(N)},children:Ae,$$slots:{default:(V,R)=>{const U=ae(()=>R.uniqueId);var H=rt(),z=j(H);{var J=te=>{var de=TE();b(te,de)},W=te=>{var de=rt(),pe=j(de);{let _e=ae(()=>(F(c()),A(()=>{var ke;return`eg. CREATE INDEX idx_test on ${(ke=c())==null?void 0:ke.name} (created)`})));wi(pe,()=>r(p),(ke,ve)=>{ve(ke,{get id(){return r(U)},get placeholder(){return r(_e)},language:"sql-create-index",minHeight:"85",get value(){return r(f)},set value(Oe){x(f,Oe)},$$legacy:!0})})}b(te,de)};X(z,te=>{r(v)?te(J):te(W,!1)})}b(V,H)}}})}var P=y(O,2);{var L=N=>{var V=IE(),R=y(I(V),2);bt(R,1,()=>r(a),Nt,(U,H)=>{var z=$E();let J;var W=I(z);B(te=>{J=Ue(z,1,"label link-primary",null,J,te),Ee(W,r(H))},[()=>({"label-info":r(o).includes(r(H))})]),ce("click",z,()=>D(r(H))),b(U,z)}),b(N,V)};X(P,N=>{r(a),A(()=>r(a).length>0)&&N(L)})}b(S,w)},$$slots:{default:!0,header:(S,C)=>{var w=EE(),$=I(w);B(()=>Ee($,`${r(d)?"Update":"Create"} index`)),b(S,w)},footer:(S,C)=>{var w=DE(),$=j(w);{var O=V=>{var R=OE();nt(R,(U,H)=>le==null?void 0:le(U,H),()=>({text:"Delete",position:"top"})),qt(()=>ce("click",R,()=>_())),b(V,R)};X($,V=>{r(d)!=""&&V(O)})}var P=y($,2),L=y(P,2);let N;B(V=>N=Ue(L,1,"btn",null,N,V),[()=>({"btn-disabled":r(o).length<=0})]),ce("click",P,()=>g()),ce("click",L,()=>E()),b(S,w)}},$$legacy:!0})),S=>x(u,S),()=>r(u)),xt(e,"show",m),xt(e,"hide",g),Je({show:m,hide:g})}var ME=T('<i class="ri-error-warning-fill txt-danger"></i>'),AE=T("<strong>Unique:</strong>"),LE=T('<button type="button"><!> <span class="txt"> </span></button>'),NE=T('<div class="section-title"> <!></div> <div class="indexes-list svelte-167lbwu"><!> <button type="button" class="btn btn-xs btn-transparent btn-pill btn-outline"><span class="txt">+</span> <span class="txt">New index</span></button></div> <!>',1);function RE(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t);let s=re(e,"collection",12),o=M();function l(k,_){for(let E=0;E<s().indexes.length;E++)if(s().indexes[E]==k){s(s().indexes[E]=_,!0),ri("indexes."+E);return}s().indexes.push(_),s(s().indexes=s().indexes,!0)}Ge();var c=NE(),u=j(c),d=I(u),f=y(d);{var h=k=>{var _=ME();nt(_,(E,D)=>le==null?void 0:le(E,D),()=>{var E;return(E=a())==null?void 0:E.indexes.message}),Ct(3,_,()=>Bn,()=>({duration:150})),b(k,_)};X(f,k=>{a(),A(()=>{var _,E;return(E=(_=a())==null?void 0:_.indexes)==null?void 0:E.message})&&k(h)})}var p=y(u,2),v=I(p);bt(v,1,()=>(F(s()),A(()=>{var k;return((k=s())==null?void 0:k.indexes)||[]})),Nt,(k,_,E)=>{const D=ae(()=>(F(q),r(_),A(()=>q.parseIndex(r(_)))));var S=LE(),C=I(S);{var w=P=>{var L=AE();b(P,L)};X(C,P=>{F(r(D)),A(()=>r(D).unique)&&P(w)})}var $=y(C,2),O=I($);nt(S,(P,L)=>le==null?void 0:le(P,L),()=>{var P,L;return((L=(P=a().indexes)==null?void 0:P[E])==null?void 0:L.message)||""}),qt(()=>ce("click",S,()=>{var P;return(P=r(o))==null?void 0:P.show(r(_),E)})),B(P=>{Ue(S,1,`label link-primary ${a(),A(()=>{var L,N;return(N=(L=a().indexes)==null?void 0:L[E])!=null&&N.message?"label-danger":""})??""}`,"svelte-167lbwu"),Ee(O,P)},[()=>(F(r(D)),A(()=>{var P;return(P=r(D).columns)==null?void 0:P.map(L=>L.name).join(", ")}))]),b(k,S)});var m=y(v,2),g=y(p,2);gt(PE(g,{get collection(){return s()},set collection(k){s(k)},$$events:{remove:k=>{for(let _=0;_<s().indexes.length;_++)if(s().indexes[_]==k.detail){s().indexes.splice(_,1),ri("indexes."+_);break}s(s().indexes=s().indexes,!0)},submit:k=>{var _;(_=a().indexes)!=null&&_.message&&ri("indexes"),l(k.detail.old,k.detail.new)}},$$legacy:!0}),k=>x(o,k),()=>r(o)),B(()=>Ee(d,`Unique constraints and indexes (${F(s()),A(()=>{var k,_;return((_=(k=s())==null?void 0:k.indexes)==null?void 0:_.length)||0})??""}) `)),ce("click",m,()=>{var k;return(k=r(o))==null?void 0:k.show()}),b(n,c),Je(),i()}var FE=T('<button type="button" role="menuitem" class="dropdown-item svelte-1gz9b6p"><i aria-hidden="true"></i> <span class="txt"> </span></button>'),qE=T('<div tabindex="0" role="button"><i class="ri-add-line" aria-hidden="true"></i> <div class="txt">New field</div> <!></div>');function zE(n,e){Ke(e,!1);let t=re(e,"class",8,"");const i=Ut(),a=[{label:"Plain text",value:"text",icon:q.getFieldTypeIcon("text")},{label:"Rich editor",value:"editor",icon:q.getFieldTypeIcon("editor")},{label:"Number",value:"number",icon:q.getFieldTypeIcon("number")},{label:"Bool",value:"bool",icon:q.getFieldTypeIcon("bool")},{label:"Email",value:"email",icon:q.getFieldTypeIcon("email")},{label:"URL",value:"url",icon:q.getFieldTypeIcon("url")},{label:"Datetime",value:"date",icon:q.getFieldTypeIcon("date")},{label:"Autodate",value:"autodate",icon:q.getFieldTypeIcon("autodate")},{label:"Select",value:"select",icon:q.getFieldTypeIcon("select")},{label:"File",value:"file",icon:q.getFieldTypeIcon("file")},{label:"Relation",value:"relation",icon:q.getFieldTypeIcon("relation")},{label:"JSON",value:"json",icon:q.getFieldTypeIcon("json")},{label:"Geo Point",value:"geoPoint",icon:q.getFieldTypeIcon("geoPoint")}];function s(c){i("select",c)}Ge();var o=qE(),l=y(I(o),4);ii(l,{class:"dropdown field-types-dropdown",children:(c,u)=>{var d=rt(),f=j(d);bt(f,1,()=>a,Nt,(h,p)=>{var v=FE(),m=I(v),g=y(m,2),k=I(g);B(()=>{Ue(m,1,`icon ${r(p),A(()=>r(p).icon)??""}`,"svelte-1gz9b6p"),Ee(k,(r(p),A(()=>r(p).label)))}),ce("click",v,()=>s(r(p).value)),b(h,v)}),b(c,d)},$$slots:{default:!0}}),B(()=>Ue(o,1,`field-types-btn ${t()??""}`,"svelte-1gz9b6p")),b(n,o),Je()}let bu=[];var jE=T('<div class="drag-handle-wrapper" aria-label="Sort"><span class="drag-handle"></span></div>'),VE=T('<span class="label label-success"> </span>'),UE=T('<span class="label label-danger">Hidden</span>'),BE=T('<div class="field-labels"><!> <!></div>  <div><i></i></div> <input type="text" required spellcheck="false" placeholder="Field name" title="System field"/>',1),HE=T('<span class="separator"></span>'),WE=T('<button type="button" class="btn btn-sm btn-circle btn-success btn-transparent options-trigger" aria-label="Restore"><i class="ri-restart-line"></i></button>'),YE=T('<button type="button"><i class="ri-settings-3-line"></i></button>'),KE=T('<input type="checkbox"/> <label><span class="txt"> </span> <i class="ri-information-line link-hint"></i></label>',1),JE=T('<input type="checkbox"/> <label><span class="txt">Hidden</span> <i class="ri-information-line link-hint"></i></label>',1),ZE=T('<input type="checkbox"/> <label><span class="txt">Presentable</span> <i></i></label>',1),GE=T('<button type="button" class="dropdown-item" role="menuitem"><span class="txt">Remove</span></button>'),XE=T('<button type="button" class="dropdown-item" role="menuitem"><span class="txt">Duplicate</span></button> <!>',1),QE=T('<div class="m-l-auto txt-right"><div class="inline-flex flex-gap-sm flex-nowrap"><div tabindex="0" role="button" title="More field options" class="btn btn-circle btn-sm btn-transparent"><i class="ri-more-line" aria-hidden="true"></i> <!></div></div></div>'),eO=T('<div class="schema-field-options"><div class="hidden-empty m-b-sm"><!></div> <div class="schema-field-options-footer"><!> <!> <!> <!> <!></div></div>'),tO=T('<div><div class="schema-field-header"><!> <!> <!> <!></div> <!></div>');function ki(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s=M(),o=M(),l=M(),c=M(),u="f_"+q.randomString(8),d=Ut(),f={bool:"Nonfalsey",number:"Nonzero"},h=["password","tokenKey","id","autodate"],p=["password","tokenKey","id","email"],v=["password","tokenKey"];let m=re(e,"key",8,""),g=re(e,"field",28,()=>q.initSchemaField()),k=re(e,"draggable",8,!0),_=re(e,"collection",24,()=>({})),E=M(),D=M(!1);function S(){g().id?g(g()._toDelete=!0,!0):(P(),d("remove"))}function C(){g(g()._toDelete=!1,!0),ln({})}function w(){g()._toDelete||(P(),d("duplicate"))}function $(ve){return q.slugify(ve)}function O(){x(D,!0),N()}function P(){x(D,!1)}function L(){r(D)?P():O()}function N(){for(let ve of bu)ve.id!=u&&ve.collapse()}vn(()=>{var ve;return bu.push({id:u,collapse:P}),g().onMountSelect&&(g(g().onMountSelect=!1,!0),(ve=r(E))==null||ve.select()),()=>{q.removeByKey(bu,"id",u)}}),se(()=>F(_()),()=>{var ve;x(s,((ve=_())==null?void 0:ve.type)=="auth")}),se(()=>F(g()),()=>{g()._toDelete&&g()._originalName&&g().name!==g()._originalName&&g(g().name=g()._originalName,!0)}),se(()=>F(g()),()=>{!g()._originalName&&g().name&&g(g()._originalName=g().name,!0)}),se(()=>F(g()),()=>{typeof g()._toDelete>"u"&&g(g()._toDelete=!1,!0)}),se(()=>F(g()),()=>{g().required&&g(g().nullable=!1,!0)}),se(()=>F(g()),()=>{x(o,!g()._toDelete)}),se(()=>(a(),F(m())),()=>{x(l,!q.isEmpty(q.getNestedVal(a(),`fields.${m()}`)))}),se(()=>F(g()),()=>{var ve;x(c,f[(ve=g())==null?void 0:ve.type]||"Nonempty")}),ht(),Ge();var V=tO();let R;var U=I(V),H=I(U);{var z=ve=>{var Oe=jE();Y(Oe,"draggable",!0),b(ve,Oe)};X(H,ve=>{r(o)&&k()&&ve(z)})}var J=y(H,2);{let ve=ae(()=>r(o)?"":"disabled");Ne(J,{get class(){return`form-field required m-0 ${r(ve)??""}`},get name(){return`fields.${m()??""}.name`},inlineError:!0,children:(Oe,ue)=>{var me=BE(),he=j(me),xe=I(he);{var ie=Ie=>{var Le=VE(),je=I(Le);B(()=>Ee(je,r(c))),b(Ie,Le)};X(xe,Ie=>{F(g()),A(()=>g().required)&&Ie(ie)})}var be=y(xe,2);{var oe=Ie=>{var Le=UE();b(Ie,Le)};X(be,Ie=>{F(g()),A(()=>g().hidden)&&Ie(oe)})}var Q=y(he,2);let ne;var ye=I(Q);nt(Q,(Ie,Le)=>le==null?void 0:le(Ie,Le),()=>g().type+(g().system?" (system)":"")),qt(()=>ce("click",Q,()=>{var Ie;return(Ie=r(E))==null?void 0:Ie.focus()}));var Se=y(Q,2);gt(Se,Ie=>x(E,Ie),()=>r(E)),B((Ie,Le)=>{ne=Ue(Q,1,"form-field-addon prefix field-type-icon",null,ne,Ie),Ue(ye,1,Le),Se.disabled=(r(o),F(g()),A(()=>!r(o)||g().system)),Un(Se,(F(g()),A(()=>g().name)))},[()=>({"txt-disabled":!r(o)||g().system}),()=>En((F(q),F(g()),A(()=>q.getFieldTypeIcon(g().type))))]),ce("input",Se,Ie=>{const Le=g().name;g(g().name=$(Ie.target.value),!0),Ie.target.value=g().name,d("rename",{oldName:Le,newName:g().name})}),b(Oe,me)},$$slots:{default:!0}})}var W=y(J,2);nn(W,e,"default",{get interactive(){return r(o)},get hasErrors(){return r(l)}},ve=>{var Oe=HE();b(ve,Oe)});var te=y(W,2);{var de=ve=>{var Oe=WE();nt(Oe,(ue,me)=>le==null?void 0:le(ue,me),()=>"Restore"),qt(()=>ce("click",Oe,C)),b(ve,Oe)},pe=ve=>{var Oe=rt(),ue=j(Oe);{var me=he=>{var xe=YE();let ie;B(be=>{Y(xe,"aria-label",`Toggle ${F(g()),A(()=>g().name)??""} field options`),ie=Ue(xe,1,`btn btn-sm btn-circle options-trigger ${r(D)?"btn-secondary":"btn-transparent"}`,null,ie,be),Y(xe,"aria-expanded",r(D))},[()=>({"btn-hint":!r(D)&&!r(l),"btn-danger":r(l)})]),ce("click",xe,L),b(he,xe)};X(ue,he=>{r(o)&&he(me)},!0)}b(ve,Oe)};X(te,ve=>{F(g()),A(()=>g()._toDelete)?ve(de):ve(pe,!1)})}var _e=y(U,2);{var ke=ve=>{var Oe=eO(),ue=I(Oe),me=I(ue);nn(me,e,"options",{get interactive(){return r(o)},get hasErrors(){return r(l)}},null);var he=y(ue,2),xe=I(he);{var ie=Le=>{Ne(Le,{class:"form-field form-field-toggle",name:"requried",children:Ae,$$slots:{default:(je,Te)=>{const Ze=ae(()=>Te.uniqueId);var we=KE(),Re=j(we),Me=y(Re,2),Xe=I(Me),Be=I(Xe),Pe=y(Xe,2);nt(Pe,(He,Fe)=>le==null?void 0:le(He,Fe),()=>({text:`Requires the field value NOT to be ${q.zeroDefaultStr(g())}.`})),B(()=>{Y(Re,"id",r(Ze)),Y(Me,"for",r(Ze)),Ee(Be,r(c))}),rn(Re,()=>g().required,He=>g(g().required=He,!0)),b(je,we)}}})};X(xe,Le=>{F(g()),r(s),A(()=>!g().primaryKey&&g().type!="autodate"&&(!r(s)||!h.includes(g().name)))&&Le(ie)})}var be=y(xe,2);{var oe=Le=>{Ne(Le,{class:"form-field form-field-toggle",name:"hidden",children:Ae,$$slots:{default:(je,Te)=>{const Ze=ae(()=>Te.uniqueId);var we=JE(),Re=j(we),Me=y(Re,2),Xe=y(I(Me),2);nt(Xe,(Be,Pe)=>le==null?void 0:le(Be,Pe),()=>({text:"Hide from the JSON API response and filters."})),B(()=>{Y(Re,"id",r(Ze)),Y(Me,"for",r(Ze))}),rn(Re,()=>g().hidden,Be=>g(g().hidden=Be,!0)),ce("change",Re,Be=>{Be.target.checked&&g(g().presentable=!1,!0)}),b(je,we)}}})};X(be,Le=>{F(g()),r(s),A(()=>!g().primaryKey&&(!r(s)||!p.includes(g().name)))&&Le(oe)})}var Q=y(be,2);{var ne=Le=>{Ne(Le,{class:"form-field form-field-toggle m-0",name:"presentable",children:Ae,$$slots:{default:(je,Te)=>{const Ze=ae(()=>Te.uniqueId);var we=ZE(),Re=j(we),Me=y(Re,2),Xe=y(I(Me),2);nt(Xe,(Be,Pe)=>le==null?void 0:le(Be,Pe),()=>({text:"Whether the field should be preferred in the Superuser UI relation listings (default to auto)."})),B(()=>{Y(Re,"id",r(Ze)),Re.disabled=(F(g()),A(()=>g().hidden)),Y(Me,"for",r(Ze)),Ue(Xe,1,`ri-information-line ${F(g()),A(()=>g().hidden?"txt-disabled":"link-hint")??""}`)}),rn(Re,()=>g().presentable,Be=>g(g().presentable=Be,!0)),b(je,we)}}})};X(Q,Le=>{r(s),F(g()),A(()=>!r(s)||!v.includes(g().name))&&Le(ne)})}var ye=y(Q,2);nn(ye,e,"optionsFooter",{get interactive(){return r(o)},get hasErrors(){return r(l)}},null);var Se=y(ye,2);{var Ie=Le=>{var je=QE(),Te=I(je),Ze=I(Te),we=y(I(Ze),2);ii(we,{class:"dropdown dropdown-sm dropdown-upside dropdown-right dropdown-nowrap no-min-width",children:(Re,Me)=>{var Xe=XE(),Be=j(Xe),Pe=y(Be,2);{var He=Fe=>{var De=GE();ce("click",De,Et(S)),b(Fe,De)};X(Pe,Fe=>{F(g()),A(()=>!g().system)&&Fe(He)})}ce("click",Be,Et(w)),b(Re,Xe)},$$slots:{default:!0}}),b(Le,je)};X(Se,Le=>{F(g()),A(()=>!g()._toDelete&&!g().primaryKey)&&Le(Ie)})}Ct(3,Oe,()=>yn,()=>({delay:10,duration:150})),b(ve,Oe)};X(_e,ve=>{r(o)&&r(D)&&ve(ke)})}B(ve=>R=Ue(V,1,"schema-field",null,R,ve),[()=>({required:g().required,expanded:r(o)&&r(D),deleted:g()._toDelete})]),Ct(3,V,()=>yn,()=>({duration:150})),b(n,V),Je(),i()}var nO=T("<div><!></div>"),iO=T('<div class="separator"></div> <!> <div class="separator"></div>',1);function rO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);const a=1,s=2,o=3,l=[{label:"Create",value:a},{label:"Update",value:s},{label:"Create/Update",value:o}];let c=re(e,"field",12),u=re(e,"key",8,""),d=M(f());function f(){return c().onCreate&&c().onUpdate?o:c().onUpdate?s:a}function h(p){switch(p){case a:c(c().onCreate=!0,!0),c(c().onUpdate=!1,!0);break;case s:c(c().onCreate=!1,!0),c(c().onUpdate=!0,!0);break;case o:c(c().onCreate=!0,!0),c(c().onUpdate=!0,!0);break}}se(()=>r(d),()=>{h(r(d))}),ht(),Ge(),ki(n,sn({get key(){return u()}},()=>i,{get field(){return c()},set field(p){c(p)},$$events:{rename(p){ct.call(this,e,p)},remove(p){ct.call(this,e,p)},duplicate(p){ct.call(this,e,p)}},children:Ae,$$slots:{default:(p,v)=>{const m=ae(()=>v.interactive);var g=iO(),k=y(j(g),2);{let _=ae(()=>r(m)?"":"readonly");Ne(k,{get class(){return`form-field form-field-single-multiple-select form-field-autodate-select ${r(_)??""}`},inlineError:!0,children:Ae,$$slots:{default:(E,D)=>{const S=ae(()=>D.uniqueId);var C=nO(),w=I(C);{let $=ae(()=>!r(m));Vn(w,{get id(){return r(S)},get items(){return l},get disabled(){return F(c()),A(()=>c().system)},get readonly(){return r($)},get keyOfSelected(){return r(d)},set keyOfSelected(O){x(d,O)},$$legacy:!0})}nt(C,($,O)=>le==null?void 0:le($,O),()=>({text:"Auto set on:",position:"top"})),b(E,C)}}})}b(p,g)}},$$legacy:!0})),Je()}function aO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);let a=re(e,"field",12),s=re(e,"key",8,"");ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ct.call(this,e,o)},remove(o){ct.call(this,e,o)},duplicate(o){ct.call(this,e,o)}},$$legacy:!0}))}var yu=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ds={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Io={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},di=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},Oi=function(n){return n===!0?1:0};function im(n,e){var t;return function(){var i=this,a=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(i,a)},e)}}var _u=function(n){return n instanceof Array?n:[n]};function Gn(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function Jt(n,e,t){var i=window.document.createElement(n);return e=e||"",t=t||"",i.className=e,t!==void 0&&(i.textContent=t),i}function xl(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function $b(n,e){if(e(n))return n;if(n.parentNode)return $b(n.parentNode,e)}function wl(n,e){var t=Jt("div","numInputWrapper"),i=Jt("input","numInput "+n),a=Jt("span","arrowUp"),s=Jt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),e!==void 0)for(var o in e)i.setAttribute(o,e[o]);return t.appendChild(i),t.appendChild(a),t.appendChild(s),t}function pi(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var xu=function(){},tc=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},sO={D:xu,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Oi(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var i=parseInt(e),a=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+t.firstDayOfWeek),a},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:xu,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:xu,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},Ta={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},uo={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[uo.w(n,e,t)]},F:function(n,e,t){return tc(uo.n(n,e,t)-1,!1,e)},G:function(n,e,t){return di(uo.h(n,e,t))},H:function(n){return di(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Oi(n.getHours()>11)]},M:function(n,e){return tc(n.getMonth(),!0,e)},S:function(n){return di(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return di(n.getFullYear(),4)},d:function(n){return di(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return di(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return di(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},Ib=function(n){var e=n.config,t=e===void 0?ds:e,i=n.l10n,a=i===void 0?Io:i,s=n.isMobile,o=s===void 0?!1:s;return function(l,c,u){var d=u||a;return t.formatDate!==void 0&&!o?t.formatDate(l,c,d):c.split("").map(function(f,h,p){return uo[f]&&p[h-1]!=="\\"?uo[f](l,d,t):f!=="\\"?f:""}).join("")}},md=function(n){var e=n.config,t=e===void 0?ds:e,i=n.l10n,a=i===void 0?Io:i;return function(s,o,l,c){if(!(s!==0&&!s)){var u=c||a,d,f=s;if(s instanceof Date)d=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)d=new Date(s);else if(typeof s=="string"){var h=o||(t||ds).dateFormat,p=String(s).trim();if(p==="today")d=new Date,l=!0;else if(t&&t.parseDate)d=t.parseDate(s,h);else if(/Z$/.test(p)||/GMT$/.test(p))d=new Date(s);else{for(var v=void 0,m=[],g=0,k=0,_="";g<h.length;g++){var E=h[g],D=E==="\\",S=h[g-1]==="\\"||D;if(Ta[E]&&!S){_+=Ta[E];var C=new RegExp(_).exec(s);C&&(v=!0)&&m[E!=="Y"?"push":"unshift"]({fn:sO[E],val:C[++k]})}else D||(_+=".")}d=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),m.forEach(function(w){var $=w.fn,O=w.val;return d=$(d,O,u)||d}),d=v?d:void 0}}if(!(d instanceof Date&&!isNaN(d.getTime()))){t.errorHandler(new Error("Invalid date provided: "+f));return}return l===!0&&d.setHours(0,0,0,0),d}}};function gi(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var oO=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},wu=function(n,e,t){return n*3600+e*60+t},lO=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},cO={DAY:864e5};function ku(n){var e=n.defaultHour,t=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var a=n.minDate.getHours(),s=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<a&&(e=a),e===a&&t<s&&(t=s),e===a&&t===s&&i<o&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var l=n.maxDate.getHours(),c=n.maxDate.getMinutes();e=Math.min(e,l),e===l&&(t=Math.min(c,t)),e===l&&t===c&&(i=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(l){l&&Object.keys(l).forEach(function(c){return n[c]=l[c]})},a=0,s=e;a<s.length;a++){var o=s[a];i(o)}return n});var qn=function(){return qn=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},qn.apply(this,arguments)},rm=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),a=0,e=0;e<t;e++)for(var s=arguments[e],o=0,l=s.length;o<l;o++,a++)i[a]=s[o];return i},uO=300;function dO(n,e){var t={config:qn(qn({},ds),wn.defaultConfig),l10n:Io};t.parseDate=md({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=m,t._setHoursFromDate=h,t._positionCalendar=Le,t.changeMonth=de,t.changeYear=ue,t.clear=pe,t.close=_e,t.onMouseOver=be,t._createElement=Jt,t.createDay=C,t.destroy=ke,t.isEnabled=me,t.jumpToDate=_,t.updateValue=at,t.open=Q,t.redraw=Ze,t.set=Xe,t.setDate=Pe,t.toggle=lt;function i(){t.utils={getDaysInMonth:function(K,G){return K===void 0&&(K=t.currentMonth),G===void 0&&(G=t.currentYear),K===1&&(G%4===0&&G%100!==0||G%400===0)?29:t.l10n.daysInMonth[K]}}}function a(){t.element=t.input=n,t.isOpen=!1,ye(),Ie(),De(),Fe(),i(),t.isMobile||S(),k(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&h(t.config.noCalendar?t.latestSelectedDateObj:void 0),at(!1)),l();var K=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&K&&Le(),We("onReady")}function s(){var K;return((K=t.calendarContainer)===null||K===void 0?void 0:K.getRootNode()).activeElement||document.activeElement}function o(K){return K.bind(t)}function l(){var K=t.config;K.weekNumbers===!1&&K.showMonths===1||K.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var G=(t.days.offsetWidth+1)*K.showMonths;t.daysContainer.style.width=G+"px",t.calendarContainer.style.width=G+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function c(K){if(t.selectedDates.length===0){var G=t.config.minDate===void 0||gi(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),fe=ku(t.config);G.setHours(fe.hours,fe.minutes,fe.seconds,G.getMilliseconds()),t.selectedDates=[G],t.latestSelectedDateObj=G}K!==void 0&&K.type!=="blur"&&vt(K);var $e=t._input.value;f(),at(),t._input.value!==$e&&t._debouncedChange()}function u(K,G){return K%12+12*Oi(G===t.l10n.amPM[1])}function d(K){switch(K%24){case 0:case 12:return 12;default:return K%12}}function f(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var K=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,G=(parseInt(t.minuteElement.value,10)||0)%60,fe=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(K=u(K,t.amPM.textContent));var $e=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&gi(t.latestSelectedDateObj,t.config.minDate,!0)===0,et=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&gi(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var ot=wu(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),wt=wu(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),st=wu(K,G,fe);if(st>wt&&st<ot){var St=lO(ot);K=St[0],G=St[1],fe=St[2]}}else{if(et){var mt=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;K=Math.min(K,mt.getHours()),K===mt.getHours()&&(G=Math.min(G,mt.getMinutes())),G===mt.getMinutes()&&(fe=Math.min(fe,mt.getSeconds()))}if($e){var Tt=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;K=Math.max(K,Tt.getHours()),K===Tt.getHours()&&G<Tt.getMinutes()&&(G=Tt.getMinutes()),G===Tt.getMinutes()&&(fe=Math.max(fe,Tt.getSeconds()))}}p(K,G,fe)}}function h(K){var G=K||t.latestSelectedDateObj;G&&G instanceof Date&&p(G.getHours(),G.getMinutes(),G.getSeconds())}function p(K,G,fe){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(K%24,G,fe||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=di(t.config.time_24hr?K:(12+K)%12+12*Oi(K%12===0)),t.minuteElement.value=di(G),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Oi(K>=12)]),t.secondElement!==void 0&&(t.secondElement.value=di(fe)))}function v(K){var G=pi(K),fe=parseInt(G.value)+(K.delta||0);(fe/1e3>1||K.key==="Enter"&&!/[^\d]/.test(fe.toString()))&&ue(fe)}function m(K,G,fe,$e){if(G instanceof Array)return G.forEach(function(et){return m(K,et,fe,$e)});if(K instanceof Array)return K.forEach(function(et){return m(et,G,fe,$e)});K.addEventListener(G,fe,$e),t._handlers.push({remove:function(){return K.removeEventListener(G,fe,$e)}})}function g(){We("onChange")}function k(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(fe){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+fe+"]"),function($e){return m($e,"click",t[fe])})}),t.isMobile){Ye();return}var K=im(oe,50);if(t._debouncedChange=im(g,uO),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&m(t.daysContainer,"mouseover",function(fe){t.config.mode==="range"&&be(pi(fe))}),m(t._input,"keydown",ie),t.calendarContainer!==void 0&&m(t.calendarContainer,"keydown",ie),!t.config.inline&&!t.config.static&&m(window,"resize",K),window.ontouchstart!==void 0?m(window.document,"touchstart",Oe):m(window.document,"mousedown",Oe),m(window.document,"focus",Oe,{capture:!0}),t.config.clickOpens===!0&&(m(t._input,"focus",t.open),m(t._input,"click",t.open)),t.daysContainer!==void 0&&(m(t.monthNav,"click",Ce),m(t.monthNav,["keyup","increment"],v),m(t.daysContainer,"click",Re)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var G=function(fe){return pi(fe).select()};m(t.timeContainer,["increment"],c),m(t.timeContainer,"blur",c,{capture:!0}),m(t.timeContainer,"click",E),m([t.hourElement,t.minuteElement],["focus","click"],G),t.secondElement!==void 0&&m(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&m(t.amPM,"click",function(fe){c(fe)})}t.config.allowInput&&m(t._input,"blur",xe)}function _(K,G){var fe=K!==void 0?t.parseDate(K):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),$e=t.currentYear,et=t.currentMonth;try{fe!==void 0&&(t.currentYear=fe.getFullYear(),t.currentMonth=fe.getMonth())}catch(ot){ot.message="Invalid date supplied: "+fe,t.config.errorHandler(ot)}G&&t.currentYear!==$e&&(We("onYearChange"),V()),G&&(t.currentYear!==$e||t.currentMonth!==et)&&We("onMonthChange"),t.redraw()}function E(K){var G=pi(K);~G.className.indexOf("arrow")&&D(K,G.classList.contains("arrowUp")?1:-1)}function D(K,G,fe){var $e=K&&pi(K),et=fe||$e&&$e.parentNode&&$e.parentNode.firstChild,ot=tt("increment");ot.delta=G,et&&et.dispatchEvent(ot)}function S(){var K=window.document.createDocumentFragment();if(t.calendarContainer=Jt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(K.appendChild(H()),t.innerContainer=Jt("div","flatpickr-innerContainer"),t.config.weekNumbers){var G=te(),fe=G.weekWrapper,$e=G.weekNumbers;t.innerContainer.appendChild(fe),t.weekNumbers=$e,t.weekWrapper=fe}t.rContainer=Jt("div","flatpickr-rContainer"),t.rContainer.appendChild(J()),t.daysContainer||(t.daysContainer=Jt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),N(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),K.appendChild(t.innerContainer)}t.config.enableTime&&K.appendChild(z()),Gn(t.calendarContainer,"rangeMode",t.config.mode==="range"),Gn(t.calendarContainer,"animate",t.config.animate===!0),Gn(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(K);var et=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!et&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var ot=Jt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(ot,t.element),ot.appendChild(t.element),t.altInput&&ot.appendChild(t.altInput),ot.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function C(K,G,fe,$e){var et=me(G,!0),ot=Jt("span",K,G.getDate().toString());return ot.dateObj=G,ot.$i=$e,ot.setAttribute("aria-label",t.formatDate(G,t.config.ariaDateFormat)),K.indexOf("hidden")===-1&&gi(G,t.now)===0&&(t.todayDateElem=ot,ot.classList.add("today"),ot.setAttribute("aria-current","date")),et?(ot.tabIndex=-1,it(G)&&(ot.classList.add("selected"),t.selectedDateElem=ot,t.config.mode==="range"&&(Gn(ot,"startRange",t.selectedDates[0]&&gi(G,t.selectedDates[0],!0)===0),Gn(ot,"endRange",t.selectedDates[1]&&gi(G,t.selectedDates[1],!0)===0),K==="nextMonthDay"&&ot.classList.add("inRange")))):ot.classList.add("flatpickr-disabled"),t.config.mode==="range"&&Qe(G)&&!it(G)&&ot.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&K!=="prevMonthDay"&&$e%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(G)+"</span>"),We("onDayCreate",ot),ot}function w(K){K.focus(),t.config.mode==="range"&&be(K)}function $(K){for(var G=K>0?0:t.config.showMonths-1,fe=K>0?t.config.showMonths:-1,$e=G;$e!=fe;$e+=K)for(var et=t.daysContainer.children[$e],ot=K>0?0:et.children.length-1,wt=K>0?et.children.length:-1,st=ot;st!=wt;st+=K){var St=et.children[st];if(St.className.indexOf("hidden")===-1&&me(St.dateObj))return St}}function O(K,G){for(var fe=K.className.indexOf("Month")===-1?K.dateObj.getMonth():t.currentMonth,$e=G>0?t.config.showMonths:-1,et=G>0?1:-1,ot=fe-t.currentMonth;ot!=$e;ot+=et)for(var wt=t.daysContainer.children[ot],st=fe-t.currentMonth===ot?K.$i+G:G<0?wt.children.length-1:0,St=wt.children.length,mt=st;mt>=0&&mt<St&&mt!=(G>0?St:-1);mt+=et){var Tt=wt.children[mt];if(Tt.className.indexOf("hidden")===-1&&me(Tt.dateObj)&&Math.abs(K.$i-mt)>=Math.abs(G))return w(Tt)}t.changeMonth(et),P($(et),0)}function P(K,G){var fe=s(),$e=he(fe||document.body),et=K!==void 0?K:$e?fe:t.selectedDateElem!==void 0&&he(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&he(t.todayDateElem)?t.todayDateElem:$(G>0?1:-1);et===void 0?t._input.focus():$e?O(et,G):w(et)}function L(K,G){for(var fe=(new Date(K,G,1).getDay()-t.l10n.firstDayOfWeek+7)%7,$e=t.utils.getDaysInMonth((G-1+12)%12,K),et=t.utils.getDaysInMonth(G,K),ot=window.document.createDocumentFragment(),wt=t.config.showMonths>1,st=wt?"prevMonthDay hidden":"prevMonthDay",St=wt?"nextMonthDay hidden":"nextMonthDay",mt=$e+1-fe,Tt=0;mt<=$e;mt++,Tt++)ot.appendChild(C("flatpickr-day "+st,new Date(K,G-1,mt),mt,Tt));for(mt=1;mt<=et;mt++,Tt++)ot.appendChild(C("flatpickr-day",new Date(K,G,mt),mt,Tt));for(var zt=et+1;zt<=42-fe&&(t.config.showMonths===1||Tt%7!==0);zt++,Tt++)ot.appendChild(C("flatpickr-day "+St,new Date(K,G+1,zt%et),zt,Tt));var Sn=Jt("div","dayContainer");return Sn.appendChild(ot),Sn}function N(){if(t.daysContainer!==void 0){xl(t.daysContainer),t.weekNumbers&&xl(t.weekNumbers);for(var K=document.createDocumentFragment(),G=0;G<t.config.showMonths;G++){var fe=new Date(t.currentYear,t.currentMonth,1);fe.setMonth(t.currentMonth+G),K.appendChild(L(fe.getFullYear(),fe.getMonth()))}t.daysContainer.appendChild(K),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&be()}}function V(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var K=function($e){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&$e<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&$e>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var G=0;G<12;G++)if(K(G)){var fe=Jt("option","flatpickr-monthDropdown-month");fe.value=new Date(t.currentYear,G).getMonth().toString(),fe.textContent=tc(G,t.config.shorthandCurrentMonth,t.l10n),fe.tabIndex=-1,t.currentMonth===G&&(fe.selected=!0),t.monthsDropdownContainer.appendChild(fe)}}}function R(){var K=Jt("div","flatpickr-month"),G=window.document.createDocumentFragment(),fe;t.config.showMonths>1||t.config.monthSelectorType==="static"?fe=Jt("span","cur-month"):(t.monthsDropdownContainer=Jt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),m(t.monthsDropdownContainer,"change",function(wt){var st=pi(wt),St=parseInt(st.value,10);t.changeMonth(St-t.currentMonth),We("onMonthChange")}),V(),fe=t.monthsDropdownContainer);var $e=wl("cur-year",{tabindex:"-1"}),et=$e.getElementsByTagName("input")[0];et.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&et.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(et.setAttribute("max",t.config.maxDate.getFullYear().toString()),et.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var ot=Jt("div","flatpickr-current-month");return ot.appendChild(fe),ot.appendChild($e),G.appendChild(ot),K.appendChild(G),{container:K,yearElement:et,monthElement:fe}}function U(){xl(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var K=t.config.showMonths;K--;){var G=R();t.yearElements.push(G.yearElement),t.monthElements.push(G.monthElement),t.monthNav.appendChild(G.container)}t.monthNav.appendChild(t.nextMonthNav)}function H(){return t.monthNav=Jt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Jt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Jt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,U(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(K){t.__hidePrevMonthArrow!==K&&(Gn(t.prevMonthNav,"flatpickr-disabled",K),t.__hidePrevMonthArrow=K)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(K){t.__hideNextMonthArrow!==K&&(Gn(t.nextMonthNav,"flatpickr-disabled",K),t.__hideNextMonthArrow=K)}}),t.currentYearElement=t.yearElements[0],ft(),t.monthNav}function z(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var K=ku(t.config);t.timeContainer=Jt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var G=Jt("span","flatpickr-time-separator",":"),fe=wl("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=fe.getElementsByTagName("input")[0];var $e=wl("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=$e.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=di(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?K.hours:d(K.hours)),t.minuteElement.value=di(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():K.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(fe),t.timeContainer.appendChild(G),t.timeContainer.appendChild($e),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var et=wl("flatpickr-second");t.secondElement=et.getElementsByTagName("input")[0],t.secondElement.value=di(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():K.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Jt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(et)}return t.config.time_24hr||(t.amPM=Jt("span","flatpickr-am-pm",t.l10n.amPM[Oi((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function J(){t.weekdayContainer?xl(t.weekdayContainer):t.weekdayContainer=Jt("div","flatpickr-weekdays");for(var K=t.config.showMonths;K--;){var G=Jt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(G)}return W(),t.weekdayContainer}function W(){if(t.weekdayContainer){var K=t.l10n.firstDayOfWeek,G=rm(t.l10n.weekdays.shorthand);K>0&&K<G.length&&(G=rm(G.splice(K,G.length),G.splice(0,K)));for(var fe=t.config.showMonths;fe--;)t.weekdayContainer.children[fe].innerHTML=`
      <span class='flatpickr-weekday'>
        `+G.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function te(){t.calendarContainer.classList.add("hasWeeks");var K=Jt("div","flatpickr-weekwrapper");K.appendChild(Jt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var G=Jt("div","flatpickr-weeks");return K.appendChild(G),{weekWrapper:K,weekNumbers:G}}function de(K,G){G===void 0&&(G=!0);var fe=G?K:K-t.currentMonth;fe<0&&t._hidePrevMonthArrow===!0||fe>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=fe,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,We("onYearChange"),V()),N(),We("onMonthChange"),ft())}function pe(K,G){if(K===void 0&&(K=!0),G===void 0&&(G=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,G===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var fe=ku(t.config),$e=fe.hours,et=fe.minutes,ot=fe.seconds;p($e,et,ot)}t.redraw(),K&&We("onChange")}function _e(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),We("onClose")}function ke(){t.config!==void 0&&We("onDestroy");for(var K=t._handlers.length;K--;)t._handlers[K].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var G=t.calendarContainer.parentNode;if(G.lastChild&&G.removeChild(G.lastChild),G.parentNode){for(;G.firstChild;)G.parentNode.insertBefore(G.firstChild,G);G.parentNode.removeChild(G)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(fe){try{delete t[fe]}catch{}})}function ve(K){return t.calendarContainer.contains(K)}function Oe(K){if(t.isOpen&&!t.config.inline){var G=pi(K),fe=ve(G),$e=G===t.input||G===t.altInput||t.element.contains(G)||K.path&&K.path.indexOf&&(~K.path.indexOf(t.input)||~K.path.indexOf(t.altInput)),et=!$e&&!fe&&!ve(K.relatedTarget),ot=!t.config.ignoredFocusElements.some(function(wt){return wt.contains(G)});et&&ot&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&c(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function ue(K){if(!(!K||t.config.minDate&&K<t.config.minDate.getFullYear()||t.config.maxDate&&K>t.config.maxDate.getFullYear())){var G=K,fe=t.currentYear!==G;t.currentYear=G||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),fe&&(t.redraw(),We("onYearChange"),V())}}function me(K,G){var fe;G===void 0&&(G=!0);var $e=t.parseDate(K,void 0,G);if(t.config.minDate&&$e&&gi($e,t.config.minDate,G!==void 0?G:!t.minDateHasTime)<0||t.config.maxDate&&$e&&gi($e,t.config.maxDate,G!==void 0?G:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if($e===void 0)return!1;for(var et=!!t.config.enable,ot=(fe=t.config.enable)!==null&&fe!==void 0?fe:t.config.disable,wt=0,st=void 0;wt<ot.length;wt++){if(st=ot[wt],typeof st=="function"&&st($e))return et;if(st instanceof Date&&$e!==void 0&&st.getTime()===$e.getTime())return et;if(typeof st=="string"){var St=t.parseDate(st,void 0,!0);return St&&St.getTime()===$e.getTime()?et:!et}else if(typeof st=="object"&&$e!==void 0&&st.from&&st.to&&$e.getTime()>=st.from.getTime()&&$e.getTime()<=st.to.getTime())return et}return!et}function he(K){return t.daysContainer!==void 0?K.className.indexOf("hidden")===-1&&K.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(K):!1}function xe(K){var G=K.target===t._input,fe=t._input.value.trimEnd()!==pt();G&&fe&&!(K.relatedTarget&&ve(K.relatedTarget))&&t.setDate(t._input.value,!0,K.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function ie(K){var G=pi(K),fe=t.config.wrap?n.contains(G):G===t._input,$e=t.config.allowInput,et=t.isOpen&&(!$e||!fe),ot=t.config.inline&&fe&&!$e;if(K.keyCode===13&&fe){if($e)return t.setDate(t._input.value,!0,G===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),G.blur();t.open()}else if(ve(G)||et||ot){var wt=!!t.timeContainer&&t.timeContainer.contains(G);switch(K.keyCode){case 13:wt?(K.preventDefault(),c(),we()):Re(K);break;case 27:K.preventDefault(),we();break;case 8:case 46:fe&&!t.config.allowInput&&(K.preventDefault(),t.clear());break;case 37:case 39:if(!wt&&!fe){K.preventDefault();var st=s();if(t.daysContainer!==void 0&&($e===!1||st&&he(st))){var St=K.keyCode===39?1:-1;K.ctrlKey?(K.stopPropagation(),de(St),P($(1),0)):P(void 0,St)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:K.preventDefault();var mt=K.keyCode===40?1:-1;t.daysContainer&&G.$i!==void 0||G===t.input||G===t.altInput?K.ctrlKey?(K.stopPropagation(),ue(t.currentYear-mt),P($(1),0)):wt||P(void 0,mt*7):G===t.currentYearElement?ue(t.currentYear-mt):t.config.enableTime&&(!wt&&t.hourElement&&t.hourElement.focus(),c(K),t._debouncedChange());break;case 9:if(wt){var Tt=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Qt){return Qt}),zt=Tt.indexOf(G);if(zt!==-1){var Sn=Tt[zt+(K.shiftKey?-1:1)];K.preventDefault(),(Sn||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(G)&&K.shiftKey&&(K.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&G===t.amPM)switch(K.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],f(),at();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],f(),at();break}(fe||ve(G))&&We("onKeyDown",K)}function be(K,G){if(G===void 0&&(G="flatpickr-day"),!(t.selectedDates.length!==1||K&&(!K.classList.contains(G)||K.classList.contains("flatpickr-disabled")))){for(var fe=K?K.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),$e=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),et=Math.min(fe,t.selectedDates[0].getTime()),ot=Math.max(fe,t.selectedDates[0].getTime()),wt=!1,st=0,St=0,mt=et;mt<ot;mt+=cO.DAY)me(new Date(mt),!0)||(wt=wt||mt>et&&mt<ot,mt<$e&&(!st||mt>st)?st=mt:mt>$e&&(!St||mt<St)&&(St=mt));var Tt=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+G));Tt.forEach(function(zt){var Sn=zt.dateObj,Qt=Sn.getTime(),Dn=st>0&&Qt<st||St>0&&Qt>St;if(Dn){zt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Kn){zt.classList.remove(Kn)});return}else if(wt&&!Dn)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Kn){zt.classList.remove(Kn)}),K!==void 0&&(K.classList.add(fe<=t.selectedDates[0].getTime()?"startRange":"endRange"),$e<fe&&Qt===$e?zt.classList.add("startRange"):$e>fe&&Qt===$e&&zt.classList.add("endRange"),Qt>=st&&(St===0||Qt<=St)&&oO(Qt,$e,fe)&&zt.classList.add("inRange"))})}}function oe(){t.isOpen&&!t.config.static&&!t.config.inline&&Le()}function Q(K,G){if(G===void 0&&(G=t._positionElement),t.isMobile===!0){if(K){K.preventDefault();var fe=pi(K);fe&&fe.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),We("onOpen");return}else if(t._input.disabled||t.config.inline)return;var $e=t.isOpen;t.isOpen=!0,$e||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),We("onOpen"),Le(G)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(K===void 0||!t.timeContainer.contains(K.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function ne(K){return function(G){var fe=t.config["_"+K+"Date"]=t.parseDate(G,t.config.dateFormat),$e=t.config["_"+(K==="min"?"max":"min")+"Date"];fe!==void 0&&(t[K==="min"?"minDateHasTime":"maxDateHasTime"]=fe.getHours()>0||fe.getMinutes()>0||fe.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(et){return me(et)}),!t.selectedDates.length&&K==="min"&&h(fe),at()),t.daysContainer&&(Ze(),fe!==void 0?t.currentYearElement[K]=fe.getFullYear().toString():t.currentYearElement.removeAttribute(K),t.currentYearElement.disabled=!!$e&&fe!==void 0&&$e.getFullYear()===fe.getFullYear())}}function ye(){var K=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],G=qn(qn({},JSON.parse(JSON.stringify(n.dataset||{}))),e),fe={};t.config.parseDate=G.parseDate,t.config.formatDate=G.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Tt){t.config._enable=He(Tt)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Tt){t.config._disable=He(Tt)}});var $e=G.mode==="time";if(!G.dateFormat&&(G.enableTime||$e)){var et=wn.defaultConfig.dateFormat||ds.dateFormat;fe.dateFormat=G.noCalendar||$e?"H:i"+(G.enableSeconds?":S":""):et+" H:i"+(G.enableSeconds?":S":"")}if(G.altInput&&(G.enableTime||$e)&&!G.altFormat){var ot=wn.defaultConfig.altFormat||ds.altFormat;fe.altFormat=G.noCalendar||$e?"h:i"+(G.enableSeconds?":S K":" K"):ot+(" h:i"+(G.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:ne("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:ne("max")});var wt=function(Tt){return function(zt){t.config[Tt==="min"?"_minTime":"_maxTime"]=t.parseDate(zt,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:wt("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:wt("max")}),G.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,fe,G);for(var st=0;st<K.length;st++)t.config[K[st]]=t.config[K[st]]===!0||t.config[K[st]]==="true";yu.filter(function(Tt){return t.config[Tt]!==void 0}).forEach(function(Tt){t.config[Tt]=_u(t.config[Tt]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var st=0;st<t.config.plugins.length;st++){var St=t.config.plugins[st](t)||{};for(var mt in St)yu.indexOf(mt)>-1?t.config[mt]=_u(St[mt]).map(o).concat(t.config[mt]):typeof G[mt]>"u"&&(t.config[mt]=St[mt])}G.altInputClass||(t.config.altInputClass=Se().className+" "+t.config.altInputClass),We("onParseConfig")}function Se(){return t.config.wrap?n.querySelector("[data-input]"):n}function Ie(){typeof t.config.locale!="object"&&typeof wn.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=qn(qn({},wn.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?wn.l10ns[t.config.locale]:void 0),Ta.D="("+t.l10n.weekdays.shorthand.join("|")+")",Ta.l="("+t.l10n.weekdays.longhand.join("|")+")",Ta.M="("+t.l10n.months.shorthand.join("|")+")",Ta.F="("+t.l10n.months.longhand.join("|")+")",Ta.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var K=qn(qn({},e),JSON.parse(JSON.stringify(n.dataset||{})));K.time_24hr===void 0&&wn.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=Ib(t),t.parseDate=md({config:t.config,l10n:t.l10n})}function Le(K){if(typeof t.config.position=="function")return void t.config.position(t,K);if(t.calendarContainer!==void 0){We("onPreCalendarPosition");var G=K||t._positionElement,fe=Array.prototype.reduce.call(t.calendarContainer.children,function($i,ha){return $i+ha.offsetHeight},0),$e=t.calendarContainer.offsetWidth,et=t.config.position.split(" "),ot=et[0],wt=et.length>1?et[1]:null,st=G.getBoundingClientRect(),St=window.innerHeight-st.bottom,mt=ot==="above"||ot!=="below"&&St<fe&&st.top>fe,Tt=window.pageYOffset+st.top+(mt?-fe-2:G.offsetHeight+2);if(Gn(t.calendarContainer,"arrowTop",!mt),Gn(t.calendarContainer,"arrowBottom",mt),!t.config.inline){var zt=window.pageXOffset+st.left,Sn=!1,Qt=!1;wt==="center"?(zt-=($e-st.width)/2,Sn=!0):wt==="right"&&(zt-=$e-st.width,Qt=!0),Gn(t.calendarContainer,"arrowLeft",!Sn&&!Qt),Gn(t.calendarContainer,"arrowCenter",Sn),Gn(t.calendarContainer,"arrowRight",Qt);var Dn=window.document.body.offsetWidth-(window.pageXOffset+st.right),Kn=zt+$e>window.document.body.offsetWidth,mn=Dn+$e>window.document.body.offsetWidth;if(Gn(t.calendarContainer,"rightMost",Kn),!t.config.static)if(t.calendarContainer.style.top=Tt+"px",!Kn)t.calendarContainer.style.left=zt+"px",t.calendarContainer.style.right="auto";else if(!mn)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Dn+"px";else{var un=je();if(un===void 0)return;var Rn=window.document.body.offsetWidth,Jn=Math.max(0,Rn/2-$e/2),si=".flatpickr-calendar.centerMost:before",Ti=".flatpickr-calendar.centerMost:after",zi=un.cssRules.length,Zn="{left:"+st.left+"px;right:auto;}";Gn(t.calendarContainer,"rightMost",!1),Gn(t.calendarContainer,"centerMost",!0),un.insertRule(si+","+Ti+Zn,zi),t.calendarContainer.style.left=Jn+"px",t.calendarContainer.style.right="auto"}}}}function je(){for(var K=null,G=0;G<document.styleSheets.length;G++){var fe=document.styleSheets[G];if(fe.cssRules){try{fe.cssRules}catch{continue}K=fe;break}}return K??Te()}function Te(){var K=document.createElement("style");return document.head.appendChild(K),K.sheet}function Ze(){t.config.noCalendar||t.isMobile||(V(),ft(),N())}function we(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function Re(K){K.preventDefault(),K.stopPropagation();var G=function(Tt){return Tt.classList&&Tt.classList.contains("flatpickr-day")&&!Tt.classList.contains("flatpickr-disabled")&&!Tt.classList.contains("notAllowed")},fe=$b(pi(K),G);if(fe!==void 0){var $e=fe,et=t.latestSelectedDateObj=new Date($e.dateObj.getTime()),ot=(et.getMonth()<t.currentMonth||et.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=$e,t.config.mode==="single")t.selectedDates=[et];else if(t.config.mode==="multiple"){var wt=it(et);wt?t.selectedDates.splice(parseInt(wt),1):t.selectedDates.push(et)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=et,t.selectedDates.push(et),gi(et,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Tt,zt){return Tt.getTime()-zt.getTime()}));if(f(),ot){var st=t.currentYear!==et.getFullYear();t.currentYear=et.getFullYear(),t.currentMonth=et.getMonth(),st&&(We("onYearChange"),V()),We("onMonthChange")}if(ft(),N(),at(),!ot&&t.config.mode!=="range"&&t.config.showMonths===1?w($e):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var St=t.config.mode==="single"&&!t.config.enableTime,mt=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(St||mt)&&we()}g()}}var Me={locale:[Ie,W],showMonths:[U,l,J],minDate:[_],maxDate:[_],positionElement:[Ve],clickOpens:[function(){t.config.clickOpens===!0?(m(t._input,"focus",t.open),m(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function Xe(K,G){if(K!==null&&typeof K=="object"){Object.assign(t.config,K);for(var fe in K)Me[fe]!==void 0&&Me[fe].forEach(function($e){return $e()})}else t.config[K]=G,Me[K]!==void 0?Me[K].forEach(function($e){return $e()}):yu.indexOf(K)>-1&&(t.config[K]=_u(G));t.redraw(),at(!0)}function Be(K,G){var fe=[];if(K instanceof Array)fe=K.map(function($e){return t.parseDate($e,G)});else if(K instanceof Date||typeof K=="number")fe=[t.parseDate(K,G)];else if(typeof K=="string")switch(t.config.mode){case"single":case"time":fe=[t.parseDate(K,G)];break;case"multiple":fe=K.split(t.config.conjunction).map(function($e){return t.parseDate($e,G)});break;case"range":fe=K.split(t.l10n.rangeSeparator).map(function($e){return t.parseDate($e,G)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(K)));t.selectedDates=t.config.allowInvalidPreload?fe:fe.filter(function($e){return $e instanceof Date&&me($e,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function($e,et){return $e.getTime()-et.getTime()})}function Pe(K,G,fe){if(G===void 0&&(G=!1),fe===void 0&&(fe=t.config.dateFormat),K!==0&&!K||K instanceof Array&&K.length===0)return t.clear(G);Be(K,fe),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),_(void 0,G),h(),t.selectedDates.length===0&&t.clear(!1),at(G),G&&We("onChange")}function He(K){return K.slice().map(function(G){return typeof G=="string"||typeof G=="number"||G instanceof Date?t.parseDate(G,void 0,!0):G&&typeof G=="object"&&G.from&&G.to?{from:t.parseDate(G.from,void 0),to:t.parseDate(G.to,void 0)}:G}).filter(function(G){return G})}function Fe(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var K=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);K&&Be(K,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function De(){if(t.input=Se(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Jt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Ve()}function Ve(){t._positionElement=t.config.positionElement||t._input}function Ye(){var K=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Jt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=K,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=K==="datetime-local"?"Y-m-d\\TH:i:S":K==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}m(t.mobileInput,"change",function(G){t.setDate(pi(G).value,!1,t.mobileFormatStr),We("onChange"),We("onClose")})}function lt(K){if(t.isOpen===!0)return t.close();t.open(K)}function We(K,G){if(t.config!==void 0){var fe=t.config[K];if(fe!==void 0&&fe.length>0)for(var $e=0;fe[$e]&&$e<fe.length;$e++)fe[$e](t.selectedDates,t.input.value,t,G);K==="onChange"&&(t.input.dispatchEvent(tt("change")),t.input.dispatchEvent(tt("input")))}}function tt(K){var G=document.createEvent("Event");return G.initEvent(K,!0,!0),G}function it(K){for(var G=0;G<t.selectedDates.length;G++){var fe=t.selectedDates[G];if(fe instanceof Date&&gi(fe,K)===0)return""+G}return!1}function Qe(K){return t.config.mode!=="range"||t.selectedDates.length<2?!1:gi(K,t.selectedDates[0])>=0&&gi(K,t.selectedDates[1])<=0}function ft(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(K,G){var fe=new Date(t.currentYear,t.currentMonth,1);fe.setMonth(t.currentMonth+G),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[G].textContent=tc(fe.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=fe.getMonth().toString(),K.value=fe.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function pt(K){var G=K||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(fe){return t.formatDate(fe,G)}).filter(function(fe,$e,et){return t.config.mode!=="range"||t.config.enableTime||et.indexOf(fe)===$e}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function at(K){K===void 0&&(K=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=pt(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=pt(t.config.altFormat)),K!==!1&&We("onValueUpdate")}function Ce(K){var G=pi(K),fe=t.prevMonthNav.contains(G),$e=t.nextMonthNav.contains(G);fe||$e?de(fe?-1:1):t.yearElements.indexOf(G)>=0?G.select():G.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):G.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function vt(K){K.preventDefault();var G=K.type==="keydown",fe=pi(K),$e=fe;t.amPM!==void 0&&fe===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Oi(t.amPM.textContent===t.l10n.amPM[0])]);var et=parseFloat($e.getAttribute("min")),ot=parseFloat($e.getAttribute("max")),wt=parseFloat($e.getAttribute("step")),st=parseInt($e.value,10),St=K.delta||(G?K.which===38?1:-1:0),mt=st+wt*St;if(typeof $e.value<"u"&&$e.value.length===2){var Tt=$e===t.hourElement,zt=$e===t.minuteElement;mt<et?(mt=ot+mt+Oi(!Tt)+(Oi(Tt)&&Oi(!t.amPM)),zt&&D(void 0,-1,t.hourElement)):mt>ot&&(mt=$e===t.hourElement?mt-ot-Oi(!t.amPM):et,zt&&D(void 0,1,t.hourElement)),t.amPM&&Tt&&(wt===1?mt+st===23:Math.abs(mt-st)>wt)&&(t.amPM.textContent=t.l10n.amPM[Oi(t.amPM.textContent===t.l10n.amPM[0])]),$e.value=di(mt)}}return a(),t}function fs(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),i=[],a=0;a<t.length;a++){var s=t[a];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=dO(s,e||{}),i.push(s._flatpickr)}catch(o){console.error(o)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return fs(this,n)},HTMLElement.prototype.flatpickr=function(n){return fs([this],n)});var wn=function(n,e){return typeof n=="string"?fs(window.document.querySelectorAll(n),e):n instanceof Node?fs([n],e):fs(n,e)};wn.defaultConfig={};wn.l10ns={en:qn({},Io),default:qn({},Io)};wn.localize=function(n){wn.l10ns.default=qn(qn({},wn.l10ns.default),n)};wn.setDefaults=function(n){wn.defaultConfig=qn(qn({},wn.defaultConfig),n)};wn.parseDate=md({});wn.formatDate=Ib({});wn.compareDates=gi;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return fs(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=wn);var fO=T("<input/>");function pd(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","formattedValue","element","dateFormat","options","input","flatpickr"]);Ke(e,!1);const a=new Set(["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"]);let s=re(e,"value",12,void 0),o=re(e,"formattedValue",12,""),l=re(e,"element",8,void 0),c=re(e,"dateFormat",8,void 0),u=re(e,"options",24,()=>({})),d=M(!1),f=re(e,"input",12,void 0),h=re(e,"flatpickr",12,void 0);vn(()=>{const S=l()??f(),C=v(u());return C.onReady.push((w,$,O)=>{s()===void 0&&m(w,$,O),Nn().then(()=>{x(d,!0)})}),h(wn(S,Object.assign(C,l()?{wrap:!0}:{}))),()=>{h().destroy()}});const p=Ut();function v(S={}){S=Object.assign({},S);for(const C of a){const w=($,O,P)=>{p(g(C),[$,O,P])};C in S?(Array.isArray(S[C])||(S[C]=[S[C]]),S[C].push(w)):S[C]=[w]}return S.onChange&&!S.onChange.includes(m)&&S.onChange.push(m),S}function m(S,C,w){const $=k(w,S);!_(s(),$)&&(s()||$)&&s($),o(C)}function g(S){return S.charAt(2).toLowerCase()+S.substring(3)}function k(S,C){var $;return((($=S==null?void 0:S.config)==null?void 0:$.mode)??"single")==="single"?C[0]:C}function _(S,C){return!!(S==C||S instanceof Date&&C instanceof Date&&S.valueOf()===C.valueOf()||Array.isArray(S)&&Array.isArray(C)&&S.length===C.length&&S.every((w,$)=>w===C[$]))}se(()=>(F(h()),r(d),F(s()),F(c())),()=>{h()&&r(d)&&(_(s(),k(h(),h().selectedDates))||h().setDate(s(),!0,c()))}),se(()=>(F(h()),r(d),F(u())),()=>{if(h()&&r(d))for(const[S,C]of Object.entries(v(u())))h().set(S,C)}),ht(),Ge();var E=rt(),D=j(E);nn(D,e,"default",{},S=>{var C=fO();_s(C,()=>({...i})),gt(C,w=>f(w),()=>f()),b(S,C)}),b(n,E),Je()}var hO=T("<label>Min date (UTC)</label> <!>",1),vO=T("<label>Max date (UTC)</label> <!>",1),mO=T('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function pO(n,e){var u,d;const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);let a=re(e,"field",12),s=re(e,"key",8,""),o=M((u=a())==null?void 0:u.min),l=M((d=a())==null?void 0:d.max);function c(f,h){f.detail&&f.detail.length==3&&a(a()[h]=f.detail[1],!0)}se(()=>(r(o),F(a())),()=>{var f,h;r(o)!=((f=a())==null?void 0:f.min)&&x(o,(h=a())==null?void 0:h.min)}),se(()=>(r(l),F(a())),()=>{var f,h;r(l)!=((f=a())==null?void 0:f.max)&&x(l,(h=a())==null?void 0:h.max)}),ht(),Ge(),ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(f){a(f)},$$events:{rename(f){ct.call(this,e,f)},remove(f){ct.call(this,e,f)},duplicate(f){ct.call(this,e,f)}},$$slots:{options:(f,h)=>{var p=mO(),v=I(p),m=I(v);Ne(m,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ae,$$slots:{default:(_,E)=>{const D=ae(()=>E.uniqueId);var S=hO(),C=j(S),w=y(C,2);{let $=ae(()=>(F(q),A(()=>q.defaultFlatpickrOptions())));pd(w,{get id(){return r(D)},get options(){return r($)},get value(){return r(o)},set value(O){x(o,O)},get formattedValue(){return a().min},set formattedValue(O){a(a().min=O,!0)},$$events:{close:O=>c(O,"min")},$$legacy:!0})}B(()=>Y(C,"for",r(D))),b(_,S)}}});var g=y(v,2),k=I(g);Ne(k,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ae,$$slots:{default:(_,E)=>{const D=ae(()=>E.uniqueId);var S=vO(),C=j(S),w=y(C,2);{let $=ae(()=>(F(q),A(()=>q.defaultFlatpickrOptions())));pd(w,{get id(){return r(D)},get options(){return r($)},get value(){return r(l)},set value(O){x(l,O)},get formattedValue(){return a().max},set formattedValue(O){a(a().max=O,!0)},$$events:{close:O=>c(O,"max")},$$legacy:!0})}B(()=>Y(C,"for",r(D))),b(_,S)}}}),b(f,p)}},$$legacy:!0})),Je()}var gO=T('<label>Max size <small>(bytes)</small></label> <input type="number" step="1" min="0" placeholder="Default to max ~5MB"/>',1),bO=T('<input type="checkbox"/> <label><span class="txt">Strip urls domain</span> <i class="ri-information-line link-hint"></i></label>',1),yO=T("<!> <!>",1);function _O(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);let a=re(e,"field",12),s=re(e,"key",8,"");Ge(),ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ct.call(this,e,o)},remove(o){ct.call(this,e,o)},duplicate(o){ct.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=yO(),u=j(c);Ne(u,{class:"form-field m-b-sm",get name(){return`fields.${s()??""}.maxSize`},children:Ae,$$slots:{default:(f,h)=>{const p=ae(()=>h.uniqueId);var v=gO(),m=j(v),g=y(m,2);Y(g,"max",A(()=>Number.MAX_SAFE_INTEGER)),B(()=>{Y(m,"for",r(p)),Y(g,"id",r(p)),Un(g,(F(a()),A(()=>a().maxSize||"")))}),ce("input",g,k=>a(a().maxSize=parseInt(k.target.value,10),!0)),b(f,v)}}});var d=y(u,2);Ne(d,{class:"form-field form-field-toggle",get name(){return`fields.${s()??""}.convertURLs`},children:Ae,$$slots:{default:(f,h)=>{const p=ae(()=>h.uniqueId);var v=bO(),m=j(v),g=y(m,2),k=y(I(g),2);nt(k,(_,E)=>le==null?void 0:le(_,E),()=>({text:"This could help making the editor content more portable between environments since there will be no local base url to replace."})),B(()=>{Y(m,"id",r(p)),Y(g,"for",r(p))}),rn(m,()=>a().convertURLs,_=>a(a().convertURLs=_,!0)),b(f,v)}}}),b(o,c)}},$$legacy:!0})),Je()}var xO=T('<label><span class="txt">Except domains</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block">Use comma as separator.</div>',1),wO=T('<label><span class="txt">Only domains</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block">Use comma as separator.</div>',1),kO=T('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function Cb(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);let a=re(e,"field",12),s=re(e,"key",8,"");Ge(),ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ct.call(this,e,o)},remove(o){ct.call(this,e,o)},duplicate(o){ct.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=kO(),u=I(c),d=I(u);Ne(d,{class:"form-field",get name(){return`fields.${s()??""}.exceptDomains`},children:Ae,$$slots:{default:(p,v)=>{const m=ae(()=>v.uniqueId);var g=xO(),k=j(g),_=y(I(k),2);nt(_,(D,S)=>le==null?void 0:le(D,S),()=>({text:`List of domains that are NOT allowed. 
 This field is disabled if "Only domains" is set.`,position:"top"}));var E=y(k,2);{let D=ae(()=>(F(q),F(a()),A(()=>!q.isEmpty(a().onlyDomains))));$o(E,{get id(){return r(m)},get disabled(){return r(D)},get value(){return a().exceptDomains},set value(S){a(a().exceptDomains=S,!0)},$$legacy:!0})}B(()=>Y(k,"for",r(m))),b(p,g)}}});var f=y(u,2),h=I(f);Ne(h,{class:"form-field",get name(){return`fields.${s()??""}.onlyDomains`},children:Ae,$$slots:{default:(p,v)=>{const m=ae(()=>v.uniqueId);var g=wO(),k=j(g),_=y(I(k),2);nt(_,(D,S)=>le==null?void 0:le(D,S),()=>({text:`List of domains that are ONLY allowed. 
 This field is disabled if "Except domains" is set.`,position:"top"}));var E=y(k,2);{let D=ae(()=>(F(q),F(a()),A(()=>!q.isEmpty(a().exceptDomains))));$o(E,{get id(){return`${r(m)??""}.onlyDomains`},get disabled(){return r(D)},get value(){return a().onlyDomains},set value(S){a(a().onlyDomains=S,!0)},$$legacy:!0})}B(()=>Y(k,"for",`${r(m)??""}.onlyDomains`)),b(p,g)}}}),b(o,c)}},$$legacy:!0})),Je()}var SO=T('<span class="txt"> </span> <small class="txt-hint"> </small>',1);function am(n,e){Ke(e,!1);let t=re(e,"item",24,()=>({}));Ge();var i=SO(),a=j(i),s=I(a),o=y(a,2),l=I(o);B(()=>{Ee(s,(F(t()),A(()=>t().ext||"N/A"))),Ee(l,(F(t()),A(()=>t().mimeType)))}),b(n,i),Je()}const TO=[{ext:"",mimeType:"application/octet-stream"},{ext:".xpm",mimeType:"image/x-xpixmap"},{ext:".7z",mimeType:"application/x-7z-compressed"},{ext:".zip",mimeType:"application/zip"},{ext:".xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{ext:".docx",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{ext:".pptx",mimeType:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{ext:".epub",mimeType:"application/epub+zip"},{ext:".apk",mimeType:"application/vnd.android.package-archive"},{ext:".jar",mimeType:"application/jar"},{ext:".odt",mimeType:"application/vnd.oasis.opendocument.text"},{ext:".ott",mimeType:"application/vnd.oasis.opendocument.text-template"},{ext:".ods",mimeType:"application/vnd.oasis.opendocument.spreadsheet"},{ext:".ots",mimeType:"application/vnd.oasis.opendocument.spreadsheet-template"},{ext:".odp",mimeType:"application/vnd.oasis.opendocument.presentation"},{ext:".otp",mimeType:"application/vnd.oasis.opendocument.presentation-template"},{ext:".odg",mimeType:"application/vnd.oasis.opendocument.graphics"},{ext:".otg",mimeType:"application/vnd.oasis.opendocument.graphics-template"},{ext:".odf",mimeType:"application/vnd.oasis.opendocument.formula"},{ext:".odc",mimeType:"application/vnd.oasis.opendocument.chart"},{ext:".sxc",mimeType:"application/vnd.sun.xml.calc"},{ext:".pdf",mimeType:"application/pdf"},{ext:".fdf",mimeType:"application/vnd.fdf"},{ext:"",mimeType:"application/x-ole-storage"},{ext:".msi",mimeType:"application/x-ms-installer"},{ext:".aaf",mimeType:"application/octet-stream"},{ext:".msg",mimeType:"application/vnd.ms-outlook"},{ext:".xls",mimeType:"application/vnd.ms-excel"},{ext:".pub",mimeType:"application/vnd.ms-publisher"},{ext:".ppt",mimeType:"application/vnd.ms-powerpoint"},{ext:".doc",mimeType:"application/msword"},{ext:".ps",mimeType:"application/postscript"},{ext:".psd",mimeType:"image/vnd.adobe.photoshop"},{ext:".p7s",mimeType:"application/pkcs7-signature"},{ext:".ogg",mimeType:"application/ogg"},{ext:".oga",mimeType:"audio/ogg"},{ext:".ogv",mimeType:"video/ogg"},{ext:".png",mimeType:"image/png"},{ext:".png",mimeType:"image/vnd.mozilla.apng"},{ext:".jpg",mimeType:"image/jpeg"},{ext:".jxl",mimeType:"image/jxl"},{ext:".jp2",mimeType:"image/jp2"},{ext:".jpf",mimeType:"image/jpx"},{ext:".jpm",mimeType:"image/jpm"},{ext:".jxs",mimeType:"image/jxs"},{ext:".gif",mimeType:"image/gif"},{ext:".webp",mimeType:"image/webp"},{ext:".exe",mimeType:"application/vnd.microsoft.portable-executable"},{ext:"",mimeType:"application/x-elf"},{ext:"",mimeType:"application/x-object"},{ext:"",mimeType:"application/x-executable"},{ext:".so",mimeType:"application/x-sharedlib"},{ext:"",mimeType:"application/x-coredump"},{ext:".a",mimeType:"application/x-archive"},{ext:".deb",mimeType:"application/vnd.debian.binary-package"},{ext:".tar",mimeType:"application/x-tar"},{ext:".xar",mimeType:"application/x-xar"},{ext:".bz2",mimeType:"application/x-bzip2"},{ext:".fits",mimeType:"application/fits"},{ext:".tiff",mimeType:"image/tiff"},{ext:".bmp",mimeType:"image/bmp"},{ext:".ico",mimeType:"image/x-icon"},{ext:".mp3",mimeType:"audio/mpeg"},{ext:".flac",mimeType:"audio/flac"},{ext:".midi",mimeType:"audio/midi"},{ext:".ape",mimeType:"audio/ape"},{ext:".mpc",mimeType:"audio/musepack"},{ext:".amr",mimeType:"audio/amr"},{ext:".wav",mimeType:"audio/wav"},{ext:".aiff",mimeType:"audio/aiff"},{ext:".au",mimeType:"audio/basic"},{ext:".mpeg",mimeType:"video/mpeg"},{ext:".mov",mimeType:"video/quicktime"},{ext:".mp4",mimeType:"video/mp4"},{ext:".avif",mimeType:"image/avif"},{ext:".3gp",mimeType:"video/3gpp"},{ext:".3g2",mimeType:"video/3gpp2"},{ext:".mp4",mimeType:"audio/mp4"},{ext:".mqv",mimeType:"video/quicktime"},{ext:".m4a",mimeType:"audio/x-m4a"},{ext:".m4v",mimeType:"video/x-m4v"},{ext:".heic",mimeType:"image/heic"},{ext:".heic",mimeType:"image/heic-sequence"},{ext:".heif",mimeType:"image/heif"},{ext:".heif",mimeType:"image/heif-sequence"},{ext:".mj2",mimeType:"video/mj2"},{ext:".dvb",mimeType:"video/vnd.dvb.file"},{ext:".webm",mimeType:"video/webm"},{ext:".avi",mimeType:"video/x-msvideo"},{ext:".flv",mimeType:"video/x-flv"},{ext:".mkv",mimeType:"video/x-matroska"},{ext:".asf",mimeType:"video/x-ms-asf"},{ext:".aac",mimeType:"audio/aac"},{ext:".voc",mimeType:"audio/x-unknown"},{ext:".m3u",mimeType:"application/vnd.apple.mpegurl"},{ext:".rmvb",mimeType:"application/vnd.rn-realmedia-vbr"},{ext:".gz",mimeType:"application/gzip"},{ext:".class",mimeType:"application/x-java-applet"},{ext:".swf",mimeType:"application/x-shockwave-flash"},{ext:".crx",mimeType:"application/x-chrome-extension"},{ext:".ttf",mimeType:"font/ttf"},{ext:".woff",mimeType:"font/woff"},{ext:".woff2",mimeType:"font/woff2"},{ext:".otf",mimeType:"font/otf"},{ext:".ttc",mimeType:"font/collection"},{ext:".eot",mimeType:"application/vnd.ms-fontobject"},{ext:".wasm",mimeType:"application/wasm"},{ext:".shx",mimeType:"application/vnd.shx"},{ext:".shp",mimeType:"application/vnd.shp"},{ext:".dbf",mimeType:"application/x-dbf"},{ext:".dcm",mimeType:"application/dicom"},{ext:".rar",mimeType:"application/x-rar-compressed"},{ext:".djvu",mimeType:"image/vnd.djvu"},{ext:".mobi",mimeType:"application/x-mobipocket-ebook"},{ext:".lit",mimeType:"application/x-ms-reader"},{ext:".bpg",mimeType:"image/bpg"},{ext:".cbor",mimeType:"application/cbor"},{ext:".sqlite",mimeType:"application/vnd.sqlite3"},{ext:".dwg",mimeType:"image/vnd.dwg"},{ext:".nes",mimeType:"application/vnd.nintendo.snes.rom"},{ext:".lnk",mimeType:"application/x-ms-shortcut"},{ext:".macho",mimeType:"application/x-mach-binary"},{ext:".qcp",mimeType:"audio/qcelp"},{ext:".icns",mimeType:"image/x-icns"},{ext:".hdr",mimeType:"image/vnd.radiance"},{ext:".mrc",mimeType:"application/marc"},{ext:".mdb",mimeType:"application/x-msaccess"},{ext:".accdb",mimeType:"application/x-msaccess"},{ext:".zst",mimeType:"application/zstd"},{ext:".cab",mimeType:"application/vnd.ms-cab-compressed"},{ext:".rpm",mimeType:"application/x-rpm"},{ext:".xz",mimeType:"application/x-xz"},{ext:".lz",mimeType:"application/lzip"},{ext:".torrent",mimeType:"application/x-bittorrent"},{ext:".cpio",mimeType:"application/x-cpio"},{ext:"",mimeType:"application/tzif"},{ext:".xcf",mimeType:"image/x-xcf"},{ext:".pat",mimeType:"image/x-gimp-pat"},{ext:".gbr",mimeType:"image/x-gimp-gbr"},{ext:".glb",mimeType:"model/gltf-binary"},{ext:".cab",mimeType:"application/x-installshield"},{ext:".jxr",mimeType:"image/jxr"},{ext:".parquet",mimeType:"application/vnd.apache.parquet"},{ext:".txt",mimeType:"text/plain"},{ext:".html",mimeType:"text/html"},{ext:".svg",mimeType:"image/svg+xml"},{ext:".xml",mimeType:"text/xml"},{ext:".rss",mimeType:"application/rss+xml"},{ext:".atom",mimeType:"application/atom+xml"},{ext:".x3d",mimeType:"model/x3d+xml"},{ext:".kml",mimeType:"application/vnd.google-earth.kml+xml"},{ext:".xlf",mimeType:"application/x-xliff+xml"},{ext:".dae",mimeType:"model/vnd.collada+xml"},{ext:".gml",mimeType:"application/gml+xml"},{ext:".gpx",mimeType:"application/gpx+xml"},{ext:".tcx",mimeType:"application/vnd.garmin.tcx+xml"},{ext:".amf",mimeType:"application/x-amf"},{ext:".3mf",mimeType:"application/vnd.ms-package.3dmanufacturing-3dmodel+xml"},{ext:".xfdf",mimeType:"application/vnd.adobe.xfdf"},{ext:".owl",mimeType:"application/owl+xml"},{ext:".php",mimeType:"text/x-php"},{ext:".js",mimeType:"text/javascript"},{ext:".lua",mimeType:"text/x-lua"},{ext:".pl",mimeType:"text/x-perl"},{ext:".py",mimeType:"text/x-python"},{ext:".json",mimeType:"application/json"},{ext:".geojson",mimeType:"application/geo+json"},{ext:".har",mimeType:"application/json"},{ext:".ndjson",mimeType:"application/x-ndjson"},{ext:".rtf",mimeType:"text/rtf"},{ext:".srt",mimeType:"application/x-subrip"},{ext:".tcl",mimeType:"text/x-tcl"},{ext:".csv",mimeType:"text/csv"},{ext:".tsv",mimeType:"text/tab-separated-values"},{ext:".vcf",mimeType:"text/vcard"},{ext:".ics",mimeType:"text/calendar"},{ext:".warc",mimeType:"application/warc"},{ext:".vtt",mimeType:"text/vtt"}];var $O=T('<div class="separator"></div> <!> <div class="separator"></div>',1),IO=T('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Images (jpg, png, svg, gif, webp)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Documents (pdf, doc/docx, xls/xlsx)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Videos (mp4, avi, mov, 3gp)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Archives (zip, 7zip, rar)</span></button>',1),CO=T('<label><span class="txt">Allowed mime types</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block"><div tabindex="0" role="button" class="inline-flex flex-gap-0"><span class="txt link-primary">Choose presets</span> <i class="ri-arrow-drop-down-fill" aria-hidden="true"></i> <!></div></div>',1),EO=T('<ul class="m-0"><li><strong>WxH</strong> (e.g. 100x50) - crop to WxH viewbox (from center)</li> <li><strong>WxHt</strong> (e.g. 100x50t) - crop to WxH viewbox (from top)</li> <li><strong>WxHb</strong> (e.g. 100x50b) - crop to WxH viewbox (from bottom)</li> <li><strong>WxHf</strong> (e.g. 100x50f) - fit inside a WxH viewbox (without cropping)</li> <li><strong>0xH</strong> (e.g. 0x50) - resize to H height preserving the aspect ratio</li> <li><strong>Wx0</strong> (e.g. 100x0) - resize to W width preserving the aspect ratio</li></ul>'),OO=T('<label><span class="txt">Thumb sizes</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block"><span class="txt">Use comma as separator.</span> <button type="button" class="inline-flex flex-gap-0"><span class="txt link-primary">Supported formats</span> <i class="ri-arrow-drop-down-fill" aria-hidden="true"></i> <!></button></div>',1),DO=T('<label>Max file size</label> <input type="number" step="1" min="0" placeholder="Default to max ~5MB"/> <div class="help-block">Must be in bytes.</div>',1),PO=T('<label>Max select</label> <input type="number" step="1" min="2" required placeholder="Default to single"/>',1),MO=T('<div class="col-sm-3"><!></div>'),AO=T('<input type="checkbox"/> <label><span class="txt">Protected</span></label> <small class="txt-hint">it will require View API rule permissions and file token to be accessible <a class="toggle-info" target="_blank" rel="noopener">(Learn more)</a></small>',1),LO=T('<div class="grid grid-sm"><div class="col-sm-12"><!></div> <div><!></div> <div><!></div> <!> <!></div>');function NO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);let a=re(e,"field",12),s=re(e,"key",8,"");const o=[{label:"Single",value:!0},{label:"Multiple",value:!1}];let l=M(TO.slice()),c=M(a().maxSelect<=1),u=M(r(c));function d(){a(a().maxSelect=1,!0),a(a().thumbs=[],!0),a(a().mimeTypes=[],!0),x(c,!0),x(u,r(c))}function f(){if(q.isEmpty(a().mimeTypes))return;const h=[];for(const p of a().mimeTypes)r(l).find(v=>v.mimeType===p)||h.push({mimeType:p});h.length&&x(l,r(l).concat(h))}se(()=>F(a()),()=>{typeof a().maxSelect>"u"?d():f()}),se(()=>(r(u),r(c)),()=>{r(u)!=r(c)&&(x(u,r(c)),r(c)?a(a().maxSelect=1,!0):a(a().maxSelect=99,!0))}),ht(),Ge(),ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(h){a(h)},$$events:{rename(h){ct.call(this,e,h)},remove(h){ct.call(this,e,h)},duplicate(h){ct.call(this,e,h)}},children:Ae,$$slots:{default:(h,p)=>{const v=ae(()=>p.interactive);var m=$O(),g=y(j(m),2);{let k=ae(()=>r(v)?"":"readonly");Ne(g,{get class(){return`form-field form-field-single-multiple-select ${r(k)??""}`},inlineError:!0,children:Ae,$$slots:{default:(_,E)=>{const D=ae(()=>E.uniqueId);{let S=ae(()=>!r(v));Vn(_,{get id(){return r(D)},get items(){return o},get readonly(){return r(S)},get keyOfSelected(){return r(c)},set keyOfSelected(C){x(c,C)},$$legacy:!0})}}}})}b(h,m)},options:(h,p)=>{var v=LO(),m=I(v),g=I(m);Ne(g,{class:"form-field",get name(){return`fields.${s()??""}.mimeTypes`},children:Ae,$$slots:{default:($,O)=>{const P=ae(()=>O.uniqueId);var L=CO(),N=j(L),V=y(I(N),2);nt(V,(J,W)=>le==null?void 0:le(J,W),()=>({text:`Allow files ONLY with the listed mime types. 
 Leave empty for no restriction.`,position:"top"}));var R=y(N,2);Vn(R,{get id(){return r(P)},multiple:!0,searchable:!0,closable:!1,selectionKey:"mimeType",selectPlaceholder:"No restriction",get items(){return r(l)},get labelComponent(){return am},get optionComponent(){return am},get keyOfSelected(){return a().mimeTypes},set keyOfSelected(J){a(a().mimeTypes=J,!0)},$$legacy:!0});var U=y(R,2),H=I(U),z=y(I(H),4);ii(z,{class:"dropdown dropdown-sm dropdown-nowrap dropdown-left",children:(J,W)=>{var te=IO(),de=j(te),pe=y(de,2),_e=y(pe,2),ke=y(_e,2);ce("click",de,()=>{a(a().mimeTypes=["image/jpeg","image/png","image/svg+xml","image/gif","image/webp"],!0)}),ce("click",pe,()=>{a(a().mimeTypes=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],!0)}),ce("click",_e,()=>{a(a().mimeTypes=["video/mp4","video/x-ms-wmv","video/quicktime","video/3gpp"],!0)}),ce("click",ke,()=>{a(a().mimeTypes=["application/zip","application/x-7z-compressed","application/x-rar-compressed"],!0)}),b(J,te)},$$slots:{default:!0}}),B(()=>Y(N,"for",r(P))),b($,L)}}});var k=y(m,2),_=I(k);Ne(_,{class:"form-field",get name(){return`fields.${s()??""}.thumbs`},children:Ae,$$slots:{default:($,O)=>{const P=ae(()=>O.uniqueId);var L=OO(),N=j(L),V=y(I(N),2);nt(V,(J,W)=>le==null?void 0:le(J,W),()=>({text:"List of additional thumb sizes for image files, along with the default thumb size of 100x100. The thumbs are generated lazily on first access.",position:"top"}));var R=y(N,2);$o(R,{get id(){return r(P)},placeholder:"e.g. 50x50, 480x720",get value(){return a().thumbs},set value(J){a(a().thumbs=J,!0)},$$legacy:!0});var U=y(R,2),H=y(I(U),2),z=y(I(H),4);ii(z,{class:"dropdown dropdown-sm dropdown-center dropdown-nowrap p-r-10",children:(J,W)=>{var te=EO();b(J,te)},$$slots:{default:!0}}),B(()=>Y(N,"for",r(P))),b($,L)}}});var E=y(k,2),D=I(E);Ne(D,{class:"form-field",get name(){return`fields.${s()??""}.maxSize`},children:Ae,$$slots:{default:($,O)=>{const P=ae(()=>O.uniqueId);var L=DO(),N=j(L),V=y(N,2);Y(V,"max",A(()=>Number.MAX_SAFE_INTEGER)),B(()=>{Y(N,"for",r(P)),Y(V,"id",r(P)),Un(V,(F(a()),A(()=>a().maxSize||"")))}),ce("input",V,R=>a(a().maxSize=parseInt(R.target.value,10),!0)),b($,L)}}});var S=y(E,2);{var C=$=>{var O=MO(),P=I(O);Ne(P,{class:"form-field",get name(){return`fields.${s()??""}.maxSelect`},children:Ae,$$slots:{default:(L,N)=>{const V=ae(()=>N.uniqueId);var R=PO(),U=j(R),H=y(U,2);Y(H,"max",A(()=>Number.MAX_SAFE_INTEGER)),B(()=>{Y(U,"for",r(V)),Y(H,"id",r(V))}),_t(H,()=>a().maxSelect,z=>a(a().maxSelect=z,!0)),b(L,R)}}}),b($,O)};X(S,$=>{r(c)||$(C)})}var w=y(S,2);Ne(w,{class:"form-field form-field-toggle",get name(){return`fields.${s()??""}.protected`},children:Ae,$$slots:{default:($,O)=>{const P=ae(()=>O.uniqueId);var L=AO(),N=j(L),V=y(N,2),R=y(V,2),U=y(I(R));B(()=>{Y(N,"id",r(P)),Y(V,"for",r(P)),Y(U,"href",A(()=>"https://pocketbase.io/docs/files-handling#protected-files"))}),rn(N,()=>a().protected,H=>a(a().protected=H,!0)),b($,L)}}}),B(()=>{Ue(k,1,En(r(c)?"col-sm-8":"col-sm-6")),Ue(E,1,En(r(c)?"col-sm-4":"col-sm-3"))}),b(h,v)}},$$legacy:!0})),Je()}var RO=T('<label>Max size <small>(bytes)</small></label> <input type="number" step="1" min="0" placeholder="Default to max ~1MB"/>',1),FO=T('<i class="ri-arrow-up-s-line txt-sm"></i>'),qO=T('<i class="ri-arrow-down-s-line txt-sm"></i>'),zO=T(`<div class="block"><div class="alert alert-warning m-b-0 m-t-10"><div class="content">In order to support seamlessly both <code>application/json</code> and <code>multipart/form-data</code> requests, the following normalization rules are applied if the <code>json</code> field
                        is a <strong>plain string</strong>: <ul><li>"true" is converted to the json <code>true</code></li> <li>"false" is converted to the json <code>false</code></li> <li>"null" is converted to the json <code>null</code></li> <li>"[1,2,3]" is converted to the json <code>[1,2,3]</code></li> <li> <code></code></li> <li>numeric strings are converted to json number</li> <li>double quoted strings are left as they are (aka. without normalizations)</li> <li>any other string (empty string too) is double quoted</li></ul> Alternatively, if you want to avoid the string value normalizations, you can wrap your
                        data inside an object, eg.<code></code></div></div></div>`),jO=T('<!> <button type="button"><strong class="txt">String value normalizations</strong> <!></button> <!>',1);function VO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);let a=re(e,"field",12),s=re(e,"key",8,""),o=M(!1);Ge(),ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(l){a(l)},$$events:{rename(l){ct.call(this,e,l)},remove(l){ct.call(this,e,l)},duplicate(l){ct.call(this,e,l)}},$$slots:{options:(l,c)=>{var u=jO(),d=j(u);Ne(d,{class:"form-field m-b-sm",get name(){return`fields.${s()??""}.maxSize`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=RO(),S=j(D),C=y(S,2);Y(C,"max",A(()=>Number.MAX_SAFE_INTEGER)),B(()=>{Y(S,"for",r(E)),Y(C,"id",r(E)),Un(C,(F(a()),A(()=>a().maxSize||"")))}),ce("input",C,w=>a(a().maxSize=parseInt(w.target.value,10),!0)),b(k,D)}}});var f=y(d,2),h=y(I(f),2);{var p=k=>{var _=FO();b(k,_)},v=k=>{var _=qO();b(k,_)};X(h,k=>{r(o)?k(p):k(v,!1)})}var m=y(f,2);{var g=k=>{var _=zO(),E=I(_),D=I(E),S=y(I(D),9),C=y(I(S),8),w=I(C);w.nodeValue='"{"a":1,"b":2}" is converted to the json ';var $=y(w);$.textContent='{"a":1,"b":2}';var O=y(S,2);O.textContent='{"data": anything}',Ct(3,_,()=>yn,()=>({duration:150})),b(k,_)};X(m,k=>{r(o)&&k(g)})}B(()=>Ue(f,1,`btn btn-sm ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),ce("click",f,()=>{x(o,!r(o))}),b(l,u)}},$$legacy:!0})),Je()}var UO=T('<label>Min</label> <input type="number"/>',1),BO=T('<label>Max</label> <input type="number"/>',1),HO=T('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>'),WO=T('<input type="checkbox"/> <label><span class="txt">No decimals</span> <i class="ri-information-line link-hint"></i></label>',1);function YO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);let a=re(e,"field",12),s=re(e,"key",8,"");Ge(),ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ct.call(this,e,o)},remove(o){ct.call(this,e,o)},duplicate(o){ct.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=HO(),u=I(c),d=I(u);Ne(d,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ae,$$slots:{default:(p,v)=>{const m=ae(()=>v.uniqueId);var g=UO(),k=j(g),_=y(k,2);B(()=>{Y(k,"for",r(m)),Y(_,"id",r(m))}),_t(_,()=>a().min,E=>a(a().min=E,!0)),b(p,g)}}});var f=y(u,2),h=I(f);Ne(h,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ae,$$slots:{default:(p,v)=>{const m=ae(()=>v.uniqueId);var g=BO(),k=j(g),_=y(k,2);B(()=>{Y(k,"for",r(m)),Y(_,"id",r(m)),Y(_,"min",(F(a()),A(()=>a().min)))}),_t(_,()=>a().max,E=>a(a().max=E,!0)),b(p,g)}}}),b(o,c)},optionsFooter:(o,l)=>{Ne(o,{class:"form-field form-field-toggle",get name(){return`fields.${s()??""}.onlyInt`},children:Ae,$$slots:{default:(c,u)=>{const d=ae(()=>u.uniqueId);var f=WO(),h=j(f),p=y(h,2),v=y(I(p),2);nt(v,(m,g)=>le==null?void 0:le(m,g),()=>({text:"Existing decimal numbers will not be affected."})),B(()=>{Y(h,"id",r(d)),Y(p,"for",r(d))}),rn(h,()=>a().onlyInt,m=>a(a().onlyInt=m,!0)),b(c,f)}}})}},$$legacy:!0})),Je()}var KO=T('<label>Min length</label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),JO=T('<label>Max length</label> <input type="number" step="1" placeholder="Up to 71 chars" max="71"/>',1),ZO=T('<label>Bcrypt cost</label> <input type="number" placeholder="Default to 10" step="1" min="6" max="31"/>',1),GO=T('<label>Validation pattern</label> <input type="text" placeholder="ex. ^\\w+$"/>',1),XO=T('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function QO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);let a=re(e,"field",12),s=re(e,"key",8,"");function o(){a(a().cost=11,!0)}se(()=>F(a()),()=>{q.isEmpty(a().id)&&o()}),ht(),Ge(),ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(l){a(l)},$$events:{rename(l){ct.call(this,e,l)},remove(l){ct.call(this,e,l)},duplicate(l){ct.call(this,e,l)}},$$slots:{options:(l,c)=>{var u=XO(),d=I(u),f=I(d);Ne(f,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ae,$$slots:{default:(_,E)=>{const D=ae(()=>E.uniqueId);var S=KO(),C=j(S),w=y(C,2);B(()=>{Y(C,"for",r(D)),Y(w,"id",r(D)),Un(w,(F(a()),A(()=>a().min||"")))}),ce("input",w,$=>a(a().min=$.target.value<<0,!0)),b(_,S)}}});var h=y(d,2),p=I(h);Ne(p,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ae,$$slots:{default:(_,E)=>{const D=ae(()=>E.uniqueId);var S=JO(),C=j(S),w=y(C,2);B(()=>{Y(C,"for",r(D)),Y(w,"id",r(D)),Y(w,"min",(F(a()),A(()=>a().min||0))),Un(w,(F(a()),A(()=>a().max||"")))}),ce("input",w,$=>a(a().max=$.target.value<<0,!0)),b(_,S)}}});var v=y(h,2),m=I(v);Ne(m,{class:"form-field",get name(){return`fields.${s()??""}.cost`},children:Ae,$$slots:{default:(_,E)=>{const D=ae(()=>E.uniqueId);var S=ZO(),C=j(S),w=y(C,2);B(()=>{Y(C,"for",r(D)),Y(w,"id",r(D)),Un(w,(F(a()),A(()=>a().cost||"")))}),ce("input",w,$=>a(a().cost=$.target.value<<0,!0)),b(_,S)}}});var g=y(v,2),k=I(g);Ne(k,{class:"form-field",get name(){return`fields.${s()??""}.pattern`},children:Ae,$$slots:{default:(_,E)=>{const D=ae(()=>E.uniqueId);var S=GO(),C=j(S),w=y(C,2);B(()=>{Y(C,"for",r(D)),Y(w,"id",r(D))}),_t(w,()=>a().pattern,$=>a(a().pattern=$,!0)),b(_,S)}}}),b(l,u)}},$$legacy:!0})),Je()}var eD=T('<hr/> <button type="button" class="btn btn-transparent btn-block btn-sm"><i class="ri-add-line"></i> <span class="txt">New collection</span></button>',1),tD=T('<!> <div class="separator"></div>',1),nD=T('<label><span class="txt">Allowed collections (optional, multi)</span> <i class="ri-information-line link-hint"></i></label> <!>',1),iD=T('<!> <div class="separator"></div>',1),rD=T('<div class="separator"></div> <!> <!> <div class="separator"></div>',1),aD=T('<label>Min select</label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),sD=T('<label>Max select</label> <input type="number" step="1" placeholder="Default to single"/>',1),oD=T('<div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div>',1),lD=T('<label><span class="txt">Cascade delete</span> <i class="ri-information-line link-hint"></i></label> <!>',1),cD=T('<div class="grid grid-sm"><!> <div class="col-sm-12"><!></div></div>'),uD=T("<!> <!>",1);function dD(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);const[a,s]=Rt(),o=()=>It(ai,"$collections",a),l=M(),c=M(),u=M();let d=re(e,"field",12),f=re(e,"key",8,"");const h=[{label:"Single",value:!0},{label:"Multiple",value:!1}],p=[{label:"False",value:!1},{label:"True",value:!0}];let v=M(null),m=M(d().maxSelect<=1),g=M(r(m));function k(){d(d().maxSelect=1,!0),d(d().collectionId=null,!0),d(d().collectionIds=[],!0),d(d().cascadeDelete=!1,!0),x(m,!0),x(g,r(m))}se(()=>o(),()=>{x(l,o().filter(S=>!S.system&&S.type!="view"))}),se(()=>F(d()),()=>{typeof d().maxSelect>"u"&&k()}),se(()=>(r(g),r(m)),()=>{r(g)!=r(m)&&(x(g,r(m)),r(m)?(d(d().minSelect=0,!0),d(d().maxSelect=1,!0)):d(d().maxSelect=999,!0))}),se(()=>(o(),F(d())),()=>{x(c,o().find(S=>S.id==d().collectionId)||null)}),se(()=>F(d()),()=>{x(u,Array.isArray(d().collectionIds)&&d().collectionIds.length>0)}),ht(),Ge();var _=uD(),E=j(_);ki(E,sn({get key(){return f()}},()=>i,{get field(){return d()},set field(S){d(S)},$$events:{rename(S){ct.call(this,e,S)},remove(S){ct.call(this,e,S)},duplicate(S){ct.call(this,e,S)}},children:Ae,$$slots:{default:(S,C)=>{const w=ae(()=>C.interactive);var $=rD(),O=y(j($),2);{var P=V=>{var R=tD(),U=j(R);{let H=ae(()=>r(w)?"":"readonly");Ne(U,{get class(){return`form-field required ${r(H)??""}`},inlineError:!0,get name(){return`fields.${f()??""}.collectionId`},children:Ae,$$slots:{default:(z,J)=>{const W=ae(()=>J.uniqueId);{let te=ae(()=>(r(l),A(()=>r(l).length>5))),de=ae(()=>(F(r(w)),F(d()),A(()=>!r(w)||d().id)));Vn(z,{get id(){return r(W)},get searchable(){return r(te)},selectPlaceholder:"Select collection *",noOptionsText:"No collections found",selectionKey:"id",get items(){return r(l)},get readonly(){return r(de)},get keyOfSelected(){return d().collectionId},set keyOfSelected(pe){d(d().collectionId=pe,!0)},$$slots:{afterOptions:(pe,_e)=>{var ke=eD(),ve=y(j(ke),2);ce("click",ve,()=>{var Oe;return(Oe=r(v))==null?void 0:Oe.show()}),b(pe,ke)}},$$legacy:!0})}}}})}b(V,R)},L=V=>{var R=iD(),U=j(R);Ne(U,{class:"form-field",get name(){return`fields.${f()??""}.collectionIds`},children:Ae,$$slots:{default:(H,z)=>{const J=ae(()=>z.uniqueId);var W=nD(),te=j(W),de=y(I(te),2);nt(de,(_e,ke)=>le==null?void 0:le(_e,ke),()=>({text:"If set, the relation can point to records from multiple collections. Values are stored as '<collectionId>:<id>'.",position:"top"}));var pe=y(te,2);{let _e=ae(()=>(r(l),A(()=>r(l).length>5))),ke=ae(()=>(F(r(w)),F(d()),A(()=>!r(w)||d().id)));Vn(pe,{get id(){return r(J)},multiple:!0,get searchable(){return r(_e)},selectPlaceholder:"Select allowed collections",noOptionsText:"No collections found",selectionKey:"id",get items(){return r(l)},get readonly(){return r(ke)},get keyOfSelected(){return d().collectionIds},set keyOfSelected(ve){d(d().collectionIds=ve,!0)},$$legacy:!0})}B(()=>Y(te,"for",r(J))),b(H,W)}}}),b(V,R)};X(O,V=>{r(m)?V(P):V(L,!1)})}var N=y(O,2);{let V=ae(()=>r(w)?"":"readonly");Ne(N,{get class(){return`form-field form-field-single-multiple-select ${r(V)??""}`},inlineError:!0,children:Ae,$$slots:{default:(R,U)=>{const H=ae(()=>U.uniqueId);{let z=ae(()=>!r(w));Vn(R,{get id(){return r(H)},get items(){return h},get readonly(){return r(z)},get keyOfSelected(){return r(m)},set keyOfSelected(J){x(m,J)},$$legacy:!0})}}}})}b(S,$)},options:(S,C)=>{var w=cD(),$=I(w);{var O=N=>{var V=oD(),R=j(V),U=I(R);Ne(U,{class:"form-field",get name(){return`fields.${f()??""}.minSelect`},children:Ae,$$slots:{default:(J,W)=>{const te=ae(()=>W.uniqueId);var de=aD(),pe=j(de),_e=y(pe,2);B(()=>{Y(pe,"for",r(te)),Y(_e,"id",r(te)),Un(_e,(F(d()),A(()=>d().minSelect||"")))}),ce("input",_e,ke=>d(d().minSelect=ke.target.value<<0,!0)),b(J,de)}}});var H=y(R,2),z=I(H);Ne(z,{class:"form-field",get name(){return`fields.${f()??""}.maxSelect`},children:Ae,$$slots:{default:(J,W)=>{const te=ae(()=>W.uniqueId);var de=sD(),pe=j(de),_e=y(pe,2);B(()=>{Y(pe,"for",r(te)),Y(_e,"id",r(te)),Y(_e,"min",(F(d()),A(()=>d().minSelect||1)))}),_t(_e,()=>d().maxSelect,ke=>d(d().maxSelect=ke,!0)),b(J,de)}}}),b(N,V)};X($,N=>{r(m)||N(O)})}var P=y($,2),L=I(P);Ne(L,{class:"form-field",get name(){return`fields.${f()??""}.cascadeDelete`},children:Ae,$$slots:{default:(N,V)=>{const R=ae(()=>V.uniqueId);var U=lD(),H=j(U),z=y(I(H),2);nt(z,(W,te)=>le==null?void 0:le(W,te),()=>{var W,te;return{text:[`Whether on ${((W=r(c))==null?void 0:W.name)||"relation"} record deletion to delete also the current corresponding collection record(s).`,r(m)?null:`For "Multiple" relation fields the cascade delete is triggered only when all ${((te=r(c))==null?void 0:te.name)||"relation"} ids are removed from the corresponding record.`].filter(Boolean).join(`

`),position:"top"}});var J=y(H,2);Vn(J,{get id(){return r(R)},get items(){return p},get keyOfSelected(){return d().cascadeDelete},set keyOfSelected(W){d(d().cascadeDelete=W,!0)},$$legacy:!0}),B(()=>Y(H,"for",r(R))),b(N,U)}}}),b(S,w)}},$$legacy:!0}));var D=y(E,2);gt(vf(D,{$$events:{save:S=>{var C,w;(w=(C=S==null?void 0:S.detail)==null?void 0:C.collection)!=null&&w.id&&S.detail.collection.type!="view"&&d(d().collectionId=S.detail.collection.id,!0)}},$$legacy:!0}),S=>x(v,S),()=>r(v)),b(n,_),Je(),s()}var fD=T('<div class="dropdown-item plain svelte-3le152"><span class="txt"> </span> <div class="flex-fill"></div> <button type="button" class="btn btn-circle btn-transparent btn-hint btn-xs" title="Remove"><i class="ri-close-line" aria-hidden="true"></i></button></div>'),hD=T('<div class="block"><!> <div class="new-item-form svelte-3le152"><div class="form-field form-field-sm m-0"><div class="input-group"><input type="text" class="new-item-input svelte-3le152"/> <div class="form-field-addon suffix"><button type="button" title="Add new"><i class="ri-add-line" aria-hidden="true"></i></button></div></div></div></div></div>'),vD=T('<div class="block"><input readonly="" type="text" class="formatted-value-input svelte-3le152"/> <!></div>');function mD(n,e){Ke(e,!1);const t=M();let i=re(e,"id",8,null),a=re(e,"items",28,()=>[]),s=re(e,"disabled",8,!1),o=re(e,"emptyPlaceholder",8,"Add items"),l=re(e,"newPlaceholder",8,"e.g. optionA"),c=M(),u=M("");function d(g){var k;a(a()||[]),q.removeByValue(a(),g),a().length||(k=r(c))==null||k.focus()}function f(g){const k=g.trim();k.length&&(a(a()||[]),q.pushUnique(a(),k),x(u,""))}se(()=>F(a()),()=>{x(t,a().join(" â¢ "))}),ht(),Ge();var h=vD(),p=I(h),v=y(p,2);{var m=g=>{ii(g,{class:"dropdown dropdown-block options-dropdown dropdown-left m-t-0 p-0",$$events:{hide:()=>x(u,"")},children:(k,_)=>{var E=hD(),D=I(E);bt(D,3,a,N=>N,(N,V,R)=>{{let U=ae(()=>"options_"+i());$s(N,{get index(){return r(R)},get group(){return r(U)},get list(){return a()},set list(H){a(H)},children:(H,z)=>{var J=fD(),W=I(J),te=I(W),de=y(W,4);B(()=>Ee(te,r(V))),ce("click",de,gn(()=>d(r(V)))),b(H,J)},$$slots:{default:!0},$$legacy:!0})}});var S=y(D,2),C=I(S),w=I(C),$=I(w);Gi($,!0),gt($,N=>x(c,N),()=>r(c));var O=y($,2),P=I(O);let L;B(N=>{Y($,"placeholder",l()),L=Ue(P,1,"btn btn-transparent btn-xs btn-circle new-item-btn svelte-3le152",null,L,N)},[()=>({"btn-disabled":!r(u).length})]),_t($,()=>r(u),N=>x(u,N)),ce("keydown",$,N=>{N.code==="Enter"&&(N.preventDefault(),f(N.target.value))}),ce("click",P,()=>f(r(u))),ce("dragover",E,gn(function(N){ct.call(this,e,N)})),ce("dragleave",E,gn(function(N){ct.call(this,e,N)})),ce("dragend",E,gn(function(N){ct.call(this,e,N)})),ce("dragstart",E,gn(function(N){ct.call(this,e,N)})),ce("drop",E,gn(function(N){ct.call(this,e,N)})),b(k,E)},$$slots:{default:!0}})};X(v,g=>{s()||g(m)})}B(()=>{Y(p,"id",i()),p.disabled=s(),Y(p,"placeholder",o()),Un(p,r(t)),Y(p,"title",r(t))}),b(n,h),Je()}var pD=T('<div class="separator"></div> <!> <div class="separator"></div> <!> <div class="separator"></div>',1),gD=T('<label>Max select</label> <input type="number" step="1" min="2" placeholder="Default to single"/>',1);function bD(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);let a=re(e,"field",12),s=re(e,"key",8,"");const o=[{label:"Single",value:!0},{label:"Multiple",value:!1}];let l=M(a().maxSelect<=1),c=M(r(l));function u(){a(a().maxSelect=1,!0),a(a().values=[],!0),x(l,!0),x(c,r(l))}se(()=>F(a()),()=>{typeof a().maxSelect>"u"&&u()}),se(()=>(r(c),r(l),F(a())),()=>{var d;r(c)!=r(l)&&(x(c,r(l)),r(l)?a(a().maxSelect=1,!0):a(a().maxSelect=((d=a().values)==null?void 0:d.length)||2,!0))}),ht(),Ge(),ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(d){a(d)},$$events:{rename(d){ct.call(this,e,d)},remove(d){ct.call(this,e,d)},duplicate(d){ct.call(this,e,d)}},children:Ae,$$slots:{default:(d,f)=>{const h=ae(()=>f.interactive);var p=pD(),v=y(j(p),2);{let g=ae(()=>r(h)?"":"readonly");Ne(v,{get class(){return`form-field required ${r(g)??""}`},inlineError:!0,get name(){return`fields.${s()??""}.values`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);mD(k,{get id(){return r(E)},emptyPlaceholder:"Add choices *",get items(){return a().values},set items(D){a(a().values=D,!0)},$$legacy:!0})}}})}var m=y(v,4);{let g=ae(()=>r(h)?"":"readonly");Ne(m,{get class(){return`form-field form-field-single-multiple-select ${r(g)??""}`},inlineError:!0,children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);{let D=ae(()=>!r(h));Vn(k,{get id(){return r(E)},get items(){return o},get readonly(){return r(D)},get keyOfSelected(){return r(l)},set keyOfSelected(S){x(l,S)},$$legacy:!0})}}}})}b(d,p)},options:(d,f)=>{var h=rt(),p=j(h);{var v=m=>{Ne(m,{class:"form-field",get name(){return`fields.${s()??""}.maxSelect`},children:Ae,$$slots:{default:(g,k)=>{const _=ae(()=>k.uniqueId);var E=gD(),D=j(E),S=y(D,2);B(()=>{Y(D,"for",r(_)),Y(S,"id",r(_)),Y(S,"max",(F(a()),A(()=>a().values.length)))}),_t(S,()=>a().maxSelect,C=>a(a().maxSelect=C,!0)),b(g,E)}}})};X(p,m=>{r(l)||m(v)})}b(d,h)}},$$legacy:!0})),Je()}var yD=T('<label><span class="txt">Min length</span> <i class="ri-information-line link-hint"></i></label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),_D=T('<label><span class="txt">Max length</span> <i class="ri-information-line link-hint"></i></label> <input type="number" step="1" placeholder="Default to max 5000 characters"/>',1),xD=T('<i class="ri-information-line link-hint"></i>'),wD=T('<label><span class="txt">Validation pattern</span> <!></label> <input type="text"/> <div class="help-block"><p>Ex. <code></code></p></div>',1),kD=T('<label><span class="txt">Autogenerate pattern</span> <i class="ri-information-line link-hint"></i></label> <input type="text"/> <div class="help-block"><p>Ex. <code></code></p></div>',1),SD=T('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function TD(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ke(e,!1);let a=re(e,"field",12),s=re(e,"key",8,"");Ge(),ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ct.call(this,e,o)},remove(o){ct.call(this,e,o)},duplicate(o){ct.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=SD(),u=I(c),d=I(u);Ne(d,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=yD(),S=j(D),C=y(I(S),2);nt(C,($,O)=>le==null?void 0:le($,O),()=>"Clear the field or set it to 0 for no limit.");var w=y(S,2);Y(w,"max",A(()=>Number.MAX_SAFE_INTEGER)),B(()=>{Y(S,"for",r(E)),Y(w,"id",r(E)),Un(w,(F(a()),A(()=>a().min||"")))}),ce("input",w,$=>a(a().min=parseInt($.target.value,10),!0)),b(k,D)}}});var f=y(u,2),h=I(f);Ne(h,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=_D(),S=j(D),C=y(I(S),2);nt(C,($,O)=>le==null?void 0:le($,O),()=>"Clear the field or set it to 0 to fallback to the default limit.");var w=y(S,2);Y(w,"max",A(()=>Number.MAX_SAFE_INTEGER)),B(()=>{Y(S,"for",r(E)),Y(w,"id",r(E)),Y(w,"min",(F(a()),A(()=>a().min||0))),Un(w,(F(a()),A(()=>a().max||"")))}),ce("input",w,$=>a(a().max=parseInt($.target.value,10),!0)),b(k,D)}}});var p=y(f,2),v=I(p);Ne(v,{class:"form-field",get name(){return`fields.${s()??""}.pattern`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=wD(),S=j(D),C=y(I(S),2);{var w=N=>{var V=xD();nt(V,(R,U)=>le==null?void 0:le(R,U),()=>"All record ids have unique case-insensitive (ASCII) validation applied in addition to the user defined validation pattern."),b(N,V)};X(C,N=>{F(a()),A(()=>a().primaryKey)&&N(w)})}var $=y(S,2),O=y($,2),P=I(O),L=y(I(P));L.textContent="^[a-z0-9]+$",B(()=>{Y(S,"for",r(E)),Y($,"id",r(E))}),_t($,()=>a().pattern,N=>a(a().pattern=N,!0)),b(k,D)}}});var m=y(p,2),g=I(m);Ne(g,{class:"form-field",get name(){return`fields.${s()??""}.autogeneratePattern`},children:Ae,$$slots:{default:(k,_)=>{const E=ae(()=>_.uniqueId);var D=kD(),S=j(D),C=y(I(S),2);nt(C,(L,N)=>le==null?void 0:le(L,N),()=>"Set and autogenerate text matching the pattern on missing record create value.");var w=y(S,2),$=y(w,2),O=I($),P=y(I(O));P.textContent="[a-z0-9]{30}",B(()=>{Y(S,"for",r(E)),Y(w,"id",r(E))}),_t(w,()=>a().autogeneratePattern,L=>a(a().autogeneratePattern=L,!0)),b(k,D)}}}),b(o,c)}},$$legacy:!0})),Je()}function $D(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);let a=re(e,"field",12),s=re(e,"key",8,"");Cb(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ct.call(this,e,o)},remove(o){ct.call(this,e,o)},duplicate(o){ct.call(this,e,o)}},$$legacy:!0}))}function ID(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);let a=re(e,"field",12),s=re(e,"key",8,"");ki(n,sn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ct.call(this,e,o)},remove(o){ct.call(this,e,o)},duplicate(o){ct.call(this,e,o)}},$$legacy:!0}))}var CD=T("<div></div> <!> <hr/> <!>",1);function ED(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Bd,"$scaffolds",t),s=M();let o=re(e,"collection",12),l=M();const c={text:TD,number:YO,bool:aO,email:Cb,url:$D,editor:_O,date:pO,select:bD,json:VO,file:NO,relation:dD,password:QO,autodate:rO,geoPoint:ID};function u(w){o().fields[w]&&(o().fields.splice(w,1),o(o().fields=o().fields,!0))}function d(w){const $=o().fields[w];if(!$)return;$.onMountSelect=!1;const O=structuredClone($);O.id="",O.system=!1,O.name=h(O.name+"_copy"),O.onMountSelect=!0,o().fields.splice(w+1,0,O),o(o().fields=o().fields,!0)}function f(w="text"){const $=q.initSchemaField({name:h(),type:w});$.onMountSelect=!0;const O=o().fields.findLastIndex(P=>P.type!="autodate");$.type!="autodate"&&O>=0?o().fields.splice(O+1,0,$):o().fields.push($),o(o().fields=o().fields,!0)}function h(w="field"){var N;let $=w,O=2,P=((N=w.match(/\d+$/))==null?void 0:N[0])||"",L=P?w.substring(0,w.length-P.length):w;for(;p($);)$=L+((P<<0)+O),O++;return $}function p(w){var $,O;return!!((O=($=o())==null?void 0:$.fields)!=null&&O.find(P=>P.name===w))}function v(w){return r(s).findIndex($=>$===w)}function m(w,$){var O,P,L,N;!((P=(O=o())==null?void 0:O.fields)!=null&&P.length)||w===$||!$||(N=(L=o())==null?void 0:L.fields)!=null&&N.find(V=>V.name==w&&!V._toDelete)||o(o().indexes=o().indexes.map(V=>q.replaceIndexColumn(V,w,$)),!0)}function g(){const w=o().fields||[],$=w.filter(P=>!P.system),O=structuredClone(a()[o().type]);o(o().fields=O.fields,!0);for(let P of w){if(!P.system)continue;const L=o().fields.findIndex(N=>N.name==P.name);L<0||o(o().fields[L]=Object.assign(o().fields[L],P),!0)}for(let P of $)o().fields.push(P)}function k(w,$){var P;if(w===$||!$)return;let O=((P=o().passwordAuth)==null?void 0:P.identityFields)||[];for(let L=0;L<O.length;L++)O[L]==w&&(O[L]=$)}function _(w,$){m(w,$),k(w,$)}se(()=>(F(o()),r(l)),()=>{!o().id&&r(l)!=o().type&&(x(l,o().type),g())}),se(()=>F(o()),()=>{typeof o().fields>"u"&&o(o().fields=[],!0)}),se(()=>F(o()),()=>{x(s,o().fields.filter(w=>!w._toDelete))}),ht(),Ge();var E=CD(),D=j(E);bt(D,7,()=>(F(o()),A(()=>o().fields)),w=>w,(w,$,O)=>{$s(w,{get index(){return r(O)},get disabled(){return(F(o()),A(()=>o().fields))[r(O)],A(()=>(F(o()),A(()=>o().fields))[r(O)]._toDelete)},dragHandleClass:"drag-handle-wrapper",get list(){return o().fields},set list(P){o(o().fields=P,!0)},$$events:{drag:P=>{if(!P.detail)return;const L=P.detail.target;L.style.opacity=0,setTimeout(()=>{var N;(N=L==null?void 0:L.style)==null||N.removeProperty("opacity")},0),P.detail.dataTransfer.setDragImage(L,0,0)},sort:()=>{ln({})}},children:(P,L)=>{var N=rt(),V=j(N);{let R=ae(()=>((F(o()),A(()=>o().fields))[r(O)],A(()=>v((F(o()),A(()=>o().fields))[r(O)]))));wi(V,()=>c[(F(o()),A(()=>o().fields))[r(O)].type],(U,H)=>{H(U,{get key(){return r(R)},get collection(){return o()},get field(){return(F(o()),A(()=>o().fields))[r(O)]},set field(z){(F(o()),A(()=>o().fields))[r(O)]=z,$a(()=>o())},$$events:{remove:()=>u(r(O)),duplicate:()=>d(r(O)),rename:z=>_(z.detail.oldName,z.detail.newName)},$$legacy:!0})})}b(P,N)},$$slots:{default:!0},$$legacy:!0})});var S=y(D,2);zE(S,{class:"btn btn-block btn-outline",$$events:{select:w=>f(w.detail)}});var C=y(S,4);RE(C,{get collection(){return o()},set collection(w){o(w)},$$legacy:!0}),B(()=>Ue(D,1,`schema-fields total-${F(o()),A(()=>o().fields.length)??""}`)),b(n,E),Je(),i()}var OD=T('<textarea disabled rows="7" placeholder="Loading..."></textarea>'),DD=T("<p> </p>"),PD=T('<div class="help-block help-block-error"><div class="content"></div></div>'),MD=T(`<label><span class="txt">Select query</span></label> <!> <div class="help-block"><ul><li>Wildcard columns (<code>*</code>) are not supported.</li> <li>The query must have a unique <code>id</code> column. <br/> If your query doesn't have a suitable one, you can use the universal <code>(ROW_NUMBER() OVER()) as id</code>.</li> <li>Expressions must be aliased with a valid formatted field name, e.g. <code>MAX(balance) as maxBalance</code>.</li> <li>Combined/multi-spaced expressions must be wrapped in parenthesis, e.g. <code>(MAX(balance) + 1) as maxBalance</code>.</li></ul></div> <!>`,1);function AD(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t);let s=re(e,"collection",12),o=M(),l=M(!1),c=M([]);function u(d){var p;x(c,[]);const f=q.getNestedVal(d,"fields",null);if(q.isEmpty(f))return;if(f!=null&&f.message){r(c).push(f==null?void 0:f.message);return}const h=q.extractColumnsFromQuery((p=s())==null?void 0:p.viewQuery);q.removeByValue(h,"id"),q.removeByValue(h,"created"),q.removeByValue(h,"updated");for(let v in f)for(let m in f[v]){const g=f[v][m].message,k=h[v]||v;r(c).push(q.sentenize(k+": "+g))}}vn(async()=>{x(l,!0);try{x(o,(await Wt(async()=>{const{default:d}=await import("./CodeEditor-_7ftkqqn.js");return{default:d}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(d){console.warn(d)}x(l,!1)}),se(()=>a(),()=>{u(a())}),ht(),Ge();{let d=ae(()=>(r(c),A(()=>r(c).length?"error":"")));Ne(n,{get class(){return`form-field required ${r(d)??""}`},name:"viewQuery",children:Ae,$$slots:{default:(f,h)=>{const p=ae(()=>h.uniqueId);var v=MD(),m=j(v),g=y(m,2);{var k=S=>{var C=OD();b(S,C)},_=S=>{var C=rt(),w=j(C);wi(w,()=>r(o),($,O)=>{O($,{get id(){return r(p)},placeholder:"eg. SELECT id, name from posts",language:"sql-select",minHeight:"150",get value(){return s().viewQuery},set value(P){s(s().viewQuery=P,!0)},$$events:{change:()=>{r(c).length&&ri("fields")}},$$legacy:!0})}),b(S,C)};X(g,S=>{r(l)?S(k):S(_,!1)})}var E=y(g,4);{var D=S=>{var C=PD(),w=I(C);bt(w,5,()=>r(c),Nt,($,O)=>{var P=DD(),L=I(P);B(()=>Ee(L,r(O))),b($,P)}),b(S,C)};X(E,S=>{r(c),A(()=>r(c).length)&&S(D)})}B(()=>Y(m,"for",r(p))),b(f,v)}}})}Je(),i()}var LD=T("<code> </code>"),ND=T('<div><div class="alert alert-warning m-0"><div class="content"><p class="m-b-0">The following record fields are available:</p> <div class="inline-flex flex-gap-5"></div> <hr class="m-t-10 m-b-5"/> <p class="m-b-0">The request fields could be accessed with the special <em>@request</em> filter:</p> <div class="inline-flex flex-gap-5"><code>@request.headers.*</code> <code>@request.query.*</code> <code>@request.body.*</code> <code>@request.auth.*</code></div> <hr class="m-t-10 m-b-5"/> <p class="m-b-0">You could also add constraints and query other collections using the <em>@collection</em> filter:</p> <div class="inline-flex flex-gap-5"><code>@collection.ANY_COLLECTION_NAME.*</code></div> <hr class="m-t-10 m-b-5"/> <p>Example rule: <br/> <code>@request.auth.id != "" && created > "2022-01-01 00:00:00"</code></p></div></div></div>'),RD=T('<i class="ri-information-line link-hint"></i>'),FD=T('<i class="ri-information-line link-hint"></i>'),qD=T("<!> <!> <!>",1),zD=T('<i class="ri-arrow-up-s-line txt-sm"></i>'),jD=T('<i class="ri-arrow-down-s-line txt-sm"></i>'),VD=T(`<p>This rule is executed every time before authentication allowing you to restrict who
                        can authenticate.</p> <p>For example, to allow only verified users you can set it to <code>verified = true</code>.</p> <p>Leave it empty to allow anyone with an account to authenticate.</p> <p>To disable authentication entirely you can change it to "Set superusers only".</p>`,1),UD=T(`<p>This rule is executed in addition to the <code>create</code> and <code>update</code> API
                        rules.</p> <p>It enables superuser-like permissions to allow fully managing the auth record(s), eg.
                        changing the password without requiring to enter the old one, directly updating the
                        verified state or email, etc.</p>`,1),BD=T('<div class="block"><!> <!></div>'),HD=T('<hr/> <button type="button"><strong class="txt">Additional auth collection rules</strong> <!></button> <!>',1),WD=T('<div class="block m-b-sm handle"><div class="flex txt-sm txt-hint m-b-5"><p>All rules follow the <a target="_blank" rel="noopener noreferrer">PocketBase filter syntax and operators</a>.</p> <button type="button" class="expand-handle txt-sm txt-bold txt-nowrap link-hint"> </button></div> <!></div> <!> <!> <!> <!>',1);function YD(n,e){Ke(e,!1);const t=M(),i=M();let a=re(e,"collection",12),s=M(!1),o=M(a().manageRule!==null||a().authRule!=="");se(()=>F(a()),()=>{x(t,q.getAllCollectionIdentifiers(a()))}),se(()=>F(a()),()=>{var C;x(i,(C=a().fields)==null?void 0:C.filter(w=>w.hidden).map(w=>w.name))}),ht(),Ge();var l=WD(),c=j(l),u=I(c),d=I(u),f=y(I(d)),h=y(d,2),p=I(h),v=y(u,2);{var m=C=>{var w=ND(),$=I(w),O=I($),P=y(I(O),2);bt(P,5,()=>r(t),Nt,(L,N)=>{var V=rt(),R=j(V);{var U=H=>{var z=LD(),J=I(z);B(()=>Ee(J,r(N))),b(H,z)};X(R,H=>{r(i),r(N),A(()=>!r(i).includes(r(N)))&&H(U)})}b(L,V)}),Ct(3,w,()=>yn,()=>({duration:150})),b(C,w)};X(v,C=>{r(s)&&C(m)})}var g=y(c,2);jr(g,{label:"List/Search rule",formKey:"listRule",get collection(){return a()},get rule(){return a().listRule},set rule(C){a(a().listRule=C,!0)},$$legacy:!0});var k=y(g,2);jr(k,{label:"View rule",formKey:"viewRule",get collection(){return a()},get rule(){return a().viewRule},set rule(C){a(a().viewRule=C,!0)},$$legacy:!0});var _=y(k,2);{var E=C=>{var w=qD(),$=j(w);jr($,{label:"Create rule",formKey:"createRule",get collection(){return a()},get rule(){return a().createRule},set rule(L){a(a().createRule=L,!0)},$$slots:{afterLabel:(L,N)=>{const V=ae(()=>N.isSuperuserOnly);var R=rt(),U=j(R);{var H=z=>{var J=RD();nt(J,(W,te)=>le==null?void 0:le(W,te),()=>({text:"The main record fields hold the values that are going to be inserted in the database.",position:"top"})),b(z,J)};X(U,z=>{r(V)||z(H)})}b(L,R)}},$$legacy:!0});var O=y($,2);jr(O,{label:"Update rule",formKey:"updateRule",get collection(){return a()},get rule(){return a().updateRule},set rule(L){a(a().updateRule=L,!0)},$$slots:{afterLabel:(L,N)=>{const V=ae(()=>N.isSuperuserOnly);var R=rt(),U=j(R);{var H=z=>{var J=FD();nt(J,(W,te)=>le==null?void 0:le(W,te),()=>({text:`The main record fields represent the old/existing record field values.
To target the newly submitted ones you can use @request.body.*`,position:"top"})),b(z,J)};X(U,z=>{r(V)||z(H)})}b(L,R)}},$$legacy:!0});var P=y(O,2);jr(P,{label:"Delete rule",formKey:"deleteRule",get collection(){return a()},get rule(){return a().deleteRule},set rule(L){a(a().deleteRule=L,!0)},$$legacy:!0}),b(C,w)};X(_,C=>{F(a()),A(()=>{var w;return((w=a())==null?void 0:w.type)!=="view"})&&C(E)})}var D=y(_,2);{var S=C=>{var w=HD(),$=y(j(w),2),O=y(I($),2);{var P=R=>{var U=zD();b(R,U)},L=R=>{var U=jD();b(R,U)};X(O,R=>{r(o)?R(P):R(L,!1)})}var N=y($,2);{var V=R=>{var U=BD(),H=I(U);jr(H,{label:"Authentication rule",formKey:"authRule",placeholder:"",get collection(){return a()},get rule(){return a().authRule},set rule(J){a(a().authRule=J,!0)},children:(J,W)=>{var te=VD();b(J,te)},$$slots:{default:!0},$$legacy:!0});var z=y(H,2);{let J=ae(()=>(F(a()),A(()=>a().manageRule!==null)));jr(z,{label:"Manage rule",formKey:"manageRule",placeholder:"",get required(){return r(J)},get collection(){return a()},get rule(){return a().manageRule},set rule(W){a(a().manageRule=W,!0)},children:(W,te)=>{var de=UD();b(W,de)},$$slots:{default:!0},$$legacy:!0})}Ct(3,U,()=>yn,()=>({duration:150})),b(R,U)};X(N,R=>{r(o)&&R(V)})}B(()=>Ue($,1,`btn btn-sm m-b-sm ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),ce("click",$,()=>{x(o,!r(o))}),b(C,w)};X(D,C=>{F(a()),A(()=>{var w;return((w=a())==null?void 0:w.type)==="auth"})&&C(S)})}B(()=>{Y(f,"href",A(()=>"https://pocketbase.io/docs/api-rules-and-filters")),Ee(p,r(s)?"Hide available fields":"Show available fields")}),ce("click",h,()=>x(s,!r(s))),b(n,l),Je()}var KD=T("<p>All data associated with the removed fields will be permanently deleted!</p>"),JD=T(`<div class="alert alert-warning"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content txt-bold"><p>If any of the collection changes is part of another collection rule, filter or view query,
                    you'll have to update it manually!</p> <!></div></div>`),ZD=T('<li class="svelte-xqpcsf"><div class="inline-flex">Renamed collection <strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div></li>'),GD=T('<li class="svelte-xqpcsf">Multiple to single value conversion of field <strong> </strong> <em class="txt-sm">(will keep only the last array item)</em></li>'),XD=T('<li class="svelte-xqpcsf"><div class="inline-flex">Renamed field <strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div></li>'),QD=T('<li class="txt-danger svelte-xqpcsf">Removed field <span class="txt-bold"> </span></li>'),eP=T("<!> <!> <!>",1),tP=T('<li class="svelte-xqpcsf">Changed API rule <code class="txt-sm"> </code>: <br/> <small class="txt-mono txt-hint"><strong>Old</strong>: <span class="txt-preline"> </span></small> <br/> <small class="txt-mono txt-success"><strong>New</strong>: <span class="txt-preline"> </span></small></li>'),nP=T(`<li class="svelte-xqpcsf">Changed <code> </code> host <div class="inline-flex m-l-5"><strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div> <br/> <em class="txt-hint">If the old and new OIDC configuration is not for the same provider consider deleting
                        all old <code class="txt-sm">_externalAuths</code> records associated to the current
                        collection and provider, otherwise it may result in account linking errors. <a target="_blank">Review existing <code class="txt-sm">_externalAuths</code> records <i class="ri-external-link-line txt-sm"></i></a>.</em></li>`),iP=T('<h6>Changes:</h6> <ul class="changes-list svelte-xqpcsf"><!> <!> <!> <!></ul>',1),rP=T("<!> <!>",1),aP=T("<h4>Confirm collection changes</h4>"),sP=T('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button" class="btn btn-expanded"><span class="txt">Confirm</span></button>',1);function oP(n,e){Ke(e,!1);const t=M(),i=M(),a=M(),s=M(),o=M(),l=M(),c=M(),u=Ut();let d=M(),f=M(),h=M(),p,v=M([]),m=M([]);async function g($,O,P=!0){var L;x(f,$),x(h,O),p=P,await D(),w(),await Nn(),r(t)||r(s).length||r(o).length||r(l).length||r(v).length||r(m).length?(L=r(d))==null||L.show():_()}function k(){var $;($=r(d))==null||$.hide()}function _(){k(),u("confirm",p)}const E=["oidc","oidc2","oidc3"];async function D(){var $,O,P,L,N,V;x(v,[]);for(let R of E){let U=(P=(O=($=r(f))==null?void 0:$.oauth2)==null?void 0:O.providers)==null?void 0:P.find(W=>W.name==R),H=(V=(N=(L=r(h))==null?void 0:L.oauth2)==null?void 0:N.providers)==null?void 0:V.find(W=>W.name==R);if(!U||!H)continue;let z=new URL(U.authURL).host,J=new URL(H.authURL).host;z!=J&&await S(R)&&r(v).push({name:R,oldHost:z,newHost:J})}}async function S($){var O;try{return await ze.collection("_externalAuths").getFirstListItem(ze.filter("collectionRef={:collectionId} && provider={:provider}",{collectionId:(O=r(h))==null?void 0:O.id,provider:$})),!0}catch{}return!1}function C($){var O;return`#/collections?collection=_externalAuths&filter=collectionRef%3D%22${(O=r(h))==null?void 0:O.id}%22+%26%26+provider%3D%22${$}%22`}function w(){var L,N;if(x(m,[]),window.location.protocol!="https:")return;const $=["listRule","viewRule"];r(i)||$.push("createRule","updateRule","deleteRule"),r(a)&&$.push("manageRule","authRule");let O,P;for(let V of $)O=(L=r(f))==null?void 0:L[V],P=(N=r(h))==null?void 0:N[V],O!==P&&r(m).push({prop:V,oldRule:O,newRule:P})}return se(()=>(r(f),r(h)),()=>{var $,O;x(t,(($=r(f))==null?void 0:$.name)!=((O=r(h))==null?void 0:O.name))}),se(()=>r(h),()=>{var $;x(i,(($=r(h))==null?void 0:$.type)==="view")}),se(()=>r(h),()=>{var $;x(a,(($=r(h))==null?void 0:$.type)==="auth")}),se(()=>(r(i),r(h)),()=>{var $,O;x(s,!r(i)&&((O=($=r(h))==null?void 0:$.fields)==null?void 0:O.filter(P=>P.id&&!P._toDelete&&P._originalName!=P.name))||[])}),se(()=>(r(i),r(h)),()=>{var $,O;x(o,!r(i)&&((O=($=r(h))==null?void 0:$.fields)==null?void 0:O.filter(P=>P.id&&P._toDelete))||[])}),se(()=>(r(h),r(f)),()=>{var $,O;x(l,((O=($=r(h))==null?void 0:$.fields)==null?void 0:O.filter(P=>{var N,V;const L=(V=(N=r(f))==null?void 0:N.fields)==null?void 0:V.find(R=>R.id==P.id);return L?L.maxSelect!=1&&P.maxSelect==1:!1}))||[])}),se(()=>(r(i),r(t),r(m)),()=>{x(c,!r(i)||r(t)||r(m).length)}),ht(),Ge(),gt(_n(n,{class:"confirm-changes-panel",popup:!0,$$events:{hide($){ct.call(this,e,$)},show($){ct.call(this,e,$)}},children:($,O)=>{var P=rP(),L=j(P);{var N=U=>{var H=JD(),z=y(I(H),2),J=y(I(z),2);{var W=te=>{var de=KD();b(te,de)};X(J,te=>{r(o),A(()=>r(o).length)&&te(W)})}b(U,H)};X(L,U=>{r(t),r(o),r(s),A(()=>r(t)||r(o).length||r(s).length)&&U(N)})}var V=y(L,2);{var R=U=>{var H=iP(),z=y(j(H),2),J=I(z);{var W=ke=>{var ve=ZD(),Oe=I(ve),ue=y(I(Oe)),me=I(ue),he=y(ue,4),xe=I(he);B(()=>{Ee(me,(r(f),A(()=>{var ie;return(ie=r(f))==null?void 0:ie.name}))),Ee(xe,(r(h),A(()=>{var ie;return(ie=r(h))==null?void 0:ie.name})))}),b(ke,ve)};X(J,ke=>{r(t)&&ke(W)})}var te=y(J,2);{var de=ke=>{var ve=eP(),Oe=j(ve);bt(Oe,1,()=>r(l),Nt,(he,xe)=>{var ie=GD(),be=y(I(ie)),oe=I(be);B(()=>Ee(oe,(r(xe),A(()=>r(xe).name)))),b(he,ie)});var ue=y(Oe,2);bt(ue,1,()=>r(s),Nt,(he,xe)=>{var ie=XD(),be=I(ie),oe=y(I(be)),Q=I(oe),ne=y(oe,4),ye=I(ne);B(()=>{Ee(Q,(r(xe),A(()=>r(xe)._originalName))),Ee(ye,(r(xe),A(()=>r(xe).name)))}),b(he,ie)});var me=y(ue,2);bt(me,1,()=>r(o),Nt,(he,xe)=>{var ie=QD(),be=y(I(ie)),oe=I(be);B(()=>Ee(oe,(r(xe),A(()=>r(xe).name)))),b(he,ie)}),b(ke,ve)};X(te,ke=>{r(i)||ke(de)})}var pe=y(te,2);bt(pe,1,()=>r(m),Nt,(ke,ve)=>{var Oe=tP(),ue=y(I(Oe)),me=I(ue),he=y(ue,4),xe=y(I(he),2),ie=I(xe),be=y(he,4),oe=y(I(be),2),Q=I(oe);B(()=>{Ee(me,(r(ve),A(()=>r(ve).prop))),Ee(ie,(r(ve),A(()=>r(ve).oldRule===null?"null (superusers only)":r(ve).oldRule||'""'))),Ee(Q,(r(ve),A(()=>r(ve).newRule===null?"null (superusers only)":r(ve).newRule||'""')))}),b(ke,Oe)});var _e=y(pe,2);bt(_e,1,()=>r(v),Nt,(ke,ve)=>{var Oe=nP(),ue=y(I(Oe)),me=I(ue),he=y(ue,2),xe=I(he),ie=I(xe),be=y(xe,4),oe=I(be),Q=y(he,4),ne=y(I(Q),3);B(ye=>{Ee(me,(r(ve),A(()=>r(ve).name))),Ee(ie,(r(ve),A(()=>r(ve).oldHost))),Ee(oe,(r(ve),A(()=>r(ve).newHost))),Y(ne,"href",ye)},[()=>(r(ve),A(()=>C(r(ve).name)))]),b(ke,Oe)}),b(U,H)};X(V,U=>{r(c)&&U(R)})}b($,P)},$$slots:{default:!0,header:($,O)=>{var P=aP();b($,P)},footer:($,O)=>{var P=sP(),L=j(P);Gi(L,!0);var N=y(L,2);ce("click",L,()=>k()),ce("click",N,()=>_()),b($,P)}},$$legacy:!0}),$=>x(d,$),()=>r(d)),xt(e,"show",g),xt(e,"hide",k),Je({show:g,hide:k})}var lP=T('<div class="tab-item active"><!></div>'),cP=T("<div><!></div>"),uP=T('<div class="tabs-content svelte-xyiw1b"><div><!></div> <!> <!></div>'),dP=T('<button type="button" class="dropdown-item" role="menuitem"><i class="ri-file-copy-line" aria-hidden="true"></i> <span class="txt">Duplicate</span></button> <hr/>',1),fP=T('<button type="button" class="dropdown-item txt-danger" role="menuitem"><i class="ri-eraser-line" aria-hidden="true"></i> <span class="txt">Truncate</span></button>'),hP=T('<button type="button" class="dropdown-item txt-danger" role="menuitem"><i class="ri-delete-bin-7-line" aria-hidden="true"></i> <span class="txt">Delete</span></button>'),vP=T("<!> <!> <!>",1),mP=T('<div class="flex-fill"></div> <div tabindex="0" role="button" aria-label="More collection options" class="btn btn-sm btn-circle btn-transparent flex-gap-0"><i class="ri-more-line" aria-hidden="true"></i> <!></div>',1),pP=T('<button type="button" role="menuitem"><i aria-hidden="true"></i> <span class="txt"> </span></button>'),gP=T('<i class="ri-arrow-down-s-fill" aria-hidden="true"></i> <!>',1),bP=T('<div class="help-block">System collection</div>'),yP=T('<label>Name</label> <input type="text" required spellcheck="false"/> <div class="form-field-addon"><div aria-label="View types"><span aria-hidden="true"></span> <span class="txt"> </span> <!></div></div> <!>',1),_P=T('<i class="ri-error-warning-fill txt-danger"></i>'),xP=T('<i class="ri-error-warning-fill txt-danger"></i>'),wP=T('<button type="button"><span class="txt">API Rules</span> <!></button>'),kP=T('<i class="ri-error-warning-fill txt-danger"></i>'),SP=T('<button type="button"><span class="txt">Options</span> <!></button>'),TP=T('<h4 class="upsert-panel-title svelte-xyiw1b"> </h4> <!> <form class="block"><!> <input type="submit" class="hidden" tabindex="-1"/></form> <div class="tabs-header stretched"><button type="button"><span class="txt"> </span> <!></button> <!> <!></div>',1),$P=T('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Save and continue</span></button>'),IP=T('<button type="button" class="btn p-l-5 p-r-5 flex-gap-0"><i class="ri-arrow-down-s-line" aria-hidden="true"></i> <!></button>'),CP=T('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <div class="btns-group no-gap"><button type="button" title="Save and close"><span class="txt"> </span></button> <!></div>',1),EP=T("<!> <!>",1);function vf(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Bd,"$scaffolds",t),s=()=>It(Yn,"$errors",t),o=M(),l=M(),c=M(),u=M(),d=M(),f=M(),h="schema",p="api_rules",v="options",m="base",g="auth",k="view",_=M({});dt(_,r(_)[m]="Base"),dt(_,r(_)[k]="View"),dt(_,r(_)[g]="Auth");const E=Ut();let D=M(),S=M(),C=M(null),w=M({}),$=M(!1),O=M(!1),P=M(!1),L=M(h),N=M(ve(r(w))),V=M(""),R=M([]);function U(Q){x(L,Q)}function H(Q){var ne;return W(Q),x(P,!0),x(O,!1),x($,!1),U(h),(ne=r(D))==null?void 0:ne.show()}function z(){var Q;return(Q=r(D))==null?void 0:Q.hide()}function J(){x(P,!1),z()}async function W(Q){ln({}),typeof Q<"u"?(x(C,Q),x(w,structuredClone(Q))):(x(C,null),x(w,structuredClone(a().base)),r(w).fields.push({type:"autodate",name:"created",onCreate:!0}),r(w).fields.push({type:"autodate",name:"updated",onCreate:!0,onUpdate:!0})),dt(w,r(w).fields=r(w).fields||[]),dt(w,r(w)._originalName=r(w).name||""),await Nn(),x(N,ve(r(w)))}async function te(Q=!0){var ne;if(!r(O)){x(O,!0);try{r(w).id?await((ne=r(S))==null?void 0:ne.show(r(C),r(w),Q)):await de(Q)}catch{}x(O,!1)}}function de(Q=!0){if(r($))return;x($,!0);const ne=pe(),ye=!r(w).id;let Se;return ye?Se=ze.collections.create(ne):Se=ze.collections.update(r(w).id,ne),Se.then(Ie=>{no(),m0(Ie),Q?(x(P,!1),z()):W(Ie),bn(r(w).id?"Successfully updated collection.":"Successfully created collection."),E("save",{isNew:ye,collection:Ie}),ye&&ni(Qi,Ie)}).catch(Ie=>{ze.error(Ie)}).finally(()=>{x($,!1)})}function pe(){const Q=Object.assign({},r(w));Q.fields=Q.fields.slice(0);for(let ne=Q.fields.length-1;ne>=0;ne--)Q.fields[ne]._toDelete&&Q.fields.splice(ne,1);return Q}function _e(){var Q;(Q=r(C))!=null&&Q.id&&jn(`Do you really want to delete all "${r(C).name}" records, including their cascade delete references and files?`,()=>ze.collections.truncate(r(C).id).then(()=>{J(),bn(`Successfully truncated collection "${r(C).name}".`),E("truncate")}).catch(ne=>{ze.error(ne)}))}function ke(){var Q;(Q=r(C))!=null&&Q.id&&jn(`Do you really want to delete collection "${r(C).name}" and all its records?`,()=>ze.collections.delete(r(C).id).then(()=>{J(),bn(`Successfully deleted collection "${r(C).name}".`),E("delete",r(C)),p0(r(C))}).catch(ne=>{ze.error(ne)}))}function ve(Q){return JSON.stringify(Q)}function Oe(Q){dt(w,r(w).type=Q),x(w,Object.assign(structuredClone(a()[Q]),r(w))),ri("fields")}function ue(){r(d)?jn("You have unsaved changes. Do you really want to discard them?",()=>{me()}):me()}async function me(){const Q=r(C)?structuredClone(r(C)):null;if(Q){if(Q.id="",Q.created="",Q.updated="",Q.name+="_duplicate",!q.isEmpty(Q.fields))for(const ne of Q.fields)ne.id="";if(!q.isEmpty(Q.indexes))for(let ne=0;ne<Q.indexes.length;ne++){const ye=q.parseIndex(Q.indexes[ne]);ye.indexName="idx_"+q.randomString(10),ye.tableName=Q.name,Q.indexes[ne]=q.buildIndex(ye)}}H(Q),await Nn(),x(N,"")}function he(Q,ne=[]){if(q.isEmpty(Q))return!1;const ye=Object.keys(Q);for(let Se of ye)if(!ne.includes(Se))return!0;return!1}se(()=>a(),()=>{x(R,Object.keys(a().base||{}))}),se(()=>r(w),()=>{x(o,r(w).type===g)}),se(()=>r(w),()=>{x(l,r(w).type===k)}),se(()=>(s(),q),()=>{s().fields||s().viewQuery||s().indexes?x(V,q.getNestedVal(s(),"fields.message")||"Has errors"):x(V,"")}),se(()=>r(w),()=>{x(c,!!r(w).id&&r(w).system)}),se(()=>r(w),()=>{x(u,!!r(w).id&&r(w).system&&r(w).name=="_superusers")}),se(()=>(r(N),r(w)),()=>{x(d,r(N)!=ve(r(w)))}),se(()=>(r(w),r(d)),()=>{x(f,!r(w).id||r(d))}),se(()=>(r(L),r(w)),()=>{r(L)===v&&r(w).type!=="auth"&&U(h)}),se(()=>r(w),()=>{r(w).type==="view"&&(dt(w,r(w).createRule=null),dt(w,r(w).updateRule=null),dt(w,r(w).deleteRule=null),dt(w,r(w).indexes=[]))}),se(()=>(r(w),r(C),q),()=>{var Q,ne;r(w).name&&((Q=r(C))==null?void 0:Q.name)!=r(w).name&&r(w).indexes.length>0&&dt(w,r(w).indexes=(ne=r(w).indexes)==null?void 0:ne.map(ye=>q.replaceIndexTableName(ye,r(w).name)))}),ht(),Ge();var xe=EP(),ie=j(xe);{let Q=ae(()=>!r($));gt(_n(ie,{class:"overlay-panel-lg colored-header collection-panel",escClose:!1,get overlayClose(){return r(Q)},beforeHide:()=>r(d)&&r(P)?(jn("You have unsaved changes. Do you really want to close the panel?",()=>{x(P,!1),z()}),!1):!0,$$events:{hide(ne){ct.call(this,e,ne)},show(ne){ct.call(this,e,ne)}},children:(ne,ye)=>{var Se=uP(),Ie=I(Se);let Le;var je=I(Ie);{var Te=Be=>{AD(Be,{get collection(){return r(w)},set collection(Pe){x(w,Pe)},$$legacy:!0})},Ze=Be=>{ED(Be,{get collection(){return r(w)},set collection(Pe){x(w,Pe)},$$legacy:!0})};X(je,Be=>{r(l)?Be(Te):Be(Ze,!1)})}var we=y(Ie,2);{var Re=Be=>{var Pe=lP(),He=I(Pe);YD(He,{get collection(){return r(w)},set collection(Fe){x(w,Fe)},$$legacy:!0}),b(Be,Pe)};X(we,Be=>{!r(u)&&r(L)===p&&Be(Re)})}var Me=y(we,2);{var Xe=Be=>{var Pe=cP();let He;var Fe=I(Pe);wE(Fe,{get collection(){return r(w)},set collection(De){x(w,De)},$$legacy:!0}),B(De=>He=Ue(Pe,1,"tab-item",null,He,De),[()=>({active:r(L)===v})]),b(Be,Pe)};X(Me,Be=>{r(o)&&Be(Xe)})}B(Be=>Le=Ue(Ie,1,"tab-item",null,Le,Be),[()=>({active:r(L)===h})]),b(ne,Se)},$$slots:{default:!0,header:(ne,ye)=>{var Se=TP(),Ie=j(Se),Le=I(Ie),je=y(Ie,2);{var Te=We=>{var tt=mP(),it=y(j(tt),2),Qe=y(I(it),2);ii(Qe,{class:"dropdown dropdown-right m-t-5",children:(ft,pt)=>{var at=vP(),Ce=j(at);{var vt=et=>{var ot=dP(),wt=j(ot);ce("click",wt,()=>ue()),b(et,ot)};X(Ce,et=>{r(w),A(()=>!r(w).system)&&et(vt)})}var K=y(Ce,2);{var G=et=>{var ot=fP();ce("click",ot,()=>_e()),b(et,ot)};X(K,et=>{r(l)||et(G)})}var fe=y(K,2);{var $e=et=>{var ot=hP();ce("click",ot,Et(gn(()=>ke()))),b(et,ot)};X(fe,et=>{r(w),A(()=>!r(w).system)&&et($e)})}b(ft,at)},$$slots:{default:!0}}),b(We,tt)};X(je,We=>{r(w),r(l),A(()=>!!r(w).id&&(!r(w).system||!r(l)))&&We(Te)})}var Ze=y(je,2),we=I(Ze);Ne(we,{class:"form-field collection-field-name required m-b-0",name:"name",children:Ae,$$slots:{default:(We,tt)=>{const it=ae(()=>tt.uniqueId);var Qe=yP(),ft=j(Qe),pt=y(ft,2);Gi(pt,(r(w),A(()=>!r(w).id)));let at;var Ce=y(pt,2),vt=I(Ce);let K;var G=y(I(vt),2),fe=I(G),$e=y(G,2);{var et=st=>{var St=gP(),mt=y(j(St),2);ii(mt,{class:"dropdown dropdown-right dropdown-nowrap m-t-5",children:(Tt,zt)=>{var Sn=rt(),Qt=j(Sn);bt(Qt,1,()=>(r(_),A(()=>Object.entries(r(_)))),Nt,(Dn,Kn)=>{var mn=Xr(()=>ss(r(Kn),2));let un=()=>r(mn)[0],Rn=()=>r(mn)[1];var Jn=pP();let si;var Ti=I(Jn),zi=y(Ti,2),Zn=I(zi);B(($i,ha)=>{si=Ue(Jn,1,"dropdown-item closable",null,si,$i),Ue(Ti,1,ha,"svelte-xyiw1b"),Ee(Zn,`${Rn()??""} collection`)},[()=>({selected:un()==r(w).type}),()=>En((F(q),un(),A(()=>q.getCollectionTypeIcon(un()))))]),ce("click",Jn,()=>Oe(un())),b(Dn,Jn)}),b(Tt,Sn)},$$slots:{default:!0}}),b(st,St)};X($e,st=>{r(w),A(()=>!r(w).id)&&st(et)})}var ot=y(Ce,2);{var wt=st=>{var St=bP();b(st,St)};X(ot,st=>{r(w),A(()=>r(w).system)&&st(wt)})}B((st,St)=>{Y(ft,"for",r(it)),Y(pt,"id",r(it)),pt.disabled=r(c),Y(pt,"placeholder",r(o)?'eg. "users"':'eg. "posts"'),Un(pt,(r(w),A(()=>r(w).name))),at=Ue(pt,1,"",null,at,st),Y(vt,"tabindex",(r(w),A(()=>r(w).id?-1:0))),Y(vt,"role",(r(w),A(()=>r(w).id?"":"button"))),K=Ue(vt,1,`btn btn-sm p-r-10 p-l-10 ${r(w),A(()=>r(w).id?"btn-transparent":"btn-outline")??""}`,null,K,St),Ee(fe,`Type: ${r(_),r(w),A(()=>r(_)[r(w).type]||"N/A")??""}`)},[()=>({"txt-bold":r(w).system}),()=>({"btn-disabled":!!r(w).id})]),ce("input",pt,st=>{dt(w,r(w).name=q.slugify(st.target.value)),st.target.value=r(w).name}),b(We,Qe)}}});var Re=y(Ze,2),Me=I(Re);let Xe;var Be=I(Me),Pe=I(Be),He=y(Be,2);{var Fe=We=>{var tt=_P();nt(tt,(it,Qe)=>le==null?void 0:le(it,Qe),()=>r(V)),Ct(3,tt,()=>Bn,()=>({duration:150,start:.7})),b(We,tt)};X(He,We=>{F(q),r(V),A(()=>!q.isEmpty(r(V)))&&We(Fe)})}var De=y(Me,2);{var Ve=We=>{var tt=wP();let it;var Qe=y(I(tt),2);{var ft=pt=>{var at=xP();nt(at,(Ce,vt)=>le==null?void 0:le(Ce,vt),()=>"Has errors"),Ct(3,at,()=>Bn,()=>({duration:150,start:.7})),b(pt,at)};X(Qe,pt=>{F(q),s(),A(()=>{var at,Ce,vt,K,G,fe,$e;return!q.isEmpty((at=s())==null?void 0:at.listRule)||!q.isEmpty((Ce=s())==null?void 0:Ce.viewRule)||!q.isEmpty((vt=s())==null?void 0:vt.createRule)||!q.isEmpty((K=s())==null?void 0:K.updateRule)||!q.isEmpty((G=s())==null?void 0:G.deleteRule)||!q.isEmpty((fe=s())==null?void 0:fe.authRule)||!q.isEmpty(($e=s())==null?void 0:$e.manageRule)})&&pt(ft)})}B(pt=>it=Ue(tt,1,"tab-item",null,it,pt),[()=>({active:r(L)===p})]),ce("click",tt,()=>U(p)),b(We,tt)};X(De,We=>{r(u)||We(Ve)})}var Ye=y(De,2);{var lt=We=>{var tt=SP();let it;var Qe=y(I(tt),2);{var ft=pt=>{var at=kP();nt(at,(Ce,vt)=>le==null?void 0:le(Ce,vt),()=>"Has errors"),Ct(3,at,()=>Bn,()=>({duration:150,start:.7})),b(pt,at)};X(Qe,pt=>{s(),r(R),A(()=>s()&&he(s(),r(R).concat(["manageRule","authRule"])))&&pt(ft)})}B(pt=>it=Ue(tt,1,"tab-item",null,it,pt),[()=>({active:r(L)===v})]),ce("click",tt,()=>U(v)),b(We,tt)};X(Ye,We=>{r(o)&&We(lt)})}B(We=>{Ee(Le,(r(w),A(()=>r(w).id?"Edit collection":"New collection"))),Xe=Ue(Me,1,"tab-item",null,Xe,We),Ee(Pe,r(l)?"Query":"Fields")},[()=>({active:r(L)===h})]),ce("submit",Ze,Et(()=>{r(f)&&te()})),ce("click",Me,()=>U(h)),b(ne,Se)},footer:(ne,ye)=>{var Se=CP(),Ie=j(Se),Le=y(Ie,2),je=I(Le);let Te;var Ze=I(je),we=I(Ze),Re=y(je,2);{var Me=Xe=>{var Be=IP(),Pe=y(I(Be),2);ii(Pe,{class:"dropdown dropdown-upside dropdown-right dropdown-nowrap m-b-5",children:(He,Fe)=>{var De=$P();ce("click",De,()=>te(!1)),b(He,De)},$$slots:{default:!0}}),B(()=>Be.disabled=!r(f)||r($)||r(O)),b(Xe,Be)};X(Re,Xe=>{r(w),A(()=>r(w).id)&&Xe(Me)})}B(Xe=>{Ie.disabled=r($),Te=Ue(je,1,"btn",null,Te,Xe),je.disabled=!r(f)||r($)||r(O),Ee(we,(r(w),A(()=>r(w).id?"Save changes":"Create")))},[()=>({"btn-expanded":!r(w).id,"btn-expanded-sm":!!r(w).id,"btn-loading":r($)||r(O)})]),ce("click",Ie,()=>z()),ce("click",je,()=>te()),b(ne,Se)}},$$legacy:!0}),ne=>x(D,ne),()=>r(D))}var be=y(ie,2);gt(oP(be,{$$events:{confirm:Q=>de(Q.detail)},$$legacy:!0}),Q=>x(S,Q),()=>r(S)),b(n,xe),xt(e,"changeTab",U),xt(e,"show",H),xt(e,"hide",z),xt(e,"forceHide",J);var oe=Je({changeTab:U,show:H,hide:z,forceHide:J});return i(),oe}var OP=T("<span></span>");function DP(n,e){Ke(e,!1);const t=Ut();let i=re(e,"tolerance",8,0),a=M(),s=0,o=0,l=0,c=0,u=M(!1);function d(m){m.stopPropagation(),s=m.clientX,o=m.clientY,l=m.clientX-r(a).offsetLeft,c=m.clientY-r(a).offsetTop,document.addEventListener("touchmove",h),document.addEventListener("mousemove",h),document.addEventListener("touchend",f),document.addEventListener("mouseup",f)}function f(m){r(u)&&(m.preventDefault(),x(u,!1),r(a).classList.remove("no-pointer-events"),t("dragstop",{event:m,elem:r(a)})),document.removeEventListener("touchmove",h),document.removeEventListener("mousemove",h),document.removeEventListener("touchend",f),document.removeEventListener("mouseup",f)}function h(m){let g=m.clientX-s,k=m.clientY-o,_=m.clientX-l,E=m.clientY-c;!r(u)&&Math.abs(_-r(a).offsetLeft)<i()&&Math.abs(E-r(a).offsetTop)<i()||(m.preventDefault(),r(u)||(x(u,!0),r(a).classList.add("no-pointer-events"),t("dragstart",{event:m,elem:r(a)})),t("dragging",{event:m,elem:r(a),diffX:g,diffY:k}))}Ge();var p=OP();let v;gt(p,m=>x(a,m),()=>r(a)),B(m=>v=Ue(p,1,"dragline svelte-y9un12",null,v,m),[()=>({dragging:r(u)})]),ce("mousedown",p,m=>{m.button==0&&d(m)}),ce("touchstart",p,d),b(n,p),Je()}var PP=T("<aside><!></aside> <!>",1);function Eb(n,e){Ke(e,!1);const t="@superuserSidebarWidth";let i=re(e,"class",8,""),a=M(),s=M(),o=M(localStorage.getItem(t)||null);se(()=>(r(o),r(a)),()=>{r(o)&&r(a)&&(dt(a,r(a).style.width=r(o)),localStorage.setItem(t,r(o)))}),ht(),Ge();var l=PP(),c=j(l),u=I(c);nn(u,e,"default",{},null),gt(c,f=>x(a,f),()=>r(a));var d=y(c,2);DP(d,{$$events:{dragstart:()=>{x(s,r(a).offsetWidth)},dragging:f=>{x(o,r(s)+f.detail.diffX+"px")},dragstop:()=>{q.triggerResize()}}}),B(()=>Ue(c,1,`page-sidebar ${i()??""}`)),b(n,l),Je()}var MP=T('<i class="ri-alert-line txt-sm link-hint" aria-hidden="true"></i>'),AP=T('<i class="ri-unpin-line svelte-5oh3nd"></i>'),LP=T('<i class="ri-pushpin-line m-l-auto svelte-5oh3nd"></i>'),NP=T('<a><i aria-hidden="true"></i> <span class="txt"> </span> <!>  <span class="btn btn-xs btn-circle btn-hint btn-transparent btn-pin-collection m-l-auto svelte-5oh3nd" aria-hidden="true"><!></span></a>');function Su(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Qi,"$activeCollection",t),s=M();let o=re(e,"collection",8),l=re(e,"pinnedIds",12);function c(D){l().includes(D.id)?q.removeByValue(l(),D.id):l().push(D.id),l(l())}se(()=>(F(l()),F(o())),()=>{x(s,l().includes(o().id))}),ht(),Ge();var u=NP();let d;var f=I(u),h=y(f,2),p=I(h),v=y(h,2);{var m=D=>{var S=MP();nt(S,(C,w)=>le==null?void 0:le(C,w),()=>"OAuth2 auth is enabled but the collection doesn't have any registered providers"),b(D,S)};X(v,D=>{F(o()),A(()=>{var S,C;return o().type=="auth"&&((S=o().oauth2)==null?void 0:S.enabled)&&!((C=o().oauth2.providers)!=null&&C.length)})&&D(m)})}var g=y(v,2);Y(g,"aria-label","Pin collection");var k=I(g);{var _=D=>{var S=AP();b(D,S)},E=D=>{var S=LP();b(D,S)};X(k,D=>{r(s)?D(_):D(E,!1)})}nt(g,(D,S)=>le==null?void 0:le(D,S),()=>({position:"right",text:(r(s)?"Unpin":"Pin")+" collection"})),qt(()=>ce("click",g,Et(gn(()=>c(o()))))),nt(u,D=>Lt==null?void 0:Lt(D)),B((D,S)=>{Y(u,"href",`/collections?collection=${F(o()),A(()=>o().id)??""}`),d=Ue(u,1,"sidebar-list-item svelte-5oh3nd",null,d,D),Y(u,"title",(F(o()),A(()=>o().name))),Ue(f,1,S,"svelte-5oh3nd"),Ee(p,(F(o()),A(()=>o().name)))},[()=>{var D;return{active:((D=a())==null?void 0:D.id)===o().id}},()=>En((F(q),F(o()),A(()=>q.getCollectionTypeIcon(o().type))))]),b(n,u),Je(),i()}var RP=T('<div class="sidebar-title">Pinned</div> <!>',1),FP=T('<div class="sidebar-title">Others</div>'),qP=T("<!> <!>",1),zP=T('<i aria-hidden="true"></i>'),jP=T('<button type="button"><span class="txt">System</span> <!></button> <!>',1),VP=T('<p class="txt-hint m-t-10 m-b-10 txt-center">No collections found.</p>'),UP=T('<footer class="sidebar-footer"><button type="button" class="btn btn-block btn-outline"><i class="ri-add-line"></i> <span class="txt">New collection</span></button></footer>'),BP=T('<header class="sidebar-header"><div><div class="form-field-addon"><button type="button"><i class="ri-close-line"></i></button></div> <input type="text" placeholder="Search collections..." name="collections-search"/></div></header> <hr class="m-t-5 m-b-xs"/> <div><!> <!> <!> <!></div> <!>',1),HP=T("<!> <!>",1);function WP(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(ai,"$collections",t),s=()=>It(Qi,"$activeCollection",t),o=()=>It(yo,"$isCollectionsLoading",t),l=()=>It(Vo,"$hideControls",t),c=M(),u=M(),d=M(),f=M(),h=M(),p=M(),v="@pinnedCollections";let m=M(),g=M(""),k=M([]),_=M(!1),E=M();S();function D(){setTimeout(()=>{const P=document.querySelector(".collection-sidebar .sidebar-list-item.active");P&&(P==null||P.scrollIntoView({block:"nearest"}))},0)}function S(){x(k,[]);try{const P=localStorage.getItem(v);P&&x(k,JSON.parse(P)||[])}catch{}}function C(){x(k,r(k).filter(P=>!!a().find(L=>L.id==P)))}se(()=>a(),()=>{a()&&(C(),D())}),se(()=>r(g),()=>{x(c,r(g).replace(/\s+/g,"").toLowerCase())}),se(()=>r(g),()=>{x(u,r(g)!=="")}),se(()=>r(k),()=>{r(k)&&localStorage.setItem(v,JSON.stringify(r(k)))}),se(()=>(a(),r(g),r(c)),()=>{x(d,a().filter(P=>{var L,N,V;return P.id==r(g)||((V=(N=(L=P.name)==null?void 0:L.replace(/\s+/g,""))==null?void 0:N.toLowerCase())==null?void 0:V.includes(r(c)))}))}),se(()=>(r(d),r(k)),()=>{x(f,r(d).filter(P=>r(k).includes(P.id)))}),se(()=>(r(d),r(k)),()=>{x(h,r(d).filter(P=>!P.system&&!r(k).includes(P.id)))}),se(()=>(r(d),r(k)),()=>{x(p,r(d).filter(P=>P.system&&!r(k).includes(P.id)))}),se(()=>(s(),r(E),r(f)),()=>{var P;(P=s())!=null&&P.id&&r(E)!=s().id&&(x(E,s().id),s().system&&!r(f).find(L=>L.id==s().id)?x(_,!0):x(_,!1))}),ht(),Ge();var w=HP(),$=j(w);Eb($,{class:"collection-sidebar",children:(P,L)=>{var N=BP(),V=j(N),R=I(V);let U;var H=I(R),z=I(H);let J;var W=y(H,2),te=y(V,4);let de;var pe=I(te);{var _e=be=>{var oe=RP(),Q=y(j(oe),2);bt(Q,1,()=>r(f),ne=>ne.id,(ne,ye)=>{Su(ne,{get collection(){return r(ye)},get pinnedIds(){return r(k)},set pinnedIds(Se){x(k,Se)},$$legacy:!0})}),b(be,oe)};X(pe,be=>{r(f),A(()=>r(f).length)&&be(_e)})}var ke=y(pe,2);{var ve=be=>{var oe=qP(),Q=j(oe);{var ne=Se=>{var Ie=FP();b(Se,Ie)};X(Q,Se=>{r(f),A(()=>r(f).length)&&Se(ne)})}var ye=y(Q,2);bt(ye,1,()=>r(h),Se=>Se.id,(Se,Ie)=>{Su(Se,{get collection(){return r(Ie)},get pinnedIds(){return r(k)},set pinnedIds(Le){x(k,Le)},$$legacy:!0})}),b(be,oe)};X(ke,be=>{r(h),A(()=>r(h).length)&&be(ve)})}var Oe=y(ke,2);{var ue=be=>{var oe=jP(),Q=j(oe);let ne;var ye=y(I(Q),2);{var Se=je=>{var Te=zP();B(()=>Ue(Te,1,`ri-arrow-${r(_)?"up":"down"}-s-line`)),b(je,Te)};X(ye,je=>{r(c),A(()=>!r(c).length)&&je(Se)})}var Ie=y(Q,2);{var Le=je=>{var Te=rt(),Ze=j(Te);bt(Ze,1,()=>r(p),we=>we.id,(we,Re)=>{Su(we,{get collection(){return r(Re)},get pinnedIds(){return r(k)},set pinnedIds(Me){x(k,Me)},$$legacy:!0})}),b(je,Te)};X(Ie,je=>{r(_),r(c),A(()=>r(_)||r(c).length)&&je(Le)})}B(je=>{ne=Ue(Q,1,"sidebar-title m-b-xs",null,ne,je),Y(Q,"aria-label",r(_)?"Expand system collections":"Collapse system collections"),Y(Q,"aria-expanded",(r(_),r(c),A(()=>r(_)||r(c).length))),Q.disabled=(r(c),A(()=>r(c).length))},[()=>({"link-hint":!r(c).length})]),ce("click",Q,()=>{r(c).length||x(_,!r(_))}),b(be,oe)};X(Oe,be=>{r(p),A(()=>r(p).length)&&be(ue)})}var me=y(Oe,2);{var he=be=>{var oe=VP();b(be,oe)};X(me,be=>{r(c),r(d),A(()=>r(c).length&&!r(d).length)&&be(he)})}var xe=y(te,2);{var ie=be=>{var oe=UP(),Q=I(oe);ce("click",Q,()=>{var ne;return(ne=r(m))==null?void 0:ne.show()}),b(be,oe)};X(xe,be=>{l()||be(ie)})}B((be,oe,Q)=>{U=Ue(R,1,"form-field search",null,U,be),J=Ue(z,1,"btn btn-xs btn-transparent btn-circle btn-clear",null,J,oe),de=Ue(te,1,"sidebar-content",null,de,Q)},[()=>({active:r(u)}),()=>({hidden:!r(u)}),()=>({fade:o(),"sidebar-content-compact":r(d).length>20})]),ce("click",z,()=>x(g,"")),_t(W,()=>r(g),be=>x(g,be)),b(P,N)},$$slots:{default:!0}});var O=y($,2);gt(vf(O,{$$legacy:!0}),P=>x(m,P),()=>r(m)),b(n,w),Je(),i()}var YP=T('<div class="datetime svelte-5pjd03"><div class="date"> </div> <div class="time svelte-5pjd03"> </div></div>'),KP=T('<span class="txt txt-hint">N/A</span>');function JP(n,e){Ke(e,!1);const t=M(),i=M();let a=re(e,"date",8,"");const s={get text(){return q.formatToLocalDate(a())+" Local"}};se(()=>F(a()),()=>{x(t,a()?a().substring(0,10):null)}),se(()=>F(a()),()=>{x(i,a()?a().substring(10,19):null)}),ht(),Ge();var o=rt(),l=j(o);{var c=d=>{var f=YP(),h=I(f),p=I(h),v=y(h,2),m=I(v);nt(f,(g,k)=>le==null?void 0:le(g,k),()=>s),B(()=>{Ee(p,r(t)),Ee(m,`${r(i)??""} UTC`)}),b(d,f)},u=d=>{var f=KP();b(d,f)};X(l,d=>{a()?d(c):d(u,!1)})}b(n,o),Je()}var ZP=T("<img/>"),GP=T("<object>Cannot preview the file.</object>"),XP=T('<button type="button" class="overlay-close"><i class="ri-close-line"></i></button>'),QP=T('<button type="button" class="link-hint txt-ellipsis inline-flex"> <i class="ri-external-link-line"></i></button> <div class="flex-fill"></div> <button type="button" class="btn btn-transparent">Close</button>',1);function eM(n,e){Ke(e,!1);const t=M(),i=M(),a=M();let s=M(),o=M(""),l;async function c(h){var p;l=h,l&&(x(o,await d()),(p=r(s))==null||p.show())}function u(){var h;return(h=r(s))==null?void 0:h.hide()}async function d(){return typeof l=="function"?await l():await l}async function f(){try{x(o,await d()),window.open(r(o),"_blank","noreferrer,noopener")}catch(h){h.isAbort||console.warn("openInNewTab file token failure:",h)}}return se(()=>r(o),()=>{x(t,r(o).indexOf("?"))}),se(()=>(r(o),r(t)),()=>{x(i,r(o).substring(r(o).lastIndexOf("/")+1,r(t)>0?r(t):void 0))}),se(()=>r(i),()=>{x(a,q.getFileType(r(i)))}),ht(),Ge(),gt(_n(n,{get class(){return`preview preview-${r(a)??""}`},btnClose:!1,popup:!0,$$events:{show(h){ct.call(this,e,h)},hide(h){ct.call(this,e,h)}},children:(h,p)=>{var v=rt(),m=j(v);{var g=k=>{var _=rt(),E=j(_);{var D=C=>{var w=ZP();B(()=>{Y(w,"src",r(o)),Y(w,"alt",`Preview ${r(i)??""}`)}),b(C,w)},S=C=>{var w=GP();B(()=>{Y(w,"title",r(i)),Y(w,"data",r(o))}),b(C,w)};X(E,C=>{r(a)==="image"?C(D):C(S,!1)})}b(k,_)};X(m,k=>{r(s),A(()=>{var _;return(_=r(s))==null?void 0:_.isActive()})&&k(g)})}b(h,v)},$$slots:{default:!0,header:(h,p)=>{var v=XP();ce("click",v,Et(u)),b(h,v)},footer:(h,p)=>{var v=QP(),m=j(v),g=I(m),k=y(m,4);B(()=>{Y(m,"title",r(i)),Ee(g,`${r(i)??""} `)}),ce("auxclick",m,f),ce("click",m,f),ce("click",k,u),b(h,v)}},$$legacy:!0}),h=>x(s,h),()=>r(s)),xt(e,"show",c),xt(e,"hide",u),Je({show:c,hide:u})}var tM=T("<div></div>"),nM=T('<img loading="lazy"/>'),iM=T('<i class="ri-video-line"></i>'),rM=T('<i class="ri-file-3-line"></i>'),aM=T('<button type="button"><!></button>'),sM=T("<!> <!>",1);function mf(n,e){Ke(e,!1);const t=M(),i=M();let a=re(e,"record",8,null),s=re(e,"filename",8,""),o=re(e,"size",8,""),l=M(),c=M(""),u=M(""),d=M(!0);f();async function f(){x(d,!0);try{x(u,await ze.getSuperuserFileToken(a().collectionId))}catch(E){console.warn("File token failure:",E)}x(d,!1)}function h(){x(c,"")}se(()=>F(s()),()=>{x(t,q.getFileType(s()))}),se(()=>(r(t),F(s())),()=>{x(i,["image","audio","video"].includes(r(t))||s().endsWith(".pdf"))}),se(()=>(r(d),F(a()),F(s()),r(u)),()=>{x(c,r(d)?"":ze.files.getURL(a(),s(),{thumb:"100x100",token:r(u)}))}),ht(),Ge();var p=sM(),v=j(p);{var m=E=>{var D=tM();B(()=>Ue(D,1,`thumb ${o()?`thumb-${o()}`:""}`)),b(E,D)},g=E=>{var D=aM();Y(D,"draggable",!1);var S=I(D);{var C=$=>{var O=nM();Y(O,"draggable",!1),B(()=>{Y(O,"src",r(c)),Y(O,"alt",s()),Y(O,"title",`Preview ${s()??""}`)}),ce("error",O,h),b($,O)},w=$=>{var O=rt(),P=j(O);{var L=V=>{var R=iM();b(V,R)},N=V=>{var R=rM();b(V,R)};X(P,V=>{r(t)==="video"||r(t)==="audio"?V(L):V(N,!1)},!0)}b($,O)};X(S,$=>{r(t)==="image"?$(C):$(w,!1)})}B(()=>{Ue(D,1,`handle thumb ${o()?`thumb-${o()}`:""}`),Y(D,"title",(r(i)?"Preview":"Download")+" "+s())}),ce("click",D,gn(async()=>{var $;if(r(i))try{($=r(l))==null||$.show(async()=>(x(u,await ze.getSuperuserFileToken(a().collectionId)),ze.files.getURL(a(),s(),{token:r(u)})))}catch(O){O.isAbort||console.warn("Preview file token failure:",O)}})),b(E,D)};X(v,E=>{r(d)?E(m):E(g,!1)})}var k=y(v,2);{var _=E=>{gt(eM(E,{$$legacy:!0}),D=>x(l,D),()=>r(l))};X(k,E=>{r(i)&&E(_)})}b(n,p),Je()}var oM=T('<div class="txt"> <span class="txt-disabled txt-xs">|</span> </div>');function Ob(n,e){Ke(e,!1);let t=re(e,"value",24,()=>({}));Ge();var i=oM(),a=I(i),s=y(a,2);B(()=>{Ee(a,`${F(t()),A(()=>{var o;return(o=t())==null?void 0:o.lon})??""} `),Ee(s,` ${F(t()),A(()=>t().lat)??""}`)}),b(n,i),Je()}var lM=T("<!> <!>",1),cM=T("<!> <!>",1);function Db(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(ai,"$collections",t),s=M();let o=re(e,"record",12),l=M([]),c=M([]);function u(){var v;const p=((v=r(s))==null?void 0:v.fields)||[];if(x(l,p.filter(m=>!m.hidden&&m.presentable&&m.type=="file")),x(c,p.filter(m=>!m.hidden&&m.presentable&&m.type!="file")),!r(l).length&&!r(c).length){const m=p.find(g=>{var k;return!g.hidden&&g.type=="file"&&g.maxSelect==1&&((k=g.mimeTypes)==null?void 0:k.find(_=>_.startsWith("image/")))});m&&r(l).push(m)}}se(()=>(a(),F(o())),()=>{var p;x(s,(p=a())==null?void 0:p.find(v=>{var m;return v.id==((m=o())==null?void 0:m.collectionId)}))}),se(()=>r(s),()=>{r(s)&&u()}),ht(),Ge();var d=cM(),f=j(d);bt(f,1,()=>r(l),Nt,(p,v)=>{const m=ae(()=>(F(q),F(o()),r(v),A(()=>q.toArray(o()[r(v).name]).slice(0,5))));var g=rt(),k=j(g);bt(k,1,()=>r(m),Nt,(_,E)=>{var D=rt(),S=j(D);{var C=w=>{mf(w,{get record(){return o()},get filename(){return r(E)},size:"xs"})};X(S,w=>{F(q),r(E),A(()=>!q.isEmpty(r(E)))&&w(C)})}b(_,D)}),b(p,g)});var h=y(f,2);bt(h,1,()=>r(c),Nt,(p,v,m)=>{var g=lM(),k=j(g);{var _=C=>{var w=mr(",");b(C,w)};X(k,C=>{m>0&&C(_)})}var E=y(k,2);{var D=C=>{Db(C,{get record(){return o().expand[r(v).name]},set record(w){o(o().expand[r(v).name]=w,!0)},$$legacy:!0})},S=C=>{var w=rt(),$=j(w);{var O=L=>{Ob(L,{get value(){return F(o()),r(v),A(()=>o()[r(v).name])}})},P=L=>{var N=mr();B(V=>Ee(N,V),[()=>(F(q),F(o()),r(v),A(()=>q.truncate(q.displayValue(o(),[r(v).name]),70)))]),b(L,N)};X($,L=>{r(v),A(()=>r(v).type=="geoPoint")?L(O):L(P,!1)},!0)}b(C,w)};X(E,C=>{r(v),F(o()),A(()=>{var w;return r(v).type=="relation"&&((w=o().expand)==null?void 0:w[r(v).name])})?C(D):C(S,!1)})}b(p,g)},p=>{var v=mr();B(m=>Ee(v,m),[()=>(F(q),F(o()),A(()=>q.truncate(q.displayValue(o(),[]),70)))]),b(p,v)}),b(n,d),Je(),i()}var uM=T('<div class="record-info svelte-69icne"><!> <a target="_blank" class="inline-flex link-hint" rel="noopener noreferrer"><i class="ri-external-link-line txt-sm"></i></a></div>');function nc(n,e){Ke(e,!1);let t=re(e,"record",8);function i(l,...c){const u=Object.assign({},l);for(let d of c)delete u[d];return u}Ge();var a=uM(),s=I(a);Db(s,{get record(){return t()}});var o=y(s,2);nt(o,(l,c)=>le==null?void 0:le(l,c),()=>({text:`Open relation record in new tab:
`+q.truncate(JSON.stringify(q.truncateObject(i(t(),"expand")),null,2),800,!0),class:"code",position:"left"})),qt(()=>ce("click",o,gn(function(l){ct.call(this,e,l)}))),qt(()=>ce("keydown",o,gn(function(l){ct.call(this,e,l)}))),B(()=>Y(o,"href",`#/collections?collection=${F(t()),A(()=>t().collectionId)??""}&recordId=${F(t()),A(()=>t().id)??""}`)),b(n,a),Je()}var dM=T('<span class="label label-warning">You</span>'),fM=T('<div class="label"><!> <div class="txt txt-ellipsis"> </div></div> <!>',1),hM=T('<span class="txt txt-ellipsis"> </span>'),vM=T('<span class="txt"> </span> <!>',1),mM=T('<span class="txt-hint">N/A</span>'),pM=T("<span> </span>"),gM=T('<span class="txt"> </span>'),bM=T('<a class="txt-ellipsis" target="_blank" rel="noopener noreferrer"> </a>'),yM=T('<span class="txt"> </span>'),_M=T('<span class="label"> </span>'),xM=T('<div class="inline-flex"></div>'),wM=T('<span class="label"><!></span>'),kM=T('<span class="label"> </span>'),SM=T("<div><!> <!></div>"),TM=T("<div><!> <!></div>"),$M=T('<div class="label"><!></div>'),IM=T('<span class="txt txt-ellipsis"> </span>'),CM=T('<div class="block txt-break fallback-block svelte-18nsns9"> </div>');function gd(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(wc,"$superuser",t),s=M();let o=re(e,"record",8),l=re(e,"field",8),c=re(e,"short",8,!1);se(()=>(F(o()),F(l())),()=>{var p;x(s,(p=o())==null?void 0:p[l().name])}),ht(),Ge();var u=rt(),d=j(u);{var f=p=>{var v=fM(),m=j(v),g=I(m);fr(g,{get value(){return r(s)}});var k=y(g,2),_=I(k),E=y(m,2);{var D=S=>{var C=dM();b(S,C)};X(E,S=>{F(o()),a(),A(()=>o().collectionName=="_superusers"&&o().id==a().id)&&S(D)})}B(()=>Ee(_,r(s))),b(p,v)},h=p=>{var v=rt(),m=j(v);{var g=_=>{const E=ae(()=>(F(q),r(s),A(()=>q.trimQuotedValue(JSON.stringify(r(s)))||'""')));var D=rt(),S=j(D);{var C=$=>{var O=hM(),P=I(O);B(L=>Ee(P,L),[()=>(F(q),F(r(E)),A(()=>q.truncate(r(E))))]),b($,O)},w=$=>{var O=vM(),P=j(O),L=I(P),N=y(P,2);{var V=R=>{{let U=ae(()=>(r(s),A(()=>JSON.stringify(r(s),null,2))));fr(R,{get value(){return r(U)}})}};X(N,R=>{F(r(E)),A(()=>r(E).length>500)&&R(V)})}B(R=>Ee(L,R),[()=>(F(q),F(r(E)),A(()=>q.truncate(r(E),500,!0)))]),b($,O)};X(S,$=>{c()?$(C):$(w,!1)})}b(_,D)},k=_=>{var E=rt(),D=j(E);{var S=w=>{var $=mM();b(w,$)},C=w=>{var $=rt(),O=j($);{var P=N=>{var V=pM();let R;var U=I(V);B(H=>{R=Ue(V,1,"label",null,R,H),Ee(U,r(s)?"True":"False")},[()=>({"label-success":!!r(s)})]),b(N,V)},L=N=>{var V=rt(),R=j(V);{var U=z=>{var J=gM(),W=I(J);B(()=>Ee(W,r(s))),b(z,J)},H=z=>{var J=rt(),W=j(J);{var te=pe=>{var _e=bM(),ke=I(_e);nt(_e,(ve,Oe)=>le==null?void 0:le(ve,Oe),()=>"Open in new tab"),qt(()=>ce("click",_e,gn(function(ve){ct.call(this,e,ve)}))),B(ve=>{Y(_e,"href",r(s)),Ee(ke,ve)},[()=>(F(q),r(s),A(()=>q.truncate(r(s))))]),b(pe,_e)},de=pe=>{var _e=rt(),ke=j(_e);{var ve=ue=>{var me=rt(),he=j(me);{var xe=be=>{var oe=yM(),Q=I(oe);B(ne=>Ee(Q,ne),[()=>(F(q),r(s),A(()=>q.truncate(q.plainText(r(s)),195)))]),b(be,oe)},ie=be=>{qd(be,{cssClass:"tinymce-preview",conf:{branding:!1,promotion:!1,menubar:!1,statusbar:!1,min_height:30,height:59,max_height:500,autoresize_bottom_margin:5,resize:!1,content_style:"body { font-size: 14px }",toolbar:"",plugins:["autoresize"],skin:"pocketbase"},get value(){return r(s)},disabled:!0})};X(he,be=>{c()?be(xe):be(ie,!1)})}b(ue,me)},Oe=ue=>{var me=rt(),he=j(me);{var xe=be=>{JP(be,{get date(){return r(s)}})},ie=be=>{var oe=rt(),Q=j(oe);{var ne=Se=>{var Ie=xM();bt(Ie,7,()=>(F(q),r(s),A(()=>q.toArray(r(s)))),(Le,je)=>je+Le,(Le,je)=>{var Te=_M(),Ze=I(Te);B(()=>Ee(Ze,r(je))),b(Le,Te)}),b(Se,Ie)},ye=Se=>{var Ie=rt(),Le=j(Ie);{var je=Ze=>{const we=ae(()=>(F(q),r(s),A(()=>q.toArray(r(s))))),Re=ae(()=>(F(q),F(o()),F(l()),A(()=>{var Ye,lt;return q.toArray((lt=(Ye=o())==null?void 0:Ye.expand)==null?void 0:lt[l().name])}))),Me=ae(()=>c()?20:500);var Xe=SM();let Be;var Pe=I(Xe);{var He=Ye=>{var lt=rt(),We=j(lt);bt(We,3,()=>(F(r(Re)),F(r(Me)),A(()=>r(Re).slice(0,r(Me)))),(tt,it)=>it+tt,(tt,it)=>{var Qe=wM(),ft=I(Qe);nc(ft,{get record(){return r(it)}}),b(tt,Qe)}),b(Ye,lt)},Fe=Ye=>{var lt=rt(),We=j(lt);bt(We,1,()=>(F(r(we)),F(r(Me)),A(()=>r(we).slice(0,r(Me)))),Nt,(tt,it)=>{var Qe=kM(),ft=I(Qe);B(()=>Ee(ft,r(it))),b(tt,Qe)}),b(Ye,lt)};X(Pe,Ye=>{F(r(Re)),A(()=>r(Re).length)?Ye(He):Ye(Fe,!1)})}var De=y(Pe,2);{var Ve=Ye=>{var lt=mr("...");b(Ye,lt)};X(De,Ye=>{F(r(we)),F(r(Me)),A(()=>r(we).length>r(Me))&&Ye(Ve)})}B(Ye=>Be=Ue(Xe,1,"rel-values svelte-18nsns9",null,Be,Ye),[()=>({"inline-flex":c(),vertical:!c()})]),b(Ze,Xe)},Te=Ze=>{var we=rt(),Re=j(we);{var Me=Be=>{const Pe=ae(()=>(F(q),r(s),A(()=>q.toArray(r(s))))),He=ae(()=>c()?10:500);var Fe=TM();let De;var Ve=I(Fe);bt(Ve,3,()=>(F(r(Pe)),F(r(He)),A(()=>r(Pe).slice(0,r(He)))),(We,tt)=>tt+We,(We,tt)=>{mf(We,{get record(){return o()},get filename(){return r(tt)},size:"sm"})});var Ye=y(Ve,2);{var lt=We=>{var tt=mr("...");b(We,tt)};X(Ye,We=>{F(r(Pe)),F(r(He)),A(()=>r(Pe).length>r(He))&&We(lt)})}B(We=>De=Ue(Fe,1,"inline-flex",null,De,We),[()=>({multiple:l().maxSelect!=1})]),b(Be,Fe)},Xe=Be=>{var Pe=rt(),He=j(Pe);{var Fe=Ve=>{var Ye=$M(),lt=I(Ye);Ob(lt,{get value(){return r(s)}}),b(Ve,Ye)},De=Ve=>{var Ye=rt(),lt=j(Ye);{var We=it=>{var Qe=IM(),ft=I(Qe);B((pt,at)=>{Y(Qe,"title",pt),Ee(ft,at)},[()=>(F(q),r(s),A(()=>q.truncate(r(s)))),()=>(F(q),r(s),A(()=>q.truncate(r(s))))]),b(it,Qe)},tt=it=>{var Qe=CM(),ft=I(Qe);B(()=>Ee(ft,r(s))),b(it,Qe)};X(lt,it=>{c()?it(We):it(tt,!1)},!0)}b(Ve,Ye)};X(He,Ve=>{F(l()),A(()=>l().type==="geoPoint")?Ve(Fe):Ve(De,!1)},!0)}b(Be,Pe)};X(Re,Be=>{F(l()),A(()=>l().type==="file")?Be(Me):Be(Xe,!1)},!0)}b(Ze,we)};X(Le,Ze=>{F(l()),A(()=>l().type==="relation")?Ze(je):Ze(Te,!1)},!0)}b(Se,Ie)};X(Q,Se=>{F(l()),A(()=>l().type==="select")?Se(ne):Se(ye,!1)},!0)}b(be,oe)};X(he,be=>{F(l()),A(()=>l().type==="date"||l().type==="autodate")?be(xe):be(ie,!1)},!0)}b(ue,me)};X(ke,ue=>{F(l()),A(()=>l().type==="editor")?ue(ve):ue(Oe,!1)},!0)}b(pe,_e)};X(W,pe=>{F(l()),A(()=>l().type==="url")?pe(te):pe(de,!1)},!0)}b(z,J)};X(R,z=>{F(l()),A(()=>l().type==="number")?z(U):z(H,!1)},!0)}b(N,V)};X(O,N=>{F(l()),A(()=>l().type==="bool")?N(P):N(L,!1)},!0)}b(w,$)};X(D,w=>{F(q),r(s),A(()=>q.isEmpty(r(s)))?w(S):w(C,!1)},!0)}b(_,E)};X(m,_=>{F(l()),A(()=>l().type==="json")?_(g):_(k,!1)},!0)}b(p,v)};X(d,p=>{F(l()),A(()=>l().primaryKey)?p(f):p(h,!1)})}b(n,u),Je(),i()}var EM=T('<tr><td class="min-width txt-hint txt-bold"> </td><td class="col-field svelte-1nt58f7"><!></td></tr>'),OM=T("<table><tbody></tbody></table>"),DM=T("<h4><strong> </strong> record preview</h4>"),PM=T('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button>');function MM(n,e){Ke(e,!1);const t=M();let i=re(e,"collection",8),a=M(),s=M({}),o=M(!1);function l(f){var h;return u(f),(h=r(a))==null?void 0:h.show()}function c(){var f;return x(o,!1),(f=r(a))==null?void 0:f.hide()}async function u(f){x(s,{}),x(o,!0),x(s,await d(f)||{}),x(o,!1)}async function d(f){if(f&&typeof f=="string"){try{return await ze.collection(i().id).getOne(f)}catch(h){h.isAbort||(c(),console.warn("resolveModel:",h),br(`Unable to load record with id "${f}"`))}return null}return f}se(()=>F(i()),()=>{var f,h;x(t,!!((h=(f=i())==null?void 0:f.fields)!=null&&h.find(p=>p.type==="editor")))}),ht(),Ge();{let f=ae(()=>r(t)?"overlay-panel-xl":"overlay-panel-lg");gt(_n(n,{get class(){return`record-preview-panel ${r(f)??""}`},$$events:{hide(h){ct.call(this,e,h)},show(h){ct.call(this,e,h)}},children:(h,p)=>{var v=OM();let m;var g=I(v);bt(g,5,()=>(F(i()),A(()=>{var k;return(k=i())==null?void 0:k.fields})),Nt,(k,_)=>{var E=EM(),D=I(E),S=I(D),C=y(D),w=I(C);gd(w,{get field(){return r(_)},get record(){return r(s)}}),B(()=>Ee(S,(r(_),A(()=>r(_).name)))),b(k,E)}),B(k=>m=Ue(v,1,"table-border preview-table",null,m,k),[()=>({"table-loading":r(o)})]),b(h,v)},$$slots:{default:!0,header:(h,p)=>{var v=DM(),m=I(v),g=I(m);B(()=>Ee(g,(F(i()),A(()=>{var k;return(k=i())==null?void 0:k.name})))),b(h,v)},footer:(h,p)=>{var v=PM();ce("click",v,()=>c()),b(h,v)}},$$legacy:!0}),h=>x(a,h),()=>r(a))}return xt(e,"show",l),xt(e,"hide",c),Je({show:l,hide:c})}var AM=T('<i class="ri-calendar-event-line txt-disabled"></i>');function LM(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(ai,"$collections",t),s=M(),o="yyyy-MM-dd HH:mm:ss.SSS";let l=re(e,"record",8),c=M([]);function u(){x(c,[]);const f=r(s).fields||[];for(let h of f)h.type=="autodate"&&r(c).push(h.name+": "+q.formatToLocalDate(l()[h.name],o)+" Local")}se(()=>(F(l()),a()),()=>{x(s,l()&&a().find(f=>f.id==l().collectionId))}),se(()=>F(l()),()=>{l()&&u()}),ht(),Ge();var d=AM();nt(d,(f,h)=>le==null?void 0:le(f,h),()=>({text:r(c).join(`
`),position:"left"})),b(n,d),Je(),i()}var NM=T('<div class="block txt-center"><span class="loader"></span></div>'),RM=T('<div class="list-item"><figure class="provider-logo"><img alt="Provider logo"/></figure> <span class="txt"> </span> <div class="txt-hint"> </div> <button type="button" class="btn btn-transparent link-hint btn-circle btn-sm m-l-auto"><i class="ri-close-line"></i></button></div>'),FM=T('<div class="list"></div>'),qM=T('<h6 class="txt-hint txt-center m-t-sm m-b-sm">No linked OAuth2 providers.</h6>');function zM(n,e){Ke(e,!1);const t=Ut();let i=re(e,"record",8),a=M([]),s=M(!1);function o(v){return hf.find(m=>m.key==v)||{}}function l(v){var m;return((m=o(v))==null?void 0:m.title)||q.sentenize(v,!1)}async function c(){var v;if(!((v=i())!=null&&v.id)){x(a,[]),x(s,!1);return}x(s,!0);try{x(a,await ze.collection("_externalAuths").getFullList({filter:ze.filter("collectionRef = {:collectionId} && recordRef = {:recordId}",{collectionId:i().collectionId,recordId:i().id})}))}catch(m){ze.error(m)}x(s,!1)}function u(v){var m;!((m=i())!=null&&m.id)||!v||jn(`Do you really want to unlink the ${l(v.provider)} provider?`,()=>ze.collection("_externalAuths").delete(v.id).then(()=>{bn(`Successfully unlinked the ${l(v.provider)} provider.`),t("unlink",v.provider),c()}).catch(g=>{ze.error(g)}))}c(),Ge();var d=rt(),f=j(d);{var h=v=>{var m=NM();b(v,m)},p=v=>{var m=rt(),g=j(m);{var k=E=>{var D=FM();bt(D,5,()=>r(a),Nt,(S,C)=>{var w=RM(),$=I(w),O=I($),P=y($,2),L=I(P),N=y(P,2),V=I(N),R=y(N,2);B((U,H)=>{Y(O,"src",`${A(()=>"./")??""}images/oauth2/${U??""}`),Ee(L,H),Ee(V,`ID: ${r(C),A(()=>r(C).providerId)??""}`)},[()=>(r(C),A(()=>{var U;return(U=o(r(C).provider))==null?void 0:U.logo})),()=>(r(C),A(()=>l(r(C).provider)))]),ce("click",R,()=>u(r(C))),b(S,w)}),b(E,D)},_=E=>{var D=qM();b(E,D)};X(g,E=>{F(i()),r(a),A(()=>{var D;return((D=i())==null?void 0:D.id)&&r(a).length})?E(k):E(_,!1)},!0)}b(v,m)};X(f,v=>{r(s)?v(h):v(p,!1)})}b(n,d),Je()}var jM=T('<div class="flex flex-gap-5 p-5"><span class="secret svelte-175mmkj"> </span> <!>  <i class="ri-refresh-line txt-sm link-hint" aria-label="Refresh"></i></div>'),VM=T('<button tabindex="-1" type="button" aria-label="Generate"><i class="ri-sparkling-line" aria-hidden="true"></i> <!></button>');function UM(n,e){Ke(e,!1);const t=Ut();let i=re(e,"class",8,"btn-sm btn-hint btn-transparent"),a=re(e,"length",8,32),s=M(""),o=M(),l=M(!1);async function c(){if(x(s,q.randomSecret(a())),t("generate",r(s)),await Nn(),r(o)){let f=document.createRange();f.selectNode(r(o)),window.getSelection().removeAllRanges(),window.getSelection().addRange(f)}}Ge();var u=VM(),d=y(I(u),2);ii(d,{class:"dropdown dropdown-upside dropdown-center dropdown-nowrap",get active(){return r(l)},set active(f){x(l,f)},$$events:{show:c},children:(f,h)=>{var p=jM(),v=I(p),m=I(v);gt(v,_=>x(o,_),()=>r(o));var g=y(v,2);fr(g,{get value(){return r(s)}});var k=y(g,2);nt(k,(_,E)=>le==null?void 0:le(_,E),()=>"Refresh"),qt(()=>ce("click",k,c)),B(()=>Ee(m,r(s))),b(f,p)},$$slots:{default:!0},$$legacy:!0}),nt(u,(f,h)=>le==null?void 0:le(f,h),()=>r(l)?"":"Generate"),B(()=>Ue(u,1,`btn btn-circle ${i()??""}`,"svelte-175mmkj")),b(n,u),Je()}var BM=T('<div class="form-field-addon email-visibility-addon svelte-1751a4d"><button type="button"><span class="txt"> </span></button></div>'),HM=T('<label><i></i> <span class="txt">email</span></label> <!> <input type="email" autocomplete="off" class="svelte-1751a4d"/>',1),WM=T('<input type="checkbox"/> <label>Change password</label>',1),YM=T('<label><i class="ri-lock-line"></i> <span class="txt">Password</span></label> <input type="password" autocomplete="new-password" required/> <div class="form-field-addon"><!></div>',1),KM=T('<label><i class="ri-lock-line"></i> <span class="txt">Password confirm</span></label> <input type="password" autocomplete="new-password" required/>',1),JM=T('<div class="block"><div><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div></div>'),ZM=T('<input type="checkbox"/> <label>Verified</label>',1),GM=T('<div class="col-lg-12"><!></div>'),XM=T('<div class="grid m-b-base"><div class="col-lg-12"><!></div> <div class="col-lg-12"><!> <!></div> <!></div>');function QM(n,e){Ke(e,!1);const t=M(),i=M(),a=M();let s=re(e,"record",12),o=re(e,"collection",8),l=re(e,"isNew",24,()=>{var E;return!((E=s())!=null&&E.id)}),c=M(!1);se(()=>F(o()),()=>{var E;x(t,((E=o())==null?void 0:E.name)=="_superusers")}),se(()=>F(o()),()=>{var E,D;x(i,((D=(E=o())==null?void 0:E.fields)==null?void 0:D.find(S=>S.name=="email"))||{})}),se(()=>F(o()),()=>{var E,D;x(a,((D=(E=o())==null?void 0:E.fields)==null?void 0:D.find(S=>S.name=="password"))||{})}),se(()=>(r(c),ri),()=>{r(c)||(s(s().password=void 0,!0),s(s().passwordConfirm=void 0,!0),ri("password"),ri("passwordConfirm"))}),ht(),Ge();var u=XM(),d=I(u),f=I(d);{let E=ae(()=>(r(i),A(()=>{var D;return(D=r(i))!=null&&D.required?"required":""})));Ne(f,{get class(){return`form-field ${r(E)??""}`},name:"email",children:Ae,$$slots:{default:(D,S)=>{const C=ae(()=>S.uniqueId);var w=HM(),$=j(w),O=I($),P=y($,2);{var L=V=>{var R=BM(),U=I(R),H=I(U),z=I(H);nt(U,(J,W)=>le==null?void 0:le(J,W),()=>({text:"Make email public or private",position:"top-right"})),qt(()=>ce("click",U,Et(()=>s(s().emailVisibility=!s().emailVisibility,!0)))),B(()=>{Ue(U,1,`btn btn-sm btn-transparent ${F(s()),A(()=>s().emailVisibility?"btn-success":"btn-hint")??""}`),Ee(z,`Public: ${F(s()),A(()=>s().emailVisibility?"On":"Off")??""}`)}),b(V,R)};X(P,V=>{r(t)||V(L)})}var N=y(P,2);Gi(N,l()),B(V=>{Y($,"for",r(C)),Ue(O,1,V),Y(N,"id",r(C)),N.required=(r(i),A(()=>r(i).required))},[()=>En((F(q),A(()=>q.getFieldTypeIcon("email"))))]),_t(N,()=>s().email,V=>s(s().email=V,!0)),b(D,w)}}})}var h=y(d,2),p=I(h);{var v=E=>{Ne(E,{class:"form-field form-field-toggle",name:"verified",children:Ae,$$slots:{default:(D,S)=>{const C=ae(()=>S.uniqueId);var w=WM(),$=j(w),O=y($,2);B(()=>{Y($,"id",r(C)),Y(O,"for",r(C))}),rn($,()=>r(c),P=>x(c,P)),b(D,w)}}})};X(p,E=>{l()||E(v)})}var m=y(p,2);{var g=E=>{var D=JM(),S=I(D);let C;var w=I(S),$=I(w);Ne($,{class:"form-field required",name:"password",children:Ae,$$slots:{default:(L,N)=>{const V=ae(()=>N.uniqueId);var R=YM(),U=j(R),H=y(U,2),z=y(H,2),J=I(z);{let W=ae(()=>(r(a),A(()=>Math.max(15,r(a).min||0))));UM(J,{get length(){return r(W)}})}B(()=>{Y(U,"for",r(V)),Y(H,"id",r(V))}),_t(H,()=>s().password,W=>s(s().password=W,!0)),b(L,R)}}});var O=y(w,2),P=I(O);Ne(P,{class:"form-field required",name:"passwordConfirm",children:Ae,$$slots:{default:(L,N)=>{const V=ae(()=>N.uniqueId);var R=KM(),U=j(R),H=y(U,2);B(()=>{Y(U,"for",r(V)),Y(H,"id",r(V))}),_t(H,()=>s().passwordConfirm,z=>s(s().passwordConfirm=z,!0)),b(L,R)}}}),B(L=>C=Ue(S,1,"grid",null,C,L),[()=>({"p-t-xs":r(c)})]),Ct(3,D,()=>yn,()=>({duration:150})),b(E,D)};X(m,E=>{(l()||r(c))&&E(g)})}var k=y(h,2);{var _=E=>{var D=GM(),S=I(D);Ne(S,{class:"form-field form-field-toggle",name:"verified",children:Ae,$$slots:{default:(C,w)=>{const $=ae(()=>w.uniqueId);var O=ZM(),P=j(O),L=y(P,2);B(()=>{Y(P,"id",r($)),Y(L,"for",r($))}),rn(P,()=>s().verified,N=>s(s().verified=N,!0)),ce("change",P,Et(N=>{l()||jn("Do you really want to manually change the verified account state?",()=>{},()=>{s(s().verified=!N.target.checked,!0)})})),b(C,O)}}}),b(E,D)};X(k,E=>{r(t)||E(_)})}b(n,u),Je()}var eA=T("<i></i>"),tA=T("<i></i>"),nA=T('<small class="label label-sm label-danger">Hidden</small>'),iA=T('<label><!> <span class="txt"> </span> <!> <!></label>');function Si(n,e){Ke(e,!1);let t=re(e,"uniqueId",8),i=re(e,"field",8),a=re(e,"icon",8,!0);Ge();var s=iA(),o=I(s);{var l=p=>{var v=rt(),m=j(v);{var g=_=>{var E=eA();B(D=>Ue(E,1,D),[()=>En((F(q),A(()=>q.getFieldTypeIcon("primary"))))]),b(_,E)},k=_=>{var E=tA();B(D=>Ue(E,1,D),[()=>En((F(q),F(i()),A(()=>q.getFieldTypeIcon(i().type))))]),b(_,E)};X(m,_=>{F(i()),A(()=>i().primaryKey)?_(g):_(k,!1)})}b(p,v)};X(o,p=>{a()&&p(l)})}var c=y(o,2),u=I(c),d=y(c,2);{var f=p=>{var v=nA();b(p,v)};X(d,p=>{F(i()),A(()=>i().hidden)&&p(f)})}var h=y(d,2);nn(h,e,"default",{},null),B(()=>{Y(s,"for",t()),Ee(u,(F(i()),A(()=>i().name)))}),b(n,s),Je()}var rA=T('<input type="checkbox"/> <!>',1);function aA(n,e){Ke(e,!1);let t=re(e,"field",8),i=re(e,"value",12,!1);Ge();{let a=ae(()=>(F(t()),A(()=>t().required?"required":"")));Ne(n,{get class(){return`form-field form-field-toggle ${r(a)??""}`},get name(){return F(t()),A(()=>t().name)},children:Ae,$$slots:{default:(s,o)=>{const l=ae(()=>o.uniqueId);var c=rA(),u=j(c),d=y(u,2);Si(d,{get uniqueId(){return r(l)},get field(){return t()},icon:!1}),B(()=>Y(u,"id",r(l))),rn(u,i),b(s,c)}}})}Je()}var sA=T('<div class="form-field-addon"><button type="button" class="link-hint clear-btn svelte-11df51y"><i class="ri-close-line"></i></button></div>'),oA=T("<!> <!> <!>",1);function lA(n,e){Ke(e,!1);let t=re(e,"field",8),i=re(e,"value",12,void 0),a=M(i());function s(l){l.detail&&l.detail.length==3&&i(l.detail[1])}function o(){i("")}se(()=>F(i()),()=>{i()&&i().length>19&&i(i().substring(0,19))}),se(()=>(r(a),F(i())),()=>{r(a)!=i()&&x(a,i())}),ht(),Ge();{let l=ae(()=>(F(t()),A(()=>t().required?"required":"")));Ne(n,{get class(){return`form-field ${r(l)??""}`},get name(){return F(t()),A(()=>t().name)},children:Ae,$$slots:{default:(c,u)=>{const d=ae(()=>u.uniqueId);var f=oA(),h=j(f);Si(h,{get uniqueId(){return r(d)},get field(){return t()}});var p=y(h,2);{var v=g=>{var k=sA(),_=I(k);nt(_,(E,D)=>le==null?void 0:le(E,D),()=>"Clear"),qt(()=>ce("click",_,()=>o())),b(g,k)};X(p,g=>{F(i()),F(t()),A(()=>i()&&!t().required)&&g(v)})}var m=y(p,2);{let g=ae(()=>(F(q),A(()=>q.defaultFlatpickrOptions())));pd(m,{get id(){return r(d)},get options(){return r(g)},get value(){return r(a)},set value(k){x(a,k)},get formattedValue(){return i()},set formattedValue(k){i(k)},$$events:{close:s},$$legacy:!0})}b(c,f)}}})}Je()}var cA=T(`<h6 class="txt-center txt-hint">You currently don't have any collection with <code>file</code> field.</h6>`),uA=T('<button type="button"> </button>'),dA=T('<img loading="lazy"/>'),fA=T('<i class="ri-file-3-line"></i>'),hA=T('<button type="button"><!></button>'),vA=T('<button type="button" class="btn btn-hint btn-sm"><span class="txt">Clear filter</span></button>'),mA=T('<div class="inline-flex"><span class="txt txt-hint">No records with images found.</span> <!></div>'),pA=T('<div class="block txt-center"><span class="loader loader-sm active"></span></div>'),gA=T("<!> <!>",1),bA=T('<div class="file-picker"><aside class="file-picker-sidebar"></aside> <div class="file-picker-content"><div class="flex m-b-base flex-gap-10"><!> <button type="button" class="btn btn-pill btn-transparent btn-hint p-l-xs p-r-xs"><div class="txt">New record</div></button></div> <!></div></div>'),yA=T("<h4> </h4>"),_A=T('<button type="button" class="btn btn-transparent m-r-auto"><span class="txt">Cancel</span></button> <!> <button type="button" class="btn btn-expanded"><span class="txt"> </span></button>',1),xA=T("<!> <!>",1);function wA(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["show","hide","title","submitText","fileTypes"]);Ke(e,!1);const[a,s]=Rt(),o=()=>It(ai,"$collections",a),l=M(),c=M(),u=M(),d=M(),f=Ut(),h="file_picker_"+q.randomString(5),p=50;let v=re(e,"title",8,"Select a file"),m=re(e,"submitText",8,"Insert"),g=re(e,"fileTypes",24,()=>["image","document","video","audio","file"]),k=M(),_=M(),E=M(""),D=M([]),S=1,C=M(0),w=M(!1),$=M([]),O=M([]),P=M([]),L=M({}),N=M({}),V=M("");function R(){var ue;return J(!0),(ue=r(k))==null?void 0:ue.show()}function U(){var ue;return(ue=r(k))==null?void 0:ue.hide()}function H(){x(D,[]),x(N,{}),x(V,"")}function z(){x(E,"")}async function J(ue=!1){var me;if((me=r(L))!=null&&me.id){x(w,!0),ue&&H();try{const he=ue?1:S+1,xe=q.getAllCollectionIdentifiers(r(L));let ie=q.normalizeSearchFilter(r(E),xe)||"";ie&&(ie+=" && "),ie+="("+r(O).map(Q=>`${Q.name}:length>0`).join("||")+")";let be="";r(L).type!="view"&&(be="-@rowid");const oe=await ze.collection(r(L).id).getList(he,p,{filter:ie,sort:be,fields:"*:excerpt(100)",skipTotal:1,requestKey:h+"loadImagePicker"});x(D,q.filterDuplicatesByKey(r(D).concat(oe.items))),S=oe.page,x(C,oe.items.length),x(w,!1)}catch(he){he.isAbort||(ze.error(he),x(w,!1))}}}function W(){var me,he;let ue=["100x100"];if((he=(me=r(N))==null?void 0:me.record)!=null&&he.id){for(const xe of r(O))if(q.toArray(r(N).record[xe.name]).includes(r(N).name)){ue=ue.concat(q.toArray(xe.thumbs));break}}x(P,[{label:"Original size",value:""}]);for(const xe of ue)r(P).push({label:`${xe} thumb`,value:xe});r(V)&&!ue.includes(r(V))&&x(V,"")}function te(ue){let me=[];for(const he of r(O)){const xe=q.toArray(ue[he.name]);for(const ie of xe)g().includes(q.getFileType(ie))&&me.push(ie)}return me}function de(ue,me){x(N,{record:ue,name:me})}function pe(){r(d)&&(f("submit",Object.assign({size:r(V)},r(N))),U())}se(()=>(o(),q),()=>{x($,o().filter(ue=>ue.type!=="view"&&!!q.toArray(ue.fields).find(me=>{var he,xe;return me.type==="file"&&!me.protected&&(!((he=me.mimeTypes)!=null&&he.length)||!!((xe=me.mimeTypes)!=null&&xe.find(ie=>ie.startsWith("image/"))))})))}),se(()=>(r(L),r($)),()=>{var ue;!((ue=r(L))!=null&&ue.id)&&r($).length>0&&x(L,r($)[0])}),se(()=>r(L),()=>{var ue,me;x(O,(me=(ue=r(L))==null?void 0:ue.fields)==null?void 0:me.filter(he=>he.type==="file"&&!he.protected))}),se(()=>r(L),()=>{var ue;(ue=r(L))!=null&&ue.id&&(z(),W())}),se(()=>r(N),()=>{var ue;(ue=r(N))!=null&&ue.name&&W()}),se(()=>(r(E),r(L),r(k)),()=>{var ue,me;typeof r(E)<"u"&&((ue=r(L))!=null&&ue.id)&&((me=r(k))!=null&&me.isActive())&&J(!0)}),se(()=>r(N),()=>{x(l,(ue,me)=>{var he,xe,ie;return((he=r(N))==null?void 0:he.name)==me&&((ie=(xe=r(N))==null?void 0:xe.record)==null?void 0:ie.id)==ue.id})}),se(()=>r(D),()=>{x(c,r(D).find(ue=>te(ue).length>0))}),se(()=>(r(w),r(C)),()=>{x(u,!r(w)&&r(C)==p)}),se(()=>(r(w),r(N)),()=>{var ue;x(d,!r(w)&&!!((ue=r(N))!=null&&ue.name))}),ht(),Ge();var _e=xA(),ke=j(_e);gt(_n(ke,sn({popup:!0,class:"file-picker-popup"},()=>i,{$$events:{hide(ue){ct.call(this,e,ue)},show(ue){ct.call(this,e,ue)}},children:(ue,me)=>{var he=rt(),xe=j(he);{var ie=oe=>{var Q=cA();b(oe,Q)},be=oe=>{var Q=bA(),ne=I(Q);bt(ne,5,()=>r($),Te=>Te.id,(Te,Ze)=>{var we=uA();let Re;var Me=I(we);B(Xe=>{Re=Ue(we,1,"sidebar-item",null,Re,Xe),Ee(Me,(r(Ze),A(()=>r(Ze).name)))},[()=>{var Xe;return{active:((Xe=r(L))==null?void 0:Xe.id)==r(Ze).id}}]),ce("click",we,Et(()=>{x(L,r(Ze))})),b(Te,we)});var ye=y(ne,2),Se=I(ye),Ie=I(Se);Tc(Ie,{get value(){return r(E)},placeholder:"Record search term or filter...",get autocompleteCollection(){return r(L)},$$events:{submit:Te=>x(E,Te.detail)}});var Le=y(Ie,2),je=y(Se,2);Kd(je,{class:"files-list",vThreshold:100,$$events:{vScrollEnd:()=>{r(u)&&J()}},children:(Te,Ze)=>{var we=gA(),Re=j(we);{var Me=He=>{var Fe=rt(),De=j(Fe);bt(De,1,()=>r(D),Ve=>Ve.id,(Ve,Ye)=>{const lt=ae(()=>(r(Ye),A(()=>te(r(Ye)))));var We=rt(),tt=j(We);bt(tt,1,()=>r(lt),Nt,(it,Qe)=>{var ft=hA(),pt=Xr(()=>de(r(Ye),r(Qe)));let at;var Ce=I(ft);{var vt=G=>{var fe=dA();B($e=>{Y(fe,"src",$e),Y(fe,"alt",r(Qe))},[()=>(F(ze),r(Ye),r(Qe),A(()=>ze.files.getURL(r(Ye),r(Qe),{thumb:"100x100"})))]),b(G,fe)},K=G=>{var fe=fA();b(G,fe)};X(Ce,G=>{F(q),r(Qe),A(()=>q.hasImageExtension(r(Qe)))?G(vt):G(K,!1)})}nt(ft,(G,fe)=>le==null?void 0:le(G,fe),()=>r(Qe)+`
(record: `+r(Ye).id+")"),qt(()=>ce("click",ft,Et(function(...G){var fe;(fe=r(pt))==null||fe.apply(this,G)}))),B(G=>at=Ue(ft,1,"thumb handle",null,at,G),[()=>({"thumb-warning":r(l)(r(Ye),r(Qe))})]),b(it,ft)}),b(Ve,We)}),b(He,Fe)},Xe=He=>{var Fe=rt(),De=j(Fe);{var Ve=Ye=>{var lt=mA(),We=y(I(lt),2);{var tt=it=>{var Qe=vA();ce("click",Qe,Et(z)),b(it,Qe)};X(We,it=>{r(E),A(()=>{var Qe;return(Qe=r(E))==null?void 0:Qe.length})&&it(tt)})}b(Ye,lt)};X(De,Ye=>{r(w)||Ye(Ve)},!0)}b(He,Fe)};X(Re,He=>{r(c)?He(Me):He(Xe,!1)})}var Be=y(Re,2);{var Pe=He=>{var Fe=pA();b(He,Fe)};X(Be,He=>{r(w)&&He(Pe)})}b(Te,we)},$$slots:{default:!0}}),ce("click",Le,()=>{var Te;return(Te=r(_))==null?void 0:Te.show()}),b(oe,Q)};X(xe,oe=>{r($),A(()=>!r($).length)?oe(ie):oe(be,!1)})}b(ue,he)},$$slots:{default:!0,header:(ue,me)=>{var he=yA(),xe=I(he);B(()=>Ee(xe,v())),b(ue,he)},footer:(ue,me)=>{var he=_A(),xe=j(he),ie=y(xe,2);{var be=ye=>{Ne(ye,{class:"form-field file-picker-size-select",children:Ae,$$slots:{default:(Se,Ie)=>{const Le=ae(()=>Ie.uniqueId);{let je=ae(()=>!r(d));Vn(Se,{upside:!0,get id(){return r(Le)},get items(){return r(P)},get disabled(){return r(je)},selectPlaceholder:"Select size",get keyOfSelected(){return r(V)},set keyOfSelected(Te){x(V,Te)},$$legacy:!0})}}}})};X(ie,ye=>{F(q),r(N),A(()=>{var Se;return q.hasImageExtension((Se=r(N))==null?void 0:Se.name)})&&ye(be)})}var oe=y(ie,2),Q=I(oe),ne=I(Q);B(()=>{xe.disabled=r(w),oe.disabled=!r(d),Ee(ne,m())}),ce("click",xe,U),ce("click",oe,pe),b(ue,he)}},$$legacy:!0})),ue=>x(k,ue),()=>r(k));var ve=y(ke,2);gt(pf(ve,{get collection(){return r(L)},$$events:{save:ue=>{q.removeByKey(r(D),"id",ue.detail.record.id),r(D).unshift(ue.detail.record),x(D,r(D));const me=te(ue.detail.record);me.length>0&&de(ue.detail.record,me[0])},delete:ue=>{var me,he;((he=(me=r(N))==null?void 0:me.record)==null?void 0:he.id)==ue.detail.id&&x(N,{}),q.removeByKey(r(D),"id",ue.detail.id),x(D,r(D))}},$$legacy:!0}),ue=>x(_,ue),()=>r(_)),b(n,_e),xt(e,"show",R),xt(e,"hide",U);var Oe=Je({show:R,hide:U});return s(),Oe}var kA=T('<div class="tinymce-wrapper"></div>'),SA=T("<!> <!>",1),TA=T("<!> <!>",1);function $A(n,e){Ke(e,!1);const t=M();let i=re(e,"field",8),a=re(e,"value",12,""),s=M(),o=M(),l=M(!1),c=null;vn(async()=>(typeof a()>"u"&&a(""),c=setTimeout(()=>{x(l,!0)},100),()=>{clearTimeout(c)})),se(()=>F(i()),()=>{x(t,Object.assign(q.defaultEditorOptions(),{convert_urls:i().convertURLs,relative_urls:!1}))}),se(()=>F(a()),()=>{typeof a()>"u"&&a("")}),ht(),Ge();var u=TA(),d=j(u);{let h=ae(()=>(F(i()),A(()=>i().required?"required":"")));Ne(d,{get class(){return`form-field form-field-editor ${r(h)??""}`},get name(){return F(i()),A(()=>i().name)},children:Ae,$$slots:{default:(p,v)=>{const m=ae(()=>v.uniqueId);var g=SA(),k=j(g);Si(k,{get uniqueId(){return r(m)},get field(){return i()}});var _=y(k,2);{var E=S=>{qd(S,{get id(){return r(m)},get conf(){return r(t)},get value(){return a()},set value(C){a(C)},$$events:{init:C=>{x(o,C.detail.editor),r(o).on("collections_file_picker",()=>{var w;(w=r(s))==null||w.show()})}},$$legacy:!0})},D=S=>{var C=kA();b(S,C)};X(_,S=>{r(l)?S(E):S(D,!1)})}b(p,g)}}})}var f=y(d,2);gt(wA(f,{title:"Select an image",fileTypes:["image"],$$events:{submit:h=>{var p;(p=r(o))==null||p.execCommand("InsertImage",!1,ze.files.getURL(h.detail.record,h.detail.name,{thumb:h.detail.size}))}},$$legacy:!0}),h=>x(s,h),()=>r(s)),b(n,u),Je()}var IA=T('<!> <input type="email"/>',1);function CA(n,e){Ke(e,!1);let t=re(e,"field",8),i=re(e,"value",12,void 0);Ge();{let a=ae(()=>(F(t()),A(()=>t().required?"required":"")));Ne(n,{get class(){return`form-field ${r(a)??""}`},get name(){return F(t()),A(()=>t().name)},children:Ae,$$slots:{default:(s,o)=>{const l=ae(()=>o.uniqueId);var c=IA(),u=j(c);Si(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=y(u,2);B(()=>{Y(d,"id",r(l)),d.required=(F(t()),A(()=>t().required))}),_t(d,i),b(s,c)}}})}Je()}var EA=T("<img/>"),OA=T('<i class="ri-file-line"></i>');function DA(n,e){Ke(e,!1);const t=M();let i=re(e,"file",8),a=re(e,"size",8,50);function s(){var d;q.hasImageExtension((d=i())==null?void 0:d.name)?q.generateThumb(i(),a(),a()).then(f=>{x(t,f)}).catch(f=>{x(t,""),console.warn("Unable to generate thumb: ",f)}):x(t,"")}se(()=>F(i()),()=>{typeof i()<"u"&&s()}),se(()=>{},()=>{x(t,"")}),ht(),Ge();var o=rt(),l=j(o);{var c=d=>{var f=EA();Y(f,"draggable",!1),B(()=>{Y(f,"src",r(t)),Y(f,"width",a()),Y(f,"height",a()),Y(f,"alt",(F(i()),A(()=>i().name)))}),b(d,f)},u=d=>{var f=OA();B(()=>Y(f,"alt",(F(i()),A(()=>i().name)))),b(d,f)};X(l,d=>{r(t)?d(c):d(u,!1)})}b(n,o),Je()}var PA=T('<button type="button" class="btn btn-sm btn-danger btn-transparent"><span class="txt">Restore</span></button>'),MA=T('<button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove"><i class="ri-close-line"></i></button>'),AA=T('<div><div><!></div> <div class="content"><button type="button" title="Download"> </button></div> <div class="actions"><!></div></div>'),LA=T('<div><figure class="thumb"><!></figure> <div class="filename m-r-auto"><small class="label label-success m-r-5">New</small> <span class="txt"> </span></div> <button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove"><i class="ri-close-line"></i></button></div>'),NA=T('<!> <div class="list"><!> <!> <div class="list-item list-item-btn"><input type="file" class="hidden"/> <button type="button" class="btn btn-transparent btn-sm btn-block"><i class="ri-upload-cloud-line"></i> <span class="txt">Upload new file</span></button></div></div>',1),RA=T('<div class="block"><!></div>');function FA(n,e){Ke(e,!1);const t=M(),i=M(),a=M();let s=re(e,"record",8),o=re(e,"field",8),l=re(e,"value",12,""),c=re(e,"uploadedFiles",28,()=>[]),u=re(e,"deletedFileNames",28,()=>[]),d=M(),f=M(),h=M(!1);function p(S){q.removeByValue(u(),S),u(u())}function v(S){q.pushUnique(u(),S),u(u())}function m(S){q.isEmpty(c()[S])||c().splice(S,1),c(c())}function g(){var S;(S=r(f))==null||S.dispatchEvent(new CustomEvent("change",{detail:{value:l(),uploadedFiles:c(),deletedFileNames:u()},bubbles:!0}))}function k(S){var w;S.preventDefault(),x(h,!1);const C=((w=S.dataTransfer)==null?void 0:w.files)||[];if(!(r(a)||!C.length)){for(const $ of C){const O=r(i).length+c().length-u().length;if(o().maxSelect<=O)break;c().push($)}c(c())}}async function _(S){try{let C=await ze.getSuperuserFileToken(s().collectionId),w=ze.files.getURL(s(),S,{token:C});window.open(w,"_blank","noreferrer, noopener")}catch(C){console.warn("openInNewTab file token failure:",C)}}se(()=>(F(c()),q),()=>{Array.isArray(c())||c(q.toArray(c()))}),se(()=>(F(u()),q),()=>{Array.isArray(u())||u(q.toArray(u()))}),se(()=>F(o()),()=>{x(t,o().maxSelect>1)}),se(()=>(F(l()),r(t)),()=>{q.isEmpty(l())&&l(r(t)?[]:"")}),se(()=>F(l()),()=>{x(i,q.toArray(l()))}),se(()=>(r(i),F(c()),F(o()),F(u())),()=>{x(a,(r(i).length||c().length)&&o().maxSelect<=r(i).length+c().length-u().length)}),se(()=>(F(c()),F(u())),()=>{(c()!==-1||u()!==-1)&&g()}),ht(),Ge();var E=RA(),D=I(E);{let S=ae(()=>(F(o()),A(()=>o().required?"required":""))),C=ae(()=>r(h)?"dragover":"");Ne(D,{get class(){return`
            form-field form-field-list form-field-file
            ${r(S)??""}
            ${r(C)??""}
        `},get name(){return F(o()),A(()=>o().name)},children:Ae,$$slots:{default:(w,$)=>{const O=ae(()=>$.uniqueId);var P=NA(),L=j(P);Si(L,{get uniqueId(){return r(O)},get field(){return o()}});var N=y(L,2),V=I(N);bt(V,3,()=>r(i),J=>J+s().id,(J,W,te)=>{const de=ae(()=>(F(u()),r(W),A(()=>u().includes(r(W)))));{let pe=ae(()=>(F(o()),A(()=>o().name+"_uploaded"))),_e=ae(()=>!r(t));$s(J,{get group(){return r(pe)},get index(){return r(te)},get disabled(){return r(_e)},get list(){return l()},set list(ke){l(ke)},children:Ae,$$slots:{default:(ke,ve)=>{const Oe=ae(()=>ve.dragging),ue=ae(()=>ve.dragover);var me=AA();let he;var xe=I(me);let ie;var be=I(xe);mf(be,{get record(){return s()},get filename(){return r(W)}});var oe=y(xe,2),Q=I(oe);Y(Q,"draggable",!1);var ne=I(Q),ye=y(oe,2),Se=I(ye);{var Ie=je=>{var Te=PA();ce("click",Te,()=>p(r(W))),b(je,Te)},Le=je=>{var Te=MA();nt(Te,(Ze,we)=>le==null?void 0:le(Ze,we),()=>"Remove file"),qt(()=>ce("click",Te,()=>v(r(W)))),b(je,Te)};X(Se,je=>{r(de)?je(Ie):je(Le,!1)})}B((je,Te)=>{he=Ue(me,1,"list-item",null,he,je),ie=Ue(xe,1,"",null,ie,Te),Ue(Q,1,`txt-ellipsis ${r(de)?"txt-strikethrough link-hint":"link-primary"}`),Ee(ne,r(W))},[()=>({dragging:r(Oe),dragover:r(ue)}),()=>({fade:r(de)})]),ce("auxclick",Q,()=>_(r(W))),ce("click",Q,()=>_(r(W))),b(ke,me)}},$$legacy:!0})}});var R=y(V,2);bt(R,3,c,(J,W)=>J.name+W,(J,W,te)=>{{let de=ae(()=>(F(o()),A(()=>o().name+"_new"))),pe=ae(()=>!r(t));$s(J,{get group(){return r(de)},get index(){return r(te)},get disabled(){return r(pe)},get list(){return c()},set list(_e){c(_e)},children:Ae,$$slots:{default:(_e,ke)=>{const ve=ae(()=>ke.dragging),Oe=ae(()=>ke.dragover);var ue=LA();let me;var he=I(ue),xe=I(he);DA(xe,{get file(){return r(W)}});var ie=y(he,2),be=y(I(ie),2),oe=I(be),Q=y(ie,2);nt(Q,(ne,ye)=>le==null?void 0:le(ne,ye),()=>"Remove file"),qt(()=>ce("click",Q,()=>m(r(te)))),B(ne=>{me=Ue(ue,1,"list-item",null,me,ne),Y(ie,"title",(r(W),A(()=>r(W).name))),Ee(oe,(r(W),A(()=>r(W).name)))},[()=>({dragging:r(ve),dragover:r(Oe)})]),b(_e,ue)}},$$legacy:!0})}});var U=y(R,2),H=I(U);gt(H,J=>x(d,J),()=>r(d));var z=y(H,2);gt(N,J=>x(f,J),()=>r(f)),B(J=>{Y(H,"accept",J),H.multiple=r(t),z.disabled=r(a)},[()=>(F(o()),A(()=>{var J;return((J=o().mimeTypes)==null?void 0:J.join(","))||null}))]),ce("change",H,()=>{for(let J of r(d).files)c().push(J);c(c()),dt(d,r(d).value=null)}),ce("click",z,()=>{var J;return(J=r(d))==null?void 0:J.click()}),b(w,P)}}})}ce("dragover",E,Et(()=>{x(h,!0)})),ce("dragleave",E,()=>{x(h,!1)}),ce("drop",E,k),b(n,E),Je()}var qA=T('<i class="ri-checkbox-circle-fill txt-success"></i>'),zA=T('<i class="ri-error-warning-fill txt-danger"></i>'),jA=T('<span class="json-state svelte-p6ecb8"><!></span>'),VA=T('<input type="text" class="txt-mono" value="Loading..." disabled/>'),UA=T("<!> <!>",1);function BA(n,e){Ke(e,!1);const t=M();let i=re(e,"field",8),a=re(e,"value",12,void 0),s=M(),o=M(l(a()));function l(u){return typeof u=="string"&&c(u)?u:JSON.stringify(typeof u>"u"?null:u,null,2)}function c(u){try{return JSON.parse(u===""?null:u),!0}catch{}return!1}vn(async()=>{try{x(s,(await Wt(async()=>{const{default:u}=await import("./CodeEditor-_7ftkqqn.js");return{default:u}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(u){console.warn(u)}}),se(()=>(F(a()),r(o)),()=>{var u;a()!==((u=r(o))==null?void 0:u.trim())&&(x(o,l(a())),a(r(o)))}),se(()=>r(o),()=>{x(t,c(r(o)))}),ht(),Ge();{let u=ae(()=>(F(i()),A(()=>i().required?"required":"")));Ne(n,{get class(){return`form-field ${r(u)??""}`},get name(){return F(i()),A(()=>i().name)},children:Ae,$$slots:{default:(d,f)=>{const h=ae(()=>f.uniqueId);var p=UA(),v=j(p);Si(v,{get uniqueId(){return r(h)},get field(){return i()},children:(_,E)=>{var D=jA(),S=I(D);{var C=$=>{var O=qA();b($,O)},w=$=>{var O=zA();b($,O)};X(S,$=>{r(t)?$(C):$(w,!1)})}nt(D,($,O)=>le==null?void 0:le($,O),()=>({position:"left",text:r(t)?"Valid JSON":"Invalid JSON"})),b(_,D)},$$slots:{default:!0}});var m=y(v,2);{var g=_=>{var E=rt(),D=j(E);wi(D,()=>r(s),(S,C)=>{C(S,{get id(){return r(h)},maxHeight:"500",language:"json",get value(){return r(o)},$$events:{change:w=>{x(o,w.detail),a(r(o).trim())}}})}),b(_,E)},k=_=>{var E=VA();b(_,E)};X(m,_=>{r(s)?_(g):_(k,!1)})}b(d,p)}}})}Je()}var HA=T('<!> <input type="number" step="any"/>',1);function WA(n,e){Ke(e,!1);let t=re(e,"field",8),i=re(e,"value",12,void 0);Ge();{let a=ae(()=>(F(t()),A(()=>t().required?"required":"")));Ne(n,{get class(){return`form-field ${r(a)??""}`},get name(){return F(t()),A(()=>t().name)},children:Ae,$$slots:{default:(s,o)=>{const l=ae(()=>o.uniqueId);var c=HA(),u=j(c);Si(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=y(u,2);B(()=>{Y(d,"id",r(l)),d.required=(F(t()),A(()=>t().required)),Y(d,"min",(F(t()),A(()=>t().min))),Y(d,"max",(F(t()),A(()=>t().max)))}),_t(d,i),b(s,c)}}})}Je()}var YA=T('<!> <input type="password" autocomplete="new-password"/>',1);function KA(n,e){Ke(e,!1);let t=re(e,"field",8),i=re(e,"value",12,void 0);Ge();{let a=ae(()=>(F(t()),A(()=>t().required?"required":"")));Ne(n,{get class(){return`form-field ${r(a)??""}`},get name(){return F(t()),A(()=>t().name)},children:Ae,$$slots:{default:(s,o)=>{const l=ae(()=>o.uniqueId);var c=YA(),u=j(c);Si(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=y(u,2);B(()=>{Y(d,"id",r(l)),d.required=(F(t()),A(()=>t().required))}),_t(d,i),b(s,c)}}})}Je()}function sm(n){return typeof n=="function"?{threshold:100,callback:n}:n||{}}function Tu(n,e){e=sm(e),e!=null&&e.callback&&e.callback();function t(i){if(!(e!=null&&e.callback))return;i.target.scrollHeight-i.target.clientHeight-i.target.scrollTop<=e.threshold&&e.callback()}return n.addEventListener("scroll",t),n.addEventListener("resize",t),{update(i){e=sm(i)},destroy(){n.removeEventListener("scroll",t),n.removeEventListener("resize",t)}}}var JA=T("<option> </option>"),ZA=T('<div class="form-field"><label>Collection</label> <select class="input"></select></div>'),GA=T('<button type="button" class="btn btn-pill btn-transparent btn-hint p-l-xs p-r-xs"><div class="txt">New record</div></button>'),XA=T('<i class="ri-checkbox-circle-fill txt-success"></i>'),QA=T('<i class="ri-checkbox-blank-circle-line txt-disabled"></i>'),eL=T('<span class="loader loader-xs active"></span>'),tL=T('<div class="actions nonintrusive"><button type="button" class="btn btn-sm btn-circle btn-transparent btn-hint m-l-auto"><i class="ri-pencil-line"></i></button></div>'),nL=T('<div tabindex="0"><!> <div class="content"><!></div> <!></div>'),iL=T('<button type="button" class="btn btn-hint btn-sm"><span class="txt">Clear filters</span></button>'),rL=T('<div class="list-item"><span class="txt txt-hint">No records found.</span> <!></div>'),aL=T('<div class="list-item"><div class="block txt-center"><span class="loader loader-sm active"></span></div></div>'),sL=T('<span class="loader loader-xs active"></span>'),oL=T('<span><!> <button type="button" title="Remove" class="btn btn-circle btn-transparent btn-hint btn-xs"><i class="ri-close-line"></i></button></span>'),lL=T('<div class="selected-list svelte-1u8jhky"></div>'),cL=T('<p class="txt-hint">No selected records.</p>'),uL=T('<div class="flex m-b-base flex-gap-10"><!> <!> <!></div> <div class="list picker-list m-b-base svelte-1u8jhky"><!> <!></div> <h5 class="section-title">Selected <!></h5> <!>',1),dL=T("<h4>Select <strong> </strong> records</h4>"),fL=T('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button" class="btn"><span class="txt">Set selection</span></button>',1),hL=T("<!> <!>",1);function vL(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["show","hide","value","field"]);Ke(e,!1);const[a,s]=Rt(),o=()=>It(ai,"$collections",a),l=M(),c=M(),u=M(),d=M(),f=M(),h=M(),p=M(),v=M(),m=M(),g=M(),k=Ut(),_="picker_"+q.randomString(5),E=50;let D=re(e,"value",8),S=re(e,"field",8),C=M(),w=M(),$=M(""),O=M([]),P=M([]),L=M(1),N=M(0),V=M(!1),R=M(!1),U=M({}),H=M();function z(){var ie,be;return x($,""),x(O,[]),x(P,[]),r(u)&&!r(H)&&((ie=r(d))!=null&&ie.length)&&x(H,r(d)[0].id),te(),de(!0),(be=r(C))==null?void 0:be.show()}function J(){var ie;return(ie=r(C))==null?void 0:ie.hide()}function W(){var oe,Q;let ie=[];const be=(Q=(oe=r(f))==null?void 0:oe.fields)==null?void 0:Q.filter(ne=>!ne.hidden&&ne.presentable&&ne.type=="relation");for(const ne of be)ie=ie.concat(q.getExpandPresentableRelFields(ne,o(),2));return ie.join(",")}async function te(){var oe;const ie=q.toArray(D());if(!ie.length)return;x(R,!0);let be=[];if(r(u)){const Q={};for(const ye of ie){const Se=""+ye,Ie=Se.indexOf(":");if(Ie>0&&Ie<Se.length-1){const Le=Se.slice(0,Ie),je=Se.slice(Ie+1);Q[Le]=Q[Le]||[],Q[Le].push(je)}}const ne=[];for(const ye in Q){const Se=Q[ye].slice();for(;Se.length>0;){const Ie=[];for(const Le of Se.splice(0,E))Ie.push(`id="${Le}"`);ne.push(ze.collection(ye).getFullList({batch:E,filter:Ie.join("||"),fields:"*:excerpt(200)",expand:W(),requestKey:null}))}}try{await Promise.all(ne).then(ye=>{be=be.concat(...ye)});for(const ye of be)ye.collectionId||(ye.collectionId=((oe=r(f))==null?void 0:oe.id)||r(H));x(P,[]);for(const ye of ie){const Se=(""+ye).indexOf(":"),Ie=Se>0?(""+ye).slice(Se+1):""+ye,Le=q.findByKey(be,"id",Ie);Le&&r(P).push(Le)}r($).trim()||x(O,q.filterDuplicatesByKey(r(P).concat(r(O)))),x(R,!1)}catch(ye){ye.isAbort||(ze.error(ye),x(R,!1))}}else{if(!r(c)){x(R,!1);return}const Q=ie.slice(),ne=[];for(;Q.length>0;){const ye=[];for(const Se of Q.splice(0,E))ye.push(`id="${Se}"`);ne.push(ze.collection(r(c)).getFullList({batch:E,filter:ye.join("||"),fields:"*:excerpt(200)",expand:W(),requestKey:null}))}try{await Promise.all(ne).then(ye=>{be=be.concat(...ye)}),x(P,[]);for(const ye of ie){const Se=q.findByKey(be,"id",ye);Se&&r(P).push(Se)}r($).trim()||x(O,q.filterDuplicatesByKey(r(P).concat(r(O)))),x(R,!1)}catch(ye){ye.isAbort||(ze.error(ye),x(R,!1))}}}async function de(ie=!1){if(!(!r(H)&&!r(c))&&!(r(V)&&!ie)){x(V,!0),ie&&(r($).trim()?x(O,[]):x(O,q.toArray(r(P)).slice()));try{const be=ie?1:r(L)+1,oe=q.getAllCollectionIdentifiers(r(f));let Q="";r(h)||(Q="-@rowid");const ne=r(H)||r(c),ye=await ze.collection(ne).getList(be,E,{filter:q.normalizeSearchFilter(r($),oe),sort:Q,fields:"*:excerpt(200)",skipTotal:1,expand:W(),requestKey:_+"loadList"});x(O,q.filterDuplicatesByKey(r(O).concat(ye.items))),x(L,ye.page),x(N,ye.items.length),x(V,!1)}catch(be){be.isAbort||(ze.error(be),x(V,!1))}}}async function pe(ie){if(ie!=null&&ie.id){dt(U,r(U)[ie.id]=!0);try{const be=r(H)||r(c),oe=await ze.collection(be).getOne(ie.id,{fields:"*:excerpt(200)",expand:W(),requestKey:_+"reload"+ie.id});q.pushOrReplaceByKey(r(P),oe),q.pushOrReplaceByKey(r(O),oe),x(P,r(P)),x(O,r(O)),dt(U,r(U)[ie.id]=!1)}catch(be){be.isAbort||(ze.error(be),dt(U,r(U)[ie.id]=!1))}}}function _e(ie){r(l)==1?x(P,[ie]):r(m)&&(q.pushOrReplaceByKey(r(P),ie),x(P,r(P)))}function ke(ie){q.removeByKey(r(P),"id",ie.id),x(P,r(P))}function ve(ie){r(g)(ie)?ke(ie):_e(ie)}function Oe(){k("save",r(P)),J()}se(()=>F(S()),()=>{var ie;x(l,((ie=S())==null?void 0:ie.maxSelect)||null)}),se(()=>F(S()),()=>{var ie;x(c,(ie=S())==null?void 0:ie.collectionId)}),se(()=>F(S()),()=>{var ie;x(u,Array.isArray((ie=S())==null?void 0:ie.collectionIds)&&S().collectionIds.length>0)}),se(()=>(r(u),o(),F(S()),r(c)),()=>{x(d,r(u)?o().filter(ie=>S().collectionIds.includes(ie.id)):o().filter(ie=>ie.id==r(c)))}),se(()=>(r(u),r(H),r(d),r(c)),()=>{var ie;r(u)?!r(H)&&((ie=r(d))!=null&&ie.length)&&x(H,r(d)[0].id):r(H)!==r(c)&&x(H,r(c))}),se(()=>(o(),r(H)),()=>{x(f,o().find(ie=>ie.id==r(H))||null)}),se(()=>(r($),r(C)),()=>{var ie;typeof r($)<"u"&&((ie=r(C))!=null&&ie.isActive())&&de(!0)}),se(()=>r(f),()=>{var ie;x(h,((ie=r(f))==null?void 0:ie.type)==="view")}),se(()=>(r(V),r(R)),()=>{x(p,r(V)||r(R))}),se(()=>r(N),()=>{x(v,r(N)==E)}),se(()=>(r(l),r(P)),()=>{x(m,r(l)<=0||r(l)>r(P).length)}),se(()=>r(P),()=>{x(g,function(ie){return q.findByKey(r(P),"id",ie.id)})}),ht(),Ge();var ue=hL(),me=j(ue);gt(_n(me,sn({popup:!0,class:"overlay-panel-xl"},()=>i,{$$events:{hide(ie){ct.call(this,e,ie)},show(ie){ct.call(this,e,ie)}},children:(ie,be)=>{var oe=uL(),Q=j(oe),ne=I(Q);{var ye=Fe=>{var De=ZA(),Ve=I(De),Ye=y(Ve,2);B(()=>{r(H),$a(()=>{r(O),r(L),r(d)})}),bt(Ye,5,()=>r(d),Nt,(lt,We)=>{var tt=JA(),it=I(tt),Qe={};B(()=>{Ee(it,(r(We),A(()=>r(We).name))),Qe!==(Qe=(r(We),A(()=>r(We).id)))&&(tt.value=(tt.__value=(r(We),A(()=>r(We).id)))??"")}),b(lt,tt)}),B(()=>{Y(Ve,"for",_+"_collection"),Y(Ye,"id",_+"_collection")}),a_(Ye,()=>r(H),lt=>x(H,lt)),ce("change",Ye,()=>{x(O,[]),x(L,1),de(!0)}),b(Fe,De)};X(ne,Fe=>{r(u)&&Fe(ye)})}var Se=y(ne,2);Tc(Se,{get value(){return r($)},get autocompleteCollection(){return r(f)},$$events:{submit:Fe=>x($,Fe.detail)}});var Ie=y(Se,2);{var Le=Fe=>{var De=GA();ce("click",De,()=>{var Ve;return(Ve=r(w))==null?void 0:Ve.show()}),b(Fe,De)};X(Ie,Fe=>{r(h)||Fe(Le)})}var je=y(Q,2),Te=I(je);bt(Te,1,()=>r(O),Fe=>Fe.id,(Fe,De,Ve,Ye)=>{const lt=ae(()=>(r(g),r(De),A(()=>r(g)(r(De)))));var We=nL();let tt;var it=I(We);{var Qe=fe=>{var $e=XA();b(fe,$e)},ft=fe=>{var $e=QA();b(fe,$e)};X(it,fe=>{r(lt)?fe(Qe):fe(ft,!1)})}var pt=y(it,2),at=I(pt);{var Ce=fe=>{var $e=eL();b(fe,$e)},vt=fe=>{nc(fe,{get record(){return r(De)}})};X(at,fe=>{r(U),r(De),A(()=>r(U)[r(De).id])?fe(Ce):fe(vt,!1)})}var K=y(pt,2);{var G=fe=>{var $e=tL(),et=I($e);nt(et,(ot,wt)=>le==null?void 0:le(ot,wt),()=>"Edit"),qt(()=>ce("keydown",et,gn(function(ot){ct.call(this,e,ot)}))),qt(()=>ce("click",et,gn(()=>{var ot;return(ot=r(w))==null?void 0:ot.show(r(De).id)}))),b(fe,$e)};X(K,fe=>{r(h)||fe(G)})}B(fe=>tt=Ue(We,1,"list-item handle",null,tt,fe),[()=>({selected:r(lt),disabled:r(U)[r(De).id]||!r(lt)&&r(l)>1&&!r(m)})]),ce("click",We,()=>ve(r(De))),ce("keydown",We,fe=>{(fe.code==="Enter"||fe.code==="Space")&&(fe.preventDefault(),fe.stopPropagation(),ve(r(De)))}),b(Fe,We)},Fe=>{var De=rt(),Ve=j(De);{var Ye=lt=>{var We=rL(),tt=y(I(We),2);{var it=Qe=>{var ft=iL();ce("click",ft,()=>x($,"")),b(Qe,ft)};X(tt,Qe=>{r($),A(()=>{var ft;return(ft=r($))==null?void 0:ft.length})&&Qe(it)})}b(lt,We)};X(Ve,lt=>{r(p)||lt(Ye)})}b(Fe,De)});var Ze=y(Te,2);{var we=Fe=>{var De=aL();b(Fe,De)};X(Ze,Fe=>{r(p)&&Fe(we)})}nt(je,(Fe,De)=>Tu==null?void 0:Tu(Fe,De),()=>()=>{r(v)&&!r(V)&&de()});var Re=y(je,2),Me=y(I(Re));{var Xe=Fe=>{var De=mr();B(()=>Ee(De,`(${r(P),A(()=>r(P).length)??""} of MAX ${r(l)??""})`)),b(Fe,De)};X(Me,Fe=>{r(l)>1&&Fe(Xe)})}var Be=y(Re,2);{var Pe=Fe=>{var De=lL();bt(De,5,()=>r(P),Nt,(Ve,Ye,lt)=>{$s(Ve,{index:lt,get list(){return r(P)},set list(We){x(P,We)},children:Ae,$$slots:{default:(We,tt)=>{const it=ae(()=>tt.dragging),Qe=ae(()=>tt.dragover);var ft=oL();let pt;var at=I(ft);{var Ce=G=>{var fe=sL();b(G,fe)},vt=G=>{nc(G,{get record(){return r(Ye)}})};X(at,G=>{r(U),r(Ye),A(()=>r(U)[r(Ye).id])?G(Ce):G(vt,!1)})}var K=y(at,2);B(G=>pt=Ue(ft,1,"label",null,pt,G),[()=>({"label-danger":r(it),"label-warning":r(Qe)})]),ce("click",K,()=>ke(r(Ye))),b(We,ft)}},$$legacy:!0})}),b(Fe,De)},He=Fe=>{var De=cL();b(Fe,De)};X(Be,Fe=>{r(P),A(()=>r(P).length)?Fe(Pe):Fe(He,!1)})}b(ie,oe)},$$slots:{default:!0,header:(ie,be)=>{var oe=dL(),Q=y(I(oe)),ne=I(Q);B(()=>Ee(ne,(r(f),A(()=>{var ye;return((ye=r(f))==null?void 0:ye.name)||""})))),b(ie,oe)},footer:(ie,be)=>{var oe=fL(),Q=j(oe),ne=y(Q,2);ce("click",Q,()=>J()),ce("click",ne,()=>Oe()),b(ie,oe)}},$$legacy:!0})),ie=>x(C,ie),()=>r(C));var he=y(me,2);gt(pf(he,{get collection(){return r(f)},$$events:{save:ie=>{q.removeByKey(r(O),"id",ie.detail.record.id),r(O).unshift(ie.detail.record),x(O,r(O)),_e(ie.detail.record),pe(ie.detail.record)},delete:ie=>{q.removeByKey(r(O),"id",ie.detail.id),x(O,r(O)),ke(ie.detail)}},$$legacy:!0}),ie=>x(w,ie),()=>r(w)),b(n,ue),xt(e,"show",z),xt(e,"hide",J);var xe=Je({show:z,hide:J});return s(),xe}var mL=T('<i class="ri-error-warning-line link-hint m-l-auto flex-order-10"></i>'),pL=T('<div><div class="content"><!></div> <div class="actions"><button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove"><i class="ri-close-line"></i></button></div></div>'),gL=T('<div class="list-item"><div class="skeleton-loader"></div></div>'),bL=T('<!> <div class="list"><div class="relations-list svelte-1ynw0pc"></div> <div class="list-item list-item-btn"><button type="button" class="btn btn-transparent btn-sm btn-block"><i class="ri-magic-line"></i> <span class="txt">Open picker</span></button></div></div>',1),yL=T("<!> <!>",1);function _L(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(ai,"$collections",t),s=M(),o=M(),l=100;let c=re(e,"field",8),u=re(e,"value",12),d=re(e,"picker",12),f=M(),h=M([]),p=M(!1),v=M(),m=M([]);function g(){if(r(p))return!1;const w=q.toArray(u());return x(h,r(h).filter($=>{const O=$.id,P=$!=null&&$.collectionId?`${$.collectionId}:${$.id}`:null;return w.includes(O)||P&&w.includes(P)})),w.length!=r(h).length}async function k(){var N;const w=q.toArray(u());if(x(h,[]),x(m,[]),!((N=c())!=null&&N.collectionId)&&!r(o)||!w.length){x(p,!1);return}x(p,!0);function $(V){var H,z;let R=[];const U=(z=(H=a().find(J=>J.id==V))==null?void 0:H.fields)==null?void 0:z.filter(J=>!J.hidden&&J.presentable&&J.type=="relation");for(const J of U||[])R=R.concat(q.getExpandPresentableRelFields(J,a(),2));return R.join(",")}const O={},P=[];for(const V of w){const R=(""+V).indexOf(":");if(R>0&&R<(""+V).length-1){const U=(""+V).slice(0,R),H=(""+V).slice(R+1);O[U]=O[U]||[],O[U].push(H)}else P.push(V)}P.length&&c().collectionId&&(O[c().collectionId]=(O[c().collectionId]||[]).concat(P));const L=[];for(const V in O){const R=O[V].slice();for(;R.length>0;){const U=[];for(const H of R.splice(0,l))U.push(`id="${H}"`);L.push(ze.collection(V).getFullList(l,{filter:U.join("||"),fields:"*:excerpt(200)",expand:$(V),requestKey:null}))}}try{let V=[];await Promise.all(L).then(R=>{V=V.concat(...R)});for(const R of w){const U=(""+R).indexOf(":"),H=U>0?(""+R).slice(U+1):""+R,z=q.findByKey(V,"id",H);z?r(h).push(z):r(m).push(R)}x(h,r(h)),E()}catch(V){ze.error(V)}x(p,!1)}function _(w){q.removeByKey(r(h),"id",w.id),x(h,r(h)),E()}function E(){const w=r(o)||r(h).some($=>{var O;return!!($!=null&&$.collectionId)&&(!((O=c())!=null&&O.collectionId)||$.collectionId!==c().collectionId)});if(r(s))u(r(h).map($=>w?`${$.collectionId}:${$.id}`:$.id));else{const $=r(h)[0];u($?w?`${$.collectionId}:${$.id}`:$.id:"")}}Ro(()=>{clearTimeout(r(v))}),se(()=>F(c()),()=>{x(s,c().maxSelect>1)}),se(()=>F(c()),()=>{x(o,Array.isArray(c().collectionIds)&&c().collectionIds.length>0)}),se(()=>(F(u()),r(f)),()=>{var w;typeof u()<"u"&&((w=r(f))==null||w.changed())}),se(()=>(r(h),F(u()),r(v)),()=>{g(r(h),u())&&(x(p,!0),clearTimeout(r(v)),x(v,setTimeout(k,0)))}),ht(),Ge();var D=yL(),S=j(D);{let w=ae(()=>(F(c()),A(()=>c().required?"required":"")));gt(Ne(S,{get class(){return`form-field form-field-list ${r(w)??""}`},get name(){return F(c()),A(()=>c().name)},children:Ae,$$slots:{default:($,O)=>{const P=ae(()=>O.uniqueId);var L=bL(),N=j(L);Si(N,{get uniqueId(){return r(P)},get field(){return c()},children:(z,J)=>{var W=rt(),te=j(W);{var de=pe=>{var _e=mL();nt(_e,(ke,ve)=>le==null?void 0:le(ke,ve),()=>({position:"left",text:"The following relation ids were removed from the list because they are missing or invalid: "+r(m).join(", ")})),b(pe,_e)};X(te,pe=>{r(m),A(()=>r(m).length)&&pe(de)})}b(z,W)},$$slots:{default:!0}});var V=y(N,2),R=I(V);bt(R,7,()=>r(h),z=>z.id,(z,J,W)=>{{let te=ae(()=>(F(c()),A(()=>c().name+"_relation"))),de=ae(()=>!r(s));$s(z,{get group(){return r(te)},get index(){return r(W)},get disabled(){return r(de)},get list(){return r(h)},set list(pe){x(h,pe)},$$events:{sort:()=>{E()}},children:Ae,$$slots:{default:(pe,_e)=>{const ke=ae(()=>_e.dragging),ve=ae(()=>_e.dragover);var Oe=pL();let ue;var me=I(Oe),he=I(me);nc(he,{get record(){return r(J)}});var xe=y(me,2),ie=I(xe);nt(ie,(be,oe)=>le==null?void 0:le(be,oe),()=>"Remove"),qt(()=>ce("click",ie,()=>_(r(J)))),B(be=>ue=Ue(Oe,1,"list-item",null,ue,be),[()=>({dragging:r(ke),dragover:r(ve)})]),b(pe,Oe)}},$$legacy:!0})}},z=>{var J=rt(),W=j(J);{var te=de=>{var pe=rt(),_e=j(pe);bt(_e,1,()=>(F(q),F(u()),A(()=>q.toArray(u()).slice(0,10))),Nt,(ke,ve)=>{var Oe=gL();b(ke,Oe)}),b(de,pe)};X(W,de=>{r(p)&&de(te)})}b(z,J)});var U=y(R,2),H=I(U);ce("click",H,()=>{var z;return(z=d())==null?void 0:z.show()}),b($,L)}},$$legacy:!0}),$=>x(f,$),()=>r(f))}var C=y(S,2);gt(vL(C,{get value(){return u()},get field(){return c()},$$events:{save:w=>{x(h,w.detail||[]),E()}},$$legacy:!0}),w=>d(w),()=>d()),b(n,D),Je(),i()}var xL=T('<div class="help-block"> </div>'),wL=T("<!> <!> <!>",1);function kL(n,e){Ke(e,!1);const t=M(),i=M();let a=re(e,"field",8),s=re(e,"value",12,void 0);se(()=>F(a()),()=>{x(t,a().maxSelect>1)}),se(()=>(F(s()),r(t)),()=>{typeof s()>"u"&&s(r(t)?[]:"")}),se(()=>F(a()),()=>{x(i,a().maxSelect||a().values.length)}),se(()=>(r(t),F(s()),F(a()),r(i)),()=>{r(t)&&Array.isArray(s())&&(s(s().filter(o=>a().values.includes(o))),s().length>r(i)&&s(s().slice(s().length-r(i))))}),ht(),Ge();{let o=ae(()=>(F(a()),A(()=>a().required?"required":"")));Ne(n,{get class(){return`form-field ${r(o)??""}`},get name(){return F(a()),A(()=>a().name)},children:Ae,$$slots:{default:(l,c)=>{const u=ae(()=>c.uniqueId);var d=wL(),f=j(d);Si(f,{get uniqueId(){return r(u)},get field(){return a()}});var h=y(f,2);{let m=ae(()=>(F(a()),r(t),A(()=>!a().required||r(t)))),g=ae(()=>(r(t),F(s()),F(a()),A(()=>{var _;return!r(t)||((_=s())==null?void 0:_.length)>=a().maxSelect}))),k=ae(()=>(F(a()),A(()=>{var _;return((_=a().values)==null?void 0:_.length)>5})));as(h,{get id(){return r(u)},get toggle(){return r(m)},get multiple(){return r(t)},get closable(){return r(g)},get items(){return F(a()),A(()=>a().values)},get searchable(){return r(k)},get selected(){return s()},set selected(_){s(_)},$$legacy:!0})}var p=y(h,2);{var v=m=>{var g=xL(),k=I(g);B(()=>Ee(k,`Select up to ${r(i)??""} items.`)),b(m,g)};X(p,m=>{r(t)&&m(v)})}b(l,d)}}})}Je()}var SL=T("<textarea></textarea>");function TL(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","maxHeight"]);Ke(e,!1);let a=re(e,"value",12,""),s=re(e,"maxHeight",8,200),o=M(),l;function c(){clearTimeout(l),l=setTimeout(()=>{r(o)&&(dt(o,r(o).style.height=""),dt(o,r(o).style.height=Math.min(r(o).scrollHeight,s())+"px"))},0)}function u(f){if((f==null?void 0:f.code)==="Enter"&&!(f!=null&&f.shiftKey)&&!(f!=null&&f.isComposing)){f.preventDefault();const h=r(o).closest("form");h!=null&&h.requestSubmit&&h.requestSubmit()}}vn(()=>(c(),()=>clearTimeout(l))),se(()=>F(a()),()=>{typeof a()!==void 0&&c()}),ht(),Ge();var d=SL();_s(d,()=>({...i}),void 0,void 0,"svelte-1x1pbts"),gt(d,f=>x(o,f),()=>r(o)),_t(d,a),ce("keydown",d,u),b(n,d),Je()}var $L=T("<!> <!>",1);function IL(n,e){Ke(e,!1);const t=M(),i=M();let a=re(e,"original",8),s=re(e,"field",8),o=re(e,"value",12,void 0);se(()=>(F(s()),F(a())),()=>{var l;x(t,!q.isEmpty(s().autogeneratePattern)&&!((l=a())!=null&&l.id))}),se(()=>(F(s()),r(t)),()=>{x(i,s().required&&!r(t))}),ht(),Ge();{let l=ae(()=>r(i)?"required":"");Ne(n,{get class(){return`form-field ${r(l)??""}`},get name(){return F(s()),A(()=>s().name)},children:Ae,$$slots:{default:(c,u)=>{const d=ae(()=>u.uniqueId);var f=$L(),h=j(f);Si(h,{get uniqueId(){return r(d)},get field(){return s()}});var p=y(h,2);{let v=ae(()=>r(t)?"Leave empty to autogenerate...":"");TL(p,{get id(){return r(d)},get required(){return r(i)},get placeholder(){return r(v)},get value(){return o()},set value(m){o(m)},$$legacy:!0})}b(c,f)}}})}Je()}var CL=T('<!> <input type="url"/>',1);function EL(n,e){Ke(e,!1);let t=re(e,"field",8),i=re(e,"value",12,void 0);Ge();{let a=ae(()=>(F(t()),A(()=>t().required?"required":"")));Ne(n,{get class(){return`form-field ${r(a)??""}`},get name(){return F(t()),A(()=>t().name)},children:Ae,$$slots:{default:(s,o)=>{const l=ae(()=>o.uniqueId);var c=CL(),u=j(c);Si(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=y(u,2);B(()=>{Y(d,"id",r(l)),d.required=(F(t()),A(()=>t().required))}),_t(d,i),b(s,c)}}})}Je()}var OL=T('<label>Longitude:</label> <input type="number" placeholder="0" step="any" min="-180" max="180"/>',1),DL=T('<label>Latitude:</label> <input type="number" placeholder="0" step="any" min="-90" max="90"/>',1),PL=T('<div class="block txt-center p-base"><span class="loader loader-sm"></span></div>'),ML=T('<div class="block" style="height:200px"><!></div>'),AL=T('<!> <div class="list"><div class="list-item svelte-m6kyna"><!> <span class="separator svelte-m6kyna"></span> <!> <span class="separator svelte-m6kyna"></span> <button type="button" aria-label="Toggle map"><i class="ri-map-2-line"></i></button></div> <!></div>',1);function LL(n,e){Ke(e,!1),re(e,"original",8);let t=re(e,"field",8),i=re(e,"value",12,void 0),a=M(),s=M(!1),o=M(!1);function l(){i().lat>90&&i(i().lat=90,!0),i().lat<-90&&i(i().lat=-90,!0),i().lon>180&&i(i().lon=180,!0),i().lon<-180&&i(i().lon=-180,!0)}function c(){r(o)?d():u()}function u(){f(),x(o,!0)}function d(){x(o,!1)}async function f(){r(a)||r(s)||(x(s,!0),x(a,(await Wt(async()=>{const{default:h}=await import("./Leaflet-icTs_VPL.js");return{default:h}},__vite__mapDeps([14,15]),import.meta.url)).default),x(s,!1))}se(()=>F(i()),()=>{typeof i()>"u"&&i({lat:0,lon:0})}),se(()=>F(i()),()=>{i()&&l()}),ht(),Ge();{let h=ae(()=>(F(t()),A(()=>t().required?"required":"")));Ne(n,{get class(){return`form-field form-field-list ${r(h)??""}`},get name(){return F(t()),A(()=>t().name)},children:Ae,$$slots:{default:(p,v)=>{const m=ae(()=>v.uniqueId);var g=AL(),k=j(g);Si(k,{get uniqueId(){return r(m)},get field(){return t()}});var _=y(k,2),E=I(_),D=I(E);Ne(D,{class:"form-field form-field-inline m-0",children:Ae,$$slots:{default:(O,P)=>{const L=ae(()=>P.uniqueId);var N=OL(),V=j(N),R=y(V,2);B(()=>{Y(V,"for",r(L)),Y(R,"id",r(L)),R.required=(F(t()),A(()=>t().required))}),_t(R,()=>i().lon,U=>i(i().lon=U,!0)),b(O,N)}}});var S=y(D,4);Ne(S,{class:"form-field form-field-inline m-0",children:Ae,$$slots:{default:(O,P)=>{const L=ae(()=>P.uniqueId);var N=DL(),V=j(N),R=y(V,2);B(()=>{Y(V,"for",r(L)),Y(R,"id",r(L)),R.required=(F(t()),A(()=>t().required))}),_t(R,()=>i().lat,U=>i(i().lat=U,!0)),b(O,N)}}});var C=y(S,4);nt(C,(O,P)=>le==null?void 0:le(O,P),()=>"Toggle map"),qt(()=>ce("click",C,c));var w=y(E,2);{var $=O=>{var P=ML(),L=I(P);{var N=R=>{var U=PL();b(R,U)},V=R=>{var U=rt(),H=j(U);wi(H,()=>r(a),(z,J)=>{J(z,{height:200,get point(){return i()},set point(W){i(W)},$$legacy:!0})}),b(R,U)};X(L,R=>{r(s)?R(N):R(V,!1)})}Ct(3,P,()=>yn,()=>({duration:150})),b(O,P)};X(w,O=>{r(o)&&O($)})}B(()=>Ue(C,1,`btn btn-circle btn-sm btn-circle ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),b(p,g)}}})}Je()}var NL=T('<button><div class="txt"> </div></button>'),RL=T('<div><!> <div class="txt-right"><em class="txt-sm txt-hint"><a target="_blank" rel="noopener noreferrer"> </a></em></div></div>'),FL=T('<div><div class="tabs-header compact combined left svelte-1maocj6"></div> <div class="tabs-content"></div></div>');function qL(n,e){Ke(e,!1);const t=M(),i="pb_sdk_preference";let a=re(e,"class",8,"m-b-sm"),s=re(e,"js",8,""),o=re(e,"dart",8,""),l=M(localStorage.getItem(i)||"javascript");se(()=>r(l),()=>{r(l)&&localStorage.setItem(i,r(l))}),se(()=>(F(s()),F(o())),()=>{x(t,[{title:"JavaScript",language:"javascript",content:s(),url:"https://github.com/pocketbase/js-sdk"},{title:"Dart",language:"dart",content:o(),url:"https://github.com/pocketbase/dart-sdk"}])}),ht(),Ge();var c=FL(),u=I(c);bt(u,5,()=>r(t),f=>f.language,(f,h)=>{var p=NL();let v;var m=I(p),g=I(m);B(k=>{v=Ue(p,1,"tab-item svelte-1maocj6",null,v,k),Ee(g,(r(h),A(()=>r(h).title)))},[()=>({active:r(l)===r(h).language})]),ce("click",p,()=>x(l,r(h).language)),b(f,p)});var d=y(u,2);bt(d,5,()=>r(t),f=>f.language,(f,h)=>{var p=RL();let v;var m=I(p);vd(m,{get language(){return r(h),A(()=>r(h).language)},get content(){return r(h),A(()=>r(h).content)}});var g=y(m,2),k=I(g),_=I(k),E=I(_);B(D=>{v=Ue(p,1,"tab-item",null,v,D),Y(_,"href",(r(h),A(()=>r(h).url))),Ee(E,`${r(h),A(()=>r(h).title)??""} SDK`)},[()=>({active:r(l)===r(h).language})]),b(f,p)}),B(()=>Ue(c,1,`tabs sdk-tabs ${a()??""}`,"svelte-1maocj6")),b(n,c),Je()}var zL=T('<div class="alert alert-success"><div class="content txt-bold"><span class="txt token-holder svelte-1i56uix"> </span> <!></div></div> <!>',1),jL=T('<label>Token duration (in seconds)</label> <input type="number" min="0" step="1"/>',1),VL=T('<form><div class="content"><p>Generate a nonrenewable auth token for <strong> </strong></p></div> <!></form>'),UL=T('<div class="clearfix"></div> <!>',1),BL=T("<h4>Impersonate auth token</h4>"),HL=T('<button type="button" class="btn btn-secondary btn-expanded"><span class="txt">Generate a new one</span></button>'),WL=T('<button type="submit"><span class="txt">Generate token</span></button>'),YL=T('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button> <!>',1);function KL(n,e){Ke(e,!1);const t=M(),i=Ut(),a="impersonate_"+q.randomString(5);let s=re(e,"collection",8),o=re(e,"record",8),l=M(),c=M(0),u=M(!1),d=M();function f(){var m;o()&&(v(),(m=r(l))==null||m.show())}function h(){var m;(m=r(l))==null||m.hide(),v()}async function p(){if(!(r(u)||!s()||!o())){x(u,!0);try{x(d,await ze.collection(s().name).impersonate(o().id,r(c))),i("submit",r(d))}catch(m){ze.error(m)}x(u,!1)}}function v(){x(c,0),x(d,void 0)}se(()=>r(d),()=>{var m;x(t,q.getApiExampleUrl((m=r(d))==null?void 0:m.baseURL))}),ht(),Ge();{let m=ae(()=>!r(u));gt(_n(n,{overlayClose:!1,get escClose(){return r(m)},beforeHide:()=>!r(u),popup:!0,$$events:{show(g){ct.call(this,e,g)},hide(g){ct.call(this,e,g)}},children:(g,k)=>{var _=UL(),E=y(j(_),2);{var D=C=>{var w=zL(),$=j(w),O=I($),P=I(O),L=I(P),N=y(P,2);fr(N,{get value(){return r(d),A(()=>r(d).authStore.token)}});var V=y($,2);{let R=ae(()=>`
                import PocketBase from 'pocketbase';

                const token = "...";

                const pb = new PocketBase('${r(t)}');

                pb.authStore.save(token, null);
            `),U=ae(()=>`
                import 'package:pocketbase/pocketbase.dart';

                final token = "...";

                final pb = PocketBase('${r(t)}');

                pb.authStore.save(token, null);
            `);qL(V,{class:"m-b-0",get js(){return r(R)},get dart(){return r(U)}})}B(()=>Ee(L,(r(d),A(()=>r(d).authStore.token)))),b(C,w)},S=C=>{var w=VL(),$=I(w),O=I($),P=y(I(O)),L=I(P),N=y($,2);Ne(N,{class:"form-field m-b-xs m-t-sm",name:"duration",children:Ae,$$slots:{default:(V,R)=>{const U=ae(()=>R.uniqueId);var H=jL(),z=j(H),J=y(z,2);B(()=>{Y(z,"for",r(U)),Y(J,"id",r(U)),Y(J,"placeholder",`Default to the collection setting (${F(s()),A(()=>{var W,te;return((te=(W=s())==null?void 0:W.authToken)==null?void 0:te.duration)||0})??""}s)`),Un(J,r(c)||"")}),ce("input",J,W=>x(c,W.target.value<<0)),b(V,H)}}}),B(V=>{Y(w,"id",a),Ee(L,`${V??""}:`)},[()=>(F(q),F(o()),A(()=>q.displayValue(o())))]),ce("submit",w,Et(p)),b(C,w)};X(E,C=>{r(d),A(()=>{var w,$;return($=(w=r(d))==null?void 0:w.authStore)==null?void 0:$.token})?C(D):C(S,!1)})}b(g,_)},$$slots:{default:!0,header:(g,k)=>{var _=BL();b(g,_)},footer:(g,k)=>{var _=YL(),E=j(_),D=y(E,2);{var S=w=>{var $=HL();B(()=>$.disabled=r(u)),ce("click",$,()=>v()),b(w,$)},C=w=>{var $=WL();let O;B(P=>{Y($,"form",a),O=Ue($,1,"btn btn-expanded",null,O,P),$.disabled=r(u)},[()=>({"btn-loading":r(u)})]),ce("click",$,()=>p()),b(w,$)};X(D,w=>{r(d),A(()=>{var $,O;return(O=($=r(d))==null?void 0:$.authStore)==null?void 0:O.token})?w(S):w(C,!1)})}B(()=>E.disabled=r(u)),ce("click",E,h),b(g,_)}},$$legacy:!0}),g=>x(l,g),()=>r(l))}return xt(e,"show",f),xt(e,"hide",h),Je({show:f,hide:h})}var JL=T('<div class="block"><div class="alert alert-info m-0"><div class="icon"><i class="ri-information-line"></i></div> <div class="flex flex-gap-xs">The record has previous unsaved changes. <button type="button" class="btn btn-sm btn-secondary">Restore draft</button></div> <button type="button" class="close" aria-label="Discard draft"><i class="ri-close-line"></i></button></div> <div class="clearfix p-b-base"></div></div>'),ZL=T('<div class="form-field-addon"><!></div>'),GL=T('<label><i></i> <span class="txt">id</span> <span class="flex-fill"></span></label> <!> <input type="text"/>',1),XL=T("<hr/>"),QL=T("<!> <!>",1),eN=T("<div><!></div>"),tN=T('<div class="tabs-content no-animations"><form><!> <!> <!> <!></form> <!></div>'),nN=T('<span class="loader loader-sm"></span> <h4 class="panel-title txt-hint svelte-qc5ngu">Loading...</h4>',1),iN=T('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-mail-check-line" aria-hidden="true"></i> <span class="txt">Send verification email</span></button>'),rN=T('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-mail-lock-line" aria-hidden="true"></i> <span class="txt">Send password reset email</span></button>'),aN=T('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-id-card-line" aria-hidden="true"></i> <span class="txt">Impersonate</span></button>'),sN=T('<!> <!> <!> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-braces-line" aria-hidden="true"></i> <span class="txt">Copy raw JSON</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-file-copy-line" aria-hidden="true"></i> <span class="txt">Duplicate</span></button> <hr/> <button type="button" class="dropdown-item txt-danger closable" role="menuitem"><i class="ri-delete-bin-7-line" aria-hidden="true"></i> <span class="txt">Delete</span></button>',1),oN=T('<div class="flex-fill"></div> <div tabindex="0" role="button" aria-label="More record options" class="btn btn-sm btn-circle btn-transparent flex-gap-0"><i class="ri-more-line" aria-hidden="true"></i> <!></div>',1),lN=T('<h4 class="panel-title svelte-qc5ngu"> <strong> </strong> record</h4> <!>',1),cN=T('<div class="tabs-header stretched"><button type="button">Account</button> <button type="button">Authorized providers</button></div>'),uN=T("<!> <!>",1),dN=T('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Save and continue</span></button>'),fN=T('<button type="button" class="btn p-l-5 p-r-5 flex-gap-0"><i class="ri-arrow-down-s-line" aria-hidden="true"></i> <!></button>'),hN=T('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <div class="btns-group no-gap"><button type="submit" title="Save and close"><span class="txt"> </span></button> <!></div>',1),vN=T("<!> <!>",1);function pf(n,e){Ke(e,!1);const t=M(),i=M(),a=M(),s=M(),o=M(),l=M(),c=M(),u=M(),d=Ut(),f="record_"+q.randomString(5),h="form",p="providers";let v=re(e,"collection",8),m=M(),g=M(),k=M({}),_=M({}),E=M(null),D=M(!1),S=M(!1),C=M({}),w=M({}),$=M(JSON.stringify(r(k))),O=M(r($)),P=M(h),L=M(!0),N=M(!0),V=M(v()),R=M([]);const U=["id"],H=U.concat("email","emailVisibility","verified","tokenKey","password");function z(we){var Re;return pe(we),x(S,!0),x(P,h),(Re=r(m))==null?void 0:Re.show()}function J(){var we;return(we=r(m))==null?void 0:we.hide()}function W(){x(S,!1),J()}function te(){var we;x(V,v()),(we=r(m))!=null&&we.isActive()&&(Oe(JSON.stringify(r(_))),W())}async function de(we){if(!we)return null;let Re=typeof we=="string"?we:we==null?void 0:we.id;if(Re)try{return await ze.collection(v().id).getOne(Re)}catch(Me){Me.isAbort||(W(),console.warn("resolveModel:",Me),br(`Unable to load record with id "${Re}"`))}return typeof we=="object"?we:null}async function pe(we){var Re,Me;x(N,!0),ln({}),x(C,{}),x(w,{}),x(k,typeof we=="string"?{id:we,collectionId:(Re=v())==null?void 0:Re.id,collectionName:(Me=v())==null?void 0:Me.name}:we||{}),x(_,structuredClone(r(k))),x(k,await de(we)||{}),x(_,structuredClone(r(k))),await Nn(),x(E,ve()),!r(E)||me(r(_),r(E))?x(E,null):(delete r(E).password,delete r(E).passwordConfirm),x($,JSON.stringify(r(_))),x(N,!1)}async function _e(we){var Me,Xe,Be;ln({}),x(k,we||{}),x(C,{}),x(w,{});const Re=((Be=(Xe=(Me=v())==null?void 0:Me.fields)==null?void 0:Xe.filter(Pe=>Pe.type!="file"))==null?void 0:Be.map(Pe=>Pe.name))||[];for(let Pe in we)Re.includes(Pe)||dt(_,r(_)[Pe]=we[Pe]);await Nn(),x($,JSON.stringify(r(_))),he()}function ke(){var we,Re;return"record_draft_"+(((we=v())==null?void 0:we.id)||"")+"_"+(((Re=r(k))==null?void 0:Re.id)||"")}function ve(we){try{const Re=window.localStorage.getItem(ke());if(Re)return JSON.parse(Re)}catch{}return we}function Oe(we){try{window.localStorage.setItem(ke(),we)}catch(Re){console.warn("updateDraft failure:",Re),window.localStorage.removeItem(ke())}}function ue(){r(E)&&(x(_,r(E)),x(E,null))}function me(we,Re){var He,Fe;const Me=structuredClone(we||{}),Xe=structuredClone(Re||{}),Be=(Fe=(He=v())==null?void 0:He.fields)==null?void 0:Fe.filter(De=>De.type==="file");for(let De of Be)delete Me[De.name],delete Xe[De.name];const Pe=["expand","password","passwordConfirm"];for(let De of Pe)delete Me[De],delete Xe[De];return JSON.stringify(Me)==JSON.stringify(Xe)}function he(){x(E,null),window.localStorage.removeItem(ke())}async function xe(we=!0){var Re,Me,Xe;if(!(r(D)||!r(c)||!((Re=v())!=null&&Re.id))){x(D,!0);try{const Be=be();let Pe;if(r(L)?Pe=await ze.collection(v().id).create(Be):Pe=await ze.collection(v().id).update(r(_).id,Be),bn(r(L)?"Successfully created record.":"Successfully updated record."),he(),r(i)&&((Me=r(_))==null?void 0:Me.id)==((Xe=ze.authStore.record)==null?void 0:Xe.id)&&Be.get("password"))return ze.logout();we?W():_e(Pe),d("save",{isNew:r(L),record:Pe})}catch(Be){ze.error(Be)}x(D,!1)}}function ie(){var we;(we=r(k))!=null&&we.id&&jn("Do you really want to delete the selected record?",()=>ze.collection(r(k).collectionId).delete(r(k).id).then(()=>{W(),bn("Successfully deleted record."),d("delete",r(k))}).catch(Re=>{ze.error(Re)}))}function be(){var Be;const we=structuredClone(r(_)||{}),Re=new FormData,Me={},Xe={};for(const Pe of((Be=v())==null?void 0:Be.fields)||[])Pe.type=="autodate"||r(t)&&Pe.type=="password"||(Me[Pe.name]=!0,Pe.type=="json"&&(Xe[Pe.name]=!0));r(t)&&we.password&&(Me.password=!0),r(t)&&we.passwordConfirm&&(Me.passwordConfirm=!0);for(const Pe in we)if(Me[Pe]){if(typeof we[Pe]>"u"&&(we[Pe]=null),Xe[Pe]&&we[Pe]!=="")try{JSON.parse(we[Pe])}catch(He){const Fe={};throw Fe[Pe]={code:"invalid_json",message:He.toString()},new vi({status:400,response:{data:Fe}})}q.addValueToFormData(Re,Pe,we[Pe])}for(const Pe in r(C)){const He=q.toArray(r(C)[Pe]);for(const Fe of He)Re.append(Pe+"+",Fe)}for(const Pe in r(w)){const He=q.toArray(r(w)[Pe]);for(const Fe of He)Re.append(Pe+"-",Fe)}return Re}function oe(){var we,Re;!((we=v())!=null&&we.id)||!((Re=r(k))!=null&&Re.email)||jn(`Do you really want to sent verification email to ${r(k).email}?`,()=>ze.collection(v().id).requestVerification(r(k).email).then(()=>{bn(`Successfully sent verification email to ${r(k).email}.`)}).catch(Me=>{ze.error(Me)}))}function Q(){var we,Re;!((we=v())!=null&&we.id)||!((Re=r(k))!=null&&Re.email)||jn(`Do you really want to sent password reset email to ${r(k).email}?`,()=>ze.collection(v().id).requestPasswordReset(r(k).email).then(()=>{bn(`Successfully sent password reset email to ${r(k).email}.`)}).catch(Me=>{ze.error(Me)}))}function ne(){r(l)?jn("You have unsaved changes. Do you really want to discard them?",()=>{ye()}):ye()}async function ye(){var Re;let we=r(k)?structuredClone(r(k)):null;if(we){const Me=["file","autodate"],Xe=((Re=v())==null?void 0:Re.fields)||[];for(const Be of Xe)Me.includes(Be.type)&&delete we[Be.name];we.id=""}he(),z(we),await Nn(),x($,"")}function Se(we){(we.ctrlKey||we.metaKey)&&we.code=="KeyS"&&(we.preventDefault(),we.stopPropagation(),xe(!1))}function Ie(){q.copyToClipboard(JSON.stringify(r(k),null,2)),bo("The record JSON was copied to your clipboard!",3e3)}se(()=>F(v()),()=>{var we;x(t,((we=v())==null?void 0:we.type)==="auth")}),se(()=>F(v()),()=>{var we;x(i,((we=v())==null?void 0:we.name)==="_superusers")}),se(()=>F(v()),()=>{var we,Re;x(a,!!((Re=(we=v())==null?void 0:we.fields)!=null&&Re.find(Me=>Me.type==="editor")))}),se(()=>F(v()),()=>{var we,Re;x(s,(Re=(we=v())==null?void 0:we.fields)==null?void 0:Re.find(Me=>Me.name==="id"))}),se(()=>(r(C),r(w)),()=>{x(o,q.hasNonEmptyProps(r(C))||q.hasNonEmptyProps(r(w)))}),se(()=>r(_),()=>{x(O,JSON.stringify(r(_)))}),se(()=>(r(o),r($),r(O)),()=>{x(l,r(o)||r($)!=r(O))}),se(()=>r(k),()=>{x(L,!r(k)||!r(k).id)}),se(()=>(r(N),r(L),r(l)),()=>{x(c,!r(N)&&(r(L)||r(l)))}),se(()=>(r(N),r(O)),()=>{r(N)||Oe(r(O))}),se(()=>(F(v()),r(V)),()=>{var we,Re;v()&&((we=r(V))==null?void 0:we.id)!=((Re=v())==null?void 0:Re.id)&&te()}),se(()=>r(t),()=>{x(u,r(t)?H:U)}),se(()=>(F(v()),r(u)),()=>{var we,Re;x(R,((Re=(we=v())==null?void 0:we.fields)==null?void 0:Re.filter(Me=>!r(u).includes(Me.name)&&Me.type!="autodate"))||[])}),ht(),Ge();var Le=vN(),je=j(Le);{let we=ae(()=>r(a)?"overlay-panel-xl":"overlay-panel-lg"),Re=ae(()=>r(t)&&!r(i)&&!r(L)?"colored-header":""),Me=ae(()=>!r(N)),Xe=ae(()=>!r(N)),Be=ae(()=>!r(N));gt(_n(je,{get class(){return`
        record-panel
        ${r(we)??""}
        ${r(Re)??""}
    `},get btnClose(){return r(Me)},get escClose(){return r(Xe)},get overlayClose(){return r(Be)},beforeHide:()=>r(l)&&r(S)?(jn("You have unsaved changes. Do you really want to close the panel?",()=>{W()}),!1):(ln({}),he(),!0),$$events:{hide(Pe){ct.call(this,e,Pe)},show(Pe){ct.call(this,e,Pe)}},children:(Pe,He)=>{var Fe=tN(),De=I(Fe);let Ve;var Ye=I(De);{var lt=at=>{var Ce=JL(),vt=I(Ce),K=y(I(vt),2),G=y(I(K)),fe=y(K,2);nt(fe,($e,et)=>le==null?void 0:le($e,et),()=>"Discard draft"),qt(()=>ce("click",fe,Et(()=>he()))),ce("click",G,()=>ue()),Ct(2,Ce,()=>yn,()=>({duration:150})),b(at,Ce)};X(Ye,at=>{!r(l)&&r(E)&&!r(N)&&at(lt)})}var We=y(Ye,2);{let at=ae(()=>r(L)?"":"readonly");Ne(We,{get class(){return`form-field ${r(at)??""}`},name:"id",children:Ae,$$slots:{default:(Ce,vt)=>{const K=ae(()=>vt.uniqueId);var G=GL(),fe=j(G),$e=I(fe),et=y(fe,2);{var ot=st=>{var St=ZL(),mt=I(St);LM(mt,{get record(){return r(_)}}),b(st,St)};X(et,st=>{r(L)||st(ot)})}var wt=y(et,2);B((st,St)=>{Y(fe,"for",r(K)),Ue($e,1,st,"svelte-qc5ngu"),Y(wt,"id",r(K)),Y(wt,"placeholder",St),Y(wt,"minlength",(r(s),A(()=>{var mt;return((mt=r(s))==null?void 0:mt.min)||null}))),Y(wt,"maxlength",(r(s),A(()=>{var mt;return((mt=r(s))==null?void 0:mt.max)||null}))),wt.readOnly=!r(L)},[()=>En((F(q),A(()=>q.getFieldTypeIcon("primary")))),()=>(r(N),F(q),r(s),A(()=>{var st;return!r(N)&&!q.isEmpty((st=r(s))==null?void 0:st.autogeneratePattern)?"Leave empty to auto generate...":""}))]),_t(wt,()=>r(_).id,st=>dt(_,r(_).id=st)),b(Ce,G)}}})}var tt=y(We,2);{var it=at=>{var Ce=QL(),vt=j(Ce);QM(vt,{get isNew(){return r(L)},get collection(){return v()},get record(){return r(_)},set record(fe){x(_,fe)},$$legacy:!0});var K=y(vt,2);{var G=fe=>{var $e=XL();b(fe,$e)};X(K,fe=>{r(R),A(()=>r(R).length)&&fe(G)})}b(at,Ce)};X(tt,at=>{r(t)&&at(it)})}var Qe=y(tt,2);bt(Qe,1,()=>r(R),at=>at.name,(at,Ce)=>{var vt=rt(),K=j(vt);{var G=$e=>{IL($e,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(et){dt(_,r(_)[r(Ce).name]=et)},$$legacy:!0})},fe=$e=>{var et=rt(),ot=j(et);{var wt=St=>{WA(St,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(mt){dt(_,r(_)[r(Ce).name]=mt)},$$legacy:!0})},st=St=>{var mt=rt(),Tt=j(mt);{var zt=Qt=>{aA(Qt,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(Dn){dt(_,r(_)[r(Ce).name]=Dn)},$$legacy:!0})},Sn=Qt=>{var Dn=rt(),Kn=j(Dn);{var mn=Rn=>{CA(Rn,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(Jn){dt(_,r(_)[r(Ce).name]=Jn)},$$legacy:!0})},un=Rn=>{var Jn=rt(),si=j(Jn);{var Ti=Zn=>{EL(Zn,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value($i){dt(_,r(_)[r(Ce).name]=$i)},$$legacy:!0})},zi=Zn=>{var $i=rt(),ha=j($i);{var Dc=Tn=>{$A(Tn,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(ji){dt(_,r(_)[r(Ce).name]=ji)},$$legacy:!0})},Ka=Tn=>{var ji=rt(),er=j(ji);{var Vi=Pn=>{lA(Pn,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(oi){dt(_,r(_)[r(Ce).name]=oi)},$$legacy:!0})},va=Pn=>{var oi=rt(),Yo=j(oi);{var Ko=In=>{kL(In,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(_r){dt(_,r(_)[r(Ce).name]=_r)},$$legacy:!0})},Ja=In=>{var _r=rt(),Ls=j(_r);{var Ns=tr=>{BA(tr,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(xr){dt(_,r(_)[r(Ce).name]=xr)},$$legacy:!0})},Rs=tr=>{var xr=rt(),nr=j(xr);{var Pc=ir=>{FA(ir,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(Ui){dt(_,r(_)[r(Ce).name]=Ui)},get uploadedFiles(){return r(C)[r(Ce).name]},set uploadedFiles(Ui){dt(C,r(C)[r(Ce).name]=Ui)},get deletedFileNames(){return r(w)[r(Ce).name]},set deletedFileNames(Ui){dt(w,r(w)[r(Ce).name]=Ui)},$$legacy:!0})},Jo=ir=>{var Ui=rt(),Mc=j(Ui);{var Ac=ee=>{_L(ee,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(ge){dt(_,r(_)[r(Ce).name]=ge)},$$legacy:!0})},Z=ee=>{var ge=rt(),qe=j(ge);{var ut=Pt=>{KA(Pt,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(on){dt(_,r(_)[r(Ce).name]=on)},$$legacy:!0})},kt=Pt=>{var on=rt(),$n=j(on);{var Mn=li=>{LL(li,{get field(){return r(Ce)},get original(){return r(k)},get record(){return r(_)},get value(){return r(_)[r(Ce).name]},set value(Mb){dt(_,r(_)[r(Ce).name]=Mb)},$$legacy:!0})};X($n,li=>{r(Ce),A(()=>r(Ce).type==="geoPoint")&&li(Mn)},!0)}b(Pt,on)};X(qe,Pt=>{r(Ce),A(()=>r(Ce).type==="password")?Pt(ut):Pt(kt,!1)},!0)}b(ee,ge)};X(Mc,ee=>{r(Ce),A(()=>r(Ce).type==="relation")?ee(Ac):ee(Z,!1)},!0)}b(ir,Ui)};X(nr,ir=>{r(Ce),A(()=>r(Ce).type==="file")?ir(Pc):ir(Jo,!1)},!0)}b(tr,xr)};X(Ls,tr=>{r(Ce),A(()=>r(Ce).type==="json")?tr(Ns):tr(Rs,!1)},!0)}b(In,_r)};X(Yo,In=>{r(Ce),A(()=>r(Ce).type==="select")?In(Ko):In(Ja,!1)},!0)}b(Pn,oi)};X(er,Pn=>{r(Ce),A(()=>r(Ce).type==="date")?Pn(Vi):Pn(va,!1)},!0)}b(Tn,ji)};X(ha,Tn=>{r(Ce),A(()=>r(Ce).type==="editor")?Tn(Dc):Tn(Ka,!1)},!0)}b(Zn,$i)};X(si,Zn=>{r(Ce),A(()=>r(Ce).type==="url")?Zn(Ti):Zn(zi,!1)},!0)}b(Rn,Jn)};X(Kn,Rn=>{r(Ce),A(()=>r(Ce).type==="email")?Rn(mn):Rn(un,!1)},!0)}b(Qt,Dn)};X(Tt,Qt=>{r(Ce),A(()=>r(Ce).type==="bool")?Qt(zt):Qt(Sn,!1)},!0)}b(St,mt)};X(ot,St=>{r(Ce),A(()=>r(Ce).type==="number")?St(wt):St(st,!1)},!0)}b($e,et)};X(K,$e=>{r(Ce),A(()=>r(Ce).type==="text")?$e(G):$e(fe,!1)})}b(at,vt)});var ft=y(De,2);{var pt=at=>{var Ce=eN();let vt;var K=I(Ce);zM(K,{get record(){return r(_)}}),B(G=>vt=Ue(Ce,1,"tab-item",null,vt,G),[()=>({active:r(P)===p})]),b(at,Ce)};X(ft,at=>{r(t)&&!r(i)&&!r(L)&&at(pt)})}B(at=>{Y(De,"id",f),Ve=Ue(De,1,"tab-item",null,Ve,at)},[()=>({"no-pointer-events":r(N),active:r(P)===h})]),ce("submit",De,Et(xe)),ce("keydown",De,Se),b(Pe,Fe)},$$slots:{default:!0,header:(Pe,He)=>{var Fe=uN(),De=j(Fe);{var Ve=tt=>{var it=nN();b(tt,it)},Ye=tt=>{var it=lN(),Qe=j(it),ft=I(Qe),pt=y(ft),at=I(pt),Ce=y(Qe,2);{var vt=K=>{var G=oN(),fe=y(j(G),2),$e=y(I(fe),2);ii($e,{class:"dropdown dropdown-right dropdown-nowrap",children:(et,ot)=>{var wt=sN(),st=j(wt);{var St=mn=>{var un=iN();ce("click",un,()=>oe()),b(mn,un)};X(st,mn=>{r(t),r(k),A(()=>r(t)&&!r(k).verified&&r(k).email)&&mn(St)})}var mt=y(st,2);{var Tt=mn=>{var un=rN();ce("click",un,()=>Q()),b(mn,un)};X(mt,mn=>{r(t),r(k),A(()=>r(t)&&r(k).email)&&mn(Tt)})}var zt=y(mt,2);{var Sn=mn=>{var un=aN();ce("click",un,()=>{var Rn;return(Rn=r(g))==null?void 0:Rn.show()}),b(mn,un)};X(zt,mn=>{r(t)&&mn(Sn)})}var Qt=y(zt,2),Dn=y(Qt,2),Kn=y(Dn,4);ce("click",Qt,()=>Ie()),ce("click",Dn,()=>ne()),ce("click",Kn,Et(gn(()=>ie()))),b(et,wt)},$$slots:{default:!0}}),b(K,G)};X(Ce,K=>{r(L)||K(vt)})}B(()=>{Ee(ft,`${r(L)?"New":"Edit"} `),Ee(at,(F(v()),A(()=>{var K;return(K=v())==null?void 0:K.name})))}),b(tt,it)};X(De,tt=>{r(N)?tt(Ve):tt(Ye,!1)})}var lt=y(De,2);{var We=tt=>{var it=cN(),Qe=I(it);let ft;var pt=y(Qe,2);let at;B((Ce,vt)=>{ft=Ue(Qe,1,"tab-item",null,ft,Ce),at=Ue(pt,1,"tab-item",null,at,vt)},[()=>({active:r(P)===h}),()=>({active:r(P)===p})]),ce("click",Qe,()=>x(P,h)),ce("click",pt,()=>x(P,p)),b(tt,it)};X(lt,tt=>{r(t)&&!r(i)&&!r(L)&&tt(We)})}b(Pe,Fe)},footer:(Pe,He)=>{var Fe=hN(),De=j(Fe),Ve=y(De,2),Ye=I(Ve);let lt;var We=I(Ye),tt=I(We),it=y(Ye,2);{var Qe=ft=>{var pt=fN(),at=y(I(pt),2);ii(at,{class:"dropdown dropdown-upside dropdown-right dropdown-nowrap m-b-5",children:(Ce,vt)=>{var K=dN();ce("click",K,()=>xe(!1)),b(Ce,K)},$$slots:{default:!0}}),B(()=>pt.disabled=!r(c)||r(D)),b(ft,pt)};X(it,ft=>{r(L)||ft(Qe)})}B(ft=>{De.disabled=r(D)||r(N),Y(Ye,"form",f),lt=Ue(Ye,1,"btn",null,lt,ft),Ye.disabled=!r(c)||r(D),Ee(tt,r(L)?"Create":"Save changes")},[()=>({"btn-expanded":r(L),"btn-expanded-sm":!r(L),"btn-loading":r(D)||r(N)})]),ce("click",De,()=>J()),b(Pe,Fe)}},$$legacy:!0}),Pe=>x(m,Pe),()=>r(m))}var Te=y(je,2);{var Ze=we=>{gt(KL(we,{get record(){return r(_)},get collection(){return v()},$$legacy:!0}),Re=>x(g,Re),()=>r(g))};X(Te,we=>{r(t)&&we(Ze)})}return b(n,Le),xt(e,"show",z),xt(e,"hide",J),Je({show:z,hide:J})}var mN=T('<div><span class="txt">Total found:</span> <span class="txt"> </span></div>');function pN(n,e){Ke(e,!1);const t=Ut();let i=re(e,"collection",8),a=re(e,"filter",8,""),s=re(e,"totalCount",12,0),o=re(e,"class",8,void 0),l=M(!1);async function c(){var h;if((h=i())!=null&&h.id){x(l,!0),s(0);try{const p=q.getAllCollectionIdentifiers(i()),v=await ze.collection(i().id).getList(1,1,{filter:q.normalizeSearchFilter(a(),p),fields:"id",requestKey:"records_count"});s(v.totalItems),t("count",s()),x(l,!1)}catch(p){p!=null&&p.isAbort||(x(l,!1),console.warn(p))}}}se(()=>(F(i()),F(a())),()=>{var h;(h=i())!=null&&h.id&&a()!==-1&&c()}),ht(),Ge();var u=mN(),d=y(I(u),2),f=I(d);return B(()=>{Ue(u,1,`inline-flex flex-gap-5 records-counter ${o()??""}`),Ee(f,r(l)?"...":s())}),b(n,u),xt(e,"reload",c),Je({reload:c})}var gN=T('<span class="loader loader-sm"></span>'),bN=T('<div class="form-field"><input type="checkbox" id="checkbox_0"/> <label for="checkbox_0"></label></div>'),yN=T('<th class="bulk-select-col min-width"><!></th>'),_N=T("<i></i>"),xN=T("<i></i>"),wN=T('<div class="col-header-content"><!> <span class="txt"> </span></div>'),kN=T('<button type="button" aria-label="Toggle columns" class="btn btn-sm btn-transparent p-0"><i class="ri-more-line"></i></button>'),SN=T('<td class="bulk-select-col min-width"><div class="form-field"><input type="checkbox"/> <label></label></div></td>'),TN=T('<div class="relation-cell svelte-8gnvtl"><!></div>'),$N=T("<td><!></td>"),IN=T('<tr tabindex="0" class="row-handle"><!><!><td class="col-type-action min-width"><i class="ri-arrow-right-line"></i></td></tr>'),CN=T('<tr><td colspan="99" class="p-xs"><span class="skeleton-loader m-0"></span></td></tr>'),EN=T('<button type="button" class="btn btn-hint btn-expanded m-t-sm"><span class="txt">Clear filters</span></button>'),ON=T('<button type="button" class="btn btn-secondary btn-expanded m-t-sm"><i class="ri-add-line"></i> <span class="txt">New record</span></button>'),DN=T('<tr><td colspan="99" class="txt-center txt-hint p-xs"><h6>No records found.</h6> <!></td></tr>'),PN=T('<tr><td colspan="99" class="txt-center"><button><span class="txt">Load more</span></button></td></tr>'),MN=T('<table><thead><tr><!><!><th class="col-type-action min-width"><!></th></tr></thead><tbody><!><!></tbody></table>'),AN=T('<input type="checkbox"/> <label> </label>',1),LN=T('<div class="txt-hint txt-sm p-5 m-b-5">Toggle columns</div> <!>',1),NN=T('<div class="bulkbar"><div class="txt">Selected <strong> </strong> </div> <button type="button"><span class="txt">Reset</span></button> <div class="flex-fill"></div> <button type="button"><span class="txt">Delete selected</span></button></div>'),RN=T("<!> <!>",1);function FN(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(yo,"$isCollectionsLoading",t),s=()=>It(ai,"$collections",t),o=M(),l=M(),c=M(),u=M(),d=M(),f=M(),h=M(),p=M(),v=M(),m=Ut(),g=/^([\+\-])?(\w+)$/,k=40;let _=re(e,"collection",8),E=re(e,"sort",12,""),D=re(e,"filter",12,""),S=M(),C=M([]),w=M(1),$=M(0),O=M({}),P=M(!0),L=M(!1),N=0,V=M(),R=M([]),U=M([]),H=M("");const z=["verified","emailVisibility"];function J(){var ne;(ne=_())!=null&&ne.id&&(r(R).length?localStorage.setItem(r(H),JSON.stringify(r(R))):localStorage.removeItem(r(H)))}function W(){var ne;if(x(R,[]),!!((ne=_())!=null&&ne.id))try{const ye=localStorage.getItem(r(H));ye&&x(R,JSON.parse(ye)||[])}catch{}}function te(ne){return!!r(C).find(ye=>ye.id==ne)}async function de(){const ne=r(w);for(let ye=1;ye<=ne;ye++)(ye===1||r(h))&&await pe(ye,!1)}async function pe(ne=1,ye=!0){var we,Re,Me,Xe,Be;if(!((we=_())!=null&&we.id))return;x(P,!0);let Se=E();const Ie=Se.match(g),Le=Ie?r(d).find(Pe=>Pe.name===Ie[2]):null;if(Ie&&Le){const Pe=((Be=(Xe=(Me=(Re=s())==null?void 0:Re.find(Fe=>Fe.id==Le.collectionId))==null?void 0:Me.fields)==null?void 0:Xe.filter(Fe=>Fe.presentable))==null?void 0:Be.map(Fe=>Fe.name))||[],He=[];for(const Fe of Pe)He.push((Ie[1]||"")+Ie[2]+"."+Fe);He.length>0&&(Se=He.join(","))}const je=q.getAllCollectionIdentifiers(_()),Te=r(u).map(Pe=>Pe.name+":excerpt(200)").concat(r(d).map(Pe=>"expand."+Pe.name+".*:excerpt(200)"));Te.length&&Te.unshift("*");let Ze=[];for(const Pe of r(d)){const He=q.getExpandPresentableRelFields(Pe,s(),2);He!=null&&He.length&&(Ze=Ze.concat(He)),q.pushUnique(Ze,Pe.name)}return ze.collection(_().id).getList(ne,k,{sort:Se,skipTotal:1,filter:q.normalizeSearchFilter(D(),je),expand:Ze.join(","),fields:Te.join(","),requestKey:"records_list"}).then(async Pe=>{var He;if(ne<=1&&_e(),x(P,!1),x(w,Pe.page),x($,Pe.items.length),m("load",r(C).concat(Pe.items)),r(u).length)for(let Fe of Pe.items)Fe._partial=!0;if(ye){const Fe=++N;for(;(He=Pe.items)!=null&&He.length&&N==Fe;){const De=Pe.items.splice(0,20);for(let Ve of De)q.pushOrReplaceByKey(r(C),Ve);x(C,r(C)),await q.yieldToMain()}}else{for(let Fe of Pe.items)q.pushOrReplaceByKey(r(C),Fe);x(C,r(C))}}).catch(Pe=>{Pe!=null&&Pe.isAbort||(x(P,!1),console.warn(Pe),_e(),ze.error(Pe,!D()||(Pe==null?void 0:Pe.status)!=400))})}function _e(){var ne;(ne=r(S))==null||ne.resetVerticalScroll(),x(C,[]),x(w,1),x($,0),x(O,{})}function ke(){r(v)?ve():Oe()}function ve(){x(O,{})}function Oe(){for(const ne of r(C))dt(O,r(O)[ne.id]=ne);x(O,r(O))}function ue(ne){r(O)[ne.id]?delete r(O)[ne.id]:dt(O,r(O)[ne.id]=ne),x(O,r(O))}function me(){const ne=`Do you really want to delete the selected ${r(p)===1?"record":"records"}?`;jn(ne,he)}async function he(){var ye;if(r(L)||!r(p)||!((ye=_())!=null&&ye.id))return;let ne=[];for(const Se of Object.keys(r(O)))ne.push(ze.collection(_().id).delete(Se));return x(L,!0),Promise.all(ne).then(()=>{bn(`Successfully deleted the selected ${r(p)===1?"record":"records"}.`),m("delete",r(O)),ve()}).catch(Se=>{ze.error(Se)}).finally(()=>(x(L,!1),de()))}se(()=>F(_()),()=>{var ne;(ne=_())!=null&&ne.id&&(x(H,_().id+"@hiddenColumns"),W(),_e())}),se(()=>F(_()),()=>{var ne;x(o,((ne=_())==null?void 0:ne.type)==="view")}),se(()=>F(_()),()=>{var ne;x(l,((ne=_())==null?void 0:ne.type)==="auth"&&_().name==="_superusers")}),se(()=>(F(_()),r(l)),()=>{var ne;x(c,(((ne=_())==null?void 0:ne.fields)||[]).filter(ye=>!ye.hidden&&(!r(l)||!z.includes(ye.name))))}),se(()=>r(c),()=>{x(u,r(c).filter(ne=>ne.type==="editor"))}),se(()=>r(c),()=>{x(d,r(c).filter(ne=>ne.type==="relation"))}),se(()=>(r(c),r(R)),()=>{x(f,r(c).filter(ne=>!r(R).includes(ne.id)))}),se(()=>(a(),F(_()),F(E()),F(D())),()=>{var ne;!a()&&((ne=_())!=null&&ne.id)&&E()!==-1&&D()!==-1&&pe(1)}),se(()=>r($),()=>{x(h,r($)>=k)}),se(()=>r(O),()=>{x(p,Object.keys(r(O)).length)}),se(()=>(r(C),r(p)),()=>{x(v,r(C).length&&r(p)===r(C).length)}),se(()=>r(R),()=>{r(R)!==-1&&J()}),se(()=>r(c),()=>{x(U,r(c).filter(ne=>!ne.primaryKey).map(ne=>({id:ne.id,name:ne.name})))}),ht(),Ge();var xe=RN(),ie=j(xe);gt(Kd(ie,{class:"table-wrapper",children:(ne,ye)=>{var Se=MN();let Ie;var Le=I(Se),je=I(Le),Te=I(je);{var Ze=De=>{var Ve=yN(),Ye=I(Ve);{var lt=tt=>{var it=gN();b(tt,it)},We=tt=>{var it=bN(),Qe=I(it);B(()=>{Qe.disabled=(r(C),A(()=>!r(C).length)),ta(Qe,r(v))}),ce("change",Qe,()=>ke()),b(tt,it)};X(Ye,tt=>{r(P)?tt(lt):tt(We,!1)})}b(De,Ve)};X(Te,De=>{r(o)||De(Ze)})}var we=y(Te);bt(we,1,()=>r(f),De=>De.id,(De,Ve)=>{Pl(De,{get class(){return`col-type-${r(Ve),A(()=>r(Ve).type)??""} col-field-${r(Ve),A(()=>r(Ve).name)??""}`},get name(){return r(Ve),A(()=>r(Ve).name)},get sort(){return E()},set sort(Ye){E(Ye)},children:(Ye,lt)=>{var We=wN(),tt=I(We);{var it=at=>{var Ce=_N();B(vt=>Ue(Ce,1,vt,"svelte-8gnvtl"),[()=>En((F(q),A(()=>q.getFieldTypeIcon("primary"))))]),b(at,Ce)},Qe=at=>{var Ce=xN();B(vt=>Ue(Ce,1,vt,"svelte-8gnvtl"),[()=>En((F(q),r(Ve),A(()=>q.getFieldTypeIcon(r(Ve).type))))]),b(at,Ce)};X(tt,at=>{r(Ve),A(()=>r(Ve).primaryKey)?at(it):at(Qe,!1)})}var ft=y(tt,2),pt=I(ft);B(()=>Ee(pt,(r(Ve),A(()=>r(Ve).name)))),b(Ye,We)},$$slots:{default:!0},$$legacy:!0})});var Re=y(we),Me=I(Re);{var Xe=De=>{var Ve=kN();gt(Ve,Ye=>x(V,Ye),()=>r(V)),b(De,Ve)};X(Me,De=>{r(U),A(()=>r(U).length)&&De(Xe)})}var Be=y(Le),Pe=I(Be);bt(Pe,1,()=>r(C),De=>r(o)?De:De.id,(De,Ve)=>{var Ye=IN(),lt=I(Ye);{var We=it=>{var Qe=SN(),ft=I(Qe),pt=I(ft),at=y(pt,2);B(()=>{Y(pt,"id",`checkbox_${r(Ve),A(()=>r(Ve).id)??""}`),ta(pt,(r(O),r(Ve),A(()=>r(O)[r(Ve).id]))),Y(at,"for",`checkbox_${r(Ve),A(()=>r(Ve).id)??""}`)}),ce("change",pt,()=>ue(r(Ve))),ce("click",ft,gn(function(Ce){ct.call(this,e,Ce)})),b(it,Qe)};X(lt,it=>{r(o)||it(We)})}var tt=y(lt);bt(tt,1,()=>r(f),it=>it.id,(it,Qe)=>{var ft=$N(),pt=I(ft);{var at=vt=>{var K=TN(),G=I(K);gd(G,{get record(){return r(Ve)},get field(){return r(Qe)}}),b(vt,K)},Ce=vt=>{gd(vt,{short:!0,get record(){return r(Ve)},get field(){return r(Qe)}})};X(pt,vt=>{r(Qe),A(()=>r(Qe).type==="relation")?vt(at):vt(Ce,!1)})}B(()=>Ue(ft,1,`col-type-${r(Qe),A(()=>r(Qe).type)??""} col-field-${r(Qe),A(()=>r(Qe).name)??""}`,"svelte-8gnvtl")),b(it,ft)}),ce("click",Ye,()=>m("select",r(Ve))),ce("keydown",Ye,it=>{it.code==="Enter"&&(it.preventDefault(),m("select",r(Ve)))}),b(De,Ye)},De=>{var Ve=rt(),Ye=j(Ve);{var lt=tt=>{var it=CN();b(tt,it)},We=tt=>{var it=DN(),Qe=I(it),ft=y(I(Qe),2);{var pt=Ce=>{var vt=EN();ce("click",vt,()=>D("")),b(Ce,vt)},at=Ce=>{var vt=rt(),K=j(vt);{var G=fe=>{var $e=ON();ce("click",$e,()=>m("new")),b(fe,$e)};X(K,fe=>{r(o)||fe(G)},!0)}b(Ce,vt)};X(ft,Ce=>{F(D()),A(()=>{var vt;return(vt=D())==null?void 0:vt.length})?Ce(pt):Ce(at,!1)})}b(tt,it)};X(Ye,tt=>{r(P)?tt(lt):tt(We,!1)})}b(De,Ve)});var He=y(Pe);{var Fe=De=>{var Ve=PN(),Ye=I(Ve),lt=I(Ye);let We;B(tt=>{We=Ue(lt,1,"btn btn-expanded-lg btn-secondary btn-horizontal-sticky",null,We,tt),lt.disabled=r(P)},[()=>({"btn-loading":r(P)})]),ce("click",lt,Et(()=>pe(r(w)+1))),b(De,Ve)};X(He,De=>{r(C),r(h),A(()=>r(C).length&&r(h))&&De(Fe)})}B(De=>Ie=Ue(Se,1,"table",null,Ie,De),[()=>({"table-loading":r(P)})]),b(ne,Se)},$$slots:{default:!0,before:(ne,ye)=>{var Se=rt(),Ie=j(Se);{var Le=je=>{ii(je,{class:"dropdown dropdown-right dropdown-nowrap columns-dropdown",get trigger(){return r(V)},children:(Te,Ze)=>{var we=LN(),Re=y(j(we),2);bt(Re,1,()=>r(U),Me=>Me.id+Me.name,(Me,Xe)=>{Ne(Me,{class:"form-field form-field-sm form-field-toggle m-0 p-5",children:Ae,$$slots:{default:(Be,Pe)=>{const He=ae(()=>Pe.uniqueId);var Fe=AN(),De=j(Fe),Ve=y(De,2),Ye=I(Ve);B(lt=>{Y(De,"id",r(He)),ta(De,lt),Y(Ve,"for",r(He)),Ee(Ye,(r(Xe),A(()=>r(Xe).name)))},[()=>(r(R),r(Xe),A(()=>!r(R).includes(r(Xe).id)))]),ce("change",De,lt=>{lt.target.checked?q.removeByValue(r(R),r(Xe).id):q.pushUnique(r(R),r(Xe).id),x(R,r(R))}),b(Be,Fe)}}})}),b(Te,we)},$$slots:{default:!0}})};X(Ie,je=>{r(V)&&je(Le)})}b(ne,Se)}},$$legacy:!0}),ne=>x(S,ne),()=>r(S));var be=y(ie,2);{var oe=ne=>{var ye=NN(),Se=I(ye),Ie=y(I(Se)),Le=I(Ie),je=y(Ie),Te=y(Se,2);let Ze;var we=y(Te,4);let Re;B((Me,Xe)=>{Ee(Le,r(p)),Ee(je,` ${r(p)===1?"record":"records"}`),Ze=Ue(Te,1,"btn btn-xs btn-transparent btn-outline p-l-5 p-r-5",null,Ze,Me),Re=Ue(we,1,"btn btn-sm btn-transparent btn-danger",null,Re,Xe)},[()=>({"btn-disabled":r(L)}),()=>({"btn-loading":r(L),"btn-disabled":r(L)})]),ce("click",Te,()=>ve()),ce("click",we,()=>me()),Ct(3,ye,()=>sa,()=>({duration:150,y:5})),b(ne,ye)};X(be,ne=>{r(p)&&ne(oe)})}b(n,xe),xt(e,"hasRecord",te),xt(e,"reloadLoadedPages",de),xt(e,"load",pe);var Q=Je({hasRecord:te,reloadLoadedPages:de,load:pe});return i(),Q}var qN=T('<div class="placeholder-section m-b-base"><span class="loader loader-lg"></span> <h1>Loading collections...</h1></div>'),zN=T(`<h1 class="m-b-10">You don't have any collections yet.</h1>`),jN=T('<h1 class="m-b-10">Create your first collection to add records!</h1> <button type="button" class="btn btn-expanded-lg btn-lg"><i class="ri-add-line"></i> <span class="txt">Create new collection</span></button>',1),VN=T('<div class="placeholder-section m-b-base"><div class="icon"><i class="ri-database-2-line"></i></div> <!></div>'),UN=T('<button type="button" aria-label="Edit collection" class="btn btn-transparent btn-circle"><i class="ri-settings-4-line"></i></button>'),BN=T('<button type="button" class="btn btn-expanded"><i class="ri-add-line"></i> <span class="txt">New record</span></button>'),HN=T('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Collections</div> <div class="breadcrumb-item"> </div></nav> <div class="inline-flex gap-5"><!> <!></div> <div class="btns-group"><button type="button" class="btn btn-outline"><i class="ri-code-s-slash-line"></i> <span class="txt">API Preview</span></button> <!></div></header> <!> <div class="clearfix m-b-sm"></div> <!>',1),WN=T("<!> <!>",1),YN=T("<!> <!> <!> <!> <!>",1);function KN(n,e){var J;Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yd,"$querystring",t),s=()=>It(Qi,"$activeCollection",t),o=()=>It(yo,"$isCollectionsLoading",t),l=()=>It(ai,"$collections",t),c=()=>It(Vo,"$hideControls",t),u=M(),d=M(),f=new URLSearchParams(a());let h=M(),p=M(),v=M(),m=M(),g=M(),k=M(),_=M(f.get("filter")||""),E=M(f.get("sort")||"-@rowid"),D=M(f.get("collection")||((J=s())==null?void 0:J.id)),S=M(0);Hd(r(D));async function C(W){var te,de;await Nn(),((te=s())==null?void 0:te.type)==="view"?r(m).show(W):(de=r(v))==null||de.show(W)}function w(){var W,te,de;x(D,(W=s())==null?void 0:W.id),x(_,""),x(E,"-@rowid"),$(),O({recordId:null}),(te=r(h))==null||te.forceHide(),(de=r(p))==null||de.hide()}async function $(){var de;if(!r(E))return;const W=q.getAllCollectionIdentifiers(s()),te=r(E).split(",").map(pe=>pe.startsWith("+")||pe.startsWith("-")?pe.substring(1):pe);te.filter(pe=>W.includes(pe)).length!=te.length&&(((de=s())==null?void 0:de.type)!="view"?x(E,"-@rowid"):W.includes("created")?x(E,"-created"):x(E,""))}function O(W={}){var de;const te=Object.assign({collection:((de=s())==null?void 0:de.id)||"",filter:r(_),sort:r(E)},W);q.replaceHashQueryParams(te)}se(()=>a(),()=>{x(u,new URLSearchParams(a()))}),se(()=>r(u),()=>{x(d,r(u).get("collection"))}),se(()=>(o(),r(d),r(D),s(),_h),()=>{var W,te;!o()&&r(d)&&r(d)!=r(D)&&r(d)!=((W=s())==null?void 0:W.id)&&r(d)!=((te=s())==null?void 0:te.name)&&_h(r(d))}),se(()=>(s(),r(D)),()=>{var W;(W=s())!=null&&W.id&&r(D)!=s().id&&r(D)!=s().name&&w()}),se(()=>s(),()=>{var W;(W=s())!=null&&W.id&&$()}),se(()=>o(),()=>{!o()&&f.get("recordId")&&C(f.get("recordId"))}),se(()=>(o(),r(E),r(_),s()),()=>{var W;!o()&&(r(E)||r(_)||(W=s())!=null&&W.id)&&O()}),se(()=>s(),()=>{var W;ni(On,((W=s())==null?void 0:W.name)||"Collections")}),ht(),Ge();var P=YN(),L=j(P);{var N=W=>{Li(W,{center:!0,children:(te,de)=>{var pe=qN();b(te,pe)},$$slots:{default:!0}})},V=W=>{var te=rt(),de=j(te);{var pe=ke=>{Li(ke,{center:!0,children:(ve,Oe)=>{var ue=VN(),me=y(I(ue),2);{var he=ie=>{var be=zN();b(ie,be)},xe=ie=>{var be=jN(),oe=y(j(be),2);ce("click",oe,()=>{var Q;return(Q=r(h))==null?void 0:Q.show()}),b(ie,be)};X(me,ie=>{c()?ie(he):ie(xe,!1)})}b(ve,ue)},$$slots:{default:!0}})},_e=ke=>{var ve=WN(),Oe=j(ve);WP(Oe,{});var ue=y(Oe,2);Li(ue,{class:"flex-content",children:(me,he)=>{var xe=HN(),ie=j(xe),be=I(ie),oe=y(I(be),2),Q=I(oe),ne=y(be,2),ye=I(ne);{var Se=Me=>{var Xe=UN();nt(Xe,(Be,Pe)=>le==null?void 0:le(Be,Pe),()=>({text:"Edit collection",position:"right"})),qt(()=>ce("click",Xe,()=>{var Be;return(Be=r(h))==null?void 0:Be.show(s())})),b(Me,Xe)};X(ye,Me=>{c()||Me(Se)})}var Ie=y(ye,2);$c(Ie,{$$events:{refresh:()=>{var Me,Xe;(Me=r(g))==null||Me.load(),(Xe=r(k))==null||Xe.reload()}}});var Le=y(ne,2),je=I(Le),Te=y(je,2);{var Ze=Me=>{var Xe=BN();ce("click",Xe,()=>{var Be;return(Be=r(v))==null?void 0:Be.show()}),b(Me,Xe)};X(Te,Me=>{s(),A(()=>s().type!=="view")&&Me(Ze)})}var we=y(ie,2);Tc(we,{get value(){return r(_)},get autocompleteCollection(){return s()},$$events:{submit:Me=>x(_,Me.detail)}});var Re=y(we,4);gt(FN(Re,{get collection(){return s()},get filter(){return r(_)},set filter(Me){x(_,Me)},get sort(){return r(E)},set sort(Me){x(E,Me)},$$events:{select:Me=>{var Be,Pe;O({recordId:Me.detail.id});let Xe=Me.detail._partial?Me.detail.id:Me.detail;s().type==="view"?(Be=r(m))==null||Be.show(Xe):(Pe=r(v))==null||Pe.show(Xe)},delete:()=>{var Me;(Me=r(k))==null||Me.reload()},new:()=>{var Me;return(Me=r(v))==null?void 0:Me.show()}},$$legacy:!0}),Me=>x(g,Me),()=>r(g)),B(()=>Ee(Q,(s(),A(()=>s().name)))),ce("click",je,()=>{var Me;return(Me=r(p))==null?void 0:Me.show(s())}),b(me,xe)},$$slots:{default:!0,footer:(me,he)=>{gt(pN(me,{class:"m-r-auto txt-sm txt-hint",get collection(){return s()},get filter(){return r(_)},get totalCount(){return r(S)},set totalCount(xe){x(S,xe)},$$legacy:!0}),xe=>x(k,xe),()=>r(k))}}}),b(ke,ve)};X(de,ke=>{l(),A(()=>!l().length)?ke(pe):ke(_e,!1)},!0)}b(W,te)};X(L,W=>{o(),l(),A(()=>o()&&!l().length)?W(N):W(V,!1)})}var R=y(L,2);gt(vf(R,{$$events:{truncate:()=>{var W,te;(W=r(g))==null||W.load(),(te=r(k))==null||te.reload()}},$$legacy:!0}),W=>x(h,W),()=>r(h));var U=y(R,2);gt(q$(U,{$$legacy:!0}),W=>x(p,W),()=>r(p));var H=y(U,2);gt(pf(H,{get collection(){return s()},$$events:{hide:()=>{O({recordId:null})},save:W=>{var te,de;r(_)?(te=r(k))==null||te.reload():W.detail.isNew&&Cr(S),(de=r(g))==null||de.reloadLoadedPages()},delete:W=>{var te,de;(!r(_)||(te=r(g))!=null&&te.hasRecord(W.detail.id))&&Cr(S,-1),(de=r(g))==null||de.reloadLoadedPages()}},$$legacy:!0}),W=>x(v,W),()=>r(v));var z=y(H,2);gt(MM(z,{get collection(){return s()},$$events:{hide:()=>{O({recordId:null})}},$$legacy:!0}),W=>x(m,W),()=>r(m)),b(n,P),Je(),i()}var JN=T('<div class="sidebar-title"><span class="txt">Sync</span></div> <a href="/settings/export-collections" class="sidebar-list-item"><i class="ri-uninstall-line" aria-hidden="true"></i> <span class="txt">Export collections</span></a> <a href="/settings/import-collections" class="sidebar-list-item"><i class="ri-install-line" aria-hidden="true"></i> <span class="txt">Import collections</span></a>',1),ZN=T('<div class="sidebar-content"><div class="sidebar-title">System</div> <a href="/settings" class="sidebar-list-item"><i class="ri-home-gear-line" aria-hidden="true"></i> <span class="txt">Application</span></a> <a href="/settings/mail" class="sidebar-list-item"><i class="ri-send-plane-2-line" aria-hidden="true"></i> <span class="txt">Mail settings</span></a> <a href="/settings/storage" class="sidebar-list-item"><i class="ri-archive-drawer-line" aria-hidden="true"></i> <span class="txt">Files storage</span></a> <a href="/settings/backups" class="sidebar-list-item"><i class="ri-archive-line" aria-hidden="true"></i> <span class="txt">Backups</span></a> <a href="/settings/crons" class="sidebar-list-item"><i class="ri-time-line" aria-hidden="true"></i> <span class="txt">Crons</span></a> <!></div>');function Ya(n){const[e,t]=Rt(),i=()=>It(Vo,"$hideControls",e);Eb(n,{class:"settings-sidebar",children:(a,s)=>{var o=ZN(),l=y(I(o),2);nt(l,(v,m)=>Gt==null?void 0:Gt(v,m),()=>({path:"/settings"})),nt(l,v=>Lt==null?void 0:Lt(v));var c=y(l,2);nt(c,(v,m)=>Gt==null?void 0:Gt(v,m),()=>({path:"/settings/mail/?.*"})),nt(c,v=>Lt==null?void 0:Lt(v));var u=y(c,2);nt(u,(v,m)=>Gt==null?void 0:Gt(v,m),()=>({path:"/settings/storage/?.*"})),nt(u,v=>Lt==null?void 0:Lt(v));var d=y(u,2);nt(d,(v,m)=>Gt==null?void 0:Gt(v,m),()=>({path:"/settings/backups/?.*"})),nt(d,v=>Lt==null?void 0:Lt(v));var f=y(d,2);nt(f,(v,m)=>Gt==null?void 0:Gt(v,m),()=>({path:"/settings/crons/?.*"})),nt(f,v=>Lt==null?void 0:Lt(v));var h=y(f,2);{var p=v=>{var m=JN(),g=y(j(m),2);nt(g,(_,E)=>Gt==null?void 0:Gt(_,E),()=>({path:"/settings/export-collections/?.*"})),nt(g,_=>Lt==null?void 0:Lt(_));var k=y(g,2);nt(k,(_,E)=>Gt==null?void 0:Gt(_,E),()=>({path:"/settings/import-collections/?.*"})),nt(k,_=>Lt==null?void 0:Lt(_)),b(v,m)};X(h,v=>{i()||v(p)})}b(a,o)},$$slots:{default:!0}}),t()}var GN=T('<input type="checkbox"/> <label>Enable <small class="txt-hint">(experimental)</small></label>',1),XN=T('<label><span class="txt">Max requests in a batch</span> <i class="ri-information-line link-hint"></i></label> <input type="number" min="0" step="1"/>',1),QN=T('<label><span class="txt">Max processing time (in seconds)</span></label> <input type="number" min="0" step="1"/>',1),eR=T('<label>Max body size (in bytes)</label> <input type="number" min="0" step="1" placeholder="Default to 128MB"/>',1),tR=T('<!> <div class="grid"><div class="col-lg-4"><!></div> <div class="col-lg-4"><!></div> <div class="col-lg-4"><!></div></div>',1),nR=T('<span class="label label-success">Enabled</span>'),iR=T('<span class="label">Disabled</span>'),rR=T('<i class="ri-error-warning-fill txt-danger"></i>'),aR=T('<div class="inline-flex"><i class="ri-archive-stack-line"></i> <span class="txt">Batch API</span></div> <div class="flex-fill"></div> <!> <!>',1);function sR(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s=M(),o=M();let l=re(e,"formSettings",12);se(()=>a(),()=>{var c;x(s,!q.isEmpty((c=a())==null?void 0:c.batch))}),se(()=>F(l()),()=>{var c;x(o,!!((c=l().batch)!=null&&c.enabled))}),ht(),Ge(),Fr(n,{single:!0,children:(c,u)=>{var d=tR(),f=j(d);Ne(f,{class:"form-field form-field-toggle m-b-sm",name:"batch.enabled",children:Ae,$$slots:{default:(E,D)=>{const S=ae(()=>D.uniqueId);var C=GN(),w=j(C),$=y(w,2);B(()=>{Y(w,"id",r(S)),Y($,"for",r(S))}),rn(w,()=>l().batch.enabled,O=>l(l().batch.enabled=O,!0)),b(E,C)}}});var h=y(f,2),p=I(h),v=I(p);{let E=ae(()=>r(o)?"required":"");Ne(v,{get class(){return`form-field ${r(E)??""}`},name:"batch.maxRequests",children:Ae,$$slots:{default:(D,S)=>{const C=ae(()=>S.uniqueId);var w=XN(),$=j(w),O=y(I($),2);nt(O,(L,N)=>le==null?void 0:le(L,N),()=>({text:"Rate limiting (if enabled) also applies for the batch create/update/upsert/delete requests.",position:"right"}));var P=y($,2);B(()=>{Y($,"for",r(C)),Y(P,"id",r(C)),P.required=r(o)}),_t(P,()=>l().batch.maxRequests,L=>l(l().batch.maxRequests=L,!0)),b(D,w)}}})}var m=y(p,2),g=I(m);{let E=ae(()=>r(o)?"required":"");Ne(g,{get class(){return`form-field ${r(E)??""}`},name:"batch.timeout",children:Ae,$$slots:{default:(D,S)=>{const C=ae(()=>S.uniqueId);var w=QN(),$=j(w),O=y($,2);B(()=>{Y($,"for",r(C)),Y(O,"id",r(C)),O.required=r(o)}),_t(O,()=>l().batch.timeout,P=>l(l().batch.timeout=P,!0)),b(D,w)}}})}var k=y(m,2),_=I(k);Ne(_,{class:"form-field",name:"batch.maxBodySize",children:Ae,$$slots:{default:(E,D)=>{const S=ae(()=>D.uniqueId);var C=eR(),w=j(C),$=y(w,2);B(()=>{Y(w,"for",r(S)),Y($,"id",r(S)),Un($,(F(l()),A(()=>l().batch.maxBodySize||"")))}),ce("input",$,O=>l(l().batch.maxBodySize=O.target.value<<0,!0)),b(E,C)}}}),b(c,d)},$$slots:{default:!0,header:(c,u)=>{var d=aR(),f=y(j(d),4);{var h=g=>{var k=nR();b(g,k)},p=g=>{var k=iR();b(g,k)};X(f,g=>{r(o)?g(h):g(p,!1)})}var v=y(f,2);{var m=g=>{var k=rR();nt(k,(_,E)=>le==null?void 0:le(_,E),()=>({text:"Has errors",position:"left"})),Ct(3,k,()=>Bn,()=>({duration:150,start:.7})),b(g,k)};X(v,g=>{r(s)&&g(m)})}b(c,d)}}}),Je(),i()}var oR=T('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),lR=T('<label>Trusted IP proxy headers</label> <!> <div class="form-field-addon"><button type="button">Clear</button></div> <div class="help-block"><p>Comma separated list of headers such as: <!></p></div>',1),cR=T('<label><span class="txt">IP priority selection</span> <i class="ri-information-line link-hint"></i></label> <!>',1),uR=T(`<div class="alert alert-info m-b-sm"><div class="content"><div class="inline-flex flex-gap-5"><span>Resolved user IP:</span> <strong> </strong> <i class="ri-information-line txt-sm link-hint"></i></div> <br/> <div class="inline-flex flex-gap-5"><span>Detected proxy header:</span> <strong> </strong></div></div></div> <div class="content m-b-sm"><p>When PocketBase is deployed on platforms like Fly or it is accessible through proxies such as
            NGINX, requests from different users will originate from the same IP address (the IP of the proxy
            connecting to your PocketBase app).</p> <p>In this case to retrieve the actual user IP (used for rate limiting, logging, etc.) you need to
            properly configure your proxy and list below the trusted headers that PocketBase could use to
            extract the user IP.</p> <p class="txt-bold">When using such proxy, to avoid spoofing it is recommended to:</p> <ul class="m-t-0 txt-bold"><li>use headers that are controlled only by the proxy and cannot be manually set by the users</li> <li>make sure that the PocketBase server can be accessed only through the proxy</li></ul> <p>You can clear the headers field if PocketBase is not deployed behind a proxy.</p></div> <div class="grid grid-sm"><div class="col-lg-9"><!></div> <div class="col-lg-3"><!></div></div>`,1),dR=T('<i class="ri-alert-line txt-sm txt-warning"></i>'),fR=T('<i class="ri-alert-line txt-sm txt-hint"></i>'),hR=T('<span class="label label-success">Enabled</span>'),vR=T('<span class="label">Disabled</span>'),mR=T('<i class="ri-error-warning-fill txt-danger"></i>'),pR=T('<div class="inline-flex"><i class="ri-route-line"></i> <span class="txt">User IP proxy headers</span> <!></div> <div class="flex-fill"></div> <!> <!>',1);function gR(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s=M(),o=M(),l=M(),c=M(),u=M(),d=["X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP"];let f=re(e,"formSettings",12),h=re(e,"healthData",8),p=M("");function v(g){f(f().trustedProxy.headers=[g],!0)}const m=[{label:"Use leftmost IP",value:!0},{label:"Use rightmost IP",value:!1}];se(()=>F(f()),()=>{x(s,JSON.stringify(f()))}),se(()=>(r(p),r(s)),()=>{r(p)!=r(s)&&x(p,r(s))}),se(()=>(r(p),r(s)),()=>{x(o,r(p)!=r(s))}),se(()=>a(),()=>{var g;x(l,!q.isEmpty((g=a())==null?void 0:g.trustedProxy))}),se(()=>F(f()),()=>{x(c,!q.isEmpty(f().trustedProxy.headers))}),se(()=>F(h()),()=>{x(u,h().possibleProxyHeader?[h().possibleProxyHeader].concat(d.filter(g=>g!=h().possibleProxyHeader)):d)}),ht(),Ge(),Fr(n,{single:!0,children:(g,k)=>{var _=uR(),E=j(_),D=I(E),S=I(D),C=y(I(S),2),w=I(C),$=y(C,2);nt($,(z,J)=>le==null?void 0:le(z,J),()=>`Must show your actual IP.
If not, set the correct proxy header.`);var O=y(S,4),P=y(I(O),2),L=I(P),N=y(E,4),V=I(N),R=I(V);Ne(R,{class:"form-field m-b-0",name:"trustedProxy.headers",children:Ae,$$slots:{default:(z,J)=>{const W=ae(()=>J.uniqueId);var te=lR(),de=j(te),pe=y(de,2);$o(pe,{get id(){return r(W)},placeholder:"Leave empty to disable",get value(){return f().trustedProxy.headers},set value(he){f(f().trustedProxy.headers=he,!0)},$$legacy:!0});var _e=y(pe,2),ke=I(_e);let ve;var Oe=y(_e,2),ue=I(Oe),me=y(I(ue));bt(me,1,()=>r(u),Nt,(he,xe)=>{var ie=oR(),be=j(ie),oe=I(be);B(()=>Ee(oe,r(xe))),ce("click",be,()=>v(r(xe))),b(he,ie)}),B(he=>{Y(de,"for",r(W)),ve=Ue(ke,1,"btn btn-sm btn-hint btn-transparent btn-clear",null,ve,he)},[()=>({hidden:q.isEmpty(f().trustedProxy.headers)})]),ce("click",ke,()=>f(f().trustedProxy.headers=[],!0)),b(z,te)}}});var U=y(V,2),H=I(U);Ne(H,{class:"form-field m-0",name:"trustedProxy.useLeftmostIP",children:Ae,$$slots:{default:(z,J)=>{const W=ae(()=>J.uniqueId);var te=cR(),de=j(te),pe=y(I(de),2);nt(pe,(ke,ve)=>le==null?void 0:le(ke,ve),()=>({text:"This is in case the proxy returns more than 1 IP as header value. The rightmost IP is usually considered to be the more trustworthy but this could vary depending on the proxy.",position:"right"}));var _e=y(de,2);Vn(_e,{get items(){return m},get keyOfSelected(){return f().trustedProxy.useLeftmostIP},set keyOfSelected(ke){f(f().trustedProxy.useLeftmostIP=ke,!0)},$$legacy:!0}),B(()=>Y(de,"for",r(W))),b(z,te)}}}),B(()=>{Ee(w,(F(h()),A(()=>h().realIP||"N/A"))),Ee(L,(F(h()),A(()=>h().possibleProxyHeader||"N/A")))}),b(g,_)},$$slots:{default:!0,header:(g,k)=>{var _=pR(),E=j(_),D=y(I(E),4);{var S=N=>{var V=dR();nt(V,(R,U)=>le==null?void 0:le(R,U),()=>`Detected proxy header.
It is recommend to list it as trusted.`),b(N,V)},C=N=>{var V=rt(),R=j(V);{var U=H=>{var z=fR();nt(z,(J,W)=>le==null?void 0:le(J,W),()=>"The configured proxy header doesn't match with the detected one."),b(H,z)};X(R,H=>{r(c),r(o),F(f()),F(h()),A(()=>r(c)&&!r(o)&&!f().trustedProxy.headers.includes(h().possibleProxyHeader))&&H(U)},!0)}b(N,V)};X(D,N=>{r(c),F(h()),A(()=>!r(c)&&h().possibleProxyHeader)?N(S):N(C,!1)})}var w=y(E,4);{var $=N=>{var V=hR();b(N,V)},O=N=>{var V=vR();b(N,V)};X(w,N=>{r(c)?N($):N(O,!1)})}var P=y(w,2);{var L=N=>{var V=mR();nt(V,(R,U)=>le==null?void 0:le(R,U),()=>({text:"Has errors",position:"left"})),Ct(3,V,()=>Bn,()=>({duration:150,start:.7})),b(N,V)};X(P,N=>{r(l)&&N(L)})}b(g,_)}}}),Je(),i()}var bR=T("<option> </option>"),yR=T("<input/> <datalist></datalist>",1);function _R(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","options"]);Ke(e,!1);let a=re(e,"value",12,""),s=re(e,"options",24,()=>[]);const o="list_"+q.randomString(5);Ge();var l=yR(),c=j(l);_s(c,()=>({type:(F(i),A(()=>i.type||"text")),list:o,value:a(),...i}));var u=y(c,2);bt(u,5,s,Nt,(d,f)=>{var h=bR(),p=I(h),v={};B(()=>{Ee(p,(r(f),A(()=>r(f).label||""))),v!==(v=(r(f),A(()=>r(f).value)))&&(h.value=(h.__value=(r(f),A(()=>r(f).value)))??"")}),b(d,h)}),B(()=>Y(u,"id",o)),ce("input",c,d=>{a(d.target.value)}),b(n,l),Je()}var xR=T('<input type="checkbox"/> <label>Enable <small class="txt-hint">(experimental)</small></label>',1),wR=T('<input type="number" required placeholder="Max requests*" min="1" step="1"/>'),kR=T('<input type="number" required placeholder="Interval*" min="1" step="1"/>'),SR=T('<tr class="rate-limit-row"><td class="col-label"><!></td><td class="col-requests"><!></td><td class="col-duration"><!></td><td class="col-audience"><!></td><td class="col-action"><button type="button" title="Remove rule" aria-label="Remove rule" class="btn btn-xs btn-circle btn-hint btn-transparent"><i class="ri-close-line"></i></button></td></tr>'),TR=T('<table class="rate-limit-table"><thead><tr><th class="col-label">Rate limit label</th><th class="col-requests">Max requests<br/><small>(per IP)</small></th><th class="col-duration">Interval<br/><small>(in seconds)</small></th><th class="col-audience">Targeted users</th><th></th></tr></thead><tbody></tbody></table>'),$R=T('<!> <!> <div class="flex m-t-sm"><button type="button"><i class="ri-add-line"></i> <span class="txt">Add rate limit rule</span></button> <button type="button" class="txt-nowrap txt-sm link-hint"><em>Learn more about the rate limit rules</em></button></div>',1),IR=T('<i class="ri-error-warning-fill txt-danger"></i>'),CR=T('<span class="label label-success">Enabled</span>'),ER=T('<span class="label">Disabled</span>'),OR=T('<div class="inline-flex"><i class="ri-pulse-fill"></i> <span class="txt">Rate limiting</span></div> <div class="flex-fill"></div> <!> <!>',1),DR=T('<em class="txt-hint"> </em>'),PR=T('<li class="m-0"> <!></li>'),MR=T(`<p>The rate limit rules are resolved in the following order (stops on the first match):</p> <ol><li>exact tag (e.g. <code>users:create</code>)</li> <li>wildcard tag (e.g. <code>*:create</code>)</li> <li>METHOD + exact path (e.g. <code>POST /a/b</code>)</li> <li>METHOD + prefix path (e.g. <code>POST /a/b<strong>/</strong></code>)</li> <li>exact path (e.g. <code>/a/b</code>)</li> <li>prefix path (e.g. <code>/a/b<strong>/</strong></code>)</li></ol> <p>In case of multiple rules with the same label but different target user audience (e.g. "guest" vs
        "auth"), only the matching audience rule is taken in consideration.</p> <hr class="m-t-xs m-b-xs"/> <p>The rate limit label could be in one of the following formats:</p> <ul><li class="m-b-sm"><code>[METHOD ]/my/path</code> - full exact route match ( <strong>must be without trailing slash</strong>; "METHOD" is optional). <br/> For example: <ul class="m-0"><li class="m-0"><code>/hello</code> - matches <code>GET /hello</code>, <code>POST /hello</code>, etc.</li> <li class="m-0"><code>POST /hello</code> - matches only <code>POST /hello</code></li></ul></li> <li class="m-b-sm"><code>[METHOD ]/my/prefix<strong>/</strong></code> - path prefix ( <strong>must end with trailing slash;</strong> "METHOD" is optional). For example: <ul class="m-0"><li class="m-0"><code>/hello/</code> - matches <code>GET /hello</code>, <code>POST /hello/a/b/c</code>, etc.</li> <li class="m-0"><code>POST /hello/</code> - matches <code>POST /hello</code>, <code>POST /hello/a/b/c</code>, etc.</li></ul></li> <li><code>collectionName:predefinedTag</code> - targets a specific action of a single collection. To
            apply the rule for all collections you can use the <code>*</code> wildcard. For example: <code>posts:create</code>, <code>users:listAuthMethods</code>, <code>*:auth</code>. <br/> The predifined collection tags are (<em>there should be autocomplete once you start typing</em>): <ul></ul></li></ul>`,1),AR=T('<h4 class="center txt-break">Rate limit label format</h4>'),LR=T('<button type="button" class="btn btn-transparent">Close</button>'),NR=T("<!> <!>",1);function RR(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yn,"$errors",t),s=()=>It(ai,"$collections",t),o=M();let l=re(e,"formSettings",12);const c=[{value:"",label:"All"},{value:"@guest",label:"Guest only"},{value:"@auth",label:"Auth only"}],u=[{value:"*:list"},{value:"*:view"},{value:"*:create"},{value:"*:update"},{value:"*:delete"},{value:"*:file",description:"targets the files download endpoint"},{value:"*:listAuthMethods"},{value:"*:authRefresh"},{value:"*:auth",description:"targets all auth methods"},{value:"*:authWithPassword"},{value:"*:authWithOAuth2"},{value:"*:authWithOTP"},{value:"*:requestOTP"},{value:"*:requestPasswordReset"},{value:"*:confirmPasswordReset"},{value:"*:requestVerification"},{value:"*:confirmVerification"},{value:"*:requestEmailChange"},{value:"*:confirmEmailChange"}];let d=M(u),f=M();h();async function h(){await Hd(),x(d,[]);for(let _ of s())_.system||(r(d).push({value:_.name+":list"}),r(d).push({value:_.name+":view"}),_.type!="view"&&(r(d).push({value:_.name+":create"}),r(d).push({value:_.name+":update"}),r(d).push({value:_.name+":delete"})),_.type=="auth"&&(r(d).push({value:_.name+":listAuthMethods"}),r(d).push({value:_.name+":authRefresh"}),r(d).push({value:_.name+":auth"}),r(d).push({value:_.name+":authWithPassword"}),r(d).push({value:_.name+":authWithOAuth2"}),r(d).push({value:_.name+":authWithOTP"}),r(d).push({value:_.name+":requestOTP"}),r(d).push({value:_.name+":requestPasswordReset"}),r(d).push({value:_.name+":confirmPasswordReset"}),r(d).push({value:_.name+":requestVerification"}),r(d).push({value:_.name+":confirmVerification"}),r(d).push({value:_.name+":requestEmailChange"}),r(d).push({value:_.name+":confirmEmailChange"})),_.fields.find(E=>E.type=="file")&&r(d).push({value:_.name+":file"}));x(d,r(d).concat(u))}function p(){ln({}),Array.isArray(l().rateLimits.rules)||l(l().rateLimits.rules=[],!0),l().rateLimits.rules.push({label:"",maxRequests:300,duration:10,audience:""}),l(l().rateLimits.rules=l().rateLimits.rules,!0),l().rateLimits.rules.length==1&&l(l().rateLimits.enabled=!0,!0)}function v(_){ln({}),l().rateLimits.rules.splice(_,1),l(l().rateLimits.rules=l().rateLimits.rules,!0),l().rateLimits.rules.length||l(l().rateLimits.enabled=!1,!0)}se(()=>a(),()=>{var _;x(o,!q.isEmpty((_=a())==null?void 0:_.rateLimits))}),ht(),Ge();var m=NR(),g=j(m);Fr(g,{single:!0,children:(_,E)=>{var D=$R(),S=j(D);Ne(S,{class:"form-field form-field-toggle m-b-xs",name:"rateLimits.enabled",children:Ae,$$slots:{default:(N,V)=>{const R=ae(()=>V.uniqueId);var U=xR(),H=j(U),z=y(H,2);B(()=>{Y(H,"id",r(R)),Y(z,"for",r(R))}),rn(H,()=>l().rateLimits.enabled,J=>l(l().rateLimits.enabled=J,!0)),b(N,U)}}});var C=y(S,2);{var w=N=>{var V=TR(),R=y(I(V));bt(R,5,()=>(F(l()),A(()=>l().rateLimits.rules||[])),Nt,(U,H,z)=>{var J=SR(),W=I(J),te=I(W);Ne(te,{class:"form-field",name:"rateLimits.rules."+z+".label",inlineError:!0,children:(he,xe)=>{_R(he,{required:!0,placeholder:"tag (users:create) or path (/api/)",get options(){return r(d)},get value(){return r(H).label},set value(ie){r(H).label=ie,$a(()=>l())},$$legacy:!0})},$$slots:{default:!0}});var de=y(W),pe=I(de);Ne(pe,{class:"form-field",name:"rateLimits.rules."+z+".maxRequests",inlineError:!0,children:(he,xe)=>{var ie=wR();_t(ie,()=>r(H).maxRequests,be=>(r(H).maxRequests=be,$a(()=>l()))),b(he,ie)},$$slots:{default:!0}});var _e=y(de),ke=I(_e);Ne(ke,{class:"form-field",name:"rateLimits.rules."+z+".duration",inlineError:!0,children:(he,xe)=>{var ie=kR();_t(ie,()=>r(H).duration,be=>(r(H).duration=be,$a(()=>l()))),b(he,ie)},$$slots:{default:!0}});var ve=y(_e),Oe=I(ve);Ne(Oe,{class:"form-field",name:"rateLimits.rules."+z+".audience",inlineError:!0,children:(he,xe)=>{Vn(he,{get items(){return c},get keyOfSelected(){return r(H).audience},set keyOfSelected(ie){r(H).audience=ie,$a(()=>l())},$$events:{change:()=>{ri("rateLimits.rules."+z)}},$$legacy:!0})},$$slots:{default:!0}});var ue=y(ve),me=I(ue);ce("click",me,()=>v(z)),b(U,J)}),b(N,V)};X(C,N=>{F(q),F(l()),A(()=>!q.isEmpty(l().rateLimits.rules))&&N(w)})}var $=y(C,2),O=I($);let P;var L=y(O,2);B(N=>P=Ue(O,1,"btn btn-sm btn-secondary m-r-auto",null,P,N),[()=>{var N,V,R;return{"btn-danger":(R=(V=(N=a())==null?void 0:N.rateLimits)==null?void 0:V.rules)==null?void 0:R.message}}]),ce("click",O,()=>p()),ce("click",L,()=>{var N;return(N=r(f))==null?void 0:N.show()}),b(_,D)},$$slots:{default:!0,header:(_,E)=>{var D=OR(),S=y(j(D),4);{var C=P=>{var L=IR();nt(L,(N,V)=>le==null?void 0:le(N,V),()=>({text:"Has errors",position:"left"})),Ct(3,L,()=>Bn,()=>({duration:150,start:.7})),b(P,L)};X(S,P=>{r(o)&&P(C)})}var w=y(S,2);{var $=P=>{var L=CR();b(P,L)},O=P=>{var L=ER();b(P,L)};X(w,P=>{F(l()),A(()=>l().rateLimits.enabled)?P($):P(O,!1)})}b(_,D)}}});var k=y(g,2);gt(_n(k,{children:(_,E)=>{var D=MR(),S=y(j(D),10),C=y(I(S),4),w=y(I(C),14);bt(w,5,()=>u,Nt,($,O)=>{var P=PR(),L=I(P),N=y(L);{var V=R=>{var U=DR(),H=I(U);B(()=>Ee(H,`(${r(O),A(()=>r(O).description)??""})`)),b(R,U)};X(N,R=>{r(O),A(()=>r(O).description)&&R(V)})}B(R=>Ee(L,`${R??""} `),[()=>(r(O),A(()=>r(O).value.replace("*:",":")))]),b($,P)}),b(_,D)},$$slots:{default:!0,header:(_,E)=>{var D=AR();b(_,D)},footer:(_,E)=>{var D=LR();ce("click",D,()=>{var S;return(S=r(f))==null?void 0:S.hide()}),b(_,D)}},$$legacy:!0}),_=>x(f,_),()=>r(f)),b(n,m),Je(),i()}var FR=T('<div class="loader"></div>'),qR=T('<label>Application name</label> <input type="text" required/>',1),zR=T('<label>Application URL</label> <input type="text" required/>',1),jR=T('<input type="checkbox"/> <label><span class="txt">Hide collection create and edit controls</span> <i class="ri-information-line link-hint"></i></label>',1),VR=T('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Cancel</span></button>'),UR=T('<div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"><div class="accordions"><!> <!> <!></div></div> <div class="col-lg-12"><!></div></div> <div class="flex m-t-base"><div class="flex-fill"></div> <!> <button type="submit"><span class="txt">Save changes</span></button></div>',1),BR=T('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item">Application</div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><!></form></div>',1),HR=T("<!> <!>",1);function WR(n,e){Ke(e,!1);const[t,i]=Rt(),a=M();ni(On,"Application settings");let s=M({}),o=M({}),l=M(!1),c=M(!1),u=M(""),d=M({});h();async function f(){var D;try{x(d,((D=await ze.health.check()||{})==null?void 0:D.data)||{})}catch(S){console.warn("Health check failed:",S)}}async function h(){x(l,!0);try{const D=await ze.settings.getAll()||{};v(D),await f()}catch(D){ze.error(D)}x(l,!1)}async function p(){if(!(r(c)||!r(a))){x(c,!0),dt(o,r(o).rateLimits.rules=g(r(o).rateLimits.rules));try{const D=await ze.settings.update(q.filterRedactedProps(r(o)));v(D),await f(),ln({}),bn("Successfully saved application settings.")}catch(D){ze.error(D)}x(c,!1)}}function v(D={}){var S,C;ni(Ju,(S=D==null?void 0:D.meta)==null?void 0:S.appName),ni(Vo,!!((C=D==null?void 0:D.meta)!=null&&C.hideControls)),x(o,{meta:(D==null?void 0:D.meta)||{},batch:D.batch||{},trustedProxy:D.trustedProxy||{headers:[]},rateLimits:D.rateLimits||{rules:[]}}),g(r(o).rateLimits.rules),x(s,JSON.parse(JSON.stringify(r(o))))}function m(){x(o,JSON.parse(JSON.stringify(r(s)||{})))}function g(D){if(!D)return;let S=[{},{}];return D.sort((C,w)=>{S[0].length=C.label.length,S[0].isTag=C.label.includes(":")||!C.label.includes("/"),S[0].isWildcardTag=S[0].isTag&&C.label.startsWith("*"),S[0].isExactTag=S[0].isTag&&!S[0].isWildcardTag,S[0].isPrefix=!S[0].isTag&&C.label.endsWith("/"),S[0].hasMethod=!S[0].isTag&&C.label.includes(" /"),S[1].length=w.label.length,S[1].isTag=w.label.includes(":")||!w.label.includes("/"),S[1].isWildcardTag=S[1].isTag&&w.label.startsWith("*"),S[1].isExactTag=S[1].isTag&&!S[1].isWildcardTag,S[1].isPrefix=!S[1].isTag&&w.label.endsWith("/"),S[1].hasMethod=!S[1].isTag&&w.label.includes(" /");for(let $ of S)$.priority=0,$.isTag?($.priority+=1e3,$.isExactTag?$.priority+=10:$.priority+=5):($.hasMethod&&($.priority+=10),$.isPrefix||($.priority+=5));return S[0].isPrefix&&S[1].isPrefix&&(S[0].hasMethod&&S[1].hasMethod||!S[0].hasMethod&&!S[1].hasMethod)&&(S[0].length>S[1].length?S[0].priority+=1:S[0].length<S[1].length&&(S[1].priority+=1)),S[0].priority>S[1].priority?-1:S[0].priority<S[1].priority?1:0}),D}se(()=>r(s),()=>{x(u,JSON.stringify(r(s)))}),se(()=>(r(u),r(o)),()=>{x(a,r(u)!=JSON.stringify(r(o)))}),ht(),Ge();var k=HR(),_=j(k);Ya(_);var E=y(_,2);Li(E,{children:(D,S)=>{var C=BR(),w=y(j(C),2),$=I(w),O=I($);{var P=N=>{var V=FR();b(N,V)},L=N=>{var V=UR(),R=j(V),U=I(R),H=I(U);Ne(H,{class:"form-field required",name:"meta.appName",children:Ae,$$slots:{default:(ie,be)=>{const oe=ae(()=>be.uniqueId);var Q=qR(),ne=j(Q),ye=y(ne,2);B(()=>{Y(ne,"for",r(oe)),Y(ye,"id",r(oe))}),_t(ye,()=>r(o).meta.appName,Se=>dt(o,r(o).meta.appName=Se)),b(ie,Q)}}});var z=y(U,2),J=I(z);Ne(J,{class:"form-field required",name:"meta.appURL",children:Ae,$$slots:{default:(ie,be)=>{const oe=ae(()=>be.uniqueId);var Q=zR(),ne=j(Q),ye=y(ne,2);B(()=>{Y(ne,"for",r(oe)),Y(ye,"id",r(oe))}),_t(ye,()=>r(o).meta.appURL,Se=>dt(o,r(o).meta.appURL=Se)),b(ie,Q)}}});var W=y(z,2),te=I(W),de=I(te);gR(de,{get healthData(){return r(d)},get formSettings(){return r(o)},set formSettings(ie){x(o,ie)},$$legacy:!0});var pe=y(de,2);RR(pe,{get formSettings(){return r(o)},set formSettings(ie){x(o,ie)},$$legacy:!0});var _e=y(pe,2);sR(_e,{get formSettings(){return r(o)},set formSettings(ie){x(o,ie)},$$legacy:!0});var ke=y(W,2),ve=I(ke);Ne(ve,{class:"form-field form-field-toggle m-0",name:"meta.hideControls",children:Ae,$$slots:{default:(ie,be)=>{const oe=ae(()=>be.uniqueId);var Q=jR(),ne=j(Q),ye=y(ne,2),Se=y(I(ye),2);nt(Se,(Ie,Le)=>le==null?void 0:le(Ie,Le),()=>({text:"This could prevent making accidental schema changes when in production environment.",position:"right"})),B(()=>{Y(ne,"id",r(oe)),Y(ye,"for",r(oe))}),rn(ne,()=>r(o).meta.hideControls,Ie=>dt(o,r(o).meta.hideControls=Ie)),b(ie,Q)}}});var Oe=y(R,2),ue=y(I(Oe),2);{var me=ie=>{var be=VR();B(()=>be.disabled=r(c)),ce("click",be,()=>m()),b(ie,be)};X(ue,ie=>{r(a)&&ie(me)})}var he=y(ue,2);let xe;B(ie=>{xe=Ue(he,1,"btn btn-expanded",null,xe,ie),he.disabled=!r(a)||r(c)},[()=>({"btn-loading":r(c)})]),ce("click",he,()=>p()),b(N,V)};X(O,N=>{r(l)?N(P):N(L,!1)})}ce("submit",$,Et(p)),b(D,C)},$$slots:{default:!0}}),b(n,k),Je(),i()}var YR=T('<label>Backup name</label> <input type="text" pattern="^[a-z0-9_-]+\\.zip$"/> <em class="help-block">Must be in the format [a-z0-9_-].zip</em>',1),KR=T(`<div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content"><p>Please note that during the backup other concurrent write requests may fail since the
                database will be temporary "locked" (this usually happens only during the ZIP generation).</p> <p class="txt-bold">If you are using S3 storage for the collections file upload, you'll have to backup them
                separately since they are not locally stored and will not be included in the final backup!</p></div></div> <form autocomplete="off"><!></form>`,1),JR=T('<h4 class="center txt-break">Initialize new backup</h4>'),ZR=T('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Start backup</span></button>',1);function GR(n,e){Ke(e,!1);const t=Ut(),i="backup_create_"+q.randomString(5);let a=M(),s=M(""),o=M(!1),l;function c(f){var h;ln({}),x(o,!1),x(s,f||""),(h=r(a))==null||h.show()}function u(){var f;return(f=r(a))==null?void 0:f.hide()}async function d(){if(!r(o)){x(o,!0),clearTimeout(l),l=setTimeout(()=>{u()},1500);try{await ze.backups.create(r(s),{$cancelKey:i}),x(o,!1),u(),t("submit"),bn("Successfully generated new backup.")}catch(f){f.isAbort||ze.error(f)}clearTimeout(l),x(o,!1)}}return Ro(()=>{clearTimeout(l)}),Ge(),gt(_n(n,{class:"backup-create-panel",beforeOpen:()=>r(o)?(bo("A backup has already been started, please wait."),!1):!0,beforeHide:()=>(r(o)&&bo("The backup was started but may take a while to complete. You can come back later.",4500),!0),popup:!0,$$events:{show(f){ct.call(this,e,f)},hide(f){ct.call(this,e,f)}},children:(f,h)=>{var p=KR(),v=y(j(p),2),m=I(v);Ne(m,{class:"form-field m-0",name:"name",children:Ae,$$slots:{default:(g,k)=>{const _=ae(()=>k.uniqueId);var E=YR(),D=j(E),S=y(D,2);Y(S,"placeholder","Leave empty to autogenerate"),B(()=>{Y(D,"for",r(_)),Y(S,"id",r(_))}),_t(S,()=>r(s),C=>x(s,C)),b(g,E)}}}),B(()=>Y(v,"id",i)),ce("submit",v,Et(d)),b(f,p)},$$slots:{default:!0,header:(f,h)=>{var p=JR();b(f,p)},footer:(f,h)=>{var p=ZR(),v=j(p),m=y(v,2);let g;B(k=>{v.disabled=r(o),Y(m,"form",i),g=Ue(m,1,"btn btn-expanded",null,g,k),m.disabled=r(o)},[()=>({"btn-loading":r(o)})]),ce("click",v,u),b(f,p)}},$$legacy:!0}),f=>x(a,f),()=>r(a)),xt(e,"show",c),xt(e,"hide",u),Je({show:c,hide:u})}var XR=T('<label>Backup name</label> <input type="text" required/>',1),QR=T(`<div class="alert alert-danger"><div class="icon"><i class="ri-alert-line"></i></div> <div class="content"><p class="txt-bold">Please proceed with caution and use it only with trusted backups!</p> <p>Backup restore is experimental and works only on UNIX based systems.</p> <p>The restore operation will attempt to replace your existing <code>pb_data</code> with the one from
                the backup and will restart the application process.</p> <p>This means that on success all of your data (including app settings, users, superusers, etc.) will
                be replaced with the ones from the backup.</p> <p>Nothing will happen if the backup is invalid or incompatible (ex. missing <code>data.db</code> file).</p></div></div> <div class="content m-b-xs">Type the backup name <div class="label"><span class="txt"> </span> <!></div> to confirm:</div> <form autocomplete="off"><!></form>`,1),eF=T('<h4 class="popup-title txt-ellipsis svelte-1fcgldh">Restore <strong> </strong></h4>'),tF=T('<button type="button" class="btn btn-transparent">Cancel</button> <button type="submit"><span class="txt">Restore backup</span></button>',1);function nF(n,e){Ke(e,!1);const t=M(),i="backup_restore_"+q.randomString(5);let a=M(),s=M(""),o=M(""),l=M(!1),c=null;function u(h){var p;ln({}),x(o,""),x(s,h),x(l,!1),(p=r(a))==null||p.show()}function d(){var h;return(h=r(a))==null?void 0:h.hide()}async function f(){var h;if(!(!r(t)||r(l))){clearTimeout(c),x(l,!0);try{await ze.backups.restore(r(s)),c=setTimeout(()=>{window.location.reload()},2e3)}catch(p){clearTimeout(c),p!=null&&p.isAbort||(x(l,!1),br(((h=p.response)==null?void 0:h.message)||p.message))}}}Ro(()=>{clearTimeout(c)}),se(()=>(r(o),r(s)),()=>{x(t,r(o)!=""&&r(s)==r(o))}),ht(),Ge();{let h=ae(()=>!r(l)),p=ae(()=>!r(l));gt(_n(n,{class:"backup-restore-panel",get overlayClose(){return r(h)},get escClose(){return r(p)},beforeHide:()=>!r(l),popup:!0,$$events:{show(v){ct.call(this,e,v)},hide(v){ct.call(this,e,v)}},children:(v,m)=>{var g=QR(),k=y(j(g),2),_=y(I(k)),E=I(_),D=I(E),S=y(E,2);fr(S,{get value(){return r(s)}});var C=y(k,2),w=I(C);Ne(w,{class:"form-field required m-0",name:"name",children:Ae,$$slots:{default:($,O)=>{const P=ae(()=>O.uniqueId);var L=XR(),N=j(L),V=y(N,2);B(()=>{Y(N,"for",r(P)),Y(V,"id",r(P))}),_t(V,()=>r(o),R=>x(o,R)),b($,L)}}}),B(()=>{Ee(D,r(s)),Y(C,"id",i)}),ce("submit",C,Et(f)),b(v,g)},$$slots:{default:!0,header:(v,m)=>{var g=eF(),k=y(I(g)),_=I(k);B(()=>Ee(_,r(s))),b(v,g)},footer:(v,m)=>{var g=tF(),k=j(g),_=y(k,2);let E;B(D=>{k.disabled=r(l),Y(_,"form",i),E=Ue(_,1,"btn btn-expanded",null,E,D),_.disabled=!r(t)||r(l)},[()=>({"btn-loading":r(l)})]),ce("click",k,d),b(v,g)}},$$legacy:!0}),v=>x(a,v),()=>r(a))}return xt(e,"show",u),xt(e,"hide",d),Je({show:u,hide:d})}var iF=T('<div class="list-item list-item-loader svelte-1ulbkf5"><span class="skeleton-loader"></span></div>'),rF=T('<div class="list-item svelte-1ulbkf5"><i class="ri-folder-zip-line"></i> <div class="content"><span class="name backup-name svelte-1ulbkf5"> </span> <span class="size txt-hint txt-nowrap"> </span></div> <div class="actions nonintrusive"><button type="button" aria-label="Download"><i class="ri-download-line"></i></button> <button type="button" class="btn btn-sm btn-circle btn-hint btn-transparent" aria-label="Restore"><i class="ri-restart-line"></i></button> <button type="button" aria-label="Delete"><i class="ri-delete-bin-7-line"></i></button></div></div>'),aF=T('<div class="list-item list-item-placeholder svelte-1ulbkf5"><span class="txt">No backups yet.</span></div>'),sF=T('<i class="ri-play-circle-line"></i> <span class="txt">Initialize new backup</span>',1),oF=T('<span class="loader loader-sm"></span> <span class="txt">Backup/restore operation is in process</span>',1),lF=T('<div class="list list-compact"><div class="list-content svelte-1ulbkf5"><!></div> <div class="list-item list-item-btn"><button type="button" class="btn btn-block btn-transparent"><!></button></div></div> <!> <!>',1);function cF(n,e){Ke(e,!1);let t=M(),i=M(),a=M([]),s=M(!1),o=M({}),l=M({}),c=M(!0);u(),p();async function u(){x(s,!0);try{x(a,await ze.backups.getFullList()),r(a).sort((L,N)=>L.modified<N.modified?1:L.modified>N.modified?-1:0),x(s,!1)}catch(L){L.isAbort||(ze.error(L),x(s,!1))}}async function d(L){if(!r(o)[L]){dt(o,r(o)[L]=!0);try{const N=await ze.getSuperuserFileToken();q.download(ze.backups.getDownloadURL(N,L))}catch(N){N.isAbort||ze.error(N)}delete r(o)[L],x(o,r(o))}}function f(L){jn(`Do you really want to delete ${L}?`,()=>h(L))}async function h(L){if(!r(l)[L]){dt(l,r(l)[L]=!0);try{await ze.backups.delete(L),q.removeByKey(r(a),"name",L),u(),bn(`Successfully deleted ${L}.`)}catch(N){N.isAbort||ze.error(N)}delete r(l)[L],x(l,r(l))}}async function p(){var L;try{const N=await ze.health.check({$autoCancel:!1}),V=r(c);x(c,((L=N==null?void 0:N.data)==null?void 0:L.canBackup)||!1),V!=r(c)&&r(c)&&u()}catch{}}vn(()=>{let L=setInterval(()=>{p()},3e3);return()=>{clearInterval(L)}}),Ge();var v=lF(),m=j(v),g=I(m),k=I(g);{var _=L=>{var N=rt(),V=j(N);bt(V,1,()=>Array(r(a).length||1),Nt,(R,U)=>{var H=iF();b(R,H)}),b(L,N)},E=L=>{var N=rt(),V=j(N);bt(V,1,()=>r(a),R=>R.key,(R,U)=>{var H=rF(),z=y(I(H),2),J=I(z),W=I(J),te=y(J,2),de=I(te),pe=y(z,2),_e=I(pe);let ke;nt(_e,(me,he)=>le==null?void 0:le(me,he),()=>"Download"),qt(()=>ce("click",_e,Et(()=>d(r(U).key))));var ve=y(_e,2);nt(ve,(me,he)=>le==null?void 0:le(me,he),()=>"Restore"),qt(()=>ce("click",ve,Et(()=>r(i).show(r(U).key))));var Oe=y(ve,2);let ue;nt(Oe,(me,he)=>le==null?void 0:le(me,he),()=>"Delete"),qt(()=>ce("click",Oe,Et(()=>f(r(U).key)))),B((me,he,xe)=>{Y(J,"title",r(U).key),Ee(W,r(U).key),Ee(de,`(${me??""})`),ke=Ue(_e,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,ke,he),_e.disabled=r(l)[r(U).key]||r(o)[r(U).key],ve.disabled=r(l)[r(U).key],ue=Ue(Oe,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,ue,xe),Oe.disabled=r(l)[r(U).key]},[()=>q.formattedFileSize(r(U).size),()=>({"btn-loading":r(o)[r(U).key]}),()=>({"btn-loading":r(l)[r(U).key]})]),Ct(3,H,()=>yn,()=>({duration:150})),b(R,H)},R=>{var U=aF();b(R,U)}),b(L,N)};X(k,L=>{r(s)?L(_):L(E,!1)})}var D=y(g,2),S=I(D),C=I(S);{var w=L=>{var N=sF();b(L,N)},$=L=>{var N=oF();b(L,N)};X(C,L=>{r(c)?L(w):L($,!1)})}var O=y(m,2);gt(GR(O,{$$events:{submit:()=>{u()}},$$legacy:!0}),L=>x(t,L),()=>r(t));var P=y(O,2);return gt(nF(P,{$$legacy:!0}),L=>x(i,L),()=>r(i)),B(()=>S.disabled=r(s)||!r(c)),ce("click",S,()=>{var L;return(L=r(t))==null?void 0:L.show()}),b(n,v),xt(e,"loadBackups",u),Je({loadBackups:u})}var uF=T('<input type="checkbox" required/> <label> </label>',1),dF=T('<label>Endpoint</label> <input type="text" required/>',1),fF=T('<label>Bucket</label> <input type="text" required/>',1),hF=T('<label>Region</label> <input type="text" required/>',1),vF=T('<label>Access key</label> <input type="text" required/>',1),mF=T("<label>Secret</label> <!>",1),pF=T('<input type="checkbox"/> <label><span class="txt">Force path-style addressing</span> <i class="ri-information-line link-hint"></i></label>',1),gF=T('<div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"><!></div> <div class="col-lg-12"></div></div>'),bF=T("<!> <!> <!>",1);function Pb(n,e){Ke(e,!1);const t="s3_test_request";let i=re(e,"originalConfig",24,()=>({})),a=re(e,"config",28,()=>({})),s=re(e,"configKey",8,"s3"),o=re(e,"toggleLabel",8,"Enable S3"),l=re(e,"testFilesystem",8,"storage"),c=re(e,"testError",12,null),u=re(e,"isTesting",12,!1),d=null,f=null,h=M(!1);function p(){var S;x(h,!!((S=i())!=null&&S.accessKey))}function v(S){u(!0),clearTimeout(f),f=setTimeout(()=>{m()},S)}async function m(){if(c(null),!a().enabled)return u(!1),c();ze.cancelRequest(t),clearTimeout(d),d=setTimeout(()=>{ze.cancelRequest(t),c(new Error("S3 test connection timeout.")),u(!1)},3e4),u(!0);let S;try{await ze.settings.testS3(l(),{$cancelKey:t})}catch(C){S=C}return S!=null&&S.isAbort||(c(S),u(!1),clearTimeout(d)),c()}vn(()=>()=>{clearTimeout(d),clearTimeout(f)}),se(()=>F(i()),()=>{var S;(S=i())!=null&&S.enabled&&(p(),v(100))}),se(()=>(F(a()),F(s())),()=>{a().enabled||ri(s())}),ht(),Ge();var g=bF(),k=j(g);Ne(k,{class:"form-field form-field-toggle",children:Ae,$$slots:{default:(S,C)=>{const w=ae(()=>C.uniqueId);var $=uF(),O=j($),P=y(O,2),L=I(P);B(()=>{Y(O,"id",r(w)),Y(P,"for",r(w)),Ee(L,o())}),rn(O,()=>a().enabled,N=>a(a().enabled=N,!0)),b(S,$)}}});var _=y(k,2);nn(_,e,"default",{get isTesting(){return u()},get testError(){return c()},get enabled(){return F(a()),A(()=>a().enabled)}},null);var E=y(_,2);{var D=S=>{var C=gF(),w=I(C),$=I(w);Ne($,{class:"form-field required",get name(){return`${s()??""}.endpoint`},children:Ae,$$slots:{default:(W,te)=>{const de=ae(()=>te.uniqueId);var pe=dF(),_e=j(pe),ke=y(_e,2);B(()=>{Y(_e,"for",r(de)),Y(ke,"id",r(de))}),_t(ke,()=>a().endpoint,ve=>a(a().endpoint=ve,!0)),b(W,pe)}}});var O=y(w,2),P=I(O);Ne(P,{class:"form-field required",get name(){return`${s()??""}.bucket`},children:Ae,$$slots:{default:(W,te)=>{const de=ae(()=>te.uniqueId);var pe=fF(),_e=j(pe),ke=y(_e,2);B(()=>{Y(_e,"for",r(de)),Y(ke,"id",r(de))}),_t(ke,()=>a().bucket,ve=>a(a().bucket=ve,!0)),b(W,pe)}}});var L=y(O,2),N=I(L);Ne(N,{class:"form-field required",get name(){return`${s()??""}.region`},children:Ae,$$slots:{default:(W,te)=>{const de=ae(()=>te.uniqueId);var pe=hF(),_e=j(pe),ke=y(_e,2);B(()=>{Y(_e,"for",r(de)),Y(ke,"id",r(de))}),_t(ke,()=>a().region,ve=>a(a().region=ve,!0)),b(W,pe)}}});var V=y(L,2),R=I(V);Ne(R,{class:"form-field required",get name(){return`${s()??""}.accessKey`},children:Ae,$$slots:{default:(W,te)=>{const de=ae(()=>te.uniqueId);var pe=vF(),_e=j(pe),ke=y(_e,2);B(()=>{Y(_e,"for",r(de)),Y(ke,"id",r(de))}),_t(ke,()=>a().accessKey,ve=>a(a().accessKey=ve,!0)),b(W,pe)}}});var U=y(V,2),H=I(U);Ne(H,{class:"form-field required",get name(){return`${s()??""}.secret`},children:Ae,$$slots:{default:(W,te)=>{const de=ae(()=>te.uniqueId);var pe=mF(),_e=j(pe),ke=y(_e,2);ff(ke,{required:!0,get id(){return r(de)},get mask(){return r(h)},set mask(ve){x(h,ve)},get value(){return a().secret},set value(ve){a(a().secret=ve,!0)},$$legacy:!0}),B(()=>Y(_e,"for",r(de))),b(W,pe)}}});var z=y(U,2),J=I(z);Ne(J,{class:"form-field",get name(){return`${s()??""}.forcePathStyle`},children:Ae,$$slots:{default:(W,te)=>{const de=ae(()=>te.uniqueId);var pe=pF(),_e=j(pe),ke=y(_e,2),ve=y(I(ke),2);nt(ve,(Oe,ue)=>le==null?void 0:le(Oe,ue),()=>({text:'Forces the request to use path-style addressing, eg. "https://s3.amazonaws.com/BUCKET/KEY" instead of the default "https://BUCKET.s3.amazonaws.com/KEY".',position:"top"})),B(()=>{Y(_e,"id",r(de)),Y(ke,"for",r(de))}),rn(_e,()=>a().forcePathStyle,Oe=>a(a().forcePathStyle=Oe,!0)),b(W,pe)}}}),Ct(3,C,()=>yn,()=>({duration:150})),b(S,C)};X(E,S=>{F(a()),A(()=>a().enabled)&&S(D)})}b(n,g),Je()}var yF=T('<button type="button" aria-label="Upload backup"><i class="ri-upload-cloud-line"></i></button> <input type="file" accept="application/zip" class="hidden"/>',1);function _F(n,e){Ke(e,!1);const t=Ut(),i="upload_backup";let a=re(e,"class",8,""),s=M(),o=M(!1);function l(){r(s)&&dt(s,r(s).value="")}function c(v){v&&jn(`Note that we don't perform validations for the uploaded backup files. Proceed with caution and only if you trust the source.

Do you really want to upload "${v.name}"?`,()=>{u(v)},()=>{l()})}async function u(v){var g,k,_;if(r(o)||!v)return;x(o,!0);const m=new FormData;m.set("file",v);try{await ze.backups.upload(m,{requestKey:i}),x(o,!1),t("success"),bn("Successfully uploaded a new backup.")}catch(E){E.isAbort||(x(o,!1),(_=(k=(g=E.response)==null?void 0:g.data)==null?void 0:k.file)!=null&&_.message?br(E.response.data.file.message):ze.error(E))}l()}Ro(()=>{ze.cancelRequest(i)}),Ge();var d=yF(),f=j(d);let h;nt(f,(v,m)=>le==null?void 0:le(v,m),()=>"Upload backup"),qt(()=>ce("click",f,()=>{var v;return(v=r(s))==null?void 0:v.click()}));var p=y(f,2);gt(p,v=>x(s,v),()=>r(s)),B(v=>h=Ue(f,1,`btn btn-circle btn-transparent ${a()??""}`,null,h,v),[()=>({"btn-loading":r(o),"btn-disabled":r(o)})]),ce("change",p,v=>{var m,g;c((g=(m=v==null?void 0:v.target)==null?void 0:m.files)==null?void 0:g[0])}),b(n,d),Je()}var xF=T('<i class="ri-arrow-up-s-line"></i>'),wF=T('<i class="ri-arrow-down-s-line"></i>'),kF=T('<input type="checkbox"/> <label>Enable auto backups</label>',1),SF=T('<button type="button" class="dropdown-item closable"><span class="txt">Every day at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every sunday at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every Mon and Wed at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every first day of the month at 00:00h</span></button>',1),TF=T('<label>Cron expression</label> <input required type="text" class="txt-lg txt-mono" placeholder="* * * * *"/> <div class="form-field-addon"><button type="button" class="btn btn-sm btn-outline p-r-0"><span class="txt">Presets</span> <i class="ri-arrow-drop-down-fill"></i> <!></button></div> <div class="help-block"><p>Supports numeric list, steps, ranges or <span class="link-primary">macros</span>. <br/> The timezone is in UTC.</p></div>',1),$F=T('<label>Max @auto backups to keep</label> <input type="number" min="1"/>',1),IF=T('<div class="block"><div class="grid p-t-base p-b-sm"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div></div></div>'),CF=T('<span class="loader loader-sm"></span>'),EF=T('<div class="label label-sm label-warning entrance-right"><i class="ri-error-warning-line txt-warning"></i> <span class="txt">Failed to establish S3 connection</span></div>'),OF=T('<div class="label label-sm label-success entrance-right"><i class="ri-checkbox-circle-line txt-success"></i> <span class="txt">S3 connected successfully</span></div>'),DF=T('<button type="button" class="btn btn-hint btn-transparent"><span class="txt">Reset</span></button>'),PF=T('<form class="block" autocomplete="off"><!> <!> <div class="clearfix m-b-base"></div> <!> <div class="flex"><div class="flex-fill"></div> <!> <!> <button type="submit"><span class="txt">Save changes</span></button></div></form>'),MF=T('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel" autocomplete="off"><div class="flex m-b-sm flex-gap-10"><span class="txt-xl">Backup and restore your PocketBase data</span> <!> <!></div> <!> <hr/> <button type="button"><span class="txt">Backups options</span> <!></button> <!></div></div>',1),AF=T("<!> <!>",1);function LF(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(On,"$pageTitle",t),s=M();ni(On,"Backups");let o=M(),l=M({}),c=M({}),u=M(!1),d=M(!1),f=M(""),h=M(!1),p=M(!1),v=M(!1),m=M(null);g();async function g(){x(u,!0);try{const $=await ze.settings.getAll()||{};_($)}catch($){ze.error($)}x(u,!1)}async function k(){if(!(r(d)||!r(s))){x(d,!0);try{const $=await ze.settings.update(q.filterRedactedProps(r(c)));ln({}),await D(),_($),bn("Successfully saved application settings.")}catch($){ze.error($)}x(d,!1)}}function _($={}){x(c,{backups:($==null?void 0:$.backups)||{}}),x(h,r(c).backups.cron!=""),x(l,JSON.parse(JSON.stringify(r(c))))}function E(){x(c,JSON.parse(JSON.stringify(r(l)||{backups:{}}))),x(h,r(c).backups.cron!="")}async function D(){var $;return($=r(o))==null?void 0:$.loadBackups()}se(()=>r(l),()=>{x(f,JSON.stringify(r(l)))}),se(()=>(r(f),r(c)),()=>{x(s,r(f)!=JSON.stringify(r(c)))}),se(()=>(r(h),r(c),ri),()=>{var $,O;!r(h)&&((O=($=r(c))==null?void 0:$.backups)!=null&&O.cron)&&(ri("backups.cron"),dt(c,r(c).backups.cron=""))}),ht(),Ge();var S=AF(),C=j(S);Ya(C);var w=y(C,2);Li(w,{children:($,O)=>{var P=MF(),L=j(P),N=I(L),V=y(I(N),2),R=I(V),U=y(L,2),H=I(U),z=I(H),J=y(I(z),2);$c(J,{class:"btn-sm",tooltip:"Refresh",$$events:{refresh:D}});var W=y(J,2);_F(W,{class:"btn-sm",$$events:{success:D}});var te=y(z,2);gt(cF(te,{$$legacy:!0}),me=>x(o,me),()=>r(o));var de=y(te,4);let pe;var _e=y(I(de),2);{var ke=me=>{var he=xF();b(me,he)},ve=me=>{var he=wF();b(me,he)};X(_e,me=>{r(p)?me(ke):me(ve,!1)})}var Oe=y(de,2);{var ue=me=>{var he=PF(),xe=I(he);Ne(xe,{class:"form-field form-field-toggle m-t-base m-b-0",children:Ae,$$slots:{default:(Te,Ze)=>{const we=ae(()=>Ze.uniqueId);var Re=kF(),Me=j(Re),Xe=y(Me,2);B(()=>{Y(Me,"id",r(we)),Y(Xe,"for",r(we))}),rn(Me,()=>r(h),Be=>x(h,Be)),b(Te,Re)}}});var ie=y(xe,2);{var be=Te=>{var Ze=IF(),we=I(Ze),Re=I(we),Me=I(Re);Ne(Me,{class:"form-field required",name:"backups.cron",children:Ae,$$slots:{default:(Pe,He)=>{const Fe=ae(()=>He.uniqueId);var De=TF(),Ve=j(De),Ye=y(Ve,2);Gi(Ye,(r(l),A(()=>{var pt,at;return!((at=(pt=r(l))==null?void 0:pt.backups)!=null&&at.cron)})));var lt=y(Ye,2),We=I(lt),tt=y(I(We),4);ii(tt,{class:"dropdown dropdown-nowrap dropdown-right",children:(pt,at)=>{var Ce=SF(),vt=j(Ce),K=y(vt,2),G=y(K,2),fe=y(G,2);ce("click",vt,()=>{dt(c,r(c).backups.cron="0 0 * * *")}),ce("click",K,()=>{dt(c,r(c).backups.cron="0 0 * * 0")}),ce("click",G,()=>{dt(c,r(c).backups.cron="0 0 * * 1,3")}),ce("click",fe,()=>{dt(c,r(c).backups.cron="0 0 1 * *")}),b(pt,Ce)},$$slots:{default:!0}});var it=y(lt,2),Qe=I(it),ft=y(I(Qe));nt(ft,(pt,at)=>le==null?void 0:le(pt,at),()=>`@yearly
@annually
@monthly
@weekly
@daily
@midnight
@hourly`),B(()=>{Y(Ve,"for",r(Fe)),Y(Ye,"id",r(Fe))}),_t(Ye,()=>r(c).backups.cron,pt=>dt(c,r(c).backups.cron=pt)),b(Pe,De)}}});var Xe=y(Re,2),Be=I(Xe);Ne(Be,{class:"form-field required",name:"backups.cronMaxKeep",children:Ae,$$slots:{default:(Pe,He)=>{const Fe=ae(()=>He.uniqueId);var De=$F(),Ve=j(De),Ye=y(Ve,2);B(()=>{Y(Ve,"for",r(Fe)),Y(Ye,"id",r(Fe))}),_t(Ye,()=>r(c).backups.cronMaxKeep,lt=>dt(c,r(c).backups.cronMaxKeep=lt)),b(Pe,De)}}}),Ct(3,Ze,()=>yn,()=>({duration:150})),b(Te,Ze)};X(ie,Te=>{r(h)&&Te(be)})}var oe=y(ie,4);{let Te=ae(()=>(r(l),A(()=>{var Ze;return(Ze=r(l).backups)==null?void 0:Ze.s3})));Pb(oe,{toggleLabel:"Store backups in S3 storage",testFilesystem:"backups",configKey:"backups.s3",get originalConfig(){return r(Te)},get config(){return r(c).backups.s3},set config(Ze){dt(c,r(c).backups.s3=Ze)},get isTesting(){return r(v)},set isTesting(Ze){x(v,Ze)},get testError(){return r(m)},set testError(Ze){x(m,Ze)},$$legacy:!0})}var Q=y(oe,2),ne=y(I(Q),2);{var ye=Te=>{var Ze=rt(),we=j(Ze);{var Re=Xe=>{var Be=CF();b(Xe,Be)},Me=Xe=>{var Be=rt(),Pe=j(Be);{var He=De=>{var Ve=EF();nt(Ve,(Ye,lt)=>le==null?void 0:le(Ye,lt),()=>{var Ye;return(Ye=r(m).data)==null?void 0:Ye.message}),b(De,Ve)},Fe=De=>{var Ve=OF();b(De,Ve)};X(Pe,De=>{r(m)?De(He):De(Fe,!1)},!0)}b(Xe,Be)};X(we,Xe=>{r(v)?Xe(Re):Xe(Me,!1)})}b(Te,Ze)};X(ne,Te=>{r(c),r(s),r(d),A(()=>{var Ze,we;return((we=(Ze=r(c).backups)==null?void 0:Ze.s3)==null?void 0:we.enabled)&&!r(s)&&!r(d)})&&Te(ye)})}var Se=y(ne,2);{var Ie=Te=>{var Ze=DF();B(()=>Ze.disabled=!r(s)||r(d)),ce("click",Ze,()=>E()),b(Te,Ze)};X(Se,Te=>{r(s)&&Te(Ie)})}var Le=y(Se,2);let je;B(Te=>{je=Ue(Le,1,"btn btn-expanded",null,je,Te),Le.disabled=!r(s)||r(d)},[()=>({"btn-loading":r(d)})]),ce("click",Le,()=>k()),ce("submit",he,Et(k)),Ct(3,he,()=>yn,()=>({duration:150})),b(me,he)};X(Oe,me=>{r(p)&&!r(u)&&me(ue)})}B(me=>{Ee(R,a()),pe=Ue(de,1,"btn btn-secondary",null,pe,me),de.disabled=r(u)},[()=>({"btn-loading":r(u)})]),ce("click",de,()=>x(p,!r(p))),ce("submit",H,Et(k)),b($,P)},$$slots:{default:!0}}),b(n,S),Je(),i()}var NF=T('<div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div>',1),RF=T('<div class="list-item"><div class="content"><span class="txt"> </span></div> <span class="txt-hint txt-nowrap txt-mono cron-expr m-r-xs"> </span> <div class="actions"><button type="button" aria-label="Run"><i class="ri-play-large-line"></i></button></div></div>'),FF=T('<div class="list-item list-item-placeholder"><span class="txt">No app crons found.</span></div>'),qF=T('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel" autocomplete="off"><div class="flex m-b-sm flex-gap-10"><span class="txt-xl">Registered app cron jobs</span> <!></div> <div class="list list-compact"><div class="list-content"><!></div></div> <p class="txt-hint m-t-xs">App cron jobs can be registered only programmatically with <a target="_blank" rel="noopener noreferrer">Go</a> or <a target="_blank" rel="noopener noreferrer">JavaScript</a>.</p></div></div>',1),zF=T("<!> <!>",1);function jF(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(On,"$pageTitle",t);ni(On,"Crons");let s=M([]),o=M(!1),l=M({});c();async function c(){x(o,!0);try{x(s,await ze.crons.getFullList()),x(o,!1)}catch(p){p.isAbort||(ze.error(p),x(o,!1))}}async function u(p){dt(l,r(l)[p]=!0);try{await ze.crons.run(p),bn(`Successfully triggered ${p}.`),dt(l,r(l)[p]=!1)}catch(v){v.isAbort||(ze.error(v),dt(l,r(l)[p]=!1))}}Ge();var d=zF(),f=j(d);Ya(f);var h=y(f,2);Li(h,{children:(p,v)=>{var m=qF(),g=j(m),k=I(g),_=y(I(k),2),E=I(_),D=y(g,2),S=I(D),C=I(S),w=y(I(C),2);$c(w,{class:"btn-sm",tooltip:"Refresh",$$events:{refresh:c}});var $=y(C,2),O=I($),P=I(O);{var L=H=>{var z=NF();b(H,z)},N=H=>{var z=rt(),J=j(z);bt(J,1,()=>r(s),W=>W.id,(W,te)=>{var de=RF(),pe=I(de),_e=I(pe),ke=I(_e),ve=y(pe,2),Oe=I(ve),ue=y(ve,2),me=I(ue);let he;nt(me,(xe,ie)=>le==null?void 0:le(xe,ie),()=>"Run"),qt(()=>ce("click",me,Et(()=>u(r(te).id)))),B(xe=>{Ee(ke,r(te).id),Ee(Oe,r(te).expression),he=Ue(me,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,he,xe),me.disabled=r(l)[r(te).id]},[()=>({"btn-loading":r(l)[r(te).id]})]),b(W,de)},W=>{var te=FF();b(W,te)}),b(H,z)};X(P,H=>{r(o)?H(L):H(N,!1)})}var V=y($,2),R=y(I(V)),U=y(R,2);B(()=>{Ee(E,a()),Y(R,"href","https://pocketbase.io/docs/go-jobs-scheduling/"),Y(U,"href","https://pocketbase.io/docs/js-jobs-scheduling/")}),b(p,m)},$$slots:{default:!0}}),b(n,d),Je(),i()}var VF=T('<div class="loader"></div>'),UF=T('<input type="checkbox"/> <label>Select all</label>',1),BF=T('<input type="checkbox"/> <label> </label>',1),HF=T('<div class="list-item list-item-collection"><!></div>'),WF=T(`<div class="content txt-xl m-b-base"><p>Below you'll find your current collections configuration that you could import in
                        another PocketBase environment.</p></div> <div class="export-panel"><div class="export-list"><div class="list-item list-item-section"><!></div> <!></div>  <div tabindex="0" class="export-preview"><button type="button" class="btn btn-sm btn-transparent fade copy-schema"><span class="txt">Copy</span></button> <pre class="code-wrapper"> </pre></div></div> <div class="flex m-t-base"><div class="flex-fill"></div> <button type="button" class="btn btn-expanded"><i class="ri-download-line"></i> <span class="txt">Download as JSON</span></button></div>`,1),YF=T('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel"><!></div></div>',1),KF=T("<!> <!>",1);function JF(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(On,"$pageTitle",t),s=M(),o=M(),l=M();ni(On,"Export collections");const c="export_"+q.randomString(5);let u=M(),d=M([]),f=M({}),h=M(!1);p();async function p(){var w;x(h,!0);try{x(d,await ze.collections.getFullList({batch:100,$cancelKey:c})),x(d,q.sortCollections(r(d)));for(let $ of r(d))delete $.created,delete $.updated,(w=$.oauth2)==null||delete w.providers;_()}catch($){ze.error($)}x(h,!1)}function v(){q.downloadJson(Object.values(r(f)),"pb_schema")}function m(){q.copyToClipboard(r(s)),bo("The configuration was copied to your clipboard!",3e3)}function g(){r(l)?k():_()}function k(){x(f,{})}function _(){x(f,{});for(const w of r(d))dt(f,r(f)[w.id]=w)}function E(w){r(f)[w.id]?delete r(f)[w.id]:dt(f,r(f)[w.id]=w),x(f,r(f))}se(()=>r(f),()=>{x(s,JSON.stringify(Object.values(r(f)),null,4))}),se(()=>r(f),()=>{x(o,Object.keys(r(f)).length)}),se(()=>(r(d),r(o)),()=>{x(l,r(d).length&&r(o)===r(d).length)}),ht(),Ge();var D=KF(),S=j(D);Ya(S);var C=y(S,2);Li(C,{children:(w,$)=>{var O=YF(),P=j(O),L=I(P),N=y(I(L),2),V=I(N),R=y(P,2),U=I(R),H=I(U);{var z=W=>{var te=VF();b(W,te)},J=W=>{var te=WF(),de=y(j(te),2),pe=I(de),_e=I(pe),ke=I(_e);Ne(ke,{class:"form-field",children:Ae,$$slots:{default:(be,oe)=>{const Q=ae(()=>oe.uniqueId);var ne=UF(),ye=j(ne),Se=y(ye,2);B(()=>{Y(ye,"id",r(Q)),ye.disabled=(r(d),A(()=>!r(d).length)),ta(ye,r(l)),Y(Se,"for",r(Q))}),ce("change",ye,()=>g()),b(be,ne)}}});var ve=y(_e,2);bt(ve,1,()=>r(d),be=>be.id,(be,oe)=>{var Q=HF(),ne=I(Q);Ne(ne,{class:"form-field",children:Ae,$$slots:{default:(ye,Se)=>{const Ie=ae(()=>Se.uniqueId);var Le=BF(),je=j(Le),Te=y(je,2),Ze=I(Te);B(()=>{Y(je,"id",r(Ie)),ta(je,(r(f),r(oe),A(()=>r(f)[r(oe).id]))),Y(Te,"for",r(Ie)),Y(Te,"title",(r(oe),A(()=>r(oe).name))),Ee(Ze,(r(oe),A(()=>r(oe).name)))}),ce("change",je,()=>E(r(oe))),b(ye,Le)}}}),b(be,Q)});var Oe=y(pe,2),ue=I(Oe),me=y(ue,2),he=I(me);gt(Oe,be=>x(u,be),()=>r(u));var xe=y(de,2),ie=y(I(xe),2);B(()=>{ue.disabled=!r(o),Ee(he,r(s)),ie.disabled=!r(o)}),ce("click",ue,()=>m()),ce("keydown",Oe,be=>{if(be.ctrlKey&&be.code==="KeyA"){be.preventDefault();const oe=window.getSelection(),Q=document.createRange();Q.selectNodeContents(r(u)),oe.removeAllRanges(),oe.addRange(Q)}}),ce("click",ie,()=>v()),b(W,te)};X(H,W=>{r(h)?W(z):W(J,!1)})}B(()=>Ee(V,a())),b(w,O)},$$slots:{default:!0}}),b(n,D),Je(),i()}var ZF=T('<span class="label label-success">Added</span> <strong> </strong>',1),GF=T('<span class="label label-danger">Deleted</span> <strong> </strong>',1),XF=T('<span class="label label-warning">Changed</span>'),QF=T('<strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i>',1),eq=T('<div class="inline-flex fleg-gap-5"><!> <!> <strong class="txt"> </strong></div>'),tq=T('<tr><td class="min-width svelte-qs0w8h"><span> </span></td><td><pre class="txt diff-value svelte-qs0w8h"> </pre></td><td><pre class="txt diff-value svelte-qs0w8h"> </pre></td></tr>'),nq=T('<tr class="txt-primary svelte-qs0w8h"><td class="min-width field-key-col svelte-qs0w8h"> </td><td class="changed-old-col svelte-qs0w8h"><pre class="txt"> </pre></td><td class="changed-none-col svelte-qs0w8h"></td></tr>'),iq=T('<tr class="svelte-qs0w8h"><th class="min-width svelte-qs0w8h" colspan="3"><span class="txt"> </span> <span class="label label-danger m-l-5 svelte-qs0w8h">Deleted - <small>All stored data related to <strong> </strong> will be deleted!</small></span></th></tr> <!>',1),rq=T('<span class="label label-warning m-l-5 svelte-qs0w8h">Changed</span>'),aq=T('<tr><td class="min-width field-key-col svelte-qs0w8h"> </td><td><pre class="txt"> </pre></td><td><pre class="txt"> </pre></td></tr>'),sq=T('<tr class="svelte-qs0w8h"><th class="min-width svelte-qs0w8h" colspan="3"><span class="txt"> </span> <!></th></tr> <!>',1),oq=T('<tr class="txt-primary svelte-qs0w8h"><td class="min-width field-key-col svelte-qs0w8h"> </td><td class="changed-none-col svelte-qs0w8h"></td><td class="changed-new-col svelte-qs0w8h"><pre class="txt"> </pre></td></tr>'),lq=T('<tr class="svelte-qs0w8h"><th class="min-width svelte-qs0w8h" colspan="3"><span class="txt"> </span> <span class="label label-success m-l-5 svelte-qs0w8h">Added</span></th></tr> <!>',1),cq=T('<div class="section-title"><!></div> <table class="table collections-diff-table m-b-base svelte-qs0w8h"><thead class="svelte-qs0w8h"><tr class="svelte-qs0w8h"><th class="svelte-qs0w8h">Props</th><th width="10%" class="svelte-qs0w8h">Old</th><th width="10%" class="svelte-qs0w8h">New</th></tr></thead><tbody><!><!><!><!></tbody></table>',1);function uq(n,e){Ke(e,!1);const t=M(),i=M(),a=M(),s=M();let o=re(e,"collectionA",24,()=>({})),l=re(e,"collectionB",24,()=>({})),c=re(e,"deleteMissing",8,!1),u=M([]),d=M([]),f=M([]),h=M([]),p=M([]);function v(){var R,U;x(d,Array.isArray((R=l())==null?void 0:R.fields)?(U=l())==null?void 0:U.fields.concat():[]),c()||x(d,r(d).concat(r(u).filter(H=>!r(d).find(z=>H.id==z.id))))}function m(R,U){R=R||[];for(let H of R)if(H.id==U)return H;return null}function g(R,U){return R===U?!1:JSON.stringify(R)!==JSON.stringify(U)}function k(R){return typeof R>"u"?"":q.isObject(R)?JSON.stringify(R,null,4):R}se(()=>F(l()),()=>{var R,U;x(t,!((R=l())!=null&&R.id)&&!((U=l())!=null&&U.name))}),se(()=>(r(t),F(o())),()=>{var R;x(i,!r(t)&&!((R=o())!=null&&R.id))}),se(()=>F(o()),()=>{var R,U;x(u,Array.isArray((R=o())==null?void 0:R.fields)?(U=o())==null?void 0:U.fields.concat():[])}),se(()=>(F(o()),F(l()),F(c())),()=>{var R,U;(typeof((R=o())==null?void 0:R.fields)<"u"||typeof((U=l())==null?void 0:U.fields)<"u"||typeof c()<"u")&&v()}),se(()=>(r(u),r(d)),()=>{x(f,r(u).filter(R=>!r(d).find(U=>R.id==U.id)))}),se(()=>(r(d),r(u)),()=>{x(h,r(d).filter(R=>r(u).find(U=>U.id==R.id)))}),se(()=>(r(d),r(u)),()=>{x(p,r(d).filter(R=>!r(u).find(U=>U.id==R.id)))}),se(()=>(F(o()),F(l()),F(c())),()=>{x(a,q.hasCollectionChanges(o(),l(),c()))}),se(()=>(F(o()),F(l())),()=>{x(s,q.mergeUnique(Object.keys(o()||{}),Object.keys(l()||{})).filter(R=>!["fields","created","updated"].includes(R)))}),ht(),Ge();var _=cq(),E=j(_),D=I(E);{var S=R=>{var U=ZF(),H=y(j(U),2),z=I(H);B(()=>Ee(z,(F(l()),A(()=>{var J;return(J=l())==null?void 0:J.name})))),b(R,U)},C=R=>{var U=rt(),H=j(U);{var z=W=>{var te=GF(),de=y(j(te),2),pe=I(de);B(()=>Ee(pe,(F(o()),A(()=>{var _e;return(_e=o())==null?void 0:_e.name})))),b(W,te)},J=W=>{var te=eq(),de=I(te);{var pe=ue=>{var me=XF();b(ue,me)};X(de,ue=>{r(a)&&ue(pe)})}var _e=y(de,2);{var ke=ue=>{var me=QF(),he=j(me),xe=I(he);B(()=>Ee(xe,(F(o()),A(()=>o().name)))),b(ue,me)};X(_e,ue=>{F(o()),F(l()),A(()=>o().name!==l().name)&&ue(ke)})}var ve=y(_e,2),Oe=I(ve);B(()=>Ee(Oe,(F(l()),A(()=>l().name)))),b(W,te)};X(H,W=>{F(l()),A(()=>{var te;return!((te=l())!=null&&te.id)})?W(z):W(J,!1)},!0)}b(R,U)};X(D,R=>{F(o()),A(()=>{var U;return!((U=o())!=null&&U.id)})?R(S):R(C,!1)})}var w=y(E,2),$=y(I(w)),O=I($);bt(O,1,()=>r(s),Nt,(R,U)=>{var H=tq();let z;var J=I(H),W=I(J),te=I(W),de=y(J);let pe;var _e=I(de),ke=I(_e),ve=y(de);let Oe;var ue=I(ve),me=I(ue);B((he,xe,ie,be,oe)=>{z=Ue(H,1,"svelte-qs0w8h",null,z,he),Ee(te,r(U)),pe=Ue(de,1,"svelte-qs0w8h",null,pe,xe),Ee(ke,ie),Oe=Ue(ve,1,"svelte-qs0w8h",null,Oe,be),Ee(me,oe)},[()=>{var he,xe;return{"txt-primary":g((he=o())==null?void 0:he[r(U)],(xe=l())==null?void 0:xe[r(U)])}},()=>{var he,xe;return{"changed-old-col":!r(i)&&g((he=o())==null?void 0:he[r(U)],(xe=l())==null?void 0:xe[r(U)]),"changed-none-col":r(i)}},()=>(F(o()),r(U),A(()=>{var he;return k((he=o())==null?void 0:he[r(U)])})),()=>{var he,xe;return{"changed-new-col":!r(t)&&g((he=o())==null?void 0:he[r(U)],(xe=l())==null?void 0:xe[r(U)]),"changed-none-col":r(t)}},()=>(F(l()),r(U),A(()=>{var he;return k((he=l())==null?void 0:he[r(U)])}))]),b(R,H)});var P=y(O);{var L=R=>{var U=rt(),H=j(U);bt(H,1,()=>r(f),Nt,(z,J)=>{var W=iq(),te=j(W),de=I(te),pe=I(de),_e=I(pe),ke=y(pe,2),ve=y(I(ke)),Oe=y(I(ve)),ue=I(Oe),me=y(te,2);bt(me,1,()=>(r(J),A(()=>Object.entries(r(J)))),Nt,(he,xe)=>{var ie=Xr(()=>ss(r(xe),2));let be=()=>r(ie)[0],oe=()=>r(ie)[1];var Q=nq(),ne=I(Q),ye=I(ne),Se=y(ne),Ie=I(Se),Le=I(Ie);B(je=>{Ee(ye,be()),Ee(Le,je)},[()=>(oe(),A(()=>k(oe())))]),b(he,Q)}),B(()=>{Ee(_e,`field: ${r(J),A(()=>r(J).name)??""}`),Ee(ue,(r(J),A(()=>r(J).name)))}),b(z,W)}),b(R,U)};X(P,R=>{(c()||r(t))&&R(L)})}var N=y(P);bt(N,1,()=>r(h),Nt,(R,U)=>{var H=sq(),z=j(H),J=I(z),W=I(J),te=I(W),de=y(W,2);{var pe=ke=>{var ve=rq();b(ke,ve)};X(de,ke=>{r(u),r(U),r(d),A(()=>g(m(r(u),r(U).id),m(r(d),r(U).id)))&&ke(pe)})}var _e=y(z,2);bt(_e,1,()=>(r(U),A(()=>Object.entries(r(U)))),Nt,(ke,ve)=>{var Oe=Xr(()=>ss(r(ve),2));let ue=()=>r(Oe)[0],me=()=>r(Oe)[1];var he=aq();let xe;var ie=I(he),be=I(ie),oe=y(ie);let Q;var ne=I(oe),ye=I(ne),Se=y(oe);let Ie;var Le=I(Se),je=I(Le);B((Te,Ze,we,Re,Me)=>{xe=Ue(he,1,"svelte-qs0w8h",null,xe,Te),Ee(be,ue()),Q=Ue(oe,1,"svelte-qs0w8h",null,Q,Ze),Ee(ye,we),Ie=Ue(Se,1,"svelte-qs0w8h",null,Ie,Re),Ee(je,Me)},[()=>{var Te;return{"txt-primary":g((Te=m(r(u),r(U).id))==null?void 0:Te[ue()],me())}},()=>{var Te;return{"changed-old-col":g((Te=m(r(u),r(U).id))==null?void 0:Te[ue()],me())}},()=>(r(u),r(U),ue(),A(()=>{var Te;return k((Te=m(r(u),r(U).id))==null?void 0:Te[ue()])})),()=>{var Te;return{"changed-new-col":g((Te=m(r(u),r(U).id))==null?void 0:Te[ue()],me())}},()=>(me(),A(()=>k(me())))]),b(ke,he)}),B(()=>Ee(te,`field: ${r(U),A(()=>r(U).name)??""}`)),b(R,H)});var V=y(N);bt(V,1,()=>r(p),Nt,(R,U)=>{var H=lq(),z=j(H),J=I(z),W=I(J),te=I(W),de=y(z,2);bt(de,1,()=>(r(U),A(()=>Object.entries(r(U)))),Nt,(pe,_e)=>{var ke=Xr(()=>ss(r(_e),2));let ve=()=>r(ke)[0],Oe=()=>r(ke)[1];var ue=oq(),me=I(ue),he=I(me),xe=y(me,2),ie=I(xe),be=I(ie);B(oe=>{Ee(he,ve()),Ee(be,oe)},[()=>(Oe(),A(()=>k(Oe())))]),b(pe,ue)}),B(()=>Ee(te,`field: ${r(U),A(()=>r(U).name)??""}`)),b(R,H)}),b(n,_),Je()}var dq=T('<h4 class="center txt-break">Side-by-side diff</h4>'),fq=T('<button type="button" class="btn btn-transparent">Close</button> <button type="button"><span class="txt">Confirm and import</span></button>',1);function hq(n,e){Ke(e,!1);const t=Ut();let i=M(),a=M([]),s=M([]),o=M([]),l=M(!1),c=M(!1);function u(v,m,g=!1){var k;x(a,v),x(s,m),x(l,g),(k=r(i))==null||k.show()}function d(){var v;return(v=r(i))==null?void 0:v.hide()}function f(){x(o,[]);for(const v of r(a)){const m=q.findByKey(r(s),"id",v.id)||null;(r(l)&&!(m!=null&&m.id)||m!=null&&m.id&&q.hasCollectionChanges(v,m,r(l)))&&r(o).push({old:v,new:m})}for(const v of r(s)){const m=q.findByKey(r(a),"id",v.id)||null;m!=null&&m.id||r(o).push({old:m,new:v})}}function h(){const v=[];if(r(l))for(const m of r(a)){const g=q.findByKey(r(s),"id",m.id);if(!g)v.push(m.name+".*");else{const k=Array.isArray(m.fields)?m.fields:[];for(const _ of k)q.findByKey(g.fields,"id",_.id)||v.push(`${m.name}.${_.name} (${_.id})`)}}v.length?jn(`Do you really want to delete the following collection fields and their related records data:
- ${v.join(`
- `)}`,()=>{p()}):p()}async function p(){if(!r(c)){x(c,!0);try{await ze.collections.import(r(s),r(l)),bn("Successfully imported collections configuration."),t("submit")}catch(v){ze.error(v)}x(c,!1),d()}}se(()=>(r(a),r(s)),()=>{Array.isArray(r(a))&&Array.isArray(r(s))&&f()}),ht(),Ge();{let v=ae(()=>!r(c));gt(_n(n,{class:"full-width-popup import-popup",overlayClose:!1,get escClose(){return r(v)},beforeHide:()=>!r(c),popup:!0,$$events:{show(m){ct.call(this,e,m)},hide(m){ct.call(this,e,m)}},children:(m,g)=>{var k=rt(),_=j(k);bt(_,1,()=>r(o),Nt,(E,D)=>{uq(E,{get collectionA(){return r(D),A(()=>r(D).old)},get collectionB(){return r(D),A(()=>r(D).new)},get deleteMissing(){return r(l)}})}),b(m,k)},$$slots:{default:!0,header:(m,g)=>{var k=dq();b(m,k)},footer:(m,g)=>{var k=fq(),_=j(k),E=y(_,2);let D;B(S=>{_.disabled=r(c),D=Ue(E,1,"btn btn-expanded",null,D,S),E.disabled=r(c)},[()=>({"btn-loading":r(c)})]),ce("click",_,d),ce("click",E,()=>h()),b(m,k)}},$$legacy:!0}),m=>x(i,m),()=>r(i))}return xt(e,"show",u),xt(e,"hide",d),Je({show:u,hide:d})}var vq=T('<div class="loader"></div>'),mq=T('<div class="help-block help-block-error">Invalid collections configuration.</div>'),pq=T('<label class="p-b-10">Collections</label> <textarea class="code" spellcheck="false" rows="15" required></textarea> <!>',1),gq=T('<input type="checkbox"/> <label>Merge with the existing collections</label>',1),bq=T('<div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content"><string>Your collections configuration is already up-to-date!</string></div></div>'),yq=T('<small class="txt-hint"> </small>'),_q=T('<div class="list-item"><span class="label label-danger list-label svelte-1jx20fl">Deleted</span> <div class="inline-flex flex-gap-5"><strong> </strong> <!></div></div>'),xq=T('<strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i>',1),wq=T('<small class="txt-hint"> </small>'),kq=T('<div class="list-item"><span class="label label-warning list-label svelte-1jx20fl">Changed</span> <div class="inline-flex flex-gap-5"><!> <strong> </strong> <!></div></div>'),Sq=T('<small class="txt-hint"> </small>'),Tq=T('<div class="list-item"><span class="label label-success list-label svelte-1jx20fl">Added</span> <div class="inline-flex flex-gap-5"><strong> </strong> <!></div></div>'),$q=T('<h5 class="section-title">Detected changes</h5> <div class="list"><!> <!> <!></div>',1),Iq=T(`<div class="alert alert-warning m-t-base"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content"><string>Some of the imported collections share the same name and/or fields but are
                                imported with different IDs. You can replace them in the import if you want
                                to.</string></div> <button type="button" class="btn btn-warning btn-sm btn-outline"><span class="txt">Replace with original ids</span></button></div>`),Cq=T('<button type="button" class="btn btn-transparent link-hint"><span class="txt">Clear</span></button>'),Eq=T('<input type="file" class="hidden" accept=".json"/> <div class="content txt-xl m-b-base"><p>Paste below the collections configuration you want to import or <button><span class="txt">Load from JSON file</span></button></p></div> <!> <!> <!> <!> <!> <!> <div class="flex m-t-base"><!> <div class="flex-fill"></div> <button type="button" class="btn btn-expanded btn-warning m-l-auto"><span class="txt">Review</span></button></div>',1),Oq=T('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel"><!></div></div>',1),Dq=T("<!> <!> <!>",1);function Pq(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(On,"$pageTitle",t),s=M(),o=M(),l=M(),c=M(),u=M(),d=M();ni(On,"Import collections");let f=M(),h=M(),p=M(""),v=M(!1),m=M([]),g=M([]),k=M(!0),_=M([]),E=M(!1),D=M(!1);S();async function S(){var H;x(E,!0);try{x(g,await ze.collections.getFullList(200));for(let z of r(g))delete z.created,delete z.updated,(H=z.oauth2)==null||delete H.providers}catch(z){ze.error(z)}x(E,!1)}function C(){if(x(_,[]),!!r(s))for(let H of r(m)){const z=q.findByKey(r(g),"id",H.id);!(z!=null&&z.id)||!q.hasCollectionChanges(z,H,r(k))||r(_).push({new:H,old:z})}}function w(){x(m,[]);try{x(m,JSON.parse(r(p)))}catch{}Array.isArray(r(m))?x(m,q.filterDuplicatesByKey(r(m))):x(m,[]);for(let H of r(m))delete H.created,delete H.updated,H.fields=q.filterDuplicatesByKey(H.fields)}function $(){var H;for(let z of r(m)){const J=q.findByKey(r(g),"name",z.name)||q.findByKey(r(g),"id",z.id);if(!J)continue;const W=z.id,te=J.id;z.id=te;const de=Array.isArray(J.fields)?J.fields:[],pe=Array.isArray(z.fields)?z.fields:[];for(const _e of pe){const ke=q.findByKey(de,"name",_e.name);ke&&ke.id&&(_e.id=ke.id)}for(let _e of r(m))if(Array.isArray(_e.fields))for(let ke of _e.fields)ke.collectionId&&ke.collectionId===W&&(ke.collectionId=te);for(let _e=0;_e<((H=z.indexes)==null?void 0:H.length);_e++)z.indexes[_e]=z.indexes[_e].replace(/create\s+(?:unique\s+)?\s*index\s*(?:if\s+not\s+exists\s+)?(\S*)\s+on/gim,ke=>ke.replace(W,te))}x(p,JSON.stringify(r(m),null,4))}function O(H){x(v,!0);const z=new FileReader;z.onload=async J=>{x(v,!1),dt(f,r(f).value=""),x(p,J.target.result),await Nn(),r(m).length||(br("Invalid collections configuration."),P())},z.onerror=J=>{console.warn(J),br("Failed to load the imported JSON."),x(v,!1),dt(f,r(f).value="")},z.readAsText(H)}function P(){x(p,""),dt(f,r(f).value=""),ln({})}function L(){var z;const H=r(D)?q.filterDuplicatesByKey(r(g).concat(r(m))):r(m);(z=r(h))==null||z.show(r(g),H,r(k))}se(()=>(r(p),r(D)),()=>{typeof r(p)<"u"&&r(D)!==null&&w(r(p))}),se(()=>(r(p),r(m)),()=>{x(s,!!r(p)&&r(m).length&&r(m).length===r(m).filter(H=>!!H.id&&!!H.name).length)}),se(()=>(r(g),r(s),r(D),r(k),r(m)),()=>{x(o,r(g).filter(H=>r(s)&&!r(D)&&r(k)&&!q.findByKey(r(m),"id",H.id)))}),se(()=>(r(m),r(s),r(g)),()=>{x(l,r(m).filter(H=>r(s)&&!q.findByKey(r(g),"id",H.id)))}),se(()=>(r(m),r(k)),()=>{(typeof r(m)<"u"||typeof r(k)<"u")&&C()}),se(()=>(r(p),r(o),r(l),r(_)),()=>{x(c,!!r(p)&&(r(o).length||r(l).length||r(_).length))}),se(()=>(r(E),r(s),r(c)),()=>{x(u,!r(E)&&r(s)&&r(c))}),se(()=>(r(m),r(g)),()=>{x(d,r(m).filter(H=>{let z=q.findByKey(r(g),"name",H.name)||q.findByKey(r(g),"id",H.id);if(!z)return!1;if(z.id!=H.id)return!0;const J=Array.isArray(z.fields)?z.fields:[],W=Array.isArray(H.fields)?H.fields:[];for(const te of W){if(q.findByKey(J,"id",te.id))continue;const pe=q.findByKey(J,"name",te.name);if(pe&&te.id!=pe.id)return!0}return!1}))}),ht(),Ge();var N=Dq(),V=j(N);Ya(V);var R=y(V,2);Li(R,{children:(H,z)=>{var J=Oq(),W=j(J),te=I(W),de=y(I(te),2),pe=I(de),_e=y(W,2),ke=I(_e),ve=I(ke);{var Oe=me=>{var he=vq();b(me,he)},ue=me=>{var he=Eq(),xe=j(he);gt(xe,He=>x(f,He),()=>r(f));var ie=y(xe,2),be=I(ie),oe=y(I(be));let Q;var ne=y(ie,2);{let He=ae(()=>r(s)?"":"field-error");Ne(ne,{get class(){return`form-field ${r(He)??""}`},name:"collections",children:Ae,$$slots:{default:(Fe,De)=>{const Ve=ae(()=>De.uniqueId);var Ye=pq(),lt=j(Ye),We=y(lt,2),tt=y(We,2);{var it=Qe=>{var ft=mq();b(Qe,ft)};X(tt,Qe=>{r(p)&&!r(s)&&Qe(it)})}B(()=>{Y(lt,"for",r(Ve)),Y(We,"id",r(Ve))}),_t(We,()=>r(p),Qe=>x(p,Qe)),b(Fe,Ye)}}})}var ye=y(ne,2);{var Se=He=>{Ne(He,{class:"form-field form-field-toggle",children:Ae,$$slots:{default:(Fe,De)=>{const Ve=ae(()=>De.uniqueId);var Ye=gq(),lt=j(Ye),We=y(lt,2);B(()=>{Y(lt,"id",r(Ve)),lt.disabled=!r(s),Y(We,"for",r(Ve))}),rn(lt,()=>r(D),tt=>x(D,tt)),b(Fe,Ye)}}})};X(ye,He=>{r(m),A(()=>r(m).length)&&He(Se)})}var Ie=y(ye,2);X(Ie,He=>{});var Le=y(Ie,2);{var je=He=>{var Fe=bq();b(He,Fe)};X(Le,He=>{r(s),r(m),r(c),A(()=>r(s)&&r(m).length&&!r(c))&&He(je)})}var Te=y(Le,2);{var Ze=He=>{var Fe=$q(),De=y(j(Fe),2),Ve=I(De);{var Ye=Qe=>{var ft=rt(),pt=j(ft);bt(pt,1,()=>r(o),at=>at.id,(at,Ce)=>{var vt=_q(),K=y(I(vt),2),G=I(K),fe=I(G),$e=y(G,2);{var et=ot=>{var wt=yq(),st=I(wt);B(()=>Ee(st,(r(Ce),A(()=>r(Ce).id)))),b(ot,wt)};X($e,ot=>{r(Ce),A(()=>r(Ce).id)&&ot(et)})}B(()=>Ee(fe,(r(Ce),A(()=>r(Ce).name)))),b(at,vt)}),b(Qe,ft)};X(Ve,Qe=>{r(o),A(()=>r(o).length)&&Qe(Ye)})}var lt=y(Ve,2);{var We=Qe=>{var ft=rt(),pt=j(ft);bt(pt,1,()=>r(_),at=>at.old.id+at.new.id,(at,Ce)=>{var vt=kq(),K=y(I(vt),2),G=I(K);{var fe=st=>{var St=xq(),mt=j(St),Tt=I(mt);B(()=>Ee(Tt,(r(Ce),A(()=>r(Ce).old.name)))),b(st,St)};X(G,st=>{r(Ce),A(()=>r(Ce).old.name!==r(Ce).new.name)&&st(fe)})}var $e=y(G,2),et=I($e),ot=y($e,2);{var wt=st=>{var St=wq(),mt=I(St);B(()=>Ee(mt,(r(Ce),A(()=>r(Ce).new.id)))),b(st,St)};X(ot,st=>{r(Ce),A(()=>r(Ce).new.id)&&st(wt)})}B(()=>Ee(et,(r(Ce),A(()=>r(Ce).new.name)))),b(at,vt)}),b(Qe,ft)};X(lt,Qe=>{r(_),A(()=>r(_).length)&&Qe(We)})}var tt=y(lt,2);{var it=Qe=>{var ft=rt(),pt=j(ft);bt(pt,1,()=>r(l),at=>at.id,(at,Ce)=>{var vt=Tq(),K=y(I(vt),2),G=I(K),fe=I(G),$e=y(G,2);{var et=ot=>{var wt=Sq(),st=I(wt);B(()=>Ee(st,(r(Ce),A(()=>r(Ce).id)))),b(ot,wt)};X($e,ot=>{r(Ce),A(()=>r(Ce).id)&&ot(et)})}B(()=>Ee(fe,(r(Ce),A(()=>r(Ce).name)))),b(at,vt)}),b(Qe,ft)};X(tt,Qe=>{r(l),A(()=>r(l).length)&&Qe(it)})}b(He,Fe)};X(Te,He=>{r(s),r(m),r(c),A(()=>r(s)&&r(m).length&&r(c))&&He(Ze)})}var we=y(Te,2);{var Re=He=>{var Fe=Iq(),De=y(I(Fe),4);ce("click",De,()=>$()),b(He,Fe)};X(we,He=>{r(d),A(()=>r(d).length)&&He(Re)})}var Me=y(we,2),Xe=I(Me);{var Be=He=>{var Fe=Cq();ce("click",Fe,()=>P()),b(He,Fe)};X(Xe,He=>{r(p)&&He(Be)})}var Pe=y(Xe,4);B(He=>{Q=Ue(oe,1,"btn btn-outline btn-sm m-l-5",null,Q,He),Pe.disabled=!r(u)},[()=>({"btn-loading":r(v)})]),ce("change",xe,()=>{r(f).files.length&&O(r(f).files[0])}),ce("click",oe,()=>{r(f).click()}),ce("click",Pe,L),b(me,he)};X(ve,me=>{r(E)?me(Oe):me(ue,!1)})}B(()=>Ee(pe,a())),b(H,J)},$$slots:{default:!0}});var U=y(R,2);gt(hq(U,{$$events:{submit:()=>{P(),S()}},$$legacy:!0}),H=>x(h,H),()=>r(h)),b(n,N),Je(),i()}var Mq=T('<div class="loader"></div>'),Aq=T('<label>Sender name</label> <input type="text" required/>',1),Lq=T('<label>Sender address</label> <input type="email" required/>',1),Nq=T('<input type="checkbox" required/> <label><span class="txt">Use SMTP mail server <strong>(recommended)</strong></span> <i class="ri-information-line link-hint"></i></label>',1),Rq=T('<label>SMTP server host</label> <input type="text" required/>',1),Fq=T('<label>Port</label> <input type="number" required/>',1),qq=T('<label>Username</label> <input type="text"/>',1),zq=T("<label>Password</label> <!>",1),jq=T('<span class="txt">Hide more options</span> <i class="ri-arrow-up-s-line"></i>',1),Vq=T('<span class="txt">Show more options</span> <i class="ri-arrow-down-s-line"></i>',1),Uq=T("<label>TLS encryption</label> <!>",1),Bq=T("<label>AUTH method</label> <!>",1),Hq=T('<label><span class="txt">EHLO/HELO domain</span> <i class="ri-information-line link-hint"></i></label> <input type="text" placeholder="Default to localhost"/>',1),Wq=T('<div class="grid"><div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"></div></div>'),Yq=T('<div><div class="grid"><div class="col-lg-4"><!></div> <div class="col-lg-2"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div></div> <button type="button" class="btn btn-sm btn-secondary m-t-sm m-b-sm"><!></button> <!></div>'),Kq=T('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Save changes</span></button>',1),Jq=T('<button type="button" class="btn btn-expanded btn-outline"><i class="ri-mail-check-line"></i> <span class="txt">Send test email</span></button>'),Zq=T('<div class="grid m-b-base"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div></div> <!> <!> <div class="flex"><div class="flex-fill"></div> <!></div>',1),Gq=T('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><div class="content txt-xl m-b-base"><p>Configure common settings for sending emails.</p></div> <!></form></div>',1),Xq=T("<!> <!> <!>",1);function Qq(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(On,"$pageTitle",t),s=M(),o=M(),l=[{label:"Auto (StartTLS)",value:!1},{label:"Always",value:!0}],c=[{label:"PLAIN (default)",value:"PLAIN"},{label:"LOGIN",value:"LOGIN"}];ni(On,"Mail settings");let u=M(),d=M({}),f=M({}),h=M(!1),p=M(!1),v=M(!1),m=M(!1);g();async function g(){x(h,!0);try{const $=await ze.settings.getAll()||{};_($)}catch($){ze.error($)}x(h,!1)}async function k(){if(!(r(p)||!r(o))){x(p,!0);try{const $=await ze.settings.update(q.filterRedactedProps(r(f)));_($),ln({}),bn("Successfully saved mail settings.")}catch($){ze.error($)}x(p,!1)}}function _($={}){x(f,{meta:($==null?void 0:$.meta)||{},smtp:($==null?void 0:$.smtp)||{}}),r(f).smtp.authMethod||dt(f,r(f).smtp.authMethod=c[0].value),x(d,JSON.parse(JSON.stringify(r(f)))),x(v,!!r(f).smtp.username)}function E(){x(f,JSON.parse(JSON.stringify(r(d)||{})))}se(()=>r(d),()=>{x(s,JSON.stringify(r(d)))}),se(()=>(r(s),r(f)),()=>{x(o,r(s)!=JSON.stringify(r(f)))}),ht(),Ge();var D=Xq(),S=j(D);Ya(S);var C=y(S,2);Li(C,{children:($,O)=>{var P=Gq(),L=j(P),N=I(L),V=y(I(N),2),R=I(V),U=y(L,2),H=I(U),z=y(I(H),2);{var J=te=>{var de=Mq();b(te,de)},W=te=>{var de=Zq(),pe=j(de),_e=I(pe),ke=I(_e);Ne(ke,{class:"form-field required",name:"meta.senderName",children:Ae,$$slots:{default:(Q,ne)=>{const ye=ae(()=>ne.uniqueId);var Se=Aq(),Ie=j(Se),Le=y(Ie,2);B(()=>{Y(Ie,"for",r(ye)),Y(Le,"id",r(ye))}),_t(Le,()=>r(f).meta.senderName,je=>dt(f,r(f).meta.senderName=je)),b(Q,Se)}}});var ve=y(_e,2),Oe=I(ve);Ne(Oe,{class:"form-field required",name:"meta.senderAddress",children:Ae,$$slots:{default:(Q,ne)=>{const ye=ae(()=>ne.uniqueId);var Se=Lq(),Ie=j(Se),Le=y(Ie,2);B(()=>{Y(Ie,"for",r(ye)),Y(Le,"id",r(ye))}),_t(Le,()=>r(f).meta.senderAddress,je=>dt(f,r(f).meta.senderAddress=je)),b(Q,Se)}}});var ue=y(pe,2);Ne(ue,{class:"form-field form-field-toggle m-b-sm",children:Ae,$$slots:{default:(Q,ne)=>{const ye=ae(()=>ne.uniqueId);var Se=Nq(),Ie=j(Se),Le=y(Ie,2),je=y(I(Le),2);nt(je,(Te,Ze)=>le==null?void 0:le(Te,Ze),()=>({text:'By default PocketBase uses the unix "sendmail" command for sending emails. For better emails deliverability it is recommended to use a SMTP mail server.',position:"top"})),B(()=>{Y(Ie,"id",r(ye)),Y(Le,"for",r(ye))}),rn(Ie,()=>r(f).smtp.enabled,Te=>dt(f,r(f).smtp.enabled=Te)),b(Q,Se)}}});var me=y(ue,2);{var he=Q=>{var ne=Yq(),ye=I(ne),Se=I(ye),Ie=I(Se);Ne(Ie,{class:"form-field required",name:"smtp.host",children:Ae,$$slots:{default:(De,Ve)=>{const Ye=ae(()=>Ve.uniqueId);var lt=Rq(),We=j(lt),tt=y(We,2);B(()=>{Y(We,"for",r(Ye)),Y(tt,"id",r(Ye))}),_t(tt,()=>r(f).smtp.host,it=>dt(f,r(f).smtp.host=it)),b(De,lt)}}});var Le=y(Se,2),je=I(Le);Ne(je,{class:"form-field required",name:"smtp.port",children:Ae,$$slots:{default:(De,Ve)=>{const Ye=ae(()=>Ve.uniqueId);var lt=Fq(),We=j(lt),tt=y(We,2);B(()=>{Y(We,"for",r(Ye)),Y(tt,"id",r(Ye))}),_t(tt,()=>r(f).smtp.port,it=>dt(f,r(f).smtp.port=it)),b(De,lt)}}});var Te=y(Le,2),Ze=I(Te);Ne(Ze,{class:"form-field",name:"smtp.username",children:Ae,$$slots:{default:(De,Ve)=>{const Ye=ae(()=>Ve.uniqueId);var lt=qq(),We=j(lt),tt=y(We,2);B(()=>{Y(We,"for",r(Ye)),Y(tt,"id",r(Ye))}),_t(tt,()=>r(f).smtp.username,it=>dt(f,r(f).smtp.username=it)),b(De,lt)}}});var we=y(Te,2),Re=I(we);Ne(Re,{class:"form-field",name:"smtp.password",children:Ae,$$slots:{default:(De,Ve)=>{const Ye=ae(()=>Ve.uniqueId);var lt=zq(),We=j(lt),tt=y(We,2);ff(tt,{get id(){return r(Ye)},get mask(){return r(v)},set mask(it){x(v,it)},get value(){return r(f).smtp.password},set value(it){dt(f,r(f).smtp.password=it)},$$legacy:!0}),B(()=>Y(We,"for",r(Ye))),b(De,lt)}}});var Me=y(ye,2),Xe=I(Me);{var Be=De=>{var Ve=jq();b(De,Ve)},Pe=De=>{var Ve=Vq();b(De,Ve)};X(Xe,De=>{r(m)?De(Be):De(Pe,!1)})}var He=y(Me,2);{var Fe=De=>{var Ve=Wq(),Ye=I(Ve),lt=I(Ye);Ne(lt,{class:"form-field",name:"smtp.tls",children:Ae,$$slots:{default:(ft,pt)=>{const at=ae(()=>pt.uniqueId);var Ce=Uq(),vt=j(Ce),K=y(vt,2);Vn(K,{get id(){return r(at)},get items(){return l},get keyOfSelected(){return r(f).smtp.tls},set keyOfSelected(G){dt(f,r(f).smtp.tls=G)},$$legacy:!0}),B(()=>Y(vt,"for",r(at))),b(ft,Ce)}}});var We=y(Ye,2),tt=I(We);Ne(tt,{class:"form-field",name:"smtp.authMethod",children:Ae,$$slots:{default:(ft,pt)=>{const at=ae(()=>pt.uniqueId);var Ce=Bq(),vt=j(Ce),K=y(vt,2);Vn(K,{get id(){return r(at)},get items(){return c},get keyOfSelected(){return r(f).smtp.authMethod},set keyOfSelected(G){dt(f,r(f).smtp.authMethod=G)},$$legacy:!0}),B(()=>Y(vt,"for",r(at))),b(ft,Ce)}}});var it=y(We,2),Qe=I(it);Ne(Qe,{class:"form-field",name:"smtp.localName",children:Ae,$$slots:{default:(ft,pt)=>{const at=ae(()=>pt.uniqueId);var Ce=Hq(),vt=j(Ce),K=y(I(vt),2);nt(K,(fe,$e)=>le==null?void 0:le(fe,$e),()=>({text:"Some SMTP servers, such as the Gmail SMTP-relay, requires a proper domain name in the inital EHLO/HELO exchange and will reject attempts to use localhost.",position:"top"}));var G=y(vt,2);B(()=>{Y(vt,"for",r(at)),Y(G,"id",r(at))}),_t(G,()=>r(f).smtp.localName,fe=>dt(f,r(f).smtp.localName=fe)),b(ft,Ce)}}}),Ct(3,Ve,()=>yn,()=>({duration:150})),b(De,Ve)};X(He,De=>{r(m)&&De(Fe)})}ce("click",Me,Et(()=>{x(m,!r(m))})),Ct(3,ne,()=>yn,()=>({duration:150})),b(Q,ne)};X(me,Q=>{r(f),A(()=>r(f).smtp.enabled)&&Q(he)})}var xe=y(me,2),ie=y(I(xe),2);{var be=Q=>{var ne=Kq(),ye=j(ne),Se=y(ye,2);let Ie;B(Le=>{ye.disabled=r(p),Ie=Ue(Se,1,"btn btn-expanded",null,Ie,Le),Se.disabled=!r(o)||r(p)},[()=>({"btn-loading":r(p)})]),ce("click",ye,()=>E()),ce("click",Se,()=>k()),b(Q,ne)},oe=Q=>{var ne=Jq();ce("click",ne,()=>{var ye;return(ye=r(u))==null?void 0:ye.show()}),b(Q,ne)};X(ie,Q=>{r(o)?Q(be):Q(oe,!1)})}b(te,de)};X(z,te=>{r(h)?te(J):te(W,!1)})}B(()=>Ee(R,a())),ce("submit",H,Et(()=>k())),b($,P)},$$slots:{default:!0}});var w=y(C,2);gt(Tb(w,{$$legacy:!0}),$=>x(u,$),()=>r(u)),b(n,D),Je(),i()}var e3=T('<div class="loader"></div>'),t3=T(`<div><div class="alert alert-warning m-0"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content">If you have existing uploaded files, you'll have to migrate them manually
                                    from the <strong> </strong> to the <strong> </strong>. <br/> There are numerous command line tools that can help you, such as: <a href="https://github.com/rclone/rclone" target="_blank" rel="noopener noreferrer" class="txt-bold">rclone</a>, <a href="https://github.com/peak/s5cmd" target="_blank" rel="noopener noreferrer" class="txt-bold">s5cmd</a>, etc.</div></div> <div class="clearfix m-t-base"></div></div>`),n3=T('<span class="loader loader-sm"></span>'),i3=T('<div class="label label-sm label-warning entrance-right"><i class="ri-error-warning-line txt-warning"></i> <span class="txt">Failed to establish S3 connection</span></div>'),r3=T('<div class="label label-sm label-success entrance-right"><i class="ri-checkbox-circle-line txt-success"></i> <span class="txt">S3 connected successfully</span></div>'),a3=T('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Reset</span></button>'),s3=T('<!> <div class="flex"><div class="flex-fill"></div> <!> <!> <button type="submit"><span class="txt">Save changes</span></button></div>',1),o3=T('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><div class="content txt-xl m-b-base"><p>By default PocketBase uses the local file system to store uploaded files.</p> <p>If you have limited disk space, you could optionally connect to an S3 compatible storage.</p></div> <!></form></div>',1),l3=T("<!> <!>",1);function c3(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(On,"$pageTitle",t),s=M(),o=M();ni(On,"Files storage");const l="s3_test_request";let c=M({}),u=M({}),d=M(!1),f=M(!1),h=M(!1),p=M(null);v();async function v(){x(d,!0);try{const S=await ze.settings.getAll()||{};g(S)}catch(S){ze.error(S)}x(d,!1)}async function m(){if(!(r(f)||!r(o))){x(f,!0);try{ze.cancelRequest(l);const S=await ze.settings.update(q.filterRedactedProps(r(u)));ln({}),await g(S),no(),bn("Successfully saved storage settings.")}catch(S){ze.error(S)}x(f,!1)}}async function g(S={}){x(u,{s3:(S==null?void 0:S.s3)||{}}),x(c,JSON.parse(JSON.stringify(r(u))))}async function k(){x(u,JSON.parse(JSON.stringify(r(c)||{})))}se(()=>r(c),()=>{x(s,JSON.stringify(r(c)))}),se(()=>(r(s),r(u)),()=>{x(o,r(s)!=JSON.stringify(r(u)))}),ht(),Ge();var _=l3(),E=j(_);Ya(E);var D=y(E,2);Li(D,{children:(S,C)=>{var w=o3(),$=j(w),O=I($),P=y(I(O),2),L=I(P),N=y($,2),V=I(N),R=y(I(V),2);{var U=z=>{var J=e3();b(z,J)},H=z=>{var J=s3(),W=j(J);Pb(W,{toggleLabel:"Use S3 storage",get originalConfig(){return r(c),A(()=>r(c).s3)},get config(){return r(u).s3},set config(ue){dt(u,r(u).s3=ue)},get isTesting(){return r(h)},set isTesting(ue){x(h,ue)},get testError(){return r(p)},set testError(ue){x(p,ue)},children:(ue,me)=>{var he=rt(),xe=j(he);{var ie=be=>{var oe=t3(),Q=I(oe),ne=y(I(Q),2),ye=y(I(ne)),Se=I(ye),Ie=y(ye,2),Le=I(Ie);B(()=>{Ee(Se,(r(c),A(()=>{var je;return(je=r(c).s3)!=null&&je.enabled?"S3 storage":"local file system"}))),Ee(Le,(r(u),A(()=>r(u).s3.enabled?"S3 storage":"local file system")))}),Ct(3,oe,()=>yn,()=>({duration:150})),b(be,oe)};X(xe,be=>{r(c),r(u),A(()=>{var oe;return((oe=r(c).s3)==null?void 0:oe.enabled)!=r(u).s3.enabled})&&be(ie)})}b(ue,he)},$$slots:{default:!0},$$legacy:!0});var te=y(W,2),de=y(I(te),2);{var pe=ue=>{var me=rt(),he=j(me);{var xe=be=>{var oe=n3();b(be,oe)},ie=be=>{var oe=rt(),Q=j(oe);{var ne=Se=>{var Ie=i3();nt(Ie,(Le,je)=>le==null?void 0:le(Le,je),()=>{var Le;return(Le=r(p).data)==null?void 0:Le.message}),b(Se,Ie)},ye=Se=>{var Ie=r3();b(Se,Ie)};X(Q,Se=>{r(p)?Se(ne):Se(ye,!1)},!0)}b(be,oe)};X(he,be=>{r(h)?be(xe):be(ie,!1)})}b(ue,me)};X(de,ue=>{r(u),r(o),r(f),A(()=>{var me;return((me=r(u).s3)==null?void 0:me.enabled)&&!r(o)&&!r(f)})&&ue(pe)})}var _e=y(de,2);{var ke=ue=>{var me=a3();B(()=>me.disabled=r(f)),ce("click",me,()=>k()),b(ue,me)};X(_e,ue=>{r(o)&&ue(ke)})}var ve=y(_e,2);let Oe;B(ue=>{Oe=Ue(ve,1,"btn btn-expanded",null,Oe,ue),ve.disabled=!r(o)||r(f)},[()=>({"btn-loading":r(f)})]),ce("click",ve,()=>m()),b(z,J)};X(R,z=>{r(d)?z(U):z(H,!1)})}B(()=>Ee(L,a())),ce("submit",V,Et(()=>m())),b(S,w)},$$slots:{default:!0}}),b(n,_),Je(),i()}var u3=T('<div class="block txt-center m-b-lg"><figure class="logo"><img alt="PocketBase logo" width="40" height="40"/> <span class="txt">Pocket<strong>Base</strong></span></figure></div> <div class="clearfix"></div>',1),d3=T('<div class="wrapper wrapper-sm m-b-xl panel-wrapper svelte-lxxzfu"><!> <!></div>');function f3(n,e){Ke(e,!1);let t=re(e,"nobranding",8,!1);Ge(),Li(n,{class:"full-page",center:!0,children:(i,a)=>{var s=d3(),o=I(s);{var l=u=>{var d=u3(),f=j(d),h=I(f),p=I(h);B(()=>Y(p,"src",`${A(()=>"./")??""}images/logo.svg`)),b(u,d)};X(o,u=>{t()||u(l)})}var c=y(o,2);nn(c,e,"default",{},null),b(i,s)},$$slots:{default:!0}}),Je()}var h3=T('<div class="block txt-center"><span class="loader"></span></div>'),v3=T("<label> </label> <input required/>",1),m3=T('<label>Password</label> <input type="password" required/> <div class="help-block"><a href="/request-password-reset" class="link-hint">Forgotten password?</a></div>',1),p3=T('<form class="block"><!> <!> <button type="submit"><span class="txt"> </span> <i class="ri-arrow-right-line"></i></button></form>'),g3=T('<label>Email</label> <input type="email" required/>',1),b3=T('<form class="block"><!> <button type="submit"><i class="ri-mail-send-line"></i> <span class="txt">Send OTP</span></button></form>'),y3=T(`<div class="content txt-center m-b-sm"><p>Check your <strong> </strong> inbox and enter in the input below the received
                        One-time password (OTP).</p></div>`),_3=T('<label>Id</label> <input type="text" required/>',1),x3=T('<label>One-time password</label> <input type="password" required/>',1),w3=T('<!> <form class="block"><!> <!> <button type="submit"><span class="txt">Login</span> <i class="ri-arrow-right-line"></i></button></form> <div class="content txt-center m-t-sm"><button type="button" class="link-hint">Request another OTP</button></div>',1),k3=T('<div class="content txt-center m-b-base"><h4>Superuser login <!></h4></div> <!>',1);function S3(n,e){Ke(e,!1);const[t,i]=Rt(),a=()=>It(Yd,"$querystring",t),s=new URLSearchParams(a());let o=M(s.get("demoEmail")||""),l=M(s.get("demoPassword")||""),c=M({}),u=M(1),d=M(1),f=M(!1),h=M(!1),p=M(!1),v=M(!1),m=M(""),g=M(""),k=M(""),_=M(""),E=M("");D();async function D(){if(!r(v)){x(v,!0);try{x(c,await ze.collection("_superusers").listAuthMethods())}catch($){ze.error($)}x(v,!1)}}async function S(){var $,O,P;if(!r(f)){x(f,!0);try{await ze.collection("_superusers").authWithPassword(r(o),r(l)),no(),ln({}),ws("/")}catch(L){L.status==401?(x(m,L.response.mfaId),((P=(O=($=r(c))==null?void 0:$.password)==null?void 0:O.identityFields)==null?void 0:P.length)==1&&r(c).password.identityFields[0]=="email"?(x(_,r(o)),await C()):/^[^@\s]+@[^@\s]+$/.test(r(o))&&x(_,r(o))):L.status!=400?ze.error(L):br("Invalid login credentials.")}x(f,!1)}}async function C(){if(!r(h)){x(h,!0);try{const $=await ze.collection("_superusers").requestOTP(r(_));x(g,$.otpId),x(k,r(g)),no(),ln({})}catch($){$.status==429&&x(g,r(k)),ze.error($)}x(h,!1)}}async function w(){if(!r(p)){x(p,!0);try{await ze.collection("_superusers").authWithOTP(r(g)||r(k),r(E),{mfaId:r(m)}),no(),ln({}),ws("/")}catch($){ze.error($)}x(p,!1)}}se(()=>(r(d),r(u),r(c),r(m),r(g)),()=>{var $,O,P,L;x(d,1),x(u,1),(O=($=r(c))==null?void 0:$.mfa)!=null&&O.enabled&&Cr(d),(L=(P=r(c))==null?void 0:P.otp)!=null&&L.enabled&&Cr(d),r(m)!=""&&Cr(u),r(g)!=""&&Cr(u)}),ht(),Ge(),f3(n,{children:($,O)=>{var P=k3(),L=j(P),N=I(L),V=y(I(N));{var R=J=>{var W=mr();B(()=>Ee(W,`(${r(u)??""}/${r(d)??""})`)),b(J,W)};X(V,J=>{r(d)>1&&J(R)})}var U=y(L,2);{var H=J=>{var W=h3();b(J,W)},z=J=>{var W=rt(),te=j(W);{var de=_e=>{var ke=p3(),ve=I(ke);Ne(ve,{class:"form-field required",name:"identity",children:Ae,$$slots:{default:(ie,be)=>{const oe=ae(()=>be.uniqueId);var Q=v3(),ne=j(Q),ye=I(ne),Se=y(ne,2);Gi(Se,!0),B(Ie=>{Y(ne,"for",r(oe)),Ee(ye,Ie),Y(Se,"id",r(oe)),Y(Se,"type",(r(c),A(()=>r(c).password.identityFields.length==1&&r(c).password.identityFields[0]=="email"?"email":"text"))),Un(Se,r(o))},[()=>(F(q),r(c),A(()=>q.sentenize(r(c).password.identityFields.join(" or "),!1)))]),ce("input",Se,Ie=>{x(o,Ie.target.value)}),b(ie,Q)}}});var Oe=y(ve,2);Ne(Oe,{class:"form-field required",name:"password",children:Ae,$$slots:{default:(ie,be)=>{const oe=ae(()=>be.uniqueId);var Q=m3(),ne=j(Q),ye=y(ne,2),Se=y(ye,2),Ie=I(Se);nt(Ie,Le=>Lt==null?void 0:Lt(Le)),B(()=>{Y(ne,"for",r(oe)),Y(ye,"id",r(oe))}),_t(ye,()=>r(l),Le=>x(l,Le)),b(ie,Q)}}});var ue=y(Oe,2);let me;var he=I(ue),xe=I(he);B(ie=>{me=Ue(ue,1,"btn btn-lg btn-block btn-next",null,me,ie),Ee(xe,r(d)>1?"Next":"Login")},[()=>({"btn-disabled":r(f),"btn-loading":r(f)})]),ce("submit",ke,Et(S)),b(_e,ke)},pe=_e=>{var ke=rt(),ve=j(ke);{var Oe=ue=>{var me=rt(),he=j(me);{var xe=be=>{var oe=b3(),Q=I(oe);Ne(Q,{class:"form-field required",name:"email",children:Ae,$$slots:{default:(Se,Ie)=>{const Le=ae(()=>Ie.uniqueId);var je=g3(),Te=j(je),Ze=y(Te,2);B(()=>{Y(Te,"for",r(Le)),Y(Ze,"id",r(Le))}),_t(Ze,()=>r(_),we=>x(_,we)),b(Se,je)}}});var ne=y(Q,2);let ye;B(Se=>ye=Ue(ne,1,"btn btn-lg btn-block btn-next",null,ye,Se),[()=>({"btn-disabled":r(h),"btn-loading":r(h)})]),ce("submit",oe,Et(C)),b(be,oe)},ie=be=>{var oe=w3(),Q=j(oe);{var ne=we=>{var Re=y3(),Me=I(Re),Xe=y(I(Me)),Be=I(Xe);B(()=>Ee(Be,r(_))),b(we,Re)};X(Q,we=>{r(_)&&we(ne)})}var ye=y(Q,2),Se=I(ye);Ne(Se,{class:"form-field required",name:"otpId",children:Ae,$$slots:{default:(we,Re)=>{const Me=ae(()=>Re.uniqueId);var Xe=_3(),Be=j(Xe),Pe=y(Be,2);B(()=>{Y(Be,"for",r(Me)),Y(Pe,"id",r(Me)),Un(Pe,r(g)),Y(Pe,"placeholder",r(k))}),ce("change",Pe,He=>{x(g,He.target.value||r(k)),He.target.value=r(g)}),b(we,Xe)}}});var Ie=y(Se,2);Ne(Ie,{class:"form-field required",name:"password",children:Ae,$$slots:{default:(we,Re)=>{const Me=ae(()=>Re.uniqueId);var Xe=x3(),Be=j(Xe),Pe=y(Be,2);Gi(Pe,!0),B(()=>{Y(Be,"for",r(Me)),Y(Pe,"id",r(Me))}),_t(Pe,()=>r(E),He=>x(E,He)),b(we,Xe)}}});var Le=y(Ie,2);let je;var Te=y(ye,2),Ze=I(Te);B(we=>{je=Ue(Le,1,"btn btn-lg btn-block btn-next",null,je,we),Ze.disabled=r(p)},[()=>({"btn-disabled":r(p),"btn-loading":r(p)})]),ce("submit",ye,Et(w)),ce("click",Ze,()=>{x(g,"")}),b(be,oe)};X(he,be=>{r(g)?be(ie,!1):be(xe)})}b(ue,me)};X(ve,ue=>{r(c),A(()=>r(c).otp.enabled)&&ue(Oe)},!0)}b(_e,ke)};X(te,_e=>{r(c),r(m),A(()=>r(c).password.enabled&&!r(m))?_e(de):_e(pe,!1)},!0)}b(J,W)};X(U,J=>{r(v)?J(H):J(z,!1)})}b($,P)},$$slots:{default:!0}}),Je(),i()}function dn(n){if(!n)throw Error("Parameter args is required");if(!n.component==!n.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(n.component&&(n.asyncComponent=()=>Promise.resolve(n.component)),typeof n.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(n.conditions){Array.isArray(n.conditions)||(n.conditions=[n.conditions]);for(let t=0;t<n.conditions.length;t++)if(!n.conditions[t]||typeof n.conditions[t]!="function")throw Error("Invalid parameter conditions["+t+"]")}return n.loadingComponent&&(n.asyncComponent.loading=n.loadingComponent,n.asyncComponent.loadingParams=n.loadingParams||void 0),{component:n.asyncComponent,userData:n.userData,conditions:n.conditions&&n.conditions.length?n.conditions:void 0,props:n.props&&Object.keys(n.props).length?n.props:{},_sveltesparouter:!0}}const T3={"/pbinstal/:token":dn({asyncComponent:()=>Wt(()=>import("./PageInstaller-B84PYZ14.js"),[],import.meta.url),conditions:[n=>n.params.token&&!kc(n.params.token)],userData:{showAppSidebar:!1}}),"/login":dn({component:S3,conditions:[n=>!ze.authStore.isValid],userData:{showAppSidebar:!1}}),"/request-password-reset":dn({asyncComponent:()=>Wt(()=>import("./PageSuperuserRequestPasswordReset-BySMoqzi.js"),[],import.meta.url),conditions:[n=>!ze.authStore.isValid],userData:{showAppSidebar:!1}}),"/confirm-password-reset/:token":dn({asyncComponent:()=>Wt(()=>import("./PageSuperuserConfirmPasswordReset-Bxbk74gO.js"),[],import.meta.url),conditions:[n=>!ze.authStore.isValid],userData:{showAppSidebar:!1}}),"/collections":dn({component:KN,conditions:[n=>ze.authStore.isValid],userData:{showAppSidebar:!0}}),"/logs":dn({component:P$,conditions:[n=>ze.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings":dn({component:WR,conditions:[n=>ze.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/mail":dn({component:Qq,conditions:[n=>ze.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/storage":dn({component:c3,conditions:[n=>ze.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/export-collections":dn({component:JF,conditions:[n=>ze.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/import-collections":dn({component:Pq,conditions:[n=>ze.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/backups":dn({component:LF,conditions:[n=>ze.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/crons":dn({component:jF,conditions:[n=>ze.authStore.isValid],userData:{showAppSidebar:!0}}),"/users/confirm-password-reset/:token":dn({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmPasswordReset-dWlllM8n.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-password-reset/:token":dn({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmPasswordReset-dWlllM8n.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/users/confirm-verification/:token":dn({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmVerification-Bqozif-z.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-verification/:token":dn({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmVerification-Bqozif-z.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/users/confirm-email-change/:token":dn({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmEmailChange-BAYRXStK.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-email-change/:token":dn({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmEmailChange-BAYRXStK.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/oauth2-redirect-success":dn({asyncComponent:()=>Wt(()=>import("./PageOAuth2RedirectSuccess-C9-o0AZX.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/oauth2-redirect-failure":dn({asyncComponent:()=>Wt(()=>import("./PageOAuth2RedirectFailure-7Ilea_5x.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"*":dn({component:k0,userData:{showAppSidebar:!1}})};function $3(n,e,t,i){var a;e(!r(t)),(a=window.localStorage)==null||a.setItem(i,r(t)?"dark":"light")}function I3(){ze.logout()}var C3=T('<link rel="shortcut icon" type="image/png"/>'),E3=T('<div class="txt-ellipsis current-superuser svelte-1ahgi3o"> </div> <hr/> <a href="/collections?collection=_superusers" class="dropdown-item closable" role="menuitem"><i class="ri-shield-user-line" aria-hidden="true"></i> <span class="txt">Manage superusers</span></a> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-logout-circle-line" aria-hidden="true"></i> <span class="txt">Logout</span></button>',1),O3=T('<i class="ri-sun-line" aria-hidden="true"></i>'),D3=T('<i class="ri-moon-line" aria-hidden="true"></i>'),P3=T('<aside class="app-sidebar"><a href="/" class="logo logo-sm"><img alt="PocketBase logo" width="40" height="40"/></a> <nav class="main-menu"><a href="/collections" class="menu-item" aria-label="Collections"><i class="ri-database-2-line"></i></a> <a href="/logs" class="menu-item" aria-label="Logs"><i class="ri-line-chart-line"></i></a> <a href="/settings" class="menu-item" aria-label="Settings"><i class="ri-tools-line"></i></a></nav> <div tabindex="0" role="button" aria-label="Logged superuser menu" class="thumb thumb-circle link-hint"><span class="initials"> </span> <!></div> <button class="btn btn-transparent btn-sm m-t-10" title="Toggle dark theme"><!></button></aside>'),M3=T('<div class="tinymce-preloader hidden"><!></div>'),A3=T('<div class="app-layout"><!> <div class="app-body"><!> <!></div></div> <!> <!>',1);function L3(n,e){Ke(e,!0);const[t,i]=Rt(),a=()=>It(wc,"$superuser",t),s=()=>It(On,"$pageTitle",t),o=()=>It(Ju,"$appName",t);let l,c=An(!1);const u="pb_ui_theme";let d=An(!1);function f(L){x(d,!!L);try{const N=document.documentElement;r(d)?N.classList.add("dark"):N.classList.remove("dark")}catch{}}function h(){var V;const L=(V=window.localStorage)==null?void 0:V.getItem(u);if(L==="dark"||L==="light"){f(L==="dark");return}const N=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;f(N)}let p=An(!1);ys(()=>{var L;(L=a())!=null&&L.id&&g()});function v(L){var N,V,R,U;((N=L==null?void 0:L.detail)==null?void 0:N.location)!==l&&(x(c,!!((R=(V=L==null?void 0:L.detail)==null?void 0:V.userData)!=null&&R.showAppSidebar)),l=(U=L==null?void 0:L.detail)==null?void 0:U.location,ni(On,""),ln({}),dg())}function m(){ws("/")}async function g(){var L,N,V;if((L=a())!=null&&L.id)try{const R=await ze.settings.getAll({$cancelKey:"initialAppSettings"});ni(Ju,((N=R==null?void 0:R.meta)==null?void 0:N.appName)||""),ni(Vo,!!((V=R==null?void 0:R.meta)!=null&&V.hideControls))}catch(R){R!=null&&R.isAbort||console.warn("Failed to load app settings.",R)}}vn(()=>{h()});var k=A3();Wy(L=>{var N=rt(),V=j(N);{var R=U=>{var H=C3();B(()=>Y(H,"href","./images/favicon/favicon_prod.png")),b(U,H)};X(V,U=>{window.location.protocol=="https:"&&U(R)})}B(U=>Om.title=U,[()=>q.joinNonEmpty([s(),o(),"PocketBase"]," - ",!1)]),b(L,N)});var _=j(k),E=I(_);{var D=L=>{var N=P3(),V=I(N),R=I(V);nt(V,ue=>Lt==null?void 0:Lt(ue));var U=y(V,2),H=I(U);nt(H,ue=>Lt==null?void 0:Lt(ue)),nt(H,(ue,me)=>Gt==null?void 0:Gt(ue,me),()=>({path:"/collections/?.*",className:"current-route"})),nt(H,(ue,me)=>le==null?void 0:le(ue,me),()=>({text:"Collections",position:"right"}));var z=y(H,2);nt(z,ue=>Lt==null?void 0:Lt(ue)),nt(z,(ue,me)=>Gt==null?void 0:Gt(ue,me),()=>({path:"/logs/?.*",className:"current-route"})),nt(z,(ue,me)=>le==null?void 0:le(ue,me),()=>({text:"Logs",position:"right"}));var J=y(z,2);nt(J,ue=>Lt==null?void 0:Lt(ue)),nt(J,(ue,me)=>Gt==null?void 0:Gt(ue,me),()=>({path:"/settings/?.*",className:"current-route"})),nt(J,(ue,me)=>le==null?void 0:le(ue,me),()=>({text:"Settings",position:"right"}));var W=y(U,2),te=I(W),de=I(te),pe=y(te,2);ii(pe,{class:"dropdown dropdown-nowrap dropdown-upside dropdown-left",children:(ue,me)=>{var he=E3(),xe=j(he),ie=I(xe),be=y(xe,4);nt(be,Q=>Lt==null?void 0:Lt(Q));var oe=y(be,2);oe.__click=[I3],B(()=>{Y(xe,"title",a().email),Ee(ie,a().email)}),b(ue,he)},$$slots:{default:!0}});var _e=y(W,2);_e.__click=[$3,f,d,u];var ke=I(_e);{var ve=ue=>{var me=O3();b(ue,me)},Oe=ue=>{var me=D3();b(ue,me)};X(ke,ue=>{r(d)?ue(ve):ue(Oe,!1)})}B(ue=>{Y(R,"src","./images/logo.svg"),Y(W,"title",a().email),Ee(de,ue),Y(_e,"aria-pressed",r(d))},[()=>q.getInitials(a().email)]),b(L,N)};X(E,L=>{var N;(N=a())!=null&&N.id&&r(c)&&L(D)})}var S=y(E,2),C=I(S);y0(C,{get routes(){return T3},$$events:{routeLoading:v,conditionsFailed:m}});var w=y(C,2);J1(w,{});var $=y(_,2);M1($,{});var O=y($,2);{var P=L=>{var N=M3(),V=I(N);{let R=Xr(()=>q.defaultEditorOptions());qd(V,{get conf(){return r(R)},$$events:{init:()=>{x(p,!0)}}})}b(L,N)};X(O,L=>{r(c)&&!r(p)&&L(P)})}b(n,k),Je(),i()}$d(["click"]);Yy(L3,{target:document.getElementById("app")});export{vd as $,Je as A,jn as B,bo as C,dt as D,Y as E,f3 as F,ae as G,X as H,nt as I,Gi as J,Lt as K,Ee as L,F as M,bn as N,q as O,rt as P,Uo as Q,kc as R,ni as S,vn as T,Rt as U,On as V,Ut as W,xt as X,It as Y,ai as Z,qL as _,re as a,bt as a0,Nt as a1,A as a2,mr as a3,wi as a4,r_ as a5,z3 as a6,lT as a7,F3 as a8,le as a9,qt as aa,ze as b,br as c,r as d,ht as e,T as f,us as g,j as h,Ge as i,y as j,I as k,se as l,M as m,Ne as n,Ae as o,Ke as p,gt as q,ws as r,x as s,Nn as t,B as u,_t as v,b as w,Ue as x,ce as y,Et as z};
