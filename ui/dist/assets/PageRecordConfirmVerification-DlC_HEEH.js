import{p as U,a as W,d as n,m as g,s as t,Q as E,g as V,l as X,R as H,M as Y,e as Z,i as $,F as ee,P as F,h as b,H as h,w as a,f as u,A as te,j as T,y as x,u as ae,x as se,b as ne}from"./index-DnvcJ3JO.js";var le=u('<div class="txt-center"><div class="loader loader-lg"><em>Please wait...</em></div></div>'),oe=u('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Successfully verified email address.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),ie=u('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Please check your email for the new verification link.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),re=u('<button type="button"><span class="txt">Resend</span></button>'),ce=u('<button type="button" class="btn btn-transparent btn-block">Close</button>'),de=u('<div class="alert alert-danger"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content txt-bold"><p>Invalid or expired verification token.</p></div></div> <!>',1);function fe(M,j){U(j,!1);const q=g();let l=W(j,"params",8),C=g(!1),y=g(!1),P=g(!1),p=g(!1);Q();async function Q(){var _,s;if(n(y))return;t(y,!0);const e=new E("../");try{const o=V((_=l())==null?void 0:_.token);await e.collection(o.collectionId).confirmVerification((s=l())==null?void 0:s.token),t(C,!0)}catch{t(C,!1)}t(y,!1)}async function S(){var s,o;const e=V((s=l())==null?void 0:s.token);if(n(p)||!e.collectionId||!e.email)return;t(p,!0);const _=new E("../");try{const r=V((o=l())==null?void 0:o.token);await _.collection(r.collectionId).requestVerification(r.email),t(P,!0)}catch(r){ne.error(r),t(P,!1)}t(p,!1)}X(()=>(Y(l()),H),()=>{var e;t(q,((e=l())==null?void 0:e.token)&&H(l().token))}),Z(),$(),ee(M,{nobranding:!0,children:(e,_)=>{var s=F(),o=b(s);{var r=c=>{var w=le();a(c,w)},z=c=>{var w=F(),B=b(w);{var D=d=>{var m=oe(),R=T(b(m),2);x("click",R,()=>window.close()),a(d,m)},G=d=>{var m=F(),R=b(m);{var J=v=>{var k=ie(),I=T(b(k),2);x("click",I,()=>window.close()),a(v,k)},K=v=>{var k=de(),I=T(b(k),2);{var L=f=>{var i=re();let A;ae(O=>{A=se(i,1,"btn btn-transparent btn-block",null,A,O),i.disabled=n(p)},[()=>({"btn-loading":n(p)})]),x("click",i,S),a(f,i)},N=f=>{var i=ce();x("click",i,()=>window.close()),a(f,i)};h(I,f=>{n(q)?f(L):f(N,!1)})}a(v,k)};h(R,v=>{n(P)?v(J):v(K,!1)},!0)}a(d,m)};h(B,d=>{n(C)?d(D):d(G,!1)},!0)}a(c,w)};h(o,c=>{n(y)?c(r):c(z,!1)})}a(e,s)},$$slots:{default:!0}}),te()}export{fe as default};
