import{p as B,a as K,l as U,M as V,e as X,i as Z,F as ee,P as ae,h as p,H as L,d as e,m as v,w as d,f as b,j as a,x as N,k as g,n as S,o as T,J as se,u as h,v as j,y as te,z as re,s as c,Q as oe,g as ne,b as le,O as ie,L as de,D as y,E as z,G as ce}from"./index-Ci_bBm9A.js";var ue=b('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Successfully changed the user password.</p> <p>You can now sign in with your new password.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),fe=b("for <strong> </strong>",1),pe=b('<label>New password</label> <input type="password" required/>',1),ve=b('<label>New password confirm</label> <input type="password" required/>',1),be=b('<form><div class="content txt-center m-b-base"><h5>Reset your user password <!></h5></div> <!> <!> <button type="submit"><span class="txt">Set new password</span></button></form>');function _e(E,I){B(I,!1);const k=v();let m=K(I,"params",8),P=v(""),q=v(""),u=v(!1),R=v(!1);async function G(){if(e(u))return;c(u,!0);const x=new oe("../");try{const _=ne(m()?.token);await x.collection(_.collectionId).confirmPasswordReset(m()?.token,e(P),e(q)),c(R,!0)}catch(_){le.error(_)}c(u,!1)}U(()=>V(m()),()=>{c(k,ie.getJWTPayload(m()?.token).email||"")}),X(),Z(),ee(E,{nobranding:!0,children:(x,_)=>{var $=ae(),M=p($);{var O=o=>{var n=ue(),w=a(p(n),2);N("click",w,()=>window.close()),d(o,n)},Q=o=>{var n=be(),w=g(n),W=g(w),Y=a(g(W));{var A=s=>{var l=fe(),t=a(p(l)),r=g(t);h(()=>de(r,e(k))),d(s,l)};L(Y,s=>{e(k)&&s(A)})}var F=a(w,2);S(F,{class:"form-field required",name:"password",children:T,$$slots:{default:(s,l)=>{const t=z(()=>l.uniqueId);var r=pe(),f=p(r),i=a(f,2);se(i,!0),h(()=>{y(f,"for",e(t)),y(i,"id",e(t))}),j(i,()=>e(P),C=>c(P,C)),d(s,r)}}});var D=a(F,2);S(D,{class:"form-field required",name:"passwordConfirm",children:T,$$slots:{default:(s,l)=>{const t=z(()=>l.uniqueId);var r=ve(),f=p(r),i=a(f,2);h(()=>{y(f,"for",e(t)),y(i,"id",e(t))}),j(i,()=>e(q),C=>c(q,C)),d(s,r)}}});var H=a(D,2);let J;h(()=>{J=ce(H,1,"btn btn-lg btn-block",null,J,{"btn-loading":e(u)}),H.disabled=e(u)}),N("submit",n,te(G)),d(o,n)};L(M,o=>{e(R)?o(O):o(Q,!1)})}d(x,$)},$$slots:{default:!0}}),re()}export{_e as default};
