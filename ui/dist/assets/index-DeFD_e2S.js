const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FilterAutocompleteInput-DvDaN08m.js","./index-Bo9OXKWE.js","./ListApiDocs-CdCDoLh_.js","./FieldsQueryParam-3Dv4rQxh.js","./ListApiDocs-ByASLUZu.css","./ViewApiDocs-BoPWMQQq.js","./CreateApiDocs-B-p1CnhH.js","./UpdateApiDocs-ebrK1J7G.js","./AuthMethodsDocs-CixnZU0R.js","./AuthWithPasswordDocs-C5Dr5woV.js","./AuthWithOAuth2Docs-DvdMkKQ1.js","./AuthWithOtpDocs-BltZ7zxU.js","./AuthRefreshDocs-C_m4VxnQ.js","./CodeEditor-Bk8QeLSV.js","./Leaflet-DjUOP05d.js","./Leaflet-CW4hakYg.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();const Dv=!1;var us=Array.isArray,ib=Array.prototype.indexOf,Uu=Array.from,cl=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,Pv=Object.getOwnPropertyDescriptors,rb=Object.prototype,ab=Array.prototype,Bu=Object.getPrototypeOf,zd=Object.isExtensible;function Va(n){return typeof n=="function"}const hi=()=>{};function sb(n){return typeof n?.then=="function"}function ob(n){return n()}function Hs(n){for(var e=0;e<n.length;e++)n[e]()}function lb(){var n,e,t=new Promise((i,a)=>{n=i,e=a});return{promise:t,resolve:n,reject:e}}function Ya(n,e){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const t=[];for(const i of n)if(t.push(i),t.length===e)break;return t}const mi=2,Hu=4,Cl=8,Sa=16,Ir=32,Ta=64,Mv=128,Ii=256,ul=512,Dn=1024,Ei=2048,Cr=4096,Vi=8192,$a=16384,El=32768,ao=65536,jd=1<<17,Av=1<<18,so=1<<19,Lv=1<<20,Gc=1<<21,Wu=1<<22,pa=1<<23,sr=Symbol("$state"),Nv=Symbol("legacy props"),cb=Symbol(""),Yu=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ub(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Ce(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function Ol(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function db(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function fb(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function hb(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vb(n){throw new Error("https://svelte.dev/e/effect_orphan")}function mb(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function pb(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function gb(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function bb(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function yb(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function _b(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Dl=1,Pl=2,Rv=4,xb=8,wb=16,kb=1,Sb=2,Fv=4,Tb=8,$b=16,Ib=1,Cb=2,Eb=4,Ob=1,Db=2,fn=Symbol(),Pb="http://www.w3.org/1999/xhtml",Mb="@attach";function Ab(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let Lb=!1;function qv(n){return n===this.v}function Ml(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Nb(n,e){return n!==e}function zv(n){return!Ml(n,this.v)}let ds=!1,Rb=!1;function Fb(){ds=!0}let Jt=null;function es(n){Jt=n}function Ue(n,e=!1,t){Jt={p:Jt,c:null,e:null,s:n,x:null,l:ds&&!e?{s:null,u:null,$:[]}:null}}function Be(n){var e=Jt,t=e.e;if(t!==null){e.e=null;for(var i of t)im(i)}return n!==void 0&&(e.x=n),Jt=e.p,n??{}}function Ia(){return!ds||Jt!==null&&Jt.l===null}const qb=new WeakMap;function zb(n){var e=Nt;if(e===null)return Bt.f|=pa,n;if((e.f&El)===0){if((e.f&Mv)===0)throw!e.parent&&n instanceof Error&&jv(n),n;e.b.error(n)}else Ku(n,e)}function Ku(n,e){for(;e!==null;){if((e.f&Mv)!==0)try{e.b.error(n);return}catch(t){n=t}e=e.parent}throw n instanceof Error&&jv(n),n}function jv(n){const e=qb.get(n);e&&(cl(n,"message",{value:e.message}),cl(n,"stack",{value:e.stack}))}let Ws=[],Xc=[];function Vv(){var n=Ws;Ws=[],Hs(n)}function jb(){var n=Xc;Xc=[],Hs(n)}function Yr(n){Ws.length===0&&queueMicrotask(Vv),Ws.push(n)}function Vb(){Ws.length>0&&Vv(),Xc.length>0&&jb()}function Ub(){for(var n=Nt.b;n!==null&&!n.has_pending_snippet();)n=n.parent;return n===null&&ub(),n}function oo(n){var e=mi|Ei,t=Bt!==null&&(Bt.f&mi)!==0?Bt:null;return Nt===null||t!==null&&(t.f&Ii)!==0?e|=Ii:Nt.f|=so,{ctx:Jt,deps:null,effects:null,equals:qv,f:e,fn:n,reactions:null,rv:0,v:fn,wv:0,parent:t??Nt,ac:null}}function Bb(n,e){let t=Nt;t===null&&db();var i=t.b,a=void 0,s=Tr(fn),o=null,l=!Bt;return ey(()=>{try{var c=n();o&&Promise.resolve(c).catch(()=>{})}catch(b){c=Promise.reject(b)}var u=()=>c;a=o?.then(u,u)??Promise.resolve(c),o=a;var d=Xt,f=i.pending;l&&(i.update_pending_count(1),f||d.increment());const h=(b,v=void 0)=>{o=null,f||d.activate(),v?v!==Yu&&(s.f|=pa,kr(s,v)):((s.f&pa)!==0&&(s.f^=pa),kr(s,b)),l&&(i.update_pending_count(-1),f||d.decrement()),Wv()};if(a.then(h,b=>h(null,b||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(c=>{function u(d){function f(){d===a?c(s):u(a)}d.then(f,f)}u(a)})}function ga(n){const e=oo(n);return um(e),e}function ie(n){const e=oo(n);return e.equals=zv,e}function Uv(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Oi(e[t])}}function Hb(n){for(var e=n.parent;e!==null;){if((e.f&mi)===0)return e;e=e.parent}return null}function Zu(n){var e,t=Nt;Pi(Hb(n));try{Uv(n),e=vm(n)}finally{Pi(t)}return e}function Bv(n){var e=Zu(n);if(n.equals(e)||(n.v=e,n.wv=fm()),!Ea){var t=(qr||(n.f&Ii)!==0)&&n.deps!==null?Cr:Dn;Kn(n,t)}}function Hv(n,e,t){const i=Ia()?oo:ie;if(e.length===0){t(n.map(i));return}var a=Xt,s=Nt,o=Wb(),l=Ub();Promise.all(e.map(c=>Bb(c))).then(c=>{a?.activate(),o();try{t([...n.map(i),...c])}catch(u){(s.f&$a)===0&&Ku(u,s)}a?.deactivate(),Wv()}).catch(c=>{l.error(c)})}function Wb(){var n=Nt,e=Bt,t=Jt,i=Xt;return function(){Pi(n),Di(e),es(t),i?.activate()}}function Wv(){Pi(null),Di(null),es(null)}const sc=new Set;let Xt=null,Go=null,Vd=new Set,dl=[];function Yv(){const n=dl.shift();dl.length>0&&queueMicrotask(Yv),n()}let wa=[],Al=null,Qc=!1,Xo=!1;class ts{current=new Map;#l=new Map;#r=new Set;#e=0;#c=null;#u=!1;#n=[];#a=[];#i=[];#t=[];#s=[];#d=[];#f=[];skipped_effects=new Set;process(e){wa=[],Go=null;for(const a of e)this.#v(a);if(this.#n.length===0&&this.#e===0){this.#h();var t=this.#i,i=this.#t;this.#i=[],this.#t=[],this.#s=[],Go=Xt,Xt=null,Ud(t),Ud(i),Xt===null?Xt=this:sc.delete(this),this.#c?.resolve()}else this.#o(this.#i),this.#o(this.#t),this.#o(this.#s);for(const a of this.#n)ya(a);for(const a of this.#a)ya(a);this.#n=[],this.#a=[]}#v(e){e.f^=Dn;for(var t=e.first;t!==null;){var i=t.f,a=(i&(Ir|Ta))!==0,s=a&&(i&Dn)!==0,o=s||(i&Vi)!==0||this.skipped_effects.has(t);if(!o&&t.fn!==null){if(a)t.f^=Dn;else if((i&Hu)!==0)this.#t.push(t);else if((i&Dn)===0)if((i&Wu)!==0){var l=t.b?.pending?this.#a:this.#n;l.push(t)}else co(t)&&((t.f&Sa)!==0&&this.#s.push(t),ya(t));var c=t.first;if(c!==null){t=c;continue}}var u=t.parent;for(t=t.next;t===null&&u!==null;)t=u.next,u=u.parent}}#o(e){for(const t of e)((t.f&Ei)!==0?this.#d:this.#f).push(t),Kn(t,Dn);e.length=0}capture(e,t){this.#l.has(e)||this.#l.set(e,t),this.current.set(e,e.v)}activate(){Xt=this}deactivate(){Xt=null,Go=null;for(const e of Vd)if(Vd.delete(e),e(),Xt!==null)break}neuter(){this.#u=!0}flush(){wa.length>0?Zv():this.#h(),Xt===this&&(this.#e===0&&sc.delete(this),this.deactivate())}#h(){if(!this.#u)for(const e of this.#r)e();this.#r.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const e of this.#d)Kn(e,Ei),ns(e);for(const e of this.#f)Kn(e,Cr),ns(e);this.#i=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(e){this.#r.add(e)}settled(){return(this.#c??=lb()).promise}static ensure(){if(Xt===null){const e=Xt=new ts;sc.add(Xt),Xo||ts.enqueue(()=>{Xt===e&&e.flush()})}return Xt}static enqueue(e){dl.length===0&&queueMicrotask(Yv),dl.unshift(e)}}function Kv(n){var e=Xo;Xo=!0;try{for(var t;;){if(Vb(),wa.length===0&&(Xt?.flush(),wa.length===0))return Al=null,t;Zv()}}finally{Xo=e}}function Zv(){var n=Ka;Qc=!0;try{var e=0;for(Wd(!0);wa.length>0;){var t=ts.ensure();if(e++>1e3){var i,a;Yb()}t.process(wa),jr.clear()}}finally{Qc=!1,Wd(n),Al=null}}function Yb(){try{mb()}catch(n){Ku(n,Al)}}let ua=null;function Ud(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var i=n[t++];if((i.f&($a|Vi))===0&&co(i)&&(ua=[],ya(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?om(i):i.fn=null),ua?.length>0)){jr.clear();for(const a of ua)ya(a);ua=[]}}ua=null}}function ns(n){for(var e=Al=n;e.parent!==null;){e=e.parent;var t=e.f;if(Qc&&e===Nt&&(t&Sa)!==0)return;if((t&(Ta|Ir))!==0){if((t&Dn)===0)return;e.f^=Dn}}wa.push(e)}const jr=new Map;function Tr(n,e){var t={f:0,v:n,reactions:null,equals:qv,rv:0,wv:0};return t}function Pr(n,e){const t=Tr(n);return um(t),t}function P(n,e=!1,t=!0){const i=Tr(n);return e||(i.equals=zv),ds&&t&&Jt!==null&&Jt.l!==null&&(Jt.l.s??=[]).push(i),i}function ut(n,e){return _(n,M(()=>r(n))),e}function _(n,e,t=!1){Bt!==null&&(!ir||(Bt.f&jd)!==0)&&Ia()&&(Bt.f&(mi|Sa|Wu|jd))!==0&&!Sr?.includes(n)&&_b();let i=t?Ba(e):e;return kr(n,i)}function kr(n,e){if(!n.equals(e)){var t=n.v;Ea?jr.set(n,e):jr.set(n,t),n.v=e;var i=ts.ensure();i.capture(n,t),(n.f&mi)!==0&&((n.f&Ei)!==0&&Zu(n),Kn(n,(n.f&Ii)===0?Dn:Cr)),n.wv=fm(),Jv(n,Ei),Ia()&&Nt!==null&&(Nt.f&Dn)!==0&&(Nt.f&(Ir|Ta))===0&&(Si===null?iy([n]):Si.push(n))}return e}function _r(n,e=1){var t=r(n),i=e===1?t++:t--;return _(n,t),i}function oc(n){_(n,n.v+1)}function Jv(n,e){var t=n.reactions;if(t!==null)for(var i=Ia(),a=t.length,s=0;s<a;s++){var o=t[s],l=o.f;if(!(!i&&o===Nt)){var c=(l&Ei)===0;c&&Kn(o,e),(l&mi)!==0?Jv(o,Cr):c&&((l&Sa)!==0&&ua!==null&&ua.push(o),ns(o))}}}function Ba(n){if(typeof n!="object"||n===null||sr in n)return n;const e=Bu(n);if(e!==rb&&e!==ab)return n;var t=new Map,i=us(n),a=Pr(0),s=ba,o=l=>{if(ba===s)return l();var c=Bt,u=ba;Di(null),Kd(s);var d=l();return Di(c),Kd(u),d};return i&&t.set("length",Pr(n.length)),new Proxy(n,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&bb();var d=t.get(c);return d===void 0?d=o(()=>{var f=Pr(u.value);return t.set(c,f),f}):_(d,u.value,!0),!0},deleteProperty(l,c){var u=t.get(c);if(u===void 0){if(c in l){const d=o(()=>Pr(fn));t.set(c,d),oc(a)}}else _(u,fn),oc(a);return!0},get(l,c,u){if(c===sr)return n;var d=t.get(c),f=c in l;if(d===void 0&&(!f||wr(l,c)?.writable)&&(d=o(()=>{var b=Ba(f?l[c]:fn),v=Pr(b);return v}),t.set(c,d)),d!==void 0){var h=r(d);return h===fn?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=t.get(c);d&&(u.value=r(d))}else if(u===void 0){var f=t.get(c),h=f?.v;if(f!==void 0&&h!==fn)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===sr)return!0;var u=t.get(c),d=u!==void 0&&u.v!==fn||Reflect.has(l,c);if(u!==void 0||Nt!==null&&(!d||wr(l,c)?.writable)){u===void 0&&(u=o(()=>{var h=d?Ba(l[c]):fn,b=Pr(h);return b}),t.set(c,u));var f=r(u);if(f===fn)return!1}return d},set(l,c,u,d){var f=t.get(c),h=c in l;if(i&&c==="length")for(var b=u;b<f.v;b+=1){var v=t.get(b+"");v!==void 0?_(v,fn):b in l&&(v=o(()=>Pr(fn)),t.set(b+"",v))}if(f===void 0)(!h||wr(l,c)?.writable)&&(f=o(()=>Pr(void 0)),_(f,Ba(u)),t.set(c,f));else{h=f.v!==fn;var g=o(()=>Ba(u));_(f,g)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m?.set&&m.set.call(d,u),!h){if(i&&typeof c=="string"){var k=t.get("length"),x=Number(c);Number.isInteger(x)&&x>=k.v&&_(k,x+1)}oc(a)}return!0},ownKeys(l){r(a);var c=Reflect.ownKeys(l).filter(f=>{var h=t.get(f);return h===void 0||h.v!==fn});for(var[u,d]of t)d.v!==fn&&!(u in l)&&c.push(u);return c},setPrototypeOf(){yb()}})}function Bd(n){try{if(n!==null&&typeof n=="object"&&sr in n)return n[sr]}catch{}return n}function Gv(n,e){return Object.is(Bd(n),Bd(e))}var xr,Xv,Qv,em,tm;function Kb(){if(xr===void 0){xr=window,Xv=document,Qv=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;em=wr(e,"firstChild").get,tm=wr(e,"nextSibling").get,zd(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),zd(t)&&(t.__t=void 0)}}function Er(n=""){return document.createTextNode(n)}function Fr(n){return em.call(n)}function Ll(n){return tm.call(n)}function T(n,e){return Fr(n)}function q(n,e){{var t=Fr(n);return t instanceof Comment&&t.data===""?Ll(t):t}}function y(n,e=1,t=!1){let i=n;for(;e--;)i=Ll(i);return i}function Zb(n){n.textContent=""}function Nl(){return!1}function Ui(n,e){if(e){const t=document.body;n.autofocus=!0,Yr(()=>{document.activeElement===t&&n.focus()})}}let Hd=!1;function Jb(){Hd||(Hd=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const e of n.target.elements)e.__on_r?.()})},{capture:!0}))}function fs(n){var e=Bt,t=Nt;Di(null),Pi(null);try{return n()}finally{Di(e),Pi(t)}}function Rl(n,e,t,i=t){n.addEventListener(e,()=>fs(t));const a=n.__on_r;a?n.__on_r=()=>{a(),i(!0)}:n.__on_r=()=>i(!0),Jb()}function nm(n){Nt===null&&Bt===null&&vb(),Bt!==null&&(Bt.f&Ii)!==0&&Nt===null&&hb(),Ea&&fb()}function Gb(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function dr(n,e,t,i=!0){var a=Nt;a!==null&&(a.f&Vi)!==0&&(n|=Vi);var s={ctx:Jt,deps:null,nodes_start:null,nodes_end:null,f:n|Ei,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{ya(s),s.f|=El}catch(c){throw Oi(s),c}else e!==null&&ns(s);if(i){var o=s;if(t&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&so)===0&&(o=o.first),o!==null&&(o.parent=a,a!==null&&Gb(o,a),Bt!==null&&(Bt.f&mi)!==0&&(n&Ta)===0)){var l=Bt;(l.effects??=[]).push(o)}}return s}function lo(n){const e=dr(Cl,null,!1);return Kn(e,Dn),e.teardown=n,e}function eu(n){nm();var e=Nt.f,t=!Bt&&(e&Ir)!==0&&(e&El)===0;if(t){var i=Jt;(i.e??=[]).push(n)}else return im(n)}function im(n){return dr(Hu|Lv,n,!1)}function Xb(n){return nm(),dr(Cl|Lv,n,!0)}function Qb(n){ts.ensure();const e=dr(Ta|so,n,!0);return(t={})=>new Promise(i=>{t.outro?Vr(e,()=>{Oi(e),i(void 0)}):(Oi(e),i(void 0))})}function Rt(n){return dr(Hu,n,!1)}function ne(n,e){var t=Jt,i={effect:null,ran:!1,deps:n};t.l.$.push(i),i.effect=Ca(()=>{n(),!i.ran&&(i.ran=!0,M(e))})}function ft(){var n=Jt;Ca(()=>{for(var e of n.l.$){e.deps();var t=e.effect;(t.f&Dn)!==0&&Kn(t,Cr),co(t)&&ya(t),e.ran=!1}})}function ey(n){return dr(Wu|so,n,!0)}function Ca(n,e=0){return dr(Cl|e,n,!0)}function z(n,e=[],t=[]){Hv(e,t,i=>{dr(Cl,()=>n(...i.map(r)),!0)})}function Qr(n,e=0){var t=dr(Sa|e,n,!0);return t}function cr(n,e=!0){return dr(Ir|so,n,!0,e)}function rm(n){var e=n.teardown;if(e!==null){const t=Ea,i=Bt;Yd(!0),Di(null);try{e.call(null)}finally{Yd(t),Di(i)}}}function am(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const a=t.ac;a!==null&&fs(()=>{a.abort(Yu)});var i=t.next;(t.f&Ta)!==0?t.parent=null:Oi(t,e),t=i}}function ty(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&Ir)===0&&Oi(e),e=t}}function Oi(n,e=!0){var t=!1;(e||(n.f&Av)!==0)&&n.nodes_start!==null&&n.nodes_end!==null&&(sm(n.nodes_start,n.nodes_end),t=!0),am(n,e&&!t),fl(n,0),Kn(n,$a);var i=n.transitions;if(i!==null)for(const s of i)s.stop();rm(n);var a=n.parent;a!==null&&a.first!==null&&om(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function sm(n,e){for(;n!==null;){var t=n===e?null:Ll(n);n.remove(),n=t}}function om(n){var e=n.parent,t=n.prev,i=n.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===n&&(e.first=i),e.last===n&&(e.last=t))}function Vr(n,e){var t=[];Ju(n,t,!0),lm(t,()=>{Oi(n),e&&e()})}function lm(n,e){var t=n.length;if(t>0){var i=()=>--t||e();for(var a of n)a.out(i)}else e()}function Ju(n,e,t){if((n.f&Vi)===0){if(n.f^=Vi,n.transitions!==null)for(const o of n.transitions)(o.is_global||t)&&e.push(o);for(var i=n.first;i!==null;){var a=i.next,s=(i.f&ao)!==0||(i.f&Ir)!==0;Ju(i,e,s?t:!1),i=a}}}function Fl(n){cm(n,!0)}function cm(n,e){if((n.f&Vi)!==0){n.f^=Vi,(n.f&Dn)===0&&(Kn(n,Ei),ns(n));for(var t=n.first;t!==null;){var i=t.next,a=(t.f&ao)!==0||(t.f&Ir)!==0;cm(t,a?e:!1),t=i}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}let Ua=null;function ny(n){var e=Ua;try{if(Ua=new Set,M(n),e!==null)for(var t of Ua)e.add(t);return Ua}finally{Ua=e}}function fa(n){for(var e of ny(n))kr(e,e.v)}let Ka=!1;function Wd(n){Ka=n}let Ea=!1;function Yd(n){Ea=n}let Bt=null,ir=!1;function Di(n){Bt=n}let Nt=null;function Pi(n){Nt=n}let Sr=null;function um(n){Bt!==null&&(Sr===null?Sr=[n]:Sr.push(n))}let Wn=null,fi=0,Si=null;function iy(n){Si=n}let dm=1,Ys=0,ba=Ys;function Kd(n){ba=n}let qr=!1;function fm(){return++dm}function co(n){var e=n.f;if((e&Ei)!==0)return!0;if((e&Cr)!==0){var t=n.deps,i=(e&Ii)!==0;if(t!==null){var a,s,o=(e&ul)!==0,l=i&&Nt!==null&&!qr,c=t.length;if((o||l)&&(Nt===null||(Nt.f&$a)===0)){var u=n,d=u.parent;for(a=0;a<c;a++)s=t[a],(o||!s?.reactions?.includes(u))&&(s.reactions??=[]).push(u);o&&(u.f^=ul),l&&d!==null&&(d.f&Ii)===0&&(u.f^=Ii)}for(a=0;a<c;a++)if(s=t[a],co(s)&&Bv(s),s.wv>n.wv)return!0}(!i||Nt!==null&&!qr)&&Kn(n,Dn)}return!1}function hm(n,e,t=!0){var i=n.reactions;if(i!==null&&!Sr?.includes(n))for(var a=0;a<i.length;a++){var s=i[a];(s.f&mi)!==0?hm(s,e,!1):e===s&&(t?Kn(s,Ei):(s.f&Dn)!==0&&Kn(s,Cr),ns(s))}}function vm(n){var e=Wn,t=fi,i=Si,a=Bt,s=qr,o=Sr,l=Jt,c=ir,u=ba,d=n.f;Wn=null,fi=0,Si=null,qr=(d&Ii)!==0&&(ir||!Ka||Bt===null),Bt=(d&(Ir|Ta))===0?n:null,Sr=null,es(n.ctx),ir=!1,ba=++Ys,n.ac!==null&&(fs(()=>{n.ac.abort(Yu)}),n.ac=null);try{n.f|=Gc;var f=n.fn,h=f(),b=n.deps;if(Wn!==null){var v;if(fl(n,fi),b!==null&&fi>0)for(b.length=fi+Wn.length,v=0;v<Wn.length;v++)b[fi+v]=Wn[v];else n.deps=b=Wn;if(!qr||(d&mi)!==0&&n.reactions!==null)for(v=fi;v<b.length;v++)(b[v].reactions??=[]).push(n)}else b!==null&&fi<b.length&&(fl(n,fi),b.length=fi);if(Ia()&&Si!==null&&!ir&&b!==null&&(n.f&(mi|Cr|Ei))===0)for(v=0;v<Si.length;v++)hm(Si[v],n);return a!==null&&a!==n&&(Ys++,Si!==null&&(i===null?i=Si:i.push(...Si))),(n.f&pa)!==0&&(n.f^=pa),h}catch(g){return zb(g)}finally{n.f^=Gc,Wn=e,fi=t,Si=i,Bt=a,qr=s,Sr=o,es(l),ir=c,ba=u}}function ry(n,e){let t=e.reactions;if(t!==null){var i=ib.call(t,n);if(i!==-1){var a=t.length-1;a===0?t=e.reactions=null:(t[i]=t[a],t.pop())}}t===null&&(e.f&mi)!==0&&(Wn===null||!Wn.includes(e))&&(Kn(e,Cr),(e.f&(Ii|ul))===0&&(e.f^=ul),Uv(e),fl(e,0))}function fl(n,e){var t=n.deps;if(t!==null)for(var i=e;i<t.length;i++)ry(n,t[i])}function ya(n){var e=n.f;if((e&$a)===0){Kn(n,Dn);var t=Nt,i=Ka;Nt=n,Ka=!0;try{(e&Sa)!==0?ty(n):am(n),rm(n);var a=vm(n);n.teardown=typeof a=="function"?a:null,n.wv=dm;var s;Dv&&Rb&&(n.f&Ei)!==0&&n.deps}finally{Ka=i,Nt=t}}}async function Tn(){await Promise.resolve(),Kv()}function r(n){var e=n.f,t=(e&mi)!==0;if(Ua?.add(n),Bt!==null&&!ir){var i=Nt!==null&&(Nt.f&$a)!==0;if(!i&&!Sr?.includes(n)){var a=Bt.deps;if((Bt.f&Gc)!==0)n.rv<Ys&&(n.rv=Ys,Wn===null&&a!==null&&a[fi]===n?fi++:Wn===null?Wn=[n]:(!qr||!Wn.includes(n))&&Wn.push(n));else{(Bt.deps??=[]).push(n);var s=n.reactions;s===null?n.reactions=[Bt]:s.includes(Bt)||s.push(Bt)}}}else if(t&&n.deps===null&&n.effects===null){var o=n,l=o.parent;l!==null&&(l.f&Ii)===0&&(o.f^=Ii)}if(Ea){if(jr.has(n))return jr.get(n);if(t){o=n;var c=o.v;return((o.f&Dn)===0&&o.reactions!==null||mm(o))&&(c=Zu(o)),jr.set(o,c),c}}else t&&(o=n,co(o)&&Bv(o));if((n.f&pa)!==0)throw n.v;return n.v}function mm(n){if(n.v===fn)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(jr.has(e)||(e.f&mi)!==0&&mm(e))return!0;return!1}function M(n){var e=ir;try{return ir=!0,n()}finally{ir=e}}const ay=-7169;function Kn(n,e){n.f=n.f&ay|e}function R(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(sr in n)tu(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&sr in t&&tu(t)}}}function tu(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let i in n)try{tu(n[i],e)}catch{}const t=Bu(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=Pv(t);for(let a in i){const s=i[a].get;if(s)try{s.call(n)}catch{}}}}}function sy(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const oy=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ly(n){return oy.includes(n)}const cy={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function uy(n){return n=n.toLowerCase(),cy[n]??n}const dy=["touchstart","touchmove"];function fy(n){return dy.includes(n)}const pm=new Set,nu=new Set;function gm(n,e,t,i={}){function a(s){if(i.capture||Es.call(e,s),!s.cancelBubble)return fs(()=>t?.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Yr(()=>{e.addEventListener(n,a,i)}):e.addEventListener(n,a,i),a}function re(n,e,t,i,a){var s={capture:i,passive:a},o=gm(n,e,t,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&lo(()=>{e.removeEventListener(n,o,s)})}function bm(n){for(var e=0;e<n.length;e++)pm.add(n[e]);for(var t of nu)t(n)}let Zd=null;function Es(n){var e=this,t=e.ownerDocument,i=n.type,a=n.composedPath?.()||[],s=a[0]||n.target;Zd=n;var o=0,l=Zd===n&&n.__root;if(l){var c=a.indexOf(l);if(c!==-1&&(e===document||e===window)){n.__root=e;return}var u=a.indexOf(e);if(u===-1)return;c<=u&&(o=c)}if(s=a[o]||n.target,s!==e){cl(n,"currentTarget",{configurable:!0,get(){return s||t}});var d=Bt,f=Nt;Di(null),Pi(null);try{for(var h,b=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var g=s["__"+i];if(g!=null&&(!s.disabled||n.target===s))if(us(g)){var[m,...k]=g;m.apply(s,[n,...k])}else g.call(s,n)}catch(x){h?b.push(x):h=x}if(n.cancelBubble||v===e||v===null)break;s=v}if(h){for(let x of b)queueMicrotask(()=>{throw x});throw h}}finally{n.__root=e,delete n.currentTarget,Di(d),Pi(f)}}}function hy(n){var e;e=document.head.appendChild(Er());try{Qr(()=>n(e),Av)}finally{}}function ym(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function Ks(n,e){var t=Nt;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function S(n,e){var t=(e&Ob)!==0,i=(e&Db)!==0,a,s=!n.startsWith("<!>");return()=>{a===void 0&&(a=ym(s?n:"<!>"+n),t||(a=Fr(a)));var o=i||Qv?document.importNode(a,!0):a.cloneNode(!0);if(t){var l=Fr(o),c=o.lastChild;Ks(l,c)}else Ks(o,o);return o}}function or(n=""){{var e=Er(n+"");return Ks(e,e),e}}function tt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=Er();return n.append(e,t),Ks(e,t),n}function p(n,e){n!==null&&n.before(e)}let iu=!0;function Te(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??=n.nodeValue)&&(n.__t=t,n.nodeValue=t+"")}function vy(n,e){return my(n,e)}const Na=new Map;function my(n,{target:e,anchor:t,props:i={},events:a,context:s,intro:o=!0}){Kb();var l=new Set,c=f=>{for(var h=0;h<f.length;h++){var b=f[h];if(!l.has(b)){l.add(b);var v=fy(b);e.addEventListener(b,Es,{passive:v});var g=Na.get(b);g===void 0?(document.addEventListener(b,Es,{passive:v}),Na.set(b,1)):Na.set(b,g+1)}}};c(Uu(pm)),nu.add(c);var u=void 0,d=Qb(()=>{var f=t??e.appendChild(Er());return cr(()=>{if(s){Ue({});var h=Jt;h.c=s}a&&(i.$$events=a),iu=o,u=n(f,i)||{},iu=!0,s&&Be()}),()=>{for(var h of l){e.removeEventListener(h,Es);var b=Na.get(h);--b===0?(document.removeEventListener(h,Es),Na.delete(h)):Na.set(h,b)}nu.delete(c),f!==t&&f.parentNode?.removeChild(f)}});return py.set(u,d),u}let py=new WeakMap;const lc=0,So=1,cc=2;function gy(n,e,t,i,a){var s=n,o=Ia(),l=Jt,c=fn,u,d,f,h=o?Tr(void 0):P(void 0,!1,!1),b=o?Tr(void 0):P(void 0,!1,!1),v=!1;function g(k,x){v=!0,x&&(Pi(m),Di(m),es(l));try{k===So&&i&&(d?Fl(d):d=cr(()=>i(s,h))),k!==lc&&u&&Vr(u,()=>u=null),k!==So&&d&&Vr(d,()=>d=null),k!==cc&&f&&Vr(f,()=>f=null)}finally{x&&(es(null),Di(null),Pi(null),Kv())}}var m=Qr(()=>{if(c!==(c=e())){if(sb(c)){var k=c;v=!1,k.then(x=>{k===c&&(kr(h,x),g(So,!0))},x=>{if(k===c)throw kr(b,x),g(cc,!0),b.v}),Yr(()=>{v||g(lc,!0)})}else kr(h,c),g(So,!1);return()=>c=fn}})}function G(n,e,t=!1){var i=n,a=null,s=null,o=fn,l=t?ao:0,c=!1;const u=(b,v=!0)=>{c=!0,h(v,b)};var d=null;function f(){d!==null&&(d.lastChild.remove(),i.before(d),d=null);var b=o?a:s,v=o?s:a;b&&Fl(b),v&&Vr(v,()=>{o?s=null:a=null})}const h=(b,v)=>{if(o!==(o=b)){var g=Nl(),m=i;if(g&&(d=document.createDocumentFragment(),d.append(m=Er())),o?a??=v&&cr(()=>v(m)):s??=v&&cr(()=>v(m)),g){var k=Xt,x=o?a:s,C=o?s:a;x&&k.skipped_effects.delete(x),C&&k.skipped_effects.add(C),k.add_callback(f)}else f()}};Qr(()=>{c=!1,e(u),c||h(null,null)},l)}function Jd(n,e,t){var i=n,a=fn,s,o,l=null,c=Ia()?Nb:Ml;function u(){s&&Vr(s),l!==null&&(l.lastChild.remove(),i.before(l),l=null),s=o}Qr(()=>{if(c(a,a=e())){var d=i,f=Nl();f&&(l=document.createDocumentFragment(),l.append(d=Er())),o=cr(()=>t(d)),f?Xt.add_callback(u):u()}})}let Qo=null;function At(n,e){return e}function by(n,e,t){for(var i=n.items,a=[],s=e.length,o=0;o<s;o++)Ju(e[o].e,a,!0);var l=s>0&&a.length===0&&t!==null;if(l){var c=t.parentNode;Zb(c),c.append(t),i.clear(),Xi(n,e[0].prev,e[s-1].next)}lm(a,()=>{for(var u=0;u<s;u++){var d=e[u];l||(i.delete(d.k),Xi(n,d.prev,d.next)),Oi(d.e,!l)}})}function bt(n,e,t,i,a,s=null){var o=n,l={flags:e,items:new Map,first:null},c=(e&Rv)!==0;if(c){var u=n;o=u.appendChild(Er())}var d=null,f=!1,h=new Map,b=ie(()=>{var k=t();return us(k)?k:k==null?[]:Uu(k)}),v,g;function m(){yy(g,v,l,h,o,a,e,i,t),s!==null&&(v.length===0?d?Fl(d):d=cr(()=>s(o)):d!==null&&Vr(d,()=>{d=null}))}Qr(()=>{g??=Nt,v=r(b);var k=v.length;if(!(f&&k===0)){f=k===0;var x,C,O,$;if(Nl()){var E=new Set,w=Xt;for(C=0;C<k;C+=1){O=v[C],$=i(O,C);var I=l.items.get($)??h.get($);I?(e&(Dl|Pl))!==0&&_m(I,O,C,e):(x=xm(null,l,null,null,O,$,C,a,e,t,!0),h.set($,x)),E.add($)}for(const[D,A]of l.items)E.has(D)||w.skipped_effects.add(A.e);w.add_callback(m)}else m();r(b)}})}function yy(n,e,t,i,a,s,o,l,c){var u=(o&xb)!==0,d=(o&(Dl|Pl))!==0,f=e.length,h=t.items,b=t.first,v=b,g,m=null,k,x=[],C=[],O,$,E,w;if(u)for(w=0;w<f;w+=1)O=e[w],$=l(O,w),E=h.get($),E!==void 0&&(E.a?.measure(),(k??=new Set).add(E));for(w=0;w<f;w+=1){if(O=e[w],$=l(O,w),E=h.get($),E===void 0){var I=i.get($);if(I!==void 0){i.delete($),h.set($,I);var D=m?m.next:v;Xi(t,m,I),Xi(t,I,D),uc(I,D,a),m=I}else{var A=v?v.e.nodes_start:a;m=xm(A,t,m,m===null?t.first:m.next,O,$,w,s,o,c)}h.set($,m),x=[],C=[],v=m.next;continue}if(d&&_m(E,O,w,o),(E.e.f&Vi)!==0&&(Fl(E.e),u&&(E.a?.unfix(),(k??=new Set).delete(E))),E!==v){if(g!==void 0&&g.has(E)){if(x.length<C.length){var L=C[0],N;m=L.prev;var H=x[0],j=x[x.length-1];for(N=0;N<x.length;N+=1)uc(x[N],L,a);for(N=0;N<C.length;N+=1)g.delete(C[N]);Xi(t,H.prev,j.next),Xi(t,m,H),Xi(t,j,L),v=L,m=j,w-=1,x=[],C=[]}else g.delete(E),uc(E,v,a),Xi(t,E.prev,E.next),Xi(t,E,m===null?t.first:m.next),Xi(t,m,E),m=E;continue}for(x=[],C=[];v!==null&&v.k!==$;)(v.e.f&Vi)===0&&(g??=new Set).add(v),C.push(v),v=v.next;if(v===null)continue;E=v}x.push(E),m=E,v=E.next}if(v!==null||g!==void 0){for(var V=g===void 0?[]:Uu(g);v!==null;)(v.e.f&Vi)===0&&V.push(v),v=v.next;var U=V.length;if(U>0){var B=(o&Rv)!==0&&f===0?a:null;if(u){for(w=0;w<U;w+=1)V[w].a?.measure();for(w=0;w<U;w+=1)V[w].a?.fix()}by(t,V,B)}}u&&Yr(()=>{if(k!==void 0)for(E of k)E.a?.apply()}),n.first=t.first&&t.first.e,n.last=m&&m.e;for(var J of i.values())Oi(J.e);i.clear()}function _m(n,e,t,i){(i&Dl)!==0&&kr(n.v,e),(i&Pl)!==0?kr(n.i,t):n.i=t}function xm(n,e,t,i,a,s,o,l,c,u,d){var f=Qo,h=(c&Dl)!==0,b=(c&wb)===0,v=h?b?P(a,!1,!1):Tr(a):a,g=(c&Pl)===0?o:Tr(o),m={i:g,v,k:s,a:null,e:null,prev:t,next:i};Qo=m;try{if(n===null){var k=document.createDocumentFragment();k.append(n=Er())}return m.e=cr(()=>l(n,v,g,u),Lb),m.e.prev=t&&t.e,m.e.next=i&&i.e,t===null?d||(e.first=m):(t.next=m,t.e.next=m.e),i!==null&&(i.prev=m,i.e.prev=m.e),m}finally{Qo=f}}function uc(n,e,t){for(var i=n.next?n.next.e.nodes_start:t,a=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==null&&s!==i;){var o=Ll(s);a.before(s),s=o}}function Xi(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function _y(n,e,t=!1,i=!1,a=!1){var s=n,o="";z(()=>{var l=Nt;if(o!==(o=e()??"")&&(l.nodes_start!==null&&(sm(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),o!=="")){var c=o+"";t?c=`<svg>${c}</svg>`:i&&(c=`<math>${c}</math>`);var u=ym(c);if((t||i)&&(u=Fr(u)),Ks(Fr(u),u.lastChild),t||i)for(;Fr(u);)s.before(Fr(u));else s.before(u)}})}function Gt(n,e,t,i,a){var s=e.$$slots?.[t],o=!1;s===!0&&(s=e[t==="default"?"children":t],o=!0),s===void 0?a!==null&&a(n):s(n,o?()=>i:i)}function pi(n,e,t){var i=n,a,s,o=null,l=null;function c(){s&&(Vr(s),s=null),o&&(o.lastChild.remove(),i.before(o),o=null),s=l,l=null}Qr(()=>{if(a!==(a=e())){var u=Nl();if(a){var d=i;u&&(o=document.createDocumentFragment(),o.append(d=Er()),s&&Xt.skipped_effects.add(s)),l=cr(()=>t(d,a))}u?Xt.add_callback(c):c()}},ao)}function Qe(n,e,t){Rt(()=>{var i=M(()=>e(n,t?.())||{});if(t&&i?.update){var a=!1,s={};Ca(()=>{var o=t();R(o),a&&Ml(s,o)&&(s=o,i.update(o))}),a=!0}if(i?.destroy)return()=>i.destroy()})}function xy(n,e){var t=void 0,i;Qr(()=>{t!==(t=e())&&(i&&(Oi(i),i=null),t&&(i=cr(()=>{Rt(()=>t(n))})))})}function wm(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=wm(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function wy(){for(var n,e,t=0,i="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=wm(n))&&(i&&(i+=" "),i+=e);return i}function $n(n){return typeof n=="object"?wy(n):n??""}const Gd=[...` 	
\r\fÂ \v\uFEFF`];function ky(n,e,t){var i=n==null?"":""+n;if(e&&(i=i?i+" "+e:e),t){for(var a in t)if(t[a])i=i?i+" "+a:a;else if(i.length)for(var s=a.length,o=0;(o=i.indexOf(a,o))>=0;){var l=o+s;(o===0||Gd.includes(i[o-1]))&&(l===i.length||Gd.includes(i[l]))?i=(o===0?"":i.substring(0,o))+i.substring(l+1):o=l}}return i===""?null:i}function Xd(n,e=!1){var t=e?" !important;":";",i="";for(var a in n){var s=n[a];s!=null&&s!==""&&(i+=" "+a+": "+s+t)}return i}function dc(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function Sy(n,e){if(e){var t="",i,a;if(Array.isArray(e)?(i=e[0],a=e[1]):i=e,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,l=!1,c=[];i&&c.push(...Object.keys(i).map(dc)),a&&c.push(...Object.keys(a).map(dc));var u=0,d=-1;const g=n.length;for(var f=0;f<g;f++){var h=n[f];if(l?h==="/"&&n[f-1]==="*"&&(l=!1):s?s===h&&(s=!1):h==="/"&&n[f+1]==="*"?l=!0:h==='"'||h==="'"?s=h:h==="("?o++:h===")"&&o--,!l&&s===!1&&o===0){if(h===":"&&d===-1)d=f;else if(h===";"||f===g-1){if(d!==-1){var b=dc(n.substring(u,d).trim());if(!c.includes(b)){h!==";"&&f++;var v=n.substring(u,f).trim();t+=" "+v+";"}}u=f+1,d=-1}}}}return i&&(t+=Xd(i)),a&&(t+=Xd(a,!0)),t=t.trim(),t===""?null:t}return n==null?null:String(n)}function Re(n,e,t,i,a,s){var o=n.__className;if(o!==t||o===void 0){var l=ky(t,i,s);l==null?n.removeAttribute("class"):e?n.className=l:n.setAttribute("class",l),n.__className=t}else if(s&&a!==s)for(var c in s){var u=!!s[c];(a==null||u!==!!a[c])&&n.classList.toggle(c,u)}return s}function fc(n,e={},t,i){for(var a in t){var s=t[a];e[a]!==s&&(t[a]==null?n.style.removeProperty(a):n.style.setProperty(a,s,i))}}function Ty(n,e,t,i){var a=n.__style;if(a!==e){var s=Sy(e,i);s==null?n.removeAttribute("style"):n.style.cssText=s,n.__style=e}else i&&(Array.isArray(i)?(fc(n,t?.[0],i[0]),fc(n,t?.[1],i[1],"important")):fc(n,t,i));return i}function hl(n,e,t=!1){if(n.multiple){if(e==null)return;if(!us(e))return Ab();for(var i of n.options)i.selected=e.includes(Ns(i));return}for(i of n.options){var a=Ns(i);if(Gv(a,e)){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function km(n){var e=new MutationObserver(()=>{hl(n,n.__value)});e.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),lo(()=>{e.disconnect()})}function $y(n,e,t=e){var i=!0;Rl(n,"change",a=>{var s=a?"[selected]":":checked",o;if(n.multiple)o=[].map.call(n.querySelectorAll(s),Ns);else{var l=n.querySelector(s)??n.querySelector("option:not([disabled])");o=l&&Ns(l)}t(o)}),Rt(()=>{var a=e();if(hl(n,a,i),i&&a===void 0){var s=n.querySelector(":checked");s!==null&&(a=Ns(s),t(a))}n.__value=a,i=!1}),km(n)}function Ns(n){return"__value"in n?n.__value:n.value}const xs=Symbol("class"),ws=Symbol("style"),Sm=Symbol("is custom element"),Tm=Symbol("is html");function Rn(n,e){var t=ql(n);t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function Ur(n,e){var t=ql(n);t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function Iy(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function W(n,e,t,i){var a=ql(n);a[e]!==(a[e]=t)&&(e==="loading"&&(n[cb]=t),t==null?n.removeAttribute(e):typeof t!="string"&&$m(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Cy(n,e,t,i,a=!1){var s=ql(n),o=s[Sm],l=!s[Tm],c=e||{},u=n.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class?t.class=$n(t.class):(i||t[xs])&&(t.class=null),t[ws]&&(t.style??=null);var f=$m(n);for(const x in t){let C=t[x];if(u&&x==="value"&&C==null){n.value=n.__value="",c[x]=C;continue}if(x==="class"){var h=n.namespaceURI==="http://www.w3.org/1999/xhtml";Re(n,h,C,i,e?.[xs],t[xs]),c[x]=C,c[xs]=t[xs];continue}if(x==="style"){Ty(n,C,e?.[ws],t[ws]),c[x]=C,c[ws]=t[ws];continue}var b=c[x];if(!(C===b&&!(C===void 0&&n.hasAttribute(x)))){c[x]=C;var v=x[0]+x[1];if(v!=="$$")if(v==="on"){const O={},$="$$"+x;let E=x.slice(2);var g=ly(E);if(sy(E)&&(E=E.slice(0,-7),O.capture=!0),!g&&b){if(C!=null)continue;n.removeEventListener(E,c[$],O),c[$]=null}if(C!=null)if(g)n[`__${E}`]=C,bm([E]);else{let w=function(I){c[x].call(this,I)};c[$]=gm(E,n,w,O)}else g&&(n[`__${E}`]=void 0)}else if(x==="style")W(n,x,C);else if(x==="autofocus")Ui(n,!!C);else if(!o&&(x==="__value"||x==="value"&&C!=null))n.value=n.__value=C;else if(x==="selected"&&u)Iy(n,C);else{var m=x;l||(m=uy(m));var k=m==="defaultValue"||m==="defaultChecked";if(C==null&&!o&&!k)if(s[x]=null,m==="value"||m==="checked"){let O=n;const $=e===void 0;if(m==="value"){let E=O.defaultValue;O.removeAttribute(m),O.defaultValue=E,O.value=O.__value=$?E:null}else{let E=O.defaultChecked;O.removeAttribute(m),O.defaultChecked=E,O.checked=$?E:!1}}else n.removeAttribute(x);else k||f.includes(m)&&(o||typeof C!="string")?(n[m]=C,m in s&&(s[m]=fn)):typeof C!="function"&&W(n,m,C)}}}return c}function is(n,e,t=[],i=[],a,s=!1){Hv(t,i,o=>{var l=void 0,c={},u=n.nodeName==="SELECT",d=!1;if(Qr(()=>{var h=e(...o.map(r)),b=Cy(n,l,h,a,s);d&&u&&"value"in h&&hl(n,h.value);for(let g of Object.getOwnPropertySymbols(c))h[g]||Oi(c[g]);for(let g of Object.getOwnPropertySymbols(h)){var v=h[g];g.description===Mb&&(!l||v!==l[g])&&(c[g]&&Oi(c[g]),c[g]=cr(()=>xy(n,()=>v))),b[g]=v}l=b}),u){var f=n;Rt(()=>{hl(f,l.value,!0),km(f)})}d=!0})}function ql(n){return n.__attributes??={[Sm]:n.nodeName.includes("-"),[Tm]:n.namespaceURI===Pb}}var Qd=new Map;function $m(n){var e=n.getAttribute("is")||n.nodeName,t=Qd.get(e);if(t)return t;Qd.set(e,t=[]);for(var i,a=n,s=Element.prototype;s!==a;){i=Pv(a);for(var o in i)i[o].set&&t.push(o);a=Bu(a)}return t}const Ey=()=>performance.now(),yr={tick:n=>requestAnimationFrame(n),now:()=>Ey(),tasks:new Set};function Im(){const n=yr.now();yr.tasks.forEach(e=>{e.c(n)||(yr.tasks.delete(e),e.f())}),yr.tasks.size!==0&&yr.tick(Im)}function Oy(n){let e;return yr.tasks.size===0&&yr.tick(Im),{promise:new Promise(t=>{yr.tasks.add(e={c:n,f:t})}),abort(){yr.tasks.delete(e)}}}function To(n,e){fs(()=>{n.dispatchEvent(new CustomEvent(e))})}function Dy(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function ef(n){const e={},t=n.split(";");for(const i of t){const[a,s]=i.split(":");if(!a||s===void 0)break;const o=Dy(a.trim());e[o]=s.trim()}return e}const Py=n=>n;function My(n,e,t){var i=Qo,a,s,o,l=null;i.a??={element:n,measure(){a=this.element.getBoundingClientRect()},apply(){if(o?.abort(),s=this.element.getBoundingClientRect(),a.left!==s.left||a.right!==s.right||a.top!==s.top||a.bottom!==s.bottom){const c=e()(this.element,{from:a,to:s},t?.());o=vl(this.element,c,void 0,1,()=>{o?.abort(),o=void 0})}},fix(){if(!n.getAnimations().length){var{position:c,width:u,height:d}=getComputedStyle(n);if(c!=="absolute"&&c!=="fixed"){var f=n.style;l={position:f.position,width:f.width,height:f.height,transform:f.transform},f.position="absolute",f.width=u,f.height=d;var h=n.getBoundingClientRect();if(a.left!==h.left||a.top!==h.top){var b=`translate(${a.left-h.left}px, ${a.top-h.top}px)`;f.transform=f.transform?`${f.transform} ${b}`:b}}}},unfix(){if(l){var c=n.style;c.position=l.position,c.width=l.width,c.height=l.height,c.transform=l.transform}}},i.a.element=n}function Et(n,e,t,i){var a=(n&Ib)!==0,s=(n&Cb)!==0,o=a&&s,l=(n&Eb)!==0,c=o?"both":a?"in":"out",u,d=e.inert,f=e.style.overflow,h,b;function v(){return fs(()=>u??=t()(e,i?.()??{},{direction:c}))}var g={is_global:l,in(){if(e.inert=d,!a){b?.abort(),b?.reset?.();return}s||h?.abort(),To(e,"introstart"),h=vl(e,v(),b,1,()=>{To(e,"introend"),h?.abort(),h=u=void 0,e.style.overflow=f})},out(C){if(!s){C?.(),u=void 0;return}e.inert=!0,To(e,"outrostart"),b=vl(e,v(),h,0,()=>{To(e,"outroend"),C?.()})},stop:()=>{h?.abort(),b?.abort()}},m=Nt;if((m.transitions??=[]).push(g),a&&iu){var k=l;if(!k){for(var x=m.parent;x&&(x.f&ao)!==0;)for(;(x=x.parent)&&(x.f&Sa)===0;);k=!x||(x.f&El)!==0}k&&Rt(()=>{M(()=>g.in())})}}function vl(n,e,t,i,a){var s=i===1;if(Va(e)){var o,l=!1;return Yr(()=>{if(!l){var m=e({direction:s?"in":"out"});o=vl(n,m,t,i,a)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!e?.duration)return a(),{abort:hi,deactivate:hi,reset:hi,t:()=>i};const{delay:c=0,css:u,tick:d,easing:f=Py}=e;var h=[];if(s&&t===void 0&&(d&&d(0,1),u)){var b=ef(u(0,1));h.push(b,b)}var v=()=>1-i,g=n.animate(h,{duration:c,fill:"forwards"});return g.onfinish=()=>{g.cancel();var m=t?.t()??1-i;t?.abort();var k=i-m,x=e.duration*Math.abs(k),C=[];if(x>0){var O=!1;if(u)for(var $=Math.ceil(x/16.666666666666668),E=0;E<=$;E+=1){var w=m+k*f(E/$),I=ef(u(w,1-w));C.push(I),O||=I.overflow==="hidden"}O&&(n.style.overflow="hidden"),v=()=>{var D=g.currentTime;return m+k*f(D/x)},d&&Oy(()=>{if(g.playState!=="running")return!1;var D=v();return d(D,1-D),!0})}g=n.animate(C,{duration:x,fill:"forwards"}),g.onfinish=()=>{v=()=>i,d?.(i,1-i),a()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=hi)},deactivate:()=>{a=hi},reset:()=>{i===0&&d?.(1,0)},t:()=>v()}}function xt(n,e,t=e){var i=new WeakSet;Rl(n,"input",async a=>{var s=a?n.defaultValue:n.value;if(s=vc(n)?mc(s):s,t(s),Xt!==null&&i.add(Xt),await Tn(),s!==(s=e())){var o=n.selectionStart,l=n.selectionEnd;n.value=s??"",l!==null&&(n.selectionStart=o,n.selectionEnd=Math.min(l,n.value.length))}}),M(e)==null&&n.value&&(t(vc(n)?mc(n.value):n.value),Xt!==null&&i.add(Xt)),Ca(()=>{var a=e();if(n===document.activeElement){var s=Go??Xt;if(i.has(s))return}vc(n)&&a===mc(n.value)||n.type==="date"&&!a&&!n.value||a!==n.value&&(n.value=a??"")})}const hc=new Set;function Ay(n,e,t,i,a=i){var s=t.getAttribute("type")==="checkbox",o=n;if(e!==null)for(var l of e)o=o[l]??=[];o.push(t),Rl(t,"change",()=>{var c=t.__value;s&&(c=Ly(o,c,t.checked)),a(c)},()=>a(s?[]:null)),Ca(()=>{var c=i();s?(c=c||[],t.checked=c.includes(t.__value)):t.checked=Gv(t.__value,c)}),lo(()=>{var c=o.indexOf(t);c!==-1&&o.splice(c,1)}),hc.has(o)||(hc.add(o),Yr(()=>{o.sort((c,u)=>c.compareDocumentPosition(u)===4?-1:1),hc.delete(o)})),Yr(()=>{})}function Qt(n,e,t=e){Rl(n,"change",i=>{var a=i?n.defaultChecked:n.checked;t(a)}),M(e)==null&&t(n.checked),Ca(()=>{var i=e();n.checked=!!i})}function Ly(n,e,t){for(var i=new Set,a=0;a<n.length;a+=1)n[a].checked&&i.add(n[a].__value);return t||i.delete(e),Array.from(i)}function vc(n){var e=n.type;return e==="number"||e==="range"}function mc(n){return n===""?null:+n}function _t(n,e,t){var i=wr(n,e);i&&i.set&&(n[e]=t,lo(()=>{n[e]=null}))}function tf(n,e){return n===e||n?.[sr]===e}function mt(n={},e,t,i){return Rt(()=>{var a,s;return Ca(()=>{a=s,s=[],M(()=>{n!==t(...s)&&(e(n,...s),a&&tf(t(...a),n)&&e(null,...a))})}),()=>{Yr(()=>{s&&tf(t(...s),n)&&e(null,...s)})}}),n}function hn(n){return function(...e){var t=e[0];return t.stopPropagation(),n?.apply(this,e)}}function Ct(n){return function(...e){var t=e[0];return t.preventDefault(),n?.apply(this,e)}}function He(n=!1){const e=Jt,t=e.l.u;if(!t)return;let i=()=>R(e.s);if(n){let a=0,s={};const o=oo(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&a++,a});i=()=>r(o)}t.b.length&&Xb(()=>{nf(e,i),Hs(t.b)}),eu(()=>{const a=M(()=>t.m.map(ob));return()=>{for(const s of a)typeof s=="function"&&s()}}),t.a.length&&eu(()=>{nf(e,i),Hs(t.a)})}function nf(n,e){if(n.l.s)for(const t of n.l.s)r(t);e()}function l3(n){var e=Tr(0);return function(){return arguments.length===1?(_(e,r(e)+1),arguments[0]):(r(e),n())}}function ot(n,e){var t=n.$$events?.[e.type],i=us(t)?t.slice():t==null?[]:[t];for(var a of i)a.call(this,e)}function Gu(n,e,t){if(n==null)return e(void 0),t&&t(void 0),hi;const i=M(()=>n.subscribe(e,t));return i.unsubscribe?()=>i.unsubscribe():i}const Ra=[];function Cm(n,e){return{subscribe:li(n,e).subscribe}}function li(n,e=hi){let t=null;const i=new Set;function a(l){if(Ml(n,l)&&(n=l,t)){const c=!Ra.length;for(const u of i)u[1](),Ra.push(u,n);if(c){for(let u=0;u<Ra.length;u+=2)Ra[u][0](Ra[u+1]);Ra.length=0}}}function s(l){a(l(n))}function o(l,c=hi){const u=[l,c];return i.add(u),i.size===1&&(t=e(a,s)||hi),l(n),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:a,update:s,subscribe:o}}function Em(n,e,t){const i=!Array.isArray(n),a=i?[n]:n;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Cm(t,(o,l)=>{let c=!1;const u=[];let d=0,f=hi;const h=()=>{if(d)return;f();const v=e(i?u[0]:u,o,l);s?o(v):f=typeof v=="function"?v:hi},b=a.map((v,g)=>Gu(v,m=>{u[g]=m,d&=~(1<<g),c&&h()},()=>{d|=1<<g}));return c=!0,h(),function(){Hs(b),f(),c=!1}})}function Xu(n){let e;return Gu(n,t=>e=t)(),e}let $o=!1,ru=Symbol();function It(n,e,t){const i=t[e]??={store:null,source:P(void 0),unsubscribe:hi};if(i.store!==n&&!(ru in t))if(i.unsubscribe(),i.store=n??null,n==null)i.source.v=void 0,i.unsubscribe=hi;else{var a=!0;i.unsubscribe=Gu(n,s=>{a?i.source.v=s:_(i.source,s)}),a=!1}return n&&ru in t?Xu(n):r(i.source)}function Zn(n,e){return n.set(e),e}function Lt(){const n={};function e(){lo(()=>{for(var t in n)n[t].unsubscribe();cl(n,ru,{enumerable:!1,value:!0})})}return[n,e]}function Ny(n){var e=$o;try{return $o=!1,[n(),$o]}finally{$o=e}}const Ry={get(n,e){if(!n.exclude.includes(e))return r(n.version),e in n.special?n.special[e]():n.props[e]},set(n,e,t){if(!(e in n.special)){var i=Nt;try{Pi(n.parent_effect),n.special[e]=ee({get[e](){return n.props[e]}},e,Fv)}finally{Pi(i)}}return n.special[e](t),_r(n.version),!0},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},deleteProperty(n,e){return n.exclude.includes(e)||(n.exclude.push(e),_r(n.version)),!0},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function Ot(n,e){return new Proxy({props:n,exclude:e,special:{},version:Tr(0),parent_effect:Nt},Ry)}const Fy={get(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(Va(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i)return i[e]}},set(n,e,t){let i=n.props.length;for(;i--;){let a=n.props[i];Va(a)&&(a=a());const s=wr(a,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(Va(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i){const a=wr(i,e);return a&&!a.configurable&&(a.configurable=!0),a}}},has(n,e){if(e===sr||e===Nv)return!1;for(let t of n.props)if(Va(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props)if(Va(t)&&(t=t()),!!t){for(const i in t)e.includes(i)||e.push(i);for(const i of Object.getOwnPropertySymbols(t))e.includes(i)||e.push(i)}return e}};function tn(...n){return new Proxy({props:n},Fy)}function ee(n,e,t,i){var a=!ds||(t&Sb)!==0,s=(t&Tb)!==0,o=(t&$b)!==0,l=i,c=!0,u=()=>(c&&(c=!1,l=o?M(i):i),l),d;if(s){var f=sr in n||Nv in n;d=wr(n,e)?.set??(f&&e in n?C=>n[e]=C:void 0)}var h,b=!1;s?[h,b]=Ny(()=>n[e]):h=n[e],h===void 0&&i!==void 0&&(h=u(),d&&(a&&gb(),d(h)));var v;if(a?v=()=>{var C=n[e];return C===void 0?u():(c=!0,C)}:v=()=>{var C=n[e];return C!==void 0&&(l=void 0),C===void 0?l:C},a&&(t&Fv)===0)return v;if(d){var g=n.$$legacy;return(function(C,O){return arguments.length>0?((!a||!O||g||b)&&d(O?v():C),C):v()})}var m=!1,k=((t&kb)!==0?oo:ie)(()=>(m=!1,v()));s&&r(k);var x=Nt;return(function(C,O){if(arguments.length>0){const $=O?r(k):a&&s?Ba(C):C;return _(k,$),m=!0,l!==void 0&&(l=$),C}return Ea&&m||(x.f&$a)!==0?k.v:r(k)})}function un(n){Jt===null&&Ol(),ds&&Jt.l!==null?Om(Jt).m.push(n):eu(()=>{const e=M(n);if(typeof e=="function")return e})}function uo(n){Jt===null&&Ol(),un(()=>()=>M(n))}function qy(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function zt(){const n=Jt;return n===null&&Ol(),(e,t,i)=>{const a=n.s.$$events?.[e];if(a){const s=us(a)?a.slice():[a],o=qy(e,t,i);for(const l of s)l.call(n.x,o);return!o.defaultPrevented}return!0}}function zy(n){Jt===null&&Ol(),Jt.l===null&&pb(),Om(Jt).a.push(n)}function Om(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}const jy="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(jy);Fb();class Oa extends Error{}class Vy extends Oa{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Uy extends Oa{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class By extends Oa{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Ha extends Oa{}class Dm extends Oa{constructor(e){super(`Invalid unit ${e}`)}}class Pn extends Oa{}class Mr extends Oa{constructor(){super("Zone is an abstract class")}}const yt="numeric",Bi="short",vi="long",ml={year:yt,month:yt,day:yt},Pm={year:yt,month:Bi,day:yt},Hy={year:yt,month:Bi,day:yt,weekday:Bi},Mm={year:yt,month:vi,day:yt},Am={year:yt,month:vi,day:yt,weekday:vi},Lm={hour:yt,minute:yt},Nm={hour:yt,minute:yt,second:yt},Rm={hour:yt,minute:yt,second:yt,timeZoneName:Bi},Fm={hour:yt,minute:yt,second:yt,timeZoneName:vi},qm={hour:yt,minute:yt,hourCycle:"h23"},zm={hour:yt,minute:yt,second:yt,hourCycle:"h23"},jm={hour:yt,minute:yt,second:yt,hourCycle:"h23",timeZoneName:Bi},Vm={hour:yt,minute:yt,second:yt,hourCycle:"h23",timeZoneName:vi},Um={year:yt,month:yt,day:yt,hour:yt,minute:yt},Bm={year:yt,month:yt,day:yt,hour:yt,minute:yt,second:yt},Hm={year:yt,month:Bi,day:yt,hour:yt,minute:yt},Wm={year:yt,month:Bi,day:yt,hour:yt,minute:yt,second:yt},Wy={year:yt,month:Bi,day:yt,weekday:Bi,hour:yt,minute:yt},Ym={year:yt,month:vi,day:yt,hour:yt,minute:yt,timeZoneName:Bi},Km={year:yt,month:vi,day:yt,hour:yt,minute:yt,second:yt,timeZoneName:Bi},Zm={year:yt,month:vi,day:yt,weekday:vi,hour:yt,minute:yt,timeZoneName:vi},Jm={year:yt,month:vi,day:yt,weekday:vi,hour:yt,minute:yt,second:yt,timeZoneName:vi};class fo{get type(){throw new Mr}get name(){throw new Mr}get ianaName(){return this.name}get isUniversal(){throw new Mr}offsetName(e,t){throw new Mr}formatOffset(e,t){throw new Mr}offset(e){throw new Mr}equals(e){throw new Mr}get isValid(){throw new Mr}}let pc=null;class zl extends fo{static get instance(){return pc===null&&(pc=new zl),pc}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return op(e,t,i)}formatOffset(e,t){return Rs(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const au=new Map;function Yy(n){let e=au.get(n);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),au.set(n,e)),e}const Ky={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Zy(n,e){const t=n.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,a,s,o,l,c,u,d]=i;return[o,a,s,l,c,u,d]}function Jy(n,e){const t=n.formatToParts(e),i=[];for(let a=0;a<t.length;a++){const{type:s,value:o}=t[a],l=Ky[s];s==="era"?i[l]=o:Dt(l)||(i[l]=parseInt(o,10))}return i}const gc=new Map;class $r extends fo{static create(e){let t=gc.get(e);return t===void 0&&gc.set(e,t=new $r(e)),t}static resetCache(){gc.clear(),au.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=$r.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return op(e,t,i,this.name)}formatOffset(e,t){return Rs(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const i=Yy(this.name);let[a,s,o,l,c,u,d]=i.formatToParts?Jy(i,t):Zy(i,t);l==="BC"&&(a=-Math.abs(a)+1);const h=Vl({year:a,month:s,day:o,hour:c===24?0:c,minute:u,second:d,millisecond:0});let b=+t;const v=b%1e3;return b-=v>=0?v:1e3+v,(h-b)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let rf={};function Gy(n,e={}){const t=JSON.stringify([n,e]);let i=rf[t];return i||(i=new Intl.ListFormat(n,e),rf[t]=i),i}const su=new Map;function ou(n,e={}){const t=JSON.stringify([n,e]);let i=su.get(t);return i===void 0&&(i=new Intl.DateTimeFormat(n,e),su.set(t,i)),i}const lu=new Map;function Xy(n,e={}){const t=JSON.stringify([n,e]);let i=lu.get(t);return i===void 0&&(i=new Intl.NumberFormat(n,e),lu.set(t,i)),i}const cu=new Map;function Qy(n,e={}){const{base:t,...i}=e,a=JSON.stringify([n,i]);let s=cu.get(a);return s===void 0&&(s=new Intl.RelativeTimeFormat(n,e),cu.set(a,s)),s}let Os=null;function e_(){return Os||(Os=new Intl.DateTimeFormat().resolvedOptions().locale,Os)}const uu=new Map;function Gm(n){let e=uu.get(n);return e===void 0&&(e=new Intl.DateTimeFormat(n).resolvedOptions(),uu.set(n,e)),e}const du=new Map;function t_(n){let e=du.get(n);if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...Xm,...e}),du.set(n,e)}return e}function n_(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let i,a;try{i=ou(n).resolvedOptions(),a=n}catch{const c=n.substring(0,t);i=ou(c).resolvedOptions(),a=c}const{numberingSystem:s,calendar:o}=i;return[a,s,o]}}function i_(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function r_(n){const e=[];for(let t=1;t<=12;t++){const i=$t.utc(2009,t,1);e.push(n(i))}return e}function a_(n){const e=[];for(let t=1;t<=7;t++){const i=$t.utc(2016,11,13+t);e.push(n(i))}return e}function Io(n,e,t,i){const a=n.listingMode();return a==="error"?null:a==="en"?t(e):i(e)}function s_(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||Gm(n.locale).numberingSystem==="latn"}class o_{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:a,floor:s,...o}=i;if(!t||Object.keys(o).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=Xy(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):id(e,3);return gn(t,this.padTo)}}}class l_{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&$r.create(l).valid?(a=l,this.dt=e):(a="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,a=e.zone.name):(a="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||a,this.dtf=ou(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class c_{constructor(e,t,i){this.opts={style:"long",...i},!t&&ap()&&(this.rtf=Qy(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):D_(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Xm={firstDay:1,minimalDays:4,weekend:[6,7]};class Kt{static fromOpts(e){return Kt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,a,s=!1){const o=e||cn.defaultLocale,l=o||(s?"en-US":e_()),c=t||cn.defaultNumberingSystem,u=i||cn.defaultOutputCalendar,d=hu(a)||cn.defaultWeekSettings;return new Kt(l,c,u,d,o)}static resetCache(){Os=null,su.clear(),lu.clear(),cu.clear(),uu.clear(),du.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:a}={}){return Kt.create(e,t,i,a)}constructor(e,t,i,a,s){const[o,l,c]=n_(e);this.locale=o,this.numberingSystem=t||l||null,this.outputCalendar=i||c||null,this.weekSettings=a,this.intl=i_(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=s_(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Kt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,hu(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Io(this,e,up,()=>{const i=this.intl==="ja"||this.intl.startsWith("ja-");t&=!i;const a=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";if(!this.monthsCache[s][e]){const o=i?l=>this.dtFormatter(l,a).format():l=>this.extract(l,a,"month");this.monthsCache[s][e]=r_(o)}return this.monthsCache[s][e]})}weekdays(e,t=!1){return Io(this,e,hp,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},a=t?"format":"standalone";return this.weekdaysCache[a][e]||(this.weekdaysCache[a][e]=a_(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[a][e]})}meridiems(){return Io(this,void 0,()=>vp,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[$t.utc(2016,11,13,9),$t.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Io(this,e,mp,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[$t.utc(-40,1,1),$t.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const a=this.dtFormatter(e,t),s=a.formatToParts(),o=s.find(l=>l.type.toLowerCase()===i);return o?o.value:null}numberFormatter(e={}){return new o_(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new l_(e,this.intl,t)}relFormatter(e={}){return new c_(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Gy(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Gm(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:sp()?t_(this.locale):Xm}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let bc=null;class Yn extends fo{static get utcInstance(){return bc===null&&(bc=new Yn(0)),bc}static instance(e){return e===0?Yn.utcInstance:new Yn(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Yn(Ul(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Rs(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Rs(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Rs(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class u_ extends fo{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Rr(n,e){if(Dt(n)||n===null)return e;if(n instanceof fo)return n;if(p_(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?zl.instance:t==="utc"||t==="gmt"?Yn.utcInstance:Yn.parseSpecifier(t)||$r.create(n)}else return Br(n)?Yn.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new u_(n)}const Qu={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼]",gujr:"[à«¦-à«¯]",hanidec:"[ã|ä¸|äº|ä¸|å|äº|å­|ä¸|å«|ä¹]",khmr:"[á -á©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»]",limb:"[á¥-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ]",mymr:"[á-á]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹]",tibt:"[à¼ -à¼©]",latn:"\\d"},af={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},d_=Qu.hanidec.replace(/[\[|\]]/g,"").split("");function f_(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);if(n[t].search(Qu.hanidec)!==-1)e+=d_.indexOf(n[t]);else for(const a in af){const[s,o]=af[a];i>=s&&i<=o&&(e+=i-s)}}return parseInt(e,10)}else return e}const fu=new Map;function h_(){fu.clear()}function Ri({numberingSystem:n},e=""){const t=n||"latn";let i=fu.get(t);i===void 0&&(i=new Map,fu.set(t,i));let a=i.get(e);return a===void 0&&(a=new RegExp(`${Qu[t]}${e}`),i.set(e,a)),a}let sf=()=>Date.now(),of="system",lf=null,cf=null,uf=null,df=60,ff,hf=null;class cn{static get now(){return sf}static set now(e){sf=e}static set defaultZone(e){of=e}static get defaultZone(){return Rr(of,zl.instance)}static get defaultLocale(){return lf}static set defaultLocale(e){lf=e}static get defaultNumberingSystem(){return cf}static set defaultNumberingSystem(e){cf=e}static get defaultOutputCalendar(){return uf}static set defaultOutputCalendar(e){uf=e}static get defaultWeekSettings(){return hf}static set defaultWeekSettings(e){hf=hu(e)}static get twoDigitCutoffYear(){return df}static set twoDigitCutoffYear(e){df=e%100}static get throwOnInvalid(){return ff}static set throwOnInvalid(e){ff=e}static resetCaches(){Kt.resetCache(),$r.resetCache(),$t.resetCache(),h_()}}class qi{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Qm=[0,31,59,90,120,151,181,212,243,273,304,334],ep=[0,31,60,91,121,152,182,213,244,274,305,335];function Ti(n,e){return new qi("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function ed(n,e,t){const i=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const a=i.getUTCDay();return a===0?7:a}function tp(n,e,t){return t+(ho(n)?ep:Qm)[e-1]}function np(n,e){const t=ho(n)?ep:Qm,i=t.findIndex(s=>s<e),a=e-t[i];return{month:i+1,day:a}}function td(n,e){return(n-e+7)%7+1}function pl(n,e=4,t=1){const{year:i,month:a,day:s}=n,o=tp(i,a,s),l=td(ed(i,a,s),t);let c=Math.floor((o-l+14-e)/7),u;return c<1?(u=i-1,c=Zs(u,e,t)):c>Zs(i,e,t)?(u=i+1,c=1):u=i,{weekYear:u,weekNumber:c,weekday:l,...Bl(n)}}function vf(n,e=4,t=1){const{weekYear:i,weekNumber:a,weekday:s}=n,o=td(ed(i,1,e),t),l=Za(i);let c=a*7+s-o-7+e,u;c<1?(u=i-1,c+=Za(u)):c>l?(u=i+1,c-=Za(i)):u=i;const{month:d,day:f}=np(u,c);return{year:u,month:d,day:f,...Bl(n)}}function yc(n){const{year:e,month:t,day:i}=n,a=tp(e,t,i);return{year:e,ordinal:a,...Bl(n)}}function mf(n){const{year:e,ordinal:t}=n,{month:i,day:a}=np(e,t);return{year:e,month:i,day:a,...Bl(n)}}function pf(n,e){if(!Dt(n.localWeekday)||!Dt(n.localWeekNumber)||!Dt(n.localWeekYear)){if(!Dt(n.weekday)||!Dt(n.weekNumber)||!Dt(n.weekYear))throw new Ha("Cannot mix locale-based week fields with ISO-based week fields");return Dt(n.localWeekday)||(n.weekday=n.localWeekday),Dt(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),Dt(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function v_(n,e=4,t=1){const i=jl(n.weekYear),a=$i(n.weekNumber,1,Zs(n.weekYear,e,t)),s=$i(n.weekday,1,7);return i?a?s?!1:Ti("weekday",n.weekday):Ti("week",n.weekNumber):Ti("weekYear",n.weekYear)}function m_(n){const e=jl(n.year),t=$i(n.ordinal,1,Za(n.year));return e?t?!1:Ti("ordinal",n.ordinal):Ti("year",n.year)}function ip(n){const e=jl(n.year),t=$i(n.month,1,12),i=$i(n.day,1,gl(n.year,n.month));return e?t?i?!1:Ti("day",n.day):Ti("month",n.month):Ti("year",n.year)}function rp(n){const{hour:e,minute:t,second:i,millisecond:a}=n,s=$i(e,0,23)||e===24&&t===0&&i===0&&a===0,o=$i(t,0,59),l=$i(i,0,59),c=$i(a,0,999);return s?o?l?c?!1:Ti("millisecond",a):Ti("second",i):Ti("minute",t):Ti("hour",e)}function Dt(n){return typeof n>"u"}function Br(n){return typeof n=="number"}function jl(n){return typeof n=="number"&&n%1===0}function p_(n){return typeof n=="string"}function g_(n){return Object.prototype.toString.call(n)==="[object Date]"}function ap(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function sp(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function b_(n){return Array.isArray(n)?n:[n]}function gf(n,e,t){if(n.length!==0)return n.reduce((i,a)=>{const s=[e(a),a];return i&&t(i[0],s[0])===i[0]?i:s},null)[1]}function y_(n,e){return e.reduce((t,i)=>(t[i]=n[i],t),{})}function rs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function hu(n){if(n==null)return null;if(typeof n!="object")throw new Pn("Week settings must be an object");if(!$i(n.firstDay,1,7)||!$i(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!$i(e,1,7)))throw new Pn("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function $i(n,e,t){return jl(n)&&n>=e&&n<=t}function __(n,e){return n-e*Math.floor(n/e)}function gn(n,e=2){const t=n<0;let i;return t?i="-"+(""+-n).padStart(e,"0"):i=(""+n).padStart(e,"0"),i}function Nr(n){if(!(Dt(n)||n===null||n===""))return parseInt(n,10)}function na(n){if(!(Dt(n)||n===null||n===""))return parseFloat(n)}function nd(n){if(!(Dt(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function id(n,e,t="round"){const i=10**e;switch(t){case"expand":return n>0?Math.ceil(n*i)/i:Math.floor(n*i)/i;case"trunc":return Math.trunc(n*i)/i;case"round":return Math.round(n*i)/i;case"floor":return Math.floor(n*i)/i;case"ceil":return Math.ceil(n*i)/i;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function ho(n){return n%4===0&&(n%100!==0||n%400===0)}function Za(n){return ho(n)?366:365}function gl(n,e){const t=__(e-1,12)+1,i=n+(e-t)/12;return t===2?ho(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Vl(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function bf(n,e,t){return-td(ed(n,1,e),t)+e-1}function Zs(n,e=4,t=1){const i=bf(n,e,t),a=bf(n+1,e,t);return(Za(n)-i+a)/7}function vu(n){return n>99?n:n>cn.twoDigitCutoffYear?1900+n:2e3+n}function op(n,e,t,i=null){const a=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:e,...s},l=new Intl.DateTimeFormat(t,o).formatToParts(a).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function Ul(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,a=t<0||Object.is(t,-0)?-i:i;return t*60+a}function lp(n){const e=Number(n);if(typeof n=="boolean"||n===""||!Number.isFinite(e))throw new Pn(`Invalid unit value ${n}`);return e}function bl(n,e){const t={};for(const i in n)if(rs(n,i)){const a=n[i];if(a==null)continue;t[e(i)]=lp(a)}return t}function Rs(n,e){const t=Math.trunc(Math.abs(n/60)),i=Math.trunc(Math.abs(n%60)),a=n>=0?"+":"-";switch(e){case"short":return`${a}${gn(t,2)}:${gn(i,2)}`;case"narrow":return`${a}${t}${i>0?`:${i}`:""}`;case"techie":return`${a}${gn(t,2)}${gn(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Bl(n){return y_(n,["hour","minute","second","millisecond"])}const x_=["January","February","March","April","May","June","July","August","September","October","November","December"],cp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],w_=["J","F","M","A","M","J","J","A","S","O","N","D"];function up(n){switch(n){case"narrow":return[...w_];case"short":return[...cp];case"long":return[...x_];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const dp=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],fp=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],k_=["M","T","W","T","F","S","S"];function hp(n){switch(n){case"narrow":return[...k_];case"short":return[...fp];case"long":return[...dp];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const vp=["AM","PM"],S_=["Before Christ","Anno Domini"],T_=["BC","AD"],$_=["B","A"];function mp(n){switch(n){case"narrow":return[...$_];case"short":return[...T_];case"long":return[...S_];default:return null}}function I_(n){return vp[n.hour<12?0:1]}function C_(n,e){return hp(e)[n.weekday-1]}function E_(n,e){return up(e)[n.month-1]}function O_(n,e){return mp(e)[n.year<0?0:1]}function D_(n,e,t="always",i=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){const f=n==="days";switch(e){case 1:return f?"tomorrow":`next ${a[n][0]}`;case-1:return f?"yesterday":`last ${a[n][0]}`;case 0:return f?"today":`this ${a[n][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,u=a[n],d=i?c?u[1]:u[2]||u[1]:c?a[n][0]:n;return o?`${l} ${d} ago`:`in ${l} ${d}`}function yf(n,e){let t="";for(const i of n)i.literal?t+=i.val:t+=e(i.val);return t}const P_={D:ml,DD:Pm,DDD:Mm,DDDD:Am,t:Lm,tt:Nm,ttt:Rm,tttt:Fm,T:qm,TT:zm,TTT:jm,TTTT:Vm,f:Um,ff:Hm,fff:Ym,ffff:Zm,F:Bm,FF:Wm,FFF:Km,FFFF:Jm};class An{static create(e,t={}){return new An(e,t)}static parseFormat(e){let t=null,i="",a=!1;const s=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?((i.length>0||a)&&s.push({literal:a||/^\s+$/.test(i),val:i===""?"'":i}),t=null,i="",a=!a):a||l===t?i+=l:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=l,t=l)}return i.length>0&&s.push({literal:a||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return P_[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,i=void 0){if(this.opts.forceSimple)return gn(e,t);const a={...this.opts};return t>0&&(a.padTo=t),i&&(a.signDisplay=i),this.loc.numberFormatter(a).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(b,v)=>this.loc.extract(e,b,v),o=b=>e.isOffsetFixed&&e.offset===0&&b.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,b.format):"",l=()=>i?I_(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(b,v)=>i?E_(e,b):s(v?{month:b}:{month:b,day:"numeric"},"month"),u=(b,v)=>i?C_(e,b):s(v?{weekday:b}:{weekday:b,month:"long",day:"numeric"},"weekday"),d=b=>{const v=An.macroTokenToFormatOpts(b);return v?this.formatWithSystemDefault(e,v):b},f=b=>i?O_(e,b):s({era:b},"era"),h=b=>{switch(b){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return a?s({day:"numeric"},"day"):this.num(e.day);case"dd":return a?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return a?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return a?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return a?s({month:"numeric"},"month"):this.num(e.month);case"MM":return a?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return a?s({year:"numeric"},"year"):this.num(e.year);case"yy":return a?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return a?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return a?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(b)}};return yf(An.parseFormat(t),h)}formatDurationFromString(e,t){const i=this.opts.signMode==="negativeLargestOnly"?-1:1,a=d=>{switch(d[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(d,f)=>h=>{const b=a(h);if(b){const v=f.isNegativeDuration&&b!==f.largestUnit?i:1;let g;return this.opts.signMode==="negativeLargestOnly"&&b!==f.largestUnit?g="never":this.opts.signMode==="all"?g="always":g="auto",this.num(d.get(b)*v,h.length,g)}else return h},o=An.parseFormat(t),l=o.reduce((d,{literal:f,val:h})=>f?d:d.concat(h),[]),c=e.shiftTo(...l.map(a).filter(d=>d)),u={isNegativeDuration:c<0,largestUnit:Object.keys(c.values)[0]};return yf(o,s(c,u))}}const pp=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function hs(...n){const e=n.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function vs(...n){return e=>n.reduce(([t,i,a],s)=>{const[o,l,c]=s(e,a);return[{...t,...o},l||i,c]},[{},null,1]).slice(0,2)}function ms(n,...e){if(n==null)return[null,null];for(const[t,i]of e){const a=t.exec(n);if(a)return i(a)}return[null,null]}function gp(...n){return(e,t)=>{const i={};let a;for(a=0;a<n.length;a++)i[n[a]]=Nr(e[t+a]);return[i,null,t+a]}}const bp=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,M_=`(?:${bp.source}?(?:\\[(${pp.source})\\])?)?`,rd=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,yp=RegExp(`${rd.source}${M_}`),ad=RegExp(`(?:[Tt]${yp.source})?`),A_=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,L_=/(\d{4})-?W(\d\d)(?:-?(\d))?/,N_=/(\d{4})-?(\d{3})/,R_=gp("weekYear","weekNumber","weekDay"),F_=gp("year","ordinal"),q_=/(\d{4})-(\d\d)-(\d\d)/,_p=RegExp(`${rd.source} ?(?:${bp.source}|(${pp.source}))?`),z_=RegExp(`(?: ${_p.source})?`);function Ja(n,e,t){const i=n[e];return Dt(i)?t:Nr(i)}function j_(n,e){return[{year:Ja(n,e),month:Ja(n,e+1,1),day:Ja(n,e+2,1)},null,e+3]}function ps(n,e){return[{hours:Ja(n,e,0),minutes:Ja(n,e+1,0),seconds:Ja(n,e+2,0),milliseconds:nd(n[e+3])},null,e+4]}function vo(n,e){const t=!n[e]&&!n[e+1],i=Ul(n[e+1],n[e+2]),a=t?null:Yn.instance(i);return[{},a,e+3]}function mo(n,e){const t=n[e]?$r.create(n[e]):null;return[{},t,e+1]}const V_=RegExp(`^T?${rd.source}$`),U_=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function B_(n){const[e,t,i,a,s,o,l,c,u]=n,d=e[0]==="-",f=c&&c[0]==="-",h=(b,v=!1)=>b!==void 0&&(v||b&&d)?-b:b;return[{years:h(na(t)),months:h(na(i)),weeks:h(na(a)),days:h(na(s)),hours:h(na(o)),minutes:h(na(l)),seconds:h(na(c),c==="-0"),milliseconds:h(nd(u),f)}]}const H_={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function sd(n,e,t,i,a,s,o){const l={year:e.length===2?vu(Nr(e)):Nr(e),month:cp.indexOf(t)+1,day:Nr(i),hour:Nr(a),minute:Nr(s)};return o&&(l.second=Nr(o)),n&&(l.weekday=n.length>3?dp.indexOf(n)+1:fp.indexOf(n)+1),l}const W_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Y_(n){const[,e,t,i,a,s,o,l,c,u,d,f]=n,h=sd(e,a,i,t,s,o,l);let b;return c?b=H_[c]:u?b=0:b=Ul(d,f),[h,new Yn(b)]}function K_(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Z_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,J_=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,G_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function _f(n){const[,e,t,i,a,s,o,l]=n;return[sd(e,a,i,t,s,o,l),Yn.utcInstance]}function X_(n){const[,e,t,i,a,s,o,l]=n;return[sd(e,l,t,i,a,s,o),Yn.utcInstance]}const Q_=hs(A_,ad),ex=hs(L_,ad),tx=hs(N_,ad),nx=hs(yp),xp=vs(j_,ps,vo,mo),ix=vs(R_,ps,vo,mo),rx=vs(F_,ps,vo,mo),ax=vs(ps,vo,mo);function sx(n){return ms(n,[Q_,xp],[ex,ix],[tx,rx],[nx,ax])}function ox(n){return ms(K_(n),[W_,Y_])}function lx(n){return ms(n,[Z_,_f],[J_,_f],[G_,X_])}function cx(n){return ms(n,[U_,B_])}const ux=vs(ps);function dx(n){return ms(n,[V_,ux])}const fx=hs(q_,z_),hx=hs(_p),vx=vs(ps,vo,mo);function mx(n){return ms(n,[fx,xp],[hx,vx])}const xf="Invalid Duration",wp={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},px={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...wp},xi=146097/400,Fa=146097/4800,gx={years:{quarters:4,months:12,weeks:xi/7,days:xi,hours:xi*24,minutes:xi*24*60,seconds:xi*24*60*60,milliseconds:xi*24*60*60*1e3},quarters:{months:3,weeks:xi/28,days:xi/4,hours:xi*24/4,minutes:xi*24*60/4,seconds:xi*24*60*60/4,milliseconds:xi*24*60*60*1e3/4},months:{weeks:Fa/7,days:Fa,hours:Fa*24,minutes:Fa*24*60,seconds:Fa*24*60*60,milliseconds:Fa*24*60*60*1e3},...wp},ha=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],bx=ha.slice(0).reverse();function vr(n,e,t=!1){const i={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new Vt(i)}function kp(n,e){let t=e.milliseconds??0;for(const i of bx.slice(1))e[i]&&(t+=e[i]*n[i].milliseconds);return t}function wf(n,e){const t=kp(n,e)<0?-1:1;ha.reduceRight((i,a)=>{if(Dt(e[a]))return i;if(i){const s=e[i]*t,o=n[a][i],l=Math.floor(s/o);e[a]+=l*t,e[i]-=l*o*t}return a},null),ha.reduce((i,a)=>{if(Dt(e[a]))return i;if(i){const s=e[i]%1;e[i]-=s,e[a]+=s*n[i][a]}return a},null)}function kf(n){const e={};for(const[t,i]of Object.entries(n))i!==0&&(e[t]=i);return e}class Vt{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?gx:px;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Kt.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return Vt.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Pn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Vt({values:bl(e,Vt.normalizeUnit),loc:Kt.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Br(e))return Vt.fromMillis(e);if(Vt.isDuration(e))return e;if(typeof e=="object")return Vt.fromObject(e);throw new Pn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=cx(e);return i?Vt.fromObject(i,t):Vt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=dx(e);return i?Vt.fromObject(i,t):Vt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Pn("need to specify a reason the Duration is invalid");const i=e instanceof qi?e:new qi(e,t);if(cn.throwOnInvalid)throw new By(i);return new Vt({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Dm(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?An.create(this.loc,i).formatDurationFromString(this,e):xf}toHuman(e={}){if(!this.isValid)return xf;const t=e.showZeros!==!1,i=ha.map(a=>{const s=this.values[a];return Dt(s)||s===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:a.slice(0,-1)}).format(s)}).filter(a=>a);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=id(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},$t.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?kp(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Vt.fromDurationLike(e),i={};for(const a of ha)(rs(t.values,a)||rs(this.values,a))&&(i[a]=t.get(a)+this.get(a));return vr(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=Vt.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=lp(e(this.values[i],i));return vr(this,{values:t},!0)}get(e){return this[Vt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...bl(e,Vt.normalizeUnit)};return vr(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:a}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:a,conversionAccuracy:i};return vr(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return wf(this.matrix,e),vr(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=kf(this.normalize().shiftToAll().toObject());return vr(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Vt.normalizeUnit(o));const t={},i={},a=this.toObject();let s;for(const o of ha)if(e.indexOf(o)>=0){s=o;let l=0;for(const u in i)l+=this.matrix[u][o]*i[u],i[u]=0;Br(a[o])&&(l+=a[o]);const c=Math.trunc(l);t[o]=c,i[o]=(l*1e3-c*1e3)/1e3}else Br(a[o])&&(i[o]=a[o]);for(const o in i)i[o]!==0&&(t[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return wf(this.matrix,t),vr(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return vr(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=kf(this.values);return vr(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,a){return i===void 0||i===0?a===void 0||a===0:i===a}for(const i of ha)if(!t(this.values[i],e.values[i]))return!1;return!0}}const qa="Invalid Interval";function yx(n,e){return!n||!n.isValid?ln.invalid("missing or invalid start"):!e||!e.isValid?ln.invalid("missing or invalid end"):e<n?ln.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class ln{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Pn("need to specify a reason the Interval is invalid");const i=e instanceof qi?e:new qi(e,t);if(cn.throwOnInvalid)throw new Uy(i);return new ln({invalid:i})}static fromDateTimes(e,t){const i=ks(e),a=ks(t),s=yx(i,a);return s??new ln({start:i,end:a})}static after(e,t){const i=Vt.fromDurationLike(t),a=ks(e);return ln.fromDateTimes(a,a.plus(i))}static before(e,t){const i=Vt.fromDurationLike(t),a=ks(e);return ln.fromDateTimes(a.minus(i),a)}static fromISO(e,t){const[i,a]=(e||"").split("/",2);if(i&&a){let s,o;try{s=$t.fromISO(i,t),o=s.isValid}catch{o=!1}let l,c;try{l=$t.fromISO(a,t),c=l.isValid}catch{c=!1}if(o&&c)return ln.fromDateTimes(s,l);if(o){const u=Vt.fromISO(a,t);if(u.isValid)return ln.after(s,u)}else if(c){const u=Vt.fromISO(i,t);if(u.isValid)return ln.before(l,u)}}return ln.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let a;return t?.useLocaleWeeks?a=this.end.reconfigure({locale:i.locale}):a=this.end,a=a.startOf(e,t),Math.floor(a.diff(i,e).get(e))+(a.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?ln.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(ks).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),i=[];let{s:a}=this,s=0;for(;a<this.e;){const o=t[s]||this.e,l=+o>+this.e?this.e:o;i.push(ln.fromDateTimes(a,l)),a=l,s+=1}return i}splitBy(e){const t=Vt.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,a=1,s;const o=[];for(;i<this.e;){const l=this.start.plus(t.mapUnits(c=>c*a));s=+l>+this.e?this.e:l,o.push(ln.fromDateTimes(i,s)),i=s,a+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:ln.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return ln.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((a,s)=>a.s-s.s).reduce(([a,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[a,s.union(o)]:[a.concat([s]),o]:[a,o],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const a=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((c,u)=>c.time-u.time);for(const c of l)i+=c.type==="s"?1:-1,i===1?t=c.time:(t&&+t!=+c.time&&a.push(ln.fromDateTimes(t,c.time)),t=null);return ln.merge(a)}difference(...e){return ln.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â ${this.e.toISO()})`:qa}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ml,t={}){return this.isValid?An.create(this.s.loc.clone(t),e).formatInterval(this):qa}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:qa}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:qa}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:qa}toFormat(e,{separator:t=" â "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:qa}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Vt.invalid(this.invalidReason)}mapEndpoints(e){return ln.fromDateTimes(e(this.s),e(this.e))}}class Co{static hasDST(e=cn.defaultZone){const t=$t.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return $r.isValidZone(e)}static normalizeZone(e){return Rr(e,cn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Kt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Kt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Kt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null,outputCalendar:s="gregory"}={}){return(a||Kt.create(t,i,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null,outputCalendar:s="gregory"}={}){return(a||Kt.create(t,i,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null}={}){return(a||Kt.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null}={}){return(a||Kt.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Kt.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Kt.create(t,null,"gregory").eras(e)}static features(){return{relative:ap(),localeWeek:sp()}}}function Sf(n,e){const t=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(n);return Math.floor(Vt.fromMillis(i).as("days"))}function _x(n,e,t){const i=[["years",(c,u)=>u.year-c.year],["quarters",(c,u)=>u.quarter-c.quarter+(u.year-c.year)*4],["months",(c,u)=>u.month-c.month+(u.year-c.year)*12],["weeks",(c,u)=>{const d=Sf(c,u);return(d-d%7)/7}],["days",Sf]],a={},s=n;let o,l;for(const[c,u]of i)t.indexOf(c)>=0&&(o=c,a[c]=u(n,e),l=s.plus(a),l>e?(a[c]--,n=s.plus(a),n>e&&(l=n,a[c]--,n=s.plus(a))):n=l);return[n,a,l,o]}function xx(n,e,t,i){let[a,s,o,l]=_x(n,e,t);const c=e-a,u=t.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);u.length===0&&(o<e&&(o=a.plus({[l]:1})),o!==a&&(s[l]=(s[l]||0)+c/(o-a)));const d=Vt.fromObject(s,i);return u.length>0?Vt.fromMillis(c,i).shiftTo(...u).plus(d):d}const wx="missing Intl.DateTimeFormat.formatToParts support";function Ht(n,e=t=>t){return{regex:n,deser:([t])=>e(f_(t))}}const kx="Â ",Sp=`[ ${kx}]`,Tp=new RegExp(Sp,"g");function Sx(n){return n.replace(/\./g,"\\.?").replace(Tp,Sp)}function Tf(n){return n.replace(/\./g,"").replace(Tp," ").toLowerCase()}function Fi(n,e){return n===null?null:{regex:RegExp(n.map(Sx).join("|")),deser:([t])=>n.findIndex(i=>Tf(t)===Tf(i))+e}}function $f(n,e){return{regex:n,deser:([,t,i])=>Ul(t,i),groups:e}}function Eo(n){return{regex:n,deser:([e])=>e}}function Tx(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function $x(n,e){const t=Ri(e),i=Ri(e,"{2}"),a=Ri(e,"{3}"),s=Ri(e,"{4}"),o=Ri(e,"{6}"),l=Ri(e,"{1,2}"),c=Ri(e,"{1,3}"),u=Ri(e,"{1,6}"),d=Ri(e,"{1,9}"),f=Ri(e,"{2,4}"),h=Ri(e,"{4,6}"),b=m=>({regex:RegExp(Tx(m.val)),deser:([k])=>k,literal:!0}),g=(m=>{if(n.literal)return b(m);switch(m.val){case"G":return Fi(e.eras("short"),0);case"GG":return Fi(e.eras("long"),0);case"y":return Ht(u);case"yy":return Ht(f,vu);case"yyyy":return Ht(s);case"yyyyy":return Ht(h);case"yyyyyy":return Ht(o);case"M":return Ht(l);case"MM":return Ht(i);case"MMM":return Fi(e.months("short",!0),1);case"MMMM":return Fi(e.months("long",!0),1);case"L":return Ht(l);case"LL":return Ht(i);case"LLL":return Fi(e.months("short",!1),1);case"LLLL":return Fi(e.months("long",!1),1);case"d":return Ht(l);case"dd":return Ht(i);case"o":return Ht(c);case"ooo":return Ht(a);case"HH":return Ht(i);case"H":return Ht(l);case"hh":return Ht(i);case"h":return Ht(l);case"mm":return Ht(i);case"m":return Ht(l);case"q":return Ht(l);case"qq":return Ht(i);case"s":return Ht(l);case"ss":return Ht(i);case"S":return Ht(c);case"SSS":return Ht(a);case"u":return Eo(d);case"uu":return Eo(l);case"uuu":return Ht(t);case"a":return Fi(e.meridiems(),0);case"kkkk":return Ht(s);case"kk":return Ht(f,vu);case"W":return Ht(l);case"WW":return Ht(i);case"E":case"c":return Ht(t);case"EEE":return Fi(e.weekdays("short",!1),1);case"EEEE":return Fi(e.weekdays("long",!1),1);case"ccc":return Fi(e.weekdays("short",!0),1);case"cccc":return Fi(e.weekdays("long",!0),1);case"Z":case"ZZ":return $f(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return $f(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return Eo(/[a-z_+-/]{1,256}?/i);case" ":return Eo(/[^\S\n\r]/);default:return b(m)}})(n)||{invalidReason:wx};return g.token=n,g}const Ix={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Cx(n,e,t){const{type:i,value:a}=n;if(i==="literal"){const c=/^\s+$/.test(a);return{literal:!c,val:c?" ":a}}const s=e[i];let o=i;i==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let l=Ix[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function Ex(n){return[`^${n.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,n]}function Ox(n,e,t){const i=n.match(e);if(i){const a={};let s=1;for(const o in t)if(rs(t,o)){const l=t[o],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(a[l.token.val[0]]=l.deser(i.slice(s,s+c))),s+=c}return[i,a]}else return[i,{}]}function Dx(n){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return Dt(n.z)||(t=$r.create(n.z)),Dt(n.Z)||(t||(t=new Yn(n.Z)),i=n.Z),Dt(n.q)||(n.M=(n.q-1)*3+1),Dt(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),Dt(n.u)||(n.S=nd(n.u)),[Object.keys(n).reduce((s,o)=>{const l=e(o);return l&&(s[l]=n[o]),s},{}),t,i]}let _c=null;function Px(){return _c||(_c=$t.fromMillis(1555555555555)),_c}function Mx(n,e){if(n.literal)return n;const t=An.macroTokenToFormatOpts(n.val),i=Ep(t,e);return i==null||i.includes(void 0)?n:i}function $p(n,e){return Array.prototype.concat(...n.map(t=>Mx(t,e)))}class Ip{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=$p(An.parseFormat(t),e),this.units=this.tokens.map(i=>$x(i,e)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,a]=Ex(this.units);this.regex=RegExp(i,"i"),this.handlers=a}}explainFromTokens(e){if(this.isValid){const[t,i]=Ox(e,this.regex,this.handlers),[a,s,o]=i?Dx(i):[null,null,void 0];if(rs(i,"a")&&rs(i,"H"))throw new Ha("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:i,result:a,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Cp(n,e,t){return new Ip(n,t).explainFromTokens(e)}function Ax(n,e,t){const{result:i,zone:a,specificOffset:s,invalidReason:o}=Cp(n,e,t);return[i,a,s,o]}function Ep(n,e){if(!n)return null;const i=An.create(e,n).dtFormatter(Px()),a=i.formatToParts(),s=i.resolvedOptions();return a.map(o=>Cx(o,n,s))}const xc="Invalid DateTime",If=864e13;function Ds(n){return new qi("unsupported zone",`the zone "${n.name}" is not supported`)}function wc(n){return n.weekData===null&&(n.weekData=pl(n.c)),n.weekData}function kc(n){return n.localWeekData===null&&(n.localWeekData=pl(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function ia(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new $t({...t,...e,old:t})}function Op(n,e,t){let i=n-e*60*1e3;const a=t.offset(i);if(e===a)return[i,e];i-=(a-e)*60*1e3;const s=t.offset(i);return a===s?[i,a]:[n-Math.min(a,s)*60*1e3,Math.max(a,s)]}function Oo(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function el(n,e,t){return Op(Vl(n),e,t)}function Cf(n,e){const t=n.o,i=n.c.year+Math.trunc(e.years),a=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:i,month:a,day:Math.min(n.c.day,gl(i,a))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Vt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=Vl(s);let[c,u]=Op(l,t,n.zone);return o!==0&&(c+=o,u=n.zone.offset(c)),{ts:c,o:u}}function za(n,e,t,i,a,s){const{setZone:o,zone:l}=t;if(n&&Object.keys(n).length!==0||e){const c=e||l,u=$t.fromObject(n,{...t,zone:c,specificOffset:s});return o?u:u.setZone(l)}else return $t.invalid(new qi("unparsable",`the input "${a}" can't be parsed as ${i}`))}function Do(n,e,t=!0){return n.isValid?An.create(Kt.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function Sc(n,e,t){const i=n.c.year>9999||n.c.year<0;let a="";if(i&&n.c.year>=0&&(a+="+"),a+=gn(n.c.year,i?6:4),t==="year")return a;if(e){if(a+="-",a+=gn(n.c.month),t==="month")return a;a+="-"}else if(a+=gn(n.c.month),t==="month")return a;return a+=gn(n.c.day),a}function Ef(n,e,t,i,a,s,o){let l=!t||n.c.millisecond!==0||n.c.second!==0,c="";switch(o){case"day":case"month":case"year":break;default:if(c+=gn(n.c.hour),o==="hour")break;if(e){if(c+=":",c+=gn(n.c.minute),o==="minute")break;l&&(c+=":",c+=gn(n.c.second))}else{if(c+=gn(n.c.minute),o==="minute")break;l&&(c+=gn(n.c.second))}if(o==="second")break;l&&(!i||n.c.millisecond!==0)&&(c+=".",c+=gn(n.c.millisecond,3))}return a&&(n.isOffsetFixed&&n.offset===0&&!s?c+="Z":n.o<0?(c+="-",c+=gn(Math.trunc(-n.o/60)),c+=":",c+=gn(Math.trunc(-n.o%60))):(c+="+",c+=gn(Math.trunc(n.o/60)),c+=":",c+=gn(Math.trunc(n.o%60)))),s&&(c+="["+n.zone.ianaName+"]"),c}const Dp={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Lx={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Nx={ordinal:1,hour:0,minute:0,second:0,millisecond:0},tl=["year","month","day","hour","minute","second","millisecond"],Rx=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Fx=["year","ordinal","hour","minute","second","millisecond"];function nl(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new Dm(n);return e}function Of(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return nl(n)}}function qx(n){if(Ps===void 0&&(Ps=cn.now()),n.type!=="iana")return n.offset(Ps);const e=n.name;let t=mu.get(e);return t===void 0&&(t=n.offset(Ps),mu.set(e,t)),t}function Df(n,e){const t=Rr(e.zone,cn.defaultZone);if(!t.isValid)return $t.invalid(Ds(t));const i=Kt.fromObject(e);let a,s;if(Dt(n.year))a=cn.now();else{for(const c of tl)Dt(n[c])&&(n[c]=Dp[c]);const o=ip(n)||rp(n);if(o)return $t.invalid(o);const l=qx(t);[a,s]=el(n,l,t)}return new $t({ts:a,zone:t,loc:i,o:s})}function Pf(n,e,t){const i=Dt(t.round)?!0:t.round,a=Dt(t.rounding)?"trunc":t.rounding,s=(l,c)=>(l=id(l,i||t.calendary?0:2,t.calendary?"round":a),e.loc.clone(t).relFormatter(t).format(l,c)),o=l=>t.calendary?e.hasSame(n,l)?0:e.startOf(l).diff(n.startOf(l),l).get(l):e.diff(n,l).get(l);if(t.unit)return s(o(t.unit),t.unit);for(const l of t.units){const c=o(l);if(Math.abs(c)>=1)return s(c,l)}return s(n>e?-0:0,t.units[t.units.length-1])}function Mf(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let Ps;const mu=new Map;class $t{constructor(e){const t=e.zone||cn.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new qi("invalid input"):null)||(t.isValid?null:Ds(t));this.ts=Dt(e.ts)?cn.now():e.ts;let a=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[a,s]=[e.old.c,e.old.o];else{const l=Br(e.o)&&!e.old?e.o:t.offset(this.ts);a=Oo(this.ts,l),i=Number.isNaN(a.year)?new qi("invalid input"):null,a=i?null:a,s=i?null:l}this._zone=t,this.loc=e.loc||Kt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=a,this.o=s,this.isLuxonDateTime=!0}static now(){return new $t({})}static local(){const[e,t]=Mf(arguments),[i,a,s,o,l,c,u]=t;return Df({year:i,month:a,day:s,hour:o,minute:l,second:c,millisecond:u},e)}static utc(){const[e,t]=Mf(arguments),[i,a,s,o,l,c,u]=t;return e.zone=Yn.utcInstance,Df({year:i,month:a,day:s,hour:o,minute:l,second:c,millisecond:u},e)}static fromJSDate(e,t={}){const i=g_(e)?e.valueOf():NaN;if(Number.isNaN(i))return $t.invalid("invalid input");const a=Rr(t.zone,cn.defaultZone);return a.isValid?new $t({ts:i,zone:a,loc:Kt.fromObject(t)}):$t.invalid(Ds(a))}static fromMillis(e,t={}){if(Br(e))return e<-If||e>If?$t.invalid("Timestamp out of range"):new $t({ts:e,zone:Rr(t.zone,cn.defaultZone),loc:Kt.fromObject(t)});throw new Pn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Br(e))return new $t({ts:e*1e3,zone:Rr(t.zone,cn.defaultZone),loc:Kt.fromObject(t)});throw new Pn("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=Rr(t.zone,cn.defaultZone);if(!i.isValid)return $t.invalid(Ds(i));const a=Kt.fromObject(t),s=bl(e,Of),{minDaysInFirstWeek:o,startOfWeek:l}=pf(s,a),c=cn.now(),u=Dt(t.specificOffset)?i.offset(c):t.specificOffset,d=!Dt(s.ordinal),f=!Dt(s.year),h=!Dt(s.month)||!Dt(s.day),b=f||h,v=s.weekYear||s.weekNumber;if((b||d)&&v)throw new Ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&d)throw new Ha("Can't mix ordinal dates with month/day");const g=v||s.weekday&&!b;let m,k,x=Oo(c,u);g?(m=Rx,k=Lx,x=pl(x,o,l)):d?(m=Fx,k=Nx,x=yc(x)):(m=tl,k=Dp);let C=!1;for(const A of m){const L=s[A];Dt(L)?C?s[A]=k[A]:s[A]=x[A]:C=!0}const O=g?v_(s,o,l):d?m_(s):ip(s),$=O||rp(s);if($)return $t.invalid($);const E=g?vf(s,o,l):d?mf(s):s,[w,I]=el(E,u,i),D=new $t({ts:w,zone:i,o:I,loc:a});return s.weekday&&b&&e.weekday!==D.weekday?$t.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${D.toISO()}`):D.isValid?D:$t.invalid(D.invalid)}static fromISO(e,t={}){const[i,a]=sx(e);return za(i,a,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,a]=ox(e);return za(i,a,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,a]=lx(e);return za(i,a,t,"HTTP",t)}static fromFormat(e,t,i={}){if(Dt(e)||Dt(t))throw new Pn("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:s=null}=i,o=Kt.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0}),[l,c,u,d]=Ax(o,e,t);return d?$t.invalid(d):za(l,c,i,`format ${t}`,e,u)}static fromString(e,t,i={}){return $t.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,a]=mx(e);return za(i,a,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Pn("need to specify a reason the DateTime is invalid");const i=e instanceof qi?e:new qi(e,t);if(cn.throwOnInvalid)throw new Vy(i);return new $t({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=Ep(e,Kt.fromObject(t));return i?i.map(a=>a?a.val:null).join(""):null}static expandFormat(e,t={}){return $p(An.parseFormat(e),Kt.fromObject(t)).map(a=>a.val).join("")}static resetCache(){Ps=void 0,mu.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?wc(this).weekYear:NaN}get weekNumber(){return this.isValid?wc(this).weekNumber:NaN}get weekday(){return this.isValid?wc(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?kc(this).weekday:NaN}get localWeekNumber(){return this.isValid?kc(this).weekNumber:NaN}get localWeekYear(){return this.isValid?kc(this).weekYear:NaN}get ordinal(){return this.isValid?yc(this.c).ordinal:NaN}get monthShort(){return this.isValid?Co.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Co.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Co.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Co.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=Vl(this.c),a=this.zone.offset(i-e),s=this.zone.offset(i+e),o=this.zone.offset(i-a*t),l=this.zone.offset(i-s*t);if(o===l)return[this];const c=i-o*t,u=i-l*t,d=Oo(c,o),f=Oo(u,l);return d.hour===f.hour&&d.minute===f.minute&&d.second===f.second&&d.millisecond===f.millisecond?[ia(this,{ts:c}),ia(this,{ts:u})]:[this]}get isInLeapYear(){return ho(this.year)}get daysInMonth(){return gl(this.year,this.month)}get daysInYear(){return this.isValid?Za(this.year):NaN}get weeksInWeekYear(){return this.isValid?Zs(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Zs(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:a}=An.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:a}}toUTC(e=0,t={}){return this.setZone(Yn.instance(e),t)}toLocal(){return this.setZone(cn.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=Rr(e,cn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let a=this.ts;if(t||i){const s=e.offset(this.ts),o=this.toObject();[a]=el(o,s,e)}return ia(this,{ts:a,zone:e})}else return $t.invalid(Ds(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const a=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return ia(this,{loc:a})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=bl(e,Of),{minDaysInFirstWeek:i,startOfWeek:a}=pf(t,this.loc),s=!Dt(t.weekYear)||!Dt(t.weekNumber)||!Dt(t.weekday),o=!Dt(t.ordinal),l=!Dt(t.year),c=!Dt(t.month)||!Dt(t.day),u=l||c,d=t.weekYear||t.weekNumber;if((u||o)&&d)throw new Ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Ha("Can't mix ordinal dates with month/day");let f;s?f=vf({...pl(this.c,i,a),...t},i,a):Dt(t.ordinal)?(f={...this.toObject(),...t},Dt(t.day)&&(f.day=Math.min(gl(f.year,f.month),f.day))):f=mf({...yc(this.c),...t});const[h,b]=el(f,this.o,this.zone);return ia(this,{ts:h,o:b})}plus(e){if(!this.isValid)return this;const t=Vt.fromDurationLike(e);return ia(this,Cf(this,t))}minus(e){if(!this.isValid)return this;const t=Vt.fromDurationLike(e).negate();return ia(this,Cf(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},a=Vt.normalizeUnit(e);switch(a){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(a==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(a==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?An.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):xc}toLocaleString(e=ml,t={}){return this.isValid?An.create(this.loc.clone(t),e).formatDateTime(this):xc}toLocaleParts(e={}){return this.isValid?An.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:a=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=nl(o);const l=e==="extended";let c=Sc(this,l,o);return tl.indexOf(o)>=3&&(c+="T"),c+=Ef(this,l,t,i,a,s,o),c}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?Sc(this,e==="extended",nl(t)):null}toISOWeekDate(){return Do(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:a=!1,extendedZone:s=!1,format:o="extended",precision:l="milliseconds"}={}){return this.isValid?(l=nl(l),(a&&tl.indexOf(l)>=3?"T":"")+Ef(this,o==="extended",t,e,i,s,l)):null}toRFC2822(){return Do(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Do(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Sc(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let a="HH:mm:ss.SSS";return(t||e)&&(i&&(a+=" "),t?a+="z":e&&(a+="ZZ")),Do(this,a,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():xc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return Vt.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=b_(t).map(Vt.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,c=o?e:this,u=xx(l,c,s,a);return o?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff($t.now(),e,t)}until(e){return this.isValid?ln.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const a=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,i)<=a&&a<=s.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||$t.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let a=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(a=e.unit,s=void 0),Pf(t,this.plus(i),{...e,numeric:"always",units:a,unit:s})}toRelativeCalendar(e={}){return this.isValid?Pf(e.base||$t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every($t.isDateTime))throw new Pn("min requires all arguments be DateTimes");return gf(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every($t.isDateTime))throw new Pn("max requires all arguments be DateTimes");return gf(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:a=null,numberingSystem:s=null}=i,o=Kt.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0});return Cp(o,e,t)}static fromStringExplain(e,t,i={}){return $t.fromFormatExplain(e,t,i)}static buildFormatParser(e,t={}){const{locale:i=null,numberingSystem:a=null}=t,s=Kt.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0});return new Ip(s,e)}static fromFormatParser(e,t,i={}){if(Dt(e)||Dt(t))throw new Pn("fromFormatParser requires an input string and a format parser");const{locale:a=null,numberingSystem:s=null}=i,o=Kt.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0});if(!o.equals(t.locale))throw new Pn(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:l,zone:c,specificOffset:u,invalidReason:d}=t.explainFromTokens(e);return d?$t.invalid(d):za(l,c,i,`format ${t.format}`,e,u)}static get DATE_SHORT(){return ml}static get DATE_MED(){return Pm}static get DATE_MED_WITH_WEEKDAY(){return Hy}static get DATE_FULL(){return Mm}static get DATE_HUGE(){return Am}static get TIME_SIMPLE(){return Lm}static get TIME_WITH_SECONDS(){return Nm}static get TIME_WITH_SHORT_OFFSET(){return Rm}static get TIME_WITH_LONG_OFFSET(){return Fm}static get TIME_24_SIMPLE(){return qm}static get TIME_24_WITH_SECONDS(){return zm}static get TIME_24_WITH_SHORT_OFFSET(){return jm}static get TIME_24_WITH_LONG_OFFSET(){return Vm}static get DATETIME_SHORT(){return Um}static get DATETIME_SHORT_WITH_SECONDS(){return Bm}static get DATETIME_MED(){return Hm}static get DATETIME_MED_WITH_SECONDS(){return Wm}static get DATETIME_MED_WITH_WEEKDAY(){return Wy}static get DATETIME_FULL(){return Ym}static get DATETIME_FULL_WITH_SECONDS(){return Km}static get DATETIME_HUGE(){return Zm}static get DATETIME_HUGE_WITH_SECONDS(){return Jm}}function ks(n){if($t.isDateTime(n))return n;if(n&&n.valueOf&&Br(n.valueOf()))return $t.fromJSDate(n);if(n&&typeof n=="object")return $t.fromObject(n);throw new Pn(`Unknown datetime argument: ${n}, of type ${typeof n}`)}const zx=[".jpg",".jpeg",".png",".svg",".gif",".jfif",".webp",".avif"],jx=[".mp4",".avi",".mov",".3gp",".wmv"],Vx=[".aa",".aac",".m4v",".mp3",".ogg",".oga",".mogg",".amr"],Ux=[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".odp",".odt",".ods",".txt"],Bx=["relation","file","select"],Hx=["text","email","url","editor"],Pp=[{level:-4,label:"DEBUG",class:""},{level:0,label:"INFO",class:"label-success"},{level:4,label:"WARN",class:"label-warning"},{level:8,label:"ERROR",class:"label-danger"}];class F{static isObject(e){return e!==null&&typeof e=="object"&&e.constructor===Object}static clone(e){return typeof structuredClone<"u"?structuredClone(e):JSON.parse(JSON.stringify(e))}static zeroValue(e){switch(typeof e){case"string":return"";case"number":return 0;case"boolean":return!1;case"object":return e===null?null:Array.isArray(e)?[]:{};case"undefined":return;default:return null}}static isEmpty(e){return e===""||e===null||typeof e>"u"||Array.isArray(e)&&e.length===0||F.isObject(e)&&Object.keys(e).length===0}static isInput(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return t==="input"||t==="select"||t==="textarea"||e?.isContentEditable}static isFocusable(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return F.isInput(e)||t==="button"||t==="a"||t==="details"||e?.tabIndex>=0}static hasNonEmptyProps(e){for(let t in e)if(!F.isEmpty(e[t]))return!0;return!1}static toArray(e,t=!1){return Array.isArray(e)?e.slice():(t||!F.isEmpty(e))&&typeof e<"u"?[e]:[]}static inArray(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t)return!0;return!1}static removeByValue(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t){e.splice(i,1);break}}static pushUnique(e,t){F.inArray(e,t)||e.push(t)}static mergeUnique(e,t){for(let i of t)F.pushUnique(e,i);return e}static findByKey(e,t,i){e=Array.isArray(e)?e:[];for(let a in e)if(e[a][t]==i)return e[a];return null}static groupByKey(e,t){e=Array.isArray(e)?e:[];const i={};for(let a in e)i[e[a][t]]=i[e[a][t]]||[],i[e[a][t]].push(e[a]);return i}static removeByKey(e,t,i){for(let a in e)if(e[a][t]==i){e.splice(a,1);break}}static pushOrReplaceByKey(e,t,i="id"){for(let a=e.length-1;a>=0;a--)if(e[a][i]==t[i]){e[a]=t;return}e.push(t)}static filterDuplicatesByKey(e,t="id"){e=Array.isArray(e)?e:[];const i={};for(const a of e)i[a[t]]=a;return Object.values(i)}static filterRedactedProps(e,t="******"){const i=JSON.parse(JSON.stringify(e||{}));for(let a in i)typeof i[a]=="object"&&i[a]!==null?i[a]=F.filterRedactedProps(i[a],t):i[a]===t&&delete i[a];return i}static getNestedVal(e,t,i=null,a="."){let s=e||{},o=(t||"").split(a);for(const l of o){if(!F.isObject(s)&&!Array.isArray(s)||typeof s[l]>"u")return i;s=s[l]}return s}static setByPath(e,t,i,a="."){if(e===null||typeof e!="object"){console.warn("setByPath: data not an object or array.");return}let s=e,o=t.split(a),l=o.pop();for(const c of o)(!F.isObject(s)&&!Array.isArray(s)||!F.isObject(s[c])&&!Array.isArray(s[c]))&&(s[c]={}),s=s[c];s[l]=i}static deleteByPath(e,t,i="."){let a=e||{},s=(t||"").split(i),o=s.pop();for(const l of s)(!F.isObject(a)&&!Array.isArray(a)||!F.isObject(a[l])&&!Array.isArray(a[l]))&&(a[l]={}),a=a[l];Array.isArray(a)?a.splice(o,1):F.isObject(a)&&delete a[o],s.length>0&&(Array.isArray(a)&&!a.length||F.isObject(a)&&!Object.keys(a).length)&&(Array.isArray(e)&&e.length>0||F.isObject(e)&&Object.keys(e).length>0)&&F.deleteByPath(e,s.join(i),i)}static randomString(e=10){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}static randomSecret(e=15){if(typeof crypto>"u")return F.randomString(e);const t=new Uint8Array(e);crypto.getRandomValues(t);const i="-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let a="";for(let s=0;s<e;s++)a+=i.charAt(t[s]%i.length);return a}static sentenize(e,t=!0){if(typeof e!="string")return"";if(e=e.trim().split("_").join(" "),e==="")return e;if(e=e[0].toUpperCase()+e.substring(1),t){let i=e[e.length-1];i!=="."&&i!=="?"&&i!=="!"&&(e+=".")}return e}static trimQuotedValue(e){return typeof e=="string"&&(e[0]=='"'||e[0]=="'"||e[0]=="`")&&e[0]==e[e.length-1]?e.slice(1,-1):e}static plainText(e){return e?(new DOMParser().parseFromString(e,"text/html").body.innerText||"").trim():""}static truncate(e,t=150,i=!0){return e=""+e,e.length<=t?e:e.substring(0,t)+(i?"...":"")}static truncateObject(e){const t={};for(let i in e){let a=e[i];typeof a=="string"&&(a=F.truncate(a,150,!0)),t[i]=a}return t}static slugify(e,t="_",i=[".","=","-"]){if(e==="")return"";const a={a:/Ð°|Ã |Ã¡|Ã¥|Ã¢/gi,b:/Ð±/gi,c:/Ñ|Ã§/gi,d:/Ð´/gi,e:/Ðµ|Ã¨|Ã©|Ãª|áº½|Ã«/gi,f:/Ñ/gi,g:/Ð³/gi,h:/Ñ/gi,i:/Ð¹|Ð¸|Ã¬|Ã­|Ã®/gi,j:/Ð¶/gi,k:/Ðº/gi,l:/Ð»/gi,m:/Ð¼/gi,n:/Ð½|Ã±/gi,o:/Ð¾|Ã²|Ã³|Ã´|Ã¸/gi,p:/Ð¿/gi,q:/Ñ/gi,r:/Ñ/gi,s:/Ñ/gi,t:/Ñ/gi,u:/Ñ|Ã¹|Ãº|Å¯|Ã»/gi,v:/Ð²/gi,w:/Ð²/gi,x:/Ñ/gi,y:/Ñ/gi,z:/Ð·/gi,ae:/Ã¤|Ã¦/gi,oe:/Ã¶/gi,ue:/Ã¼/gi,Ae:/Ã/gi,Ue:/Ã/gi,Oe:/Ã/gi,ss:/Ã/gi,and:/&/gi};for(let s in a)e=e.replace(a[s],s);return e.replace(new RegExp("["+i.join("")+"]","g")," ").replace(/[^\w\ ]/gi,"").replace(/\s+/g,t)}static escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}static splitNonEmpty(e,t=","){const i=[],a=(e||"").replaceAll("\\"+t,"{_PB_ESCAPED_}").split(t).map(s=>s.replaceAll("{_PB_ESCAPED_}",t));for(let s of a)s=s.trim(),F.isEmpty(s)||i.push(s);return i}static joinNonEmpty(e,t=", ",i=!0){e=e||[];const a=[],s=t.length>1?t.trim():t;for(let o of e)o=typeof o=="string"?o.trim():"",!F.isEmpty(o)&&(i&&(o=o.replaceAll(s,"\\"+s)),a.push(o));return a.join(t)}static getInitials(e){if(e=(e||"").split("@")[0].trim(),e.length<=2)return e.toUpperCase();const t=e.split(/[\.\_\-\ ]/);return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e[0].toUpperCase()}static formattedFileSize(e){const t=e?Math.floor(Math.log(e)/Math.log(1024)):0;return(e/Math.pow(1024,t)).toFixed(2)*1+" "+["B","KB","MB","GB","TB"][t]}static getDateTime(e){if(typeof e=="string"){const t={19:"yyyy-MM-dd HH:mm:ss",23:"yyyy-MM-dd HH:mm:ss.SSS",20:"yyyy-MM-dd HH:mm:ss'Z'",24:"yyyy-MM-dd HH:mm:ss.SSS'Z'"},i=t[e.length]||t[19];return $t.fromFormat(e,i,{zone:"UTC"})}return typeof e=="number"?$t.fromMillis(e):$t.fromJSDate(e)}static formatToUTCDate(e,t="yyyy-MM-dd HH:mm:ss"){return F.getDateTime(e).toUTC().toFormat(t)}static formatToLocalDate(e,t="yyyy-MM-dd HH:mm:ss"){return F.getDateTime(e).toLocal().toFormat(t)}static async copyToClipboard(e){if(typeof e=="object")try{e=JSON.stringify(e,null,2)}catch{}if(e=""+e,!(!e.length||!window?.navigator?.clipboard))return window.navigator.clipboard.writeText(e).catch(t=>{console.warn("Failed to copy.",t)})}static download(e,t){const i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("download",t),i.setAttribute("target","_blank"),i.click(),i.remove()}static downloadJson(e,t){t=t.endsWith(".json")?t:t+".json";const i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=window.URL.createObjectURL(i);F.download(a,t)}static getJWTPayload(e){const t=(e||"").split(".")[1]||"";if(t==="")return{};try{const i=decodeURIComponent(atob(t));return JSON.parse(i)||{}}catch(i){console.warn("Failed to parse JWT payload data.",i)}return{}}static hasImageExtension(e){return e=e||"",!!zx.find(t=>e.toLowerCase().endsWith(t))}static hasVideoExtension(e){return e=e||"",!!jx.find(t=>e.toLowerCase().endsWith(t))}static hasAudioExtension(e){return e=e||"",!!Vx.find(t=>e.toLowerCase().endsWith(t))}static hasDocumentExtension(e){return e=e||"",!!Ux.find(t=>e.toLowerCase().endsWith(t))}static getFileType(e){return F.hasImageExtension(e)?"image":F.hasDocumentExtension(e)?"document":F.hasVideoExtension(e)?"video":F.hasAudioExtension(e)?"audio":"file"}static generateThumb(e,t=100,i=100){return new Promise(a=>{let s=new FileReader;s.onload=function(o){let l=new Image;l.onload=function(){let c=document.createElement("canvas"),u=c.getContext("2d"),d=l.width,f=l.height;return c.width=t,c.height=i,u.drawImage(l,d>f?(d-f)/2:0,0,d>f?f:d,d>f?f:d,0,0,t,i),a(c.toDataURL(e.type))},l.src=o.target.result},s.readAsDataURL(e)})}static addValueToFormData(e,t,i){if(!(typeof i>"u"))if(F.isEmpty(i))e.append(t,"");else if(Array.isArray(i))for(const a of i)F.addValueToFormData(e,t,a);else i instanceof File?e.append(t,i):i instanceof Date?e.append(t,i.toISOString()):F.isObject(i)?e.append(t,JSON.stringify(i)):e.append(t,""+i)}static dummyCollectionRecord(e){return Object.assign({collectionId:e?.id,collectionName:e?.name},F.dummyCollectionSchemaData(e))}static dummyCollectionSchemaData(e,t=!1){const i=e?.fields||[],a={};for(const s of i){if(s.hidden||t&&s.primaryKey&&s.autogeneratePattern||t&&s.type==="autodate")continue;let o=null;if(s.type==="number")o=123;else if(s.type==="date"||s.type==="autodate")o="2022-01-01 10:00:00.123Z";else if(s.type=="bool")o=!0;else if(s.type=="email")o="test@example.com";else if(s.type=="url")o="https://example.com";else if(s.type=="json")o="JSON";else if(s.type=="file"){if(t)continue;o="filename.jpg",s.maxSelect!=1&&(o=[o])}else if(s.type=="select")o=s?.values?.[0],s?.maxSelect!=1&&(o=[o]);else if(s.type=="relation"){const c=Array.isArray(s?.collectionIds)&&s.collectionIds.length>0?"collectionId:RELATION_RECORD_ID":"RELATION_RECORD_ID";o=c,s?.maxSelect!=1&&(o=[c])}else s.type=="geoPoint"?o={lon:0,lat:0}:o="test";a[s.name]=o}return a}static getCollectionTypeIcon(e){switch(e?.toLowerCase()){case"auth":return"ri-group-line";case"view":return"ri-table-line";default:return"ri-folder-2-line"}}static getFieldTypeIcon(e){switch(e){case"primary":return"ri-key-line";case"text":return"ri-text";case"number":return"ri-hashtag";case"date":return"ri-calendar-line";case"bool":return"ri-toggle-line";case"email":return"ri-mail-line";case"url":return"ri-link";case"editor":return"ri-edit-2-line";case"select":return"ri-list-check";case"json":return"ri-braces-line";case"file":return"ri-image-line";case"relation":return"ri-mind-map";case"password":return"ri-lock-password-line";case"autodate":return"ri-calendar-check-line";case"geoPoint":return"ri-map-pin-2-line";default:return"ri-star-s-line"}}static getFieldValueType(e){switch(e?.type){case"bool":return"Boolean";case"number":return"Number";case"geoPoint":return"Object";case"file":return"File";case"select":case"relation":return e?.maxSelect==1?"String":"Array<String>";default:return"String"}}static zeroDefaultStr(e){return e?.type==="number"?"0":e?.type==="bool"?"false":e?.type==="geoPoint"?'{"lon":0,"lat":0}':e?.type==="json"?'null, "", [], {}':["select","relation","file"].includes(e?.type)&&e?.maxSelect!=1?"[]":'""'}static getApiExampleUrl(e){return(window.location.href.substring(0,window.location.href.indexOf("/_"))||e||"/").replace("//localhost","//127.0.0.1")}static hasCollectionChanges(e,t,i=!1){if(e=e||{},t=t||{},e.id!=t.id)return!0;for(let u in e)if(u!=="fields"&&JSON.stringify(e[u])!==JSON.stringify(t[u]))return!0;const a=Array.isArray(e.fields)?e.fields:[],s=Array.isArray(t.fields)?t.fields:[],o=a.filter(u=>u?.id&&!F.findByKey(s,"id",u.id)),l=s.filter(u=>u?.id&&!F.findByKey(a,"id",u.id)),c=s.filter(u=>{const d=F.isObject(u)&&F.findByKey(a,"id",u.id);if(!d)return!1;for(let f in d)if(JSON.stringify(u[f])!=JSON.stringify(d[f]))return!0;return!1});return!!(l.length||c.length||i&&o.length)}static sortCollections(e=[]){const t=[],i=[],a=[];for(const o of e)o.type==="auth"?t.push(o):o.type==="base"?i.push(o):a.push(o);function s(o,l){return o.name>l.name?1:o.name<l.name?-1:0}return[].concat(t.sort(s),i.sort(s),a.sort(s))}static getExpandPresentableRelFields(e,t,i=2){let a=[];const s=t.find(o=>o.id==e.collectionId);if(!s)return a;for(const o of s.fields){if(!o.presentable||o.type!="relation"||i<=0)continue;const l=F.getExpandPresentableRelFields(o,t,i-1);for(const c of l)a.push(e.name+"."+c)}return a.length||a.push(e.name),a}static yieldToMain(){return new Promise(e=>{setTimeout(e,0)})}static defaultFlatpickrOptions(){return{dateFormat:"Y-m-d H:i:S",disableMobile:!0,allowInput:!0,enableTime:!0,time_24hr:!0,locale:{firstDayOfWeek:1}}}static defaultEditorOptions(){const e=["DIV","P","A","EM","B","STRONG","H1","H2","H3","H4","H5","H6","TABLE","TR","TD","TH","TBODY","THEAD","TFOOT","BR","HR","Q","SUP","SUB","DEL","IMG","OL","UL","LI","CODE"];function t(a){let s=a.parentNode;for(;a.firstChild;)s.insertBefore(a.firstChild,a);s.removeChild(a)}function i(a){if(a){for(const s of a.children)i(s);e.includes(a.tagName)?(a.removeAttribute("style"),a.removeAttribute("class")):t(a)}}return{branding:!1,promotion:!1,menubar:!1,min_height:270,height:270,max_height:700,autoresize_bottom_margin:30,convert_unsafe_embeds:!0,skin:"pocketbase",content_style:"body { font-size: 14px }",plugins:["autoresize","autolink","lists","link","image","searchreplace","fullscreen","media","table","code","codesample","directionality"],codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"CSS",value:"css"},{text:"SQL",value:"sql"},{text:"JavaScript",value:"javascript"},{text:"Go",value:"go"},{text:"Dart",value:"dart"},{text:"Zig",value:"zig"},{text:"Rust",value:"rust"},{text:"Lua",value:"lua"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"Markdown",value:"markdown"},{text:"Swift",value:"swift"},{text:"Kotlin",value:"kotlin"},{text:"Elixir",value:"elixir"},{text:"Scala",value:"scala"},{text:"Julia",value:"julia"},{text:"Haskell",value:"haskell"}],toolbar:"styles | alignleft aligncenter alignright | bold italic forecolor backcolor | bullist numlist | link image_picker table codesample direction | code fullscreen",paste_postprocess:(a,s)=>{i(s.node)},file_picker_types:"image",file_picker_callback:(a,s,o)=>{const l=document.createElement("input");l.setAttribute("type","file"),l.setAttribute("accept","image/*"),l.addEventListener("change",c=>{const u=c.target.files[0],d=new FileReader;d.addEventListener("load",()=>{if(!tinymce)return;const f="blobid"+new Date().getTime(),h=tinymce.activeEditor.editorUpload.blobCache,b=d.result.split(",")[1],v=h.create(f,u,b);h.add(v),a(v.blobUri(),{title:u.name})}),d.readAsDataURL(u)}),l.click()},setup:a=>{a.on("keydown",o=>{(o.ctrlKey||o.metaKey)&&o.code=="KeyS"&&a.formElement&&(o.preventDefault(),o.stopPropagation(),a.formElement.dispatchEvent(new KeyboardEvent("keydown",o)))});const s="tinymce_last_direction";a.on("init",()=>{const o=window?.localStorage?.getItem(s);!a.isDirty()&&a.getContent()==""&&o=="rtl"&&a.execCommand("mceDirectionRTL")}),a.ui.registry.addMenuButton("direction",{icon:"visualchars",fetch:o=>{o([{type:"menuitem",text:"LTR content",icon:"ltr",onAction:()=>{window?.localStorage?.setItem(s,"ltr"),a.execCommand("mceDirectionLTR")}},{type:"menuitem",text:"RTL content",icon:"rtl",onAction:()=>{window?.localStorage?.setItem(s,"rtl"),a.execCommand("mceDirectionRTL")}}])}}),a.ui.registry.addMenuButton("image_picker",{icon:"image",fetch:o=>{o([{type:"menuitem",text:"From collection",icon:"gallery",onAction:()=>{a.dispatch("collections_file_picker",{})}},{type:"menuitem",text:"Inline",icon:"browse",onAction:()=>{a.execCommand("mceImage")}}])}})}}}static displayValue(e,t,i="N/A"){e=e||{},t=t||[];let a=[];for(const o of t){let l=e[o];typeof l>"u"||(l=F.stringifyValue(l,i),a.push(l))}if(a.length>0)return a.join(", ");const s=["title","name","slug","email","username","nickname","label","heading","message","key","identifier","id"];for(const o of s){let l=F.stringifyValue(e[o],"");if(l)return l}return i}static stringifyValue(e,t="N/A",i=150){if(F.isEmpty(e))return t;if(typeof e=="number")return""+e;if(typeof e=="boolean")return e?"True":"False";if(typeof e=="string")return e=e.indexOf("<")>=0?F.plainText(e):e,F.truncate(e,i)||t;if(Array.isArray(e)&&typeof e[0]!="object")return F.truncate(e.join(","),i);if(typeof e=="object")try{return F.truncate(JSON.stringify(e),i)||t}catch{return t}return e}static extractColumnsFromQuery(e){const t="__GROUP__";e=(e||"").replace(/\([\s\S]+?\)/gm,t).replace(/[\t\r\n]|(?:\s\s)+/g," ");const a=e.match(/select\s+([\s\S]+)\s+from/)?.[1]?.split(",")||[],s=[];for(let o of a){const l=o.trim().split(" ").pop();l!=""&&l!=t&&s.push(l.replace(/[\'\"\`\[\]\s]/g,""))}return s}static getAllCollectionIdentifiers(e,t=""){if(!e)return[];let i=[t+"id"];if(e.type==="view")for(let s of F.extractColumnsFromQuery(e.viewQuery))F.pushUnique(i,t+s);const a=e.fields||[];for(const s of a)s.type=="geoPoint"?(F.pushUnique(i,t+s.name+".lon"),F.pushUnique(i,t+s.name+".lat")):F.pushUnique(i,t+s.name);return i}static getCollectionAutocompleteKeys(e,t,i="",a=0){let s=e.find(l=>l.name==t||l.id==t);if(!s||a>=4)return[];s.fields=s.fields||[];let o=F.getAllCollectionIdentifiers(s,i);for(const l of s.fields){const c=i+l.name;if(l.type=="relation"&&l.collectionId){const u=F.getCollectionAutocompleteKeys(e,l.collectionId,c+".",a+1);u.length&&(o=o.concat(u))}l.maxSelect!=1&&Bx.includes(l.type)?(o.push(c+":each"),o.push(c+":length")):Hx.includes(l.type)&&o.push(c+":lower")}for(const l of e){l.fields=l.fields||[];for(const c of l.fields)if(c.type=="relation"&&c.collectionId==s.id){const u=i+l.name+"_via_"+c.name,d=F.getCollectionAutocompleteKeys(e,l.id,u+".",a+2);d.length&&(o=o.concat(d))}}return o}static getCollectionJoinAutocompleteKeys(e){const t=[];let i,a;for(const s of e)if(!s.system){i="@collection."+s.name+".",a=F.getCollectionAutocompleteKeys(e,s.name,i);for(const o of a)t.push(o)}return t}static getRequestAutocompleteKeys(e,t){const i=[];i.push("@request.context"),i.push("@request.method"),i.push("@request.query."),i.push("@request.body."),i.push("@request.headers."),i.push("@request.auth.collectionId"),i.push("@request.auth.collectionName");const a=e.filter(s=>s.type==="auth");for(const s of a){if(s.system)continue;const o=F.getCollectionAutocompleteKeys(e,s.id,"@request.auth.");for(const l of o)F.pushUnique(i,l)}if(t){const s=F.getCollectionAutocompleteKeys(e,t,"@request.body.");for(const o of s){i.push(o);const l=o.split(".");l.length===3&&l[2].indexOf(":")===-1&&i.push(o+":isset")}}return i}static parseIndex(e){const t={unique:!1,optional:!1,schemaName:"",indexName:"",tableName:"",columns:[],where:""},a=/create\s+(unique\s+)?\s*index\s*(if\s+not\s+exists\s+)?(\S*)\s+on\s+(\S*)\s*\(([\s\S]*)\)(?:\s*where\s+([\s\S]*))?/gmi.exec((e||"").trim());if(a?.length!=7)return t;const s=/^[\"\'\`\[\{}]|[\"\'\`\]\}]$/gm;t.unique=a[1]?.trim().toLowerCase()==="unique",t.optional=!F.isEmpty(a[2]?.trim());const o=(a[3]||"").split(".");o.length==2?(t.schemaName=o[0].replace(s,""),t.indexName=o[1].replace(s,"")):(t.schemaName="",t.indexName=o[0].replace(s,"")),t.tableName=(a[4]||"").replace(s,"");const l=(a[5]||"").replace(/,(?=[^\(]*\))/gmi,"{PB_TEMP}").split(",");for(let c of l){c=c.trim().replaceAll("{PB_TEMP}",",");const d=/^([\s\S]+?)(?:\s+collate\s+([\w]+))?(?:\s+(asc|desc))?$/gmi.exec(c);if(d?.length!=4)continue;const f=d[1]?.trim()?.replace(s,"");f&&t.columns.push({name:f,collate:d[2]||"",sort:d[3]?.toUpperCase()||""})}return t.where=a[6]||"",t}static buildIndex(e){let t="CREATE ";e.unique&&(t+="UNIQUE "),t+="INDEX ",e.optional&&(t+="IF NOT EXISTS "),e.schemaName&&(t+=`\`${e.schemaName}\`.`),t+=`\`${e.indexName||"idx_"+F.randomString(10)}\` `,t+=`ON \`${e.tableName}\` (`;const i=e.columns.filter(a=>!!a?.name);return i.length>1&&(t+=`
  `),t+=i.map(a=>{let s="";return a.name.includes("(")||a.name.includes(" ")?s+=a.name:s+="`"+a.name+"`",a.collate&&(s+=" COLLATE "+a.collate),a.sort&&(s+=" "+a.sort.toUpperCase()),s}).join(`,
  `),i.length>1&&(t+=`
`),t+=")",e.where&&(t+=` WHERE ${e.where}`),t}static replaceIndexTableName(e,t){const i=F.parseIndex(e);return i.tableName=t,F.buildIndex(i)}static replaceIndexColumn(e,t,i){if(t===i)return e;const a=F.parseIndex(e);let s=!1;for(let o of a.columns)o.name===t&&(o.name=i,s=!0);return s?F.buildIndex(a):e}static normalizeSearchFilter(e,t){if(e=(e||"").trim(),!e||!t.length)return e;const i=["=","!=","~","!~",">",">=","<","<="];for(const a of i)if(e.includes(a))return e;return e=isNaN(e)&&e!="true"&&e!="false"?`"${e.replace(/^[\"\'\`]|[\"\'\`]$/gm,"")}"`:e,t.map(a=>`${a}~${e}`).join("||")}static normalizeLogsFilter(e,t=[]){return F.normalizeSearchFilter(e,["level","message","data"].concat(t))}static initSchemaField(e){return Object.assign({id:"",name:"",type:"text",system:!1,hidden:!1,required:!1},e)}static triggerResize(){window.dispatchEvent(new Event("resize"))}static getHashQueryParams(){let e="";const t=window.location.hash.indexOf("?");return t>-1&&(e=window.location.hash.substring(t+1)),Object.fromEntries(new URLSearchParams(e))}static replaceHashQueryParams(e){e=e||{};let t="",i=window.location.hash;const a=i.indexOf("?");a>-1&&(t=i.substring(a+1),i=i.substring(0,a));const s=new URLSearchParams(t);for(let c in e){const u=e[c];u===null?s.delete(c):s.set(c,u)}t=s.toString(),t!=""&&(i+="?"+t);let o=window.location.href;const l=o.indexOf("#");l>-1&&(o=o.substring(0,l)),window.location.replace(o+i)}}let pu,ra;const gu="app-tooltip";function Af(n){return typeof n=="string"?{text:n,position:"bottom",hideOnClick:null}:n||{}}function Hr(){return ra=ra||document.querySelector("."+gu),ra||(ra=document.createElement("div"),ra.classList.add(gu),document.body.appendChild(ra)),ra}function Mp(n,e){let t=Hr();if(!t.classList.contains("active")||!e?.text){bu();return}t.textContent=e.text,t.className=gu+" active",e.class&&t.classList.add(e.class),e.position&&t.classList.add(e.position),t.style.top="0px",t.style.left="0px";let i=t.offsetHeight,a=t.offsetWidth,s=n.getBoundingClientRect(),o=0,l=0,c=5;e.position=="left"?(o=s.top+s.height/2-i/2,l=s.left-a-c):e.position=="right"?(o=s.top+s.height/2-i/2,l=s.right+c):e.position=="top"?(o=s.top-i-c,l=s.left+s.width/2-a/2):e.position=="top-left"?(o=s.top-i-c,l=s.left):e.position=="top-right"?(o=s.top-i-c,l=s.right-a):e.position=="bottom-left"?(o=s.top+s.height+c,l=s.left):e.position=="bottom-right"?(o=s.top+s.height+c,l=s.right-a):(o=s.top+s.height+c,l=s.left+s.width/2-a/2),l+a>document.documentElement.clientWidth&&(l=document.documentElement.clientWidth-a),l=l>=0?l:0,o+i>document.documentElement.clientHeight&&(o=document.documentElement.clientHeight-i),o=o>=0?o:0,t.style.top=o+"px",t.style.left=l+"px"}function bu(){clearTimeout(pu),Hr().classList.remove("active"),Hr().activeNode=void 0}function Wx(n,e){Hr().activeNode=n,clearTimeout(pu),pu=setTimeout(()=>{Hr().classList.add("active"),Mp(n,e)},isNaN(e.delay)?0:e.delay)}function dt(n,e){let t=Af(e);function i(){Wx(n,t)}function a(){bu()}return n.addEventListener("mouseenter",i),n.addEventListener("mouseleave",a),n.addEventListener("blur",a),(t.hideOnClick===!0||t.hideOnClick===null&&F.isFocusable(n))&&n.addEventListener("click",a),Hr(),{update(s){t=Af(s),Hr()?.activeNode?.contains(n)&&Mp(n,t)},destroy(){Hr()?.activeNode?.contains(n)&&bu(),n.removeEventListener("mouseenter",i),n.removeEventListener("mouseleave",a),n.removeEventListener("blur",a),n.removeEventListener("click",a)}}}const Yx=n=>n;function od(n){const e=n-1;return e*e*e+1}function Lf(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}function yu(n,{delay:e=0,duration:t=400,easing:i=Yx}={}){const a=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:s=>`opacity: ${s*a}`}}function Kr(n,{delay:e=0,duration:t=400,easing:i=od,x:a=0,y:s=0,opacity:o=0}={}){const l=getComputedStyle(n),c=+l.opacity,u=l.transform==="none"?"":l.transform,d=c*(1-o),[f,h]=Lf(a),[b,v]=Lf(s);return{delay:e,duration:t,easing:i,css:(g,m)=>`
			transform: ${u} translate(${(1-g)*f}${h}, ${(1-g)*b}${v});
			opacity: ${c-d*m}`}}function mn(n,{delay:e=0,duration:t=400,easing:i=od,axis:a="y"}={}){const s=getComputedStyle(n),o=+s.opacity,l=a==="y"?"height":"width",c=parseFloat(s[l]),u=a==="y"?["top","bottom"]:["left","right"],d=u.map(k=>`${k[0].toUpperCase()}${k.slice(1)}`),f=parseFloat(s[`padding${d[0]}`]),h=parseFloat(s[`padding${d[1]}`]),b=parseFloat(s[`margin${d[0]}`]),v=parseFloat(s[`margin${d[1]}`]),g=parseFloat(s[`border${d[0]}Width`]),m=parseFloat(s[`border${d[1]}Width`]);return{delay:e,duration:t,easing:i,css:k=>`overflow: hidden;opacity: ${Math.min(k*20,1)*o};${l}: ${k*c}px;padding-${u[0]}: ${k*f}px;padding-${u[1]}: ${k*h}px;margin-${u[0]}: ${k*b}px;margin-${u[1]}: ${k*v}px;border-${u[0]}-width: ${k*g}px;border-${u[1]}-width: ${k*m}px;min-${l}: 0`}}function Fn(n,{delay:e=0,duration:t=400,easing:i=od,start:a=0,opacity:s=0}={}){const o=getComputedStyle(n),l=+o.opacity,c=o.transform==="none"?"":o.transform,u=1-a,d=l*(1-s);return{delay:e,duration:t,easing:i,css:(f,h)=>`
			transform: ${c} scale(${1-u*h});
			opacity: ${l-d*h}
		`}}let aa,Tc=[];function Nf(){return aa=aa||document.querySelector(".overlays"),aa||(aa=document.createElement("div"),aa.classList.add("overlays"),document.body.appendChild(aa)),aa}var Kx=S('<button type="button" aria-label="Close" class="overlay-close"><i class="ri-close-line" aria-hidden="true"></i></button>'),Zx=S('<button type="button" aria-label="Close" class="btn btn-sm btn-circle btn-transparent btn-close m-l-auto"><i class="ri-close-line txt-lg" aria-hidden="true"></i></button>'),Jx=S('<div><div class="overlay"></div> <div><div class="overlay-panel-section panel-header"><!> <!> <!></div> <div class="overlay-panel-section panel-content"><!></div> <div class="overlay-panel-section panel-footer"><!></div></div></div>'),Gx=S('<div class="overlay-panel-wrapper" tabindex="-1"><!></div>');function pn(n,e){Ue(e,!1);let t=ee(e,"class",8,""),i=ee(e,"active",12,!1),a=ee(e,"popup",8,!1),s=ee(e,"overlayClose",8,!0),o=ee(e,"btnClose",8,!0),l=ee(e,"escClose",8,!0),c=ee(e,"beforeOpen",8,void 0),u=ee(e,"beforeHide",8,void 0);const d=zt(),f="op_"+F.randomString(10);let h=P(),b=P(),v,g=150,m,k=P(""),x=P(i());function C(){typeof c()=="function"&&c()()===!1||i(!0)}function O(){typeof u()=="function"&&u()()===!1||i(!1)}function $(){return i()}async function E(B){_(x,B),B?(v=document.activeElement,d("show"),r(h)?.focus()):(clearTimeout(m),d("hide"),v?.focus()),await Tn(),w()}function w(){r(h)&&(i()?ut(h,r(h).style.zIndex=A()):ut(h,r(h).style=""))}function I(){F.pushUnique(Tc,f),document.body.classList.add("overlay-active")}function D(){F.removeByValue(Tc,f),Tc.length||document.body.classList.remove("overlay-active")}function A(){return 1e3+Nf().querySelectorAll(".overlay-panel-container.active").length}function L(B){i()&&l()&&B.code=="Escape"&&!F.isInput(B.target)&&r(h)&&r(h).style.zIndex==A()&&(B.preventDefault(),O())}function N(B){i()&&H(r(b))}function H(B,J){J&&_(k,""),!(!B||m)&&(m=setTimeout(()=>{if(clearTimeout(m),m=null,!B)return;if(B.scrollHeight-B.offsetHeight>0)_(k,"scrollable");else{_(k,"");return}B.scrollTop==0?_(k,r(k)+" scroll-top-reached"):B.scrollTop+B.offsetHeight==B.scrollHeight&&_(k,r(k)+" scroll-bottom-reached")},100))}un(()=>{Nf().appendChild(r(h));let B=r(h);return()=>{clearTimeout(m),D(),B?.remove()}}),ne(()=>(r(x),R(i())),()=>{r(x)!=i()&&E(i())}),ne(()=>r(b),()=>{H(r(b),!0)}),ne(()=>r(h),()=>{r(h)&&w()}),ne(()=>R(i()),()=>{i()?I():D()}),ft(),He();var j=Gx();re("resize",xr,N),re("keydown",xr,L);var V=T(j);{var U=B=>{var J=Jx();let Q;var oe=T(J),de=y(oe,2);let ge;var pe=T(de),xe=T(pe);{var ve=ae=>{var te=Kx();Et(3,te,()=>yu,()=>({duration:g})),re("click",te,Ct(O)),p(ae,te)};G(xe,ae=>{o()&&!a()&&ae(ve)})}var Ee=y(xe,2);Gt(Ee,e,"header",{},null);var ce=y(Ee,2);{var he=ae=>{var te=Zx();re("click",te,Ct(O)),p(ae,te)};G(ce,ae=>{o()&&a()&&ae(he)})}var be=y(pe,2),we=T(be);Gt(we,e,"default",{},null),mt(be,ae=>_(b,ae),()=>r(b));var ue=y(be,2),me=T(ue);Gt(me,e,"footer",{},null),z((ae,te)=>{Q=Re(J,1,"overlay-panel-container",null,Q,ae),ge=Re(de,1,`overlay-panel ${t()??""} ${r(k)??""}`,null,ge,te)},[()=>({padded:a(),active:i()}),()=>({popup:a()})]),re("click",oe,Ct(()=>s()?O():!0)),Et(3,oe,()=>yu,()=>({duration:g,opacity:0})),re("scroll",be,ae=>H(ae.target)),Et(1,de,()=>Kr,()=>a()?{duration:g,y:-10}:{duration:g,x:50}),Et(2,de,()=>Kr,()=>a()?{duration:g,y:10}:{duration:g,x:50}),p(B,J)};G(V,B=>{i()&&B(U)})}return mt(j,B=>_(h,B),()=>r(h)),p(n,j),_t(e,"show",C),_t(e,"hide",O),_t(e,"isActive",$),Be({show:C,hide:O,isActive:$})}const ld=li({});function Ln(n,e,t){ld.set({text:n,yesCallback:e,noCallback:t})}function Ap(){ld.set({})}var Xx=S('<h4 class="block center txt-break" slot="header"> </h4>'),Qx=S('<button type="button" class="btn btn-transparent btn-expanded-sm"><span class="txt">No</span></button> <button type="button"><span class="txt">Yes</span></button>',1);function e1(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(ld,"$confirmation",t);let s=P(),o=P(!1),l=P(!1);ne(()=>(a(),r(s)),()=>{a()?.text&&(_(l,!1),r(s)?.show())}),ft(),He();{let c=ie(()=>!r(o)),u=ie(()=>!r(o));mt(pn(n,{class:"confirm-popup hide-content overlay-panel-sm",get overlayClose(){return r(c)},get escClose(){return r(u)},btnClose:!1,popup:!0,$$events:{hide:async()=>{!r(l)&&a()?.noCallback&&a().noCallback(),await Tn(),_(l,!1),Ap()}},$$slots:{header:(d,f)=>{var h=Xx(),b=T(h);z(()=>Te(b,(a(),M(()=>a()?.text)))),p(d,h)},footer:(d,f)=>{var h=Qx(),b=q(h);Ui(b,!0);var v=y(b,2);let g;z(m=>{b.disabled=r(o),g=Re(v,1,"btn btn-danger btn-expanded",null,g,m),v.disabled=r(o)},[()=>({"btn-loading":r(o)})]),re("click",b,()=>{_(l,!1),r(s)?.hide()}),re("click",v,async()=>{a()?.yesCallback&&(_(o,!0),await Promise.resolve(a().yesCallback()),_(o,!1)),_(l,!0),r(s)?.hide()}),p(d,h)}},$$legacy:!0}),d=>_(s,d),()=>r(s))}Be(),i()}function t1(){let n={listeners:[],scriptLoaded:!1,injected:!1};function e(i,a,s){n.injected=!0;const o=i.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.src=a,o.onload=()=>{s()},i.head&&i.head.appendChild(o)}function t(i,a,s){n.scriptLoaded?s():(n.listeners.push(s),n.injected||e(i,a,()=>{n.listeners.forEach(o=>o()),n.scriptLoaded=!0}))}return{load:t}}let n1=t1();var i1=S("<div></div>"),r1=S('<textarea style="visibility: hidden"></textarea>'),a1=S("<div><!></div>");function cd(n,e){Ue(e,!1);let t=ee(e,"id",24,()=>"tinymce_svelte"+F.randomString(7)),i=ee(e,"inline",8,void 0),a=ee(e,"disabled",8,!1),s=ee(e,"scriptSrc",24,()=>"./libs/tinymce/tinymce.min.js"),o=ee(e,"conf",24,()=>({})),l=ee(e,"modelEvents",8,"change input undo redo"),c=ee(e,"value",12,""),u=ee(e,"text",12,""),d=ee(e,"cssClass",8,"tinymce-wrapper");const f=["Activate","AddUndo","BeforeAddUndo","BeforeExecCommand","BeforeGetContent","BeforeRenderUI","BeforeSetContent","BeforePaste","Blur","Change","ClearUndos","Click","ContextMenu","Copy","Cut","Dblclick","Deactivate","Dirty","Drag","DragDrop","DragEnd","DragGesture","DragOver","Drop","ExecCommand","Focus","FocusIn","FocusOut","GetContent","Hide","Init","KeyDown","KeyPress","KeyUp","LoadContent","MouseDown","MouseEnter","MouseLeave","MouseMove","MouseOut","MouseOver","MouseUp","NodeChange","ObjectResizeStart","ObjectResized","ObjectSelected","Paste","PostProcess","PostRender","PreProcess","ProgressState","Redo","Remove","Reset","ResizeEditor","SaveContent","SelectionChange","SetAttrib","SetContent","Show","Submit","Undo","VisualAid"],h=(D,A)=>{f.forEach(L=>{D.on(L,N=>{A(L.toLowerCase(),{eventName:L,event:N,editor:D})})})};let b=P(),v=P(),g=P(),m=P(c()),k=P(a());const x=zt();function C(){return window&&window.tinymce?window.tinymce:null}function O(){const D={...o(),target:r(v),inline:i()!==void 0?i():o().inline!==void 0?o().inline:!1,readonly:a(),setup:A=>{_(g,A),A.on("init",()=>{A.setContent(c()),A.on(l(),()=>{_(m,A.getContent()),r(m)!==c()&&(c(r(m)),u(A.getContent({format:"text"})))})}),h(A,x),typeof o().setup=="function"&&o().setup(A)}};ut(v,r(v).style.visibility=""),C().init(D)}un(()=>(C()!==null?O():n1.load(r(b).ownerDocument,s(),()=>{r(b)&&O()}),()=>{try{r(g)&&(r(g).dom?.unbind(document),C()?.remove(r(g)))}catch{}})),ne(()=>(r(g),r(m),R(c()),R(a()),r(k)),()=>{try{r(g)&&r(m)!==c()&&(r(g).setContent(c()),u(r(g).getContent({format:"text"}))),r(g)&&a()!==r(k)&&(_(k,a()),typeof r(g).mode?.set=="function"?r(g).mode.set(a()?"readonly":"design"):r(g).setMode(a()?"readonly":"design"))}catch(D){console.warn("TinyMCE reactive error:",D)}}),ft(),He();var $=a1(),E=T($);{var w=D=>{var A=i1();mt(A,L=>_(v,L),()=>r(v)),z(()=>W(A,"id",t())),p(D,A)},I=D=>{var A=r1();mt(A,L=>_(v,L),()=>r(v)),z(()=>W(A,"id",t())),p(D,A)};G(E,D=>{i()?D(w):D(I,!1)})}mt($,D=>_(b,D),()=>r(b)),z(()=>Re($,1,$n(d()))),p(n,$),Be()}function s1(n){const e=n-1;return e*e*e+1}function o1(n,{from:e,to:t},i={}){var{delay:a=0,duration:s=E=>Math.sqrt(E)*120,easing:o=s1}=i,l=getComputedStyle(n),c=l.transform==="none"?"":l.transform,[u,d]=l.transformOrigin.split(" ").map(parseFloat);u/=n.clientWidth,d/=n.clientHeight;var f=l1(n),h=n.clientWidth/t.width/f,b=n.clientHeight/t.height/f,v=e.left+e.width*u,g=e.top+e.height*d,m=t.left+t.width*u,k=t.top+t.height*d,x=(v-m)*h,C=(g-k)*b,O=e.width/t.width,$=e.height/t.height;return{delay:a,duration:typeof s=="function"?s(Math.sqrt(x*x+C*C)):s,easing:o,css:(E,w)=>{var I=w*x,D=w*C,A=E+w*O,L=E+w*$;return`transform: ${c} translate(${I}px, ${D}px) scale(${A}, ${L});`}}}function l1(n){if("currentCSSZoom"in n)return n.currentCSSZoom;for(var e=n,t=1;e!==null;)t*=+getComputedStyle(e).zoom,e=e.parentElement;return t}const Hl=li([]);function Js(n,e=4e3){return ud(n,"info",e)}function vn(n,e=3e3){return ud(n,"success",e)}function ur(n,e=4500){return ud(n,"error",e)}function ud(n,e,t){t=t||4e3;const i={message:n,type:e,duration:t,timeout:setTimeout(()=>{Lp(i)},t)};Hl.update(a=>(dd(a,i.message),F.pushOrReplaceByKey(a,i,"message"),a))}function Lp(n){Hl.update(e=>(dd(e,n),e))}function Fs(){Hl.update(n=>{for(let e of n)dd(n,e);return[]})}function dd(n,e){let t;typeof e=="string"?t=F.findByKey(n,"message",e):t=e,t&&(clearTimeout(t.timeout),F.removeByKey(n,"message",t.message))}var c1=S('<i class="ri-information-line"></i>'),u1=S('<i class="ri-checkbox-circle-line"></i>'),d1=S('<i class="ri-error-warning-line"></i>'),f1=S('<i class="ri-alert-line"></i>'),h1=S('<div><div class="icon"><!></div> <div class="content"> </div> <button type="button" class="close"><i class="ri-close-line"></i></button></div>'),v1=S('<div class="toasts-wrapper"></div>');function m1(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Hl,"$toasts",t);He();var s=v1();bt(s,13,a,o=>o.message,(o,l)=>{var c=h1();let u;var d=T(c),f=T(d);{var h=k=>{var x=c1();p(k,x)},b=k=>{var x=tt(),C=q(x);{var O=E=>{var w=u1();p(E,w)},$=E=>{var w=tt(),I=q(w);{var D=L=>{var N=d1();p(L,N)},A=L=>{var N=f1();p(L,N)};G(I,L=>{r(l),M(()=>r(l).type==="warning")?L(D):L(A,!1)},!0)}p(E,w)};G(C,E=>{r(l),M(()=>r(l).type==="success")?E(O):E($,!1)},!0)}p(k,x)};G(f,k=>{r(l),M(()=>r(l).type==="info")?k(h):k(b,!1)})}var v=y(d,2),g=T(v),m=y(v,2);z(k=>{u=Re(c,1,"alert txt-break",null,u,k),Te(g,(r(l),M(()=>r(l).message)))},[()=>({"alert-info":r(l).type=="info","alert-success":r(l).type=="success","alert-danger":r(l).type=="error","alert-warning":r(l).type=="warning"})]),re("click",m,Ct(()=>Lp(r(l)))),Et(1,c,()=>mn,()=>({duration:150})),Et(2,c,()=>yu,()=>({duration:150})),My(c,()=>o1,()=>({duration:150})),p(o,c)}),p(n,s),Be(),i()}var p1=S("<div><!></div>"),g1=S('<div class="toggler-container" tabindex="-1" role="menu"><!></div>');function Jn(n,e){Ue(e,!1);let t=ee(e,"trigger",8,void 0),i=ee(e,"active",12,!1),a=ee(e,"escClose",8,!0),s=ee(e,"autoScroll",8,!0),o=ee(e,"closableClass",8,"closable"),l=ee(e,"class",8,""),c=P(),u=P(),d=P(),f,h,b=!1;const v=zt();function g(B=0){i()&&(clearTimeout(h),h=setTimeout(m,B))}function m(){i()&&(i(!1),b=!1,clearTimeout(f),clearTimeout(h))}function k(){clearTimeout(h),clearTimeout(f),!i()&&(i(!0),r(d)?.contains(r(c))||r(c)?.focus(),f=setTimeout(()=>{s()&&(r(u)?.scrollIntoViewIfNeeded?r(u)?.scrollIntoViewIfNeeded():r(u)?.scrollIntoView&&r(u)?.scrollIntoView({behavior:"smooth",block:"nearest"}))},180))}function x(){i()?m():k()}function C(B){return!r(c)||B.classList.contains(o())||r(c).contains(B)&&B.closest&&B.closest("."+o())}function O(B){$(),r(c)?.addEventListener("click",E),r(c)?.addEventListener("keydown",w),_(d,B||r(c)?.parentNode),r(d)?.addEventListener("click",I),r(d)?.addEventListener("keydown",D)}function $(){clearTimeout(f),clearTimeout(h),r(c)?.removeEventListener("click",E),r(c)?.removeEventListener("keydown",w),r(d)?.removeEventListener("click",I),r(d)?.removeEventListener("keydown",D)}function E(B){B.stopPropagation(),C(B.target)&&m()}function w(B){(B.code==="Enter"||B.code==="Space")&&(B.stopPropagation(),C(B.target)&&g(150))}function I(B){B.preventDefault(),B.stopPropagation(),x()}function D(B){(B.code==="Enter"||B.code==="Space")&&(B.preventDefault(),B.stopPropagation(),x())}function A(B){i()&&!r(d)?.contains(B.target)&&!r(c)?.contains(B.target)&&x()}function L(B){i()&&a()&&B.code==="Escape"&&(B.preventDefault(),m())}function N(B){i()&&(b=!r(c)?.contains(B.target))}function H(B){i()&&b&&!r(c)?.contains(B.target)&&!r(d)?.contains(B.target)&&!B.target?.closest(".flatpickr-calendar")&&m()}un(()=>(O(),()=>$())),ne(()=>(r(c),R(t())),()=>{r(c)&&O(t())}),ne(()=>(R(i()),r(d)),()=>{i()?(r(d)?.classList?.add("active"),r(d)?.setAttribute("aria-expanded",!0),v("show")):(r(d)?.classList?.remove("active"),r(d)?.setAttribute("aria-expanded",!1),v("hide"))}),ft(),He();var j=g1();re("click",xr,H),re("mousedown",xr,N),re("keydown",xr,L),re("focusin",xr,A);var V=T(j);{var U=B=>{var J=p1();let Q;var oe=T(J);Gt(oe,e,"default",{},null),mt(J,de=>_(u,de),()=>r(u)),z(de=>Q=Re(J,1,$n(l()),null,Q,de),[()=>({active:i()})]),Et(3,J,()=>Kr,()=>({duration:150,y:3})),p(B,J)};G(V,B=>{i()&&B(U)})}return mt(j,B=>_(c,B),()=>r(c)),p(n,j),_t(e,"hideWithDelay",g),_t(e,"hide",m),_t(e,"show",k),_t(e,"toggle",x),Be({hideWithDelay:g,hide:m,show:k,toggle:x})}const In=li(""),_u=li(""),po=li(!1),jn=li({});function rn(n){jn.set(n||{})}function Gn(n){jn.update(e=>(F.deleteByPath(e,n),e))}const Wl=li({});function Rf(n){Wl.set(n||{})}class oi extends Error{constructor(e){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,oi.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof oi||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong."),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}}const Po=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function b1(n,e){const t={};if(typeof n!="string")return t;const i=Object.assign({},{}).decode||y1;let a=0;for(;a<n.length;){const s=n.indexOf("=",a);if(s===-1)break;let o=n.indexOf(";",a);if(o===-1)o=n.length;else if(o<s){a=n.lastIndexOf(";",s-1)+1;continue}const l=n.slice(a,s).trim();if(t[l]===void 0){let c=n.slice(s+1,o).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[l]=i(c)}catch{t[l]=c}}a=o+1}return t}function Ff(n,e,t){const i=Object.assign({},t||{}),a=i.encode||_1;if(!Po.test(n))throw new TypeError("argument name is invalid");const s=a(e);if(s&&!Po.test(s))throw new TypeError("argument val is invalid");let o=n+"="+s;if(i.maxAge!=null){const l=i.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(l)}if(i.domain){if(!Po.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain="+i.domain}if(i.path){if(!Po.test(i.path))throw new TypeError("option path is invalid");o+="; Path="+i.path}if(i.expires){if(!(function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date})(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function y1(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function _1(n){return encodeURIComponent(n)}const x1=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let Np;function Ga(n){if(n)try{const e=decodeURIComponent(Np(n.split(".")[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(e)||{}}catch{}return{}}function Yl(n,e=0){let t=Ga(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}Np=typeof atob!="function"||x1?n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,i,a=0,s=0,o="";i=e.charAt(s++);~i&&(t=a%4?64*t+i:i,a++%4)?o+=String.fromCharCode(255&t>>(-2*a&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o}:atob;const qf="pb_auth";class fd{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!Yl(this.token)}get isSuperuser(){let e=Ga(this.token);return e.type=="auth"&&(this.record?.collectionName=="_superusers"||!this.record?.collectionName&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),Ga(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=qf){const i=b1(e||"")[t]||"";let a={};try{a=JSON.parse(i),(typeof a===null||typeof a!="object"||Array.isArray(a))&&(a={})}catch{}this.save(a.token||"",a.record||a.model||null)}exportToCookie(e,t=qf){const i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},a=Ga(this.token);i.expires=a?.exp?new Date(1e3*a.exp):new Date("1970-01-01"),e=Object.assign({},i,e);const s={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let o=Ff(t,JSON.stringify(s),e);const l=typeof Blob<"u"?new Blob([o]).size:o.length;if(s.record&&l>4096){s.record={id:s.record?.id,email:s.record?.email};const c=["collectionId","collectionName","verified"];for(const u in this.record)c.includes(u)&&(s.record[u]=this.record[u]);o=Ff(t,JSON.stringify(s),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==e)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class Rp extends fd{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&window?.localStorage){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&window?.localStorage){let i=t;typeof t!="string"&&(i=JSON.stringify(t)),window.localStorage.setItem(e,i)}else this.storageFallback[e]=t}_storageRemove(e){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",(e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)}))}}class Or{constructor(e){this.client=e}}class w1 extends Or{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then((()=>!0))}async testEmail(e,t,i,a){return a=Object.assign({method:"POST",body:{email:t,template:i,collection:e}},a),this.client.send("/api/settings/test/email",a).then((()=>!0))}async generateAppleClientSecret(e,t,i,a,s,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:i,privateKey:a,duration:s}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}const k1=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function hd(n){if(n){n.query=n.query||{};for(let e in n)k1.includes(e)||(n.query[e]=n[e],delete n[e])}}function Fp(n){const e=[];for(const t in n){const i=encodeURIComponent(t),a=Array.isArray(n[t])?n[t]:[n[t]];for(let s of a)s=S1(s),s!==null&&e.push(i+"="+s)}return e.join("&")}function S1(n){return n==null?null:n instanceof Date?encodeURIComponent(n.toISOString().replace("T"," ")):encodeURIComponent(typeof n=="object"?JSON.stringify(n):n)}class qp extends Or{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,i){if(!e)throw new Error("topic must be set.");let a=e;if(i){hd(i=Object.assign({},i));const o="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));a+=(a.includes("?")?"&":"?")+o}const s=function(o){const l=o;let c;try{c=JSON.parse(l?.data)}catch{}t(c||{})};return this.subscriptions[a]||(this.subscriptions[a]=[]),this.subscriptions[a].push(s),this.isConnected?this.subscriptions[a].length===1?await this.submitSubscriptions():this.eventSource?.addEventListener(a,s):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,s)}async unsubscribe(e){let t=!1;if(e){const i=this.getSubscriptionsByTopic(e);for(let a in i)if(this.hasSubscriptionListeners(a)){for(let s of this.subscriptions[a])this.eventSource?.removeEventListener(a,s);delete this.subscriptions[a],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let t=!1;for(let i in this.subscriptions)if((i+"?").startsWith(e)){t=!0;for(let a of this.subscriptions[i])this.eventSource?.removeEventListener(i,a);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){let i=!1;const a=this.getSubscriptionsByTopic(e);for(let s in a){if(!Array.isArray(this.subscriptions[s])||!this.subscriptions[s].length)continue;let o=!1;for(let l=this.subscriptions[s].length-1;l>=0;l--)this.subscriptions[s][l]===t&&(o=!0,delete this.subscriptions[s][l],this.subscriptions[s].splice(l,1),this.eventSource?.removeEventListener(s,t));o&&(this.subscriptions[s].length||delete this.subscriptions[s],i||this.hasSubscriptionListeners(s)||(i=!0))}this.hasSubscriptionListeners()?i&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let t in this.subscriptions)if(this.subscriptions[t]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch((e=>{if(!e?.isAbort)throw e}))}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let i in this.subscriptions)(i+"?").startsWith(e)&&(t[i]=this.subscriptions[i]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise(((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()}))}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout((()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))}),this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",(e=>{const t=e;this.clientId=t?.lastEventId,this.submitSubscriptions().then((async()=>{let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,await this.submitSubscriptions()})).then((()=>{for(let a of this.pendingConnects)a.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const i=this.getSubscriptionsByTopic("PB_CONNECT");for(let a in i)for(let s of i[a])s(e)})).catch((i=>{this.clientId="",this.connectErrorHandler(i)}))}))}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new oi(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout((()=>{this.initConnect()}),t)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let t of this.pendingConnects)t.resolve();this.pendingConnects=[]}}}class zp extends Or{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let i=500;return(t=Object.assign({},e,t)).batch&&(i=t.batch,delete t.batch),this._getFullList(i,t)}async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send(this.baseCrudPath,i).then((a=>(a.items=a.items?.map((s=>this.decode(s)))||[],a)))}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then((i=>{if(!i?.items?.length)throw new oi({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]}))}async getOne(e,t){if(!e)throw new oi({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then((i=>this.decode(i)))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then((i=>this.decode(i)))}async update(e,t,i){return i=Object.assign({method:"PATCH",body:t},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),i).then((a=>this.decode(a)))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then((()=>!0))}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let i=[],a=async s=>this.getList(s,e||500,t).then((o=>{const l=o.items;return i=i.concat(l),l.length==o.perPage?a(s+1):i}));return a(1)}}function Ar(n,e,t,i){const a=i!==void 0;return a||t!==void 0?a?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,i),e):Object.assign(e,t):e}function $c(n){n._resetAutoRefresh?.()}class T1 extends zp{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,t,i){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,i)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const i=Object.assign({},e,t);return super.getFullList(i)}async getList(e=1,t=30,i){return super.getList(e,t,i)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,i){return super.update(e,t,i).then((a=>{if(this.client.authStore.record?.id===a?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let s=Object.assign({},this.client.authStore.record.expand),o=Object.assign({},this.client.authStore.record,a);s&&(o.expand=Object.assign(s,a.expand)),this.client.authStore.save(this.client.authStore.token,o)}return a}))}async delete(e,t){return super.delete(e,t).then((i=>(!i||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),i)))}authResponse(e){const t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,t,i){let a;i=Object.assign({method:"POST",body:{identity:e,password:t}},i),this.isSuperusers&&(a=i.autoRefreshThreshold,delete i.autoRefreshThreshold,i.autoRefresh||$c(this.client));let s=await this.client.send(this.baseCollectionPath+"/auth-with-password",i);return s=this.authResponse(s),a&&this.isSuperusers&&(function(l,c,u,d){$c(l);const f=l.beforeSend,h=l.authStore.record,b=l.authStore.onChange(((v,g)=>{(!v||g?.id!=h?.id||(g?.collectionId||h?.collectionId)&&g?.collectionId!=h?.collectionId)&&$c(l)}));l._resetAutoRefresh=function(){b(),l.beforeSend=f,delete l._resetAutoRefresh},l.beforeSend=async(v,g)=>{const m=l.authStore.token;if(g.query?.autoRefresh)return f?f(v,g):{url:v,sendOptions:g};let k=l.authStore.isValid;if(k&&Yl(l.authStore.token,c))try{await u()}catch{k=!1}k||await d();const x=g.headers||{};for(let C in x)if(C.toLowerCase()=="authorization"&&m==x[C]&&l.authStore.token){x[C]=l.authStore.token;break}return g.headers=x,f?f(v,g):{url:v,sendOptions:g}}})(this.client,a,(()=>this.authRefresh({autoRefresh:!0})),(()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i)))),s}async authWithOAuth2Code(e,t,i,a,s,o,l){let c={method:"POST",body:{provider:e,code:t,codeVerifier:i,redirectURL:a,createData:s}};return c=Ar("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",c,o,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then((u=>this.authResponse(u)))}authWithOAuth2(...e){if(e.length>1||typeof e?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(e?.[0]||"",e?.[1]||"",e?.[2]||"",e?.[3]||"",e?.[4]||{},e?.[5]||{},e?.[6]||{});const t=e?.[0]||{};let i=null;t.urlCallback||(i=zf(void 0));const a=new qp(this.client);function s(){i?.close(),a.unsubscribe()}const o={},l=t.requestKey;return l&&(o.requestKey=l),this.listAuthMethods(o).then((c=>{const u=c.oauth2.providers.find((h=>h.name===t.provider));if(!u)throw new oi(new Error(`Missing or invalid provider "${t.provider}".`));const d=this.client.buildURL("/api/oauth2-redirect"),f=l?this.client.cancelControllers?.[l]:void 0;return f&&(f.signal.onabort=()=>{s()}),new Promise((async(h,b)=>{try{await a.subscribe("@oauth2",(async k=>{const x=a.clientId;try{if(!k.state||x!==k.state)throw new Error("State parameters don't match.");if(k.error||!k.code)throw new Error("OAuth2 redirect error or missing code: "+k.error);const C=Object.assign({},t);delete C.provider,delete C.scopes,delete C.createData,delete C.urlCallback,f?.signal?.onabort&&(f.signal.onabort=null);const O=await this.authWithOAuth2Code(u.name,k.code,u.codeVerifier,d,t.createData,C);h(O)}catch(C){b(new oi(C))}s()}));const v={state:a.clientId};t.scopes?.length&&(v.scope=t.scopes.join(" "));const g=this._replaceQueryParams(u.authURL+d,v);await(t.urlCallback||function(k){i?i.location.href=k:i=zf(k)})(g)}catch(v){s(),b(new oi(v))}}))})).catch((c=>{throw s(),c}))}async authRefresh(e,t){let i={method:"POST"};return i=Ar("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then((a=>this.authResponse(a)))}async requestPasswordReset(e,t,i){let a={method:"POST",body:{email:e}};return a=Ar("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/request-password-reset",a).then((()=>!0))}async confirmPasswordReset(e,t,i,a,s){let o={method:"POST",body:{token:e,password:t,passwordConfirm:i}};return o=Ar("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,a,s),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then((()=>!0))}async requestVerification(e,t,i){let a={method:"POST",body:{email:e}};return a=Ar("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/request-verification",a).then((()=>!0))}async confirmVerification(e,t,i){let a={method:"POST",body:{token:e}};return a=Ar("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/confirm-verification",a).then((()=>{const s=Ga(e),o=this.client.authStore.record;return o&&!o.verified&&o.id===s.id&&o.collectionId===s.collectionId&&(o.verified=!0,this.client.authStore.save(this.client.authStore.token,o)),!0}))}async requestEmailChange(e,t,i){let a={method:"POST",body:{newEmail:e}};return a=Ar("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/request-email-change",a).then((()=>!0))}async confirmEmailChange(e,t,i,a){let s={method:"POST",body:{token:e,password:t}};return s=Ar("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",s,i,a),this.client.send(this.baseCollectionPath+"/confirm-email-change",s).then((()=>{const o=Ga(e),l=this.client.authStore.record;return l&&l.id===o.id&&l.collectionId===o.collectionId&&this.client.authStore.clear(),!0}))}async listExternalAuths(e,t){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,t,i){const a=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(a.id,i).then((()=>!0))}async requestOTP(e,t){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)}async authWithOTP(e,t,i){return i=Object.assign({method:"POST",body:{otpId:e,password:t}},i),this.client.send(this.baseCollectionPath+"/auth-with-otp",i).then((a=>this.authResponse(a)))}async impersonate(e,t,i){(i=Object.assign({method:"POST",body:{duration:t}},i)).headers=i.headers||{},i.headers.Authorization||(i.headers.Authorization=this.client.authStore.token);const a=new go(this.client.baseURL,new fd,this.client.lang),s=await a.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),i);return a.authStore.save(s?.token,this.decode(s?.record||{})),a}_replaceQueryParams(e,t={}){let i=e,a="";e.indexOf("?")>=0&&(i=e.substring(0,e.indexOf("?")),a=e.substring(e.indexOf("?")+1));const s={},o=a.split("&");for(const l of o){if(l=="")continue;const c=l.split("=");s[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete s[l]:s[l]=t[l]);a="";for(let l in s)s.hasOwnProperty(l)&&(a!=""&&(a+="&"),a+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(s[l].replace(/%20/g,"+")));return a!=""?i+"?"+a:i}}function zf(n){if(typeof window>"u"||!window?.open)throw new oi(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,i=window.innerWidth,a=window.innerHeight;e=e>i?i:e,t=t>a?a:t;let s=i/2-e/2,o=a/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+o+",left="+s+",resizable,menubar=no")}class $1 extends zp{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,i){return i=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},i),this.client.send(this.baseCrudPath+"/import",i).then((()=>!0))}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then((()=>!0))}}class I1 extends Or{async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send("/api/logs",i)}async getOne(e,t){if(!e)throw new oi({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class C1 extends Or{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class E1 extends Or{getUrl(e,t,i={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,i)}getURL(e,t,i={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return"";const a=[];a.push("api"),a.push("files"),a.push(encodeURIComponent(e.collectionId||e.collectionName)),a.push(encodeURIComponent(e.id)),a.push(encodeURIComponent(t));let s=this.client.buildURL(a.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;const o=new URLSearchParams(i);s+=(s.includes("?")?"&":"?")+o}return s}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then((t=>t?.token||""))}}class O1 extends Or{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then((()=>!0))}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then((()=>!0))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then((()=>!0))}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then((()=>!0))}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class D1 extends Or{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then((()=>!0))}}function xu(n){return typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File||n!==null&&typeof n=="object"&&n.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function wu(n){return n&&(n.constructor?.name==="FormData"||typeof FormData<"u"&&n instanceof FormData)}function jf(n){for(const e in n){const t=Array.isArray(n[e])?n[e]:[n[e]];for(const i of t)if(xu(i))return!0}return!1}const P1=/^[\-\.\d]+$/;function Vf(n){if(typeof n!="string")return n;if(n=="true")return!0;if(n=="false")return!1;if((n[0]==="-"||n[0]>="0"&&n[0]<="9")&&P1.test(n)){let e=+n;if(""+e===n)return e}return n}class M1 extends Or{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new A1(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,i=[];for(let a=0;a<this.requests.length;a++){const s=this.requests[a];if(i.push({method:s.method,url:s.url,headers:s.headers,body:s.json}),s.files)for(let o in s.files){const l=s.files[o]||[];for(let c of l)t.append("requests."+a+"."+o,c)}}return t.append("@jsonPayload",JSON.stringify({requests:i})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)}}class A1{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const i={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}create(e,t){t=Object.assign({body:e||{}},t);const i={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}update(e,t,i){i=Object.assign({body:t||{}},i);const a={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(a,i),this.requests.push(a)}delete(e,t){t=Object.assign({},t);const i={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(i,t),this.requests.push(i)}prepareRequest(e,t){if(hd(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){const a=Fp(t.query);a&&(e.url+=(e.url.includes("?")?"&":"?")+a)}let i=t.body;wu(i)&&(i=(function(s){let o={};return s.forEach(((l,c)=>{if(c==="@jsonPayload"&&typeof l=="string")try{let u=JSON.parse(l);Object.assign(o,u)}catch(u){console.warn("@jsonPayload error:",u)}else o[c]!==void 0?(Array.isArray(o[c])||(o[c]=[o[c]]),o[c].push(Vf(l))):o[c]=Vf(l)})),o})(i));for(const a in i){const s=i[a];if(xu(s))e.files[a]=e.files[a]||[],e.files[a].push(s);else if(Array.isArray(s)){const o=[],l=[];for(const c of s)xu(c)?o.push(c):l.push(c);if(o.length>0&&o.length==s.length){e.files[a]=e.files[a]||[];for(let c of o)e.files[a].push(c)}else if(e.json[a]=l,o.length>0){let c=a;a.startsWith("+")||a.endsWith("+")||(c+="+"),e.files[c]=e.files[c]||[];for(let u of o)e.files[c].push(u)}}else e.json[a]=s}}}class go{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=i,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new fd:this.authStore=new Rp,this.collections=new $1(this),this.files=new E1(this),this.logs=new I1(this),this.settings=new w1(this),this.realtime=new qp(this),this.health=new C1(this),this.backups=new O1(this),this.crons=new D1(this)}get admins(){return this.collection("_superusers")}createBatch(){return new M1(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new T1(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let i in t){let a=t[i];switch(typeof a){case"boolean":case"number":a=""+a;break;case"string":a="'"+a.replace(/'/g,"\\'")+"'";break;default:a=a===null?"null":a instanceof Date?"'"+a.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(a).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+i+"}",a)}return e}getFileUrl(e,t,i={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,i)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let i=this.buildURL(e);if(this.beforeSend){const a=Object.assign({},await this.beforeSend(i,t));a.url!==void 0||a.options!==void 0?(i=a.url||i,t=a.options||t):Object.keys(a).length&&(t=a,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const a=Fp(t.query);a&&(i+=(i.includes("?")?"&":"?")+a),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(i,t).then((async a=>{let s={};try{s=await a.json()}catch{}if(this.afterSend&&(s=await this.afterSend(a,s,t)),a.status>=400)throw new oi({url:a.url,status:a.status,data:s});return s})).catch((a=>{throw new oi(a)}))}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=(function(a){if(typeof FormData>"u"||a===void 0||typeof a!="object"||a===null||wu(a)||!jf(a))return a;const s=new FormData;for(const o in a){const l=a[o];if(l!==void 0)if(typeof l!="object"||jf({data:l})){const c=Array.isArray(l)?l:[l];for(let u of c)s.append(o,u)}else{let c={};c[o]=l,s.append("@jsonPayload",JSON.stringify(c))}}return s})(t.body),hd(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||wu(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const i=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(i);const a=new AbortController;this.cancelControllers[i]=a,t.signal=a.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let i in e)if(i.toLowerCase()==t)return e[i];return null}}const Xn=li([]),Hi=li({}),Gs=li(!1),jp=li({}),vd=li({});let ku;typeof BroadcastChannel<"u"&&(ku=new BroadcastChannel("collections"),ku.onmessage=()=>{md(Xu(Hi)?.id)});function Vp(){ku?.postMessage("reload")}function Uf(n){Xn.update(e=>{const t=e.find(i=>i.id==n||i.name==n);return t?Hi.set(t):e.length&&Hi.set(e.find(i=>!i.system)||e[0]),e})}function L1(n){Hi.update(e=>F.isEmpty(e?.id)||e.id===n.id?n:e),Xn.update(e=>(F.pushOrReplaceByKey(e,n,"id"),pd(),Vp(),F.sortCollections(e)))}function N1(n){Xn.update(e=>(F.removeByKey(e,"id",n.id),Hi.update(t=>t.id===n.id?e.find(i=>!i.system)||e[0]:t),pd(),Vp(),e))}async function md(n=null){Gs.set(!0);try{const e=[];e.push(Le.collections.getScaffolds()),e.push(Le.collections.getFullList());let[t,i]=await Promise.all(e);vd.set(t),i=F.sortCollections(i),Xn.set(i);const a=n&&i.find(s=>s.id==n||s.name==n);a?Hi.set(a):i.length&&Hi.set(i.find(s=>!s.system)||i[0]),pd()}catch(e){Le.error(e)}Gs.set(!1)}function pd(){jp.update(n=>(Xn.update(e=>{for(let t of e)n[t.id]=!!t.fields?.find(i=>i.type=="file"&&i.protected);return e}),n))}function Up(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,a,s,o=[],l="",c=n.split("/");for(c[0]||c.shift();a=c.shift();)t=a[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(i=a.indexOf("?",1),s=a.indexOf(".",1),o.push(a.substring(1,~i?i:~s?s:a.length)),l+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~i?"?":"")+"\\"+a.substring(s))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function Bf(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let i="";return t>-1&&(i=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:i}}const Kl=Cm(null,function(e){e(Bf());const t=()=>{e(Bf())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}});Em(Kl,n=>n.location);const gd=Em(Kl,n=>n.querystring),Hf=li(void 0);async function as(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await Tn();const e=(n.charAt(0)=="#"?"":"#")+n;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function ii(n,e){if(e=Yf(e),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Wf(n,e),{update(t){t=Yf(t),Wf(n,t)}}}function R1(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Wf(n,e){let t=e.href||n.getAttribute("href");if(t&&t.charAt(0)=="/")t="#"+t;else if(!t||t.length<2||t.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+t);n.setAttribute("href",t),n.addEventListener("click",i=>{i.preventDefault(),e.disabled||F1(i.currentTarget.getAttribute("href"))})}function Yf(n){return n&&typeof n=="string"?{href:n}:n||{}}function F1(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function q1(n,e){Ue(e,!1);let t=ee(e,"routes",24,()=>({})),i=ee(e,"prefix",8,""),a=ee(e,"restoreScrollState",8,!1);class s{constructor(E,w){if(!w||typeof w!="function"&&(typeof w!="object"||w._sveltesparouter!==!0))throw Error("Invalid component object");if(!E||typeof E=="string"&&(E.length<1||E.charAt(0)!="/"&&E.charAt(0)!="*")||typeof E=="object"&&!(E instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:I,keys:D}=Up(E);this.path=E,typeof w=="object"&&w._sveltesparouter===!0?(this.component=w.component,this.conditions=w.conditions||[],this.userData=w.userData,this.props=w.props||{}):(this.component=()=>Promise.resolve(w),this.conditions=[],this.props={}),this._pattern=I,this._keys=D}match(E){if(i()){if(typeof i()=="string")if(E.startsWith(i()))E=E.substr(i().length)||"/";else return null;else if(i()instanceof RegExp){const A=E.match(i());if(A&&A[0])E=E.substr(A[0].length)||"/";else return null}}const w=this._pattern.exec(E);if(w===null)return null;if(this._keys===!1)return w;const I={};let D=0;for(;D<this._keys.length;){try{I[this._keys[D]]=decodeURIComponent(w[D+1]||"")||null}catch{I[this._keys[D]]=null}D++}return I}async checkConditions(E){for(let w=0;w<this.conditions.length;w++)if(!await this.conditions[w](E))return!1;return!0}}const o=[];t()instanceof Map?t().forEach(($,E)=>{o.push(new s(E,$))}):Object.keys(t()).forEach($=>{o.push(new s($,t()[$]))});let l=P(null),c=P(null),u=P({});const d=zt();async function f($,E){await Tn(),d($,E)}let h=null,b=null;a()&&(b=$=>{$.state&&($.state.__svelte_spa_router_scrollY||$.state.__svelte_spa_router_scrollX)?h=$.state:h=null},window.addEventListener("popstate",b),zy(()=>{R1(h)}));let v=null,g=null;const m=Kl.subscribe(async $=>{v=$;let E=0;for(;E<o.length;){const w=o[E].match($.location);if(!w){E++;continue}const I={route:o[E].path,location:$.location,querystring:$.querystring,userData:o[E].userData,params:w&&typeof w=="object"&&Object.keys(w).length?w:null};if(!await o[E].checkConditions(I)){_(l,null),g=null,f("conditionsFailed",I);return}f("routeLoading",Object.assign({},I));const D=o[E].component;if(g!=D){D.loading?(_(l,D.loading),g=D,_(c,D.loadingParams),_(u,{}),f("routeLoaded",Object.assign({},I,{component:r(l),name:r(l).name,params:r(c)}))):(_(l,null),g=null);const A=await D();if($!=v)return;_(l,A&&A.default||A),g=D}w&&typeof w=="object"&&Object.keys(w).length?_(c,w):_(c,null),_(u,o[E].props),f("routeLoaded",Object.assign({},I,{component:r(l),name:r(l).name,params:r(c)})).then(()=>{Hf.set(r(c))});return}_(l,null),g=null,Hf.set(void 0)});uo(()=>{m(),b&&window.removeEventListener("popstate",b)}),ne(()=>R(a()),()=>{history.scrollRestoration=a()?"manual":"auto"}),ft(),He();var k=tt(),x=q(k);{var C=$=>{var E=tt(),w=q(E);pi(w,()=>r(l),(I,D)=>{D(I,tn({get params(){return r(c)}},()=>r(u),{$$events:{routeEvent(A){ot.call(this,e,A)}}}))}),p($,E)},O=$=>{var E=tt(),w=q(E);pi(w,()=>r(l),(I,D)=>{D(I,tn(()=>r(u),{$$events:{routeEvent(A){ot.call(this,e,A)}}}))}),p($,E)};G(x,$=>{r(c)?$(C):$(O,!1)})}p(n,k),Be()}const Ic="pb_superuser_file_token";go.prototype.logout=function(n=!0){this.authStore.clear(),n&&as("/login")};go.prototype.error=function(n,e=!0,t=""){if(!n||!(n instanceof Error)||n.isAbort)return;const i=n?.status<<0||400,a=n?.data||{},s=a.message||n.message||t;if(e&&s&&ur(s),F.isEmpty(a.data)||rn(a.data),i===401)return this.cancelAllRequests(),this.logout();if(i===403)return this.cancelAllRequests(),as("/")};go.prototype.getSuperuserFileToken=async function(n=""){let e=!0;if(n){const i=Xu(jp);e=typeof i[n]<"u"?i[n]:!0}if(!e)return"";let t=localStorage.getItem(Ic)||"";return(!t||Yl(t,10))&&(t&&localStorage.removeItem(Ic),this._superuserFileTokenRequest||(this._superuserFileTokenRequest=this.files.getToken()),t=await this._superuserFileTokenRequest,localStorage.setItem(Ic,t),this._superuserFileTokenRequest=null),t};class z1 extends Rp{constructor(e="__pb_superuser_auth__"){super(e),this.save(this.token,this.record)}save(e,t){super.save(e,t),t?.collectionName=="_superusers"&&Rf(t)}clear(){super.clear(),Rf(null)}}const Le=new go("../",new z1);Le.authStore.isValid&&Le.collection(Le.authStore.record.collectionName).authRefresh().catch(n=>{console.warn("Failed to refresh the existing auth token:",n);const e=n?.status<<0;(e==401||e==403)&&Le.authStore.clear()});const il=[];let Bp;function Hp(n){const e=n.pattern.test(Bp);Kf(n,n.className,e),Kf(n,n.inactiveClassName,!e)}function Kf(n,e,t){(e||"").split(" ").forEach(i=>{i&&(n.node.classList.remove(i),t&&n.node.classList.add(i))})}Kl.subscribe(n=>{Bp=n.location+(n.querystring?"?"+n.querystring:""),il.map(Hp)});function er(n,e){if(e&&(typeof e=="string"||typeof e=="object"&&e instanceof RegExp)?e={path:e}:e=e||{},!e.path&&n.hasAttribute("href")&&(e.path=n.getAttribute("href"),e.path&&e.path.length>1&&e.path.charAt(0)=="#"&&(e.path=e.path.substring(1))),e.className||(e.className="active"),!e.path||typeof e.path=="string"&&(e.path.length<1||e.path.charAt(0)!="/"&&e.path.charAt(0)!="*"))throw Error('Invalid value for "path" argument');const{pattern:t}=typeof e.path=="string"?Up(e.path):{pattern:e.path},i={node:n,className:e.className,inactiveClassName:e.inactiveClassName,pattern:t};return il.push(i),Hp(i),{destroy(){il.splice(il.indexOf(i),1)}}}const j1="modulepreload",V1=function(n,e){return new URL(n,e).href},Zf={},Ut=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");a=u(t.map(d=>{if(d=V1(d,i),d in Zf)return;Zf[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(!!i)for(let g=o.length-1;g>=0;g--){const m=o[g];if(m.href===d&&(!f||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":j1,f||(v.as="script"),v.crossOrigin="",v.href=d,c&&v.setAttribute("nonce",c),document.head.appendChild(v),f)return new Promise((g,m)=>{v.addEventListener("load",g),v.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function U1(n,e){Ue(e,!1),t();function t(){Le.authStore.isValid?as("/collections"):Le.logout()}He(),Be()}var B1=S('<div class="form-field-addon inline-error-icon"><i class="ri-error-warning-fill txt-danger"></i></div>'),H1=S('<div class="help-block help-block-error"><pre> </pre></div>'),W1=S("<div><!> <!></div>");function Pe(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s="field_"+F.randomString(7),o="Invalid value";let l=ee(e,"name",8,""),c=ee(e,"inlineError",8,!1),u=ee(e,"class",8,void 0),d=P(),f=P([]);function h(){Gn(l())}un(()=>(r(d).addEventListener("input",h),r(d).addEventListener("change",h),()=>{r(d).removeEventListener("input",h),r(d).removeEventListener("change",h)}));function b($){return typeof $=="object"?$?.message||$?.code||o:$||o}ne(()=>(a(),R(l())),()=>{_(f,F.toArray(F.getNestedVal(a(),l())))}),ft(),He();var v=W1();let g;var m=T(v);Gt(m,e,"default",{get uniqueId(){return s}},null);var k=y(m,2);{var x=$=>{var E=B1(),w=T(E);Qe(w,(I,D)=>dt?.(I,D),()=>({position:"left",text:r(f).map(b).join(`
`)})),Et(3,w,()=>Fn,()=>({duration:150,start:.7})),p($,E)},C=$=>{var E=tt(),w=q(E);bt(w,1,()=>r(f),At,(I,D)=>{var A=H1(),L=T(A),N=T(L);z(H=>Te(N,H),[()=>(r(D),M(()=>b(r(D))))]),Et(3,A,()=>mn,()=>({duration:150})),p(I,A)}),p($,E)};G(k,$=>{R(c()),r(f),M(()=>c()&&r(f).length)?$(x):$(C,!1)})}mt(v,$=>_(d,$),()=>r(d)),z($=>g=Re(v,1,$n(u()),null,g,$),[()=>({error:r(f).length})]),re("click",v,function($){ot.call(this,e,$)}),p(n,v),_t(e,"changed",h);var O=Be({changed:h});return i(),O}var Y1=S('<a target="_blank" rel="noopener noreferrer"><i class="ri-book-open-line txt-sm"></i> <span class="txt">Docs</span></a> <span class="delimiter">|</span> <a target="_blank" rel="noopener noreferrer" title="Releases"><span class="txt"> </span></a>',1),K1=S('<div><main class="page-content"><!></main> <footer class="page-footer"><!> <!></footer></div>');function Ci(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Wl,"$superuser",t);let s=ee(e,"center",8,!1),o=ee(e,"class",8,"");He();var l=K1();let c;var u=T(l),d=T(u);Gt(d,e,"default",{},null);var f=y(u,2),h=T(f);Gt(h,e,"footer",{},null);var b=y(h,2);{var v=g=>{var m=Y1(),k=q(m),x=y(k,4),C=T(x),O=T(C);z(()=>{W(k,"href",M(()=>"https://pocketbase.io/docs")),W(x,"href",M(()=>"https://github.com/pocketbase/pocketbase/releases")),Te(O,`PocketBase ${M(()=>"v0.29.3")??""}`)}),p(g,m)};G(b,g=>{a(),M(()=>a()?.id)&&g(v)})}z(g=>c=Re(l,1,`page-wrapper ${o()??""}`,null,c,g),[()=>({"center-content":s()})]),p(n,l),Be(),i()}var Z1=S('<input type="text"/>'),J1=S('<button type="submit" class="btn btn-expanded-sm btn-sm btn-warning"><span class="txt">Search</span></button>'),G1=S('<button type="button" class="btn btn-transparent btn-sm btn-hint p-l-xs p-r-xs m-l-10"><span class="txt">Clear</span></button>'),X1=S('<form class="searchbar"><label class="m-l-10 txt-xl"><i class="ri-search-line"></i></label> <!> <!> <!></form>');function Zl(n,e){Ue(e,!1);const t=zt(),i="search_"+F.randomString(7);let a=ee(e,"value",12,""),s=ee(e,"placeholder",8,'Search term or filter like created > "2022-01-01"...'),o=ee(e,"autocompleteCollection",8,null),l=ee(e,"extraAutocompleteKeys",24,()=>[]),c=P(),u=P(!1),d=P(),f=P("");function h(I=!0){_(f,""),I&&r(d)?.focus(),t("clear")}function b(){a(r(f)),t("submit",a())}async function v(){r(c)||r(u)||(_(u,!0),_(c,(await Ut(async()=>{const{default:I}=await import("./FilterAutocompleteInput-DvDaN08m.js");return{default:I}},__vite__mapDeps([0,1]),import.meta.url)).default),_(u,!1))}un(()=>{v()}),ne(()=>R(a()),()=>{typeof a()=="string"&&_(f,a())}),ft(),He();var g=X1(),m=T(g),k=y(m,2);{var x=I=>{var D=tt(),A=q(D);{let L=ie(()=>a()||s());pi(A,()=>r(c),(N,H)=>{H(N,{get id(){return i},singleLine:!0,disableRequestKeys:!0,disableCollectionJoinKeys:!0,get extraAutocompleteKeys(){return l()},get baseCollection(){return o()},get placeholder(){return r(L)},get value(){return r(f)},set value(j){_(f,j)},$$events:{submit:b},$$legacy:!0})})}p(I,D)},C=I=>{var D=Z1();mt(D,A=>_(d,A),()=>r(d)),z(()=>{W(D,"id",i),W(D,"placeholder",a()||s())}),xt(D,()=>r(f),A=>_(f,A)),p(I,D)};G(k,I=>{r(c)&&!r(u)?I(x):I(C,!1)})}var O=y(k,2);{var $=I=>{var D=J1();Et(3,D,()=>Kr,()=>({duration:150,x:5})),p(I,D)};G(O,I=>{R(a()),r(f),M(()=>(a().length||r(f).length)&&r(f)!=a())&&I($)})}var E=y(O,2);{var w=I=>{var D=G1();Et(3,D,()=>Kr,()=>({duration:150,x:5})),re("click",D,()=>{h(!1),b()}),p(I,D)};G(E,I=>{R(a()),r(f),M(()=>a().length||r(f).length)&&I(w)})}z(()=>W(m,"for",i)),re("click",g,hn(function(I){ot.call(this,e,I)})),re("submit",g,Ct(b)),p(n,g),Be()}var Q1=S('<button type="button" aria-label="Refresh"><i class="ri-refresh-line svelte-1bvelc2"></i></button>');function Jl(n,e){Ue(e,!1);const t=zt();let i=ee(e,"tooltip",28,()=>({text:"Refresh",position:"right"})),a=ee(e,"class",8,""),s=P(null);function o(){t("refresh");const u=i();i(null),clearTimeout(r(s)),_(s,setTimeout(()=>{_(s,null),i(u)},150))}un(()=>()=>clearTimeout(r(s))),He();var l=Q1();let c;Qe(l,(u,d)=>dt?.(u,d),i),Rt(()=>re("click",l,o)),z(u=>c=Re(l,1,`btn btn-transparent btn-circle ${a()??""}`,"svelte-1bvelc2",c,u),[()=>({refreshing:r(s)})]),p(n,l),Be()}var e0=S('<div class="scroller-wrapper svelte-3a0gfs"><!> <div><!></div> <!></div>');function bd(n,e){Ue(e,!1);const t=zt();let i=ee(e,"class",8,""),a=ee(e,"vThreshold",12,0),s=ee(e,"hThreshold",12,0),o=ee(e,"dispatchOnNoScroll",8,!0),l=P(null),c=P(""),u=null,d,f,h,b,v;function g(){r(l)&&ut(l,r(l).scrollTop=0)}function m(){r(l)&&ut(l,r(l).scrollLeft=0)}function k(){r(l)&&(_(c,""),h=r(l).clientWidth+2,b=r(l).clientHeight+2,d=r(l).scrollWidth-h,f=r(l).scrollHeight-b,f>0?(_(c,r(c)+" v-scroll"),a()>=b&&a(0),r(l).scrollTop-a()<=0&&(_(c,r(c)+" v-scroll-start"),t("vScrollStart")),r(l).scrollTop+a()>=f&&(_(c,r(c)+" v-scroll-end"),t("vScrollEnd"))):o()&&t("vScrollEnd"),d>0?(_(c,r(c)+" h-scroll"),s()>=h&&s(0),r(l).scrollLeft-s()<=0&&(_(c,r(c)+" h-scroll-start"),t("hScrollStart")),r(l).scrollLeft+s()>=d&&(_(c,r(c)+" h-scroll-end"),t("hScrollEnd"))):o()&&t("hScrollEnd"))}function x(){u||(u=setTimeout(()=>{k(),u=null},150))}un(()=>(x(),v=new MutationObserver(x),v.observe(r(l),{attributeFilter:["width","height"],childList:!0,subtree:!0}),()=>{v?.disconnect(),clearTimeout(u)})),He();var C=e0();re("resize",xr,x);var O=T(C);Gt(O,e,"before",{},null);var $=y(O,2),E=T($);Gt(E,e,"default",{},null),mt($,I=>_(l,I),()=>r(l));var w=y($,2);return Gt(w,e,"after",{},null),z(()=>Re($,1,`scroller ${i()??""} ${r(c)??""}`,"svelte-3a0gfs")),re("scroll",$,x),p(n,C),_t(e,"resetVerticalScroll",g),_t(e,"resetHorizontalScroll",m),_t(e,"refresh",k),_t(e,"throttleRefresh",x),Be({resetVerticalScroll:g,resetHorizontalScroll:m,refresh:k,throttleRefresh:x})}var t0=S('<th tabindex="0"><!></th>');function rl(n,e){let t=ee(e,"class",8,""),i=ee(e,"name",8),a=ee(e,"sort",12,""),s=ee(e,"disable",8,!1);function o(){s()||("-"+i()===a()?a("+"+i()):a("-"+i()))}var l=t0();let c;var u=T(l);Gt(u,e,"default",{},null),z(d=>{W(l,"title",i()),c=Re(l,1,`col-sort ${t()??""}`,null,c,d)},[()=>({"col-sort-disabled":s(),"sort-active":a()==="-"+i()||a()==="+"+i(),"sort-desc":a()==="-"+i(),"sort-asc":a()==="+"+i()})]),re("click",l,()=>o()),re("keydown",l,d=>{(d.code==="Enter"||d.code==="Space")&&(d.preventDefault(),o())}),p(n,l)}var n0=S('<span class="txt-nowrap"> </span>');function Wp(n,e){Ue(e,!1);let t=ee(e,"date",8);const i={get text(){return F.formatToLocalDate(t(),"yyyy-MM-dd HH:mm:ss.SSS")+" Local"}};He();var a=n0(),s=T(a);Qe(a,(o,l)=>dt?.(o,l),()=>i),z(o=>Te(s,o),[()=>(R(t()),M(()=>t().replace("Z"," UTC")))]),p(n,a),Be()}var i0=S('<div><span class="txt"> </span></div>');function Yp(n,e){Ue(e,!1);const t=P();let i=ee(e,"level",8);ne(()=>R(i()),()=>{_(t,Pp.find(l=>l.level==i())?.label)}),ft(),He();var a=i0(),s=T(a),o=T(s);z(()=>{Re(a,1,`label log-level-label level-${i()??""}`,"svelte-ha6hme"),Te(o,`${r(t)||"UNKN"} (${i()??""})`)}),p(n,a),Be()}var r0=S('<span class="loader loader-sm"></span>'),a0=S('<div class="form-field"><input type="checkbox" id="checkbox_0"/> <label for="checkbox_0"></label></div>'),s0=S('<div class="col-header-content"><i class="ri-bookmark-line"></i> <span class="txt">level</span></div>'),o0=S('<div class="col-header-content"><i class="ri-file-list-2-line"></i> <span class="txt">message</span></div>'),l0=S('<div class="col-header-content"><i></i> <span class="txt">created</span></div>'),c0=S("<span><!></span>"),u0=S('<div class="flex flex-wrap flex-gap-10 m-t-10"></div>'),d0=S('<tr tabindex="0" class="row-handle"><td class="bulk-select-col min-width"><div class="form-field"><input type="checkbox"/> <label></label></div></td><td class="col-type-text col-field-level min-width svelte-91v05h"><!></td><td class="col-type-text col-field-message svelte-91v05h"><div class="flex flex-gap-10"><span class="txt-ellipsis"> </span></div> <!></td><td class="col-type-date col-field-created"><!></td><td class="col-type-action min-width"><i class="ri-arrow-right-line"></i></td></tr>'),f0=S('<tr><td colspan="99" class="p-xs"><span class="skeleton-loader m-0"></span></td></tr>'),h0=S('<button type="button" class="btn btn-hint btn-expanded m-t-sm"><span class="txt">Clear filters</span></button>'),v0=S('<tr><td colspan="99" class="txt-center txt-hint p-xs"><h6>No logs found.</h6> <!></td></tr>'),m0=S('<table><thead><tr><th class="bulk-select-col min-width"><!></th><!><!><!><th class="col-type-action min-width"></th></tr></thead><tbody></tbody></table>'),p0=S('<div class="block txt-center m-t-sm"><button type="button"><span class="txt">Load more</span></button></div>'),g0=S('<div class="bulkbar svelte-91v05h"><div class="txt">Selected <strong> </strong> </div> <button type="button" class="btn btn-xs btn-transparent btn-outline p-l-5 p-r-5"><span class="txt">Reset</span></button> <div class="flex-fill"></div> <button type="button" class="btn btn-sm"><span class="txt">Download as JSON</span></button></div>'),b0=S("<!> <!> <!>",1);function y0(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=zt(),o=50;let l=ee(e,"filter",12,""),c=ee(e,"presets",8,""),u=ee(e,"zoom",24,()=>({})),d=ee(e,"sort",12,"-@rowid"),f=P([]),h=P(1),b=P(0),v=P(!1),g=0,m=P({});async function k(U=1,B=!0){_(v,!0);const J=[c(),F.normalizeLogsFilter(l())];return u().min&&u().max&&J.push(`created >= "${u().min}" && created <= "${u().max}"`),Le.logs.getList(U,o,{sort:d(),skipTotal:1,filter:J.filter(Boolean).map(Q=>"("+Q+")").join("&&")}).then(async Q=>{U<=1&&x();const oe=F.toArray(Q.items);if(_(v,!1),_(h,Q.page),_(b,Q.items?.length||0),s("load",r(f).concat(oe)),B){const de=++g;for(;oe.length&&g==de;){const ge=oe.splice(0,10);for(let pe of ge)F.pushOrReplaceByKey(r(f),pe);_(f,r(f)),await F.yieldToMain()}}else{for(let de of oe)F.pushOrReplaceByKey(r(f),de);_(f,r(f))}}).catch(Q=>{Q?.isAbort||(_(v,!1),console.warn(Q),x(),Le.error(Q,!J||Q?.status!=400))})}function x(){_(f,[]),_(m,{}),_(h,1),_(b,0)}function C(){r(a)?O():$()}function O(){_(m,{})}function $(){for(const U of r(f))ut(m,r(m)[U.id]=U);_(m,r(m))}function E(U){r(m)[U.id]?delete r(m)[U.id]:ut(m,r(m)[U.id]=U),_(m,r(m))}const w=/[-:\. ]/gi;function I(){const U=Object.values(r(m)).sort((Q,oe)=>Q.created<oe.created?1:Q.created>oe.created?-1:0);if(!U.length)return;if(U.length==1)return F.downloadJson(U[0],"log_"+U[0].created.replaceAll(w,"")+".json");const B=U[0].created.replaceAll(w,""),J=U[U.length-1].created.replaceAll(w,"");return F.downloadJson(U,`${U.length}_logs_${J}_to_${B}.json`)}function D(U){let B=[];if(!U.data)return B;if(U.data.type=="request"){const J=["status","execTime","auth","authId","userIP"];for(let Q of J)typeof U.data[Q]<"u"&&B.push({key:Q});U.data.referer&&!U.data.referer.includes(window.location.host)&&B.push({key:"referer"})}else{const J=Object.keys(U.data);for(const Q of J)Q!="error"&&Q!="details"&&B.length<6&&B.push({key:Q})}return U.data.error&&B.push({key:"error",label:"label-danger"}),U.data.details&&B.push({key:"details",label:"label-warning"}),B}ne(()=>(R(d()),R(l()),R(c()),R(u())),()=>{(typeof d()<"u"||typeof l()<"u"||typeof c()<"u"||typeof u()<"u")&&(x(),k(1))}),ne(()=>r(b),()=>{_(t,r(b)>=o)}),ne(()=>r(m),()=>{_(i,Object.keys(r(m)).length)}),ne(()=>(r(f),r(i)),()=>{_(a,r(f).length&&r(i)===r(f).length)}),ft(),He();var A=b0(),L=q(A);bd(L,{class:"table-wrapper",children:(U,B)=>{var J=m0();let Q;var oe=T(J),de=T(oe),ge=T(de),pe=T(ge);{var xe=we=>{var ue=r0();p(we,ue)},ve=we=>{var ue=a0(),me=T(ue);z(()=>{me.disabled=(r(f),M(()=>!r(f).length)),Ur(me,r(a))}),re("change",me,()=>C()),p(we,ue)};G(pe,we=>{r(v)?we(xe):we(ve,!1)})}var Ee=y(ge);rl(Ee,{disable:!0,class:"col-field-level min-width",name:"level",get sort(){return d()},set sort(we){d(we)},children:(we,ue)=>{var me=s0();p(we,me)},$$slots:{default:!0},$$legacy:!0});var ce=y(Ee);rl(ce,{disable:!0,class:"col-type-text col-field-message",name:"data",get sort(){return d()},set sort(we){d(we)},children:(we,ue)=>{var me=o0();p(we,me)},$$slots:{default:!0},$$legacy:!0});var he=y(ce);rl(he,{disable:!0,class:"col-type-date col-field-created",name:"created",get sort(){return d()},set sort(we){d(we)},children:(we,ue)=>{var me=l0(),ae=T(me);z(te=>Re(ae,1,te,"svelte-91v05h"),[()=>$n((R(F),M(()=>F.getFieldTypeIcon("date"))))]),p(we,me)},$$slots:{default:!0},$$legacy:!0});var be=y(oe);bt(be,5,()=>r(f),we=>we.id,(we,ue)=>{const me=ie(()=>(r(ue),M(()=>r(ue).data?.type=="request"))),ae=ie(()=>(r(ue),M(()=>D(r(ue)))));var te=d0(),se=T(te),ye=T(se),ke=T(ye),Ie=y(ke,2),Ne=y(se),ze=T(Ne);Yp(ze,{get level(){return r(ue),M(()=>r(ue).level)}});var Me=y(Ne),Ge=T(Me),_e=T(Ge),Oe=T(_e),Fe=y(Ge,2);{var at=We=>{var Ye=u0();bt(Ye,5,()=>r(ae),At,(De,qe)=>{var Ke=c0(),ct=T(Ke);{var Ve=et=>{var Je=or();z(()=>Te(Je,`${r(qe),M(()=>r(qe).key)??""}: ${r(ue),r(qe),M(()=>r(ue).data[r(qe).key])??""}ms`)),p(et,Je)},Xe=et=>{var Je=or();z(ht=>Te(Je,`${r(qe),M(()=>r(qe).key)??""}: ${ht??""}`),[()=>(R(F),r(ue),r(qe),M(()=>F.stringifyValue(r(ue).data[r(qe).key],"N/A",80)))]),p(et,Je)};G(ct,et=>{R(r(me)),r(qe),M(()=>r(me)&&r(qe).key=="execTime")?et(Ve):et(Xe,!1)})}z(()=>Re(Ke,1,`label label-sm ${r(qe),M(()=>r(qe).label||"")??""}`,"svelte-91v05h")),p(De,Ke)}),p(We,Ye)};G(Fe,We=>{R(r(ae)),M(()=>r(ae).length)&&We(at)})}var je=y(Me),nt=T(je);Wp(nt,{get date(){return r(ue),M(()=>r(ue).created)}}),z(()=>{W(ke,"id",`checkbox_${r(ue),M(()=>r(ue).id)??""}`),Ur(ke,(r(m),r(ue),M(()=>r(m)[r(ue).id]))),W(Ie,"for",`checkbox_${r(ue),M(()=>r(ue).id)??""}`),Te(Oe,(r(ue),M(()=>r(ue).message)))}),re("change",ke,()=>E(r(ue))),re("click",ye,hn(function(We){ot.call(this,e,We)})),re("click",te,()=>s("select",r(ue))),re("keydown",te,We=>{We.code==="Enter"&&(We.preventDefault(),s("select",r(ue)))}),p(we,te)},we=>{var ue=tt(),me=q(ue);{var ae=se=>{var ye=f0();p(se,ye)},te=se=>{var ye=v0(),ke=T(ye),Ie=y(T(ke),2);{var Ne=ze=>{var Me=h0();re("click",Me,()=>l("")),p(ze,Me)};G(Ie,ze=>{R(l()),M(()=>l()?.length)&&ze(Ne)})}p(se,ye)};G(me,se=>{r(v)?se(ae):se(te,!1)})}p(we,ue)}),z(we=>Q=Re(J,1,"table",null,Q,we),[()=>({"table-loading":r(v)})]),p(U,J)},$$slots:{default:!0}});var N=y(L,2);{var H=U=>{var B=p0(),J=T(B);let Q;z(oe=>Q=Re(J,1,"btn btn-lg btn-secondary btn-expanded",null,Q,oe),[()=>({"btn-loading":r(v),"btn-disabled":r(v)})]),re("click",J,()=>k(r(h)+1)),p(U,B)};G(N,U=>{r(f),r(t),M(()=>r(f).length&&r(t))&&U(H)})}var j=y(N,2);{var V=U=>{var B=g0(),J=T(B),Q=y(T(J)),oe=T(Q),de=y(Q),ge=y(J,2),pe=y(ge,4);z(()=>{Te(oe,r(i)),Te(de,` ${r(i)===1?"log":"logs"}`)}),re("click",ge,()=>O()),re("click",pe,I),Et(3,B,()=>Kr,()=>({duration:150,y:5})),p(U,B)};G(j,U=>{r(i)&&U(V)})}return p(n,A),_t(e,"load",k),Be({load:k})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function bo(n){return n+.5|0}const zr=(n,e,t)=>Math.max(Math.min(n,t),e);function Ms(n){return zr(bo(n*2.55),0,255)}function Wr(n){return zr(bo(n*255),0,255)}function br(n){return zr(bo(n/2.55)/100,0,1)}function Jf(n){return zr(bo(n*100),0,100)}const wi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Su=[..."0123456789ABCDEF"],_0=n=>Su[n&15],x0=n=>Su[(n&240)>>4]+Su[n&15],Mo=n=>(n&240)>>4===(n&15),w0=n=>Mo(n.r)&&Mo(n.g)&&Mo(n.b)&&Mo(n.a);function k0(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&wi[n[1]]*17,g:255&wi[n[2]]*17,b:255&wi[n[3]]*17,a:e===5?wi[n[4]]*17:255}:(e===7||e===9)&&(t={r:wi[n[1]]<<4|wi[n[2]],g:wi[n[3]]<<4|wi[n[4]],b:wi[n[5]]<<4|wi[n[6]],a:e===9?wi[n[7]]<<4|wi[n[8]]:255})),t}const S0=(n,e)=>n<255?e(n):"";function T0(n){var e=w0(n)?_0:x0;return n?"#"+e(n.r)+e(n.g)+e(n.b)+S0(n.a,e):void 0}const $0=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Kp(n,e,t){const i=e*Math.min(t,1-t),a=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function I0(n,e,t){const i=(a,s=(a+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function C0(n,e,t){const i=Kp(n,1,.5);let a;for(e+t>1&&(a=1/(e+t),e*=a,t*=a),a=0;a<3;a++)i[a]*=1-e-t,i[a]+=e;return i}function E0(n,e,t,i,a){return n===a?(e-t)/i+(e<t?6:0):e===a?(t-n)/i+2:(n-e)/i+4}function yd(n){const t=n.r/255,i=n.g/255,a=n.b/255,s=Math.max(t,i,a),o=Math.min(t,i,a),l=(s+o)/2;let c,u,d;return s!==o&&(d=s-o,u=l>.5?d/(2-s-o):d/(s+o),c=E0(t,i,a,d,s),c=c*60+.5),[c|0,u||0,l]}function _d(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Wr)}function xd(n,e,t){return _d(Kp,n,e,t)}function O0(n,e,t){return _d(C0,n,e,t)}function D0(n,e,t){return _d(I0,n,e,t)}function Zp(n){return(n%360+360)%360}function P0(n){const e=$0.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Ms(+e[5]):Wr(+e[5]));const a=Zp(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=O0(a,s,o):e[1]==="hsv"?i=D0(a,s,o):i=xd(a,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function M0(n,e){var t=yd(n);t[0]=Zp(t[0]+e),t=xd(t),n.r=t[0],n.g=t[1],n.b=t[2]}function A0(n){if(!n)return;const e=yd(n),t=e[0],i=Jf(e[1]),a=Jf(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${a}%, ${br(n.a)})`:`hsl(${t}, ${i}%, ${a}%)`}const Gf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Xf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function L0(){const n={},e=Object.keys(Xf),t=Object.keys(Gf);let i,a,s,o,l;for(i=0;i<e.length;i++){for(o=l=e[i],a=0;a<t.length;a++)s=t[a],l=l.replace(s,Gf[s]);s=parseInt(Xf[o],16),n[l]=[s>>16&255,s>>8&255,s&255]}return n}let Ao;function N0(n){Ao||(Ao=L0(),Ao.transparent=[0,0,0,0]);const e=Ao[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const R0=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function F0(n){const e=R0.exec(n);let t=255,i,a,s;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?Ms(o):zr(o*255,0,255)}return i=+e[1],a=+e[3],s=+e[5],i=255&(e[2]?Ms(i):zr(i,0,255)),a=255&(e[4]?Ms(a):zr(a,0,255)),s=255&(e[6]?Ms(s):zr(s,0,255)),{r:i,g:a,b:s,a:t}}}function q0(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${br(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Cc=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ja=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function z0(n,e,t){const i=ja(br(n.r)),a=ja(br(n.g)),s=ja(br(n.b));return{r:Wr(Cc(i+t*(ja(br(e.r))-i))),g:Wr(Cc(a+t*(ja(br(e.g))-a))),b:Wr(Cc(s+t*(ja(br(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Lo(n,e,t){if(n){let i=yd(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=xd(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Jp(n,e){return n&&Object.assign(e||{},n)}function Qf(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Wr(n[3]))):(e=Jp(n,{r:0,g:0,b:0,a:1}),e.a=Wr(e.a)),e}function j0(n){return n.charAt(0)==="r"?F0(n):P0(n)}class Xs{constructor(e){if(e instanceof Xs)return e;const t=typeof e;let i;t==="object"?i=Qf(e):t==="string"&&(i=k0(e)||N0(e)||j0(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Jp(this._rgb);return e&&(e.a=br(e.a)),e}set rgb(e){this._rgb=Qf(e)}rgbString(){return this._valid?q0(this._rgb):void 0}hexString(){return this._valid?T0(this._rgb):void 0}hslString(){return this._valid?A0(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,a=e.rgb;let s;const o=t===s?.5:t,l=2*o-1,c=i.a-a.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;s=1-u,i.r=255&u*i.r+s*a.r+.5,i.g=255&u*i.g+s*a.g+.5,i.b=255&u*i.b+s*a.b+.5,i.a=o*i.a+(1-o)*a.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=z0(this._rgb,e._rgb,t)),this}clone(){return new Xs(this.rgb)}alpha(e){return this._rgb.a=Wr(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=bo(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Lo(this._rgb,2,e),this}darken(e){return Lo(this._rgb,2,-e),this}saturate(e){return Lo(this._rgb,1,e),this}desaturate(e){return Lo(this._rgb,1,-e),this}rotate(e){return M0(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function mr(){}const V0=(()=>{let n=0;return()=>n++})();function en(n){return n==null}function Sn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function jt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function zn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ji(n,e){return zn(n)?n:e}function Yt(n,e){return typeof n>"u"?e:n}const U0=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Mt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function qt(n,e,t,i){let a,s,o;if(Sn(n))for(s=n.length,a=0;a<s;a++)e.call(t,n[a],a);else if(jt(n))for(o=Object.keys(n),s=o.length,a=0;a<s;a++)e.call(t,n[o[a]],o[a])}function yl(n,e){let t,i,a,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(a=n[t],s=e[t],a.datasetIndex!==s.datasetIndex||a.index!==s.index)return!1;return!0}function _l(n){if(Sn(n))return n.map(_l);if(jt(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let a=0;for(;a<i;++a)e[t[a]]=_l(n[t[a]]);return e}return n}function Gp(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function B0(n,e,t,i){if(!Gp(n))return;const a=e[n],s=t[n];jt(a)&&jt(s)?Qs(a,s,i):e[n]=_l(s)}function Qs(n,e,t){const i=Sn(e)?e:[e],a=i.length;if(!jt(n))return n;t=t||{};const s=t.merger||B0;let o;for(let l=0;l<a;++l){if(o=i[l],!jt(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)s(c[u],n,o,t)}return n}function qs(n,e){return Qs(n,e,{merger:H0})}function H0(n,e,t){if(!Gp(n))return;const i=e[n],a=t[n];jt(i)&&jt(a)?qs(i,a):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=_l(a))}const eh={"":n=>n,x:n=>n.x,y:n=>n.y};function W0(n){const e=n.split("."),t=[];let i="";for(const a of e)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Y0(n){const e=W0(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function xl(n,e){return(eh[e]||(eh[e]=Y0(e)))(n)}function wd(n){return n.charAt(0).toUpperCase()+n.slice(1)}const wl=n=>typeof n<"u",Zr=n=>typeof n=="function",th=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function K0(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const qn=Math.PI,lr=2*qn,Z0=lr+qn,kl=Number.POSITIVE_INFINITY,J0=qn/180,zi=qn/2,sa=qn/4,nh=qn*2/3,Xp=Math.log10,Jr=Math.sign;function _a(n,e,t){return Math.abs(n-e)<t}function ih(n){const e=Math.round(n);n=_a(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Xp(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function G0(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((a,s)=>a-s).pop(),e}function X0(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function eo(n){return!X0(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Q0(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function ew(n,e,t){let i,a,s;for(i=0,a=n.length;i<a;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function va(n){return n*(qn/180)}function tw(n){return n*(180/qn)}function rh(n){if(!zn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function nw(n,e){const t=e.x-n.x,i=e.y-n.y,a=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*qn&&(s+=lr),{angle:s,distance:a}}function Tu(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function iw(n,e){return(n-e+Z0)%lr-qn}function tr(n){return(n%lr+lr)%lr}function Qp(n,e,t,i){const a=tr(n),s=tr(e),o=tr(t),l=tr(s-a),c=tr(o-a),u=tr(a-s),d=tr(a-o);return a===s||a===o||i&&s===o||l>c&&u<d}function ji(n,e,t){return Math.max(e,Math.min(t,n))}function rw(n){return ji(n,-32768,32767)}function eg(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function kd(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,a=0,s;for(;i-a>1;)s=a+i>>1,t(s)?a=s:i=s;return{lo:a,hi:i}}const ma=(n,e,t,i)=>kd(n,t,i?a=>{const s=n[a][e];return s<t||s===t&&n[a+1][e]===t}:a=>n[a][e]<t),aw=(n,e,t)=>kd(n,t,i=>n[i][e]>=t);function sw(n,e,t){let i=0,a=n.length;for(;i<a&&n[i]<e;)i++;for(;a>i&&n[a-1]>t;)a--;return i>0||a<n.length?n.slice(i,a):n}const tg=["push","pop","shift","splice","unshift"];function ow(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),tg.forEach(t=>{const i="_onData"+wd(t),a=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=a.apply(this,s);return n._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...s)}),o}})})}function ah(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,a=i.indexOf(e);a!==-1&&i.splice(a,1),!(i.length>0)&&(tg.forEach(s=>{delete n[s]}),delete n._chartjs)}function lw(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const ng=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function ig(n,e){let t=[],i=!1;return function(...a){t=a,i||(i=!0,ng.call(window,()=>{i=!1,n.apply(e,t)}))}}function cw(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const uw=n=>n==="start"?"left":n==="end"?"right":"center",sh=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2;function dw(n,e,t){const i=e.length;let a=0,s=i;if(n._sorted){const{iScale:o,vScale:l,_parsed:c}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=o.axis,{min:f,max:h,minDefined:b,maxDefined:v}=o.getUserBounds();if(b){if(a=Math.min(ma(c,d,f).lo,t?i:ma(e,d,o.getPixelForValue(f)).lo),u){const g=c.slice(0,a+1).reverse().findIndex(m=>!en(m[l.axis]));a-=Math.max(0,g)}a=ji(a,0,i-1)}if(v){let g=Math.max(ma(c,o.axis,h,!0).hi+1,t?0:ma(e,d,o.getPixelForValue(h),!0).hi+1);if(u){const m=c.slice(g-1).findIndex(k=>!en(k[l.axis]));g+=Math.max(0,m)}s=ji(g,a,i)-a}else s=i-a}return{start:a,count:s}}function fw(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,a={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=a,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,a),s}const No=n=>n===0||n===1,oh=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*lr/t)),lh=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*lr/t)+1,zs={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*zi)+1,easeOutSine:n=>Math.sin(n*zi),easeInOutSine:n=>-.5*(Math.cos(qn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>No(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>No(n)?n:oh(n,.075,.3),easeOutElastic:n=>No(n)?n:lh(n,.075,.3),easeInOutElastic(n){return No(n)?n:n<.5?.5*oh(n*2,.1125,.45):.5+.5*lh(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-zs.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?zs.easeInBounce(n*2)*.5:zs.easeOutBounce(n*2-1)*.5+.5};function Sd(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ch(n){return Sd(n)?n:new Xs(n)}function Ec(n){return Sd(n)?n:new Xs(n).saturate(.5).darken(.1).hexString()}const hw=["x","y","borderWidth","radius","tension"],vw=["color","borderColor","backgroundColor"];function mw(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:vw},numbers:{type:"number",properties:hw}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function pw(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const uh=new Map;function gw(n,e){e=e||{};const t=n+JSON.stringify(e);let i=uh.get(t);return i||(i=new Intl.NumberFormat(n,e),uh.set(t,i)),i}function rg(n,e,t){return gw(e,t).format(n)}const bw={values(n){return Sn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let a,s=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(a="scientific"),s=yw(n,t)}const o=Xp(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:a,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),rg(n,i,c)}};function yw(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var ag={formatters:bw};function _w(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ag.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ka=Object.create(null),$u=Object.create(null);function js(n,e){if(!e)return n;const t=e.split(".");for(let i=0,a=t.length;i<a;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function Oc(n,e,t){return typeof e=="string"?Qs(js(n,e),t):Qs(js(n,""),e)}class xw{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>Ec(a.backgroundColor),this.hoverBorderColor=(i,a)=>Ec(a.borderColor),this.hoverColor=(i,a)=>Ec(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Oc(this,e,t)}get(e){return js(this,e)}describe(e,t){return Oc($u,e,t)}override(e,t){return Oc(ka,e,t)}route(e,t,i,a){const s=js(this,e),o=js(this,i),l="_"+t;Object.defineProperties(s,{[l]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],u=o[a];return jt(c)?Object.assign({},u,c):Yt(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var yn=new xw({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mw,pw,_w]);function ww(n){return!n||en(n.size)||en(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function dh(n,e,t,i,a){let s=e[a];return s||(s=e[a]=n.measureText(a).width,t.push(a)),s>i&&(i=s),i}function oa(n,e,t){const i=n.currentDevicePixelRatio,a=t!==0?Math.max(t/2,.5):0;return Math.round((e-a)*i)/i+a}function fh(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Iu(n,e,t,i){kw(n,e,t,i)}function kw(n,e,t,i,a){let s,o,l,c,u,d,f,h;const b=e.pointStyle,v=e.rotation,g=e.radius;let m=(v||0)*J0;if(b&&typeof b=="object"&&(s=b.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),n.restore();return}if(!(isNaN(g)||g<=0)){switch(n.beginPath(),b){default:n.arc(t,i,g,0,lr),n.closePath();break;case"triangle":d=g,n.moveTo(t+Math.sin(m)*d,i-Math.cos(m)*g),m+=nh,n.lineTo(t+Math.sin(m)*d,i-Math.cos(m)*g),m+=nh,n.lineTo(t+Math.sin(m)*d,i-Math.cos(m)*g),n.closePath();break;case"rectRounded":u=g*.516,c=g-u,o=Math.cos(m+sa)*c,f=Math.cos(m+sa)*c,l=Math.sin(m+sa)*c,h=Math.sin(m+sa)*c,n.arc(t-f,i-l,u,m-qn,m-zi),n.arc(t+h,i-o,u,m-zi,m),n.arc(t+f,i+l,u,m,m+zi),n.arc(t-h,i+o,u,m+zi,m+qn),n.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*g,d=c,n.rect(t-d,i-c,2*d,2*c);break}m+=sa;case"rectRot":f=Math.cos(m)*g,o=Math.cos(m)*g,l=Math.sin(m)*g,h=Math.sin(m)*g,n.moveTo(t-f,i-l),n.lineTo(t+h,i-o),n.lineTo(t+f,i+l),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":m+=sa;case"cross":f=Math.cos(m)*g,o=Math.cos(m)*g,l=Math.sin(m)*g,h=Math.sin(m)*g,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":f=Math.cos(m)*g,o=Math.cos(m)*g,l=Math.sin(m)*g,h=Math.sin(m)*g,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),m+=sa,f=Math.cos(m)*g,o=Math.cos(m)*g,l=Math.sin(m)*g,h=Math.sin(m)*g,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=Math.cos(m)*g,l=Math.sin(m)*g,n.moveTo(t-o,i-l),n.lineTo(t+o,i+l);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*g,i+Math.sin(m)*g);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ss(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Td(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function $d(n){n.restore()}function Sw(n,e,t,i,a){if(!e)return n.lineTo(t.x,t.y);if(a==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else a==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Tw(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function $w(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),en(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Iw(n,e,t,i,a){if(a.strikethrough||a.underline){const s=n.measureText(i),o=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,u=t+s.actualBoundingBoxDescent,d=a.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=a.decorationWidth||2,n.moveTo(o,d),n.lineTo(l,d),n.stroke()}}function Cw(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function hh(n,e,t,i,a,s={}){const o=Sn(e)?e:[e],l=s.strokeWidth>0&&s.strokeColor!=="";let c,u;for(n.save(),n.font=a.string,$w(n,s),c=0;c<o.length;++c)u=o[c],s.backdrop&&Cw(n,s.backdrop),l&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),en(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(u,t,i,s.maxWidth)),n.fillText(u,t,i,s.maxWidth),Iw(n,t,i,u,s),i+=Number(a.lineHeight);n.restore()}function vh(n,e){const{x:t,y:i,w:a,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*qn,qn,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,qn,zi,!0),n.lineTo(t+a-o.bottomRight,i+s),n.arc(t+a-o.bottomRight,i+s-o.bottomRight,o.bottomRight,zi,0,!0),n.lineTo(t+a,i+o.topRight),n.arc(t+a-o.topRight,i+o.topRight,o.topRight,0,-zi,!0),n.lineTo(t+o.topLeft,i)}const Ew=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ow=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Dw(n,e){const t=(""+n).match(Ew);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const Pw=n=>+n||0;function sg(n,e){const t={},i=jt(e),a=i?Object.keys(e):e,s=jt(n)?i?o=>Yt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of a)t[o]=Pw(s(o));return t}function Mw(n){return sg(n,{top:"y",right:"x",bottom:"y",left:"x"})}function al(n){return sg(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Gr(n){const e=Mw(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ar(n,e){n=n||{},e=e||yn.font;let t=Yt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Yt(n.style,e.style);i&&!(""+i).match(Ow)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:Yt(n.family,e.family),lineHeight:Dw(Yt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Yt(n.weight,e.weight),string:""};return a.string=ww(a),a}function Ro(n,e,t,i){let a,s,o;for(a=0,s=n.length;a<s;++a)if(o=n[a],o!==void 0&&o!==void 0)return o}function Aw(n,e,t){const{min:i,max:a}=n,s=U0(e,(a-i)/2),o=(l,c)=>t&&l===0?0:l+c;return{min:o(i,-Math.abs(s)),max:o(a,s)}}function Da(n,e){return Object.assign(Object.create(n),e)}function Id(n,e=[""],t,i,a=()=>n[0]){const s=t||n;typeof i>"u"&&(i=ug("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:a,override:l=>Id([l,...n],e,s,i)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete n[0][c],!0},get(l,c){return lg(l,c,()=>Vw(c,e,n,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(l,c){return ph(l).includes(c)},ownKeys(l){return ph(l)},set(l,c,u){const d=l._storage||(l._storage=a());return l[c]=d[c]=u,delete l._keys,!0}})}function os(n,e,t,i){const a={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:og(n,i),setContext:s=>os(n,s,t,i),override:s=>os(n.override(s),e,t,i)};return new Proxy(a,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,l){return lg(s,o,()=>Nw(s,o,l))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,l){return n[o]=l,delete s[o],!0}})}function og(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:a=e.allKeys}=n;return{allKeys:a,scriptable:t,indexable:i,isScriptable:Zr(t)?t:()=>t,isIndexable:Zr(i)?i:()=>i}}const Lw=(n,e)=>n?n+wd(e):e,Cd=(n,e)=>jt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function lg(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function Nw(n,e,t){const{_proxy:i,_context:a,_subProxy:s,_descriptors:o}=n;let l=i[e];return Zr(l)&&o.isScriptable(e)&&(l=Rw(e,l,n,t)),Sn(l)&&l.length&&(l=Fw(e,l,n,o.isIndexable)),Cd(e,l)&&(l=os(l,a,s&&s[e],o)),l}function Rw(n,e,t,i){const{_proxy:a,_context:s,_subProxy:o,_stack:l}=t;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let c=e(s,o||i);return l.delete(n),Cd(n,c)&&(c=Ed(a._scopes,a,n,c)),c}function Fw(n,e,t,i){const{_proxy:a,_context:s,_subProxy:o,_descriptors:l}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(jt(e[0])){const c=e,u=a._scopes.filter(d=>d!==c);e=[];for(const d of c){const f=Ed(u,a,n,d);e.push(os(f,s,o&&o[n],l))}}return e}function cg(n,e,t){return Zr(n)?n(e,t):n}const qw=(n,e)=>n===!0?e:typeof n=="string"?xl(e,n):void 0;function zw(n,e,t,i,a){for(const s of e){const o=qw(t,s);if(o){n.add(o);const l=cg(o._fallback,t,a);if(typeof l<"u"&&l!==t&&l!==i)return l}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function Ed(n,e,t,i){const a=e._rootScopes,s=cg(e._fallback,t,i),o=[...n,...a],l=new Set;l.add(i);let c=mh(l,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=mh(l,o,s,c,i),c===null)?!1:Id(Array.from(l),[""],a,s,()=>jw(e,t,i))}function mh(n,e,t,i,a){for(;t;)t=zw(n,e,t,i,a);return t}function jw(n,e,t){const i=n._getTarget();e in i||(i[e]={});const a=i[e];return Sn(a)&&jt(t)?t:a||{}}function Vw(n,e,t,i){let a;for(const s of e)if(a=ug(Lw(s,n),t),typeof a<"u")return Cd(n,a)?Ed(t,i,n,a):a}function ug(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function ph(n){let e=n._keys;return e||(e=n._keys=Uw(n._scopes)),e}function Uw(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(a=>!a.startsWith("_")))e.add(i);return Array.from(e)}const Bw=Number.EPSILON||1e-14,ls=(n,e)=>e<n.length&&!n[e].skip&&n[e],dg=n=>n==="x"?"y":"x";function Hw(n,e,t,i){const a=n.skip?e:n,s=e,o=t.skip?e:t,l=Tu(s,a),c=Tu(o,s);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=i*u,h=i*d;return{previous:{x:s.x-f*(o.x-a.x),y:s.y-f*(o.y-a.y)},next:{x:s.x+h*(o.x-a.x),y:s.y+h*(o.y-a.y)}}}function Ww(n,e,t){const i=n.length;let a,s,o,l,c,u=ls(n,0);for(let d=0;d<i-1;++d)if(c=u,u=ls(n,d+1),!(!c||!u)){if(_a(e[d],0,Bw)){t[d]=t[d+1]=0;continue}a=t[d]/e[d],s=t[d+1]/e[d],l=Math.pow(a,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),t[d]=a*o*e[d],t[d+1]=s*o*e[d])}}function Yw(n,e,t="x"){const i=dg(t),a=n.length;let s,o,l,c=ls(n,0);for(let u=0;u<a;++u){if(o=l,l=c,c=ls(n,u+1),!l)continue;const d=l[t],f=l[i];o&&(s=(d-o[t])/3,l[`cp1${t}`]=d-s,l[`cp1${i}`]=f-s*e[u]),c&&(s=(c[t]-d)/3,l[`cp2${t}`]=d+s,l[`cp2${i}`]=f+s*e[u])}}function Kw(n,e="x"){const t=dg(e),i=n.length,a=Array(i).fill(0),s=Array(i);let o,l,c,u=ls(n,0);for(o=0;o<i;++o)if(l=c,c=u,u=ls(n,o+1),!!c){if(u){const d=u[e]-c[e];a[o]=d!==0?(u[t]-c[t])/d:0}s[o]=l?u?Jr(a[o-1])!==Jr(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}Ww(n,a,s),Yw(n,s,e)}function Fo(n,e,t){return Math.max(Math.min(n,t),e)}function Zw(n,e){let t,i,a,s,o,l=ss(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=l,l=t<i-1&&ss(n[t+1],e),s&&(a=n[t],o&&(a.cp1x=Fo(a.cp1x,e.left,e.right),a.cp1y=Fo(a.cp1y,e.top,e.bottom)),l&&(a.cp2x=Fo(a.cp2x,e.left,e.right),a.cp2y=Fo(a.cp2y,e.top,e.bottom)))}function Jw(n,e,t,i,a){let s,o,l,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Kw(n,a);else{let u=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)l=n[s],c=Hw(u,l,n[Math.min(s+1,o-(i?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&Zw(n,t)}function Od(){return typeof window<"u"&&typeof document<"u"}function Dd(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Sl(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Gl=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Gw(n,e){return Gl(n).getPropertyValue(e)}const Xw=["top","right","bottom","left"];function xa(n,e,t){const i={};t=t?"-"+t:"";for(let a=0;a<4;a++){const s=Xw[a];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Qw=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function ek(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:a,offsetY:s}=i;let o=!1,l,c;if(Qw(a,s,n.target))l=a,c=s;else{const u=e.getBoundingClientRect();l=i.clientX-u.left,c=i.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function nr(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,a=Gl(t),s=a.boxSizing==="border-box",o=xa(a,"padding"),l=xa(a,"border","width"),{x:c,y:u,box:d}=ek(n,t),f=o.left+(d&&l.left),h=o.top+(d&&l.top);let{width:b,height:v}=e;return s&&(b-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-f)/b*t.width/i),y:Math.round((u-h)/v*t.height/i)}}function tk(n,e,t){let i,a;if(e===void 0||t===void 0){const s=n&&Dd(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),l=Gl(s),c=xa(l,"border","width"),u=xa(l,"padding");e=o.width-u.width-c.width,t=o.height-u.height-c.height,i=Sl(l.maxWidth,s,"clientWidth"),a=Sl(l.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||kl,maxHeight:a||kl}}const qo=n=>Math.round(n*10)/10;function nk(n,e,t,i){const a=Gl(n),s=xa(a,"margin"),o=Sl(a.maxWidth,n,"clientWidth")||kl,l=Sl(a.maxHeight,n,"clientHeight")||kl,c=tk(n,e,t);let{width:u,height:d}=c;if(a.boxSizing==="content-box"){const h=xa(a,"border","width"),b=xa(a,"padding");u-=b.width+h.width,d-=b.height+h.height}return u=Math.max(0,u-s.width),d=Math.max(0,i?u/i:d-s.height),u=qo(Math.min(u,o,c.maxWidth)),d=qo(Math.min(d,l,c.maxHeight)),u&&!d&&(d=qo(u/2)),(e!==void 0||t!==void 0)&&i&&c.height&&d>c.height&&(d=c.height,u=qo(Math.floor(d*i))),{width:u,height:d}}function gh(n,e,t){const i=e||1,a=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==a||o.width!==s?(n.currentDevicePixelRatio=i,o.height=a,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const ik=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Od()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function bh(n,e){const t=Gw(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ca(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function rk(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function ak(n,e,t,i){const a={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=ca(n,a,t),l=ca(a,s,t),c=ca(s,e,t),u=ca(o,l,t),d=ca(l,c,t);return ca(u,d,t)}const sk=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},ok=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Dc(n,e,t){return n?sk(e,t):ok()}function lk(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function ck(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function fg(n){return n==="angle"?{between:Qp,compare:iw,normalize:tr}:{between:eg,compare:(e,t)=>e-t,normalize:e=>e}}function yh({start:n,end:e,count:t,loop:i,style:a}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:a}}function uk(n,e,t){const{property:i,start:a,end:s}=t,{between:o,normalize:l}=fg(i),c=e.length;let{start:u,end:d,loop:f}=n,h,b;if(f){for(u+=c,d+=c,h=0,b=c;h<b&&o(l(e[u%c][i]),a,s);++h)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:n.style}}function hg(n,e,t){if(!t)return[n];const{property:i,start:a,end:s}=t,o=e.length,{compare:l,between:c,normalize:u}=fg(i),{start:d,end:f,loop:h,style:b}=uk(n,e,t),v=[];let g=!1,m=null,k,x,C;const O=()=>c(a,C,k)&&l(a,C)!==0,$=()=>l(s,k)===0||c(s,C,k),E=()=>g||O(),w=()=>!g||$();for(let I=d,D=d;I<=f;++I)x=e[I%o],!x.skip&&(k=u(x[i]),k!==C&&(g=c(k,a,s),m===null&&E()&&(m=l(k,a)===0?I:D),m!==null&&w()&&(v.push(yh({start:m,end:I,loop:h,count:o,style:b})),m=null),D=I,C=k));return m!==null&&v.push(yh({start:m,end:f,loop:h,count:o,style:b})),v}function vg(n,e){const t=[],i=n.segments;for(let a=0;a<i.length;a++){const s=hg(i[a],n.points,e);s.length&&t.push(...s)}return t}function dk(n,e,t,i){let a=0,s=e-1;if(t&&!i)for(;a<e&&!n[a].skip;)a++;for(;a<e&&n[a].skip;)a++;for(a%=e,t&&(s+=a);s>a&&n[s%e].skip;)s--;return s%=e,{start:a,end:s}}function fk(n,e,t,i){const a=n.length,s=[];let o=e,l=n[e],c;for(c=e+1;c<=t;++c){const u=n[c%a];u.skip||u.stop?l.skip||(i=!1,s.push({start:e%a,end:(c-1)%a,loop:i}),e=o=u.stop?c:null):(o=c,l.skip&&(e=c)),l=u}return o!==null&&s.push({start:e%a,end:o%a,loop:i}),s}function hk(n,e){const t=n.points,i=n.options.spanGaps,a=t.length;if(!a)return[];const s=!!n._loop,{start:o,end:l}=dk(t,a,s,i);if(i===!0)return _h(n,[{start:o,end:l,loop:s}],t,e);const c=l<o?l+a:l,u=!!n._fullLoop&&o===0&&l===a-1;return _h(n,fk(t,o,c,u),t,e)}function _h(n,e,t,i){return!i||!i.setContext||!t?e:vk(n,e,t,i)}function vk(n,e,t,i){const a=n._chart.getContext(),s=xh(n.options),{_datasetIndex:o,options:{spanGaps:l}}=n,c=t.length,u=[];let d=s,f=e[0].start,h=f;function b(v,g,m,k){const x=l?-1:1;if(v!==g){for(v+=c;t[v%c].skip;)v-=x;for(;t[g%c].skip;)g+=x;v%c!==g%c&&(u.push({start:v%c,end:g%c,loop:m,style:k}),d=k,f=g%c)}}for(const v of e){f=l?f:v.start;let g=t[f%c],m;for(h=f+1;h<=v.end;h++){const k=t[h%c];m=xh(i.setContext(Da(a,{type:"segment",p0:g,p1:k,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),mk(m,d)&&b(f,h-1,v.loop,d),g=k,d=m}f<h-1&&b(f,h-1,v.loop,d)}return u}function xh(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function mk(n,e){if(!e)return!1;const t=[],i=function(a,s){return Sd(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function zo(n,e,t){return n.options.clip?n[t]:e[t]}function pk(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:zo(t,e,"left"),right:zo(t,e,"right"),top:zo(i,e,"top"),bottom:zo(i,e,"bottom")}:e}function mg(n,e){const t=e._clip;if(t.disabled)return!1;const i=pk(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class gk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,a){const s=t.listeners[a],o=t.duration;s.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ng.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,l=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(a.draw(),this._notify(a,i,e,"progress")),s.length||(i.running=!1,this._notify(a,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var pr=new gk;const wh="transparent",bk={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=ch(n||wh),a=i.valid&&ch(e||wh);return a&&a.valid?a.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class yk{constructor(e,t,i,a){const s=t[i];a=Ro([e.to,a,s,e.from]);const o=Ro([e.from,s,a]);this._active=!0,this._fn=e.fn||bk[e.type||typeof o],this._easing=zs[e.easing]||zs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const a=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Ro([e.to,t,a,e.from]),this._from=Ro([e.from,a,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,a=this._prop,s=this._from,o=this._loop,l=this._to;let c;if(this._active=s!==l&&(o||t<i),!this._active){this._target[a]=l,this._notify(!0);return}if(t<0){this._target[a]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[a]=this._fn(s,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][t]()}}class pg{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!jt(e))return;const t=Object.keys(yn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const s=e[a];if(!jt(s))return;const o={};for(const l of t)o[l]=s[l];(Sn(s.properties)&&s.properties||[a]).forEach(l=>{(l===a||!i.has(l))&&i.set(l,o)})})}_animateOptions(e,t){const i=t.options,a=xk(e,i);if(!a)return[];const s=this._createAnimations(a,i);return i.$shared&&_k(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,a=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){a.push(...this._animateOptions(e,t));continue}const d=t[u];let f=s[u];const h=i.get(u);if(f)if(h&&f.active()){f.update(h,d,l);continue}else f.cancel();if(!h||!h.duration){e[u]=d;continue}s[u]=f=new yk(h,e,u,d),a.push(f)}return a}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return pr.add(this._chart,i),!0}}function _k(n,e){const t=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const s=n[i[a]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function xk(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function kh(n,e){const t=n&&n.options||{},i=t.reverse,a=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:a,end:i?a:s}}function wk(n,e,t){if(t===!1)return!1;const i=kh(n,t),a=kh(e,t);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function kk(n){let e,t,i,a;return jt(n)?(e=n.top,t=n.right,i=n.bottom,a=n.left):e=t=i=a=n,{top:e,right:t,bottom:i,left:a,disabled:n===!1}}function gg(n,e){const t=[],i=n._getSortedDatasetMetas(e);let a,s;for(a=0,s=i.length;a<s;++a)t.push(i[a].index);return t}function Sh(n,e,t,i={}){const a=n.keys,s=i.mode==="single";let o,l,c,u;if(e===null)return;let d=!1;for(o=0,l=a.length;o<l;++o){if(c=+a[o],c===t){if(d=!0,i.all)continue;break}u=n.values[c],zn(u)&&(s||e===0||Jr(e)===Jr(u))&&(e+=u)}return!d&&!i.all?0:e}function Sk(n,e){const{iScale:t,vScale:i}=e,a=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[a]:d,[s]:n[d]};return l}function Pc(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Tk(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function $k(n){const{min:e,max:t,minDefined:i,maxDefined:a}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:a?t:Number.POSITIVE_INFINITY}}function Ik(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function Th(n,e,t,i){for(const a of e.getMatchingVisibleMetas(i).reverse()){const s=n[a.index];if(t&&s>0||!t&&s<0)return a.index}return null}function $h(n,e){const{chart:t,_cachedMeta:i}=n,a=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:l}=i,c=s.axis,u=o.axis,d=Tk(s,o,i),f=e.length;let h;for(let b=0;b<f;++b){const v=e[b],{[c]:g,[u]:m}=v,k=v._stacks||(v._stacks={});h=k[u]=Ik(a,d,g),h[l]=m,h._top=Th(h,o,!0,i.type),h._bottom=Th(h,o,!1,i.type);const x=h._visualValues||(h._visualValues={});x[l]=m}}function Mc(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function Ck(n,e){return Da(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Ek(n,e,t){return Da(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ss(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const a of e){const s=a._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const Ac=n=>n==="reset"||n==="none",Ih=(n,e)=>e?n:Object.assign({},n),Ok=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:gg(t,!0),values:null};class bg{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Pc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ss(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),a=(f,h,b,v)=>f==="x"?h:f==="r"?v:b,s=t.xAxisID=Yt(i.xAxisID,Mc(e,"x")),o=t.yAxisID=Yt(i.yAxisID,Mc(e,"y")),l=t.rAxisID=Yt(i.rAxisID,Mc(e,"r")),c=t.indexAxis,u=t.iAxisID=a(c,s,o,l),d=t.vAxisID=a(c,o,s,l);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ah(this._data,this),e._stacked&&Ss(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(jt(t)){const a=this._cachedMeta;this._data=Sk(t,a)}else if(i!==t){if(i){ah(i,this);const a=this._cachedMeta;Ss(a),a._parsed=[]}t&&Object.isExtensible(t)&&ow(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const s=t._stacked;t._stacked=Pc(t.vScale,t),t.stack!==i.stack&&(a=!0,Ss(t),t.stack=i.stack),this._resyncElements(e),(a||s!==t._stacked)&&($h(this,t._parsed),t._stacked=Pc(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:a}=this,{iScale:s,_stacked:o}=i,l=s.axis;let c=e===0&&t===a.length?!0:i._sorted,u=e>0&&i._parsed[e-1],d,f,h;if(this._parsing===!1)i._parsed=a,i._sorted=!0,h=a;else{Sn(a[e])?h=this.parseArrayData(i,a,e,t):jt(a[e])?h=this.parseObjectData(i,a,e,t):h=this.parsePrimitiveData(i,a,e,t);const b=()=>f[l]===null||u&&f[l]<u[l];for(d=0;d<t;++d)i._parsed[d+e]=f=h[d],c&&(b()&&(c=!1),u=f);i._sorted=c}o&&$h(this,h)}parsePrimitiveData(e,t,i,a){const{iScale:s,vScale:o}=e,l=s.axis,c=o.axis,u=s.getLabels(),d=s===o,f=new Array(a);let h,b,v;for(h=0,b=a;h<b;++h)v=h+i,f[h]={[l]:d||s.parse(u[v],v),[c]:o.parse(t[v],v)};return f}parseArrayData(e,t,i,a){const{xScale:s,yScale:o}=e,l=new Array(a);let c,u,d,f;for(c=0,u=a;c<u;++c)d=c+i,f=t[d],l[c]={x:s.parse(f[0],d),y:o.parse(f[1],d)};return l}parseObjectData(e,t,i,a){const{xScale:s,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(a);let d,f,h,b;for(d=0,f=a;d<f;++d)h=d+i,b=t[h],u[d]={x:s.parse(xl(b,l),h),y:o.parse(xl(b,c),h)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const a=this.chart,s=this._cachedMeta,o=t[e.axis],l={keys:gg(a,!0),values:t._stacks[e.axis]._visualValues};return Sh(l,o,s.index,{mode:i})}updateRangeFromParsed(e,t,i,a){const s=i[t.axis];let o=s===null?NaN:s;const l=a&&i._stacks[t.axis];a&&l&&(a.values=l,o=Sh(a,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,a=i._parsed,s=i._sorted&&e===i.iScale,o=a.length,l=this._getOtherScale(e),c=Ok(t,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=$k(l);let h,b;function v(){b=a[h];const g=b[l.axis];return!zn(b[e.axis])||d>g||f<g}for(h=0;h<o&&!(!v()&&(this.updateRangeFromParsed(u,e,b,c),s));++h);if(s){for(h=o-1;h>=0;--h)if(!v()){this.updateRangeFromParsed(u,e,b,c);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let a,s,o;for(a=0,s=t.length;a<s;++a)o=t[a][e.axis],zn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,a=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:a?""+a.getLabelForValue(s[a.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=kk(Yt(this.options.clip,wk(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,a=i.data||[],s=t.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||a.length-l,u=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(e,s,l,c),d=l;d<l+c;++d){const f=a[d];f.hidden||(f.active&&u?o.push(f):f.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const a=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Ek(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=a.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Ck(this.chart.getContext(),this.index)),s.dataset=a,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const a=t==="active",s=this._cachedDataOpts,o=e+"-"+t,l=s[o],c=this.enableOptionSharing&&wl(i);if(l)return Ih(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=a?[`${e}Hover`,"hover",e,""]:[e,""],h=u.getOptionScopes(this.getDataset(),d),b=Object.keys(yn.elements[e]),v=()=>this.getContext(i,a,t),g=u.resolveNamedOptions(h,b,v,f);return g.$shared&&(g.$shared=c,s[o]=Object.freeze(Ih(g,c))),g}_resolveAnimations(e,t,i){const a=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,l=s[o];if(l)return l;let c;if(a.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,t),h=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(h,this.getContext(e,i,t))}const u=new pg(a,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ac(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),a=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(t,s)||s!==a;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:o}}updateElement(e,t,i,a){Ac(a)?Object.assign(e,i):this._resolveAnimations(t,a).update(e,i)}updateSharedOptions(e,t,i){e&&!Ac(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,a){e.active=a;const s=this.getStyle(t,a);this._resolveAnimations(t,i,a).update(e,{options:!a&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const a=i.length,s=t.length,o=Math.min(s,a);o&&this.parse(0,o),s>a?this._insertElements(a,s-a,e):s<a&&this._removeElements(s,a-s)}_insertElements(e,t,i=!0){const a=this._cachedMeta,s=a.data,o=e+t;let l;const c=u=>{for(u.length+=t,l=u.length-1;l>=o;l--)u[l]=u[l-t]};for(c(s),l=e;l<o;++l)s[l]=new this.dataElementType;this._parsing&&c(a._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,a){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(e,t);i._stacked&&Ss(i,a)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,a]=e;this[t](i,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Dk extends bg{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:a=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:l,count:c}=dw(t,a,o);this._drawStart=l,this._drawCount=c,fw(t)&&(l=0,c=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=a;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(a,l,c,e)}updateElements(e,t,i,a){const s=a==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(t,a),h=o.axis,b=l.axis,{spanGaps:v,segment:g}=this.options,m=eo(v)?v:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||s||a==="none",x=t+i,C=e.length;let O=t>0&&this.getParsed(t-1);for(let $=0;$<C;++$){const E=e[$],w=k?E:{};if($<t||$>=x){w.skip=!0;continue}const I=this.getParsed($),D=en(I[b]),A=w[h]=o.getPixelForValue(I[h],$),L=w[b]=s||D?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,I,c):I[b],$);w.skip=isNaN(A)||isNaN(L)||D,w.stop=$>0&&Math.abs(I[h]-O[h])>m,g&&(w.parsed=I,w.raw=u.data[$]),f&&(w.options=d||this.resolveDataElementOptions($,E.active?"active":a)),k||this.updateElement(E,$,w,a),O=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,a=e.data||[];if(!a.length)return i;const s=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function la(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Pd{static override(e){Object.assign(Pd.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return la()}parse(){return la()}format(){return la()}add(){return la()}diff(){return la()}startOf(){return la()}endOf(){return la()}}var yg={_date:Pd};function Pk(n,e,t,i){const{controller:a,data:s,_sorted:o}=n,l=a._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&s.length){const u=l._reversePixels?aw:ma;if(i){if(a._sharedOptions){const d=s[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const h=u(s,e,t-f),b=u(s,e,t+f);return{lo:h.lo,hi:b.hi}}}}else{const d=u(s,e,t);if(c){const{vScale:f}=a._cachedMeta,{_parsed:h}=n,b=h.slice(0,d.lo+1).reverse().findIndex(g=>!en(g[f.axis]));d.lo-=Math.max(0,b);const v=h.slice(d.hi).findIndex(g=>!en(g[f.axis]));d.hi+=Math.max(0,v)}return d}}return{lo:0,hi:s.length-1}}function Xl(n,e,t,i,a){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,c=s.length;l<c;++l){const{index:u,data:d}=s[l],{lo:f,hi:h}=Pk(s[l],e,o,a);for(let b=f;b<=h;++b){const v=d[b];v.skip||i(v,u,b)}}}function Mk(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,a){const s=e?Math.abs(i.x-a.x):0,o=t?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Lc(n,e,t,i,a){const s=[];return!a&&!n.isPointInArea(e)||Xl(n,t,e,function(l,c,u){!a&&!ss(l,n.chartArea,0)||l.inRange(e.x,e.y,i)&&s.push({element:l,datasetIndex:c,index:u})},!0),s}function Ak(n,e,t,i){let a=[];function s(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:f}=nw(o,{x:e.x,y:e.y});Qp(f,u,d)&&a.push({element:o,datasetIndex:l,index:c})}return Xl(n,t,e,s),a}function Lk(n,e,t,i,a,s){let o=[];const l=Mk(t);let c=Number.POSITIVE_INFINITY;function u(d,f,h){const b=d.inRange(e.x,e.y,a);if(i&&!b)return;const v=d.getCenterPoint(a);if(!(!!s||n.isPointInArea(v))&&!b)return;const m=l(e,v);m<c?(o=[{element:d,datasetIndex:f,index:h}],c=m):m===c&&o.push({element:d,datasetIndex:f,index:h})}return Xl(n,t,e,u),o}function Nc(n,e,t,i,a,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?Ak(n,e,t,a):Lk(n,e,t,i,a,s)}function Ch(n,e,t,i,a){const s=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return Xl(n,t,e,(c,u,d)=>{c[o]&&c[o](e[t],a)&&(s.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(e.x,e.y,a))}),i&&!l?[]:s}var Nk={modes:{index(n,e,t,i){const a=nr(e,n),s=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?Lc(n,a,s,i,o):Nc(n,a,s,!1,i,o),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(n,e,t,i){const a=nr(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?Lc(n,a,s,i,o):Nc(n,a,s,!1,i,o);if(l.length>0){const c=l[0].datasetIndex,u=n.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(n,e,t,i){const a=nr(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Lc(n,a,s,i,o)},nearest(n,e,t,i){const a=nr(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Nc(n,a,s,t.intersect,i,o)},x(n,e,t,i){const a=nr(e,n);return Ch(n,a,"x",t.intersect,i)},y(n,e,t,i){const a=nr(e,n);return Ch(n,a,"y",t.intersect,i)}}};const _g=["left","top","right","bottom"];function Ts(n,e){return n.filter(t=>t.pos===e)}function Eh(n,e){return n.filter(t=>_g.indexOf(t.pos)===-1&&t.box.axis===e)}function $s(n,e){return n.sort((t,i)=>{const a=e?i:t,s=e?t:i;return a.weight===s.weight?a.index-s.index:a.weight-s.weight})}function Rk(n){const e=[];let t,i,a,s,o,l;for(t=0,i=(n||[]).length;t<i;++t)a=n[t],{position:s,options:{stack:o,stackWeight:l=1}}=a,e.push({index:t,box:a,pos:s,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&s+o,stackWeight:l});return e}function Fk(n){const e={};for(const t of n){const{stack:i,pos:a,stackWeight:s}=t;if(!i||!_g.includes(a))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function qk(n,e){const t=Fk(n),{vBoxMaxWidth:i,hBoxMaxHeight:a}=e;let s,o,l;for(s=0,o=n.length;s<o;++s){l=n[s];const{fullSize:c}=l.box,u=t[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*i:c&&e.availableWidth,l.height=a):(l.width=i,l.height=d?d*a:c&&e.availableHeight)}return t}function zk(n){const e=Rk(n),t=$s(e.filter(u=>u.box.fullSize),!0),i=$s(Ts(e,"left"),!0),a=$s(Ts(e,"right")),s=$s(Ts(e,"top"),!0),o=$s(Ts(e,"bottom")),l=Eh(e,"x"),c=Eh(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:a.concat(c).concat(o).concat(l),chartArea:Ts(e,"chartArea"),vertical:i.concat(a).concat(c),horizontal:s.concat(o).concat(l)}}function Oh(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function xg(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function jk(n,e,t,i){const{pos:a,box:s}=t,o=n.maxPadding;if(!jt(a)){t.size&&(n[a]-=t.size);const f=i[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?s.height:s.width),t.size=f.size/f.count,n[a]+=t.size}s.getPadding&&xg(o,s.getPadding());const l=Math.max(0,e.outerWidth-Oh(o,n,"left","right")),c=Math.max(0,e.outerHeight-Oh(o,n,"top","bottom")),u=l!==n.w,d=c!==n.h;return n.w=l,n.h=c,t.horizontal?{same:u,other:d}:{same:d,other:u}}function Vk(n){const e=n.maxPadding;function t(i){const a=Math.max(e[i]-n[i],0);return n[i]+=a,a}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Uk(n,e){const t=e.maxPadding;function i(a){const s={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function As(n,e,t,i){const a=[];let s,o,l,c,u,d;for(s=0,o=n.length,u=0;s<o;++s){l=n[s],c=l.box,c.update(l.width||e.w,l.height||e.h,Uk(l.horizontal,e));const{same:f,other:h}=jk(e,t,l,i);u|=f&&a.length,d=d||h,c.fullSize||a.push(l)}return u&&As(a,e,t,i)||d}function jo(n,e,t,i,a){n.top=t,n.left=e,n.right=e+i,n.bottom=t+a,n.width=i,n.height=a}function Dh(n,e,t,i){const a=t.padding;let{x:s,y:o}=e;for(const l of n){const c=l.box,u=i[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const f=e.w*d,h=u.size||c.height;wl(u.start)&&(o=u.start),c.fullSize?jo(c,a.left,o,t.outerWidth-a.right-a.left,h):jo(c,e.left+u.placed,o,f,h),u.start=o,u.placed+=f,o=c.bottom}else{const f=e.h*d,h=u.size||c.width;wl(u.start)&&(s=u.start),c.fullSize?jo(c,s,a.top,h,t.outerHeight-a.bottom-a.top):jo(c,s,e.top+u.placed,h,f),u.start=s,u.placed+=f,s=c.right}}e.x=s,e.y=o}var Vo={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const a=Gr(n.options.layout.padding),s=Math.max(e-a.width,0),o=Math.max(t-a.height,0),l=zk(n.boxes),c=l.vertical,u=l.horizontal;qt(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=c.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:a,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},a);xg(h,Gr(i));const b=Object.assign({maxPadding:h,w:s,h:o,x:a.left,y:a.top},a),v=qk(c.concat(u),f);As(l.fullSize,b,f,v),As(c,b,f,v),As(u,b,f,v)&&As(c,b,f,v),Vk(b),Dh(l.leftAndTop,b,f,v),b.x+=b.w,b.y+=b.h,Dh(l.rightAndBottom,b,f,v),n.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},qt(l.chartArea,g=>{const m=g.box;Object.assign(m,n.chartArea),m.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class wg{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,a){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,a?Math.floor(t/a):i)}}isAttached(e){return!0}updateConfig(e){}}class Bk extends wg{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const sl="$chartjs",Hk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ph=n=>n===null||n==="";function Wk(n,e){const t=n.style,i=n.getAttribute("height"),a=n.getAttribute("width");if(n[sl]={initial:{height:i,width:a,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Ph(a)){const s=bh(n,"width");s!==void 0&&(n.width=s)}if(Ph(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=bh(n,"height");s!==void 0&&(n.height=s)}return n}const kg=ik?{passive:!0}:!1;function Yk(n,e,t){n&&n.addEventListener(e,t,kg)}function Kk(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,kg)}function Zk(n,e){const t=Hk[n.type]||n.type,{x:i,y:a}=nr(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:a!==void 0?a:null}}function Tl(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function Jk(n,e,t){const i=n.canvas,a=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Tl(l.addedNodes,i),o=o&&!Tl(l.removedNodes,i);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}function Gk(n,e,t){const i=n.canvas,a=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Tl(l.removedNodes,i),o=o&&!Tl(l.addedNodes,i);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}const to=new Map;let Mh=0;function Sg(){const n=window.devicePixelRatio;n!==Mh&&(Mh=n,to.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Xk(n,e){to.size||window.addEventListener("resize",Sg),to.set(n,e)}function Qk(n){to.delete(n),to.size||window.removeEventListener("resize",Sg)}function e2(n,e,t){const i=n.canvas,a=i&&Dd(i);if(!a)return;const s=ig((l,c)=>{const u=a.clientWidth;t(l,c),u<a.clientWidth&&t()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||s(u,d)});return o.observe(a),Xk(n,s),o}function Rc(n,e,t){t&&t.disconnect(),e==="resize"&&Qk(n)}function t2(n,e,t){const i=n.canvas,a=ig(s=>{n.ctx!==null&&t(Zk(s,n))},n);return Yk(i,e,a),a}class n2 extends wg{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Wk(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[sl])return!1;const i=t[sl].initial;["height","width"].forEach(s=>{const o=i[s];en(o)?t.removeAttribute(s):t.setAttribute(s,o)});const a=i.style||{};return Object.keys(a).forEach(s=>{t.style[s]=a[s]}),t.width=t.width,delete t[sl],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const a=e.$proxies||(e.$proxies={}),o={attach:Jk,detach:Gk,resize:e2}[t]||t2;a[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),a=i[t];if(!a)return;({attach:Rc,detach:Rc,resize:Rc}[t]||Kk)(e,t,a),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,a){return nk(e,t,i,a)}isAttached(e){const t=e&&Dd(e);return!!(t&&t.isConnected)}}function i2(n){return!Od()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Bk:n2}let yo=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return eo(this.x)&&eo(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const a={};return e.forEach(s=>{a[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),a}};function r2(n,e){const t=n.options.ticks,i=a2(n),a=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?o2(e):[],o=s.length,l=s[0],c=s[o-1],u=[];if(o>a)return l2(e,u,s,o/a),u;const d=s2(s,e,a);if(o>0){let f,h;const b=o>1?Math.round((c-l)/(o-1)):null;for(Uo(e,u,d,en(b)?0:l-b,l),f=0,h=o-1;f<h;f++)Uo(e,u,d,s[f],s[f+1]);return Uo(e,u,d,c,en(b)?e.length:c+b),u}return Uo(e,u,d),u}function a2(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),a=n._maxLength/t;return Math.floor(Math.min(i,a))}function s2(n,e,t){const i=c2(n),a=e.length/t;if(!i)return Math.max(a,1);const s=G0(i);for(let o=0,l=s.length-1;o<l;o++){const c=s[o];if(c>a)return c}return Math.max(a,1)}function o2(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function l2(n,e,t,i){let a=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),a++,s=t[a*i])}function Uo(n,e,t,i,a){const s=Yt(i,0),o=Math.min(Yt(a,n.length),n.length);let l=0,c,u,d;for(t=Math.ceil(t),a&&(c=a-i,t=c/Math.floor(c/t)),d=s;d<0;)l++,d=Math.round(s+l*t);for(u=Math.max(s,0);u<o;u++)u===d&&(e.push(n[u]),l++,d=Math.round(s+l*t))}function c2(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const u2=n=>n==="left"?"right":n==="right"?"left":n,Ah=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Lh=(n,e)=>Math.min(e||n,n);function Nh(n,e){const t=[],i=n.length/e,a=n.length;let s=0;for(;s<a;s+=i)t.push(n[Math.floor(s)]);return t}function d2(n,e,t){const i=n.ticks.length,a=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,l=1e-6;let c=n.getPixelForTick(a),u;if(!(t&&(i===1?u=Math.max(c-s,o-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(a-1))/2,c+=a<e?u:-u,c<s-l||c>o+l)))return c}function f2(n,e){qt(n,t=>{const i=t.gc,a=i.length/2;let s;if(a>e){for(s=0;s<a;++s)delete t.data[i[s]];i.splice(0,a)}})}function Is(n){return n.drawTicks?n.tickLength:0}function Rh(n,e){if(!n.display)return 0;const t=ar(n.font,e),i=Gr(n.padding);return(Sn(n.text)?n.text.length:1)*t.lineHeight+i.height}function h2(n,e){return Da(n,{scale:e,type:"scale"})}function v2(n,e,t){return Da(n,{tick:t,index:e,type:"tick"})}function m2(n,e,t){let i=uw(n);return(t&&e!=="right"||!t&&e==="right")&&(i=u2(i)),i}function p2(n,e,t,i){const{top:a,left:s,bottom:o,right:l,chart:c}=n,{chartArea:u,scales:d}=c;let f=0,h,b,v;const g=o-a,m=l-s;if(n.isHorizontal()){if(b=sh(i,s,l),jt(t)){const k=Object.keys(t)[0],x=t[k];v=d[k].getPixelForValue(x)+g-e}else t==="center"?v=(u.bottom+u.top)/2+g-e:v=Ah(n,t,e);h=l-s}else{if(jt(t)){const k=Object.keys(t)[0],x=t[k];b=d[k].getPixelForValue(x)-m+e}else t==="center"?b=(u.left+u.right)/2-m+e:b=Ah(n,t,e);v=sh(i,o,a),f=t==="left"?-zi:zi}return{titleX:b,titleY:v,maxWidth:h,rotation:f}}class _o extends yo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:a}=this;return e=Ji(e,Number.POSITIVE_INFINITY),t=Ji(t,Number.NEGATIVE_INFINITY),i=Ji(i,Number.POSITIVE_INFINITY),a=Ji(a,Number.NEGATIVE_INFINITY),{min:Ji(e,i),max:Ji(t,a),minDefined:zn(e),maxDefined:zn(t)}}getMinMax(e){let{min:t,max:i,minDefined:a,maxDefined:s}=this.getUserBounds(),o;if(a&&s)return{min:t,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),a||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=a&&t>i?t:i,{min:Ji(t,Ji(i,t)),max:Ji(i,Ji(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Mt(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:a,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Aw(this,s,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Nh(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=r2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Mt(this.options.afterUpdate,[this])}beforeSetDimensions(){Mt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Mt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Mt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Mt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,a,s;for(i=0,a=e.length;i<a;i++)s=e[i],s.label=Mt(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Mt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Mt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Lh(this.ticks.length,e.ticks.maxTicksLimit),a=t.minRotation||0,s=t.maxRotation;let o=a,l,c,u;if(!this._isVisible()||!t.display||a>=s||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const d=this._getLabelSizes(),f=d.widest.width,h=d.highest.height,b=ji(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/i:b/(i-1),f+6>l&&(l=b/(i-(e.offset?.5:1)),c=this.maxHeight-Is(e.grid)-t.padding-Rh(e.title,this.chart.options.font),u=Math.sqrt(f*f+h*h),o=tw(Math.min(Math.asin(ji((d.highest.height+6)/l,-1,1)),Math.asin(ji(c/u,-1,1))-Math.asin(ji(h/u,-1,1)))),o=Math.max(a,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Mt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Mt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:a,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=Rh(a,t.options.font);if(l?(e.width=this.maxWidth,e.height=Is(s)+c):(e.height=this.maxHeight,e.width=Is(s)+c),i.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:h}=this._getLabelSizes(),b=i.padding*2,v=va(this.labelRotation),g=Math.cos(v),m=Math.sin(v);if(l){const k=i.mirror?0:m*f.width+g*h.height;e.height=Math.min(this.maxHeight,e.height+k+b)}else{const k=i.mirror?0:g*f.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+k+b)}this._calculatePadding(u,d,m,g)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,a){const{ticks:{align:s,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,b=0;c?u?(h=a*e.width,b=i*t.height):(h=i*e.height,b=a*t.width):s==="start"?b=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,b=t.width/2),this.paddingLeft=Math.max((h-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((b-f+o)*this.width/(this.width-f),0)}else{let d=t.height/2,f=e.height/2;s==="start"?(d=0,f=e.height):s==="end"&&(d=t.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Mt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)en(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Nh(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:a,_longestTextCache:s}=this,o=[],l=[],c=Math.floor(t/Lh(t,i));let u=0,d=0,f,h,b,v,g,m,k,x,C,O,$;for(f=0;f<t;f+=c){if(v=e[f].label,g=this._resolveTickFontOptions(f),a.font=m=g.string,k=s[m]=s[m]||{data:{},gc:[]},x=g.lineHeight,C=O=0,!en(v)&&!Sn(v))C=dh(a,k.data,k.gc,C,v),O=x;else if(Sn(v))for(h=0,b=v.length;h<b;++h)$=v[h],!en($)&&!Sn($)&&(C=dh(a,k.data,k.gc,C,$),O+=x);o.push(C),l.push(O),u=Math.max(C,u),d=Math.max(O,d)}f2(s,t);const E=o.indexOf(u),w=l.indexOf(d),I=D=>({width:o[D]||0,height:l[D]||0});return{first:I(0),last:I(t-1),widest:I(E),highest:I(w),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return rw(this._alignToPixels?oa(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=v2(this.getContext(),e,i))}return this.$context||(this.$context=h2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=va(this.labelRotation),i=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,l=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>l*a?l/i:c/a:c*a<l*i?c/i:l/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,a=this.options,{grid:s,position:o,border:l}=a,c=s.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),h=Is(s),b=[],v=l.setContext(this.getContext()),g=v.display?v.width:0,m=g/2,k=function(U){return oa(i,U,g)};let x,C,O,$,E,w,I,D,A,L,N,H;if(o==="top")x=k(this.bottom),w=this.bottom-h,D=x-m,L=k(e.top)+m,H=e.bottom;else if(o==="bottom")x=k(this.top),L=e.top,H=k(e.bottom)-m,w=x+m,D=this.top+h;else if(o==="left")x=k(this.right),E=this.right-h,I=x-m,A=k(e.left)+m,N=e.right;else if(o==="right")x=k(this.left),A=e.left,N=k(e.right)-m,E=x+m,I=this.left+h;else if(t==="x"){if(o==="center")x=k((e.top+e.bottom)/2+.5);else if(jt(o)){const U=Object.keys(o)[0],B=o[U];x=k(this.chart.scales[U].getPixelForValue(B))}L=e.top,H=e.bottom,w=x+m,D=w+h}else if(t==="y"){if(o==="center")x=k((e.left+e.right)/2);else if(jt(o)){const U=Object.keys(o)[0],B=o[U];x=k(this.chart.scales[U].getPixelForValue(B))}E=x-m,I=E-h,A=e.left,N=e.right}const j=Yt(a.ticks.maxTicksLimit,f),V=Math.max(1,Math.ceil(f/j));for(C=0;C<f;C+=V){const U=this.getContext(C),B=s.setContext(U),J=l.setContext(U),Q=B.lineWidth,oe=B.color,de=J.dash||[],ge=J.dashOffset,pe=B.tickWidth,xe=B.tickColor,ve=B.tickBorderDash||[],Ee=B.tickBorderDashOffset;O=d2(this,C,c),O!==void 0&&($=oa(i,O,Q),u?E=I=A=N=$:w=D=L=H=$,b.push({tx1:E,ty1:w,tx2:I,ty2:D,x1:A,y1:L,x2:N,y2:H,width:Q,color:oe,borderDash:de,borderDashOffset:ge,tickWidth:pe,tickColor:xe,tickBorderDash:ve,tickBorderDashOffset:Ee}))}return this._ticksLength=f,this._borderValue=x,b}_computeLabelItems(e){const t=this.axis,i=this.options,{position:a,ticks:s}=i,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=s,h=Is(i.grid),b=h+d,v=f?-d:b,g=-va(this.labelRotation),m=[];let k,x,C,O,$,E,w,I,D,A,L,N,H="middle";if(a==="top")E=this.bottom-v,w=this._getXAxisLabelAlignment();else if(a==="bottom")E=this.top+v,w=this._getXAxisLabelAlignment();else if(a==="left"){const V=this._getYAxisLabelAlignment(h);w=V.textAlign,$=V.x}else if(a==="right"){const V=this._getYAxisLabelAlignment(h);w=V.textAlign,$=V.x}else if(t==="x"){if(a==="center")E=(e.top+e.bottom)/2+b;else if(jt(a)){const V=Object.keys(a)[0],U=a[V];E=this.chart.scales[V].getPixelForValue(U)+b}w=this._getXAxisLabelAlignment()}else if(t==="y"){if(a==="center")$=(e.left+e.right)/2-b;else if(jt(a)){const V=Object.keys(a)[0],U=a[V];$=this.chart.scales[V].getPixelForValue(U)}w=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?H="top":c==="end"&&(H="bottom"));const j=this._getLabelSizes();for(k=0,x=l.length;k<x;++k){C=l[k],O=C.label;const V=s.setContext(this.getContext(k));I=this.getPixelForTick(k)+s.labelOffset,D=this._resolveTickFontOptions(k),A=D.lineHeight,L=Sn(O)?O.length:1;const U=L/2,B=V.color,J=V.textStrokeColor,Q=V.textStrokeWidth;let oe=w;o?($=I,w==="inner"&&(k===x-1?oe=this.options.reverse?"left":"right":k===0?oe=this.options.reverse?"right":"left":oe="center"),a==="top"?u==="near"||g!==0?N=-L*A+A/2:u==="center"?N=-j.highest.height/2-U*A+A:N=-j.highest.height+A/2:u==="near"||g!==0?N=A/2:u==="center"?N=j.highest.height/2-U*A:N=j.highest.height-L*A,f&&(N*=-1),g!==0&&!V.showLabelBackdrop&&($+=A/2*Math.sin(g))):(E=I,N=(1-L)*A/2);let de;if(V.showLabelBackdrop){const ge=Gr(V.backdropPadding),pe=j.heights[k],xe=j.widths[k];let ve=N-ge.top,Ee=0-ge.left;switch(H){case"middle":ve-=pe/2;break;case"bottom":ve-=pe;break}switch(w){case"center":Ee-=xe/2;break;case"right":Ee-=xe;break;case"inner":k===x-1?Ee-=xe:k>0&&(Ee-=xe/2);break}de={left:Ee,top:ve,width:xe+ge.width,height:pe+ge.height,color:V.backdropColor}}m.push({label:O,font:D,textOffset:N,options:{rotation:g,color:B,strokeColor:J,strokeWidth:Q,textAlign:oe,textBaseline:H,translation:[$,E],backdrop:de}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-va(this.labelRotation))return e==="top"?"left":"right";let a="center";return t.align==="start"?a="left":t.align==="end"?a="right":t.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:a,padding:s}}=this.options,o=this._getLabelSizes(),l=e+s,c=o.widest.width;let u,d;return t==="left"?a?(d=this.right+s,i==="near"?u="left":i==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,i==="near"?u="right":i==="center"?(u="center",d-=c/2):(u="left",d=this.left)):t==="right"?a?(d=this.left+s,i==="near"?u="right":i==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,i==="near"?u="left":i==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:a,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,a,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const a=this.ticks.findIndex(s=>s.value===e);return a>=0?t.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const l=(c,u,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=a.length;s<o;++s){const c=a[s];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:a}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const l=a.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,h;this.isHorizontal()?(u=oa(e,this.left,o)-o/2,d=oa(e,this.right,l)+l/2,f=h=c):(f=oa(e,this.top,o)-o/2,h=oa(e,this.bottom,l)+l/2,u=d=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,f),t.lineTo(d,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&Td(i,a);const s=this.getLabelItems(e);for(const o of s){const l=o.options,c=o.font,u=o.label,d=o.textOffset;hh(i,u,0,d,c,l)}a&&$d(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:a}}=this;if(!i.display)return;const s=ar(i.font),o=Gr(i.padding),l=i.align;let c=s.lineHeight/2;t==="bottom"||t==="center"||jt(t)?(c+=o.bottom,Sn(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:f,rotation:h}=p2(this,c,t,l);hh(e,i.text,0,0,s,{color:i.color,maxWidth:f,rotation:h,textAlign:m2(l,t,a),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Yt(e.grid&&e.grid.z,-1),a=Yt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==_o.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let s,o;for(s=0,o=t.length;s<o;++s){const l=t[s];l[i]===this.id&&(!e||l.type===e)&&a.push(l)}return a}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return ar(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bo{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;y2(t)&&(i=this.register(t));const a=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in a||(a[s]=e,g2(e,o,i),this.override&&yn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,a=this.scope;i in t&&delete t[i],a&&i in yn[a]&&(delete yn[a][i],this.override&&delete ka[i])}}function g2(n,e,t){const i=Qs(Object.create(null),[t?yn.get(t):{},yn.get(e),n.defaults]);yn.set(e,i),n.defaultRoutes&&b2(e,n.defaultRoutes),n.descriptors&&yn.describe(e,n.descriptors)}function b2(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),a=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),l=o.pop(),c=o.join(".");yn.route(s,a,c,l)})}function y2(n){return"id"in n&&"defaults"in n}class _2{constructor(){this.controllers=new Bo(bg,"datasets",!0),this.elements=new Bo(yo,"elements"),this.plugins=new Bo(Object,"plugins"),this.scales=new Bo(_o,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(a=>{const s=i||this._getRegistryForType(a);i||s.isForType(a)||s===this.plugins&&a.id?this._exec(e,s,a):qt(a,o=>{const l=i||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,i){const a=wd(e);Mt(i["before"+a],[],i),t[e](i),Mt(i["after"+a],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const a=t.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return a}}var Qi=new _2;class x2{constructor(){this._init=[]}notify(e,t,i,a){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,a){a=a||{};for(const s of e){const o=s.plugin,l=o[i],c=[t,a,s.options];if(Mt(l,c,o)===!1&&a.cancelable)return!1}return!0}invalidate(){en(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,a=Yt(i.options&&i.options.plugins,{}),s=w2(i);return a===!1&&!t?[]:S2(e,s,a,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,a=(s,o)=>s.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(a(t,i),e,"stop"),this._notify(a(i,t),e,"start")}}function w2(n){const e={},t=[],i=Object.keys(Qi.plugins.items);for(let s=0;s<i.length;s++)t.push(Qi.getPlugin(i[s]));const a=n.plugins||[];for(let s=0;s<a.length;s++){const o=a[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function k2(n,e){return!e&&n===!1?null:n===!0?{}:n}function S2(n,{plugins:e,localIds:t},i,a){const s=[],o=n.getContext();for(const l of e){const c=l.id,u=k2(i[c],a);u!==null&&s.push({plugin:l,options:T2(n.config,{plugin:l,local:t[c]},u,o)})}return s}function T2(n,{plugin:e,local:t},i,a){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cu(n,e){const t=yn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function $2(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function I2(n,e){return n===e?"_index_":"_value_"}function Fh(n){if(n==="x"||n==="y"||n==="r")return n}function C2(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Eu(n,...e){if(Fh(n))return n;for(const t of e){const i=t.axis||C2(t.position)||n.length>1&&Fh(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function qh(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function E2(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return qh(n,"x",t[0])||qh(n,"y",t[0])}return{}}function O2(n,e){const t=ka[n.type]||{scales:{}},i=e.scales||{},a=Cu(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const l=i[o];if(!jt(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Eu(o,l,E2(o,n),yn.scales[l.type]),u=I2(c,a),d=t.scales||{};s[o]=qs(Object.create(null),[{axis:c},l,d[c],d[u]])}),n.data.datasets.forEach(o=>{const l=o.type||n.type,c=o.indexAxis||Cu(l,e),d=(ka[l]||{}).scales||{};Object.keys(d).forEach(f=>{const h=$2(f,c),b=o[h+"AxisID"]||h;s[b]=s[b]||Object.create(null),qs(s[b],[{axis:h},i[b],d[f]])})}),Object.keys(s).forEach(o=>{const l=s[o];qs(l,[yn.scales[l.type],yn.scale])}),s}function Tg(n){const e=n.options||(n.options={});e.plugins=Yt(e.plugins,{}),e.scales=O2(n,e)}function $g(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function D2(n){return n=n||{},n.data=$g(n.data),Tg(n),n}const zh=new Map,Ig=new Set;function Ho(n,e){let t=zh.get(n);return t||(t=e(),zh.set(n,t),Ig.add(t)),t}const Cs=(n,e,t)=>{const i=xl(e,t);i!==void 0&&n.add(i)};class P2{constructor(e){this._config=D2(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$g(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Tg(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ho(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Ho(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Ho(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Ho(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let a=i.get(e);return(!a||t)&&(a=new Map,i.set(e,a)),a}getOptionScopes(e,t,i){const{options:a,type:s}=this,o=this._cachedScopes(e,i),l=o.get(t);if(l)return l;const c=new Set;t.forEach(d=>{e&&(c.add(e),d.forEach(f=>Cs(c,e,f))),d.forEach(f=>Cs(c,a,f)),d.forEach(f=>Cs(c,ka[s]||{},f)),d.forEach(f=>Cs(c,yn,f)),d.forEach(f=>Cs(c,$u,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),Ig.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,ka[t]||{},yn.datasets[t]||{},{type:t},yn,$u]}resolveNamedOptions(e,t,i,a=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=jh(this._resolverCache,e,a);let c=o;if(A2(o,t)){s.$shared=!1,i=Zr(i)?i():i;const u=this.createResolver(e,i,l);c=os(o,i,u)}for(const u of t)s[u]=c[u];return s}createResolver(e,t,i=[""],a){const{resolver:s}=jh(this._resolverCache,e,i);return jt(t)?os(s,t,void 0,a):s}}function jh(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const a=t.join();let s=i.get(a);return s||(s={resolver:Id(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},i.set(a,s)),s}const M2=n=>jt(n)&&Object.getOwnPropertyNames(n).some(e=>Zr(n[e]));function A2(n,e){const{isScriptable:t,isIndexable:i}=og(n);for(const a of e){const s=t(a),o=i(a),l=(o||s)&&n[a];if(s&&(Zr(l)||M2(l))||o&&Sn(l))return!0}return!1}var L2="4.5.0";const N2=["top","bottom","left","right","chartArea"];function Vh(n,e){return n==="top"||n==="bottom"||N2.indexOf(n)===-1&&e==="x"}function Uh(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function Bh(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Mt(t&&t.onComplete,[n],e)}function R2(n){const e=n.chart,t=e.options.animation;Mt(t&&t.onProgress,[n],e)}function Cg(n){return Od()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ol={},Hh=n=>{const e=Cg(n);return Object.values(ol).filter(t=>t.canvas===e).pop()};function F2(n,e,t){const i=Object.keys(n);for(const a of i){const s=+a;if(s>=e){const o=n[a];delete n[a],(t>0||s>e)&&(n[s+t]=o)}}}function q2(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}class ll{static defaults=yn;static instances=ol;static overrides=ka;static registry=Qi;static version=L2;static getChart=Hh;static register(...e){Qi.add(...e),Wh()}static unregister(...e){Qi.remove(...e),Wh()}constructor(e,t){const i=this.config=new P2(t),a=Cg(e),s=Hh(a);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||i2(a)),this.platform.updateConfig(i);const l=this.platform.acquireContext(a,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=V0(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new x2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cw(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],ol[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}pr.listen(this,"complete",Bh),pr.listen(this,"progress",R2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:a,_aspectRatio:s}=this;return en(e)?t&&s?s:a?i/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Qi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():gh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return fh(this.canvas,this.ctx),this}stop(){return pr.stop(this),this}resize(e,t){pr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,a=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,t,s),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,gh(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Mt(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};qt(t,(i,a)=>{i.id=a})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,a=Object.keys(i).reduce((o,l)=>(o[l]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const l=t[o],c=Eu(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),qt(s,o=>{const l=o.options,c=l.id,u=Eu(c,l),d=Yt(l.type,o.dtype);(l.position===void 0||Vh(l.position,u)!==Vh(o.dposition))&&(l.position=o.dposition),a[c]=!0;let f=null;if(c in i&&i[c].type===d)f=i[c];else{const h=Qi.getScale(d);f=new h({id:c,type:d,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(l,e)}),qt(a,(o,l)=>{o||delete i[l]}),qt(i,o=>{Vo.configure(this,o,o.options),Vo.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((a,s)=>a.index-s.index),i>t){for(let a=t;a<i;++a)this._destroyDatasetMeta(a);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Uh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,a)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=t.length;i<a;i++){const s=t[i];let o=this.getDatasetMeta(i);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=l,o.indexAxis=s.indexAxis||Cu(l,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=Qi.getController(l),{datasetElementType:u,dataElementType:d}=yn.datasets[l];Object.assign(c,{dataElementType:Qi.getElement(d),datasetElementType:u&&Qi.getElement(u)}),o.controller=new c(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){qt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),h=!a&&s.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),a||qt(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Uh("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){qt(this.scales,e=>{Vo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!th(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:s}of t){const o=i==="_removeElements"?-s:s;F2(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),a=i(0);for(let s=1;s<t;s++)if(!th(a,i(s)))return;return Array.from(a).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vo.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],qt(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,s)=>{a._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Zr(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),a={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(t),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pr.has(this)?this.attached&&!pr.running(this)&&pr.start(this):(this.draw(),Bh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let a,s;for(a=0,s=t.length;a<s;++a){const o=t[a];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},a=mg(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&Td(t,a),e.controller.draw(),a&&$d(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return ss(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,a){const s=Nk.modes[t];return typeof s=="function"?s(this,e,i,a):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let a=i.filter(s=>s&&s._dataset===t).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=Da(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const a=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,a);wl(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(l=>l.datasetIndex===e?a:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),pr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),fh(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ol[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},a=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};qt(this.options.events,s=>i(s,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(c,u)=>{t.addEventListener(this,c,u),e[c]=u},a=(c,u)=>{e[c]&&(t.removeEventListener(this,c,u),delete e[c])},s=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{a("attach",l),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,a("resize",s),this._stop(),this._resize(0,0),i("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){qt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},qt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const a=i?"set":"remove";let s,o,l,c;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+a+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!yl(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const a=this.options.hover,s=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=s(t,e),l=i?e:s(e,t);o.length&&this.updateHoverStyle(o,a.mode,!1),l.length&&a.mode&&this.updateHoverStyle(l,a.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:a=[],options:s}=this,o=t,l=this._getActiveElements(e,a,i,o),c=K0(e),u=q2(e,this._lastEvent,i,c);i&&(this._lastEvent=null,Mt(s.onHover,[e,l,this],this),c&&Mt(s.onClick,[e,l,this],this));const d=!yl(l,a);return(d||t)&&(this._active=l,this._updateHoverStyles(l,a,t)),this._lastEvent=u,d}_getActiveElements(e,t,i,a){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,a)}}function Wh(){return qt(ll.instances,n=>n._plugins.invalidate())}function Eg(n,e,t=e){n.lineCap=Yt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Yt(t.borderDash,e.borderDash)),n.lineDashOffset=Yt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Yt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Yt(t.borderWidth,e.borderWidth),n.strokeStyle=Yt(t.borderColor,e.borderColor)}function z2(n,e,t){n.lineTo(t.x,t.y)}function j2(n){return n.stepped?Sw:n.tension||n.cubicInterpolationMode==="monotone"?Tw:z2}function Og(n,e,t={}){const i=n.length,{start:a=0,end:s=i-1}=t,{start:o,end:l}=e,c=Math.max(a,o),u=Math.min(s,l),d=a<o&&s<o||a>l&&s>l;return{count:i,start:c,loop:e.loop,ilen:u<c&&!d?i+u-c:u-c}}function V2(n,e,t,i){const{points:a,options:s}=e,{count:o,start:l,loop:c,ilen:u}=Og(a,t,i),d=j2(s);let{move:f=!0,reverse:h}=i||{},b,v,g;for(b=0;b<=u;++b)v=a[(l+(h?u-b:b))%o],!v.skip&&(f?(n.moveTo(v.x,v.y),f=!1):d(n,g,v,h,s.stepped),g=v);return c&&(v=a[(l+(h?u:0))%o],d(n,g,v,h,s.stepped)),!!c}function U2(n,e,t,i){const a=e.points,{count:s,start:o,ilen:l}=Og(a,t,i),{move:c=!0,reverse:u}=i||{};let d=0,f=0,h,b,v,g,m,k;const x=O=>(o+(u?l-O:O))%s,C=()=>{g!==m&&(n.lineTo(d,m),n.lineTo(d,g),n.lineTo(d,k))};for(c&&(b=a[x(0)],n.moveTo(b.x,b.y)),h=0;h<=l;++h){if(b=a[x(h)],b.skip)continue;const O=b.x,$=b.y,E=O|0;E===v?($<g?g=$:$>m&&(m=$),d=(f*d+O)/++f):(C(),n.lineTo(O,$),v=E,f=0,g=m=$),k=$}C()}function Ou(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?U2:V2}function B2(n){return n.stepped?rk:n.tension||n.cubicInterpolationMode==="monotone"?ak:ca}function H2(n,e,t,i){let a=e._path;a||(a=e._path=new Path2D,e.path(a,t,i)&&a.closePath()),Eg(n,e.options),n.stroke(a)}function W2(n,e,t,i){const{segments:a,options:s}=e,o=Ou(e);for(const l of a)Eg(n,s,l.style),n.beginPath(),o(n,e,l,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const Y2=typeof Path2D=="function";function K2(n,e,t,i){Y2&&!e.options.segment?H2(n,e,t,i):W2(n,e,t,i)}class Ql extends yo{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const a=i.spanGaps?this._loop:this._fullLoop;Jw(this._points,i,e,a,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hk(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,a=e[t],s=this.points,o=vg(this,{property:t,start:a,end:a});if(!o.length)return;const l=[],c=B2(i);let u,d;for(u=0,d=o.length;u<d;++u){const{start:f,end:h}=o[u],b=s[f],v=s[h];if(b===v){l.push(b);continue}const g=Math.abs((a-b[t])/(v[t]-b[t])),m=c(b,v,g,i.stepped);m[t]=e[t],l.push(m)}return l.length===1?l[0]:l}pathSegment(e,t,i){return Ou(this)(e,this,t,i)}path(e,t,i){const a=this.segments,s=Ou(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const l of a)o&=s(e,this,l,{start:t,end:t+i-1});return!!o}draw(e,t,i,a){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),K2(e,this,i,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Yh(n,e,t,i){const a=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<a.radius+a.hitRadius}class Z2 extends yo{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const a=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(e-s,2)+Math.pow(t-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,t){return Yh(this,e,"x",t)}inYRange(e,t){return Yh(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!ss(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Iu(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function J2(n,e,t){const i=n.segments,a=n.points,s=e.points,o=[];for(const l of i){let{start:c,end:u}=l;u=ec(c,u,a);const d=Du(t,a[c],a[u],l.loop);if(!e.segments){o.push({source:l,target:d,start:a[c],end:a[u]});continue}const f=vg(e,d);for(const h of f){const b=Du(t,s[h.start],s[h.end],h.loop),v=hg(l,a,b);for(const g of v)o.push({source:g,target:h,start:{[t]:Kh(d,b,"start",Math.max)},end:{[t]:Kh(d,b,"end",Math.min)}})}}return o}function Du(n,e,t,i){if(i)return;let a=e[n],s=t[n];return n==="angle"&&(a=tr(a),s=tr(s)),{property:n,start:a,end:s}}function G2(n,e){const{x:t=null,y:i=null}=n||{},a=e.points,s=[];return e.segments.forEach(({start:o,end:l})=>{l=ec(o,l,a);const c=a[o],u=a[l];i!==null?(s.push({x:c.x,y:i}),s.push({x:u.x,y:i})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:u.y}))}),s}function ec(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Kh(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function Dg(n,e){let t=[],i=!1;return Sn(n)?(i=!0,t=n):t=G2(n,e),t.length?new Ql({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function Zh(n){return n&&n.fill!==!1}function X2(n,e,t){let a=n[e].fill;const s=[e];let o;if(!t)return a;for(;a!==!1&&s.indexOf(a)===-1;){if(!zn(a))return a;if(o=n[a],!o)return!1;if(o.visible)return a;s.push(a),a=o.fill}return!1}function Q2(n,e,t){const i=iS(n);if(jt(i))return isNaN(i.value)?!1:i;let a=parseFloat(i);return zn(a)&&Math.floor(a)===a?eS(i[0],e,a,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function eS(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function tS(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:jt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function nS(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:jt(n)?i=n.value:i=e.getBaseValue(),i}function iS(n){const e=n.options,t=e.fill;let i=Yt(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function rS(n){const{scale:e,index:t,line:i}=n,a=[],s=i.segments,o=i.points,l=aS(e,t);l.push(Dg({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){const u=s[c];for(let d=u.start;d<=u.end;d++)sS(a,o[d],l)}return new Ql({points:a,options:{}})}function aS(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let a=0;a<i.length;a++){const s=i[a];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function sS(n,e,t){const i=[];for(let a=0;a<t.length;a++){const s=t[a],{first:o,last:l,point:c}=oS(s,e,"x");if(!(!c||o&&l)){if(o)i.unshift(c);else if(n.push(c),!l)break}}n.push(...i)}function oS(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const a=i[t],s=n.segments,o=n.points;let l=!1,c=!1;for(let u=0;u<s.length;u++){const d=s[u],f=o[d.start][t],h=o[d.end][t];if(eg(a,f,h)){l=a===f,c=a===h;break}}return{first:l,last:c,point:i}}class Pg{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:a,y:s,radius:o}=this;return t=t||{start:0,end:lr},e.arc(a,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:a}=this,s=e.angle;return{x:t+Math.cos(s)*a,y:i+Math.sin(s)*a,angle:s}}}function lS(n){const{chart:e,fill:t,line:i}=n;if(zn(t))return cS(e,t);if(t==="stack")return rS(n);if(t==="shape")return!0;const a=uS(n);return a instanceof Pg?a:Dg(a,i)}function cS(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function uS(n){return(n.scale||{}).getPointPositionForValue?fS(n):dS(n)}function dS(n){const{scale:e={},fill:t}=n,i=tS(t,e);if(zn(i)){const a=e.isHorizontal();return{x:a?i:null,y:a?null:i}}return null}function fS(n){const{scale:e,fill:t}=n,i=e.options,a=e.getLabels().length,s=i.reverse?e.max:e.min,o=nS(t,e,s),l=[];if(i.grid.circular){const c=e.getPointPositionForValue(0,s);return new Pg({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<a;++c)l.push(e.getPointPositionForValue(c,o));return l}function Fc(n,e,t){const i=lS(e),{chart:a,index:s,line:o,scale:l,axis:c}=e,u=o.options,d=u.fill,f=u.backgroundColor,{above:h=f,below:b=f}=d||{},v=a.getDatasetMeta(s),g=mg(a,v);i&&o.points.length&&(Td(n,t),hS(n,{line:o,target:i,above:h,below:b,area:t,scale:l,axis:c,clip:g}),$d(n))}function hS(n,e){const{line:t,target:i,above:a,below:s,area:o,scale:l,clip:c}=e,u=t._loop?"angle":e.axis;n.save();let d=s;s!==a&&(u==="x"?(Jh(n,i,o.top),qc(n,{line:t,target:i,color:a,scale:l,property:u,clip:c}),n.restore(),n.save(),Jh(n,i,o.bottom)):u==="y"&&(Gh(n,i,o.left),qc(n,{line:t,target:i,color:s,scale:l,property:u,clip:c}),n.restore(),n.save(),Gh(n,i,o.right),d=a)),qc(n,{line:t,target:i,color:d,scale:l,property:u,clip:c}),n.restore()}function Jh(n,e,t){const{segments:i,points:a}=e;let s=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:u}=l,d=a[c],f=a[ec(c,u,a)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(d.x,t),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(f.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function Gh(n,e,t){const{segments:i,points:a}=e;let s=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:u}=l,d=a[c],f=a[ec(c,u,a)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(t,d.y),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(t,f.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function qc(n,e){const{line:t,target:i,property:a,color:s,scale:o,clip:l}=e,c=J2(t,i,a);for(const{source:u,target:d,start:f,end:h}of c){const{style:{backgroundColor:b=s}={}}=u,v=i!==!0;n.save(),n.fillStyle=b,vS(n,o,l,v&&Du(a,f,h)),n.beginPath();const g=!!t.pathSegment(n,u);let m;if(v){g?n.closePath():Xh(n,i,h,a);const k=!!i.pathSegment(n,d,{move:g,reverse:!0});m=g&&k,m||Xh(n,i,f,a)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function vS(n,e,t,i){const a=e.chart.chartArea,{property:s,start:o,end:l}=i||{};if(s==="x"||s==="y"){let c,u,d,f;s==="x"?(c=o,u=a.top,d=l,f=a.bottom):(c=a.left,u=o,d=a.right,f=l),n.beginPath(),t&&(c=Math.max(c,t.left),d=Math.min(d,t.right),u=Math.max(u,t.top),f=Math.min(f,t.bottom)),n.rect(c,u,d-c,f-u),n.clip()}}function Xh(n,e,t,i){const a=e.interpolate(t,i);a&&n.lineTo(a.x,a.y)}var mS={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,a=[];let s,o,l,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),l=s.dataset,c=null,l&&l.options&&l instanceof Ql&&(c={visible:n.isDatasetVisible(o),index:o,fill:Q2(l,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=c,a.push(c);for(o=0;o<i;++o)c=a[o],!(!c||c.fill===!1)&&(c.fill=X2(a,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",a=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=a.length-1;o>=0;--o){const l=a[o].$filler;l&&(l.line.updateControlPoints(s,l.axis),i&&l.fill&&Fc(n.ctx,l,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let a=i.length-1;a>=0;--a){const s=i[a].$filler;Zh(s)&&Fc(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!Zh(i)||t.drawTime!=="beforeDatasetDraw"||Fc(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ls={average(n){if(!n.length)return!1;let e,t,i=new Set,a=0,s=0;for(e=0,t=n.length;e<t;++e){const l=n[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),a+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:a/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,a=Number.POSITIVE_INFINITY,s,o,l;for(s=0,o=n.length;s<o;++s){const c=n[s].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=Tu(e,u);d<a&&(a=d,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function Gi(n,e){return e&&(Sn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function gr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function pS(n,e){const{element:t,datasetIndex:i,index:a}=e,s=n.getDatasetMeta(i).controller,{label:o,value:l}=s.getLabelAndValue(a);return{chart:n,label:o,parsed:s.getParsed(a),raw:n.data.datasets[i].data[a],formattedValue:l,dataset:s.getDataset(),dataIndex:a,datasetIndex:i,element:t}}function Qh(n,e){const t=n.chart.ctx,{body:i,footer:a,title:s}=n,{boxWidth:o,boxHeight:l}=e,c=ar(e.bodyFont),u=ar(e.titleFont),d=ar(e.footerFont),f=s.length,h=a.length,b=i.length,v=Gr(e.padding);let g=v.height,m=0,k=i.reduce((O,$)=>O+$.before.length+$.lines.length+$.after.length,0);if(k+=n.beforeBody.length+n.afterBody.length,f&&(g+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),k){const O=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=b*O+(k-b)*c.lineHeight+(k-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*d.lineHeight+(h-1)*e.footerSpacing);let x=0;const C=function(O){m=Math.max(m,t.measureText(O).width+x)};return t.save(),t.font=u.string,qt(n.title,C),t.font=c.string,qt(n.beforeBody.concat(n.afterBody),C),x=e.displayColors?o+2+e.boxPadding:0,qt(i,O=>{qt(O.before,C),qt(O.lines,C),qt(O.after,C)}),x=0,t.font=d.string,qt(n.footer,C),t.restore(),m+=v.width,{width:m,height:g}}function gS(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function bS(n,e,t,i){const{x:a,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&a+s+o>e.width||n==="right"&&a-s-o<0)return!0}function yS(n,e,t,i){const{x:a,width:s}=t,{width:o,chartArea:{left:l,right:c}}=n;let u="center";return i==="center"?u=a<=(l+c)/2?"left":"right":a<=s/2?u="left":a>=o-s/2&&(u="right"),bS(u,n,e,t)&&(u="center"),u}function ev(n,e,t){const i=t.yAlign||e.yAlign||gS(n,t);return{xAlign:t.xAlign||e.xAlign||yS(n,e,t,i),yAlign:i}}function _S(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function xS(n,e,t){let{y:i,height:a}=n;return e==="top"?i+=t:e==="bottom"?i-=a+t:i-=a/2,i}function tv(n,e,t,i){const{caretSize:a,caretPadding:s,cornerRadius:o}=n,{xAlign:l,yAlign:c}=t,u=a+s,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:b}=al(o);let v=_S(e,l);const g=xS(e,c,u);return c==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(d,h)+a:l==="right"&&(v+=Math.max(f,b)+a),{x:ji(v,0,i.width-e.width),y:ji(g,0,i.height-e.height)}}function Wo(n,e,t){const i=Gr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function nv(n){return Gi([],gr(n))}function wS(n,e,t){return Da(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function iv(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const Mg={beforeTitle:mr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:mr,beforeBody:mr,beforeLabel:mr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return en(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:mr,afterBody:mr,beforeFooter:mr,footer:mr,afterFooter:mr};function ni(n,e,t,i){const a=n[e].call(t,i);return typeof a>"u"?Mg[e].call(t,i):a}class rv extends yo{static positioners=Ls;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&t.options.animation&&i.animations,s=new pg(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=wS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,a=ni(i,"beforeTitle",this,e),s=ni(i,"title",this,e),o=ni(i,"afterTitle",this,e);let l=[];return l=Gi(l,gr(a)),l=Gi(l,gr(s)),l=Gi(l,gr(o)),l}getBeforeBody(e,t){return nv(ni(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,a=[];return qt(e,s=>{const o={before:[],lines:[],after:[]},l=iv(i,s);Gi(o.before,gr(ni(l,"beforeLabel",this,s))),Gi(o.lines,ni(l,"label",this,s)),Gi(o.after,gr(ni(l,"afterLabel",this,s))),a.push(o)}),a}getAfterBody(e,t){return nv(ni(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,a=ni(i,"beforeFooter",this,e),s=ni(i,"footer",this,e),o=ni(i,"afterFooter",this,e);let l=[];return l=Gi(l,gr(a)),l=Gi(l,gr(s)),l=Gi(l,gr(o)),l}_createItems(e){const t=this._active,i=this.chart.data,a=[],s=[],o=[];let l=[],c,u;for(c=0,u=t.length;c<u;++c)l.push(pS(this.chart,t[c]));return e.filter&&(l=l.filter((d,f,h)=>e.filter(d,f,h,i))),e.itemSort&&(l=l.sort((d,f)=>e.itemSort(d,f,i))),qt(l,d=>{const f=iv(e.callbacks,d);a.push(ni(f,"labelColor",this,d)),s.push(ni(f,"labelPointStyle",this,d)),o.push(ni(f,"labelTextColor",this,d))}),this.labelColors=a,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),a=this._active;let s,o=[];if(!a.length)this.opacity!==0&&(s={opacity:0});else{const l=Ls[i.position].call(this,a,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=Qh(this,i),u=Object.assign({},l,c),d=ev(this.chart,i,u),f=tv(i,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,a){const s=this.getCaretPosition(e,i,a);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:a,yAlign:s}=this,{caretSize:o,cornerRadius:l}=i,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=al(l),{x:h,y:b}=e,{width:v,height:g}=t;let m,k,x,C,O,$;return s==="center"?(O=b+g/2,a==="left"?(m=h,k=m-o,C=O+o,$=O-o):(m=h+v,k=m+o,C=O-o,$=O+o),x=m):(a==="left"?k=h+Math.max(c,d)+o:a==="right"?k=h+v-Math.max(u,f)-o:k=this.caretX,s==="top"?(C=b,O=C-o,m=k-o,x=k+o):(C=b+g,O=C+o,m=k+o,x=k-o),$=C),{x1:m,x2:k,x3:x,y1:C,y2:O,y3:$}}drawTitle(e,t,i){const a=this.title,s=a.length;let o,l,c;if(s){const u=Dc(i.rtl,this.x,this.width);for(e.x=Wo(this,i.titleAlign,i),t.textAlign=u.textAlign(i.titleAlign),t.textBaseline="middle",o=ar(i.titleFont),l=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,c=0;c<s;++c)t.fillText(a[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===s&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,t,i,a,s){const o=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:u}=s,d=ar(s.bodyFont),f=Wo(this,"left",s),h=a.x(f),b=c<d.lineHeight?(d.lineHeight-c)/2:0,v=t.y+b;if(s.usePointStyle){const g={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},m=a.leftForLtr(h,u)+u/2,k=v+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Iu(e,g,m,k),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Iu(e,g,m,k)}else{e.lineWidth=jt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=a.leftForLtr(h,u),m=a.leftForLtr(a.xPlus(h,1),u-2),k=al(o.borderRadius);Object.values(k).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,vh(e,{x:g,y:v,w:u,h:c,radius:k}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),vh(e,{x:m,y:v+1,w:u-2,h:c-2,radius:k}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,v,u,c),e.strokeRect(g,v,u,c),e.fillStyle=o.backgroundColor,e.fillRect(m,v+1,u-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:a}=this,{bodySpacing:s,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=i,f=ar(i.bodyFont);let h=f.lineHeight,b=0;const v=Dc(i.rtl,this.x,this.width),g=function(I){t.fillText(I,v.x(e.x+b),e.y+h/2),e.y+=h+s},m=v.textAlign(o);let k,x,C,O,$,E,w;for(t.textAlign=o,t.textBaseline="middle",t.font=f.string,e.x=Wo(this,m,i),t.fillStyle=i.bodyColor,qt(this.beforeBody,g),b=l&&m!=="right"?o==="center"?u/2+d:u+2+d:0,O=0,E=a.length;O<E;++O){for(k=a[O],x=this.labelTextColors[O],t.fillStyle=x,qt(k.before,g),C=k.lines,l&&C.length&&(this._drawColorBox(t,e,O,v,i),h=Math.max(f.lineHeight,c)),$=0,w=C.length;$<w;++$)g(C[$]),h=f.lineHeight;qt(k.after,g)}b=0,h=f.lineHeight,qt(this.afterBody,g),e.y-=s}drawFooter(e,t,i){const a=this.footer,s=a.length;let o,l;if(s){const c=Dc(i.rtl,this.x,this.width);for(e.x=Wo(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=c.textAlign(i.footerAlign),t.textBaseline="middle",o=ar(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,l=0;l<s;++l)t.fillText(a[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,a){const{xAlign:s,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:d}=i,{topLeft:f,topRight:h,bottomLeft:b,bottomRight:v}=al(a.cornerRadius);t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.beginPath(),t.moveTo(l+f,c),o==="top"&&this.drawCaret(e,t,i,a),t.lineTo(l+u-h,c),t.quadraticCurveTo(l+u,c,l+u,c+h),o==="center"&&s==="right"&&this.drawCaret(e,t,i,a),t.lineTo(l+u,c+d-v),t.quadraticCurveTo(l+u,c+d,l+u-v,c+d),o==="bottom"&&this.drawCaret(e,t,i,a),t.lineTo(l+b,c+d),t.quadraticCurveTo(l,c+d,l,c+d-b),o==="center"&&s==="left"&&this.drawCaret(e,t,i,a),t.lineTo(l,c+f),t.quadraticCurveTo(l,c,l+f,c),t.closePath(),t.fill(),a.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,a=i&&i.x,s=i&&i.y;if(a||s){const o=Ls[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Qh(this,e),c=Object.assign({},o,this._size),u=ev(t,e,c),d=tv(e,c,u,t);(a._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const a={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Gr(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,a,t),lk(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),ck(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,a=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),s=!yl(i,a),o=this._positionChanged(a,t);(s||o)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,i),l=this._positionChanged(o,e),c=t||!yl(o,s)||l;return c&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,i,a){const s=this.options;if(e.type==="mouseout")return[];if(!a)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:a,options:s}=this,o=Ls[s.position].call(this,e,t);return o!==!1&&(i!==o.x||a!==o.y)}}var kS={id:"tooltip",_element:rv,positioners:Ls,afterInit(n,e,t){t&&(n.tooltip=new rv({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Mg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function SS(n,e){const t=[],{bounds:a,step:s,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:h}=n,b=s||1,v=d-1,{min:g,max:m}=e,k=!en(o),x=!en(l),C=!en(u),O=(m-g)/(f+1);let $=ih((m-g)/v/b)*b,E,w,I,D;if($<1e-14&&!k&&!x)return[{value:g},{value:m}];D=Math.ceil(m/$)-Math.floor(g/$),D>v&&($=ih(D*$/v/b)*b),en(c)||(E=Math.pow(10,c),$=Math.ceil($*E)/E),a==="ticks"?(w=Math.floor(g/$)*$,I=Math.ceil(m/$)*$):(w=g,I=m),k&&x&&s&&Q0((l-o)/s,$/1e3)?(D=Math.round(Math.min((l-o)/$,d)),$=(l-o)/D,w=o,I=l):C?(w=k?o:w,I=x?l:I,D=u-1,$=(I-w)/D):(D=(I-w)/$,_a(D,Math.round(D),$/1e3)?D=Math.round(D):D=Math.ceil(D));const A=Math.max(rh($),rh(w));E=Math.pow(10,en(c)?A:c),w=Math.round(w*E)/E,I=Math.round(I*E)/E;let L=0;for(k&&(h&&w!==o?(t.push({value:o}),w<o&&L++,_a(Math.round((w+L*$)*E)/E,o,av(o,O,n))&&L++):w<o&&L++);L<D;++L){const N=Math.round((w+L*$)*E)/E;if(x&&N>l)break;t.push({value:N})}return x&&h&&I!==l?t.length&&_a(t[t.length-1].value,l,av(l,O,n))?t[t.length-1].value=l:t.push({value:l}):(!x||I===l)&&t.push({value:I}),t}function av(n,e,{horizontal:t,minRotation:i}){const a=va(i),s=(t?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class TS extends _o{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return en(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:a,max:s}=this;const o=c=>a=t?a:c,l=c=>s=i?s:c;if(e){const c=Jr(a),u=Jr(s);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(a===s){let c=s===0?1:Math.abs(s*.05);l(s+c),e||o(a-c)}this.min=a,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),t=t||11),t&&(a=Math.min(t,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=SS(a,s);return e.bounds==="ticks"&&ew(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const a=(i-t)/Math.max(e.length-1,1)/2;t-=a,i+=a}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return rg(e,this.chart.options.locale,this.options.ticks.format)}}class $S extends TS{static id="linear";static defaults={ticks:{callback:ag.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=zn(e)?e:0,this.max=zn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=va(this.options.ticks.minRotation),a=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const tc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},si=Object.keys(tc);function sv(n,e){return n-e}function ov(n,e){if(en(e))return null;const t=n._adapter,{parser:i,round:a,isoWeekday:s}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),zn(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(a&&(o=a==="week"&&(eo(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,a)),+o)}function lv(n,e,t,i){const a=si.length;for(let s=si.indexOf(n);s<a-1;++s){const o=tc[si[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=i)return si[s]}return si[a-1]}function IS(n,e,t,i,a){for(let s=si.length-1;s>=si.indexOf(t);s--){const o=si[s];if(tc[o].common&&n._adapter.diff(a,i,o)>=e-1)return o}return si[t?si.indexOf(t):0]}function CS(n){for(let e=si.indexOf(n)+1,t=si.length;e<t;++e)if(tc[si[e]].common)return si[e]}function cv(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:a}=kd(t,e),s=t[i]>=e?t[i]:t[a];n[s]=!0}}function ES(n,e,t,i){const a=n._adapter,s=+a.startOf(e[0].value,i),o=e[e.length-1].value;let l,c;for(l=s;l<=o;l=+a.add(l,1,i))c=t[l],c>=0&&(e[c].major=!0);return e}function uv(n,e,t){const i=[],a={},s=e.length;let o,l;for(o=0;o<s;++o)l=e[o],a[l]=o,i.push({value:l,major:!1});return s===0||!t?i:ES(n,i,a,t)}class Pu extends _o{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),a=this._adapter=new yg._date(e.adapters.date);a.init(t),qs(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:ov(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:a,max:s,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(a=Math.min(a,u.min)),!l&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),a=zn(a)&&!isNaN(a)?a:+t.startOf(Date.now(),i),s=zn(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(a,s-1),this.max=Math.max(a+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const s=this.min,o=this.max,l=sw(a,s,o);return this._unit=t.unit||(i.autoSkip?lv(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):IS(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:CS(this._unit),this.initOffsets(a),e.reverse&&l.reverse(),uv(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,a,s;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?t=1-a:t=(this.getDecimalForValue(e[1])-a)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=ji(t,0,o),i=ji(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,a=this.options,s=a.time,o=s.unit||lv(s.minUnit,t,i,this._getLabelCapacity(t)),l=Yt(a.ticks.stepSize,1),c=o==="week"?s.isoWeekday:!1,u=eo(c)||c===!0,d={};let f=t,h,b;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":o),e.diff(i,t,o)>1e5*l)throw new Error(t+" and "+i+" are too far apart with stepSize of "+l+" "+o);const v=a.ticks.source==="data"&&this.getDataTimestamps();for(h=f,b=0;h<i;h=+e.add(h,l,o),b++)cv(d,h,v);return(h===i||a.bounds==="ticks"||b===1)&&cv(d,h,v),Object.keys(d).sort(sv).map(g=>+g)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const a=this.options.time.displayFormats,s=this._unit,o=t||a[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,a){const s=this.options,o=s.ticks.callback;if(o)return Mt(o,[e,t,i],this);const l=s.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],f=u&&l[u],h=i[t],b=u&&f&&h&&h.major;return this._adapter.format(e,a||(b?f:d))}generateTickLabels(e){let t,i,a;for(t=0,i=e.length;t<i;++t)a=e[t],a.label=this._tickFormatFunction(a.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,a=va(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(a),o=Math.sin(a),l=this._resolveTickFontOptions(0).size;return{w:i*s+l*o,h:i*o+l*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,a=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,uv(this,[e],this._majorUnit),a),o=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(t=0,i=a.length;t<i;++t)e=e.concat(a[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const a=this.getLabels();for(t=0,i=a.length;t<i;++t)e.push(ov(this,a[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return lw(e.sort(sv))}}function Yo(n,e,t){let i=0,a=n.length-1,s,o,l,c;t?(e>=n[i].pos&&e<=n[a].pos&&({lo:i,hi:a}=ma(n,"pos",e)),{pos:s,time:l}=n[i],{pos:o,time:c}=n[a]):(e>=n[i].time&&e<=n[a].time&&({lo:i,hi:a}=ma(n,"time",e)),{time:s,pos:l}=n[i],{time:o,pos:c}=n[a]);const u=o-s;return u?l+(c-l)*(e-s)/u:l}class u3 extends Pu{static id="timeseries";static defaults=Pu.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Yo(t,this.min),this._tableRange=Yo(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,a=[],s=[];let o,l,c,u,d;for(o=0,l=e.length;o<l;++o)u=e[o],u>=t&&u<=i&&a.push(u);if(a.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,l=a.length;o<l;++o)d=a[o+1],c=a[o-1],u=a[o],Math.round((d+c)/2)!==u&&s.push({time:u,pos:o/(l-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((a,s)=>a-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Yo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Yo(this._table,i*this._tableRange+this._minPos,!0)}}/*!
 * chartjs-adapter-luxon v1.3.1
 * https://www.chartjs.org
 * (c) 2023 chartjs-adapter-luxon Contributors
 * Released under the MIT license
 */const OS={datetime:$t.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:$t.TIME_WITH_SECONDS,minute:$t.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};yg._date.override({_id:"luxon",_create:function(n){return $t.fromMillis(n,this.options)},init(n){this.options.locale||(this.options.locale=n.locale)},formats:function(){return OS},parse:function(n,e){const t=this.options,i=typeof n;return n===null||i==="undefined"?null:(i==="number"?n=this._create(n):i==="string"?typeof e=="string"?n=$t.fromFormat(n,e,t):n=$t.fromISO(n,t):n instanceof Date?n=$t.fromJSDate(n,t):i==="object"&&!(n instanceof $t)&&(n=$t.fromObject(n,t)),n.isValid?n.valueOf():null)},format:function(n,e){const t=this._create(n);return typeof e=="string"?t.toFormat(e):t.toLocaleString(e)},add:function(n,e,t){const i={};return i[t]=e,this._create(n).plus(i).valueOf()},diff:function(n,e,t){return this._create(n).diff(this._create(e)).as(t).valueOf()},startOf:function(n,e,t){if(e==="isoWeek"){t=Math.trunc(Math.min(Math.max(0,t),6));const i=this._create(n);return i.minus({days:(i.weekday-t+7)%7}).startOf("day").valueOf()}return e?this._create(n).startOf(e).valueOf():n},endOf:function(n,e){return this._create(n).endOf(e).valueOf()}});function DS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zc={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var dv;function PS(){return dv||(dv=1,(function(n){(function(e,t,i,a){var s=["","webkit","Moz","MS","ms","o"],o=t.createElement("div"),l="function",c=Math.round,u=Math.abs,d=Date.now;function f(K,X,fe){return setTimeout(C(K,fe),X)}function h(K,X,fe){return Array.isArray(K)?(b(K,fe[X],fe),!0):!1}function b(K,X,fe){var Ae;if(K)if(K.forEach)K.forEach(X,fe);else if(K.length!==a)for(Ae=0;Ae<K.length;)X.call(fe,K[Ae],Ae,K),Ae++;else for(Ae in K)K.hasOwnProperty(Ae)&&X.call(fe,K[Ae],Ae,K)}function v(K,X,fe){var Ae="DEPRECATED METHOD: "+X+`
`+fe+` AT 
`;return function(){var lt=new Error("get-stack-trace"),kt=lt&&lt.stack?lt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Pt=e.console&&(e.console.warn||e.console.log);return Pt&&Pt.call(e.console,Ae,kt),K.apply(this,arguments)}}var g;typeof Object.assign!="function"?g=function(X){if(X===a||X===null)throw new TypeError("Cannot convert undefined or null to object");for(var fe=Object(X),Ae=1;Ae<arguments.length;Ae++){var lt=arguments[Ae];if(lt!==a&&lt!==null)for(var kt in lt)lt.hasOwnProperty(kt)&&(fe[kt]=lt[kt])}return fe}:g=Object.assign;var m=v(function(X,fe,Ae){for(var lt=Object.keys(fe),kt=0;kt<lt.length;)(!Ae||Ae&&X[lt[kt]]===a)&&(X[lt[kt]]=fe[lt[kt]]),kt++;return X},"extend","Use `assign`."),k=v(function(X,fe){return m(X,fe,!0)},"merge","Use `assign`.");function x(K,X,fe){var Ae=X.prototype,lt;lt=K.prototype=Object.create(Ae),lt.constructor=K,lt._super=Ae,fe&&g(lt,fe)}function C(K,X){return function(){return K.apply(X,arguments)}}function O(K,X){return typeof K==l?K.apply(X&&X[0]||a,X):K}function $(K,X){return K===a?X:K}function E(K,X,fe){b(A(X),function(Ae){K.addEventListener(Ae,fe,!1)})}function w(K,X,fe){b(A(X),function(Ae){K.removeEventListener(Ae,fe,!1)})}function I(K,X){for(;K;){if(K==X)return!0;K=K.parentNode}return!1}function D(K,X){return K.indexOf(X)>-1}function A(K){return K.trim().split(/\s+/g)}function L(K,X,fe){if(K.indexOf&&!fe)return K.indexOf(X);for(var Ae=0;Ae<K.length;){if(fe&&K[Ae][fe]==X||!fe&&K[Ae]===X)return Ae;Ae++}return-1}function N(K){return Array.prototype.slice.call(K,0)}function H(K,X,fe){for(var Ae=[],lt=[],kt=0;kt<K.length;){var Pt=K[kt][X];L(lt,Pt)<0&&Ae.push(K[kt]),lt[kt]=Pt,kt++}return Ae=Ae.sort(function(wn,On){return wn[X]>On[X]}),Ae}function j(K,X){for(var fe,Ae,lt=X[0].toUpperCase()+X.slice(1),kt=0;kt<s.length;){if(fe=s[kt],Ae=fe?fe+lt:X,Ae in K)return Ae;kt++}return a}var V=1;function U(){return V++}function B(K){var X=K.ownerDocument||K;return X.defaultView||X.parentWindow||e}var J=/mobile|tablet|ip(ad|hone|od)|android/i,Q="ontouchstart"in e,oe=j(e,"PointerEvent")!==a,de=Q&&J.test(navigator.userAgent),ge="touch",pe="pen",xe="mouse",ve="kinect",Ee=25,ce=1,he=2,be=4,we=8,ue=1,me=2,ae=4,te=8,se=16,ye=me|ae,ke=te|se,Ie=ye|ke,Ne=["x","y"],ze=["clientX","clientY"];function Me(K,X){var fe=this;this.manager=K,this.callback=X,this.element=K.element,this.target=K.options.inputTarget,this.domHandler=function(Ae){O(K.options.enable,[K])&&fe.handler(Ae)},this.init()}Me.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(B(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(B(this.element),this.evWin,this.domHandler)}};function Ge(K){var X,fe=K.options.inputClass;return fe?X=fe:oe?X=vt:de?X=rt:Q?X=Ft:X=Je,new X(K,_e)}function _e(K,X,fe){var Ae=fe.pointers.length,lt=fe.changedPointers.length,kt=X&ce&&Ae-lt===0,Pt=X&(be|we)&&Ae-lt===0;fe.isFirst=!!kt,fe.isFinal=!!Pt,kt&&(K.session={}),fe.eventType=X,Oe(K,fe),K.emit("hammer.input",fe),K.recognize(fe),K.session.prevInput=fe}function Oe(K,X){var fe=K.session,Ae=X.pointers,lt=Ae.length;fe.firstInput||(fe.firstInput=je(X)),lt>1&&!fe.firstMultiple?fe.firstMultiple=je(X):lt===1&&(fe.firstMultiple=!1);var kt=fe.firstInput,Pt=fe.firstMultiple,nn=Pt?Pt.center:kt.center,wn=X.center=nt(Ae);X.timeStamp=d(),X.deltaTime=X.timeStamp-kt.timeStamp,X.angle=qe(nn,wn),X.distance=De(nn,wn),Fe(fe,X),X.offsetDirection=Ye(X.deltaX,X.deltaY);var On=We(X.deltaTime,X.deltaX,X.deltaY);X.overallVelocityX=On.x,X.overallVelocityY=On.y,X.overallVelocity=u(On.x)>u(On.y)?On.x:On.y,X.scale=Pt?ct(Pt.pointers,Ae):1,X.rotation=Pt?Ke(Pt.pointers,Ae):0,X.maxPointers=fe.prevInput?X.pointers.length>fe.prevInput.maxPointers?X.pointers.length:fe.prevInput.maxPointers:X.pointers.length,at(fe,X);var ti=K.element;I(X.srcEvent.target,ti)&&(ti=X.srcEvent.target),X.target=ti}function Fe(K,X){var fe=X.center,Ae=K.offsetDelta||{},lt=K.prevDelta||{},kt=K.prevInput||{};(X.eventType===ce||kt.eventType===be)&&(lt=K.prevDelta={x:kt.deltaX||0,y:kt.deltaY||0},Ae=K.offsetDelta={x:fe.x,y:fe.y}),X.deltaX=lt.x+(fe.x-Ae.x),X.deltaY=lt.y+(fe.y-Ae.y)}function at(K,X){var fe=K.lastInterval||X,Ae=X.timeStamp-fe.timeStamp,lt,kt,Pt,nn;if(X.eventType!=we&&(Ae>Ee||fe.velocity===a)){var wn=X.deltaX-fe.deltaX,On=X.deltaY-fe.deltaY,ti=We(Ae,wn,On);kt=ti.x,Pt=ti.y,lt=u(ti.x)>u(ti.y)?ti.x:ti.y,nn=Ye(wn,On),K.lastInterval=X}else lt=fe.velocity,kt=fe.velocityX,Pt=fe.velocityY,nn=fe.direction;X.velocity=lt,X.velocityX=kt,X.velocityY=Pt,X.direction=nn}function je(K){for(var X=[],fe=0;fe<K.pointers.length;)X[fe]={clientX:c(K.pointers[fe].clientX),clientY:c(K.pointers[fe].clientY)},fe++;return{timeStamp:d(),pointers:X,center:nt(X),deltaX:K.deltaX,deltaY:K.deltaY}}function nt(K){var X=K.length;if(X===1)return{x:c(K[0].clientX),y:c(K[0].clientY)};for(var fe=0,Ae=0,lt=0;lt<X;)fe+=K[lt].clientX,Ae+=K[lt].clientY,lt++;return{x:c(fe/X),y:c(Ae/X)}}function We(K,X,fe){return{x:X/K||0,y:fe/K||0}}function Ye(K,X){return K===X?ue:u(K)>=u(X)?K<0?me:ae:X<0?te:se}function De(K,X,fe){fe||(fe=Ne);var Ae=X[fe[0]]-K[fe[0]],lt=X[fe[1]]-K[fe[1]];return Math.sqrt(Ae*Ae+lt*lt)}function qe(K,X,fe){fe||(fe=Ne);var Ae=X[fe[0]]-K[fe[0]],lt=X[fe[1]]-K[fe[1]];return Math.atan2(lt,Ae)*180/Math.PI}function Ke(K,X){return qe(X[1],X[0],ze)+qe(K[1],K[0],ze)}function ct(K,X){return De(X[0],X[1],ze)/De(K[0],K[1],ze)}var Ve={mousedown:ce,mousemove:he,mouseup:be},Xe="mousedown",et="mousemove mouseup";function Je(){this.evEl=Xe,this.evWin=et,this.pressed=!1,Me.apply(this,arguments)}x(Je,Me,{handler:function(X){var fe=Ve[X.type];fe&ce&&X.button===0&&(this.pressed=!0),fe&he&&X.which!==1&&(fe=be),this.pressed&&(fe&be&&(this.pressed=!1),this.callback(this.manager,fe,{pointers:[X],changedPointers:[X],pointerType:xe,srcEvent:X}))}});var ht={pointerdown:ce,pointermove:he,pointerup:be,pointercancel:we,pointerout:we},gt={2:ge,3:pe,4:xe,5:ve},it="pointerdown",$e="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(it="MSPointerDown",$e="MSPointerMove MSPointerUp MSPointerCancel");function vt(){this.evEl=it,this.evWin=$e,Me.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}x(vt,Me,{handler:function(X){var fe=this.store,Ae=!1,lt=X.type.toLowerCase().replace("ms",""),kt=ht[lt],Pt=gt[X.pointerType]||X.pointerType,nn=Pt==ge,wn=L(fe,X.pointerId,"pointerId");kt&ce&&(X.button===0||nn)?wn<0&&(fe.push(X),wn=fe.length-1):kt&(be|we)&&(Ae=!0),!(wn<0)&&(fe[wn]=X,this.callback(this.manager,kt,{pointers:fe,changedPointers:[X],pointerType:Pt,srcEvent:X}),Ae&&fe.splice(wn,1))}});var Y={touchstart:ce,touchmove:he,touchend:be,touchcancel:we},Z="touchstart",le="touchstart touchmove touchend touchcancel";function Se(){this.evTarget=Z,this.evWin=le,this.started=!1,Me.apply(this,arguments)}x(Se,Me,{handler:function(X){var fe=Y[X.type];if(fe===ce&&(this.started=!0),!!this.started){var Ae=Ze.call(this,X,fe);fe&(be|we)&&Ae[0].length-Ae[1].length===0&&(this.started=!1),this.callback(this.manager,fe,{pointers:Ae[0],changedPointers:Ae[1],pointerType:ge,srcEvent:X})}}});function Ze(K,X){var fe=N(K.touches),Ae=N(K.changedTouches);return X&(be|we)&&(fe=H(fe.concat(Ae),"identifier")),[fe,Ae]}var st={touchstart:ce,touchmove:he,touchend:be,touchcancel:we},wt="touchstart touchmove touchend touchcancel";function rt(){this.evTarget=wt,this.targetIds={},Me.apply(this,arguments)}x(rt,Me,{handler:function(X){var fe=st[X.type],Ae=St.call(this,X,fe);Ae&&this.callback(this.manager,fe,{pointers:Ae[0],changedPointers:Ae[1],pointerType:ge,srcEvent:X})}});function St(K,X){var fe=N(K.touches),Ae=this.targetIds;if(X&(ce|he)&&fe.length===1)return Ae[fe[0].identifier]=!0,[fe,fe];var lt,kt,Pt=N(K.changedTouches),nn=[],wn=this.target;if(kt=fe.filter(function(On){return I(On.target,wn)}),X===ce)for(lt=0;lt<kt.length;)Ae[kt[lt].identifier]=!0,lt++;for(lt=0;lt<Pt.length;)Ae[Pt[lt].identifier]&&nn.push(Pt[lt]),X&(be|we)&&delete Ae[Pt[lt].identifier],lt++;if(nn.length)return[H(kt.concat(nn),"identifier"),nn]}var pt=2500,Tt=25;function Ft(){Me.apply(this,arguments);var K=C(this.handler,this);this.touch=new rt(this.manager,K),this.mouse=new Je(this.manager,K),this.primaryTouch=null,this.lastTouches=[]}x(Ft,Me,{handler:function(X,fe,Ae){var lt=Ae.pointerType==ge,kt=Ae.pointerType==xe;if(!(kt&&Ae.sourceCapabilities&&Ae.sourceCapabilities.firesTouchEvents)){if(lt)_n.call(this,fe,Ae);else if(kt&&Cn.call(this,Ae))return;this.callback(X,fe,Ae)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function _n(K,X){K&ce?(this.primaryTouch=X.changedPointers[0].identifier,Zt.call(this,X)):K&(be|we)&&Zt.call(this,X)}function Zt(K){var X=K.changedPointers[0];if(X.identifier===this.primaryTouch){var fe={x:X.clientX,y:X.clientY};this.lastTouches.push(fe);var Ae=this.lastTouches,lt=function(){var kt=Ae.indexOf(fe);kt>-1&&Ae.splice(kt,1)};setTimeout(lt,pt)}}function Cn(K){for(var X=K.srcEvent.clientX,fe=K.srcEvent.clientY,Ae=0;Ae<this.lastTouches.length;Ae++){var lt=this.lastTouches[Ae],kt=Math.abs(X-lt.x),Pt=Math.abs(fe-lt.y);if(kt<=Tt&&Pt<=Tt)return!0}return!1}var Vn=j(o.style,"touchAction"),dn=Vn!==a,sn="compute",ci="auto",Un="manipulation",Qn="none",yi="pan-x",Mi="pan-y",Bn=nc();function _i(K,X){this.manager=K,this.set(X)}_i.prototype={set:function(K){K==sn&&(K=this.compute()),dn&&this.manager.element.style&&Bn[K]&&(this.manager.element.style[Vn]=K),this.actions=K.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var K=[];return b(this.manager.recognizers,function(X){O(X.options.enable,[X])&&(K=K.concat(X.getTouchAction()))}),ea(K.join(" "))},preventDefaults:function(K){var X=K.srcEvent,fe=K.offsetDirection;if(this.manager.session.prevented){X.preventDefault();return}var Ae=this.actions,lt=D(Ae,Qn)&&!Bn[Qn],kt=D(Ae,Mi)&&!Bn[Mi],Pt=D(Ae,yi)&&!Bn[yi];if(lt){var nn=K.pointers.length===1,wn=K.distance<2,On=K.deltaTime<250;if(nn&&wn&&On)return}if(!(Pt&&kt)&&(lt||kt&&fe&ye||Pt&&fe&ke))return this.preventSrc(X)},preventSrc:function(K){this.manager.session.prevented=!0,K.preventDefault()}};function ea(K){if(D(K,Qn))return Qn;var X=D(K,yi),fe=D(K,Mi);return X&&fe?Qn:X||fe?X?yi:Mi:D(K,Un)?Un:ci}function nc(){if(!dn)return!1;var K={},X=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(fe){K[fe]=X?e.CSS.supports("touch-action",fe):!0}),K}var Aa=1,xn=2,Ai=4,Wi=8,Li=Wi,ta=16,En=32;function ei(K){this.options=g({},this.defaults,K||{}),this.id=U(),this.manager=null,this.options.enable=$(this.options.enable,!0),this.state=Aa,this.simultaneous={},this.requireFail=[]}ei.prototype={defaults:{},set:function(K){return g(this.options,K),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(K){if(h(K,"recognizeWith",this))return this;var X=this.simultaneous;return K=La(K,this),X[K.id]||(X[K.id]=K,K.recognizeWith(this)),this},dropRecognizeWith:function(K){return h(K,"dropRecognizeWith",this)?this:(K=La(K,this),delete this.simultaneous[K.id],this)},requireFailure:function(K){if(h(K,"requireFailure",this))return this;var X=this.requireFail;return K=La(K,this),L(X,K)===-1&&(X.push(K),K.requireFailure(this)),this},dropRequireFailure:function(K){if(h(K,"dropRequireFailure",this))return this;K=La(K,this);var X=L(this.requireFail,K);return X>-1&&this.requireFail.splice(X,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(K){return!!this.simultaneous[K.id]},emit:function(K){var X=this,fe=this.state;function Ae(lt){X.manager.emit(lt,K)}fe<Wi&&Ae(X.options.event+xo(fe)),Ae(X.options.event),K.additionalEvent&&Ae(K.additionalEvent),fe>=Wi&&Ae(X.options.event+xo(fe))},tryEmit:function(K){if(this.canEmit())return this.emit(K);this.state=En},canEmit:function(){for(var K=0;K<this.requireFail.length;){if(!(this.requireFail[K].state&(En|Aa)))return!1;K++}return!0},recognize:function(K){var X=g({},K);if(!O(this.options.enable,[this,X])){this.reset(),this.state=En;return}this.state&(Li|ta|En)&&(this.state=Aa),this.state=this.process(X),this.state&(xn|Ai|Wi|ta)&&this.tryEmit(X)},process:function(K){},getTouchAction:function(){},reset:function(){}};function xo(K){return K&ta?"cancel":K&Wi?"end":K&Ai?"move":K&xn?"start":""}function wo(K){return K==se?"down":K==te?"up":K==me?"left":K==ae?"right":""}function La(K,X){var fe=X.manager;return fe?fe.get(K):K}function kn(){ei.apply(this,arguments)}x(kn,ei,{defaults:{pointers:1},attrTest:function(K){var X=this.options.pointers;return X===0||K.pointers.length===X},process:function(K){var X=this.state,fe=K.eventType,Ae=X&(xn|Ai),lt=this.attrTest(K);return Ae&&(fe&we||!lt)?X|ta:Ae||lt?fe&be?X|Wi:X&xn?X|Ai:xn:En}});function fr(){kn.apply(this,arguments),this.pX=null,this.pY=null}x(fr,kn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ie},getTouchAction:function(){var K=this.options.direction,X=[];return K&ye&&X.push(Mi),K&ke&&X.push(yi),X},directionTest:function(K){var X=this.options,fe=!0,Ae=K.distance,lt=K.direction,kt=K.deltaX,Pt=K.deltaY;return lt&X.direction||(X.direction&ye?(lt=kt===0?ue:kt<0?me:ae,fe=kt!=this.pX,Ae=Math.abs(K.deltaX)):(lt=Pt===0?ue:Pt<0?te:se,fe=Pt!=this.pY,Ae=Math.abs(K.deltaY))),K.direction=lt,fe&&Ae>X.threshold&&lt&X.direction},attrTest:function(K){return kn.prototype.attrTest.call(this,K)&&(this.state&xn||!(this.state&xn)&&this.directionTest(K))},emit:function(K){this.pX=K.deltaX,this.pY=K.deltaY;var X=wo(K.direction);X&&(K.additionalEvent=this.options.event+X),this._super.emit.call(this,K)}});function bs(){kn.apply(this,arguments)}x(bs,kn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Qn]},attrTest:function(K){return this._super.attrTest.call(this,K)&&(Math.abs(K.scale-1)>this.options.threshold||this.state&xn)},emit:function(K){if(K.scale!==1){var X=K.scale<1?"in":"out";K.additionalEvent=this.options.event+X}this._super.emit.call(this,K)}});function ys(){ei.apply(this,arguments),this._timer=null,this._input=null}x(ys,ei,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ci]},process:function(K){var X=this.options,fe=K.pointers.length===X.pointers,Ae=K.distance<X.threshold,lt=K.deltaTime>X.time;if(this._input=K,!Ae||!fe||K.eventType&(be|we)&&!lt)this.reset();else if(K.eventType&ce)this.reset(),this._timer=f(function(){this.state=Li,this.tryEmit()},X.time,this);else if(K.eventType&be)return Li;return En},reset:function(){clearTimeout(this._timer)},emit:function(K){this.state===Li&&(K&&K.eventType&be?this.manager.emit(this.options.event+"up",K):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}});function _s(){kn.apply(this,arguments)}x(_s,kn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Qn]},attrTest:function(K){return this._super.attrTest.call(this,K)&&(Math.abs(K.rotation)>this.options.threshold||this.state&xn)}});function Yi(){kn.apply(this,arguments)}x(Yi,kn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ye|ke,pointers:1},getTouchAction:function(){return fr.prototype.getTouchAction.call(this)},attrTest:function(K){var X=this.options.direction,fe;return X&(ye|ke)?fe=K.overallVelocity:X&ye?fe=K.overallVelocityX:X&ke&&(fe=K.overallVelocityY),this._super.attrTest.call(this,K)&&X&K.offsetDirection&&K.distance>this.options.threshold&&K.maxPointers==this.options.pointers&&u(fe)>this.options.velocity&&K.eventType&be},emit:function(K){var X=wo(K.offsetDirection);X&&this.manager.emit(this.options.event+X,K),this.manager.emit(this.options.event,K)}});function hr(){ei.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}x(hr,ei,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Un]},process:function(K){var X=this.options,fe=K.pointers.length===X.pointers,Ae=K.distance<X.threshold,lt=K.deltaTime<X.time;if(this.reset(),K.eventType&ce&&this.count===0)return this.failTimeout();if(Ae&&lt&&fe){if(K.eventType!=be)return this.failTimeout();var kt=this.pTime?K.timeStamp-this.pTime<X.interval:!0,Pt=!this.pCenter||De(this.pCenter,K.center)<X.posThreshold;this.pTime=K.timeStamp,this.pCenter=K.center,!Pt||!kt?this.count=1:this.count+=1,this._input=K;var nn=this.count%X.taps;if(nn===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Li,this.tryEmit()},X.interval,this),xn):Li}return En},failTimeout:function(){return this._timer=f(function(){this.state=En},this.options.interval,this),En},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Li&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ki(K,X){return X=X||{},X.recognizers=$(X.recognizers,Ki.defaults.preset),new Zi(K,X)}Ki.VERSION="2.0.7",Ki.defaults={domEvents:!1,touchAction:sn,enable:!0,inputTarget:null,inputClass:null,preset:[[_s,{enable:!1}],[bs,{enable:!1},["rotate"]],[Yi,{direction:ye}],[fr,{direction:ye},["swipe"]],[hr],[hr,{event:"doubletap",taps:2},["tap"]],[ys]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ic=1,ko=2;function Zi(K,X){this.options=g({},Ki.defaults,X||{}),this.options.inputTarget=this.options.inputTarget||K,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=K,this.input=Ge(this),this.touchAction=new _i(this,this.options.touchAction),Ni(this,!0),b(this.options.recognizers,function(fe){var Ae=this.add(new fe[0](fe[1]));fe[2]&&Ae.recognizeWith(fe[2]),fe[3]&&Ae.requireFailure(fe[3])},this)}Zi.prototype={set:function(K){return g(this.options,K),K.touchAction&&this.touchAction.update(),K.inputTarget&&(this.input.destroy(),this.input.target=K.inputTarget,this.input.init()),this},stop:function(K){this.session.stopped=K?ko:ic},recognize:function(K){var X=this.session;if(!X.stopped){this.touchAction.preventDefaults(K);var fe,Ae=this.recognizers,lt=X.curRecognizer;(!lt||lt&&lt.state&Li)&&(lt=X.curRecognizer=null);for(var kt=0;kt<Ae.length;)fe=Ae[kt],X.stopped!==ko&&(!lt||fe==lt||fe.canRecognizeWith(lt))?fe.recognize(K):fe.reset(),!lt&&fe.state&(xn|Ai|Wi)&&(lt=X.curRecognizer=fe),kt++}},get:function(K){if(K instanceof ei)return K;for(var X=this.recognizers,fe=0;fe<X.length;fe++)if(X[fe].options.event==K)return X[fe];return null},add:function(K){if(h(K,"add",this))return this;var X=this.get(K.options.event);return X&&this.remove(X),this.recognizers.push(K),K.manager=this,this.touchAction.update(),K},remove:function(K){if(h(K,"remove",this))return this;if(K=this.get(K),K){var X=this.recognizers,fe=L(X,K);fe!==-1&&(X.splice(fe,1),this.touchAction.update())}return this},on:function(K,X){if(K!==a&&X!==a){var fe=this.handlers;return b(A(K),function(Ae){fe[Ae]=fe[Ae]||[],fe[Ae].push(X)}),this}},off:function(K,X){if(K!==a){var fe=this.handlers;return b(A(K),function(Ae){X?fe[Ae]&&fe[Ae].splice(L(fe[Ae],X),1):delete fe[Ae]}),this}},emit:function(K,X){this.options.domEvents&&rc(K,X);var fe=this.handlers[K]&&this.handlers[K].slice();if(!(!fe||!fe.length)){X.type=K,X.preventDefault=function(){X.srcEvent.preventDefault()};for(var Ae=0;Ae<fe.length;)fe[Ae](X),Ae++}},destroy:function(){this.element&&Ni(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Ni(K,X){var fe=K.element;if(fe.style){var Ae;b(K.options.cssProps,function(lt,kt){Ae=j(fe.style,kt),X?(K.oldCssProps[Ae]=fe.style[Ae],fe.style[Ae]=lt):fe.style[Ae]=K.oldCssProps[Ae]||""}),X||(K.oldCssProps={})}}function rc(K,X){var fe=t.createEvent("Event");fe.initEvent(K,!0,!0),fe.gesture=X,X.target.dispatchEvent(fe)}g(Ki,{INPUT_START:ce,INPUT_MOVE:he,INPUT_END:be,INPUT_CANCEL:we,STATE_POSSIBLE:Aa,STATE_BEGAN:xn,STATE_CHANGED:Ai,STATE_ENDED:Wi,STATE_RECOGNIZED:Li,STATE_CANCELLED:ta,STATE_FAILED:En,DIRECTION_NONE:ue,DIRECTION_LEFT:me,DIRECTION_RIGHT:ae,DIRECTION_UP:te,DIRECTION_DOWN:se,DIRECTION_HORIZONTAL:ye,DIRECTION_VERTICAL:ke,DIRECTION_ALL:Ie,Manager:Zi,Input:Me,TouchAction:_i,TouchInput:rt,MouseInput:Je,PointerEventInput:vt,TouchMouseInput:Ft,SingleTouchInput:Se,Recognizer:ei,AttrRecognizer:kn,Tap:hr,Pan:fr,Swipe:Yi,Pinch:bs,Rotate:_s,Press:ys,on:E,off:w,each:b,merge:k,extend:m,assign:g,inherit:x,bindFn:C,prefixed:j});var ac=typeof e<"u"?e:typeof self<"u"?self:{};ac.Hammer=Ki,n.exports?n.exports=Ki:e[i]=Ki})(window,document,"Hammer")})(zc)),zc.exports}var MS=PS();const Vs=DS(MS);/*!
* chartjs-plugin-zoom v2.2.0
* https://www.chartjs.org/chartjs-plugin-zoom/2.2.0/
 * (c) 2016-2024 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const no=n=>n&&n.enabled&&n.modifierKey,Ag=(n,e)=>n&&e[n+"Key"],Md=(n,e)=>n&&!e[n+"Key"];function Xr(n,e,t){return n===void 0?!0:typeof n=="string"?n.indexOf(e)!==-1:typeof n=="function"?n({chart:t}).indexOf(e)!==-1:!1}function jc(n,e){return typeof n=="function"&&(n=n({chart:e})),typeof n=="string"?{x:n.indexOf("x")!==-1,y:n.indexOf("y")!==-1}:{x:!1,y:!1}}function AS(n,e){let t;return function(){return clearTimeout(t),t=setTimeout(n,e),e}}function LS({x:n,y:e},t){const i=t.scales,a=Object.keys(i);for(let s=0;s<a.length;s++){const o=i[a[s]];if(e>=o.top&&e<=o.bottom&&n>=o.left&&n<=o.right)return o}return null}function Lg(n,e,t){const{mode:i="xy",scaleMode:a,overScaleMode:s}=n||{},o=LS(e,t),l=jc(i,t),c=jc(a,t);if(s){const d=jc(s,t);for(const f of["x","y"])d[f]&&(c[f]=l[f],l[f]=!1)}if(o&&c[o.axis])return[o];const u=[];return qt(t.scales,function(d){l[d.axis]&&u.push(d)}),u}const Mu=new WeakMap;function an(n){let e=Mu.get(n);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},Mu.set(n,e)),e}function NS(n){Mu.delete(n)}function Ng(n,e,t,i){const a=Math.max(0,Math.min(1,(n-e)/t||0)),s=1-a;return{min:i*a,max:i*s}}function Rg(n,e){const t=n.isHorizontal()?e.x:e.y;return n.getValueForPixel(t)}function Fg(n,e,t){const i=n.max-n.min,a=i*(e-1),s=Rg(n,t);return Ng(s,n.min,i,a)}function RS(n,e,t){const i=Rg(n,t);if(i===void 0)return{min:n.min,max:n.max};const a=Math.log10(n.min),s=Math.log10(n.max),o=Math.log10(i),l=s-a,c=l*(e-1),u=Ng(o,a,l,c);return{min:Math.pow(10,a+u.min),max:Math.pow(10,s-u.max)}}function FS(n,e){return e&&(e[n.id]||e[n.axis])||{}}function fv(n,e,t,i,a){let s=t[i];if(s==="original"){const o=n.originalScaleLimits[e.id][i];s=Yt(o.options,o.scale)}return Yt(s,a)}function qS(n,e,t){const i=n.getValueForPixel(e),a=n.getValueForPixel(t);return{min:Math.min(i,a),max:Math.max(i,a)}}function zS(n,{min:e,max:t,minLimit:i,maxLimit:a},s){const o=(n-t+e)/2;e-=o,t+=o;const l=s.min.options??s.min.scale,c=s.max.options??s.max.scale,u=n/1e6;return _a(e,l,u)&&(e=l),_a(t,c,u)&&(t=c),e<i?(e=i,t=Math.min(i+n,a)):t>a&&(t=a,e=Math.max(a-n,i)),{min:e,max:t}}function Pa(n,{min:e,max:t},i,a=!1){const s=an(n.chart),{options:o}=n,l=FS(n,i),{minRange:c=0}=l,u=fv(s,n,l,"min",-1/0),d=fv(s,n,l,"max",1/0);if(a==="pan"&&(e<u||t>d))return!0;const f=n.max-n.min,h=a?Math.max(t-e,c):f;if(a&&h===c&&f<=c)return!0;const b=zS(h,{min:e,max:t,minLimit:u,maxLimit:d},s.originalScaleLimits[n.id]);return o.min=b.min,o.max=b.max,s.updatedScaleLimits[n.id]=b,n.parse(b.min)!==n.min||n.parse(b.max)!==n.max}function jS(n,e,t,i){const a=Fg(n,e,t),s={min:n.min+a.min,max:n.max-a.max};return Pa(n,s,i,!0)}function VS(n,e,t,i){const a=RS(n,e,t);return Pa(n,a,i,!0)}function US(n,e,t,i){Pa(n,qS(n,e,t),i,!0)}const hv=n=>n===0||isNaN(n)?0:n<0?Math.min(Math.round(n),-1):Math.max(Math.round(n),1);function BS(n){const t=n.getLabels().length-1;n.min>0&&(n.min-=1),n.max<t&&(n.max+=1)}function HS(n,e,t,i){const a=Fg(n,e,t);n.min===n.max&&e<1&&BS(n);const s={min:n.min+hv(a.min),max:n.max-hv(a.max)};return Pa(n,s,i,!0)}function WS(n){return n.isHorizontal()?n.width:n.height}function YS(n,e,t){const a=n.getLabels().length-1;let{min:s,max:o}=n;const l=Math.max(o-s,1),c=Math.round(WS(n)/Math.max(l,10)),u=Math.round(Math.abs(e/c));let d;return e<-c?(o=Math.min(o+u,a),s=l===1?o:o-l,d=o===a):e>c&&(s=Math.max(0,s-u),o=l===1?s:s+l,d=s===0),Pa(n,{min:s,max:o},t)||d}const KS={second:500,minute:30*1e3,hour:1800*1e3,day:720*60*1e3,week:3.5*24*60*60*1e3,month:360*60*60*1e3,quarter:1440*60*60*1e3,year:4368*60*60*1e3};function qg(n,e,t,i=!1){const{min:a,max:s,options:o}=n,l=o.time&&o.time.round,c=KS[l]||0,u=n.getValueForPixel(n.getPixelForValue(a+c)-e),d=n.getValueForPixel(n.getPixelForValue(s+c)-e);return isNaN(u)||isNaN(d)?!0:Pa(n,{min:u,max:d},t,i?"pan":!1)}function vv(n,e,t){return qg(n,e,t,!0)}const Au={category:HS,default:jS,logarithmic:VS},Lu={default:US},Nu={category:YS,default:qg,logarithmic:vv,timeseries:vv};function ZS(n,e,t){const{id:i,options:{min:a,max:s}}=n;if(!e[i]||!t[i])return!0;const o=t[i];return o.min!==a||o.max!==s}function mv(n,e){qt(n,(t,i)=>{e[i]||delete n[i]})}function gs(n,e){const{scales:t}=n,{originalScaleLimits:i,updatedScaleLimits:a}=e;return qt(t,function(s){ZS(s,i,a)&&(i[s.id]={min:{scale:s.min,options:s.options.min},max:{scale:s.max,options:s.options.max}})}),mv(i,t),mv(a,t),i}function pv(n,e,t,i){const a=Au[n.type]||Au.default;Mt(a,[n,e,t,i])}function gv(n,e,t,i){const a=Lu[n.type]||Lu.default;Mt(a,[n,e,t,i])}function JS(n){const e=n.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Ad(n,e,t="none",i="api"){const{x:a=1,y:s=1,focalPoint:o=JS(n)}=typeof e=="number"?{x:e,y:e}:e,l=an(n),{options:{limits:c,zoom:u}}=l;gs(n,l);const d=a!==1,f=s!==1,h=Lg(u,o,n);qt(h||n.scales,function(b){b.isHorizontal()&&d?pv(b,a,o,c):!b.isHorizontal()&&f&&pv(b,s,o,c)}),n.update(t),Mt(u.onZoom,[{chart:n,trigger:i}])}function zg(n,e,t,i="none",a="api"){const s=an(n),{options:{limits:o,zoom:l}}=s,{mode:c="xy"}=l;gs(n,s);const u=Xr(c,"x",n),d=Xr(c,"y",n);qt(n.scales,function(f){f.isHorizontal()&&u?gv(f,e.x,t.x,o):!f.isHorizontal()&&d&&gv(f,e.y,t.y,o)}),n.update(i),Mt(l.onZoom,[{chart:n,trigger:a}])}function GS(n,e,t,i="none",a="api"){const s=an(n);gs(n,s);const o=n.scales[e];Pa(o,t,void 0,!0),n.update(i),Mt(s.options.zoom?.onZoom,[{chart:n,trigger:a}])}function XS(n,e="default"){const t=an(n),i=gs(n,t);qt(n.scales,function(a){const s=a.options;i[a.id]?(s.min=i[a.id].min.options,s.max=i[a.id].max.options):(delete s.min,delete s.max),delete t.updatedScaleLimits[a.id]}),n.update(e),Mt(t.options.zoom.onZoomComplete,[{chart:n}])}function QS(n,e){const t=n.originalScaleLimits[e];if(!t)return;const{min:i,max:a}=t;return Yt(a.options,a.scale)-Yt(i.options,i.scale)}function eT(n){const e=an(n);let t=1,i=1;return qt(n.scales,function(a){const s=QS(e,a.id);if(s){const o=Math.round(s/(a.max-a.min)*100)/100;t=Math.min(t,o),i=Math.max(i,o)}}),t<1?t:i}function bv(n,e,t,i){const{panDelta:a}=i,s=a[n.id]||0;Jr(s)===Jr(e)&&(e+=s);const o=Nu[n.type]||Nu.default;Mt(o,[n,e,t])?a[n.id]=0:a[n.id]=e}function jg(n,e,t,i="none"){const{x:a=0,y:s=0}=typeof e=="number"?{x:e,y:e}:e,o=an(n),{options:{pan:l,limits:c}}=o,{onPan:u}=l||{};gs(n,o);const d=a!==0,f=s!==0;qt(t||n.scales,function(h){h.isHorizontal()&&d?bv(h,a,c,o):!h.isHorizontal()&&f&&bv(h,s,c,o)}),n.update(i),Mt(u,[{chart:n}])}function Vg(n){const e=an(n);gs(n,e);const t={};for(const i of Object.keys(n.scales)){const{min:a,max:s}=e.originalScaleLimits[i]||{min:{},max:{}};t[i]={min:a.scale,max:s.scale}}return t}function tT(n){const e=an(n),t={};for(const i of Object.keys(n.scales))t[i]=e.updatedScaleLimits[i];return t}function nT(n){const e=Vg(n);for(const t of Object.keys(n.scales)){const{min:i,max:a}=e[t];if(i!==void 0&&n.scales[t].min!==i||a!==void 0&&n.scales[t].max!==a)return!0}return!1}function yv(n){const e=an(n);return e.panning||e.dragging}const _v=(n,e,t)=>Math.min(t,Math.max(e,n));function ai(n,e){const{handlers:t}=an(n),i=t[e];i&&i.target&&(i.target.removeEventListener(e,i),delete t[e])}function Us(n,e,t,i){const{handlers:a,options:s}=an(n),o=a[t];if(o&&o.target===e)return;ai(n,t),a[t]=c=>i(n,c,s),a[t].target=e;const l=t==="wheel"?!1:void 0;e.addEventListener(t,a[t],{passive:l})}function iT(n,e){const t=an(n);t.dragStart&&(t.dragging=!0,t.dragEnd=e,n.update("none"))}function rT(n,e){const t=an(n);!t.dragStart||e.key!=="Escape"||(ai(n,"keydown"),t.dragging=!1,t.dragStart=t.dragEnd=null,n.update("none"))}function Ru(n,e){if(n.target!==e.canvas){const t=e.canvas.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}return nr(n,e)}function Ug(n,e,t){const{onZoomStart:i,onZoomRejected:a}=t;if(i){const s=Ru(e,n);if(Mt(i,[{chart:n,event:e,point:s}])===!1)return Mt(a,[{chart:n,event:e}]),!1}}function aT(n,e){if(n.legend){const s=nr(e,n);if(ss(s,n.legend))return}const t=an(n),{pan:i,zoom:a={}}=t.options;if(e.button!==0||Ag(no(i),e)||Md(no(a.drag),e))return Mt(a.onZoomRejected,[{chart:n,event:e}]);Ug(n,e,a)!==!1&&(t.dragStart=e,Us(n,n.canvas.ownerDocument,"mousemove",iT),Us(n,window.document,"keydown",rT))}function sT({begin:n,end:e},t){let i=e.x-n.x,a=e.y-n.y;const s=Math.abs(i/a);s>t?i=Math.sign(i)*Math.abs(a*t):s<t&&(a=Math.sign(a)*Math.abs(i/t)),e.x=n.x+i,e.y=n.y+a}function xv(n,e,t,{min:i,max:a,prop:s}){n[i]=_v(Math.min(t.begin[s],t.end[s]),e[i],e[a]),n[a]=_v(Math.max(t.begin[s],t.end[s]),e[i],e[a])}function oT(n,e,t){const i={begin:Ru(e.dragStart,n),end:Ru(e.dragEnd,n)};if(t){const a=n.chartArea.width/n.chartArea.height;sT(i,a)}return i}function Bg(n,e,t,i){const a=Xr(e,"x",n),s=Xr(e,"y",n),{top:o,left:l,right:c,bottom:u,width:d,height:f}=n.chartArea,h={top:o,left:l,right:c,bottom:u},b=oT(n,t,i&&a&&s);a&&xv(h,n.chartArea,b,{min:"left",max:"right",prop:"x"}),s&&xv(h,n.chartArea,b,{min:"top",max:"bottom",prop:"y"});const v=h.right-h.left,g=h.bottom-h.top;return{...h,width:v,height:g,zoomX:a&&v?1+(d-v)/d:1,zoomY:s&&g?1+(f-g)/f:1}}function lT(n,e){const t=an(n);if(!t.dragStart)return;ai(n,"mousemove");const{mode:i,onZoomComplete:a,drag:{threshold:s=0,maintainAspectRatio:o}}=t.options.zoom,l=Bg(n,i,{dragStart:t.dragStart,dragEnd:e},o),c=Xr(i,"x",n)?l.width:0,u=Xr(i,"y",n)?l.height:0,d=Math.sqrt(c*c+u*u);if(t.dragStart=t.dragEnd=null,d<=s){t.dragging=!1,n.update("none");return}zg(n,{x:l.left,y:l.top},{x:l.right,y:l.bottom},"zoom","drag"),t.dragging=!1,t.filterNextClick=!0,Mt(a,[{chart:n}])}function cT(n,e,t){if(Md(no(t.wheel),e)){Mt(t.onZoomRejected,[{chart:n,event:e}]);return}if(Ug(n,e,t)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function uT(n,e){const{handlers:{onZoomComplete:t},options:{zoom:i}}=an(n);if(!cT(n,e,i))return;const a=e.target.getBoundingClientRect(),s=i.wheel.speed,o=e.deltaY>=0?2-1/(1-s):1+s,l={x:o,y:o,focalPoint:{x:e.clientX-a.left,y:e.clientY-a.top}};Ad(n,l,"zoom","wheel"),Mt(t,[{chart:n}])}function dT(n,e,t,i){t&&(an(n).handlers[e]=AS(()=>Mt(t,[{chart:n}]),i))}function fT(n,e){const t=n.canvas,{wheel:i,drag:a,onZoomComplete:s}=e.zoom;i.enabled?(Us(n,t,"wheel",uT),dT(n,"onZoomComplete",s,250)):ai(n,"wheel"),a.enabled?(Us(n,t,"mousedown",aT),Us(n,t.ownerDocument,"mouseup",lT)):(ai(n,"mousedown"),ai(n,"mousemove"),ai(n,"mouseup"),ai(n,"keydown"))}function hT(n){ai(n,"mousedown"),ai(n,"mousemove"),ai(n,"mouseup"),ai(n,"wheel"),ai(n,"click"),ai(n,"keydown")}function vT(n,e){return function(t,i){const{pan:a,zoom:s={}}=e.options;if(!a||!a.enabled)return!1;const o=i&&i.srcEvent;return o&&!e.panning&&i.pointerType==="mouse"&&(Md(no(a),o)||Ag(no(s.drag),o))?(Mt(a.onPanRejected,[{chart:n,event:i}]),!1):!0}}function mT(n,e){const t=Math.abs(n.clientX-e.clientX),i=Math.abs(n.clientY-e.clientY),a=t/i;let s,o;return a>.3&&a<1.7?s=o=!0:t>i?s=!0:o=!0,{x:s,y:o}}function Hg(n,e,t){if(e.scale){const{center:i,pointers:a}=t,s=1/e.scale*t.scale,o=t.target.getBoundingClientRect(),l=mT(a[0],a[1]),c=e.options.zoom.mode,u={x:l.x&&Xr(c,"x",n)?s:1,y:l.y&&Xr(c,"y",n)?s:1,focalPoint:{x:i.x-o.left,y:i.y-o.top}};Ad(n,u,"zoom","pinch"),e.scale=t.scale}}function pT(n,e,t){if(e.options.zoom.pinch.enabled){const i=nr(t,n);Mt(e.options.zoom.onZoomStart,[{chart:n,event:t,point:i}])===!1?(e.scale=null,Mt(e.options.zoom.onZoomRejected,[{chart:n,event:t}])):e.scale=1}}function gT(n,e,t){e.scale&&(Hg(n,e,t),e.scale=null,Mt(e.options.zoom.onZoomComplete,[{chart:n}]))}function Wg(n,e,t){const i=e.delta;i&&(e.panning=!0,jg(n,{x:t.deltaX-i.x,y:t.deltaY-i.y},e.panScales),e.delta={x:t.deltaX,y:t.deltaY})}function bT(n,e,t){const{enabled:i,onPanStart:a,onPanRejected:s}=e.options.pan;if(!i)return;const o=t.target.getBoundingClientRect(),l={x:t.center.x-o.left,y:t.center.y-o.top};if(Mt(a,[{chart:n,event:t,point:l}])===!1)return Mt(s,[{chart:n,event:t}]);e.panScales=Lg(e.options.pan,l,n),e.delta={x:0,y:0},Wg(n,e,t)}function yT(n,e){e.delta=null,e.panning&&(e.panning=!1,e.filterNextClick=!0,Mt(e.options.pan.onPanComplete,[{chart:n}]))}const Fu=new WeakMap;function wv(n,e){const t=an(n),i=n.canvas,{pan:a,zoom:s}=e,o=new Vs.Manager(i);s&&s.pinch.enabled&&(o.add(new Vs.Pinch),o.on("pinchstart",l=>pT(n,t,l)),o.on("pinch",l=>Hg(n,t,l)),o.on("pinchend",l=>gT(n,t,l))),a&&a.enabled&&(o.add(new Vs.Pan({threshold:a.threshold,enable:vT(n,t)})),o.on("panstart",l=>bT(n,t,l)),o.on("panmove",l=>Wg(n,t,l)),o.on("panend",()=>yT(n,t))),Fu.set(n,o)}function kv(n){const e=Fu.get(n);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),Fu.delete(n))}function _T(n,e){const{pan:t,zoom:i}=n,{pan:a,zoom:s}=e;return i?.zoom?.pinch?.enabled!==s?.zoom?.pinch?.enabled||t?.enabled!==a?.enabled||t?.threshold!==a?.threshold}var xT="2.2.0";function Ko(n,e,t){const i=t.zoom.drag,{dragStart:a,dragEnd:s}=an(n);if(i.drawTime!==e||!s)return;const{left:o,top:l,width:c,height:u}=Bg(n,t.zoom.mode,{dragStart:a,dragEnd:s},i.maintainAspectRatio),d=n.ctx;d.save(),d.beginPath(),d.fillStyle=i.backgroundColor||"rgba(225,225,225,0.3)",d.fillRect(o,l,c,u),i.borderWidth>0&&(d.lineWidth=i.borderWidth,d.strokeStyle=i.borderColor||"rgba(225,225,225)",d.strokeRect(o,l,c,u)),d.restore()}var wT={id:"zoom",version:xT,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(n,e,t){const i=an(n);i.options=t,Object.prototype.hasOwnProperty.call(t.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(t.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(t.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),Vs&&wv(n,t),n.pan=(a,s,o)=>jg(n,a,s,o),n.zoom=(a,s)=>Ad(n,a,s),n.zoomRect=(a,s,o)=>zg(n,a,s,o),n.zoomScale=(a,s,o)=>GS(n,a,s,o),n.resetZoom=a=>XS(n,a),n.getZoomLevel=()=>eT(n),n.getInitialScaleBounds=()=>Vg(n),n.getZoomedScaleBounds=()=>tT(n),n.isZoomedOrPanned=()=>nT(n),n.isZoomingOrPanning=()=>yv(n)},beforeEvent(n,{event:e}){if(yv(n))return!1;if(e.type==="click"||e.type==="mouseup"){const t=an(n);if(t.filterNextClick)return t.filterNextClick=!1,!1}},beforeUpdate:function(n,e,t){const i=an(n),a=i.options;i.options=t,_T(a,t)&&(kv(n),wv(n,t)),fT(n,t)},beforeDatasetsDraw(n,e,t){Ko(n,"beforeDatasetsDraw",t)},afterDatasetsDraw(n,e,t){Ko(n,"afterDatasetsDraw",t)},beforeDraw(n,e,t){Ko(n,"beforeDraw",t)},afterDraw(n,e,t){Ko(n,"afterDraw",t)},stop:function(n){hT(n),Vs&&kv(n),NS(n)},panFunctions:Nu,zoomFunctions:Au,zoomRectFunctions:Lu},kT=S('<div class="chart-loader loader svelte-kfnurg"></div>'),ST=S('<button type="button" class="btn btn-secondary btn-sm btn-chart-zoom svelte-kfnurg">Reset zoom</button>'),TT=S('<div><div> </div> <!> <canvas class="chart-canvas svelte-kfnurg"></canvas> <!></div>');function $T(n,e){Ue(e,!1);let t=ee(e,"filter",8,""),i=ee(e,"zoom",28,()=>({})),a=ee(e,"presets",8,""),s=P(),o=P(),l=P([]),c=P(0),u=P(!1),d=P(!1);async function f(){_(u,!0);const I=[a(),F.normalizeLogsFilter(t())].filter(Boolean).map(D=>"("+D+")").join("&&");return Le.logs.getStats({filter:I}).then(D=>{h(),D=F.toArray(D);for(let A of D)r(l).push({x:new Date(A.date),y:A.total}),_(c,r(c)+A.total)}).catch(D=>{D?.isAbort||(h(),console.warn(D),Le.error(D,!I||D?.status!=400))}).finally(()=>{_(u,!1)})}function h(){_(l,[]),_(c,0)}function b(){r(o)?.resetZoom()}un(()=>(ll.register(Ql,Z2,Dk,$S,Pu,mS,kS),ll.register(wT),_(o,new ll(r(s),{type:"line",data:{datasets:[{label:"Total requests",data:r(l),borderColor:"#e34562",pointBackgroundColor:"#e34562",backgroundColor:"rgb(239,69,101,0.05)",borderWidth:2,pointRadius:1,pointBorderWidth:0,fill:!0}]},options:{resizeDelay:250,maintainAspectRatio:!1,animation:!1,interaction:{intersect:!1,mode:"index"},scales:{y:{beginAtZero:!0,grid:{color:"#edf0f3"},border:{color:"#e4e9ec"},ticks:{precision:0,maxTicksLimit:4,autoSkip:!0,color:"#666f75"}},x:{type:"time",time:{unit:"hour",tooltipFormat:"DD h a"},grid:{color:I=>I.tick?.major?"#edf0f3":""},color:"#e4e9ec",ticks:{maxTicksLimit:15,autoSkip:!0,maxRotation:0,major:{enabled:!0},color:I=>I.tick?.major?"#16161a":"#666f75"}}},plugins:{legend:{display:!1},zoom:{enabled:!0,zoom:{mode:"x",pinch:{enabled:!0},drag:{enabled:!0,backgroundColor:"rgba(255, 99, 132, 0.2)",borderWidth:0,threshold:10},limits:{x:{minRange:1e8},y:{minRange:1e8}},onZoomComplete:({chart:I})=>{_(d,I.isZoomedOrPanned()),r(d)?(i(i().min=F.formatToUTCDate(I.scales.x.min,"yyyy-MM-dd HH")+":00:00.000Z",!0),i(i().max=F.formatToUTCDate(I.scales.x.max,"yyyy-MM-dd HH")+":59:59.999Z",!0)):(i().min||i().max)&&i({})}}}}}})),()=>r(o)?.destroy())),ne(()=>(R(t()),R(a())),()=>{(typeof t()<"u"||typeof a()<"u")&&f()}),ne(()=>(r(l),r(o)),()=>{typeof r(l)<"u"&&r(o)&&(ut(o,r(o).data.datasets[0].data=r(l)),r(o).update())}),ft(),He();var v=TT();let g;var m=T(v);let k;var x=T(m),C=y(m,2);{var O=I=>{var D=kT();Et(3,D,()=>Fn,()=>({duration:150})),p(I,D)};G(C,I=>{r(u)&&I(O)})}var $=y(C,2);mt($,I=>_(s,I),()=>r(s));var E=y($,2);{var w=I=>{var D=ST();re("click",D,b),p(I,D)};G(E,I=>{r(d)&&I(w)})}return z((I,D)=>{g=Re(v,1,"chart-wrapper svelte-kfnurg",null,g,I),k=Re(m,1,"total-logs entrance-right svelte-kfnurg",null,k,D),Te(x,`Found ${r(c)??""}
        ${r(c)==1?"log":"logs"}`)},[()=>({loading:r(u)}),()=>({hidden:r(u)})]),re("dblclick",$,b),p(n,v),_t(e,"load",f),Be({load:f})}var IT=S('<div><code class="svelte-s3jkbp"><!></code></div>');function qu(n,e){Ue(e,!1);let t=ee(e,"content",8,""),i=ee(e,"language",8,"javascript"),a=ee(e,"class",8,""),s=P("");function o(d){return d=typeof d=="string"?d:"",d=Prism.plugins.NormalizeWhitespace.normalize(d,{"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0}),Prism.highlight(d,Prism.languages[i()]||Prism.languages.javascript,i())}ne(()=>R(t()),()=>{typeof Prism<"u"&&t()&&_(s,o(t()))}),ft();var l=IT(),c=T(l),u=T(c);_y(u,()=>r(s)),z(()=>Re(l,1,`code-wrapper prism-light ${a()??""}`,"svelte-s3jkbp")),p(n,l),Be()}var CT=S('<i tabindex="-1" role="button"></i>');function rr(n,e){Ue(e,!1);let t=ee(e,"value",8,""),i=ee(e,"tooltip",8,"Copy"),a=ee(e,"idleClasses",8,"ri-file-copy-line txt-sm link-hint"),s=ee(e,"successClasses",8,"ri-check-line txt-sm txt-success"),o=ee(e,"successDuration",8,500),l=P();function c(){F.isEmpty(t())||(F.copyToClipboard(t()),clearTimeout(r(l)),_(l,setTimeout(()=>{clearTimeout(r(l)),_(l,null)},o())))}un(()=>()=>{r(l)&&clearTimeout(r(l))}),He();var u=CT();W(u,"aria-label","Copy to clipboard"),Qe(u,(d,f)=>dt?.(d,f),()=>r(l)?void 0:i()),Rt(()=>re("click",u,hn(c))),z(()=>Re(u,1,$n(r(l)?s():a()))),p(n,u),Be()}var ET=S('<div class="block txt-center"><span class="loader"></span></div>'),OT=S('<span class="txt"> </span> <div class="copy-icon-wrapper svelte-1c23bpt"><!></div>',1),DT=S('<span class="txt txt-hint">N/A</span>'),PT=S('<tr class="svelte-1c23bpt"><td class="min-width txt-hint txt-bold">message</td><td class="svelte-1c23bpt"><!></td></tr>'),MT=S('<span class="txt txt-hint">N/A</span>'),AT=S('<span class="label label-danger log-error-label svelte-1c23bpt"> </span>'),LT=S('<span class="txt"> </span>'),NT=S('<div class="copy-icon-wrapper svelte-1c23bpt"><!></div>'),RT=S('<tr class="svelte-1c23bpt"><td> </td><td class="svelte-1c23bpt"><!> <!></td></tr>'),FT=S('<table class="table-border svelte-1c23bpt"><tbody class="svelte-1c23bpt"><tr class="svelte-1c23bpt"><td class="min-width txt-hint txt-bold">id</td><td class="svelte-1c23bpt"><span class="txt"> </span> <div class="copy-icon-wrapper svelte-1c23bpt"><!></div></td></tr><tr class="svelte-1c23bpt"><td class="min-width txt-hint txt-bold">level</td><td class="svelte-1c23bpt"><!> <div class="copy-icon-wrapper svelte-1c23bpt"><!></div></td></tr><tr class="svelte-1c23bpt"><td class="min-width txt-hint txt-bold">created</td><td class="svelte-1c23bpt"><!> <div class="copy-icon-wrapper svelte-1c23bpt"><!></div></td></tr><!><!></tbody></table>'),qT=S("<h4>Log details</h4>"),zT=S('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button> <button type="button" class="btn btn-primary"><i class="ri-download-line"></i> <span class="txt">Download as JSON</span></button>',1);function jT(n,e){Ue(e,!1);const t=P(),i="log_view",a=zt();let s=P(),o=P({}),l=P(!1);function c(m){return d(m).then(k=>{_(o,k),v()}),r(s)?.show()}function u(){return Le.cancelRequest(i),r(s)?.hide()}async function d(m){if(m&&typeof m!="string")return _(l,!1),m;_(l,!0);let k={};try{k=await Le.logs.getOne(m,{requestKey:i})}catch(x){x.isAbort||(u(),console.warn("resolveModel:",x),ur(`Unable to load log with id "${m}"`))}return _(l,!1),k}const f=["execTime","type","auth","authId","status","method","url","referer","remoteIP","userIP","userAgent","error","details"];function h(m){if(!m)return[];let k=[];for(let C of f)typeof m[C]<"u"&&k.push(C);const x=Object.keys(m);for(let C of x)k.includes(C)||k.push(C);return k}function b(){F.downloadJson(r(o),"log_"+r(o).created.replaceAll(/[-:\. ]/gi,"")+".json")}function v(){a("show",r(o))}function g(){a("hide",r(o)),_(o,{})}return ne(()=>r(o),()=>{_(t,r(o).data?.type=="request")}),ft(),He(),mt(pn(n,{class:"overlay-panel-lg log-panel",$$events:{hide:g},children:(m,k)=>{var x=tt(),C=q(x);{var O=E=>{var w=ET();p(E,w)},$=E=>{var w=tt(),I=q(w);{var D=A=>{var L=FT(),N=T(L),H=T(N),j=y(T(H)),V=T(j),U=T(V),B=y(V,2),J=T(B);rr(J,{get value(){return r(o),M(()=>r(o).id)}});var Q=y(H),oe=y(T(Q)),de=T(oe);Yp(de,{get level(){return r(o),M(()=>r(o).level)}});var ge=y(de,2),pe=T(ge);rr(pe,{get value(){return r(o),M(()=>r(o).level)}});var xe=y(Q),ve=y(T(xe)),Ee=T(ve);Wp(Ee,{get date(){return r(o),M(()=>r(o).created)}});var ce=y(Ee,2),he=T(ce);rr(he,{get value(){return r(o),M(()=>r(o).created)}});var be=y(xe);{var we=me=>{var ae=PT(),te=y(T(ae)),se=T(te);{var ye=Ie=>{var Ne=OT(),ze=q(Ne),Me=T(ze),Ge=y(ze,2),_e=T(Ge);rr(_e,{get value(){return r(o),M(()=>r(o).message)}}),z(()=>Te(Me,(r(o),M(()=>r(o).message)))),p(Ie,Ne)},ke=Ie=>{var Ne=DT();p(Ie,Ne)};G(se,Ie=>{r(o),M(()=>r(o).message)?Ie(ye):Ie(ke,!1)})}p(me,ae)};G(be,me=>{r(t)||me(we)})}var ue=y(be);bt(ue,1,()=>(r(o),M(()=>h(r(o).data))),At,(me,ae)=>{const te=ie(()=>(r(o),r(ae),M(()=>r(o).data[r(ae)]))),se=ie(()=>(R(F),R(r(te)),M(()=>F.isEmpty(r(te))))),ye=ie(()=>!r(se)&&r(te)!==null&&typeof r(te)=="object");var ke=RT(),Ie=T(ke);let Ne;var ze=T(Ie),Me=y(Ie),Ge=T(Me);{var _e=je=>{var nt=MT();p(je,nt)},Oe=je=>{var nt=tt(),We=q(nt);{var Ye=qe=>{{let Ke=ie(()=>(R(r(te)),M(()=>JSON.stringify(r(te),null,2))));qu(qe,{get content(){return r(Ke)}})}},De=qe=>{var Ke=tt(),ct=q(Ke);{var Ve=et=>{var Je=AT(),ht=T(Je);z(()=>Te(ht,r(te))),p(et,Je)},Xe=et=>{var Je=tt(),ht=q(Je);{var gt=$e=>{qu($e,{get content(){return r(te)},language:"html"})},it=$e=>{var vt=LT(),Y=T(vt);z(()=>Te(Y,`${r(te)??""}${r(t)&&r(ae)=="execTime"?"ms":""}`)),p($e,vt)};G(ht,$e=>{r(ae)=="details"?$e(gt):$e(it,!1)},!0)}p(et,Je)};G(ct,et=>{r(ae)=="error"?et(Ve):et(Xe,!1)},!0)}p(qe,Ke)};G(We,qe=>{r(ye)?qe(Ye):qe(De,!1)},!0)}p(je,nt)};G(Ge,je=>{r(se)?je(_e):je(Oe,!1)})}var Fe=y(Ge,2);{var at=je=>{var nt=NT(),We=T(nt);rr(We,{get value(){return r(te)}}),p(je,nt)};G(Fe,je=>{r(se)||je(at)})}z(je=>{Ne=Re(Ie,1,"min-width txt-hint txt-bold",null,Ne,je),Te(ze,`data.${r(ae)??""}`)},[()=>({"v-align-top":r(ye)})]),p(me,ke)}),z(()=>Te(U,(r(o),M(()=>r(o).id)))),p(A,L)};G(I,A=>{r(o),M(()=>r(o)?.id)&&A(D)},!0)}p(E,w)};G(C,E=>{r(l)?E(O):E($,!1)})}p(m,x)},$$slots:{default:!0,header:(m,k)=>{var x=qT();p(m,x)},footer:(m,k)=>{var x=zT(),C=q(x),O=y(C,2);z(()=>O.disabled=r(l)),re("click",C,()=>u()),re("click",O,()=>b()),p(m,x)}},$$legacy:!0}),m=>_(s,m),()=>r(s)),_t(e,"show",c),_t(e,"hide",u),Be({show:c,hide:u})}var VT=S('<code class="txt-xs"> </code>'),UT=S('<div>Default log levels: <div class="inline-flex flex-gap-5"></div></div>');function Yg(n,e){let t=ee(e,"class",8,"");var i=UT(),a=y(T(i));bt(a,5,()=>Pp,At,(s,o)=>{var l=VT(),c=T(l);z(()=>Te(c,`${r(o),M(()=>r(o).level)??""}:${r(o),M(()=>r(o).label)??""}`)),p(s,l)}),z(()=>Re(i,1,$n(t()))),p(n,i)}var BT=S('<div class="block txt-center"><div class="loader"></div></div>'),HT=S('<label>Max days retention</label> <input type="number" required/> <div class="help-block">Set to <code>0</code> to disable logs persistence.</div>',1),WT=S('<label>Min log level</label> <input type="number" required min="-100" max="100"/> <div class="help-block"><p>Logs with level below the minimum will be ignored.</p> <!></div>',1),YT=S('<input type="checkbox"/> <label>Enable IP logging</label>',1),KT=S('<input type="checkbox"/> <label>Enable Auth Id logging</label>',1),ZT=S('<form class="grid" autocomplete="off"><!> <!> <!> <!></form>'),JT=S("<h4>Logs settings</h4>"),GT=S('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Save changes</span></button>',1);function XT(n,e){Ue(e,!1);const t=P(),i=P(),a=zt(),s="logs_settings_"+F.randomString(3);let o=P(),l=P(!1),c=P(!1),u=P({}),d=P({});function f(){return b(),v(),r(o)?.show()}function h(){return r(o)?.hide()}function b(){rn(),_(u,{}),_(d,JSON.parse(JSON.stringify(r(u)||{})))}async function v(){_(c,!0);try{const k=await Le.settings.getAll()||{};m(k)}catch(k){Le.error(k)}_(c,!1)}async function g(){if(r(i)){_(l,!0);try{const k=await Le.settings.update(F.filterRedactedProps(r(d)));m(k),_(l,!1),h(),vn("Successfully saved logs settings."),a("save",k)}catch(k){_(l,!1),Le.error(k)}}}function m(k={}){_(d,{logs:k?.logs||{}}),_(u,JSON.parse(JSON.stringify(r(d))))}return ne(()=>r(u),()=>{_(t,JSON.stringify(r(u)))}),ne(()=>(r(t),r(d)),()=>{_(i,r(t)!=JSON.stringify(r(d)))}),ft(),He(),mt(pn(n,{popup:!0,class:"superuser-panel",beforeHide:()=>!r(l),$$events:{hide(k){ot.call(this,e,k)},show(k){ot.call(this,e,k)}},children:(k,x)=>{var C=tt(),O=q(C);{var $=w=>{var I=BT();p(w,I)},E=w=>{var I=ZT(),D=T(I);Pe(D,{class:"form-field required",name:"logs.maxDays",children:Ce,$$slots:{default:(H,j)=>{const V=ie(()=>j.uniqueId);var U=HT(),B=q(U),J=y(B,2);z(()=>{W(B,"for",r(V)),W(J,"id",r(V))}),xt(J,()=>r(d).logs.maxDays,Q=>ut(d,r(d).logs.maxDays=Q)),p(H,U)}}});var A=y(D,2);Pe(A,{class:"form-field",name:"logs.minLevel",children:Ce,$$slots:{default:(H,j)=>{const V=ie(()=>j.uniqueId);var U=WT(),B=q(U),J=y(B,2),Q=y(J,2),oe=y(T(Q),2);Yg(oe,{}),z(()=>W(B,"for",r(V))),xt(J,()=>r(d).logs.minLevel,de=>ut(d,r(d).logs.minLevel=de)),p(H,U)}}});var L=y(A,2);Pe(L,{class:"form-field form-field-toggle",name:"logs.logIP",children:Ce,$$slots:{default:(H,j)=>{const V=ie(()=>j.uniqueId);var U=YT(),B=q(U),J=y(B,2);z(()=>{W(B,"id",r(V)),W(J,"for",r(V))}),Qt(B,()=>r(d).logs.logIP,Q=>ut(d,r(d).logs.logIP=Q)),p(H,U)}}});var N=y(L,2);Pe(N,{class:"form-field form-field-toggle",name:"logs.logAuthId",children:Ce,$$slots:{default:(H,j)=>{const V=ie(()=>j.uniqueId);var U=KT(),B=q(U),J=y(B,2);z(()=>{W(B,"id",r(V)),W(J,"for",r(V))}),Qt(B,()=>r(d).logs.logAuthId,Q=>ut(d,r(d).logs.logAuthId=Q)),p(H,U)}}}),z(()=>W(I,"id",s)),re("submit",I,Ct(g)),p(w,I)};G(O,w=>{r(c)?w($):w(E,!1)})}p(k,C)},$$slots:{default:!0,header:(k,x)=>{var C=JT();p(k,C)},footer:(k,x)=>{var C=GT(),O=q(C),$=y(O,2);let E;z(w=>{O.disabled=r(l),W($,"form",s),E=Re($,1,"btn btn-expanded",null,E,w),$.disabled=!r(i)||r(l)},[()=>({"btn-loading":r(l)})]),re("click",O,h),p(k,C)}},$$legacy:!0}),k=>_(o,k),()=>r(o)),_t(e,"show",f),_t(e,"hide",h),Be({show:f,hide:h})}var QT=S('<input type="checkbox"/> <label>Include requests by superusers</label>',1),e$=S('<div class="page-header-wrapper m-b-0"><header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item"> </div></nav> <button type="button" aria-label="Logs settings" class="btn btn-transparent btn-circle"><i class="ri-settings-4-line"></i></button> <!> <div class="flex-fill"></div> <div class="inline-flex"><!></div></header> <!> <!> <!></div> <!>',1),t$=S("<!> <!> <!>",1);function n$(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(In,"$pageTitle",t),s=()=>It(gd,"$querystring",t),o=P();Zn(In,"Logs");const l="logId",c="superuserRequests",u="superuserLogRequests",d=new URLSearchParams(s());let f=P(),h=P(),b=P(1),v=P(d.get("filter")||""),g=P({}),m=P((d.get(c)||window.localStorage?.getItem(u))<<0),k=P(r(m));function x(){_r(b)}function C(I={}){let D={};D.filter=r(v)||null,D[c]=r(m)<<0||null,F.replaceHashQueryParams(Object.assign(D,I))}ne(()=>r(f),()=>{d.get(l)&&r(f)&&r(f).show(d.get(l))}),ne(()=>r(m),()=>{_(o,r(m)?"":'data.auth!="_superusers"')}),ne(()=>(r(k),r(m)),()=>{r(k)!=r(m)&&(_(k,r(m)),window.localStorage?.setItem(u,r(m)<<0),C())}),ne(()=>r(v),()=>{typeof r(v)<"u"&&C()}),ft(),He();var O=t$(),$=q(O);Ci($,{children:(I,D)=>{var A=e$(),L=q(A),N=T(L),H=T(N),j=T(H),V=T(j),U=y(H,2);Qe(U,(xe,ve)=>dt?.(xe,ve),()=>({text:"Logs settings",position:"right"})),Rt(()=>re("click",U,()=>r(h)?.show()));var B=y(U,2);Jl(B,{$$events:{refresh:()=>x()}});var J=y(B,4),Q=T(J);Pe(Q,{class:"form-field form-field-toggle m-0",children:Ce,$$slots:{default:(xe,ve)=>{const Ee=ie(()=>ve.uniqueId);var ce=QT(),he=q(ce),be=y(he,2);z(()=>{W(he,"id",r(Ee)),W(be,"for",r(Ee))}),Qt(he,()=>r(m),we=>_(m,we)),p(xe,ce)}}});var oe=y(N,2);Zl(oe,{get value(){return r(v)},placeholder:"Search term or filter like `level > 0 && data.auth = 'guest'`",extraAutocompleteKeys:["level","message","data."],$$events:{submit:xe=>_(v,xe.detail)}});var de=y(oe,2);Yg(de,{class:"block txt-sm txt-hint m-t-xs m-b-base"});var ge=y(de,2);Jd(ge,()=>r(b),xe=>{$T(xe,{get filter(){return r(v)},get presets(){return r(o)},get zoom(){return r(g)},set zoom(ve){_(g,ve)},$$legacy:!0})});var pe=y(L,2);Jd(pe,()=>r(b),xe=>{y0(xe,{get presets(){return r(o)},get filter(){return r(v)},set filter(ve){_(v,ve)},get zoom(){return r(g)},set zoom(ve){_(g,ve)},$$events:{select:ve=>r(f)?.show(ve?.detail)},$$legacy:!0})}),z(()=>Te(V,a())),p(I,A)},$$slots:{default:!0}});var E=y($,2);mt(jT(E,{$$events:{show:I=>{let D={};D[l]=I.detail?.id||null,F.replaceHashQueryParams(D)},hide:()=>{let I={};I[l]=null,F.replaceHashQueryParams(I)}},$$legacy:!0}),I=>_(f,I),()=>r(f));var w=y(E,2);mt(XT(w,{$$events:{save:x},$$legacy:!0}),I=>_(h,I),()=>r(h)),p(n,O),Be(),i()}var i$=S('<hr class="m-t-sm m-b-sm"/>'),r$=S('<div class="sidebar-item disabled"> </div>'),a$=S('<button type="button"> </button>'),s$=S("<!> <!>",1),o$=S('<div class="docs-content-wrapper"><aside><nav class="sidebar-content"></nav></aside> <div class="docs-content"></div></div>'),l$=S('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button>');function c$(n,e){Ue(e,!1);const t={list:{label:"List/Search",component:Ut(()=>import("./ListApiDocs-CdCDoLh_.js"),__vite__mapDeps([2,3,4]),import.meta.url)},view:{label:"View",component:Ut(()=>import("./ViewApiDocs-BoPWMQQq.js"),__vite__mapDeps([5,3]),import.meta.url)},create:{label:"Create",component:Ut(()=>import("./CreateApiDocs-B-p1CnhH.js"),__vite__mapDeps([6,3]),import.meta.url)},update:{label:"Update",component:Ut(()=>import("./UpdateApiDocs-ebrK1J7G.js"),__vite__mapDeps([7,3]),import.meta.url)},delete:{label:"Delete",component:Ut(()=>import("./DeleteApiDocs-B_HUN5DF.js"),[],import.meta.url)},realtime:{label:"Realtime",component:Ut(()=>import("./RealtimeApiDocs-D1wJsGMN.js"),[],import.meta.url)},batch:{label:"Batch",component:Ut(()=>import("./BatchApiDocs-tyHXJmq3.js"),[],import.meta.url)}},i={"list-auth-methods":{label:"List auth methods",component:Ut(()=>import("./AuthMethodsDocs-CixnZU0R.js"),__vite__mapDeps([8,3]),import.meta.url)},"auth-with-password":{label:"Auth with password",component:Ut(()=>import("./AuthWithPasswordDocs-C5Dr5woV.js"),__vite__mapDeps([9,3]),import.meta.url)},"auth-with-oauth2":{label:"Auth with OAuth2",component:Ut(()=>import("./AuthWithOAuth2Docs-DvdMkKQ1.js"),__vite__mapDeps([10,3]),import.meta.url)},"auth-with-otp":{label:"Auth with OTP",component:Ut(()=>import("./AuthWithOtpDocs-BltZ7zxU.js"),__vite__mapDeps([11,3]),import.meta.url)},refresh:{label:"Auth refresh",component:Ut(()=>import("./AuthRefreshDocs-C_m4VxnQ.js"),__vite__mapDeps([12,3]),import.meta.url)},verification:{label:"Verification",component:Ut(()=>import("./VerificationDocs-Dbgx4e8M.js"),[],import.meta.url)},"password-reset":{label:"Password reset",component:Ut(()=>import("./PasswordResetDocs-3gnYwMSK.js"),[],import.meta.url)},"email-change":{label:"Email change",component:Ut(()=>import("./EmailChangeDocs-CVejj7_v.js"),[],import.meta.url)}};let a=P(),s=P({}),o=P(),l=P([]);r(l).length&&_(o,Object.keys(r(l))[0]);function c(f){return _(s,f),d(Object.keys(r(l))[0]),r(a)?.show()}function u(){return r(a)?.hide()}function d(f){_(o,f)}return ne(()=>(r(s),r(l)),()=>{r(s).type==="auth"?(_(l,Object.assign({},t,i)),ut(l,r(l)["auth-with-password"].disabled=!r(s).passwordAuth.enabled),ut(l,r(l)["auth-with-oauth2"].disabled=!r(s).oauth2.enabled),ut(l,r(l)["auth-with-otp"].disabled=!r(s).otp.enabled)):r(s).type==="view"?(_(l,Object.assign({},t)),delete r(l).create,delete r(l).update,delete r(l).delete,delete r(l).realtime,delete r(l).batch):_(l,Object.assign({},t))}),ft(),He(),mt(pn(n,{class:"docs-panel",$$events:{hide(f){ot.call(this,e,f)},show(f){ot.call(this,e,f)}},children:(f,h)=>{var b=o$(),v=T(b);let g;var m=T(v);bt(m,7,()=>(r(l),M(()=>Object.entries(r(l)))),([x,C])=>x,(x,C,O)=>{var $=ga(()=>Ya(r(C),2));let E=()=>r($)[0],w=()=>r($)[1];var I=s$(),D=q(I);{var A=j=>{var V=i$();p(j,V)};G(D,j=>{R(r(O)),M(()=>r(O)===Object.keys(t).length)&&j(A)})}var L=y(D,2);{var N=j=>{var V=r$(),U=T(V);Qe(V,(B,J)=>dt?.(B,J),()=>({position:"left",text:"Not enabled for the collection"})),z(()=>Te(U,(w(),M(()=>w().label)))),p(j,V)},H=j=>{var V=a$();let U;var B=T(V);z(J=>{U=Re(V,1,"sidebar-item",null,U,J),Te(B,(w(),M(()=>w().label)))},[()=>({active:r(o)===E()})]),re("click",V,()=>d(E())),p(j,V)};G(L,j=>{w(),M(()=>w().disabled)?j(N):j(H,!1)})}p(x,I)});var k=y(v,2);bt(k,5,()=>(r(l),M(()=>Object.entries(r(l)))),([x,C])=>x,(x,C)=>{var O=ga(()=>Ya(r(C),2));let $=()=>r(O)[0],E=()=>r(O)[1];var w=tt(),I=q(w);{var D=A=>{var L=tt(),N=q(L);gy(N,()=>(E(),M(()=>E().component)),null,(H,j)=>{var V=ie(()=>{var{default:B}=r(j);return{TabComponent:B}}),U=ie(()=>r(V).TabComponent);r(U)(H,{get collection(){return r(s)}})}),p(A,L)};G(I,A=>{r(o)===$()&&A(D)})}p(x,w)}),z(x=>g=Re(v,1,"docs-sidebar",null,g,x),[()=>({compact:r(s)?.type==="auth"})]),p(f,b)},$$slots:{default:!0,footer:(f,h)=>{var b=l$();re("click",b,()=>u()),p(f,b)}},$$legacy:!0}),f=>_(a,f),()=>r(a)),_t(e,"show",c),_t(e,"hide",u),_t(e,"changeTab",d),Be({show:c,hide:u,changeTab:d})}var u$=S('<div class="accordion-content"><!></div>'),d$=S('<div><button type="button"><!></button> <!></div>');function Dr(n,e){Ue(e,!1);const t=zt();let i=P(),a=P(),s=ee(e,"class",8,""),o=ee(e,"draggable",8,!1),l=ee(e,"active",12,!1),c=ee(e,"interactive",8,!0),u=ee(e,"single",8,!1),d=P(!1);function f(){return!!l()}function h(){g(),l(!0),t("expand")}function b(){l(!1),clearTimeout(r(a)),t("collapse")}function v(){t("toggle"),l()?b():h()}function g(){if(u()&&r(i).closest(".accordions")){const w=r(i).closest(".accordions").querySelectorAll(".accordion.active .accordion-header.interactive");for(const I of w)I.click()}}un(()=>()=>clearTimeout(r(a))),ne(()=>(R(l()),r(a),r(i)),()=>{l()&&(clearTimeout(r(a)),_(a,setTimeout(()=>{r(i)?.scrollIntoViewIfNeeded?r(i).scrollIntoViewIfNeeded():r(i)?.scrollIntoView&&r(i).scrollIntoView({behavior:"smooth",block:"nearest"})},200)))}),ft(),He();var m=d$();let k;var x=T(m);let C;var O=T(x);Gt(O,e,"header",{get active(){return l()}},null);var $=y(x,2);{var E=w=>{var I=u$(),D=T(I);Gt(D,e,"default",{},null),Et(3,I,()=>mn,()=>({delay:10,duration:150})),p(w,I)};G($,w=>{l()&&w(E)})}return mt(m,w=>_(i,w),()=>r(i)),z((w,I)=>{k=Re(m,1,`accordion ${r(d)?"drag-over":""} ${s()??""}`,null,k,w),C=Re(x,1,"accordion-header",null,C,I),W(x,"draggable",o()),W(x,"aria-expanded",l())},[()=>({active:l()}),()=>({interactive:c()})]),re("click",x,Ct(()=>c()&&v())),re("drop",x,Ct(w=>{o()&&(_(d,!1),g(),t("drop",w))})),re("dragstart",x,w=>o()&&t("dragstart",w)),re("dragenter",x,w=>{o()&&(_(d,!0),t("dragenter",w))}),re("dragleave",x,w=>{o()&&(_(d,!1),t("dragleave",w))}),re("dragover",x,Ct(function(w){ot.call(this,e,w)})),p(n,m),_t(e,"isExpanded",f),_t(e,"expand",h),_t(e,"collapse",b),_t(e,"toggle",v),_t(e,"collapseSiblings",g),Be({isExpanded:f,expand:h,collapse:b,toggle:v,collapseSiblings:g})}let Sv;var f$=S('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),h$=S('<div class="help-block">Available placeholder parameters: <!></div>'),v$=S('<label>Subject</label> <input type="text" spellcheck="false" required/> <!>',1),m$=S('<textarea class="txt-mono" spellcheck="false" rows="14" required></textarea>'),p$=S('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),g$=S('<div class="help-block">Available placeholder parameters: <!></div>'),b$=S("<label>Body (HTML)</label> <!> <!>",1),y$=S("<!> <!>",1),_$=S('<i class="ri-error-warning-fill txt-danger"></i>'),x$=S('<div class="inline-flex"><i class="ri-draft-line"></i> <span class="txt"> </span></div> <div class="flex-fill"></div> <!>',1);function w$(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["expand","collapse","collapseSiblings","key","title","config","placeholders"]);Ue(e,!1);const[a,s]=Lt(),o=()=>It(jn,"$errors",a),l=P();let c=ee(e,"key",8),u=ee(e,"title",8),d=ee(e,"config",28,()=>({})),f=ee(e,"placeholders",24,()=>[]),h=P(),b=P(Sv),v=P(!1);function g(){r(h)?.expand()}function m(){r(h)?.collapse()}function k(){r(h)?.collapseSiblings()}async function x(){r(b)||r(v)||(_(v,!0),_(b,(await Ut(async()=>{const{default:$}=await import("./CodeEditor-Bk8QeLSV.js");return{default:$}},__vite__mapDeps([13,1]),import.meta.url)).default),Sv=r(b),_(v,!1))}function C($){$=$.replace("*",""),F.copyToClipboard($),Js(`Copied ${$} to clipboard`,2e3)}x(),ne(()=>(o(),R(c())),()=>{_(l,!F.isEmpty(F.getNestedVal(o(),c())))}),ne(()=>(R(d()),R(c())),()=>{d().enabled||Gn(c())}),ft(),He(),mt(Dr(n,tn(()=>i,{$$events:{expand($){ot.call(this,e,$)},collapse($){ot.call(this,e,$)},toggle($){ot.call(this,e,$)}},children:($,E)=>{var w=y$(),I=q(w);Pe(I,{class:"form-field required",get name(){return`${c()??""}.subject`},children:Ce,$$slots:{default:(A,L)=>{const N=ie(()=>L.uniqueId);var H=v$(),j=q(H),V=y(j,2),U=y(V,2);{var B=J=>{var Q=h$(),oe=y(T(Q));bt(oe,1,f,At,(de,ge)=>{var pe=f$(),xe=q(pe),ve=T(xe);z(()=>Te(ve,"{"+r(ge)+"}")),re("click",xe,()=>C("{"+r(ge)+"}")),p(de,pe)}),p(J,Q)};G(U,J=>{R(f()),M(()=>f()?.length>0)&&J(B)})}z(()=>{W(j,"for",r(N)),W(V,"id",r(N))}),xt(V,()=>d().subject,J=>d(d().subject=J,!0)),p(A,H)}}});var D=y(I,2);Pe(D,{class:"form-field m-0 required",get name(){return`${c()??""}.body`},children:Ce,$$slots:{default:(A,L)=>{const N=ie(()=>L.uniqueId);var H=b$(),j=q(H),V=y(j,2);{var U=oe=>{var de=tt(),ge=q(de);pi(ge,()=>r(b),(pe,xe)=>{xe(pe,{get id(){return r(N)},language:"html",get value(){return d().body},set value(ve){d(d().body=ve,!0)},$$legacy:!0})}),p(oe,de)},B=oe=>{var de=m$();z(()=>W(de,"id",r(N))),xt(de,()=>d().body,ge=>d(d().body=ge,!0)),p(oe,de)};G(V,oe=>{r(b)&&!r(v)?oe(U):oe(B,!1)})}var J=y(V,2);{var Q=oe=>{var de=g$(),ge=y(T(de));bt(ge,1,f,At,(pe,xe)=>{var ve=p$(),Ee=q(ve),ce=T(Ee);z(()=>Te(ce,"{"+r(xe)+"}")),re("click",Ee,()=>C("{"+r(xe)+"}")),p(pe,ve)}),p(oe,de)};G(J,oe=>{R(f()),M(()=>f()?.length>0)&&oe(Q)})}z(()=>W(j,"for",r(N))),p(A,H)}}}),p($,w)},$$slots:{default:!0,header:($,E)=>{var w=x$(),I=q(w),D=y(T(I),2),A=T(D),L=y(I,4);{var N=H=>{var j=_$();Qe(j,(V,U)=>dt?.(V,U),()=>({text:"Has errors",position:"left"})),Et(3,j,()=>Fn,()=>({duration:150,start:.7})),p(H,j)};G(L,H=>{r(l)&&H(N)})}z(()=>Te(A,u())),p($,w)}},$$legacy:!0})),$=>_(h,$),()=>r(h)),_t(e,"expand",g),_t(e,"collapse",m),_t(e,"collapseSiblings",k);var O=Be({expand:g,collapse:m,collapseSiblings:k});return s(),O}var k$=S('<label> </label> <input type="number" required placeholder="No change"/> <div class="help-block"><span>Invalidate all previously issued tokens</span></div>',1);function S$(n,e){Ue(e,!1);let t=ee(e,"key",8),i=ee(e,"label",8),a=ee(e,"duration",12),s=ee(e,"secret",12);He(),Pe(n,{class:"form-field required",get name(){return`${t()??""}.duration`},children:Ce,$$slots:{default:(o,l)=>{const c=ie(()=>l.uniqueId);var u=k$(),d=q(u),f=T(d),h=y(d,2),b=y(h,2),v=T(b);let g;z(m=>{W(d,"for",r(c)),Te(f,`${i()??""} duration (in seconds)`),W(h,"id",r(c)),g=Re(v,1,"link-primary",null,g,m)},[()=>({"txt-success":!!s()})]),xt(h,a),re("click",v,()=>{s()?s(void 0):s(F.randomSecret(50))}),p(o,u)}}}),Be()}var T$=S('<div class="col-sm-6"><!></div>'),$$=S('<div class="grid"></div>'),I$=S('<i class="ri-error-warning-fill txt-danger"></i>'),C$=S('<div class="inline-flex"><i class="ri-key-2-line"></i> <span class="txt">Tokens options (invalidate, duration)</span></div> <div class="flex-fill"></div> <!>',1);function E$(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s=P(),o=P();let l=ee(e,"collection",12),c=P([]);function u(d){if(F.isEmpty(d))return!1;for(let f of r(c))if(d[f.key])return!0;return!1}ne(()=>R(l()),()=>{_(s,l()?.system&&l()?.name==="_superusers")}),ne(()=>r(s),()=>{_(c,r(s)?[{key:"authToken",label:"Auth"},{key:"passwordResetToken",label:"Password reset"},{key:"fileToken",label:"Protected file access"}]:[{key:"authToken",label:"Auth"},{key:"verificationToken",label:"Email verification"},{key:"passwordResetToken",label:"Password reset"},{key:"emailChangeToken",label:"Email change"},{key:"fileToken",label:"Protected file access"}])}),ne(()=>a(),()=>{_(o,u(a()))}),ft(),He(),Dr(n,{single:!0,children:(d,f)=>{var h=$$();bt(h,5,()=>r(c),b=>b.key,(b,v)=>{var g=T$(),m=T(g);S$(m,{get key(){return r(v),M(()=>r(v).key)},get label(){return r(v),M(()=>r(v).label)},get duration(){return l()[r(v).key].duration},set duration(k){l(l()[r(v).key].duration=k,!0)},get secret(){return l()[r(v).key].secret},set secret(k){l(l()[r(v).key].secret=k,!0)},$$legacy:!0}),p(b,g)}),p(d,h)},$$slots:{default:!0,header:(d,f)=>{var h=C$(),b=y(q(h),4);{var v=g=>{var m=I$();Qe(m,(k,x)=>dt?.(k,x),()=>({text:"Has errors",position:"left"})),Et(3,m,()=>Fn,()=>({duration:150,start:.7})),p(g,m)};G(b,g=>{r(o)&&g(v)})}p(d,h)}}}),Be(),i()}let Tv;var O$=S('<div class="txt-center"><span class="loader"></span></div>'),D$=S('<button type="button" class="btn btn-sm btn-transparent btn-hint lock-toggle svelte-dnx4io"><i class="ri-lock-line" aria-hidden="true"></i> <span class="txt">Set Superusers only</span></button>'),P$=S('<small class="txt svelte-dnx4io">Unlock and set custom rule</small>'),M$=S('<button type="button" class="unlock-overlay svelte-dnx4io"><!> <div class="icon svelte-dnx4io" aria-hidden="true"><i class="ri-lock-unlock-line svelte-dnx4io"></i></div></button>'),A$=S('<div class="input-wrapper svelte-dnx4io"><label><!> <span> </span> <!> <!></label> <!> <!></div> <div class="help-block"><!></div>',1);function Lr(n,e){Ue(e,!1);const t=P(),i=P();let a=ee(e,"collection",8,null),s=ee(e,"rule",12,null),o=ee(e,"label",8,"Rule"),l=ee(e,"formKey",8,"rule"),c=ee(e,"required",8,!1),u=ee(e,"disabled",8,!1),d=ee(e,"superuserToggle",8,!0),f=ee(e,"placeholder",8,"Leave empty to grant everyone access..."),h=P(null),b=null,v=P(Tv),g=P(!1);m();async function m(){r(v)||r(g)||(_(g,!0),_(v,(await Ut(async()=>{const{default:w}=await import("./FilterAutocompleteInput-DvDaN08m.js");return{default:w}},__vite__mapDeps([0,1]),import.meta.url)).default),Tv=r(v),_(g,!1))}async function k(){s(b||""),await Tn(),r(h)?.focus()}function x(){b=s(),s(null)}ne(()=>(R(d()),R(s())),()=>{_(t,d()&&s()===null)}),ne(()=>(R(u()),R(a())),()=>{_(i,u()||a().system)}),ft(),He();var C=tt(),O=q(C);{var $=w=>{var I=O$();p(w,I)},E=w=>{{let I=ie(()=>c()?"requied":""),D=ie(()=>r(t)?"disabled":"");Pe(w,{get class(){return`form-field rule-field ${r(I)??""} ${r(D)??""}`},get name(){return l()},children:Ce,$$slots:{default:(A,L)=>{const N=ie(()=>L.uniqueId);var H=A$(),j=q(H),V=T(j),U=T(V);Gt(U,e,"beforeLabel",{get isSuperuserOnly(){return r(t)}},null);var B=y(U,2);let J;var Q=T(B),oe=y(B,2);Gt(oe,e,"afterLabel",{get isSuperuserOnly(){return r(t)}},null);var de=y(oe,2);{var ge=he=>{var be=D$();z(()=>{W(be,"aria-hidden",r(i)),be.disabled=r(i)}),re("click",be,x),p(he,be)};G(de,he=>{d()&&!r(t)&&he(ge)})}var pe=y(V,2);{let he=ie(()=>r(i)||r(t)),be=ie(()=>r(t)?"":f());pi(pe,()=>r(v),(we,ue)=>{mt(ue(we,{get id(){return r(N)},get baseCollection(){return a()},get disabled(){return r(he)},get placeholder(){return r(be)},get value(){return s()},set value(me){s(me)},$$legacy:!0}),me=>_(h,me),()=>r(h))})}var xe=y(pe,2);{var ve=he=>{var be=M$(),we=T(be);{var ue=me=>{var ae=P$();p(me,ae)};G(we,me=>{r(i)||me(ue)})}z(()=>{be.disabled=r(i),W(be,"aria-hidden",r(i))}),Et(3,be,()=>Fn,()=>({duration:150,start:.98})),re("click",be,k),p(he,be)};G(xe,he=>{d()&&r(t)&&he(ve)})}Qe(j,(he,be)=>dt?.(he,be),()=>a().system?{text:"System collection rule cannot be changed.",position:"top"}:void 0);var Ee=y(j,2),ce=T(Ee);Gt(ce,e,"default",{get isSuperuserOnly(){return r(t)}},null),z(he=>{W(V,"for",r(N)),J=Re(B,1,"txt",null,J,he),Te(Q,`${o()??""}
                    ${r(t)?"- Superusers only":""}`)},[()=>({"txt-hint":r(t)})]),p(A,H)}}})}};G(O,w=>{r(g)?w($):w(E,!1)})}p(n,C),Be()}var L$=S('<input type="checkbox"/> <label><span class="txt">Enable</span></label>',1),N$=S("<p>This optional rule could be used to enable/disable MFA per account basis.</p> <p>For example, to require MFA only for accounts with non-empty email you can set it to <code>email != ''</code>.</p> <p>Leave the rule empty to require MFA for everyone.</p>",1),R$=S(`<div class="content m-b-sm"><p class="txt-bold">This feature is experimental and may change in the future.</p> <p>Multi-factor authentication (MFA) requires the user to authenticate with any 2 different auth
            methods (otp, identity/password, oauth2) before issuing an auth token. <a target="_blank" rel="noopener noreferrer" class="txt-sm link-hint" title="Learn more"><em>(Learn more)</em></a>.</p></div> <div class="grid"><!> <div><!></div></div>`,1),F$=S('<span class="label label-success">Enabled</span>'),q$=S('<span class="label">Disabled</span>'),z$=S('<i class="ri-error-warning-fill txt-danger"></i>'),j$=S('<div class="inline-flex"><i class="ri-shield-check-line"></i> <span class="txt">Multi-factor authentication (MFA)</span></div> <div class="flex-fill"></div> <!> <!>',1);function V$(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s=P();let o=ee(e,"collection",12);ne(()=>a(),()=>{_(s,!F.isEmpty(a()?.mfa))}),ft(),He(),Dr(n,{single:!0,children:(l,c)=>{var u=R$(),d=q(u),f=y(T(d),2),h=y(T(f)),b=y(d,2),v=T(b);Pe(v,{class:"form-field form-field-toggle",name:"mfa.enabled",children:Ce,$$slots:{default:(x,C)=>{const O=ie(()=>C.uniqueId);var $=L$(),E=q($),w=y(E,2);z(()=>{W(E,"id",r(O)),W(w,"for",r(O))}),Qt(E,()=>o().mfa.enabled,I=>o(o().mfa.enabled=I,!0)),p(x,$)}}});var g=y(v,2);let m;var k=T(g);{let x=ie(()=>(R(o()),M(()=>!o().mfa.enabled)));Lr(k,{label:"MFA rule",formKey:"mfa.rule",superuserToggle:!1,get disabled(){return r(x)},placeholder:"Leave empty to require MFA for everyone",get collection(){return o()},get rule(){return o().mfa.rule},set rule(C){o(o().mfa.rule=C,!0)},children:(C,O)=>{var $=N$();p(C,$)},$$slots:{default:!0},$$legacy:!0})}z(x=>{W(h,"href",M(()=>"https://pocketbase.io/docs/authentication#multi-factor-authentication")),m=Re(g,1,"content",null,m,x)},[()=>({fade:!o().mfa.enabled})]),p(l,u)},$$slots:{default:!0,header:(l,c)=>{var u=j$(),d=y(q(u),4);{var f=g=>{var m=F$();p(g,m)},h=g=>{var m=q$();p(g,m)};G(d,g=>{R(o()),M(()=>o().mfa.enabled)?g(f):g(h,!1)})}var b=y(d,2);{var v=g=>{var m=z$();Qe(m,(k,x)=>dt?.(k,x),()=>({text:"Has errors",position:"left"})),Et(3,m,()=>Fn,()=>({duration:150,start:.7})),p(g,m)};G(b,g=>{r(s)&&g(v)})}p(l,u)}}}),Be(),i()}var U$=S('<span class="txt"> </span>'),B$=S('<span class="clear"><i class="ri-close-line"></i></span>'),H$=S('<div class="option"><!> <!></div>'),W$=S("<div> </div>"),Y$=S('<div class="addon suffix p-r-5"><button type="button" class="btn btn-sm btn-circle btn-transparent clear"><i class="ri-close-line"></i></button></div>'),K$=S('<div class="form-field form-field-sm options-search"><label class="input-group"><div class="addon p-r-0"><i class="ri-search-line"></i></div> <input type="text"/> <!></label></div>'),Z$=S('<div tabindex="0" role="menuitem"><!></div>'),J$=S('<div class="txt-missing"> </div>'),G$=S('<!> <!> <div class="options-list"></div> <!>',1),X$=S('<div><div role="button"></div> <!></div>');function Wa(n,e){Ue(e,!1);const t=P(),i=P();let a=ee(e,"id",8,""),s=ee(e,"noOptionsText",8,"No options found"),o=ee(e,"selectPlaceholder",8,"- Select -"),l=ee(e,"searchPlaceholder",8,"Search..."),c=ee(e,"items",24,()=>[]),u=ee(e,"multiple",8,!1),d=ee(e,"disabled",8,!1),f=ee(e,"readonly",8,!1),h=ee(e,"upside",8,!1),b=ee(e,"zeroFunc",8,()=>u()?[]:void 0),v=ee(e,"selected",28,()=>b()()),g=ee(e,"toggle",24,u),m=ee(e,"closable",8,!0),k=ee(e,"labelComponent",8,void 0),x=ee(e,"labelComponentProps",24,()=>({})),C=ee(e,"optionComponent",8,void 0),O=ee(e,"optionComponentProps",24,()=>({})),$=ee(e,"searchable",8,!1),E=ee(e,"searchFunc",8,void 0);const w=zt();let I=ee(e,"class",8,""),D=P(),A=P(""),L=P(void 0),N=P(void 0);function H(ae){if(F.isEmpty(v()))return;let te=F.toArray(v());F.inArray(te,ae)&&(F.removeByValue(te,ae),v(u()?te:te?.[0]||b()())),w("change",{selected:v()}),r(L)?.dispatchEvent(new CustomEvent("change",{detail:v(),bubbles:!0}))}function j(ae){if(u()){let te=F.toArray(v());F.inArray(te,ae)||v([...te,ae])}else v(ae);w("change",{selected:v()}),r(L)?.dispatchEvent(new CustomEvent("change",{detail:v(),bubbles:!0}))}function V(ae){return r(i)(ae)?H(ae):j(ae)}function U(){v(b()()),w("change",{selected:v()}),r(L)?.dispatchEvent(new CustomEvent("change",{detail:v(),bubbles:!0}))}function B(){r(D)?.show&&r(D)?.show()}function J(){r(D)?.hide&&r(D)?.hide()}function Q(){if(F.isEmpty(v())||F.isEmpty(c()))return;let ae=F.toArray(v()),te=[];for(const se of ae)F.inArray(c(),se)||te.push(se);if(te.length){for(const se of te)F.removeByValue(ae,se);v(u()?ae:ae[0])}}function oe(ae,te){let se=(""+te).replace(/\s+/g,"").toLowerCase(),ye=ae;try{typeof ae=="object"&&ae!==null&&(ye=JSON.stringify(ae))}catch{}return(""+ye).replace(/\s+/g,"").toLowerCase().includes(se)}function de(){_(A,"")}function ge(ae,te){ae=ae||[];const se=E()||oe;return ae.filter(ye=>se(ye,te))||[]}function pe(ae,te){ae.preventDefault(),g()&&u()?V(te):j(te)}function xe(ae,te){(ae.code==="Enter"||ae.code==="Space")&&(pe(ae,te),m()&&J())}function ve(){de(),setTimeout(()=>{const ae=r(L)?.querySelector(".dropdown-item.option.selected");ae&&(ae.focus(),ae.scrollIntoView({block:"nearest"}))},0)}function Ee(ae){ae.stopPropagation(),!f()&&!d()&&r(D)?.toggle()}un(()=>{const ae=document.querySelectorAll(`label[for="${a()}"]`);for(const te of ae)te.addEventListener("click",Ee);return()=>{for(const te of ae)te.removeEventListener("click",Ee)}}),ne(()=>R(c()),()=>{c()&&(Q(),de())}),ne(()=>(R(c()),r(A)),()=>{_(t,ge(c(),r(A)))}),ne(()=>R(v()),()=>{_(i,function(ae){const te=F.toArray(v());return F.inArray(te,ae)})}),ft(),He();var ce=X$();let he;var be=T(ce);let we;bt(be,5,()=>(R(F),R(v()),M(()=>F.toArray(v()))),At,(ae,te)=>{var se=H$(),ye=T(se);{var ke=Me=>{var Ge=tt(),_e=q(Ge);pi(_e,k,(Oe,Fe)=>{Fe(Oe,tn({get item(){return r(te)}},x))}),p(Me,Ge)},Ie=Me=>{var Ge=U$(),_e=T(Ge);z(()=>Te(_e,r(te))),p(Me,Ge)};G(ye,Me=>{k()?Me(ke):Me(Ie,!1)})}var Ne=y(ye,2);{var ze=Me=>{var Ge=B$();Qe(Ge,(_e,Oe)=>dt?.(_e,Oe),()=>"Clear"),Rt(()=>re("click",Ge,Ct(hn(()=>H(r(te)))))),p(Me,Ge)};G(Ne,Me=>{(u()||g())&&Me(ze)})}p(ae,se)},ae=>{var te=W$();let se;var ye=T(te);z(ke=>{se=Re(te,1,"block txt-placeholder",null,se,ke),Te(ye,o())},[()=>({"link-hint":!d()&&!f()})]),p(ae,te)}),mt(be,ae=>_(N,ae),()=>r(N));var ue=y(be,2);{var me=ae=>{{let te=ie(()=>h()?"dropdown-upside":"");mt(Jn(ae,{get class(){return`dropdown dropdown-block options-dropdown dropdown-left ${r(te)??""}`},get trigger(){return r(N)},$$events:{show:ve,hide(se){ot.call(this,e,se)}},children:(se,ye)=>{var ke=G$(),Ie=q(ke);{var Ne=_e=>{var Oe=K$(),Fe=T(Oe),at=y(T(Fe),2);Ui(at,!0);var je=y(at,2);{var nt=We=>{var Ye=Y$(),De=T(Ye);re("click",De,Ct(hn(de))),p(We,Ye)};G(je,We=>{r(A),M(()=>r(A).length)&&We(nt)})}z(()=>W(at,"placeholder",l())),xt(at,()=>r(A),We=>_(A,We)),p(_e,Oe)};G(Ie,_e=>{$()&&_e(Ne)})}var ze=y(Ie,2);Gt(ze,e,"beforeOptions",{},null);var Me=y(ze,2);bt(Me,5,()=>r(t),At,(_e,Oe)=>{var Fe=Z$();let at;var je=T(Fe);{var nt=Ye=>{var De=tt(),qe=q(De);pi(qe,C,(Ke,ct)=>{ct(Ke,tn({get item(){return r(Oe)}},O))}),p(Ye,De)},We=Ye=>{var De=or();z(()=>Te(De,r(Oe))),p(Ye,De)};G(je,Ye=>{C()?Ye(nt):Ye(We,!1)})}z(Ye=>at=Re(Fe,1,"dropdown-item option",null,at,Ye),[()=>({closable:m(),selected:r(i)(r(Oe))})]),re("click",Fe,Ye=>pe(Ye,r(Oe))),re("keydown",Fe,Ye=>xe(Ye,r(Oe))),p(_e,Fe)},_e=>{var Oe=tt(),Fe=q(Oe);{var at=je=>{var nt=J$(),We=T(nt);z(()=>Te(We,s())),p(je,nt)};G(Fe,je=>{s()&&je(at)})}p(_e,Oe)});var Ge=y(Me,2);Gt(Ge,e,"afterOptions",{},null),p(se,ke)},$$slots:{default:!0},$$legacy:!0}),se=>_(D,se),()=>r(D))}};G(ue,ae=>{!d()&&!f()&&ae(me)})}return mt(ce,ae=>_(L,ae),()=>r(L)),z((ae,te)=>{he=Re(ce,1,`select ${I()??""}`,null,he,ae),W(be,"tabindex",d()||f()?"-1":"0"),we=Re(be,1,"selected-container",null,we,te)},[()=>({upside:h(),multiple:u(),disabled:d(),readonly:f()}),()=>({disabled:d(),readonly:f()})]),p(n,ce),_t(e,"deselectItem",H),_t(e,"selectItem",j),_t(e,"toggleItem",V),_t(e,"reset",U),_t(e,"showDropdown",B),_t(e,"hideDropdown",J),Be({deselectItem:H,selectItem:j,toggleItem:V,reset:U,showDropdown:B,hideDropdown:J})}var Q$=S('<div class="form-field-addon"><button type="button" class="btn btn-transparent btn-circle"><i class="ri-key-line"></i></button></div> <input/>',1),eI=S("<input/>");function Ld(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","mask"]);Ue(e,!1);let a=ee(e,"value",12,void 0),s=ee(e,"mask",12,!1),o=P();async function l(){a(""),s(!1),await Tn(),r(o)?.focus()}He();var c=tt(),u=q(c);{var d=h=>{var b=Q$(),v=q(b),g=T(v);Qe(g,(k,x)=>dt?.(k,x),()=>({position:"left",text:"Set new value"})),Rt(()=>re("click",g,Ct(l)));var m=y(v,2);is(m,()=>({disabled:!0,type:"text",placeholder:"******",...i})),p(h,b)},f=h=>{var b=eI();is(b,()=>({type:"password",autocomplete:"new-password",...i})),mt(b,v=>_(o,v),()=>r(o)),xt(b,a),p(h,b)};G(u,h=>{s()?h(d):h(f,!1)})}p(n,c),Be()}var tI=S('<label>Client ID</label> <input type="text"/>',1),nI=S("<label>Client secret</label> <!>",1),iI=S('<div class="col-lg-12"><!></div>'),rI=S('<form autocomplete="off"><!> <!> <!></form>'),aI=S("<img/>"),sI=S('<i class="ri-puzzle-line txt-sm txt-hint"></i>'),oI=S('<figure class="provider-logo"><!></figure> <h4 class="center txt-break"> <small class="txt-hint"> </small></h4>',1),lI=S('<button type="button" class="btn btn-transparent btn-circle btn-hint btn-sm" aria-label="Remove provider"><i class="ri-delete-bin-7-line" aria-hidden="true"></i></button> <div class="flex-fill"></div>',1),cI=S('<!> <button type="button" class="btn btn-transparent">Cancel</button> <button type="submit" class="btn btn-expanded"><span class="txt">Set provider config</span></button>',1);function uI(n,e){Ue(e,!1);const t=P(),i=P(),a=zt(),s="provider_popup_"+F.randomString(5);let o=P(),l=P({}),c=P({}),u=P(!1),d=P(""),f=P(!1),h=P(0);function b(k,x,C){_(h,C||0),_(u,F.isEmpty(x)),_(l,Object.assign({},k)),_(c,Object.assign({},x)),_(f,!!r(c).clientId),_(d,JSON.stringify(r(c))),r(o)?.show()}function v(){Gn(r(i)),r(o)?.hide()}async function g(){a("submit",{uiOptions:r(l),config:r(c)}),v()}async function m(){Ln(`Do you really want to remove the "${r(l).title}" OAuth2 provider from the collection?`,()=>{a("remove",{uiOptions:r(l)}),v()})}return ne(()=>(r(c),r(d)),()=>{_(t,JSON.stringify(r(c))!=r(d))}),ne(()=>r(h),()=>{_(i,"oauth2.providers."+r(h))}),ft(),He(),mt(pn(n,{btnClose:!1,$$events:{show(k){ot.call(this,e,k)},hide(k){ot.call(this,e,k)}},children:(k,x)=>{var C=rI(),O=T(C);Pe(O,{class:"form-field required",get name(){return`${r(i)??""}.clientId`},children:Ce,$$slots:{default:(I,D)=>{const A=ie(()=>D.uniqueId);var L=tI(),N=q(L),H=y(N,2);z(()=>{W(N,"for",r(A)),W(H,"id",r(A))}),xt(H,()=>r(c).clientId,j=>ut(c,r(c).clientId=j)),p(I,L)}}});var $=y(O,2);Pe($,{class:"form-field required",get name(){return`${r(i)??""}.clientSecret`},children:Ce,$$slots:{default:(I,D)=>{const A=ie(()=>D.uniqueId);var L=nI(),N=q(L),H=y(N,2);Ld(H,{get id(){return r(A)},get mask(){return r(f)},set mask(j){_(f,j)},get value(){return r(c).clientSecret},set value(j){ut(c,r(c).clientSecret=j)},$$legacy:!0}),z(()=>W(N,"for",r(A))),p(I,L)}}});var E=y($,2);{var w=I=>{var D=iI(),A=T(D);pi(A,()=>r(l).optionsComponent,(L,N)=>{N(L,tn({get key(){return r(i)}},()=>r(l).optionsComponentProps||{},{get config(){return r(c)},set config(H){_(c,H)},$$legacy:!0}))}),p(I,D)};G(E,I=>{r(l),M(()=>r(l).optionsComponent)&&I(w)})}z(()=>W(C,"id",s)),re("submit",C,Ct(()=>g())),p(k,C)},$$slots:{default:!0,header:(k,x)=>{var C=oI(),O=q(C),$=T(O);{var E=N=>{var H=aI();z(()=>{W(H,"src",`${M(()=>"./")??""}images/oauth2/${r(l),M(()=>r(l).logo)??""}`),W(H,"alt",`${r(l),M(()=>r(l).title)??""} logo`)}),p(N,H)},w=N=>{var H=sI();p(N,H)};G($,N=>{r(l),M(()=>r(l).logo)?N(E):N(w,!1)})}var I=y(O,2),D=T(I),A=y(D),L=T(A);z(()=>{Te(D,`${r(l),M(()=>r(l).title)??""} `),Te(L,`(${r(l),M(()=>r(l).key)??""})`)}),p(k,C)},footer:(k,x)=>{var C=cI(),O=q(C);{var $=I=>{var D=lI(),A=q(D);Qe(A,(L,N)=>dt?.(L,N),()=>({text:"Remove provider",position:"right"})),Rt(()=>re("click",A,m)),p(I,D)};G(O,I=>{r(u)||I($)})}var E=y(O,2),w=y(E,2);z(()=>{W(w,"form",s),w.disabled=!r(t)}),re("click",E,v),p(k,C)}},$$legacy:!0}),k=>_(o,k),()=>r(o)),_t(e,"show",b),_t(e,"hide",v),Be({show:b,hide:v})}var dI=S('<label>Client ID</label> <input type="text" required/>',1),fI=S('<label>Team ID</label> <input type="text" required/>',1),hI=S('<label>Key ID</label> <input type="text" required/>',1),vI=S('<label><span class="txt">Duration (in seconds)</span> <i class="ri-information-line link-hint"></i></label> <input type="number" required/>',1),mI=S('<label>Private key</label> <textarea required rows="8"></textarea> <div class="help-block">The key is not stored on the server and it is used only for generating the signed JWT.</div>',1),pI=S('<form autocomplete="off"><div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <!></div></form>'),gI=S('<h4 class="center txt-break">Generate Apple client secret</h4>'),bI=S('<button type="button" class="btn btn-transparent">Close</button> <button type="submit"><i class="ri-key-line"></i> <span class="txt">Generate and set secret</span></button>',1);function yI(n,e){Ue(e,!1);const t=P(),i=zt(),a="apple_secret_"+F.randomString(5),s=15777e3;let o=P(),l=P(),c=P(),u=P(),d=P(),f=P(),h=P(!1);function b(m={}){_(l,m.clientId||""),_(c,m.teamId||""),_(u,m.keyId||""),_(d,m.privateKey||""),_(f,m.duration||s),rn({}),r(o)?.show()}function v(){return r(o)?.hide()}async function g(){_(h,!0);try{const m=await Le.settings.generateAppleClientSecret(r(l),r(c),r(u),r(d).trim(),r(f));_(h,!1),vn("Successfully generated client secret."),i("submit",m),r(o)?.hide()}catch(m){Le.error(m)}_(h,!1)}ne(()=>{},()=>{_(t,!0)}),ft(),He();{let m=ie(()=>!r(h)),k=ie(()=>!r(h));mt(pn(n,{get overlayClose(){return r(m)},get escClose(){return r(k)},beforeHide:()=>!r(h),popup:!0,$$events:{show(x){ot.call(this,e,x)},hide(x){ot.call(this,e,x)}},children:(x,C)=>{var O=pI(),$=T(O),E=T($),w=T(E);Pe(w,{class:"form-field required",name:"clientId",children:Ce,$$slots:{default:(V,U)=>{const B=ie(()=>U.uniqueId);var J=dI(),Q=q(J),oe=y(Q,2);z(()=>{W(Q,"for",r(B)),W(oe,"id",r(B))}),xt(oe,()=>r(l),de=>_(l,de)),p(V,J)}}});var I=y(E,2),D=T(I);Pe(D,{class:"form-field required",name:"teamId",children:Ce,$$slots:{default:(V,U)=>{const B=ie(()=>U.uniqueId);var J=fI(),Q=q(J),oe=y(Q,2);z(()=>{W(Q,"for",r(B)),W(oe,"id",r(B))}),xt(oe,()=>r(c),de=>_(c,de)),p(V,J)}}});var A=y(I,2),L=T(A);Pe(L,{class:"form-field required",name:"keyId",children:Ce,$$slots:{default:(V,U)=>{const B=ie(()=>U.uniqueId);var J=hI(),Q=q(J),oe=y(Q,2);z(()=>{W(Q,"for",r(B)),W(oe,"id",r(B))}),xt(oe,()=>r(u),de=>_(u,de)),p(V,J)}}});var N=y(A,2),H=T(N);Pe(H,{class:"form-field required",name:"duration",children:Ce,$$slots:{default:(V,U)=>{const B=ie(()=>U.uniqueId);var J=vI(),Q=q(J),oe=y(T(Q),2);Qe(oe,(ge,pe)=>dt?.(ge,pe),()=>({text:`Max ${s} seconds (~${s/(3600*24*30)<<0} months).`,position:"top"}));var de=y(Q,2);W(de,"max",s),z(()=>{W(Q,"for",r(B)),W(de,"id",r(B))}),xt(de,()=>r(f),ge=>_(f,ge)),p(V,J)}}});var j=y(N,2);Pe(j,{class:"form-field required",name:"privateKey",children:Ce,$$slots:{default:(V,U)=>{const B=ie(()=>U.uniqueId);var J=mI(),Q=q(J),oe=y(Q,2);W(oe,"placeholder",`-----BEGIN PRIVATE KEY-----
...
-----END PRIVATE KEY-----`),z(()=>{W(Q,"for",r(B)),W(oe,"id",r(B))}),xt(oe,()=>r(d),de=>_(d,de)),p(V,J)}}}),z(()=>W(O,"id",a)),re("submit",O,Ct(()=>g())),p(x,O)},$$slots:{default:!0,header:(x,C)=>{var O=gI();p(x,O)},footer:(x,C)=>{var O=bI(),$=q(O),E=y($,2);let w;z(I=>{$.disabled=r(h),W(E,"form",a),w=Re(E,1,"btn btn-expanded",null,w,I),E.disabled=!r(t)||r(h)},[()=>({"btn-loading":r(h)})]),re("click",$,v),p(x,O)}},$$legacy:!0}),x=>_(o,x),()=>r(o))}return _t(e,"show",b),_t(e,"hide",v),Be({show:b,hide:v})}var _I=S('<button type="button"><i class="ri-key-line"></i> <span class="txt">Generate secret</span></button> <!>',1);function xI(n,e){Ue(e,!1);let t=ee(e,"key",8,""),i=ee(e,"config",28,()=>({})),a=P();He();var s=_I(),o=q(s),l=y(o,2);mt(yI(l,{$$events:{submit:c=>{i(i().clientSecret=c.detail?.secret||"",!0)}},$$legacy:!0}),c=>_(a,c),()=>r(a)),z(()=>Re(o,1,`btn btn-sm btn-secondary btn-provider-${t()??""}`)),re("click",o,()=>r(a)?.show({clientId:i().clientId})),p(n,s),Be()}var wI=S('<label>Auth URL</label> <input type="url" required/> <div class="help-block"></div>',1),kI=S('<label>Token URL</label> <input type="url" required/> <div class="help-block"></div>',1),SI=S('<div class="section-title">Azure AD endpoints</div> <!> <!>',1);function TI(n,e){Ue(e,!1);let t=ee(e,"key",8,""),i=ee(e,"config",28,()=>({}));He();var a=SI(),s=y(q(a),2);Pe(s,{class:"form-field required",get name(){return`${t()??""}.authURL`},children:Ce,$$slots:{default:(l,c)=>{const u=ie(()=>c.uniqueId);var d=wI(),f=q(d),h=y(f,2),b=y(h,2);b.textContent="Ex. https://login.microsoftonline.com/YOUR_DIRECTORY_TENANT_ID/oauth2/v2.0/authorize",z(()=>{W(f,"for",r(u)),W(h,"id",r(u))}),xt(h,()=>i().authURL,v=>i(i().authURL=v,!0)),p(l,d)}}});var o=y(s,2);Pe(o,{class:"form-field required",get name(){return`${t()??""}.tokenURL`},children:Ce,$$slots:{default:(l,c)=>{const u=ie(()=>c.uniqueId);var d=kI(),f=q(d),h=y(f,2),b=y(h,2);b.textContent="Ex. https://login.microsoftonline.com/YOUR_DIRECTORY_TENANT_ID/oauth2/v2.0/token",z(()=>{W(f,"for",r(u)),W(h,"id",r(u))}),xt(h,()=>i().tokenURL,v=>i(i().tokenURL=v,!0)),p(l,d)}}}),p(n,a),Be()}var $I=S("<i></i>"),II=S('<!> <span class="txt"> </span>',1);function $v(n,e){Ue(e,!1);let t=ee(e,"item",24,()=>({}));He();var i=II(),a=q(i);{var s=c=>{var u=$I();z(()=>Re(u,1,`icon ${R(t()),M(()=>t().icon)??""}`)),p(c,u)};G(a,c=>{R(t()),M(()=>t().icon)&&c(s)})}var o=y(a,2),l=T(o);z(()=>Te(l,(R(t()),M(()=>t().label||t().name||t().title||t().id||t().value)))),p(n,i),Be()}function Nn(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["items","multiple","selected","labelComponent","optionComponent","selectionKey","keyOfSelected"]);Ue(e,!1);let a=ee(e,"items",24,()=>[]),s=ee(e,"multiple",8,!1),o=ee(e,"selected",28,()=>s()?[]:void 0),l=ee(e,"labelComponent",8,$v),c=ee(e,"optionComponent",8,$v),u=ee(e,"selectionKey",8,"value"),d=ee(e,"keyOfSelected",28,()=>s()?[]:void 0),f=JSON.stringify(d());function h(v){v=F.toArray(v,!0);let g=[];for(let m of v){const k=F.findByKey(a(),u(),m);k&&g.push(k)}v.length&&!g.length||o(s()?g:g[0])}async function b(v){if(!a().length)return;let g=F.toArray(v,!0).map(k=>k[u()]),m=s()?g:g[0];JSON.stringify(m)!=f&&(d(m),f=JSON.stringify(d()))}ne(()=>(R(a()),R(d())),()=>{a()&&h(d())}),ne(()=>R(o()),()=>{b(o())}),ft(),He(),Wa(n,tn({get items(){return a()},get multiple(){return s()},get labelComponent(){return l()},get optionComponent(){return c()}},()=>i,{get selected(){return o()},set selected(v){o(v)},$$events:{show(v){ot.call(this,e,v)},hide(v){ot.call(this,e,v)},change(v){ot.call(this,e,v)}},$$slots:{afterOptions:(v,g)=>{var m=tt(),k=q(m);Gt(k,e,"afterOptions",{},null),p(v,m)}},$$legacy:!0})),Be()}var CI=S("<input/>");function io(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","separator","readonly","disabled"]);Ue(e,!1);const a=P();let s=ee(e,"value",28,()=>[]),o=ee(e,"separator",8,","),l=ee(e,"readonly",8,null),c=ee(e,"disabled",8,null);ne(()=>(R(s()),R(o())),()=>{_(a,F.joinNonEmpty(s(),o()+" "))}),ft(),He();var u=CI();is(u,()=>({type:(R(i),M(()=>i.type||"text")),value:r(a),disabled:c(),readonly:l(),...i})),re("input",u,d=>{s(F.splitNonEmpty(d.target.value,o()))}),p(n,u),Be()}var EI=S('<label>Display name</label> <input type="text" required/>',1),OI=S('<label>Auth URL</label> <input type="url" required/>',1),DI=S('<label>Token URL</label> <input type="url" required/>',1),PI=S("<label>Fetch user info from</label> <!>",1),MI=S('<label>User info URL</label> <input type="url" required/>',1),AI=S('<div class="content"><!></div>'),LI=S('<label><span class="txt">JWKS verification URL</span> <i class="ri-information-line link-hint"></i></label> <input type="url"/>',1),NI=S('<label><span class="txt">Issuers</span> <i class="ri-information-line link-hint"></i></label> <!>',1),RI=S('<div class="content"><p class="txt-hint txt-sm m-b-xs"><em>Both fields are considered optional because the parsed <code>id_token</code> is a direct result of the trusted server code->token exchange response.</em></p> <!> <!></div>'),FI=S('<input type="checkbox"/> <label><span class="txt">Support PKCE</span> <i class="ri-information-line link-hint"></i></label>',1),qI=S('<!> <div class="section-title">Endpoints</div> <!> <!> <!> <div class="sub-panel m-b-base"><!></div> <!>',1);function Vc(n,e){Ue(e,!1);let t=ee(e,"key",8,""),i=ee(e,"config",28,()=>({}));const a=[{label:"User info URL",value:!0},{label:"ID Token",value:!1}];let s=P(!!i().userInfoURL);F.isEmpty(i().pkce)&&i(i().pkce=!0,!0),i().displayName||i(i().displayName="OIDC",!0),i().extra||(i(i().extra={},!0),_(s,!0));function o(){r(s)?i(i().extra={},!0):(i(i().userInfoURL="",!0),i(i().extra=i().extra||{},!0))}ne(()=>r(s),()=>{typeof r(s)!==void 0&&o()}),ft(),He();var l=qI(),c=q(l);Pe(c,{class:"form-field required",get name(){return`${t()??""}.displayName`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=EI(),$=q(O),E=y($,2);z(()=>{W($,"for",r(C)),W(E,"id",r(C))}),xt(E,()=>i().displayName,w=>i(i().displayName=w,!0)),p(k,O)}}});var u=y(c,4);Pe(u,{class:"form-field required",get name(){return`${t()??""}.authURL`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=OI(),$=q(O),E=y($,2);z(()=>{W($,"for",r(C)),W(E,"id",r(C))}),xt(E,()=>i().authURL,w=>i(i().authURL=w,!0)),p(k,O)}}});var d=y(u,2);Pe(d,{class:"form-field required",get name(){return`${t()??""}.tokenURL`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=DI(),$=q(O),E=y($,2);z(()=>{W($,"for",r(C)),W(E,"id",r(C))}),xt(E,()=>i().tokenURL,w=>i(i().tokenURL=w,!0)),p(k,O)}}});var f=y(d,2);Pe(f,{class:"form-field m-b-xs",children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=PI(),$=q(O),E=y($,2);Nn(E,{get id(){return r(C)},get items(){return a},get keyOfSelected(){return r(s)},set keyOfSelected(w){_(s,w)},$$legacy:!0}),z(()=>W($,"for",r(C))),p(k,O)}}});var h=y(f,2),b=T(h);{var v=k=>{var x=AI(),C=T(x);Pe(C,{class:"form-field required",get name(){return`${t()??""}.userInfoURL`},children:Ce,$$slots:{default:(O,$)=>{const E=ie(()=>$.uniqueId);var w=MI(),I=q(w),D=y(I,2);z(()=>{W(I,"for",r(E)),W(D,"id",r(E))}),xt(D,()=>i().userInfoURL,A=>i(i().userInfoURL=A,!0)),p(O,w)}}}),Et(3,x,()=>mn,()=>({delay:10,duration:150})),p(k,x)},g=k=>{var x=RI(),C=y(T(x),2);Pe(C,{class:"form-field m-b-xs",get name(){return`${t()??""}.extra.jwksURL`},children:Ce,$$slots:{default:($,E)=>{const w=ie(()=>E.uniqueId);var I=LI(),D=q(I),A=y(T(D),2);Qe(A,(N,H)=>dt?.(N,H),()=>({text:"URL to the public token verification keys.",position:"top"}));var L=y(D,2);z(()=>{W(D,"for",r(w)),W(L,"id",r(w))}),xt(L,()=>i().extra.jwksURL,N=>i(i().extra.jwksURL=N,!0)),p($,I)}}});var O=y(C,2);Pe(O,{class:"form-field",get name(){return`${t()??""}.extra.issuers`},children:Ce,$$slots:{default:($,E)=>{const w=ie(()=>E.uniqueId);var I=NI(),D=q(I),A=y(T(D),2);Qe(A,(N,H)=>dt?.(N,H),()=>({text:"Comma separated list of accepted values for the iss token claim validation.",position:"top"}));var L=y(D,2);io(L,{get id(){return r(w)},get value(){return i().extra.issuers},set value(N){i(i().extra.issuers=N,!0)},$$legacy:!0}),z(()=>W(D,"for",r(w))),p($,I)}}}),Et(3,x,()=>mn,()=>({delay:10,duration:150})),p(k,x)};G(b,k=>{r(s)?k(v):k(g,!1)})}var m=y(h,2);Pe(m,{class:"form-field",get name(){return`${t()??""}.pkce`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=FI(),$=q(O),E=y($,2),w=y(T(E),2);Qe(w,(I,D)=>dt?.(I,D),()=>({text:"Usually it should be safe to be always enabled as most providers will just ignore the extra query parameters if they don't support PKCE.",position:"right"})),z(()=>{W($,"id",r(C)),W(E,"for",r(C))}),Qt($,()=>i().pkce,I=>i(i().pkce=I,!0)),p(k,O)}}}),p(n,l),Be()}var zI=S('<label>Auth URL</label> <input type="url"/>',1),jI=S('<label>Token URL</label> <input type="url"/>',1),VI=S('<label>User info URL</label> <input type="url"/>',1),UI=S('<div class="section-title"> </div> <!> <!> <!>',1);function Uc(n,e){Ue(e,!1);const t=P();let i=ee(e,"key",8,""),a=ee(e,"config",28,()=>({})),s=ee(e,"required",8,!1),o=ee(e,"title",8,"Provider endpoints");ne(()=>(R(s()),R(a())),()=>{_(t,s()&&a()?.enabled)}),ft(),He();var l=UI(),c=q(l),u=T(c),d=y(c,2);{let b=ie(()=>r(t)?"required":"");Pe(d,{get class(){return`form-field ${r(b)??""}`},get name(){return`${i()??""}.authURL`},children:Ce,$$slots:{default:(v,g)=>{const m=ie(()=>g.uniqueId);var k=zI(),x=q(k),C=y(x,2);z(()=>{W(x,"for",r(m)),W(C,"id",r(m)),C.required=r(t)}),xt(C,()=>a().authURL,O=>a(a().authURL=O,!0)),p(v,k)}}})}var f=y(d,2);{let b=ie(()=>r(t)?"required":"");Pe(f,{get class(){return`form-field ${r(b)??""}`},get name(){return`${i()??""}.tokenURL`},children:Ce,$$slots:{default:(v,g)=>{const m=ie(()=>g.uniqueId);var k=jI(),x=q(k),C=y(x,2);z(()=>{W(x,"for",r(m)),W(C,"id",r(m)),C.required=r(t)}),xt(C,()=>a().tokenURL,O=>a(a().tokenURL=O,!0)),p(v,k)}}})}var h=y(f,2);{let b=ie(()=>r(t)?"required":"");Pe(h,{get class(){return`form-field ${r(b)??""}`},get name(){return`${i()??""}.userInfoURL`},children:Ce,$$slots:{default:(v,g)=>{const m=ie(()=>g.uniqueId);var k=VI(),x=q(k),C=y(x,2);z(()=>{W(x,"for",r(m)),W(C,"id",r(m)),C.required=r(t)}),xt(C,()=>a().userInfoURL,O=>a(a().userInfoURL=O,!0)),p(v,k)}}})}z(()=>Te(u,o())),p(n,l),Be()}const Nd=[{key:"apple",title:"Apple",logo:"apple.svg",optionsComponent:xI},{key:"google",title:"Google",logo:"google.svg"},{key:"microsoft",title:"Microsoft",logo:"microsoft.svg",optionsComponent:TI},{key:"yandex",title:"Yandex",logo:"yandex.svg"},{key:"facebook",title:"Facebook",logo:"facebook.svg"},{key:"instagram2",title:"Instagram",logo:"instagram.svg"},{key:"github",title:"GitHub",logo:"github.svg"},{key:"gitlab",title:"GitLab",logo:"gitlab.svg",optionsComponent:Uc,optionsComponentProps:{title:"Self-hosted endpoints (optional)"}},{key:"bitbucket",title:"Bitbucket",logo:"bitbucket.svg"},{key:"gitee",title:"Gitee",logo:"gitee.svg"},{key:"gitea",title:"Gitea",logo:"gitea.svg",optionsComponent:Uc,optionsComponentProps:{title:"Self-hosted endpoints (optional)"}},{key:"discord",title:"Discord",logo:"discord.svg"},{key:"twitter",title:"X/Twitter",logo:"twitter.svg"},{key:"kakao",title:"Kakao",logo:"kakao.svg"},{key:"vk",title:"VK",logo:"vk.svg"},{key:"linear",title:"Linear",logo:"linear.svg"},{key:"notion",title:"Notion",logo:"notion.svg"},{key:"monday",title:"monday.com",logo:"monday.svg"},{key:"box",title:"Box",logo:"box.svg"},{key:"spotify",title:"Spotify",logo:"spotify.svg"},{key:"trakt",title:"Trakt",logo:"trakt.svg"},{key:"twitch",title:"Twitch",logo:"twitch.svg"},{key:"patreon",title:"Patreon (v2)",logo:"patreon.svg"},{key:"strava",title:"Strava",logo:"strava.svg"},{key:"wakatime",title:"WakaTime",logo:"wakatime.svg"},{key:"livechat",title:"LiveChat",logo:"livechat.svg"},{key:"mailcow",title:"mailcow",logo:"mailcow.svg",optionsComponent:Uc,optionsComponentProps:{required:!0}},{key:"planningcenter",title:"Planning Center",logo:"planningcenter.svg"},{key:"oidc",title:"OpenID Connect",logo:"oidc.svg",optionsComponent:Vc},{key:"oidc2",title:"(2) OpenID Connect",logo:"oidc.svg",optionsComponent:Vc},{key:"oidc3",title:"(3) OpenID Connect",logo:"oidc.svg",optionsComponent:Vc}];var BI=S('<button type="button" class="btn btn-transparent btn-sm btn-hint p-l-xs p-r-xs m-l-10"><span class="txt">Clear</span></button>'),HI=S('<label class="m-l-10 txt-xl"><i class="ri-search-line"></i></label> <input type="text" placeholder="Search provider"/> <!>',1),WI=S("<img/>"),YI=S('<div class="col-6"><button type="button" class="provider-card handle"><figure class="provider-logo"><!></figure> <div class="content"><div class="title"> </div> <em class="txt-hint txt-sm m-r-auto"> </em></div></button></div>'),KI=S('<button type="button" class="btn btn-sm btn-secondary">Clear filter</button>'),ZI=S('<div class="flex inline-flex"><span class="txt-hint">No providers to select.</span> <!></div>'),JI=S('<!> <div class="grid grid-sm"></div>',1),GI=S('<h4 class="center txt-break">Add OAuth2 provider</h4>'),XI=S('<button type="button" class="btn btn-transparent">Cancel</button>');function QI(n,e){Ue(e,!1);const t=zt();let i=ee(e,"disabled",24,()=>[]),a=P(),s=P(""),o=P([]);function l(){f(),r(a)?.show()}function c(){return r(a)?.hide()}function u(h){t("select",h),c()}function d(){const h=(r(s)||"").toLowerCase();return Nd.filter(b=>!i().includes(b.key)&&(h==""||b.key.toLowerCase().includes(h)||b.title.toLowerCase().includes(h)))}function f(){_(s,"")}return ne(()=>(r(s),R(i())),()=>{(r(s)!==-1||i()!==-1)&&_(o,d())}),ft(),He(),mt(pn(n,{btnClose:!1,$$events:{show(h){ot.call(this,e,h)},hide(h){ot.call(this,e,h)}},children:(h,b)=>{var v=JI(),g=q(v);Pe(g,{class:"searchbar m-b-sm",children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=HI(),$=q(O),E=y($,2),w=y(E,2);{var I=D=>{var A=BI();Et(3,A,()=>Kr,()=>({duration:150,x:5})),re("click",A,()=>_(s,"")),p(D,A)};G(w,D=>{r(s)!=""&&D(I)})}z(()=>{W($,"for",r(C)),W(E,"id",r(C))}),xt(E,()=>r(s),D=>_(s,D)),p(k,O)}}});var m=y(g,2);bt(m,5,()=>r(o),k=>k.key,(k,x)=>{var C=YI(),O=T(C),$=T(O),E=T($);{var w=H=>{var j=WI();z(()=>{W(j,"src",`${M(()=>"./")??""}images/oauth2/${r(x),M(()=>r(x).logo)??""}`),W(j,"alt",`${r(x),M(()=>r(x).title)??""} logo`)}),p(H,j)};G(E,H=>{r(x),M(()=>r(x).logo)&&H(w)})}var I=y($,2),D=T(I),A=T(D),L=y(D,2),N=T(L);z(()=>{Te(A,(r(x),M(()=>r(x).title))),Te(N,(r(x),M(()=>r(x).key)))}),re("click",O,()=>u(r(x))),p(k,C)},k=>{var x=ZI(),C=y(T(x),2);{var O=$=>{var E=KI();re("click",E,f),p($,E)};G(C,$=>{r(s)!=""&&$(O)})}p(k,x)}),p(h,v)},$$slots:{default:!0,header:(h,b)=>{var v=GI();p(h,v)},footer:(h,b)=>{var v=XI();re("click",v,c),p(h,v)}},$$legacy:!0}),h=>_(a,h),()=>r(a)),_t(e,"show",l),_t(e,"hide",c),Be({show:l,hide:c})}var eC=S('<input type="checkbox"/> <label>Enable</label>',1),tC=S("<img/>"),nC=S('<i class="ri-puzzle-line txt-sm txt-hint"></i>'),iC=S('<button type="button" class="btn btn-circle btn-hint btn-transparent" aria-label="Provider settings"><i class="ri-settings-4-line"></i></button>'),rC=S('<div class="col-lg-6"><div><figure class="provider-logo"><!></figure> <div class="content"><div class="title"> </div> <em class="txt-hint txt-sm m-r-auto"> </em></div> <!></div></div>'),aC=S('<i class="ri-arrow-up-s-line txt-sm"></i>'),sC=S('<i class="ri-arrow-down-s-line txt-sm"></i>'),oC=S("<label>OAuth2 full name</label> <!>",1),lC=S("<label>OAuth2 avatar</label> <!>",1),cC=S("<label>OAuth2 id</label> <!>",1),uC=S("<label>OAuth2 username</label> <!>",1),dC=S('<div class="block"><div class="grid grid-sm p-t-xs"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div></div>'),fC=S('<!> <div class="grid grid-sm"><!> <div class="col-lg-6"><button class="btn btn-block btn-lg btn-secondary txt-base"><i class="ri-add-line"></i> <span class="txt">Add provider</span></button></div></div> <button type="button"><strong class="txt"> </strong> <!></button> <!>',1),hC=S('<span> </span> <span class="label label-success">Enabled</span>',1),vC=S('<span class="label">Disabled</span>'),mC=S('<i class="ri-error-warning-fill txt-danger"></i>'),pC=S('<div class="inline-flex"><i class="ri-pass-expired-line"></i> <span class="txt">OAuth2</span></div> <div class="flex-fill"></div> <!> <!>',1),gC=S("<!> <!> <!>",1);function bC(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s=P(),o=P();let l=ee(e,"collection",12);const c=["id","email","emailVisibility","verified","tokenKey","password"],u=["text","editor","url","email","json"],d=u.concat("file");let f=P(),h=P(),b=P(!1),v=P([]),g=P([]);function m(E=[]){_(v,E?.filter(w=>u.includes(w.type)&&!c.includes(w.name))?.map(w=>w.name)||[]),_(g,E?.filter(w=>d.includes(w.type)&&!c.includes(w.name))?.map(w=>w.name)||[])}function k(E){for(let w of Nd)if(w.key==E)return w;return null}ne(()=>R(l()),()=>{m(l().fields)}),ne(()=>R(l()),()=>{F.isEmpty(l().oauth2)&&l(l().oauth2={enabled:!1,mappedFields:{},providers:[]},!0)}),ne(()=>a(),()=>{_(s,!F.isEmpty(a()?.oauth2))}),ne(()=>R(l()),()=>{_(o,l().oauth2?.providers?.length||0)}),ft(),He();var x=gC(),C=q(x);Dr(C,{single:!0,children:(E,w)=>{var I=fC(),D=q(I);Pe(D,{class:"form-field form-field-toggle",name:"oauth2.enabled",children:Ce,$$slots:{default:(ge,pe)=>{const xe=ie(()=>pe.uniqueId);var ve=eC(),Ee=q(ve),ce=y(Ee,2);z(()=>{W(Ee,"id",r(xe)),W(ce,"for",r(xe))}),Qt(Ee,()=>l().oauth2.enabled,he=>l(l().oauth2.enabled=he,!0)),p(ge,ve)}}});var A=y(D,2),L=T(A);bt(L,3,()=>(R(l()),M(()=>l().oauth2.providers)),ge=>ge.name,(ge,pe,xe)=>{const ve=ie(()=>(r(pe),M(()=>k(r(pe).name))));var Ee=rC(),ce=T(Ee);let he;var be=T(ce),we=T(be);{var ue=ze=>{var Me=tC();z(()=>{W(Me,"src",`${M(()=>"./")??""}images/oauth2/${R(r(ve)),M(()=>r(ve).logo)??""}`),W(Me,"alt",`${R(r(ve)),M(()=>r(ve).title)??""} logo`)}),p(ze,Me)},me=ze=>{var Me=nC();p(ze,Me)};G(we,ze=>{R(r(ve)),M(()=>r(ve)?.logo)?ze(ue):ze(me,!1)})}var ae=y(be,2),te=T(ae),se=T(te),ye=y(te,2),ke=T(ye),Ie=y(ae,2);{var Ne=ze=>{var Me=iC();Qe(Me,(Ge,_e)=>dt?.(Ge,_e),()=>({text:"Edit config",position:"left"})),Rt(()=>re("click",Me,()=>{r(h)?.show(r(ve),r(pe),r(xe))})),p(ze,Me)};G(Ie,ze=>{r(ve)&&ze(Ne)})}z(ze=>{he=Re(ce,1,"provider-card",null,he,ze),Te(se,(r(pe),R(r(ve)),M(()=>r(pe).displayName||r(ve)?.title||"Custom"))),Te(ke,(r(pe),M(()=>r(pe).name)))},[()=>({error:!F.isEmpty(a()?.oauth2?.providers?.[r(xe)])})]),p(ge,Ee)});var N=y(L,2),H=T(N),j=y(A,2),V=T(j),U=T(V),B=y(V,2);{var J=ge=>{var pe=aC();p(ge,pe)},Q=ge=>{var pe=sC();p(ge,pe)};G(B,ge=>{r(b)?ge(J):ge(Q,!1)})}var oe=y(j,2);{var de=ge=>{var pe=dC(),xe=T(pe),ve=T(xe),Ee=T(ve);Pe(Ee,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.name",children:Ce,$$slots:{default:(ae,te)=>{const se=ie(()=>te.uniqueId);var ye=oC(),ke=q(ye),Ie=y(ke,2);Wa(Ie,{get id(){return r(se)},get items(){return r(v)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.name},set selected(Ne){l(l().oauth2.mappedFields.name=Ne,!0)},$$legacy:!0}),z(()=>W(ke,"for",r(se))),p(ae,ye)}}});var ce=y(ve,2),he=T(ce);Pe(he,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.avatarURL",children:Ce,$$slots:{default:(ae,te)=>{const se=ie(()=>te.uniqueId);var ye=lC(),ke=q(ye),Ie=y(ke,2);Wa(Ie,{get id(){return r(se)},get items(){return r(g)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.avatarURL},set selected(Ne){l(l().oauth2.mappedFields.avatarURL=Ne,!0)},$$legacy:!0}),z(()=>W(ke,"for",r(se))),p(ae,ye)}}});var be=y(ce,2),we=T(be);Pe(we,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.id",children:Ce,$$slots:{default:(ae,te)=>{const se=ie(()=>te.uniqueId);var ye=cC(),ke=q(ye),Ie=y(ke,2);Wa(Ie,{get id(){return r(se)},get items(){return r(v)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.id},set selected(Ne){l(l().oauth2.mappedFields.id=Ne,!0)},$$legacy:!0}),z(()=>W(ke,"for",r(se))),p(ae,ye)}}});var ue=y(be,2),me=T(ue);Pe(me,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.username",children:Ce,$$slots:{default:(ae,te)=>{const se=ie(()=>te.uniqueId);var ye=uC(),ke=q(ye),Ie=y(ke,2);Wa(Ie,{get id(){return r(se)},get items(){return r(v)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.username},set selected(Ne){l(l().oauth2.mappedFields.username=Ne,!0)},$$legacy:!0}),z(()=>W(ke,"for",r(se))),p(ae,ye)}}}),Et(3,pe,()=>mn,()=>({duration:150})),p(ge,pe)};G(oe,ge=>{r(b)&&ge(de)})}z(()=>{Re(j,1,`m-t-25 btn btn-sm ${r(b)?"btn-secondary":"btn-hint btn-transparent"}`),Te(U,`Optional ${R(l()),M(()=>l().name)??""} create fields map`)}),re("click",H,()=>r(f)?.show()),re("click",j,()=>_(b,!r(b))),p(E,I)},$$slots:{default:!0,header:(E,w)=>{var I=pC(),D=y(q(I),4);{var A=j=>{var V=hC(),U=q(V);let B;var J=T(U);z(Q=>{B=Re(U,1,"label",null,B,Q),Te(J,`${r(o)??""}
                ${r(o)==1?"provider":"providers"}`)},[()=>({"label-warning":!r(o),"label-info":r(o)>0})]),p(j,V)},L=j=>{var V=vC();p(j,V)};G(D,j=>{R(l()),M(()=>l().oauth2.enabled)?j(A):j(L,!1)})}var N=y(D,2);{var H=j=>{var V=mC();Qe(V,(U,B)=>dt?.(U,B),()=>({text:"Has errors",position:"left"})),Et(3,V,()=>Fn,()=>({duration:150,start:.7})),p(j,V)};G(N,j=>{r(s)&&j(H)})}p(E,I)}}});var O=y(C,2);{let E=ie(()=>(R(l()),M(()=>l().oauth2?.providers?.map(w=>w.name)||[])));mt(QI(O,{get disabled(){return r(E)},$$events:{select:w=>{r(h).show(w.detail,{},l().oauth2?.providers?.length||0)}},$$legacy:!0}),w=>_(f,w),()=>r(f))}var $=y(O,2);mt(uI($,{$$events:{remove:E=>{const w=E.detail.uiOptions;F.removeByKey(l().oauth2.providers,"name",w.key),l(l().oauth2.providers=l().oauth2.providers,!0)},submit:E=>{const w=E.detail.uiOptions,I=E.detail.config;l(l().oauth2.providers=l().oauth2.providers||[],!0),F.pushOrReplaceByKey(l().oauth2.providers,Object.assign({name:w.key},I),"name"),l(l().oauth2.providers=l().oauth2.providers,!0)}},$$legacy:!0}),E=>_(h,E),()=>r(h)),p(n,x),Be(),i()}var yC=S('<i class="ri-information-line link-hint"></i>'),_C=S('<input type="checkbox"/> <label>Enable</label> <!>',1),xC=S('<label>Duration (in seconds)</label> <input type="number" min="0" step="1" required/>',1),wC=S('<label>Generated password length</label> <input type="number" min="0" step="1" required/>',1),kC=S('<!> <div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>',1),SC=S('<span class="label label-success">Enabled</span>'),TC=S('<span class="label">Disabled</span>'),$C=S('<i class="ri-error-warning-fill txt-danger"></i>'),IC=S('<div class="inline-flex"><i class="ri-time-line"></i> <span class="txt">One-time password (OTP)</span></div> <div class="flex-fill"></div> <!> <!>',1);function CC(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s=P(),o=P();let l=ee(e,"collection",12);ne(()=>R(l()),()=>{_(s,l()?.system&&l()?.name==="_superusers")}),ne(()=>R(l()),()=>{F.isEmpty(l().otp)&&l(l().otp={enabled:!0,duration:300,length:8},!0)}),ne(()=>a(),()=>{_(o,!F.isEmpty(a()?.otp))}),ft(),He(),Dr(n,{single:!0,children:(c,u)=>{var d=kC(),f=q(d);Pe(f,{class:"form-field form-field-toggle",name:"otp.enabled",children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=_C(),$=q(O),E=y($,2),w=y(E,2);{var I=D=>{var A=yC();Qe(A,(L,N)=>dt?.(L,N),()=>({text:"Superusers can have OTP only as part of Two-factor authentication.",position:"right"})),p(D,A)};G(w,D=>{r(s)&&D(I)})}z(()=>{W($,"id",r(C)),W(E,"for",r(C))}),Qt($,()=>l().otp.enabled,D=>l(l().otp.enabled=D,!0)),re("change",$,D=>{r(s)&&l(l().mfa.enabled=D.target.checked,!0)}),p(k,O)}}});var h=y(f,2),b=T(h),v=T(b);Pe(v,{class:"form-field form-field-toggle required",name:"otp.duration",children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=xC(),$=q(O),E=y($,2);z(()=>{W($,"for",r(C)),W(E,"id",r(C))}),xt(E,()=>l().otp.duration,w=>l(l().otp.duration=w,!0)),p(k,O)}}});var g=y(b,2),m=T(g);Pe(m,{class:"form-field form-field-toggle required",name:"otp.length",children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=wC(),$=q(O),E=y($,2);z(()=>{W($,"for",r(C)),W(E,"id",r(C))}),xt(E,()=>l().otp.length,w=>l(l().otp.length=w,!0)),p(k,O)}}}),p(c,d)},$$slots:{default:!0,header:(c,u)=>{var d=IC(),f=y(q(d),4);{var h=m=>{var k=SC();p(m,k)},b=m=>{var k=TC();p(m,k)};G(f,m=>{R(l()),M(()=>l().otp.enabled)?m(h):m(b,!1)})}var v=y(f,2);{var g=m=>{var k=$C();Qe(k,(x,C)=>dt?.(x,C),()=>({text:"Has errors",position:"left"})),Et(3,k,()=>Fn,()=>({duration:150,start:.7})),p(m,k)};G(v,m=>{r(o)&&m(g)})}p(c,d)}}}),Be(),i()}var EC=S('<i class="ri-information-line link-hint"></i>'),OC=S('<input type="checkbox"/> <label>Enable</label> <!>',1),DC=S('<label><span class="txt">Unique identity fields</span></label> <!>',1),PC=S("<!> <!>",1),MC=S('<span class="label label-success">Enabled</span>'),AC=S('<span class="label">Disabled</span>'),LC=S('<i class="ri-error-warning-fill txt-danger"></i>'),NC=S('<div class="inline-flex"><i class="ri-lock-password-line"></i> <span class="txt">Identity/Password</span></div> <div class="flex-fill"></div> <!> <!>',1);function RC(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s=P(),o=P();let l=ee(e,"collection",12),c=P([]),u=P("");function d(){_(c,[{value:"email"}]);const f=l()?.fields||[],h=l()?.indexes||[];_(u,h.join(""));for(let b of h){const v=F.parseIndex(b);if(!v.unique||v.columns.length!=1||v.columns[0].name=="email")continue;const g=f.find(m=>!m.hidden&&m.name.toLowerCase()==v.columns[0].name.toLowerCase());g&&r(c).push({value:g.name})}}ne(()=>R(l()),()=>{_(s,l()?.system&&l()?.name==="_superusers")}),ne(()=>R(l()),()=>{F.isEmpty(l()?.passwordAuth)&&l(l().passwordAuth={enabled:!0,identityFields:["email"]},!0)}),ne(()=>a(),()=>{_(o,!F.isEmpty(a()?.passwordAuth))}),ne(()=>(R(l()),r(u)),()=>{l()&&r(u)!=l().indexes.join("")&&d()}),ft(),He(),Dr(n,{single:!0,children:(f,h)=>{var b=PC(),v=q(b);Pe(v,{class:"form-field form-field-toggle",name:"passwordAuth.enabled",children:Ce,$$slots:{default:(m,k)=>{const x=ie(()=>k.uniqueId);var C=OC(),O=q(C),$=y(O,2),E=y($,2);{var w=I=>{var D=EC();Qe(D,(A,L)=>dt?.(A,L),()=>({text:"Superusers are required to have password auth enabled.",position:"right"})),p(I,D)};G(E,I=>{r(s)&&I(w)})}z(()=>{W(O,"id",r(x)),O.disabled=r(s),W($,"for",r(x))}),Qt(O,()=>l().passwordAuth.enabled,I=>l(l().passwordAuth.enabled=I,!0)),p(m,C)}}});var g=y(v,2);Pe(g,{class:"form-field required m-0",name:"passwordAuth.identityFields",children:Ce,$$slots:{default:(m,k)=>{const x=ie(()=>k.uniqueId);var C=DC(),O=q(C),$=y(O,2);Nn($,{get items(){return r(c)},multiple:!0,get keyOfSelected(){return l().passwordAuth.identityFields},set keyOfSelected(E){l(l().passwordAuth.identityFields=E,!0)},$$legacy:!0}),z(()=>W(O,"for",r(x))),p(m,C)}}}),p(f,b)},$$slots:{default:!0,header:(f,h)=>{var b=NC(),v=y(q(b),4);{var g=C=>{var O=MC();p(C,O)},m=C=>{var O=AC();p(C,O)};G(v,C=>{R(l()),M(()=>l().passwordAuth.enabled)?C(g):C(m,!1)})}var k=y(v,2);{var x=C=>{var O=LC();Qe(O,($,E)=>dt?.($,E),()=>({text:"Has errors",position:"left"})),Et(3,O,()=>Fn,()=>({duration:150,start:.7})),p(C,O)};G(k,C=>{r(o)&&C(x)})}p(f,b)}}}),Be(),i()}var FC=S('<div class="form-field-block"><input type="radio" name="template"/> <label> </label></div>'),qC=S("<label>Auth collection</label> <!>",1),zC=S('<label>To email address</label> <input type="email" required/>',1),jC=S('<form autocomplete="off"><!> <!> <!></form>'),VC=S('<h4 class="center txt-break">Send test email</h4>'),UC=S('<button type="button" class="btn btn-transparent">Close</button> <button type="submit"><i class="ri-mail-send-line"></i> <span class="txt">Send</span></button>',1);function Kg(n,e){Ue(e,!1);const t=P(),i=[],a=zt(),s="email_test_"+F.randomString(5),o="last_email_test",l="email_test_request",c=[{label:"Verification",value:"verification"},{label:"Password reset",value:"password-reset"},{label:"Confirm email change",value:"email-change"},{label:"OTP",value:"otp"},{label:"Login alert",value:"login-alert"}];let u=P(),d=P(""),f=P(localStorage.getItem(o)),h=P(c[0].value),b=P(!1),v=null,g=P([]),m=P(!1),k=P(!1);function x(E="",w="",I=""){rn({}),_(k,!1),_(d,E||""),r(d)||$(),_(f,w||localStorage.getItem(o)),_(h,I||c[0].value),r(u)?.show()}function C(){return clearTimeout(v),r(u)?.hide()}async function O(){if(!(!r(t)||r(b)||!r(d))){_(b,!0),localStorage?.setItem(o,r(f)),clearTimeout(v),v=setTimeout(()=>{Le.cancelRequest(l),ur("Test email send timeout.")},3e4);try{await Le.settings.testEmail(r(d),r(f),r(h),{$cancelKey:l}),vn("Successfully sent test email."),a("submit"),_(b,!1),await Tn(),C()}catch(E){_(b,!1),Le.error(E)}clearTimeout(v)}}async function $(){_(k,!0),_(m,!0);try{_(g,await Le.collections.getFullList({filter:"type='auth'",sort:"+name",requestKey:s+"_collections_loading"})),_(d,r(g)[0]?.id||""),_(m,!1)}catch(E){E.isAbort||(_(m,!1),Le.error(E))}}ne(()=>(r(f),r(h),r(d)),()=>{_(t,!!r(f)&&!!r(h)&&!!r(d))}),ft(),He();{let E=ie(()=>!r(b)),w=ie(()=>!r(b));mt(pn(n,{class:"overlay-panel-sm email-test-popup",get overlayClose(){return r(E)},get escClose(){return r(w)},beforeHide:()=>!r(b),popup:!0,$$events:{show(I){ot.call(this,e,I)},hide(I){ot.call(this,e,I)}},children:(I,D)=>{var A=jC(),L=T(A);Pe(L,{class:"form-field required",name:"template",children:Ce,$$slots:{default:(V,U)=>{const B=ie(()=>U.uniqueId);var J=tt(),Q=q(J);bt(Q,1,()=>c,oe=>oe.value,(oe,de)=>{var ge=FC(),pe=T(ge),xe,ve=y(pe,2),Ee=T(ve);z(()=>{W(pe,"id",(R(r(B)),r(de),M(()=>r(B)+r(de).value))),xe!==(xe=(r(de),M(()=>r(de).value)))&&(pe.value=(pe.__value=(r(de),M(()=>r(de).value)))??""),W(ve,"for",(R(r(B)),r(de),M(()=>r(B)+r(de).value))),Te(Ee,(r(de),M(()=>r(de).label)))}),Ay(i,[],pe,()=>(r(de),M(()=>r(de).value),r(h)),ce=>_(h,ce)),p(oe,ge)}),p(V,J)}}});var N=y(L,2);{var H=V=>{Pe(V,{class:"form-field required",name:"collection",children:Ce,$$slots:{default:(U,B)=>{const J=ie(()=>B.uniqueId);var Q=qC(),oe=q(Q),de=y(oe,2);{let ge=ie(()=>r(m)?"Loading auth collections...":"Select auth collection");Nn(de,{get id(){return r(J)},get selectPlaceholder(){return r(ge)},noOptionsText:"No auth collections found",selectionKey:"id",get items(){return r(g)},get keyOfSelected(){return r(d)},set keyOfSelected(pe){_(d,pe)},$$legacy:!0})}z(()=>W(oe,"for",r(J))),p(U,Q)}}})};G(N,V=>{r(k)&&V(H)})}var j=y(N,2);Pe(j,{class:"form-field required m-0",name:"email",children:Ce,$$slots:{default:(V,U)=>{const B=ie(()=>U.uniqueId);var J=zC(),Q=q(J),oe=y(Q,2);Ui(oe,!0),z(()=>{W(Q,"for",r(B)),W(oe,"id",r(B))}),xt(oe,()=>r(f),de=>_(f,de)),p(V,J)}}}),z(()=>W(A,"id",s)),re("submit",A,Ct(()=>O())),p(I,A)},$$slots:{default:!0,header:(I,D)=>{var A=VC();p(I,A)},footer:(I,D)=>{var A=UC(),L=q(A),N=y(L,2);let H;z(j=>{L.disabled=r(b),W(N,"form",s),H=Re(N,1,"btn btn-expanded",null,H,j),N.disabled=!r(t)||r(b)},[()=>({"btn-loading":r(b)})]),re("click",L,C),p(I,A)}},$$legacy:!0}),I=>_(u,I),()=>r(u))}return _t(e,"show",x),_t(e,"hide",C),Be({show:x,hide:C})}var BC=S('<input type="checkbox"/> <label>Send email alert for new logins</label>',1),HC=S('<h4 class="section-title"><div class="flex"><span class="txt">Auth methods</span> <div class="m-l-auto handle"><!></div></div></h4> <div class="accordions m-b-35"><!> <!> <!> <!></div> <h4 class="section-title"><span class="txt">Mail templates</span> <button type="button" class="btn btn-xs m-l-auto btn-secondary">Send test email</button></h4> <div class="accordions m-b-35"><div class="accordions"></div></div> <h4 class="section-title">Other</h4> <div class="accordions m-b-base"><!></div> <!>',1);function WC(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=P(),o=P(),l=P();let c=ee(e,"collection",12),u=P([]),d=P();ne(()=>R(c()),()=>{_(t,c().system&&c().name==="_superusers")}),ne(()=>R(c()),()=>{typeof c().otp?.emailTemplate>"u"&&(c(c().otp=c().otp||{},!0),c(c().otp.emailTemplate={},!0))}),ne(()=>R(c()),()=>{typeof c().authAlert?.emailTemplate>"u"&&(c(c().authAlert=c().authAlert||{},!0),c(c().authAlert.emailTemplate={},!0))}),ne(()=>R(c()),()=>{_(i,{key:"resetPasswordTemplate",label:"Default Password reset email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().resetPasswordTemplate})}),ne(()=>R(c()),()=>{_(a,{key:"verificationTemplate",label:"Default Verification email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().verificationTemplate})}),ne(()=>R(c()),()=>{_(s,{key:"confirmEmailChangeTemplate",label:"Default Confirm email change email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().confirmEmailChangeTemplate})}),ne(()=>R(c()),()=>{_(o,{key:"otp.emailTemplate",label:"Default OTP email template",placeholders:["APP_NAME","APP_URL","RECORD:*","OTP","OTP_ID"],config:c().otp.emailTemplate})}),ne(()=>R(c()),()=>{_(l,{key:"authAlert.emailTemplate",label:"Default Login alert email template",placeholders:["APP_NAME","APP_URL","RECORD:*"],config:c().authAlert.emailTemplate})}),ne(()=>(r(t),r(i),r(o),r(l),r(a),r(s)),()=>{_(u,r(t)?[r(i),r(o),r(l)]:[r(a),r(i),r(s),r(o),r(l)])}),ft(),He();var f=HC(),h=q(f),b=T(h),v=y(T(b),2),g=T(v);Pe(g,{class:"form-field form-field-sm form-field-toggle m-0",name:"authAlert.enabled",inlineError:!0,children:Ce,$$slots:{default:(H,j)=>{const V=ie(()=>j.uniqueId);var U=BC(),B=q(U),J=y(B,2);z(()=>{W(B,"id",r(V)),W(J,"for",r(V))}),Qt(B,()=>c().authAlert.enabled,Q=>c(c().authAlert.enabled=Q,!0)),p(H,U)}}});var m=y(h,2),k=T(m);RC(k,{get collection(){return c()},set collection(H){c(H)},$$legacy:!0});var x=y(k,2);{var C=H=>{bC(H,{get collection(){return c()},set collection(j){c(j)},$$legacy:!0})};G(x,H=>{r(t)||H(C)})}var O=y(x,2);CC(O,{get collection(){return c()},set collection(H){c(H)},$$legacy:!0});var $=y(O,2);V$($,{get collection(){return c()},set collection(H){c(H)},$$legacy:!0});var E=y(m,2),w=y(T(E),2),I=y(E,2),D=T(I);bt(D,5,()=>r(u),H=>H.key,(H,j,V)=>{{let U=ie(()=>(r(j),M(()=>r(j)?.placeholders)));w$(H,{single:!0,get key(){return r(j),M(()=>r(j).key)},get title(){return r(j),M(()=>r(j).label)},get placeholders(){return r(U)},get config(){return r(j).config},set config(B){r(j).config=B,fa(()=>r(u))},$$legacy:!0})}});var A=y(I,4),L=T(A);E$(L,{get collection(){return c()},set collection(H){c(H)},$$legacy:!0});var N=y(A,2);mt(Kg(N,{$$legacy:!0}),H=>_(d,H),()=>r(d)),re("click",w,()=>r(d)?.show(c().id)),p(n,f),Be()}var YC=S("<div><!></div>");function cs(n,e){Ue(e,!1);const t=zt();let i=ee(e,"index",8),a=ee(e,"list",28,()=>[]),s=ee(e,"group",8,"default"),o=ee(e,"disabled",8,!1),l=ee(e,"dragHandleClass",8,""),c=P(!1),u=P(!1);function d(g,m){if(!(!g||o())){if(l()&&!g.target.classList.contains(l())){_(u,!1),_(c,!1),g.preventDefault();return}_(c,!0),g.dataTransfer.effectAllowed="move",g.dataTransfer.dropEffect="move",g.dataTransfer.setData("text/plain",JSON.stringify({index:m,group:s()})),t("drag",g)}}function f(g,m){if(_(u,!1),_(c,!1),!g||o())return;g.dataTransfer.dropEffect="move";let k={};try{k=JSON.parse(g.dataTransfer.getData("text/plain"))}catch{}if(k.group!=s())return;const x=k.index<<0;x<m?(a().splice(m+1,0,a()[x]),a().splice(x,1)):(a().splice(m,0,a()[x]),a().splice(x+1,1)),a(a()),t("sort",{oldIndex:x,newIndex:m,list:a()})}He();var h=YC();let b;var v=T(h);Gt(v,e,"default",{get dragging(){return r(c)},get dragover(){return r(u)}},null),z(g=>{W(h,"draggable",!o()),b=Re(h,1,"draggable svelte-1j1ab0p",null,b,g)},[()=>({dragging:r(c),dragover:r(u)})]),re("dragover",h,Ct(()=>{_(u,!0)})),re("dragleave",h,Ct(()=>{_(u,!1)})),re("dragend",h,()=>{_(u,!1),_(c,!1)}),re("dragstart",h,g=>d(g,i())),re("drop",h,g=>f(g,i())),p(n,h),Be()}var KC=S('<input type="checkbox"/> <label>Unique</label>',1),ZC=S('<textarea disabled rows="7" placeholder="Loading..."></textarea>'),JC=S('<button type="button"> </button>'),GC=S('<div class="inline-flex gap-10"><span class="txt txt-hint">Presets</span> <!></div>'),XC=S("<!> <!> <!>",1),QC=S("<h4> </h4>"),eE=S('<button type="button" class="btn btn-sm btn-circle btn-hint btn-transparent m-r-auto"><i class="ri-delete-bin-7-line"></i></button>'),tE=S('<!> <button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button"><span class="txt">Set index</span></button>',1);function nE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["show","hide","collection"]);Ue(e,!1);const a=P(),s=P(),o=P(),l=zt();let c=ee(e,"collection",8),u=P(),d=P(""),f=P(""),h=P(""),b=P(),v=P(!1);function g($,E){return _(h,F.isEmpty(E)?"":E),_(d,$||k()),_(f,r(d)),r(u)?.show()}function m(){return r(u)?.hide()}function k(){const $=F.parseIndex("");return $.tableName=c()?.name||"",F.buildIndex($)}function x(){l("remove",r(d)),m()}function C(){r(o).length&&(l("submit",{old:r(d),new:r(f)}),m())}function O($){const E=F.clone(r(s)),w=E.columns.find(I=>I.name==$);w?F.removeByValue(E.columns,w):F.pushUnique(E.columns,{name:$}),_(f,F.buildIndex(E))}return un(async()=>{_(v,!0);try{_(b,(await Ut(async()=>{const{default:$}=await import("./CodeEditor-Bk8QeLSV.js");return{default:$}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch($){console.warn($)}_(v,!1)}),ne(()=>R(c()),()=>{_(a,c()?.fields?.filter($=>!$.toDelete&&$.name!="id")?.map($=>$.name)||[])}),ne(()=>r(f),()=>{_(s,F.parseIndex(r(f)))}),ne(()=>r(s),()=>{_(o,r(s).columns?.map($=>$.name)||[])}),ft(),He(),mt(pn(n,tn({popup:!0},()=>i,{$$events:{hide($){ot.call(this,e,$)},show($){ot.call(this,e,$)}},children:($,E)=>{var w=XC(),I=q(w);Pe(I,{class:"form-field form-field-toggle m-b-sm",children:Ce,$$slots:{default:(N,H)=>{const j=ie(()=>H.uniqueId);var V=KC(),U=q(V),B=y(U,2);z(()=>{W(U,"id",r(j)),Ur(U,(r(s),M(()=>r(s).unique))),W(B,"for",r(j))}),re("change",U,J=>{ut(s,r(s).unique=J.target.checked),ut(s,r(s).tableName=r(s).tableName||c()?.name),_(f,F.buildIndex(r(s)))}),p(N,V)}}});var D=y(I,2);{let N=ie(()=>`indexes.${r(h)||""}`);Pe(D,{class:"form-field required m-b-sm",get name(){return r(N)},children:Ce,$$slots:{default:(H,j)=>{const V=ie(()=>j.uniqueId);var U=tt(),B=q(U);{var J=oe=>{var de=ZC();p(oe,de)},Q=oe=>{var de=tt(),ge=q(de);{let pe=ie(()=>(R(c()),M(()=>`eg. CREATE INDEX idx_test on ${c()?.name} (created)`)));pi(ge,()=>r(b),(xe,ve)=>{ve(xe,{get id(){return r(V)},get placeholder(){return r(pe)},language:"sql-create-index",minHeight:"85",get value(){return r(f)},set value(Ee){_(f,Ee)},$$legacy:!0})})}p(oe,de)};G(B,oe=>{r(v)?oe(J):oe(Q,!1)})}p(H,U)}}})}var A=y(D,2);{var L=N=>{var H=GC(),j=y(T(H),2);bt(j,1,()=>r(a),At,(V,U)=>{var B=JC();let J;var Q=T(B);z(oe=>{J=Re(B,1,"label link-primary",null,J,oe),Te(Q,r(U))},[()=>({"label-info":r(o).includes(r(U))})]),re("click",B,()=>O(r(U))),p(V,B)}),p(N,H)};G(A,N=>{r(a),M(()=>r(a).length>0)&&N(L)})}p($,w)},$$slots:{default:!0,header:($,E)=>{var w=QC(),I=T(w);z(()=>Te(I,`${r(d)?"Update":"Create"} index`)),p($,w)},footer:($,E)=>{var w=tE(),I=q(w);{var D=H=>{var j=eE();Qe(j,(V,U)=>dt?.(V,U),()=>({text:"Delete",position:"top"})),Rt(()=>re("click",j,()=>x())),p(H,j)};G(I,H=>{r(d)!=""&&H(D)})}var A=y(I,2),L=y(A,2);let N;z(H=>N=Re(L,1,"btn",null,N,H),[()=>({"btn-disabled":r(o).length<=0})]),re("click",A,()=>m()),re("click",L,()=>C()),p($,w)}},$$legacy:!0})),$=>_(u,$),()=>r(u)),_t(e,"show",g),_t(e,"hide",m),Be({show:g,hide:m})}var iE=S('<i class="ri-error-warning-fill txt-danger"></i>'),rE=S("<strong>Unique:</strong>"),aE=S('<button type="button"><!> <span class="txt"> </span></button>'),sE=S('<div class="section-title"> <!></div> <div class="indexes-list svelte-167lbwu"><!> <button type="button" class="btn btn-xs btn-transparent btn-pill btn-outline"><span class="txt">+</span> <span class="txt">New index</span></button></div> <!>',1);function oE(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t);let s=ee(e,"collection",12),o=P();function l(k,x){for(let C=0;C<s().indexes.length;C++)if(s().indexes[C]==k){s(s().indexes[C]=x,!0),Gn("indexes."+C);return}s().indexes.push(x),s(s().indexes=s().indexes,!0)}He();var c=sE(),u=q(c),d=T(u),f=y(d);{var h=k=>{var x=iE();Qe(x,(C,O)=>dt?.(C,O),()=>a()?.indexes.message),Et(3,x,()=>Fn,()=>({duration:150})),p(k,x)};G(f,k=>{a(),M(()=>a()?.indexes?.message)&&k(h)})}var b=y(u,2),v=T(b);bt(v,1,()=>(R(s()),M(()=>s()?.indexes||[])),At,(k,x,C)=>{const O=ie(()=>(R(F),r(x),M(()=>F.parseIndex(r(x)))));var $=aE(),E=T($);{var w=A=>{var L=rE();p(A,L)};G(E,A=>{R(r(O)),M(()=>r(O).unique)&&A(w)})}var I=y(E,2),D=T(I);Qe($,(A,L)=>dt?.(A,L),()=>a().indexes?.[C]?.message||""),Rt(()=>re("click",$,()=>r(o)?.show(r(x),C))),z(A=>{Re($,1,`label link-primary ${a(),M(()=>a().indexes?.[C]?.message?"label-danger":"")??""}`,"svelte-167lbwu"),Te(D,A)},[()=>(R(r(O)),M(()=>r(O).columns?.map(A=>A.name).join(", ")))]),p(k,$)});var g=y(v,2),m=y(b,2);mt(nE(m,{get collection(){return s()},set collection(k){s(k)},$$events:{remove:k=>{for(let x=0;x<s().indexes.length;x++)if(s().indexes[x]==k.detail){s().indexes.splice(x,1),Gn("indexes."+x);break}s(s().indexes=s().indexes,!0)},submit:k=>{a().indexes?.message&&Gn("indexes"),l(k.detail.old,k.detail.new)}},$$legacy:!0}),k=>_(o,k),()=>r(o)),z(()=>Te(d,`Unique constraints and indexes (${R(s()),M(()=>s()?.indexes?.length||0)??""}) `)),re("click",g,()=>r(o)?.show()),p(n,c),Be(),i()}var lE=S('<button type="button" role="menuitem" class="dropdown-item svelte-1gz9b6p"><i aria-hidden="true"></i> <span class="txt"> </span></button>'),cE=S('<div tabindex="0" role="button"><i class="ri-add-line" aria-hidden="true"></i> <div class="txt">New field</div> <!></div>');function uE(n,e){Ue(e,!1);let t=ee(e,"class",8,"");const i=zt(),a=[{label:"Plain text",value:"text",icon:F.getFieldTypeIcon("text")},{label:"Rich editor",value:"editor",icon:F.getFieldTypeIcon("editor")},{label:"Number",value:"number",icon:F.getFieldTypeIcon("number")},{label:"Bool",value:"bool",icon:F.getFieldTypeIcon("bool")},{label:"Email",value:"email",icon:F.getFieldTypeIcon("email")},{label:"URL",value:"url",icon:F.getFieldTypeIcon("url")},{label:"Datetime",value:"date",icon:F.getFieldTypeIcon("date")},{label:"Autodate",value:"autodate",icon:F.getFieldTypeIcon("autodate")},{label:"Select",value:"select",icon:F.getFieldTypeIcon("select")},{label:"File",value:"file",icon:F.getFieldTypeIcon("file")},{label:"Relation",value:"relation",icon:F.getFieldTypeIcon("relation")},{label:"JSON",value:"json",icon:F.getFieldTypeIcon("json")},{label:"Geo Point",value:"geoPoint",icon:F.getFieldTypeIcon("geoPoint")}];function s(c){i("select",c)}He();var o=cE(),l=y(T(o),4);Jn(l,{class:"dropdown field-types-dropdown",children:(c,u)=>{var d=tt(),f=q(d);bt(f,1,()=>a,At,(h,b)=>{var v=lE(),g=T(v),m=y(g,2),k=T(m);z(()=>{Re(g,1,`icon ${r(b),M(()=>r(b).icon)??""}`,"svelte-1gz9b6p"),Te(k,(r(b),M(()=>r(b).label)))}),re("click",v,()=>s(r(b).value)),p(h,v)}),p(c,d)},$$slots:{default:!0}}),z(()=>Re(o,1,`field-types-btn ${t()??""}`,"svelte-1gz9b6p")),p(n,o),Be()}let Bc=[];var dE=S('<div class="drag-handle-wrapper" aria-label="Sort"><span class="drag-handle"></span></div>'),fE=S('<span class="label label-success"> </span>'),hE=S('<span class="label label-danger">Hidden</span>'),vE=S('<div class="field-labels"><!> <!></div>  <div><i></i></div> <input type="text" required spellcheck="false" placeholder="Field name" title="System field"/>',1),mE=S('<span class="separator"></span>'),pE=S('<button type="button" class="btn btn-sm btn-circle btn-success btn-transparent options-trigger" aria-label="Restore"><i class="ri-restart-line"></i></button>'),gE=S('<button type="button"><i class="ri-settings-3-line"></i></button>'),bE=S('<input type="checkbox"/> <label><span class="txt"> </span> <i class="ri-information-line link-hint"></i></label>',1),yE=S('<input type="checkbox"/> <label><span class="txt">Hidden</span> <i class="ri-information-line link-hint"></i></label>',1),_E=S('<input type="checkbox"/> <label><span class="txt">Presentable</span> <i></i></label>',1),xE=S('<button type="button" class="dropdown-item" role="menuitem"><span class="txt">Remove</span></button>'),wE=S('<button type="button" class="dropdown-item" role="menuitem"><span class="txt">Duplicate</span></button> <!>',1),kE=S('<div class="m-l-auto txt-right"><div class="inline-flex flex-gap-sm flex-nowrap"><div tabindex="0" role="button" title="More field options" class="btn btn-circle btn-sm btn-transparent"><i class="ri-more-line" aria-hidden="true"></i> <!></div></div></div>'),SE=S('<div class="schema-field-options"><div class="hidden-empty m-b-sm"><!></div> <div class="schema-field-options-footer"><!> <!> <!> <!> <!></div></div>'),TE=S('<div><div class="schema-field-header"><!> <!> <!> <!></div> <!></div>');function gi(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s=P(),o=P(),l=P(),c=P(),u="f_"+F.randomString(8),d=zt(),f={bool:"Nonfalsey",number:"Nonzero"},h=["password","tokenKey","id","autodate"],b=["password","tokenKey","id","email"],v=["password","tokenKey"];let g=ee(e,"key",8,""),m=ee(e,"field",28,()=>F.initSchemaField()),k=ee(e,"draggable",8,!0),x=ee(e,"collection",24,()=>({})),C=P(),O=P(!1);function $(){m().id?m(m()._toDelete=!0,!0):(A(),d("remove"))}function E(){m(m()._toDelete=!1,!0),rn({})}function w(){m()._toDelete||(A(),d("duplicate"))}function I(ve){return F.slugify(ve)}function D(){_(O,!0),N()}function A(){_(O,!1)}function L(){r(O)?A():D()}function N(){for(let ve of Bc)ve.id!=u&&ve.collapse()}un(()=>(Bc.push({id:u,collapse:A}),m().onMountSelect&&(m(m().onMountSelect=!1,!0),r(C)?.select()),()=>{F.removeByKey(Bc,"id",u)})),ne(()=>R(x()),()=>{_(s,x()?.type=="auth")}),ne(()=>R(m()),()=>{m()._toDelete&&m()._originalName&&m().name!==m()._originalName&&m(m().name=m()._originalName,!0)}),ne(()=>R(m()),()=>{!m()._originalName&&m().name&&m(m()._originalName=m().name,!0)}),ne(()=>R(m()),()=>{typeof m()._toDelete>"u"&&m(m()._toDelete=!1,!0)}),ne(()=>R(m()),()=>{m().required&&m(m().nullable=!1,!0)}),ne(()=>R(m()),()=>{_(o,!m()._toDelete)}),ne(()=>(a(),R(g())),()=>{_(l,!F.isEmpty(F.getNestedVal(a(),`fields.${g()}`)))}),ne(()=>R(m()),()=>{_(c,f[m()?.type]||"Nonempty")}),ft(),He();var H=TE();let j;var V=T(H),U=T(V);{var B=ve=>{var Ee=dE();W(Ee,"draggable",!0),p(ve,Ee)};G(U,ve=>{r(o)&&k()&&ve(B)})}var J=y(U,2);{let ve=ie(()=>r(o)?"":"disabled");Pe(J,{get class(){return`form-field required m-0 ${r(ve)??""}`},get name(){return`fields.${g()??""}.name`},inlineError:!0,children:(Ee,ce)=>{var he=vE(),be=q(he),we=T(be);{var ue=Ie=>{var Ne=fE(),ze=T(Ne);z(()=>Te(ze,r(c))),p(Ie,Ne)};G(we,Ie=>{R(m()),M(()=>m().required)&&Ie(ue)})}var me=y(we,2);{var ae=Ie=>{var Ne=hE();p(Ie,Ne)};G(me,Ie=>{R(m()),M(()=>m().hidden)&&Ie(ae)})}var te=y(be,2);let se;var ye=T(te);Qe(te,(Ie,Ne)=>dt?.(Ie,Ne),()=>m().type+(m().system?" (system)":"")),Rt(()=>re("click",te,()=>r(C)?.focus()));var ke=y(te,2);mt(ke,Ie=>_(C,Ie),()=>r(C)),z((Ie,Ne)=>{se=Re(te,1,"form-field-addon prefix field-type-icon",null,se,Ie),Re(ye,1,Ne),ke.disabled=(r(o),R(m()),M(()=>!r(o)||m().system)),Rn(ke,(R(m()),M(()=>m().name)))},[()=>({"txt-disabled":!r(o)||m().system}),()=>$n((R(F),R(m()),M(()=>F.getFieldTypeIcon(m().type))))]),re("input",ke,Ie=>{const Ne=m().name;m(m().name=I(Ie.target.value),!0),Ie.target.value=m().name,d("rename",{oldName:Ne,newName:m().name})}),p(Ee,he)},$$slots:{default:!0}})}var Q=y(J,2);Gt(Q,e,"default",{get interactive(){return r(o)},get hasErrors(){return r(l)}},ve=>{var Ee=mE();p(ve,Ee)});var oe=y(Q,2);{var de=ve=>{var Ee=pE();Qe(Ee,(ce,he)=>dt?.(ce,he),()=>"Restore"),Rt(()=>re("click",Ee,E)),p(ve,Ee)},ge=ve=>{var Ee=tt(),ce=q(Ee);{var he=be=>{var we=gE();let ue;z(me=>{W(we,"aria-label",`Toggle ${R(m()),M(()=>m().name)??""} field options`),ue=Re(we,1,`btn btn-sm btn-circle options-trigger ${r(O)?"btn-secondary":"btn-transparent"}`,null,ue,me),W(we,"aria-expanded",r(O))},[()=>({"btn-hint":!r(O)&&!r(l),"btn-danger":r(l)})]),re("click",we,L),p(be,we)};G(ce,be=>{r(o)&&be(he)},!0)}p(ve,Ee)};G(oe,ve=>{R(m()),M(()=>m()._toDelete)?ve(de):ve(ge,!1)})}var pe=y(V,2);{var xe=ve=>{var Ee=SE(),ce=T(Ee),he=T(ce);Gt(he,e,"options",{get interactive(){return r(o)},get hasErrors(){return r(l)}},null);var be=y(ce,2),we=T(be);{var ue=Ne=>{Pe(Ne,{class:"form-field form-field-toggle",name:"requried",children:Ce,$$slots:{default:(ze,Me)=>{const Ge=ie(()=>Me.uniqueId);var _e=bE(),Oe=q(_e),Fe=y(Oe,2),at=T(Fe),je=T(at),nt=y(at,2);Qe(nt,(We,Ye)=>dt?.(We,Ye),()=>({text:`Requires the field value NOT to be ${F.zeroDefaultStr(m())}.`})),z(()=>{W(Oe,"id",r(Ge)),W(Fe,"for",r(Ge)),Te(je,r(c))}),Qt(Oe,()=>m().required,We=>m(m().required=We,!0)),p(ze,_e)}}})};G(we,Ne=>{R(m()),r(s),M(()=>!m().primaryKey&&m().type!="autodate"&&(!r(s)||!h.includes(m().name)))&&Ne(ue)})}var me=y(we,2);{var ae=Ne=>{Pe(Ne,{class:"form-field form-field-toggle",name:"hidden",children:Ce,$$slots:{default:(ze,Me)=>{const Ge=ie(()=>Me.uniqueId);var _e=yE(),Oe=q(_e),Fe=y(Oe,2),at=y(T(Fe),2);Qe(at,(je,nt)=>dt?.(je,nt),()=>({text:"Hide from the JSON API response and filters."})),z(()=>{W(Oe,"id",r(Ge)),W(Fe,"for",r(Ge))}),Qt(Oe,()=>m().hidden,je=>m(m().hidden=je,!0)),re("change",Oe,je=>{je.target.checked&&m(m().presentable=!1,!0)}),p(ze,_e)}}})};G(me,Ne=>{R(m()),r(s),M(()=>!m().primaryKey&&(!r(s)||!b.includes(m().name)))&&Ne(ae)})}var te=y(me,2);{var se=Ne=>{Pe(Ne,{class:"form-field form-field-toggle m-0",name:"presentable",children:Ce,$$slots:{default:(ze,Me)=>{const Ge=ie(()=>Me.uniqueId);var _e=_E(),Oe=q(_e),Fe=y(Oe,2),at=y(T(Fe),2);Qe(at,(je,nt)=>dt?.(je,nt),()=>({text:"Whether the field should be preferred in the Superuser UI relation listings (default to auto)."})),z(()=>{W(Oe,"id",r(Ge)),Oe.disabled=(R(m()),M(()=>m().hidden)),W(Fe,"for",r(Ge)),Re(at,1,`ri-information-line ${R(m()),M(()=>m().hidden?"txt-disabled":"link-hint")??""}`)}),Qt(Oe,()=>m().presentable,je=>m(m().presentable=je,!0)),p(ze,_e)}}})};G(te,Ne=>{r(s),R(m()),M(()=>!r(s)||!v.includes(m().name))&&Ne(se)})}var ye=y(te,2);Gt(ye,e,"optionsFooter",{get interactive(){return r(o)},get hasErrors(){return r(l)}},null);var ke=y(ye,2);{var Ie=Ne=>{var ze=kE(),Me=T(ze),Ge=T(Me),_e=y(T(Ge),2);Jn(_e,{class:"dropdown dropdown-sm dropdown-upside dropdown-right dropdown-nowrap no-min-width",children:(Oe,Fe)=>{var at=wE(),je=q(at),nt=y(je,2);{var We=Ye=>{var De=xE();re("click",De,Ct($)),p(Ye,De)};G(nt,Ye=>{R(m()),M(()=>!m().system)&&Ye(We)})}re("click",je,Ct(w)),p(Oe,at)},$$slots:{default:!0}}),p(Ne,ze)};G(ke,Ne=>{R(m()),M(()=>!m()._toDelete&&!m().primaryKey)&&Ne(Ie)})}Et(3,Ee,()=>mn,()=>({delay:10,duration:150})),p(ve,Ee)};G(pe,ve=>{r(o)&&r(O)&&ve(xe)})}z(ve=>j=Re(H,1,"schema-field",null,j,ve),[()=>({required:m().required,expanded:r(o)&&r(O),deleted:m()._toDelete})]),Et(3,H,()=>mn,()=>({duration:150})),p(n,H),Be(),i()}var $E=S("<div><!></div>"),IE=S('<div class="separator"></div> <!> <div class="separator"></div>',1);function CE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);const a=1,s=2,o=3,l=[{label:"Create",value:a},{label:"Update",value:s},{label:"Create/Update",value:o}];let c=ee(e,"field",12),u=ee(e,"key",8,""),d=P(f());function f(){return c().onCreate&&c().onUpdate?o:c().onUpdate?s:a}function h(b){switch(b){case a:c(c().onCreate=!0,!0),c(c().onUpdate=!1,!0);break;case s:c(c().onCreate=!1,!0),c(c().onUpdate=!0,!0);break;case o:c(c().onCreate=!0,!0),c(c().onUpdate=!0,!0);break}}ne(()=>r(d),()=>{h(r(d))}),ft(),He(),gi(n,tn({get key(){return u()}},()=>i,{get field(){return c()},set field(b){c(b)},$$events:{rename(b){ot.call(this,e,b)},remove(b){ot.call(this,e,b)},duplicate(b){ot.call(this,e,b)}},children:Ce,$$slots:{default:(b,v)=>{const g=ie(()=>v.interactive);var m=IE(),k=y(q(m),2);{let x=ie(()=>r(g)?"":"readonly");Pe(k,{get class(){return`form-field form-field-single-multiple-select form-field-autodate-select ${r(x)??""}`},inlineError:!0,children:Ce,$$slots:{default:(C,O)=>{const $=ie(()=>O.uniqueId);var E=$E(),w=T(E);{let I=ie(()=>!r(g));Nn(w,{get id(){return r($)},get items(){return l},get disabled(){return R(c()),M(()=>c().system)},get readonly(){return r(I)},get keyOfSelected(){return r(d)},set keyOfSelected(D){_(d,D)},$$legacy:!0})}Qe(E,(I,D)=>dt?.(I,D),()=>({text:"Auto set on:",position:"top"})),p(C,E)}}})}p(b,m)}},$$legacy:!0})),Be()}function EE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);let a=ee(e,"field",12),s=ee(e,"key",8,"");gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ot.call(this,e,o)},remove(o){ot.call(this,e,o)},duplicate(o){ot.call(this,e,o)}},$$legacy:!0}))}var Hc=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Xa={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},ro={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ri=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},ki=function(n){return n===!0?1:0};function Iv(n,e){var t;return function(){var i=this,a=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(i,a)},e)}}var Wc=function(n){return n instanceof Array?n:[n]};function Hn(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function Wt(n,e,t){var i=window.document.createElement(n);return e=e||"",t=t||"",i.className=e,t!==void 0&&(i.textContent=t),i}function Zo(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Zg(n,e){if(e(n))return n;if(n.parentNode)return Zg(n.parentNode,e)}function Jo(n,e){var t=Wt("div","numInputWrapper"),i=Wt("input","numInput "+n),a=Wt("span","arrowUp"),s=Wt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),e!==void 0)for(var o in e)i.setAttribute(o,e[o]);return t.appendChild(i),t.appendChild(a),t.appendChild(s),t}function ui(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var Yc=function(){},$l=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},OE={D:Yc,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*ki(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var i=parseInt(e),a=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+t.firstDayOfWeek),a},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:Yc,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:Yc,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},da={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Bs={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[Bs.w(n,e,t)]},F:function(n,e,t){return $l(Bs.n(n,e,t)-1,!1,e)},G:function(n,e,t){return ri(Bs.h(n,e,t))},H:function(n){return ri(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[ki(n.getHours()>11)]},M:function(n,e){return $l(n.getMonth(),!0,e)},S:function(n){return ri(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return ri(n.getFullYear(),4)},d:function(n){return ri(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ri(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return ri(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},Jg=function(n){var e=n.config,t=e===void 0?Xa:e,i=n.l10n,a=i===void 0?ro:i,s=n.isMobile,o=s===void 0?!1:s;return function(l,c,u){var d=u||a;return t.formatDate!==void 0&&!o?t.formatDate(l,c,d):c.split("").map(function(f,h,b){return Bs[f]&&b[h-1]!=="\\"?Bs[f](l,d,t):f!=="\\"?f:""}).join("")}},zu=function(n){var e=n.config,t=e===void 0?Xa:e,i=n.l10n,a=i===void 0?ro:i;return function(s,o,l,c){if(!(s!==0&&!s)){var u=c||a,d,f=s;if(s instanceof Date)d=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)d=new Date(s);else if(typeof s=="string"){var h=o||(t||Xa).dateFormat,b=String(s).trim();if(b==="today")d=new Date,l=!0;else if(t&&t.parseDate)d=t.parseDate(s,h);else if(/Z$/.test(b)||/GMT$/.test(b))d=new Date(s);else{for(var v=void 0,g=[],m=0,k=0,x="";m<h.length;m++){var C=h[m],O=C==="\\",$=h[m-1]==="\\"||O;if(da[C]&&!$){x+=da[C];var E=new RegExp(x).exec(s);E&&(v=!0)&&g[C!=="Y"?"push":"unshift"]({fn:OE[C],val:E[++k]})}else O||(x+=".")}d=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),g.forEach(function(w){var I=w.fn,D=w.val;return d=I(d,D,u)||d}),d=v?d:void 0}}if(!(d instanceof Date&&!isNaN(d.getTime()))){t.errorHandler(new Error("Invalid date provided: "+f));return}return l===!0&&d.setHours(0,0,0,0),d}}};function di(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var DE=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},Kc=function(n,e,t){return n*3600+e*60+t},PE=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},ME={DAY:864e5};function Zc(n){var e=n.defaultHour,t=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var a=n.minDate.getHours(),s=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<a&&(e=a),e===a&&t<s&&(t=s),e===a&&t===s&&i<o&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var l=n.maxDate.getHours(),c=n.maxDate.getMinutes();e=Math.min(e,l),e===l&&(t=Math.min(c,t)),e===l&&t===c&&(i=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(l){l&&Object.keys(l).forEach(function(c){return n[c]=l[c]})},a=0,s=e;a<s.length;a++){var o=s[a];i(o)}return n});var Mn=function(){return Mn=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Mn.apply(this,arguments)},Cv=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),a=0,e=0;e<t;e++)for(var s=arguments[e],o=0,l=s.length;o<l;o++,a++)i[a]=s[o];return i},AE=300;function LE(n,e){var t={config:Mn(Mn({},Xa),bn.defaultConfig),l10n:ro};t.parseDate=zu({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=g,t._setHoursFromDate=h,t._positionCalendar=Ne,t.changeMonth=de,t.changeYear=ce,t.clear=ge,t.close=pe,t.onMouseOver=me,t._createElement=Wt,t.createDay=E,t.destroy=xe,t.isEnabled=he,t.jumpToDate=x,t.updateValue=it,t.open=te,t.redraw=Ge,t.set=at,t.setDate=nt,t.toggle=ct;function i(){t.utils={getDaysInMonth:function(Y,Z){return Y===void 0&&(Y=t.currentMonth),Z===void 0&&(Z=t.currentYear),Y===1&&(Z%4===0&&Z%100!==0||Z%400===0)?29:t.l10n.daysInMonth[Y]}}}function a(){t.element=t.input=n,t.isOpen=!1,ye(),Ie(),De(),Ye(),i(),t.isMobile||$(),k(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&h(t.config.noCalendar?t.latestSelectedDateObj:void 0),it(!1)),l();var Y=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&Y&&Ne(),Ve("onReady")}function s(){var Y;return((Y=t.calendarContainer)===null||Y===void 0?void 0:Y.getRootNode()).activeElement||document.activeElement}function o(Y){return Y.bind(t)}function l(){var Y=t.config;Y.weekNumbers===!1&&Y.showMonths===1||Y.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var Z=(t.days.offsetWidth+1)*Y.showMonths;t.daysContainer.style.width=Z+"px",t.calendarContainer.style.width=Z+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function c(Y){if(t.selectedDates.length===0){var Z=t.config.minDate===void 0||di(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),le=Zc(t.config);Z.setHours(le.hours,le.minutes,le.seconds,Z.getMilliseconds()),t.selectedDates=[Z],t.latestSelectedDateObj=Z}Y!==void 0&&Y.type!=="blur"&&vt(Y);var Se=t._input.value;f(),it(),t._input.value!==Se&&t._debouncedChange()}function u(Y,Z){return Y%12+12*ki(Z===t.l10n.amPM[1])}function d(Y){switch(Y%24){case 0:case 12:return 12;default:return Y%12}}function f(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var Y=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,Z=(parseInt(t.minuteElement.value,10)||0)%60,le=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(Y=u(Y,t.amPM.textContent));var Se=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&di(t.latestSelectedDateObj,t.config.minDate,!0)===0,Ze=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&di(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var st=Kc(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),wt=Kc(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),rt=Kc(Y,Z,le);if(rt>wt&&rt<st){var St=PE(st);Y=St[0],Z=St[1],le=St[2]}}else{if(Ze){var pt=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;Y=Math.min(Y,pt.getHours()),Y===pt.getHours()&&(Z=Math.min(Z,pt.getMinutes())),Z===pt.getMinutes()&&(le=Math.min(le,pt.getSeconds()))}if(Se){var Tt=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;Y=Math.max(Y,Tt.getHours()),Y===Tt.getHours()&&Z<Tt.getMinutes()&&(Z=Tt.getMinutes()),Z===Tt.getMinutes()&&(le=Math.max(le,Tt.getSeconds()))}}b(Y,Z,le)}}function h(Y){var Z=Y||t.latestSelectedDateObj;Z&&Z instanceof Date&&b(Z.getHours(),Z.getMinutes(),Z.getSeconds())}function b(Y,Z,le){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(Y%24,Z,le||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=ri(t.config.time_24hr?Y:(12+Y)%12+12*ki(Y%12===0)),t.minuteElement.value=ri(Z),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[ki(Y>=12)]),t.secondElement!==void 0&&(t.secondElement.value=ri(le)))}function v(Y){var Z=ui(Y),le=parseInt(Z.value)+(Y.delta||0);(le/1e3>1||Y.key==="Enter"&&!/[^\d]/.test(le.toString()))&&ce(le)}function g(Y,Z,le,Se){if(Z instanceof Array)return Z.forEach(function(Ze){return g(Y,Ze,le,Se)});if(Y instanceof Array)return Y.forEach(function(Ze){return g(Ze,Z,le,Se)});Y.addEventListener(Z,le,Se),t._handlers.push({remove:function(){return Y.removeEventListener(Z,le,Se)}})}function m(){Ve("onChange")}function k(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(le){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+le+"]"),function(Se){return g(Se,"click",t[le])})}),t.isMobile){Ke();return}var Y=Iv(ae,50);if(t._debouncedChange=Iv(m,AE),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&g(t.daysContainer,"mouseover",function(le){t.config.mode==="range"&&me(ui(le))}),g(t._input,"keydown",ue),t.calendarContainer!==void 0&&g(t.calendarContainer,"keydown",ue),!t.config.inline&&!t.config.static&&g(window,"resize",Y),window.ontouchstart!==void 0?g(window.document,"touchstart",Ee):g(window.document,"mousedown",Ee),g(window.document,"focus",Ee,{capture:!0}),t.config.clickOpens===!0&&(g(t._input,"focus",t.open),g(t._input,"click",t.open)),t.daysContainer!==void 0&&(g(t.monthNav,"click",$e),g(t.monthNav,["keyup","increment"],v),g(t.daysContainer,"click",Oe)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var Z=function(le){return ui(le).select()};g(t.timeContainer,["increment"],c),g(t.timeContainer,"blur",c,{capture:!0}),g(t.timeContainer,"click",C),g([t.hourElement,t.minuteElement],["focus","click"],Z),t.secondElement!==void 0&&g(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&g(t.amPM,"click",function(le){c(le)})}t.config.allowInput&&g(t._input,"blur",we)}function x(Y,Z){var le=Y!==void 0?t.parseDate(Y):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),Se=t.currentYear,Ze=t.currentMonth;try{le!==void 0&&(t.currentYear=le.getFullYear(),t.currentMonth=le.getMonth())}catch(st){st.message="Invalid date supplied: "+le,t.config.errorHandler(st)}Z&&t.currentYear!==Se&&(Ve("onYearChange"),H()),Z&&(t.currentYear!==Se||t.currentMonth!==Ze)&&Ve("onMonthChange"),t.redraw()}function C(Y){var Z=ui(Y);~Z.className.indexOf("arrow")&&O(Y,Z.classList.contains("arrowUp")?1:-1)}function O(Y,Z,le){var Se=Y&&ui(Y),Ze=le||Se&&Se.parentNode&&Se.parentNode.firstChild,st=Xe("increment");st.delta=Z,Ze&&Ze.dispatchEvent(st)}function $(){var Y=window.document.createDocumentFragment();if(t.calendarContainer=Wt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(Y.appendChild(U()),t.innerContainer=Wt("div","flatpickr-innerContainer"),t.config.weekNumbers){var Z=oe(),le=Z.weekWrapper,Se=Z.weekNumbers;t.innerContainer.appendChild(le),t.weekNumbers=Se,t.weekWrapper=le}t.rContainer=Wt("div","flatpickr-rContainer"),t.rContainer.appendChild(J()),t.daysContainer||(t.daysContainer=Wt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),N(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),Y.appendChild(t.innerContainer)}t.config.enableTime&&Y.appendChild(B()),Hn(t.calendarContainer,"rangeMode",t.config.mode==="range"),Hn(t.calendarContainer,"animate",t.config.animate===!0),Hn(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(Y);var Ze=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!Ze&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var st=Wt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(st,t.element),st.appendChild(t.element),t.altInput&&st.appendChild(t.altInput),st.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function E(Y,Z,le,Se){var Ze=he(Z,!0),st=Wt("span",Y,Z.getDate().toString());return st.dateObj=Z,st.$i=Se,st.setAttribute("aria-label",t.formatDate(Z,t.config.ariaDateFormat)),Y.indexOf("hidden")===-1&&di(Z,t.now)===0&&(t.todayDateElem=st,st.classList.add("today"),st.setAttribute("aria-current","date")),Ze?(st.tabIndex=-1,et(Z)&&(st.classList.add("selected"),t.selectedDateElem=st,t.config.mode==="range"&&(Hn(st,"startRange",t.selectedDates[0]&&di(Z,t.selectedDates[0],!0)===0),Hn(st,"endRange",t.selectedDates[1]&&di(Z,t.selectedDates[1],!0)===0),Y==="nextMonthDay"&&st.classList.add("inRange")))):st.classList.add("flatpickr-disabled"),t.config.mode==="range"&&Je(Z)&&!et(Z)&&st.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&Y!=="prevMonthDay"&&Se%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(Z)+"</span>"),Ve("onDayCreate",st),st}function w(Y){Y.focus(),t.config.mode==="range"&&me(Y)}function I(Y){for(var Z=Y>0?0:t.config.showMonths-1,le=Y>0?t.config.showMonths:-1,Se=Z;Se!=le;Se+=Y)for(var Ze=t.daysContainer.children[Se],st=Y>0?0:Ze.children.length-1,wt=Y>0?Ze.children.length:-1,rt=st;rt!=wt;rt+=Y){var St=Ze.children[rt];if(St.className.indexOf("hidden")===-1&&he(St.dateObj))return St}}function D(Y,Z){for(var le=Y.className.indexOf("Month")===-1?Y.dateObj.getMonth():t.currentMonth,Se=Z>0?t.config.showMonths:-1,Ze=Z>0?1:-1,st=le-t.currentMonth;st!=Se;st+=Ze)for(var wt=t.daysContainer.children[st],rt=le-t.currentMonth===st?Y.$i+Z:Z<0?wt.children.length-1:0,St=wt.children.length,pt=rt;pt>=0&&pt<St&&pt!=(Z>0?St:-1);pt+=Ze){var Tt=wt.children[pt];if(Tt.className.indexOf("hidden")===-1&&he(Tt.dateObj)&&Math.abs(Y.$i-pt)>=Math.abs(Z))return w(Tt)}t.changeMonth(Ze),A(I(Ze),0)}function A(Y,Z){var le=s(),Se=be(le||document.body),Ze=Y!==void 0?Y:Se?le:t.selectedDateElem!==void 0&&be(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&be(t.todayDateElem)?t.todayDateElem:I(Z>0?1:-1);Ze===void 0?t._input.focus():Se?D(Ze,Z):w(Ze)}function L(Y,Z){for(var le=(new Date(Y,Z,1).getDay()-t.l10n.firstDayOfWeek+7)%7,Se=t.utils.getDaysInMonth((Z-1+12)%12,Y),Ze=t.utils.getDaysInMonth(Z,Y),st=window.document.createDocumentFragment(),wt=t.config.showMonths>1,rt=wt?"prevMonthDay hidden":"prevMonthDay",St=wt?"nextMonthDay hidden":"nextMonthDay",pt=Se+1-le,Tt=0;pt<=Se;pt++,Tt++)st.appendChild(E("flatpickr-day "+rt,new Date(Y,Z-1,pt),pt,Tt));for(pt=1;pt<=Ze;pt++,Tt++)st.appendChild(E("flatpickr-day",new Date(Y,Z,pt),pt,Tt));for(var Ft=Ze+1;Ft<=42-le&&(t.config.showMonths===1||Tt%7!==0);Ft++,Tt++)st.appendChild(E("flatpickr-day "+St,new Date(Y,Z+1,Ft%Ze),Ft,Tt));var _n=Wt("div","dayContainer");return _n.appendChild(st),_n}function N(){if(t.daysContainer!==void 0){Zo(t.daysContainer),t.weekNumbers&&Zo(t.weekNumbers);for(var Y=document.createDocumentFragment(),Z=0;Z<t.config.showMonths;Z++){var le=new Date(t.currentYear,t.currentMonth,1);le.setMonth(t.currentMonth+Z),Y.appendChild(L(le.getFullYear(),le.getMonth()))}t.daysContainer.appendChild(Y),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&me()}}function H(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var Y=function(Se){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&Se<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&Se>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var Z=0;Z<12;Z++)if(Y(Z)){var le=Wt("option","flatpickr-monthDropdown-month");le.value=new Date(t.currentYear,Z).getMonth().toString(),le.textContent=$l(Z,t.config.shorthandCurrentMonth,t.l10n),le.tabIndex=-1,t.currentMonth===Z&&(le.selected=!0),t.monthsDropdownContainer.appendChild(le)}}}function j(){var Y=Wt("div","flatpickr-month"),Z=window.document.createDocumentFragment(),le;t.config.showMonths>1||t.config.monthSelectorType==="static"?le=Wt("span","cur-month"):(t.monthsDropdownContainer=Wt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),g(t.monthsDropdownContainer,"change",function(wt){var rt=ui(wt),St=parseInt(rt.value,10);t.changeMonth(St-t.currentMonth),Ve("onMonthChange")}),H(),le=t.monthsDropdownContainer);var Se=Jo("cur-year",{tabindex:"-1"}),Ze=Se.getElementsByTagName("input")[0];Ze.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&Ze.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(Ze.setAttribute("max",t.config.maxDate.getFullYear().toString()),Ze.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var st=Wt("div","flatpickr-current-month");return st.appendChild(le),st.appendChild(Se),Z.appendChild(st),Y.appendChild(Z),{container:Y,yearElement:Ze,monthElement:le}}function V(){Zo(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var Y=t.config.showMonths;Y--;){var Z=j();t.yearElements.push(Z.yearElement),t.monthElements.push(Z.monthElement),t.monthNav.appendChild(Z.container)}t.monthNav.appendChild(t.nextMonthNav)}function U(){return t.monthNav=Wt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Wt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Wt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,V(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(Y){t.__hidePrevMonthArrow!==Y&&(Hn(t.prevMonthNav,"flatpickr-disabled",Y),t.__hidePrevMonthArrow=Y)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(Y){t.__hideNextMonthArrow!==Y&&(Hn(t.nextMonthNav,"flatpickr-disabled",Y),t.__hideNextMonthArrow=Y)}}),t.currentYearElement=t.yearElements[0],ht(),t.monthNav}function B(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var Y=Zc(t.config);t.timeContainer=Wt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var Z=Wt("span","flatpickr-time-separator",":"),le=Jo("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=le.getElementsByTagName("input")[0];var Se=Jo("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=Se.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=ri(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?Y.hours:d(Y.hours)),t.minuteElement.value=ri(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():Y.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(le),t.timeContainer.appendChild(Z),t.timeContainer.appendChild(Se),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var Ze=Jo("flatpickr-second");t.secondElement=Ze.getElementsByTagName("input")[0],t.secondElement.value=ri(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():Y.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Wt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(Ze)}return t.config.time_24hr||(t.amPM=Wt("span","flatpickr-am-pm",t.l10n.amPM[ki((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function J(){t.weekdayContainer?Zo(t.weekdayContainer):t.weekdayContainer=Wt("div","flatpickr-weekdays");for(var Y=t.config.showMonths;Y--;){var Z=Wt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(Z)}return Q(),t.weekdayContainer}function Q(){if(t.weekdayContainer){var Y=t.l10n.firstDayOfWeek,Z=Cv(t.l10n.weekdays.shorthand);Y>0&&Y<Z.length&&(Z=Cv(Z.splice(Y,Z.length),Z.splice(0,Y)));for(var le=t.config.showMonths;le--;)t.weekdayContainer.children[le].innerHTML=`
      <span class='flatpickr-weekday'>
        `+Z.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function oe(){t.calendarContainer.classList.add("hasWeeks");var Y=Wt("div","flatpickr-weekwrapper");Y.appendChild(Wt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var Z=Wt("div","flatpickr-weeks");return Y.appendChild(Z),{weekWrapper:Y,weekNumbers:Z}}function de(Y,Z){Z===void 0&&(Z=!0);var le=Z?Y:Y-t.currentMonth;le<0&&t._hidePrevMonthArrow===!0||le>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=le,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Ve("onYearChange"),H()),N(),Ve("onMonthChange"),ht())}function ge(Y,Z){if(Y===void 0&&(Y=!0),Z===void 0&&(Z=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,Z===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var le=Zc(t.config),Se=le.hours,Ze=le.minutes,st=le.seconds;b(Se,Ze,st)}t.redraw(),Y&&Ve("onChange")}function pe(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Ve("onClose")}function xe(){t.config!==void 0&&Ve("onDestroy");for(var Y=t._handlers.length;Y--;)t._handlers[Y].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var Z=t.calendarContainer.parentNode;if(Z.lastChild&&Z.removeChild(Z.lastChild),Z.parentNode){for(;Z.firstChild;)Z.parentNode.insertBefore(Z.firstChild,Z);Z.parentNode.removeChild(Z)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(le){try{delete t[le]}catch{}})}function ve(Y){return t.calendarContainer.contains(Y)}function Ee(Y){if(t.isOpen&&!t.config.inline){var Z=ui(Y),le=ve(Z),Se=Z===t.input||Z===t.altInput||t.element.contains(Z)||Y.path&&Y.path.indexOf&&(~Y.path.indexOf(t.input)||~Y.path.indexOf(t.altInput)),Ze=!Se&&!le&&!ve(Y.relatedTarget),st=!t.config.ignoredFocusElements.some(function(wt){return wt.contains(Z)});Ze&&st&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&c(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function ce(Y){if(!(!Y||t.config.minDate&&Y<t.config.minDate.getFullYear()||t.config.maxDate&&Y>t.config.maxDate.getFullYear())){var Z=Y,le=t.currentYear!==Z;t.currentYear=Z||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),le&&(t.redraw(),Ve("onYearChange"),H())}}function he(Y,Z){var le;Z===void 0&&(Z=!0);var Se=t.parseDate(Y,void 0,Z);if(t.config.minDate&&Se&&di(Se,t.config.minDate,Z!==void 0?Z:!t.minDateHasTime)<0||t.config.maxDate&&Se&&di(Se,t.config.maxDate,Z!==void 0?Z:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(Se===void 0)return!1;for(var Ze=!!t.config.enable,st=(le=t.config.enable)!==null&&le!==void 0?le:t.config.disable,wt=0,rt=void 0;wt<st.length;wt++){if(rt=st[wt],typeof rt=="function"&&rt(Se))return Ze;if(rt instanceof Date&&Se!==void 0&&rt.getTime()===Se.getTime())return Ze;if(typeof rt=="string"){var St=t.parseDate(rt,void 0,!0);return St&&St.getTime()===Se.getTime()?Ze:!Ze}else if(typeof rt=="object"&&Se!==void 0&&rt.from&&rt.to&&Se.getTime()>=rt.from.getTime()&&Se.getTime()<=rt.to.getTime())return Ze}return!Ze}function be(Y){return t.daysContainer!==void 0?Y.className.indexOf("hidden")===-1&&Y.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(Y):!1}function we(Y){var Z=Y.target===t._input,le=t._input.value.trimEnd()!==gt();Z&&le&&!(Y.relatedTarget&&ve(Y.relatedTarget))&&t.setDate(t._input.value,!0,Y.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function ue(Y){var Z=ui(Y),le=t.config.wrap?n.contains(Z):Z===t._input,Se=t.config.allowInput,Ze=t.isOpen&&(!Se||!le),st=t.config.inline&&le&&!Se;if(Y.keyCode===13&&le){if(Se)return t.setDate(t._input.value,!0,Z===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),Z.blur();t.open()}else if(ve(Z)||Ze||st){var wt=!!t.timeContainer&&t.timeContainer.contains(Z);switch(Y.keyCode){case 13:wt?(Y.preventDefault(),c(),_e()):Oe(Y);break;case 27:Y.preventDefault(),_e();break;case 8:case 46:le&&!t.config.allowInput&&(Y.preventDefault(),t.clear());break;case 37:case 39:if(!wt&&!le){Y.preventDefault();var rt=s();if(t.daysContainer!==void 0&&(Se===!1||rt&&be(rt))){var St=Y.keyCode===39?1:-1;Y.ctrlKey?(Y.stopPropagation(),de(St),A(I(1),0)):A(void 0,St)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:Y.preventDefault();var pt=Y.keyCode===40?1:-1;t.daysContainer&&Z.$i!==void 0||Z===t.input||Z===t.altInput?Y.ctrlKey?(Y.stopPropagation(),ce(t.currentYear-pt),A(I(1),0)):wt||A(void 0,pt*7):Z===t.currentYearElement?ce(t.currentYear-pt):t.config.enableTime&&(!wt&&t.hourElement&&t.hourElement.focus(),c(Y),t._debouncedChange());break;case 9:if(wt){var Tt=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Zt){return Zt}),Ft=Tt.indexOf(Z);if(Ft!==-1){var _n=Tt[Ft+(Y.shiftKey?-1:1)];Y.preventDefault(),(_n||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(Z)&&Y.shiftKey&&(Y.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&Z===t.amPM)switch(Y.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],f(),it();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],f(),it();break}(le||ve(Z))&&Ve("onKeyDown",Y)}function me(Y,Z){if(Z===void 0&&(Z="flatpickr-day"),!(t.selectedDates.length!==1||Y&&(!Y.classList.contains(Z)||Y.classList.contains("flatpickr-disabled")))){for(var le=Y?Y.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),Se=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),Ze=Math.min(le,t.selectedDates[0].getTime()),st=Math.max(le,t.selectedDates[0].getTime()),wt=!1,rt=0,St=0,pt=Ze;pt<st;pt+=ME.DAY)he(new Date(pt),!0)||(wt=wt||pt>Ze&&pt<st,pt<Se&&(!rt||pt>rt)?rt=pt:pt>Se&&(!St||pt<St)&&(St=pt));var Tt=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+Z));Tt.forEach(function(Ft){var _n=Ft.dateObj,Zt=_n.getTime(),Cn=rt>0&&Zt<rt||St>0&&Zt>St;if(Cn){Ft.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Vn){Ft.classList.remove(Vn)});return}else if(wt&&!Cn)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Vn){Ft.classList.remove(Vn)}),Y!==void 0&&(Y.classList.add(le<=t.selectedDates[0].getTime()?"startRange":"endRange"),Se<le&&Zt===Se?Ft.classList.add("startRange"):Se>le&&Zt===Se&&Ft.classList.add("endRange"),Zt>=rt&&(St===0||Zt<=St)&&DE(Zt,Se,le)&&Ft.classList.add("inRange"))})}}function ae(){t.isOpen&&!t.config.static&&!t.config.inline&&Ne()}function te(Y,Z){if(Z===void 0&&(Z=t._positionElement),t.isMobile===!0){if(Y){Y.preventDefault();var le=ui(Y);le&&le.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Ve("onOpen");return}else if(t._input.disabled||t.config.inline)return;var Se=t.isOpen;t.isOpen=!0,Se||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Ve("onOpen"),Ne(Z)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(Y===void 0||!t.timeContainer.contains(Y.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function se(Y){return function(Z){var le=t.config["_"+Y+"Date"]=t.parseDate(Z,t.config.dateFormat),Se=t.config["_"+(Y==="min"?"max":"min")+"Date"];le!==void 0&&(t[Y==="min"?"minDateHasTime":"maxDateHasTime"]=le.getHours()>0||le.getMinutes()>0||le.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(Ze){return he(Ze)}),!t.selectedDates.length&&Y==="min"&&h(le),it()),t.daysContainer&&(Ge(),le!==void 0?t.currentYearElement[Y]=le.getFullYear().toString():t.currentYearElement.removeAttribute(Y),t.currentYearElement.disabled=!!Se&&le!==void 0&&Se.getFullYear()===le.getFullYear())}}function ye(){var Y=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Z=Mn(Mn({},JSON.parse(JSON.stringify(n.dataset||{}))),e),le={};t.config.parseDate=Z.parseDate,t.config.formatDate=Z.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Tt){t.config._enable=We(Tt)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Tt){t.config._disable=We(Tt)}});var Se=Z.mode==="time";if(!Z.dateFormat&&(Z.enableTime||Se)){var Ze=bn.defaultConfig.dateFormat||Xa.dateFormat;le.dateFormat=Z.noCalendar||Se?"H:i"+(Z.enableSeconds?":S":""):Ze+" H:i"+(Z.enableSeconds?":S":"")}if(Z.altInput&&(Z.enableTime||Se)&&!Z.altFormat){var st=bn.defaultConfig.altFormat||Xa.altFormat;le.altFormat=Z.noCalendar||Se?"h:i"+(Z.enableSeconds?":S K":" K"):st+(" h:i"+(Z.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:se("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:se("max")});var wt=function(Tt){return function(Ft){t.config[Tt==="min"?"_minTime":"_maxTime"]=t.parseDate(Ft,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:wt("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:wt("max")}),Z.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,le,Z);for(var rt=0;rt<Y.length;rt++)t.config[Y[rt]]=t.config[Y[rt]]===!0||t.config[Y[rt]]==="true";Hc.filter(function(Tt){return t.config[Tt]!==void 0}).forEach(function(Tt){t.config[Tt]=Wc(t.config[Tt]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var rt=0;rt<t.config.plugins.length;rt++){var St=t.config.plugins[rt](t)||{};for(var pt in St)Hc.indexOf(pt)>-1?t.config[pt]=Wc(St[pt]).map(o).concat(t.config[pt]):typeof Z[pt]>"u"&&(t.config[pt]=St[pt])}Z.altInputClass||(t.config.altInputClass=ke().className+" "+t.config.altInputClass),Ve("onParseConfig")}function ke(){return t.config.wrap?n.querySelector("[data-input]"):n}function Ie(){typeof t.config.locale!="object"&&typeof bn.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Mn(Mn({},bn.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?bn.l10ns[t.config.locale]:void 0),da.D="("+t.l10n.weekdays.shorthand.join("|")+")",da.l="("+t.l10n.weekdays.longhand.join("|")+")",da.M="("+t.l10n.months.shorthand.join("|")+")",da.F="("+t.l10n.months.longhand.join("|")+")",da.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var Y=Mn(Mn({},e),JSON.parse(JSON.stringify(n.dataset||{})));Y.time_24hr===void 0&&bn.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=Jg(t),t.parseDate=zu({config:t.config,l10n:t.l10n})}function Ne(Y){if(typeof t.config.position=="function")return void t.config.position(t,Y);if(t.calendarContainer!==void 0){Ve("onPreCalendarPosition");var Z=Y||t._positionElement,le=Array.prototype.reduce.call(t.calendarContainer.children,(function(_i,ea){return _i+ea.offsetHeight}),0),Se=t.calendarContainer.offsetWidth,Ze=t.config.position.split(" "),st=Ze[0],wt=Ze.length>1?Ze[1]:null,rt=Z.getBoundingClientRect(),St=window.innerHeight-rt.bottom,pt=st==="above"||st!=="below"&&St<le&&rt.top>le,Tt=window.pageYOffset+rt.top+(pt?-le-2:Z.offsetHeight+2);if(Hn(t.calendarContainer,"arrowTop",!pt),Hn(t.calendarContainer,"arrowBottom",pt),!t.config.inline){var Ft=window.pageXOffset+rt.left,_n=!1,Zt=!1;wt==="center"?(Ft-=(Se-rt.width)/2,_n=!0):wt==="right"&&(Ft-=Se-rt.width,Zt=!0),Hn(t.calendarContainer,"arrowLeft",!_n&&!Zt),Hn(t.calendarContainer,"arrowCenter",_n),Hn(t.calendarContainer,"arrowRight",Zt);var Cn=window.document.body.offsetWidth-(window.pageXOffset+rt.right),Vn=Ft+Se>window.document.body.offsetWidth,dn=Cn+Se>window.document.body.offsetWidth;if(Hn(t.calendarContainer,"rightMost",Vn),!t.config.static)if(t.calendarContainer.style.top=Tt+"px",!Vn)t.calendarContainer.style.left=Ft+"px",t.calendarContainer.style.right="auto";else if(!dn)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Cn+"px";else{var sn=ze();if(sn===void 0)return;var ci=window.document.body.offsetWidth,Un=Math.max(0,ci/2-Se/2),Qn=".flatpickr-calendar.centerMost:before",yi=".flatpickr-calendar.centerMost:after",Mi=sn.cssRules.length,Bn="{left:"+rt.left+"px;right:auto;}";Hn(t.calendarContainer,"rightMost",!1),Hn(t.calendarContainer,"centerMost",!0),sn.insertRule(Qn+","+yi+Bn,Mi),t.calendarContainer.style.left=Un+"px",t.calendarContainer.style.right="auto"}}}}function ze(){for(var Y=null,Z=0;Z<document.styleSheets.length;Z++){var le=document.styleSheets[Z];if(le.cssRules){try{le.cssRules}catch{continue}Y=le;break}}return Y??Me()}function Me(){var Y=document.createElement("style");return document.head.appendChild(Y),Y.sheet}function Ge(){t.config.noCalendar||t.isMobile||(H(),ht(),N())}function _e(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function Oe(Y){Y.preventDefault(),Y.stopPropagation();var Z=function(Tt){return Tt.classList&&Tt.classList.contains("flatpickr-day")&&!Tt.classList.contains("flatpickr-disabled")&&!Tt.classList.contains("notAllowed")},le=Zg(ui(Y),Z);if(le!==void 0){var Se=le,Ze=t.latestSelectedDateObj=new Date(Se.dateObj.getTime()),st=(Ze.getMonth()<t.currentMonth||Ze.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=Se,t.config.mode==="single")t.selectedDates=[Ze];else if(t.config.mode==="multiple"){var wt=et(Ze);wt?t.selectedDates.splice(parseInt(wt),1):t.selectedDates.push(Ze)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=Ze,t.selectedDates.push(Ze),di(Ze,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Tt,Ft){return Tt.getTime()-Ft.getTime()}));if(f(),st){var rt=t.currentYear!==Ze.getFullYear();t.currentYear=Ze.getFullYear(),t.currentMonth=Ze.getMonth(),rt&&(Ve("onYearChange"),H()),Ve("onMonthChange")}if(ht(),N(),it(),!st&&t.config.mode!=="range"&&t.config.showMonths===1?w(Se):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var St=t.config.mode==="single"&&!t.config.enableTime,pt=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(St||pt)&&_e()}m()}}var Fe={locale:[Ie,Q],showMonths:[V,l,J],minDate:[x],maxDate:[x],positionElement:[qe],clickOpens:[function(){t.config.clickOpens===!0?(g(t._input,"focus",t.open),g(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function at(Y,Z){if(Y!==null&&typeof Y=="object"){Object.assign(t.config,Y);for(var le in Y)Fe[le]!==void 0&&Fe[le].forEach(function(Se){return Se()})}else t.config[Y]=Z,Fe[Y]!==void 0?Fe[Y].forEach(function(Se){return Se()}):Hc.indexOf(Y)>-1&&(t.config[Y]=Wc(Z));t.redraw(),it(!0)}function je(Y,Z){var le=[];if(Y instanceof Array)le=Y.map(function(Se){return t.parseDate(Se,Z)});else if(Y instanceof Date||typeof Y=="number")le=[t.parseDate(Y,Z)];else if(typeof Y=="string")switch(t.config.mode){case"single":case"time":le=[t.parseDate(Y,Z)];break;case"multiple":le=Y.split(t.config.conjunction).map(function(Se){return t.parseDate(Se,Z)});break;case"range":le=Y.split(t.l10n.rangeSeparator).map(function(Se){return t.parseDate(Se,Z)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(Y)));t.selectedDates=t.config.allowInvalidPreload?le:le.filter(function(Se){return Se instanceof Date&&he(Se,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(Se,Ze){return Se.getTime()-Ze.getTime()})}function nt(Y,Z,le){if(Z===void 0&&(Z=!1),le===void 0&&(le=t.config.dateFormat),Y!==0&&!Y||Y instanceof Array&&Y.length===0)return t.clear(Z);je(Y,le),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),x(void 0,Z),h(),t.selectedDates.length===0&&t.clear(!1),it(Z),Z&&Ve("onChange")}function We(Y){return Y.slice().map(function(Z){return typeof Z=="string"||typeof Z=="number"||Z instanceof Date?t.parseDate(Z,void 0,!0):Z&&typeof Z=="object"&&Z.from&&Z.to?{from:t.parseDate(Z.from,void 0),to:t.parseDate(Z.to,void 0)}:Z}).filter(function(Z){return Z})}function Ye(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var Y=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);Y&&je(Y,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function De(){if(t.input=ke(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Wt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),qe()}function qe(){t._positionElement=t.config.positionElement||t._input}function Ke(){var Y=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Wt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=Y,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=Y==="datetime-local"?"Y-m-d\\TH:i:S":Y==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}g(t.mobileInput,"change",function(Z){t.setDate(ui(Z).value,!1,t.mobileFormatStr),Ve("onChange"),Ve("onClose")})}function ct(Y){if(t.isOpen===!0)return t.close();t.open(Y)}function Ve(Y,Z){if(t.config!==void 0){var le=t.config[Y];if(le!==void 0&&le.length>0)for(var Se=0;le[Se]&&Se<le.length;Se++)le[Se](t.selectedDates,t.input.value,t,Z);Y==="onChange"&&(t.input.dispatchEvent(Xe("change")),t.input.dispatchEvent(Xe("input")))}}function Xe(Y){var Z=document.createEvent("Event");return Z.initEvent(Y,!0,!0),Z}function et(Y){for(var Z=0;Z<t.selectedDates.length;Z++){var le=t.selectedDates[Z];if(le instanceof Date&&di(le,Y)===0)return""+Z}return!1}function Je(Y){return t.config.mode!=="range"||t.selectedDates.length<2?!1:di(Y,t.selectedDates[0])>=0&&di(Y,t.selectedDates[1])<=0}function ht(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(Y,Z){var le=new Date(t.currentYear,t.currentMonth,1);le.setMonth(t.currentMonth+Z),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[Z].textContent=$l(le.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=le.getMonth().toString(),Y.value=le.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function gt(Y){var Z=Y||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(le){return t.formatDate(le,Z)}).filter(function(le,Se,Ze){return t.config.mode!=="range"||t.config.enableTime||Ze.indexOf(le)===Se}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function it(Y){Y===void 0&&(Y=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=gt(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=gt(t.config.altFormat)),Y!==!1&&Ve("onValueUpdate")}function $e(Y){var Z=ui(Y),le=t.prevMonthNav.contains(Z),Se=t.nextMonthNav.contains(Z);le||Se?de(le?-1:1):t.yearElements.indexOf(Z)>=0?Z.select():Z.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):Z.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function vt(Y){Y.preventDefault();var Z=Y.type==="keydown",le=ui(Y),Se=le;t.amPM!==void 0&&le===t.amPM&&(t.amPM.textContent=t.l10n.amPM[ki(t.amPM.textContent===t.l10n.amPM[0])]);var Ze=parseFloat(Se.getAttribute("min")),st=parseFloat(Se.getAttribute("max")),wt=parseFloat(Se.getAttribute("step")),rt=parseInt(Se.value,10),St=Y.delta||(Z?Y.which===38?1:-1:0),pt=rt+wt*St;if(typeof Se.value<"u"&&Se.value.length===2){var Tt=Se===t.hourElement,Ft=Se===t.minuteElement;pt<Ze?(pt=st+pt+ki(!Tt)+(ki(Tt)&&ki(!t.amPM)),Ft&&O(void 0,-1,t.hourElement)):pt>st&&(pt=Se===t.hourElement?pt-st-ki(!t.amPM):Ze,Ft&&O(void 0,1,t.hourElement)),t.amPM&&Tt&&(wt===1?pt+rt===23:Math.abs(pt-rt)>wt)&&(t.amPM.textContent=t.l10n.amPM[ki(t.amPM.textContent===t.l10n.amPM[0])]),Se.value=ri(pt)}}return a(),t}function Qa(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),i=[],a=0;a<t.length;a++){var s=t[a];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=LE(s,e||{}),i.push(s._flatpickr)}catch(o){console.error(o)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return Qa(this,n)},HTMLElement.prototype.flatpickr=function(n){return Qa([this],n)});var bn=function(n,e){return typeof n=="string"?Qa(window.document.querySelectorAll(n),e):n instanceof Node?Qa([n],e):Qa(n,e)};bn.defaultConfig={};bn.l10ns={en:Mn({},ro),default:Mn({},ro)};bn.localize=function(n){bn.l10ns.default=Mn(Mn({},bn.l10ns.default),n)};bn.setDefaults=function(n){bn.defaultConfig=Mn(Mn({},bn.defaultConfig),n)};bn.parseDate=zu({});bn.formatDate=Jg({});bn.compareDates=di;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return Qa(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=bn);var NE=S("<input/>");function ju(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","formattedValue","element","dateFormat","options","input","flatpickr"]);Ue(e,!1);const a=new Set(["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"]);let s=ee(e,"value",12,void 0),o=ee(e,"formattedValue",12,""),l=ee(e,"element",8,void 0),c=ee(e,"dateFormat",8,void 0),u=ee(e,"options",24,()=>({})),d=P(!1),f=ee(e,"input",12,void 0),h=ee(e,"flatpickr",12,void 0);un(()=>{const $=l()??f(),E=v(u());return E.onReady.push((w,I,D)=>{s()===void 0&&g(w,I,D),Tn().then(()=>{_(d,!0)})}),h(bn($,Object.assign(E,l()?{wrap:!0}:{}))),()=>{h().destroy()}});const b=zt();function v($={}){$=Object.assign({},$);for(const E of a){const w=(I,D,A)=>{b(m(E),[I,D,A])};E in $?(Array.isArray($[E])||($[E]=[$[E]]),$[E].push(w)):$[E]=[w]}return $.onChange&&!$.onChange.includes(g)&&$.onChange.push(g),$}function g($,E,w){const I=k(w,$);!x(s(),I)&&(s()||I)&&s(I),o(E)}function m($){return $.charAt(2).toLowerCase()+$.substring(3)}function k($,E){return($?.config?.mode??"single")==="single"?E[0]:E}function x($,E){return!!($==E||$ instanceof Date&&E instanceof Date&&$.valueOf()===E.valueOf()||Array.isArray($)&&Array.isArray(E)&&$.length===E.length&&$.every((w,I)=>w===E[I]))}ne(()=>(R(h()),r(d),R(s()),R(c())),()=>{h()&&r(d)&&(x(s(),k(h(),h().selectedDates))||h().setDate(s(),!0,c()))}),ne(()=>(R(h()),r(d),R(u())),()=>{if(h()&&r(d))for(const[$,E]of Object.entries(v(u())))h().set($,E)}),ft(),He();var C=tt(),O=q(C);Gt(O,e,"default",{},$=>{var E=NE();is(E,()=>({...i})),mt(E,w=>f(w),()=>f()),p($,E)}),p(n,C),Be()}var RE=S("<label>Min date (UTC)</label> <!>",1),FE=S("<label>Max date (UTC)</label> <!>",1),qE=S('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function zE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=ee(e,"field",12),s=ee(e,"key",8,""),o=P(a()?.min),l=P(a()?.max);function c(u,d){u.detail&&u.detail.length==3&&a(a()[d]=u.detail[1],!0)}ne(()=>(r(o),R(a())),()=>{r(o)!=a()?.min&&_(o,a()?.min)}),ne(()=>(r(l),R(a())),()=>{r(l)!=a()?.max&&_(l,a()?.max)}),ft(),He(),gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(u){a(u)},$$events:{rename(u){ot.call(this,e,u)},remove(u){ot.call(this,e,u)},duplicate(u){ot.call(this,e,u)}},$$slots:{options:(u,d)=>{var f=qE(),h=T(f),b=T(h);Pe(b,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ce,$$slots:{default:(m,k)=>{const x=ie(()=>k.uniqueId);var C=RE(),O=q(C),$=y(O,2);{let E=ie(()=>(R(F),M(()=>F.defaultFlatpickrOptions())));ju($,{get id(){return r(x)},get options(){return r(E)},get value(){return r(o)},set value(w){_(o,w)},get formattedValue(){return a().min},set formattedValue(w){a(a().min=w,!0)},$$events:{close:w=>c(w,"min")},$$legacy:!0})}z(()=>W(O,"for",r(x))),p(m,C)}}});var v=y(h,2),g=T(v);Pe(g,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ce,$$slots:{default:(m,k)=>{const x=ie(()=>k.uniqueId);var C=FE(),O=q(C),$=y(O,2);{let E=ie(()=>(R(F),M(()=>F.defaultFlatpickrOptions())));ju($,{get id(){return r(x)},get options(){return r(E)},get value(){return r(l)},set value(w){_(l,w)},get formattedValue(){return a().max},set formattedValue(w){a(a().max=w,!0)},$$events:{close:w=>c(w,"max")},$$legacy:!0})}z(()=>W(O,"for",r(x))),p(m,C)}}}),p(u,f)}},$$legacy:!0})),Be()}var jE=S('<label>Max size <small>(bytes)</small></label> <input type="number" step="1" min="0" placeholder="Default to max ~5MB"/>',1),VE=S('<input type="checkbox"/> <label><span class="txt">Strip urls domain</span> <i class="ri-information-line link-hint"></i></label>',1),UE=S("<!> <!>",1);function BE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=ee(e,"field",12),s=ee(e,"key",8,"");He(),gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ot.call(this,e,o)},remove(o){ot.call(this,e,o)},duplicate(o){ot.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=UE(),u=q(c);Pe(u,{class:"form-field m-b-sm",get name(){return`fields.${s()??""}.maxSize`},children:Ce,$$slots:{default:(f,h)=>{const b=ie(()=>h.uniqueId);var v=jE(),g=q(v),m=y(g,2);W(m,"max",M(()=>Number.MAX_SAFE_INTEGER)),z(()=>{W(g,"for",r(b)),W(m,"id",r(b)),Rn(m,(R(a()),M(()=>a().maxSize||"")))}),re("input",m,k=>a(a().maxSize=parseInt(k.target.value,10),!0)),p(f,v)}}});var d=y(u,2);Pe(d,{class:"form-field form-field-toggle",get name(){return`fields.${s()??""}.convertURLs`},children:Ce,$$slots:{default:(f,h)=>{const b=ie(()=>h.uniqueId);var v=VE(),g=q(v),m=y(g,2),k=y(T(m),2);Qe(k,(x,C)=>dt?.(x,C),()=>({text:"This could help making the editor content more portable between environments since there will be no local base url to replace."})),z(()=>{W(g,"id",r(b)),W(m,"for",r(b))}),Qt(g,()=>a().convertURLs,x=>a(a().convertURLs=x,!0)),p(f,v)}}}),p(o,c)}},$$legacy:!0})),Be()}var HE=S('<label><span class="txt">Except domains</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block">Use comma as separator.</div>',1),WE=S('<label><span class="txt">Only domains</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block">Use comma as separator.</div>',1),YE=S('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function Gg(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=ee(e,"field",12),s=ee(e,"key",8,"");He(),gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ot.call(this,e,o)},remove(o){ot.call(this,e,o)},duplicate(o){ot.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=YE(),u=T(c),d=T(u);Pe(d,{class:"form-field",get name(){return`fields.${s()??""}.exceptDomains`},children:Ce,$$slots:{default:(b,v)=>{const g=ie(()=>v.uniqueId);var m=HE(),k=q(m),x=y(T(k),2);Qe(x,(O,$)=>dt?.(O,$),()=>({text:`List of domains that are NOT allowed. 
 This field is disabled if "Only domains" is set.`,position:"top"}));var C=y(k,2);{let O=ie(()=>(R(F),R(a()),M(()=>!F.isEmpty(a().onlyDomains))));io(C,{get id(){return r(g)},get disabled(){return r(O)},get value(){return a().exceptDomains},set value($){a(a().exceptDomains=$,!0)},$$legacy:!0})}z(()=>W(k,"for",r(g))),p(b,m)}}});var f=y(u,2),h=T(f);Pe(h,{class:"form-field",get name(){return`fields.${s()??""}.onlyDomains`},children:Ce,$$slots:{default:(b,v)=>{const g=ie(()=>v.uniqueId);var m=WE(),k=q(m),x=y(T(k),2);Qe(x,(O,$)=>dt?.(O,$),()=>({text:`List of domains that are ONLY allowed. 
 This field is disabled if "Except domains" is set.`,position:"top"}));var C=y(k,2);{let O=ie(()=>(R(F),R(a()),M(()=>!F.isEmpty(a().exceptDomains))));io(C,{get id(){return`${r(g)??""}.onlyDomains`},get disabled(){return r(O)},get value(){return a().onlyDomains},set value($){a(a().onlyDomains=$,!0)},$$legacy:!0})}z(()=>W(k,"for",`${r(g)??""}.onlyDomains`)),p(b,m)}}}),p(o,c)}},$$legacy:!0})),Be()}var KE=S('<span class="txt"> </span> <small class="txt-hint"> </small>',1);function Ev(n,e){Ue(e,!1);let t=ee(e,"item",24,()=>({}));He();var i=KE(),a=q(i),s=T(a),o=y(a,2),l=T(o);z(()=>{Te(s,(R(t()),M(()=>t().ext||"N/A"))),Te(l,(R(t()),M(()=>t().mimeType)))}),p(n,i),Be()}const ZE=[{ext:"",mimeType:"application/octet-stream"},{ext:".xpm",mimeType:"image/x-xpixmap"},{ext:".7z",mimeType:"application/x-7z-compressed"},{ext:".zip",mimeType:"application/zip"},{ext:".xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{ext:".docx",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{ext:".pptx",mimeType:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{ext:".epub",mimeType:"application/epub+zip"},{ext:".apk",mimeType:"application/vnd.android.package-archive"},{ext:".jar",mimeType:"application/jar"},{ext:".odt",mimeType:"application/vnd.oasis.opendocument.text"},{ext:".ott",mimeType:"application/vnd.oasis.opendocument.text-template"},{ext:".ods",mimeType:"application/vnd.oasis.opendocument.spreadsheet"},{ext:".ots",mimeType:"application/vnd.oasis.opendocument.spreadsheet-template"},{ext:".odp",mimeType:"application/vnd.oasis.opendocument.presentation"},{ext:".otp",mimeType:"application/vnd.oasis.opendocument.presentation-template"},{ext:".odg",mimeType:"application/vnd.oasis.opendocument.graphics"},{ext:".otg",mimeType:"application/vnd.oasis.opendocument.graphics-template"},{ext:".odf",mimeType:"application/vnd.oasis.opendocument.formula"},{ext:".odc",mimeType:"application/vnd.oasis.opendocument.chart"},{ext:".sxc",mimeType:"application/vnd.sun.xml.calc"},{ext:".pdf",mimeType:"application/pdf"},{ext:".fdf",mimeType:"application/vnd.fdf"},{ext:"",mimeType:"application/x-ole-storage"},{ext:".msi",mimeType:"application/x-ms-installer"},{ext:".aaf",mimeType:"application/octet-stream"},{ext:".msg",mimeType:"application/vnd.ms-outlook"},{ext:".xls",mimeType:"application/vnd.ms-excel"},{ext:".pub",mimeType:"application/vnd.ms-publisher"},{ext:".ppt",mimeType:"application/vnd.ms-powerpoint"},{ext:".doc",mimeType:"application/msword"},{ext:".ps",mimeType:"application/postscript"},{ext:".psd",mimeType:"image/vnd.adobe.photoshop"},{ext:".p7s",mimeType:"application/pkcs7-signature"},{ext:".ogg",mimeType:"application/ogg"},{ext:".oga",mimeType:"audio/ogg"},{ext:".ogv",mimeType:"video/ogg"},{ext:".png",mimeType:"image/png"},{ext:".png",mimeType:"image/vnd.mozilla.apng"},{ext:".jpg",mimeType:"image/jpeg"},{ext:".jxl",mimeType:"image/jxl"},{ext:".jp2",mimeType:"image/jp2"},{ext:".jpf",mimeType:"image/jpx"},{ext:".jpm",mimeType:"image/jpm"},{ext:".jxs",mimeType:"image/jxs"},{ext:".gif",mimeType:"image/gif"},{ext:".webp",mimeType:"image/webp"},{ext:".exe",mimeType:"application/vnd.microsoft.portable-executable"},{ext:"",mimeType:"application/x-elf"},{ext:"",mimeType:"application/x-object"},{ext:"",mimeType:"application/x-executable"},{ext:".so",mimeType:"application/x-sharedlib"},{ext:"",mimeType:"application/x-coredump"},{ext:".a",mimeType:"application/x-archive"},{ext:".deb",mimeType:"application/vnd.debian.binary-package"},{ext:".tar",mimeType:"application/x-tar"},{ext:".xar",mimeType:"application/x-xar"},{ext:".bz2",mimeType:"application/x-bzip2"},{ext:".fits",mimeType:"application/fits"},{ext:".tiff",mimeType:"image/tiff"},{ext:".bmp",mimeType:"image/bmp"},{ext:".ico",mimeType:"image/x-icon"},{ext:".mp3",mimeType:"audio/mpeg"},{ext:".flac",mimeType:"audio/flac"},{ext:".midi",mimeType:"audio/midi"},{ext:".ape",mimeType:"audio/ape"},{ext:".mpc",mimeType:"audio/musepack"},{ext:".amr",mimeType:"audio/amr"},{ext:".wav",mimeType:"audio/wav"},{ext:".aiff",mimeType:"audio/aiff"},{ext:".au",mimeType:"audio/basic"},{ext:".mpeg",mimeType:"video/mpeg"},{ext:".mov",mimeType:"video/quicktime"},{ext:".mp4",mimeType:"video/mp4"},{ext:".avif",mimeType:"image/avif"},{ext:".3gp",mimeType:"video/3gpp"},{ext:".3g2",mimeType:"video/3gpp2"},{ext:".mp4",mimeType:"audio/mp4"},{ext:".mqv",mimeType:"video/quicktime"},{ext:".m4a",mimeType:"audio/x-m4a"},{ext:".m4v",mimeType:"video/x-m4v"},{ext:".heic",mimeType:"image/heic"},{ext:".heic",mimeType:"image/heic-sequence"},{ext:".heif",mimeType:"image/heif"},{ext:".heif",mimeType:"image/heif-sequence"},{ext:".mj2",mimeType:"video/mj2"},{ext:".dvb",mimeType:"video/vnd.dvb.file"},{ext:".webm",mimeType:"video/webm"},{ext:".avi",mimeType:"video/x-msvideo"},{ext:".flv",mimeType:"video/x-flv"},{ext:".mkv",mimeType:"video/x-matroska"},{ext:".asf",mimeType:"video/x-ms-asf"},{ext:".aac",mimeType:"audio/aac"},{ext:".voc",mimeType:"audio/x-unknown"},{ext:".m3u",mimeType:"application/vnd.apple.mpegurl"},{ext:".rmvb",mimeType:"application/vnd.rn-realmedia-vbr"},{ext:".gz",mimeType:"application/gzip"},{ext:".class",mimeType:"application/x-java-applet"},{ext:".swf",mimeType:"application/x-shockwave-flash"},{ext:".crx",mimeType:"application/x-chrome-extension"},{ext:".ttf",mimeType:"font/ttf"},{ext:".woff",mimeType:"font/woff"},{ext:".woff2",mimeType:"font/woff2"},{ext:".otf",mimeType:"font/otf"},{ext:".ttc",mimeType:"font/collection"},{ext:".eot",mimeType:"application/vnd.ms-fontobject"},{ext:".wasm",mimeType:"application/wasm"},{ext:".shx",mimeType:"application/vnd.shx"},{ext:".shp",mimeType:"application/vnd.shp"},{ext:".dbf",mimeType:"application/x-dbf"},{ext:".dcm",mimeType:"application/dicom"},{ext:".rar",mimeType:"application/x-rar-compressed"},{ext:".djvu",mimeType:"image/vnd.djvu"},{ext:".mobi",mimeType:"application/x-mobipocket-ebook"},{ext:".lit",mimeType:"application/x-ms-reader"},{ext:".bpg",mimeType:"image/bpg"},{ext:".cbor",mimeType:"application/cbor"},{ext:".sqlite",mimeType:"application/vnd.sqlite3"},{ext:".dwg",mimeType:"image/vnd.dwg"},{ext:".nes",mimeType:"application/vnd.nintendo.snes.rom"},{ext:".lnk",mimeType:"application/x-ms-shortcut"},{ext:".macho",mimeType:"application/x-mach-binary"},{ext:".qcp",mimeType:"audio/qcelp"},{ext:".icns",mimeType:"image/x-icns"},{ext:".hdr",mimeType:"image/vnd.radiance"},{ext:".mrc",mimeType:"application/marc"},{ext:".mdb",mimeType:"application/x-msaccess"},{ext:".accdb",mimeType:"application/x-msaccess"},{ext:".zst",mimeType:"application/zstd"},{ext:".cab",mimeType:"application/vnd.ms-cab-compressed"},{ext:".rpm",mimeType:"application/x-rpm"},{ext:".xz",mimeType:"application/x-xz"},{ext:".lz",mimeType:"application/lzip"},{ext:".torrent",mimeType:"application/x-bittorrent"},{ext:".cpio",mimeType:"application/x-cpio"},{ext:"",mimeType:"application/tzif"},{ext:".xcf",mimeType:"image/x-xcf"},{ext:".pat",mimeType:"image/x-gimp-pat"},{ext:".gbr",mimeType:"image/x-gimp-gbr"},{ext:".glb",mimeType:"model/gltf-binary"},{ext:".cab",mimeType:"application/x-installshield"},{ext:".jxr",mimeType:"image/jxr"},{ext:".parquet",mimeType:"application/vnd.apache.parquet"},{ext:".txt",mimeType:"text/plain"},{ext:".html",mimeType:"text/html"},{ext:".svg",mimeType:"image/svg+xml"},{ext:".xml",mimeType:"text/xml"},{ext:".rss",mimeType:"application/rss+xml"},{ext:".atom",mimeType:"application/atom+xml"},{ext:".x3d",mimeType:"model/x3d+xml"},{ext:".kml",mimeType:"application/vnd.google-earth.kml+xml"},{ext:".xlf",mimeType:"application/x-xliff+xml"},{ext:".dae",mimeType:"model/vnd.collada+xml"},{ext:".gml",mimeType:"application/gml+xml"},{ext:".gpx",mimeType:"application/gpx+xml"},{ext:".tcx",mimeType:"application/vnd.garmin.tcx+xml"},{ext:".amf",mimeType:"application/x-amf"},{ext:".3mf",mimeType:"application/vnd.ms-package.3dmanufacturing-3dmodel+xml"},{ext:".xfdf",mimeType:"application/vnd.adobe.xfdf"},{ext:".owl",mimeType:"application/owl+xml"},{ext:".php",mimeType:"text/x-php"},{ext:".js",mimeType:"text/javascript"},{ext:".lua",mimeType:"text/x-lua"},{ext:".pl",mimeType:"text/x-perl"},{ext:".py",mimeType:"text/x-python"},{ext:".json",mimeType:"application/json"},{ext:".geojson",mimeType:"application/geo+json"},{ext:".har",mimeType:"application/json"},{ext:".ndjson",mimeType:"application/x-ndjson"},{ext:".rtf",mimeType:"text/rtf"},{ext:".srt",mimeType:"application/x-subrip"},{ext:".tcl",mimeType:"text/x-tcl"},{ext:".csv",mimeType:"text/csv"},{ext:".tsv",mimeType:"text/tab-separated-values"},{ext:".vcf",mimeType:"text/vcard"},{ext:".ics",mimeType:"text/calendar"},{ext:".warc",mimeType:"application/warc"},{ext:".vtt",mimeType:"text/vtt"}];var JE=S('<div class="separator"></div> <!> <div class="separator"></div>',1),GE=S('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Images (jpg, png, svg, gif, webp)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Documents (pdf, doc/docx, xls/xlsx)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Videos (mp4, avi, mov, 3gp)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Archives (zip, 7zip, rar)</span></button>',1),XE=S('<label><span class="txt">Allowed mime types</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block"><div tabindex="0" role="button" class="inline-flex flex-gap-0"><span class="txt link-primary">Choose presets</span> <i class="ri-arrow-drop-down-fill" aria-hidden="true"></i> <!></div></div>',1),QE=S('<ul class="m-0"><li><strong>WxH</strong> (e.g. 100x50) - crop to WxH viewbox (from center)</li> <li><strong>WxHt</strong> (e.g. 100x50t) - crop to WxH viewbox (from top)</li> <li><strong>WxHb</strong> (e.g. 100x50b) - crop to WxH viewbox (from bottom)</li> <li><strong>WxHf</strong> (e.g. 100x50f) - fit inside a WxH viewbox (without cropping)</li> <li><strong>0xH</strong> (e.g. 0x50) - resize to H height preserving the aspect ratio</li> <li><strong>Wx0</strong> (e.g. 100x0) - resize to W width preserving the aspect ratio</li></ul>'),eO=S('<label><span class="txt">Thumb sizes</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block"><span class="txt">Use comma as separator.</span> <button type="button" class="inline-flex flex-gap-0"><span class="txt link-primary">Supported formats</span> <i class="ri-arrow-drop-down-fill" aria-hidden="true"></i> <!></button></div>',1),tO=S('<label>Max file size</label> <input type="number" step="1" min="0" placeholder="Default to max ~5MB"/> <div class="help-block">Must be in bytes.</div>',1),nO=S('<label>Max select</label> <input type="number" step="1" min="2" required placeholder="Default to single"/>',1),iO=S('<div class="col-sm-3"><!></div>'),rO=S('<input type="checkbox"/> <label><span class="txt">Protected</span></label> <small class="txt-hint">it will require View API rule permissions and file token to be accessible <a class="toggle-info" target="_blank" rel="noopener">(Learn more)</a></small>',1),aO=S('<div class="grid grid-sm"><div class="col-sm-12"><!></div> <div><!></div> <div><!></div> <!> <!></div>');function sO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=ee(e,"field",12),s=ee(e,"key",8,"");const o=[{label:"Single",value:!0},{label:"Multiple",value:!1}];let l=P(ZE.slice()),c=P(a().maxSelect<=1),u=P(r(c));function d(){a(a().maxSelect=1,!0),a(a().thumbs=[],!0),a(a().mimeTypes=[],!0),_(c,!0),_(u,r(c))}function f(){if(F.isEmpty(a().mimeTypes))return;const h=[];for(const b of a().mimeTypes)r(l).find(v=>v.mimeType===b)||h.push({mimeType:b});h.length&&_(l,r(l).concat(h))}ne(()=>R(a()),()=>{typeof a().maxSelect>"u"?d():f()}),ne(()=>(r(u),r(c)),()=>{r(u)!=r(c)&&(_(u,r(c)),r(c)?a(a().maxSelect=1,!0):a(a().maxSelect=99,!0))}),ft(),He(),gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(h){a(h)},$$events:{rename(h){ot.call(this,e,h)},remove(h){ot.call(this,e,h)},duplicate(h){ot.call(this,e,h)}},children:Ce,$$slots:{default:(h,b)=>{const v=ie(()=>b.interactive);var g=JE(),m=y(q(g),2);{let k=ie(()=>r(v)?"":"readonly");Pe(m,{get class(){return`form-field form-field-single-multiple-select ${r(k)??""}`},inlineError:!0,children:Ce,$$slots:{default:(x,C)=>{const O=ie(()=>C.uniqueId);{let $=ie(()=>!r(v));Nn(x,{get id(){return r(O)},get items(){return o},get readonly(){return r($)},get keyOfSelected(){return r(c)},set keyOfSelected(E){_(c,E)},$$legacy:!0})}}}})}p(h,g)},options:(h,b)=>{var v=aO(),g=T(v),m=T(g);Pe(m,{class:"form-field",get name(){return`fields.${s()??""}.mimeTypes`},children:Ce,$$slots:{default:(I,D)=>{const A=ie(()=>D.uniqueId);var L=XE(),N=q(L),H=y(T(N),2);Qe(H,(J,Q)=>dt?.(J,Q),()=>({text:`Allow files ONLY with the listed mime types. 
 Leave empty for no restriction.`,position:"top"}));var j=y(N,2);Nn(j,{get id(){return r(A)},multiple:!0,searchable:!0,closable:!1,selectionKey:"mimeType",selectPlaceholder:"No restriction",get items(){return r(l)},get labelComponent(){return Ev},get optionComponent(){return Ev},get keyOfSelected(){return a().mimeTypes},set keyOfSelected(J){a(a().mimeTypes=J,!0)},$$legacy:!0});var V=y(j,2),U=T(V),B=y(T(U),4);Jn(B,{class:"dropdown dropdown-sm dropdown-nowrap dropdown-left",children:(J,Q)=>{var oe=GE(),de=q(oe),ge=y(de,2),pe=y(ge,2),xe=y(pe,2);re("click",de,()=>{a(a().mimeTypes=["image/jpeg","image/png","image/svg+xml","image/gif","image/webp"],!0)}),re("click",ge,()=>{a(a().mimeTypes=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],!0)}),re("click",pe,()=>{a(a().mimeTypes=["video/mp4","video/x-ms-wmv","video/quicktime","video/3gpp"],!0)}),re("click",xe,()=>{a(a().mimeTypes=["application/zip","application/x-7z-compressed","application/x-rar-compressed"],!0)}),p(J,oe)},$$slots:{default:!0}}),z(()=>W(N,"for",r(A))),p(I,L)}}});var k=y(g,2),x=T(k);Pe(x,{class:"form-field",get name(){return`fields.${s()??""}.thumbs`},children:Ce,$$slots:{default:(I,D)=>{const A=ie(()=>D.uniqueId);var L=eO(),N=q(L),H=y(T(N),2);Qe(H,(J,Q)=>dt?.(J,Q),()=>({text:"List of additional thumb sizes for image files, along with the default thumb size of 100x100. The thumbs are generated lazily on first access.",position:"top"}));var j=y(N,2);io(j,{get id(){return r(A)},placeholder:"e.g. 50x50, 480x720",get value(){return a().thumbs},set value(J){a(a().thumbs=J,!0)},$$legacy:!0});var V=y(j,2),U=y(T(V),2),B=y(T(U),4);Jn(B,{class:"dropdown dropdown-sm dropdown-center dropdown-nowrap p-r-10",children:(J,Q)=>{var oe=QE();p(J,oe)},$$slots:{default:!0}}),z(()=>W(N,"for",r(A))),p(I,L)}}});var C=y(k,2),O=T(C);Pe(O,{class:"form-field",get name(){return`fields.${s()??""}.maxSize`},children:Ce,$$slots:{default:(I,D)=>{const A=ie(()=>D.uniqueId);var L=tO(),N=q(L),H=y(N,2);W(H,"max",M(()=>Number.MAX_SAFE_INTEGER)),z(()=>{W(N,"for",r(A)),W(H,"id",r(A)),Rn(H,(R(a()),M(()=>a().maxSize||"")))}),re("input",H,j=>a(a().maxSize=parseInt(j.target.value,10),!0)),p(I,L)}}});var $=y(C,2);{var E=I=>{var D=iO(),A=T(D);Pe(A,{class:"form-field",get name(){return`fields.${s()??""}.maxSelect`},children:Ce,$$slots:{default:(L,N)=>{const H=ie(()=>N.uniqueId);var j=nO(),V=q(j),U=y(V,2);W(U,"max",M(()=>Number.MAX_SAFE_INTEGER)),z(()=>{W(V,"for",r(H)),W(U,"id",r(H))}),xt(U,()=>a().maxSelect,B=>a(a().maxSelect=B,!0)),p(L,j)}}}),p(I,D)};G($,I=>{r(c)||I(E)})}var w=y($,2);Pe(w,{class:"form-field form-field-toggle",get name(){return`fields.${s()??""}.protected`},children:Ce,$$slots:{default:(I,D)=>{const A=ie(()=>D.uniqueId);var L=rO(),N=q(L),H=y(N,2),j=y(H,2),V=y(T(j));z(()=>{W(N,"id",r(A)),W(H,"for",r(A)),W(V,"href",M(()=>"https://pocketbase.io/docs/files-handling#protected-files"))}),Qt(N,()=>a().protected,U=>a(a().protected=U,!0)),p(I,L)}}}),z(()=>{Re(k,1,$n(r(c)?"col-sm-8":"col-sm-6")),Re(C,1,$n(r(c)?"col-sm-4":"col-sm-3"))}),p(h,v)}},$$legacy:!0})),Be()}var oO=S('<label>Max size <small>(bytes)</small></label> <input type="number" step="1" min="0" placeholder="Default to max ~1MB"/>',1),lO=S('<i class="ri-arrow-up-s-line txt-sm"></i>'),cO=S('<i class="ri-arrow-down-s-line txt-sm"></i>'),uO=S(`<div class="block"><div class="alert alert-warning m-b-0 m-t-10"><div class="content">In order to support seamlessly both <code>application/json</code> and <code>multipart/form-data</code> requests, the following normalization rules are applied if the <code>json</code> field
                        is a <strong>plain string</strong>: <ul><li>"true" is converted to the json <code>true</code></li> <li>"false" is converted to the json <code>false</code></li> <li>"null" is converted to the json <code>null</code></li> <li>"[1,2,3]" is converted to the json <code>[1,2,3]</code></li> <li> <code></code></li> <li>numeric strings are converted to json number</li> <li>double quoted strings are left as they are (aka. without normalizations)</li> <li>any other string (empty string too) is double quoted</li></ul> Alternatively, if you want to avoid the string value normalizations, you can wrap your
                        data inside an object, eg.<code></code></div></div></div>`),dO=S('<!> <button type="button"><strong class="txt">String value normalizations</strong> <!></button> <!>',1);function fO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=ee(e,"field",12),s=ee(e,"key",8,""),o=P(!1);He(),gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(l){a(l)},$$events:{rename(l){ot.call(this,e,l)},remove(l){ot.call(this,e,l)},duplicate(l){ot.call(this,e,l)}},$$slots:{options:(l,c)=>{var u=dO(),d=q(u);Pe(d,{class:"form-field m-b-sm",get name(){return`fields.${s()??""}.maxSize`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=oO(),$=q(O),E=y($,2);W(E,"max",M(()=>Number.MAX_SAFE_INTEGER)),z(()=>{W($,"for",r(C)),W(E,"id",r(C)),Rn(E,(R(a()),M(()=>a().maxSize||"")))}),re("input",E,w=>a(a().maxSize=parseInt(w.target.value,10),!0)),p(k,O)}}});var f=y(d,2),h=y(T(f),2);{var b=k=>{var x=lO();p(k,x)},v=k=>{var x=cO();p(k,x)};G(h,k=>{r(o)?k(b):k(v,!1)})}var g=y(f,2);{var m=k=>{var x=uO(),C=T(x),O=T(C),$=y(T(O),9),E=y(T($),8),w=T(E);w.nodeValue='"{"a":1,"b":2}" is converted to the json ';var I=y(w);I.textContent='{"a":1,"b":2}';var D=y($,2);D.textContent='{"data": anything}',Et(3,x,()=>mn,()=>({duration:150})),p(k,x)};G(g,k=>{r(o)&&k(m)})}z(()=>Re(f,1,`btn btn-sm ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),re("click",f,()=>{_(o,!r(o))}),p(l,u)}},$$legacy:!0})),Be()}var hO=S('<label>Min</label> <input type="number"/>',1),vO=S('<label>Max</label> <input type="number"/>',1),mO=S('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>'),pO=S('<input type="checkbox"/> <label><span class="txt">No decimals</span> <i class="ri-information-line link-hint"></i></label>',1);function gO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=ee(e,"field",12),s=ee(e,"key",8,"");He(),gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ot.call(this,e,o)},remove(o){ot.call(this,e,o)},duplicate(o){ot.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=mO(),u=T(c),d=T(u);Pe(d,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ce,$$slots:{default:(b,v)=>{const g=ie(()=>v.uniqueId);var m=hO(),k=q(m),x=y(k,2);z(()=>{W(k,"for",r(g)),W(x,"id",r(g))}),xt(x,()=>a().min,C=>a(a().min=C,!0)),p(b,m)}}});var f=y(u,2),h=T(f);Pe(h,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ce,$$slots:{default:(b,v)=>{const g=ie(()=>v.uniqueId);var m=vO(),k=q(m),x=y(k,2);z(()=>{W(k,"for",r(g)),W(x,"id",r(g)),W(x,"min",(R(a()),M(()=>a().min)))}),xt(x,()=>a().max,C=>a(a().max=C,!0)),p(b,m)}}}),p(o,c)},optionsFooter:(o,l)=>{Pe(o,{class:"form-field form-field-toggle",get name(){return`fields.${s()??""}.onlyInt`},children:Ce,$$slots:{default:(c,u)=>{const d=ie(()=>u.uniqueId);var f=pO(),h=q(f),b=y(h,2),v=y(T(b),2);Qe(v,(g,m)=>dt?.(g,m),()=>({text:"Existing decimal numbers will not be affected."})),z(()=>{W(h,"id",r(d)),W(b,"for",r(d))}),Qt(h,()=>a().onlyInt,g=>a(a().onlyInt=g,!0)),p(c,f)}}})}},$$legacy:!0})),Be()}var bO=S('<label>Min length</label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),yO=S('<label>Max length</label> <input type="number" step="1" placeholder="Up to 71 chars" max="71"/>',1),_O=S('<label>Bcrypt cost</label> <input type="number" placeholder="Default to 10" step="1" min="6" max="31"/>',1),xO=S('<label>Validation pattern</label> <input type="text" placeholder="ex. ^\\w+$"/>',1),wO=S('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function kO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=ee(e,"field",12),s=ee(e,"key",8,"");function o(){a(a().cost=11,!0)}ne(()=>R(a()),()=>{F.isEmpty(a().id)&&o()}),ft(),He(),gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(l){a(l)},$$events:{rename(l){ot.call(this,e,l)},remove(l){ot.call(this,e,l)},duplicate(l){ot.call(this,e,l)}},$$slots:{options:(l,c)=>{var u=wO(),d=T(u),f=T(d);Pe(f,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ce,$$slots:{default:(x,C)=>{const O=ie(()=>C.uniqueId);var $=bO(),E=q($),w=y(E,2);z(()=>{W(E,"for",r(O)),W(w,"id",r(O)),Rn(w,(R(a()),M(()=>a().min||"")))}),re("input",w,I=>a(a().min=I.target.value<<0,!0)),p(x,$)}}});var h=y(d,2),b=T(h);Pe(b,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ce,$$slots:{default:(x,C)=>{const O=ie(()=>C.uniqueId);var $=yO(),E=q($),w=y(E,2);z(()=>{W(E,"for",r(O)),W(w,"id",r(O)),W(w,"min",(R(a()),M(()=>a().min||0))),Rn(w,(R(a()),M(()=>a().max||"")))}),re("input",w,I=>a(a().max=I.target.value<<0,!0)),p(x,$)}}});var v=y(h,2),g=T(v);Pe(g,{class:"form-field",get name(){return`fields.${s()??""}.cost`},children:Ce,$$slots:{default:(x,C)=>{const O=ie(()=>C.uniqueId);var $=_O(),E=q($),w=y(E,2);z(()=>{W(E,"for",r(O)),W(w,"id",r(O)),Rn(w,(R(a()),M(()=>a().cost||"")))}),re("input",w,I=>a(a().cost=I.target.value<<0,!0)),p(x,$)}}});var m=y(v,2),k=T(m);Pe(k,{class:"form-field",get name(){return`fields.${s()??""}.pattern`},children:Ce,$$slots:{default:(x,C)=>{const O=ie(()=>C.uniqueId);var $=xO(),E=q($),w=y(E,2);z(()=>{W(E,"for",r(O)),W(w,"id",r(O))}),xt(w,()=>a().pattern,I=>a(a().pattern=I,!0)),p(x,$)}}}),p(l,u)}},$$legacy:!0})),Be()}var SO=S('<hr/> <button type="button" class="btn btn-transparent btn-block btn-sm"><i class="ri-add-line"></i> <span class="txt">New collection</span></button>',1),TO=S('<!> <div class="separator"></div>',1),$O=S('<label><span class="txt">Allowed collections (optional, multi)</span> <i class="ri-information-line link-hint"></i></label> <!>',1),IO=S('<!> <div class="separator"></div>',1),CO=S('<div class="separator"></div> <!> <!> <div class="separator"></div>',1),EO=S('<label>Min select</label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),OO=S('<label>Max select</label> <input type="number" step="1" placeholder="Default to single"/>',1),DO=S('<div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div>',1),PO=S('<label><span class="txt">Cascade delete</span> <i class="ri-information-line link-hint"></i></label> <!>',1),MO=S('<div class="grid grid-sm"><!> <div class="col-sm-12"><!></div></div>'),AO=S("<!> <!>",1);function LO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);const[a,s]=Lt(),o=()=>It(Xn,"$collections",a),l=P(),c=P(),u=P();let d=ee(e,"field",12),f=ee(e,"key",8,"");const h=[{label:"Single",value:!0},{label:"Multiple",value:!1}],b=[{label:"False",value:!1},{label:"True",value:!0}];let v=P(null),g=P(d().maxSelect<=1),m=P(r(g));function k(){d(d().maxSelect=1,!0),d(d().collectionId=null,!0),d(d().collectionIds=[],!0),d(d().cascadeDelete=!1,!0),_(g,!0),_(m,r(g))}ne(()=>o(),()=>{_(l,o().filter($=>!$.system&&$.type!="view"))}),ne(()=>R(d()),()=>{typeof d().maxSelect>"u"&&k()}),ne(()=>(r(m),r(g)),()=>{r(m)!=r(g)&&(_(m,r(g)),r(g)?(d(d().minSelect=0,!0),d(d().maxSelect=1,!0)):d(d().maxSelect=999,!0))}),ne(()=>(o(),R(d())),()=>{_(c,o().find($=>$.id==d().collectionId)||null)}),ne(()=>R(d()),()=>{_(u,Array.isArray(d().collectionIds)&&d().collectionIds.length>0)}),ft(),He();var x=AO(),C=q(x);gi(C,tn({get key(){return f()}},()=>i,{get field(){return d()},set field($){d($)},$$events:{rename($){ot.call(this,e,$)},remove($){ot.call(this,e,$)},duplicate($){ot.call(this,e,$)}},children:Ce,$$slots:{default:($,E)=>{const w=ie(()=>E.interactive);var I=CO(),D=y(q(I),2);{var A=H=>{var j=TO(),V=q(j);{let U=ie(()=>r(w)?"":"readonly");Pe(V,{get class(){return`form-field required ${r(U)??""}`},inlineError:!0,get name(){return`fields.${f()??""}.collectionId`},children:Ce,$$slots:{default:(B,J)=>{const Q=ie(()=>J.uniqueId);{let oe=ie(()=>(r(l),M(()=>r(l).length>5))),de=ie(()=>(R(r(w)),R(d()),M(()=>!r(w)||d().id)));Nn(B,{get id(){return r(Q)},get searchable(){return r(oe)},selectPlaceholder:"Select collection *",noOptionsText:"No collections found",selectionKey:"id",get items(){return r(l)},get readonly(){return r(de)},get keyOfSelected(){return d().collectionId},set keyOfSelected(ge){d(d().collectionId=ge,!0)},$$slots:{afterOptions:(ge,pe)=>{var xe=SO(),ve=y(q(xe),2);re("click",ve,()=>r(v)?.show()),p(ge,xe)}},$$legacy:!0})}}}})}p(H,j)},L=H=>{var j=IO(),V=q(j);Pe(V,{class:"form-field",get name(){return`fields.${f()??""}.collectionIds`},children:Ce,$$slots:{default:(U,B)=>{const J=ie(()=>B.uniqueId);var Q=$O(),oe=q(Q),de=y(T(oe),2);Qe(de,(pe,xe)=>dt?.(pe,xe),()=>({text:"If set, the relation can point to records from multiple collections. Values are stored as '<collectionId>:<id>'.",position:"top"}));var ge=y(oe,2);{let pe=ie(()=>(r(l),M(()=>r(l).length>5))),xe=ie(()=>(R(r(w)),R(d()),M(()=>!r(w)||d().id)));Nn(ge,{get id(){return r(J)},multiple:!0,get searchable(){return r(pe)},selectPlaceholder:"Select allowed collections",noOptionsText:"No collections found",selectionKey:"id",get items(){return r(l)},get readonly(){return r(xe)},get keyOfSelected(){return d().collectionIds},set keyOfSelected(ve){d(d().collectionIds=ve,!0)},$$legacy:!0})}z(()=>W(oe,"for",r(J))),p(U,Q)}}}),p(H,j)};G(D,H=>{r(g)?H(A):H(L,!1)})}var N=y(D,2);{let H=ie(()=>r(w)?"":"readonly");Pe(N,{get class(){return`form-field form-field-single-multiple-select ${r(H)??""}`},inlineError:!0,children:Ce,$$slots:{default:(j,V)=>{const U=ie(()=>V.uniqueId);{let B=ie(()=>!r(w));Nn(j,{get id(){return r(U)},get items(){return h},get readonly(){return r(B)},get keyOfSelected(){return r(g)},set keyOfSelected(J){_(g,J)},$$legacy:!0})}}}})}p($,I)},options:($,E)=>{var w=MO(),I=T(w);{var D=N=>{var H=DO(),j=q(H),V=T(j);Pe(V,{class:"form-field",get name(){return`fields.${f()??""}.minSelect`},children:Ce,$$slots:{default:(J,Q)=>{const oe=ie(()=>Q.uniqueId);var de=EO(),ge=q(de),pe=y(ge,2);z(()=>{W(ge,"for",r(oe)),W(pe,"id",r(oe)),Rn(pe,(R(d()),M(()=>d().minSelect||"")))}),re("input",pe,xe=>d(d().minSelect=xe.target.value<<0,!0)),p(J,de)}}});var U=y(j,2),B=T(U);Pe(B,{class:"form-field",get name(){return`fields.${f()??""}.maxSelect`},children:Ce,$$slots:{default:(J,Q)=>{const oe=ie(()=>Q.uniqueId);var de=OO(),ge=q(de),pe=y(ge,2);z(()=>{W(ge,"for",r(oe)),W(pe,"id",r(oe)),W(pe,"min",(R(d()),M(()=>d().minSelect||1)))}),xt(pe,()=>d().maxSelect,xe=>d(d().maxSelect=xe,!0)),p(J,de)}}}),p(N,H)};G(I,N=>{r(g)||N(D)})}var A=y(I,2),L=T(A);Pe(L,{class:"form-field",get name(){return`fields.${f()??""}.cascadeDelete`},children:Ce,$$slots:{default:(N,H)=>{const j=ie(()=>H.uniqueId);var V=PO(),U=q(V),B=y(T(U),2);Qe(B,(Q,oe)=>dt?.(Q,oe),()=>({text:[`Whether on ${r(c)?.name||"relation"} record deletion to delete also the current corresponding collection record(s).`,r(g)?null:`For "Multiple" relation fields the cascade delete is triggered only when all ${r(c)?.name||"relation"} ids are removed from the corresponding record.`].filter(Boolean).join(`

`),position:"top"}));var J=y(U,2);Nn(J,{get id(){return r(j)},get items(){return b},get keyOfSelected(){return d().cascadeDelete},set keyOfSelected(Q){d(d().cascadeDelete=Q,!0)},$$legacy:!0}),z(()=>W(U,"for",r(j))),p(N,V)}}}),p($,w)}},$$legacy:!0}));var O=y(C,2);mt(Rd(O,{$$events:{save:$=>{$?.detail?.collection?.id&&$.detail.collection.type!="view"&&d(d().collectionId=$.detail.collection.id,!0)}},$$legacy:!0}),$=>_(v,$),()=>r(v)),p(n,x),Be(),s()}var NO=S('<div class="dropdown-item plain svelte-3le152"><span class="txt"> </span> <div class="flex-fill"></div> <button type="button" class="btn btn-circle btn-transparent btn-hint btn-xs" title="Remove"><i class="ri-close-line" aria-hidden="true"></i></button></div>'),RO=S('<div class="block"><!> <div class="new-item-form svelte-3le152"><div class="form-field form-field-sm m-0"><div class="input-group"><input type="text" class="new-item-input svelte-3le152"/> <div class="form-field-addon suffix"><button type="button" title="Add new"><i class="ri-add-line" aria-hidden="true"></i></button></div></div></div></div></div>'),FO=S('<div class="block"><input readonly="" type="text" class="formatted-value-input svelte-3le152"/> <!></div>');function qO(n,e){Ue(e,!1);const t=P();let i=ee(e,"id",8,null),a=ee(e,"items",28,()=>[]),s=ee(e,"disabled",8,!1),o=ee(e,"emptyPlaceholder",8,"Add items"),l=ee(e,"newPlaceholder",8,"e.g. optionA"),c=P(),u=P("");function d(m){a(a()||[]),F.removeByValue(a(),m),a().length||r(c)?.focus()}function f(m){const k=m.trim();k.length&&(a(a()||[]),F.pushUnique(a(),k),_(u,""))}ne(()=>R(a()),()=>{_(t,a().join(" â¢ "))}),ft(),He();var h=FO(),b=T(h),v=y(b,2);{var g=m=>{Jn(m,{class:"dropdown dropdown-block options-dropdown dropdown-left m-t-0 p-0",$$events:{hide:()=>_(u,"")},children:(k,x)=>{var C=RO(),O=T(C);bt(O,3,a,N=>N,(N,H,j)=>{{let V=ie(()=>"options_"+i());cs(N,{get index(){return r(j)},get group(){return r(V)},get list(){return a()},set list(U){a(U)},children:(U,B)=>{var J=NO(),Q=T(J),oe=T(Q),de=y(Q,4);z(()=>Te(oe,r(H))),re("click",de,hn(()=>d(r(H)))),p(U,J)},$$slots:{default:!0},$$legacy:!0})}});var $=y(O,2),E=T($),w=T(E),I=T(w);Ui(I,!0),mt(I,N=>_(c,N),()=>r(c));var D=y(I,2),A=T(D);let L;z(N=>{W(I,"placeholder",l()),L=Re(A,1,"btn btn-transparent btn-xs btn-circle new-item-btn svelte-3le152",null,L,N)},[()=>({"btn-disabled":!r(u).length})]),xt(I,()=>r(u),N=>_(u,N)),re("keydown",I,N=>{N.code==="Enter"&&(N.preventDefault(),f(N.target.value))}),re("click",A,()=>f(r(u))),re("dragover",C,hn(function(N){ot.call(this,e,N)})),re("dragleave",C,hn(function(N){ot.call(this,e,N)})),re("dragend",C,hn(function(N){ot.call(this,e,N)})),re("dragstart",C,hn(function(N){ot.call(this,e,N)})),re("drop",C,hn(function(N){ot.call(this,e,N)})),p(k,C)},$$slots:{default:!0}})};G(v,m=>{s()||m(g)})}z(()=>{W(b,"id",i()),b.disabled=s(),W(b,"placeholder",o()),Rn(b,r(t)),W(b,"title",r(t))}),p(n,h),Be()}var zO=S('<div class="separator"></div> <!> <div class="separator"></div> <!> <div class="separator"></div>',1),jO=S('<label>Max select</label> <input type="number" step="1" min="2" placeholder="Default to single"/>',1);function VO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=ee(e,"field",12),s=ee(e,"key",8,"");const o=[{label:"Single",value:!0},{label:"Multiple",value:!1}];let l=P(a().maxSelect<=1),c=P(r(l));function u(){a(a().maxSelect=1,!0),a(a().values=[],!0),_(l,!0),_(c,r(l))}ne(()=>R(a()),()=>{typeof a().maxSelect>"u"&&u()}),ne(()=>(r(c),r(l),R(a())),()=>{r(c)!=r(l)&&(_(c,r(l)),r(l)?a(a().maxSelect=1,!0):a(a().maxSelect=a().values?.length||2,!0))}),ft(),He(),gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(d){a(d)},$$events:{rename(d){ot.call(this,e,d)},remove(d){ot.call(this,e,d)},duplicate(d){ot.call(this,e,d)}},children:Ce,$$slots:{default:(d,f)=>{const h=ie(()=>f.interactive);var b=zO(),v=y(q(b),2);{let m=ie(()=>r(h)?"":"readonly");Pe(v,{get class(){return`form-field required ${r(m)??""}`},inlineError:!0,get name(){return`fields.${s()??""}.values`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);qO(k,{get id(){return r(C)},emptyPlaceholder:"Add choices *",get items(){return a().values},set items(O){a(a().values=O,!0)},$$legacy:!0})}}})}var g=y(v,4);{let m=ie(()=>r(h)?"":"readonly");Pe(g,{get class(){return`form-field form-field-single-multiple-select ${r(m)??""}`},inlineError:!0,children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);{let O=ie(()=>!r(h));Nn(k,{get id(){return r(C)},get items(){return o},get readonly(){return r(O)},get keyOfSelected(){return r(l)},set keyOfSelected($){_(l,$)},$$legacy:!0})}}}})}p(d,b)},options:(d,f)=>{var h=tt(),b=q(h);{var v=g=>{Pe(g,{class:"form-field",get name(){return`fields.${s()??""}.maxSelect`},children:Ce,$$slots:{default:(m,k)=>{const x=ie(()=>k.uniqueId);var C=jO(),O=q(C),$=y(O,2);z(()=>{W(O,"for",r(x)),W($,"id",r(x)),W($,"max",(R(a()),M(()=>a().values.length)))}),xt($,()=>a().maxSelect,E=>a(a().maxSelect=E,!0)),p(m,C)}}})};G(b,g=>{r(l)||g(v)})}p(d,h)}},$$legacy:!0})),Be()}var UO=S('<label><span class="txt">Min length</span> <i class="ri-information-line link-hint"></i></label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),BO=S('<label><span class="txt">Max length</span> <i class="ri-information-line link-hint"></i></label> <input type="number" step="1" placeholder="Default to max 5000 characters"/>',1),HO=S('<i class="ri-information-line link-hint"></i>'),WO=S('<label><span class="txt">Validation pattern</span> <!></label> <input type="text"/> <div class="help-block"><p>Ex. <code></code></p></div>',1),YO=S('<label><span class="txt">Autogenerate pattern</span> <i class="ri-information-line link-hint"></i></label> <input type="text"/> <div class="help-block"><p>Ex. <code></code></p></div>',1),KO=S('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function ZO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=ee(e,"field",12),s=ee(e,"key",8,"");He(),gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ot.call(this,e,o)},remove(o){ot.call(this,e,o)},duplicate(o){ot.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=KO(),u=T(c),d=T(u);Pe(d,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=UO(),$=q(O),E=y(T($),2);Qe(E,(I,D)=>dt?.(I,D),()=>"Clear the field or set it to 0 for no limit.");var w=y($,2);W(w,"max",M(()=>Number.MAX_SAFE_INTEGER)),z(()=>{W($,"for",r(C)),W(w,"id",r(C)),Rn(w,(R(a()),M(()=>a().min||"")))}),re("input",w,I=>a(a().min=parseInt(I.target.value,10),!0)),p(k,O)}}});var f=y(u,2),h=T(f);Pe(h,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=BO(),$=q(O),E=y(T($),2);Qe(E,(I,D)=>dt?.(I,D),()=>"Clear the field or set it to 0 to fallback to the default limit.");var w=y($,2);W(w,"max",M(()=>Number.MAX_SAFE_INTEGER)),z(()=>{W($,"for",r(C)),W(w,"id",r(C)),W(w,"min",(R(a()),M(()=>a().min||0))),Rn(w,(R(a()),M(()=>a().max||"")))}),re("input",w,I=>a(a().max=parseInt(I.target.value,10),!0)),p(k,O)}}});var b=y(f,2),v=T(b);Pe(v,{class:"form-field",get name(){return`fields.${s()??""}.pattern`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=WO(),$=q(O),E=y(T($),2);{var w=N=>{var H=HO();Qe(H,(j,V)=>dt?.(j,V),()=>"All record ids have unique case-insensitive (ASCII) validation applied in addition to the user defined validation pattern."),p(N,H)};G(E,N=>{R(a()),M(()=>a().primaryKey)&&N(w)})}var I=y($,2),D=y(I,2),A=T(D),L=y(T(A));L.textContent="^[a-z0-9]+$",z(()=>{W($,"for",r(C)),W(I,"id",r(C))}),xt(I,()=>a().pattern,N=>a(a().pattern=N,!0)),p(k,O)}}});var g=y(b,2),m=T(g);Pe(m,{class:"form-field",get name(){return`fields.${s()??""}.autogeneratePattern`},children:Ce,$$slots:{default:(k,x)=>{const C=ie(()=>x.uniqueId);var O=YO(),$=q(O),E=y(T($),2);Qe(E,(L,N)=>dt?.(L,N),()=>"Set and autogenerate text matching the pattern on missing record create value.");var w=y($,2),I=y(w,2),D=T(I),A=y(T(D));A.textContent="[a-z0-9]{30}",z(()=>{W($,"for",r(C)),W(w,"id",r(C))}),xt(w,()=>a().autogeneratePattern,L=>a(a().autogeneratePattern=L,!0)),p(k,O)}}}),p(o,c)}},$$legacy:!0})),Be()}function JO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);let a=ee(e,"field",12),s=ee(e,"key",8,"");Gg(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ot.call(this,e,o)},remove(o){ot.call(this,e,o)},duplicate(o){ot.call(this,e,o)}},$$legacy:!0}))}function GO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);let a=ee(e,"field",12),s=ee(e,"key",8,"");gi(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){ot.call(this,e,o)},remove(o){ot.call(this,e,o)},duplicate(o){ot.call(this,e,o)}},$$legacy:!0}))}var XO=S("<div></div> <!> <hr/> <!>",1);function QO(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(vd,"$scaffolds",t),s=P();let o=ee(e,"collection",12),l=P();const c={text:ZO,number:gO,bool:EE,email:Gg,url:JO,editor:BE,date:zE,select:VO,json:fO,file:sO,relation:LO,password:kO,autodate:CE,geoPoint:GO};function u(w){o().fields[w]&&(o().fields.splice(w,1),o(o().fields=o().fields,!0))}function d(w){const I=o().fields[w];if(!I)return;I.onMountSelect=!1;const D=structuredClone(I);D.id="",D.system=!1,D.name=h(D.name+"_copy"),D.onMountSelect=!0,o().fields.splice(w+1,0,D),o(o().fields=o().fields,!0)}function f(w="text"){const I=F.initSchemaField({name:h(),type:w});I.onMountSelect=!0;const D=o().fields.findLastIndex(A=>A.type!="autodate");I.type!="autodate"&&D>=0?o().fields.splice(D+1,0,I):o().fields.push(I),o(o().fields=o().fields,!0)}function h(w="field"){let I=w,D=2,A=w.match(/\d+$/)?.[0]||"",L=A?w.substring(0,w.length-A.length):w;for(;b(I);)I=L+((A<<0)+D),D++;return I}function b(w){return!!o()?.fields?.find(I=>I.name===w)}function v(w){return r(s).findIndex(I=>I===w)}function g(w,I){!o()?.fields?.length||w===I||!I||o()?.fields?.find(D=>D.name==w&&!D._toDelete)||o(o().indexes=o().indexes.map(D=>F.replaceIndexColumn(D,w,I)),!0)}function m(){const w=o().fields||[],I=w.filter(A=>!A.system),D=structuredClone(a()[o().type]);o(o().fields=D.fields,!0);for(let A of w){if(!A.system)continue;const L=o().fields.findIndex(N=>N.name==A.name);L<0||o(o().fields[L]=Object.assign(o().fields[L],A),!0)}for(let A of I)o().fields.push(A)}function k(w,I){if(w===I||!I)return;let D=o().passwordAuth?.identityFields||[];for(let A=0;A<D.length;A++)D[A]==w&&(D[A]=I)}function x(w,I){g(w,I),k(w,I)}ne(()=>(R(o()),r(l)),()=>{!o().id&&r(l)!=o().type&&(_(l,o().type),m())}),ne(()=>R(o()),()=>{typeof o().fields>"u"&&o(o().fields=[],!0)}),ne(()=>R(o()),()=>{_(s,o().fields.filter(w=>!w._toDelete))}),ft(),He();var C=XO(),O=q(C);bt(O,7,()=>(R(o()),M(()=>o().fields)),w=>w,(w,I,D)=>{cs(w,{get index(){return r(D)},get disabled(){return(R(o()),M(()=>o().fields))[r(D)],M(()=>(R(o()),M(()=>o().fields))[r(D)]._toDelete)},dragHandleClass:"drag-handle-wrapper",get list(){return o().fields},set list(A){o(o().fields=A,!0)},$$events:{drag:A=>{if(!A.detail)return;const L=A.detail.target;L.style.opacity=0,setTimeout(()=>{L?.style?.removeProperty("opacity")},0),A.detail.dataTransfer.setDragImage(L,0,0)},sort:()=>{rn({})}},children:(A,L)=>{var N=tt(),H=q(N);{let j=ie(()=>((R(o()),M(()=>o().fields))[r(D)],M(()=>v((R(o()),M(()=>o().fields))[r(D)]))));pi(H,()=>c[(R(o()),M(()=>o().fields))[r(D)].type],(V,U)=>{U(V,{get key(){return r(j)},get collection(){return o()},get field(){return(R(o()),M(()=>o().fields))[r(D)]},set field(B){(R(o()),M(()=>o().fields))[r(D)]=B,fa(()=>o())},$$events:{remove:()=>u(r(D)),duplicate:()=>d(r(D)),rename:B=>x(B.detail.oldName,B.detail.newName)},$$legacy:!0})})}p(A,N)},$$slots:{default:!0},$$legacy:!0})});var $=y(O,2);uE($,{class:"btn btn-block btn-outline",$$events:{select:w=>f(w.detail)}});var E=y($,4);oE(E,{get collection(){return o()},set collection(w){o(w)},$$legacy:!0}),z(()=>Re(O,1,`schema-fields total-${R(o()),M(()=>o().fields.length)??""}`)),p(n,C),Be(),i()}var eD=S('<textarea disabled rows="7" placeholder="Loading..."></textarea>'),tD=S("<p> </p>"),nD=S('<div class="help-block help-block-error"><div class="content"></div></div>'),iD=S(`<label><span class="txt">Select query</span></label> <!> <div class="help-block"><ul><li>Wildcard columns (<code>*</code>) are not supported.</li> <li>The query must have a unique <code>id</code> column. <br/> If your query doesn't have a suitable one, you can use the universal <code>(ROW_NUMBER() OVER()) as id</code>.</li> <li>Expressions must be aliased with a valid formatted field name, e.g. <code>MAX(balance) as maxBalance</code>.</li> <li>Combined/multi-spaced expressions must be wrapped in parenthesis, e.g. <code>(MAX(balance) + 1) as maxBalance</code>.</li></ul></div> <!>`,1);function rD(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t);let s=ee(e,"collection",12),o=P(),l=P(!1),c=P([]);function u(d){_(c,[]);const f=F.getNestedVal(d,"fields",null);if(F.isEmpty(f))return;if(f?.message){r(c).push(f?.message);return}const h=F.extractColumnsFromQuery(s()?.viewQuery);F.removeByValue(h,"id"),F.removeByValue(h,"created"),F.removeByValue(h,"updated");for(let b in f)for(let v in f[b]){const g=f[b][v].message,m=h[b]||b;r(c).push(F.sentenize(m+": "+g))}}un(async()=>{_(l,!0);try{_(o,(await Ut(async()=>{const{default:d}=await import("./CodeEditor-Bk8QeLSV.js");return{default:d}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(d){console.warn(d)}_(l,!1)}),ne(()=>a(),()=>{u(a())}),ft(),He();{let d=ie(()=>(r(c),M(()=>r(c).length?"error":"")));Pe(n,{get class(){return`form-field required ${r(d)??""}`},name:"viewQuery",children:Ce,$$slots:{default:(f,h)=>{const b=ie(()=>h.uniqueId);var v=iD(),g=q(v),m=y(g,2);{var k=$=>{var E=eD();p($,E)},x=$=>{var E=tt(),w=q(E);pi(w,()=>r(o),(I,D)=>{D(I,{get id(){return r(b)},placeholder:"eg. SELECT id, name from posts",language:"sql-select",minHeight:"150",get value(){return s().viewQuery},set value(A){s(s().viewQuery=A,!0)},$$events:{change:()=>{r(c).length&&Gn("fields")}},$$legacy:!0})}),p($,E)};G(m,$=>{r(l)?$(k):$(x,!1)})}var C=y(m,4);{var O=$=>{var E=nD(),w=T(E);bt(w,5,()=>r(c),At,(I,D)=>{var A=tD(),L=T(A);z(()=>Te(L,r(D))),p(I,A)}),p($,E)};G(C,$=>{r(c),M(()=>r(c).length)&&$(O)})}z(()=>W(g,"for",r(b))),p(f,v)}}})}Be(),i()}var aD=S("<code> </code>"),sD=S('<div><div class="alert alert-warning m-0"><div class="content"><p class="m-b-0">The following record fields are available:</p> <div class="inline-flex flex-gap-5"></div> <hr class="m-t-10 m-b-5"/> <p class="m-b-0">The request fields could be accessed with the special <em>@request</em> filter:</p> <div class="inline-flex flex-gap-5"><code>@request.headers.*</code> <code>@request.query.*</code> <code>@request.body.*</code> <code>@request.auth.*</code></div> <hr class="m-t-10 m-b-5"/> <p class="m-b-0">You could also add constraints and query other collections using the <em>@collection</em> filter:</p> <div class="inline-flex flex-gap-5"><code>@collection.ANY_COLLECTION_NAME.*</code></div> <hr class="m-t-10 m-b-5"/> <p>Example rule: <br/> <code>@request.auth.id != "" && created > "2022-01-01 00:00:00"</code></p></div></div></div>'),oD=S('<i class="ri-information-line link-hint"></i>'),lD=S('<i class="ri-information-line link-hint"></i>'),cD=S("<!> <!> <!>",1),uD=S('<i class="ri-arrow-up-s-line txt-sm"></i>'),dD=S('<i class="ri-arrow-down-s-line txt-sm"></i>'),fD=S(`<p>This rule is executed every time before authentication allowing you to restrict who
                        can authenticate.</p> <p>For example, to allow only verified users you can set it to <code>verified = true</code>.</p> <p>Leave it empty to allow anyone with an account to authenticate.</p> <p>To disable authentication entirely you can change it to "Set superusers only".</p>`,1),hD=S(`<p>This rule is executed in addition to the <code>create</code> and <code>update</code> API
                        rules.</p> <p>It enables superuser-like permissions to allow fully managing the auth record(s), eg.
                        changing the password without requiring to enter the old one, directly updating the
                        verified state or email, etc.</p>`,1),vD=S('<div class="block"><!> <!></div>'),mD=S('<hr/> <button type="button"><strong class="txt">Additional auth collection rules</strong> <!></button> <!>',1),pD=S('<div class="block m-b-sm handle"><div class="flex txt-sm txt-hint m-b-5"><p>All rules follow the <a target="_blank" rel="noopener noreferrer">PocketBase filter syntax and operators</a>.</p> <button type="button" class="expand-handle txt-sm txt-bold txt-nowrap link-hint"> </button></div> <!></div> <!> <!> <!> <!>',1);function gD(n,e){Ue(e,!1);const t=P(),i=P();let a=ee(e,"collection",12),s=P(!1),o=P(a().manageRule!==null||a().authRule!=="");ne(()=>R(a()),()=>{_(t,F.getAllCollectionIdentifiers(a()))}),ne(()=>R(a()),()=>{_(i,a().fields?.filter(E=>E.hidden).map(E=>E.name))}),ft(),He();var l=pD(),c=q(l),u=T(c),d=T(u),f=y(T(d)),h=y(d,2),b=T(h),v=y(u,2);{var g=E=>{var w=sD(),I=T(w),D=T(I),A=y(T(D),2);bt(A,5,()=>r(t),At,(L,N)=>{var H=tt(),j=q(H);{var V=U=>{var B=aD(),J=T(B);z(()=>Te(J,r(N))),p(U,B)};G(j,U=>{r(i),r(N),M(()=>!r(i).includes(r(N)))&&U(V)})}p(L,H)}),Et(3,w,()=>mn,()=>({duration:150})),p(E,w)};G(v,E=>{r(s)&&E(g)})}var m=y(c,2);Lr(m,{label:"List/Search rule",formKey:"listRule",get collection(){return a()},get rule(){return a().listRule},set rule(E){a(a().listRule=E,!0)},$$legacy:!0});var k=y(m,2);Lr(k,{label:"View rule",formKey:"viewRule",get collection(){return a()},get rule(){return a().viewRule},set rule(E){a(a().viewRule=E,!0)},$$legacy:!0});var x=y(k,2);{var C=E=>{var w=cD(),I=q(w);Lr(I,{label:"Create rule",formKey:"createRule",get collection(){return a()},get rule(){return a().createRule},set rule(L){a(a().createRule=L,!0)},$$slots:{afterLabel:(L,N)=>{const H=ie(()=>N.isSuperuserOnly);var j=tt(),V=q(j);{var U=B=>{var J=oD();Qe(J,(Q,oe)=>dt?.(Q,oe),()=>({text:"The main record fields hold the values that are going to be inserted in the database.",position:"top"})),p(B,J)};G(V,B=>{r(H)||B(U)})}p(L,j)}},$$legacy:!0});var D=y(I,2);Lr(D,{label:"Update rule",formKey:"updateRule",get collection(){return a()},get rule(){return a().updateRule},set rule(L){a(a().updateRule=L,!0)},$$slots:{afterLabel:(L,N)=>{const H=ie(()=>N.isSuperuserOnly);var j=tt(),V=q(j);{var U=B=>{var J=lD();Qe(J,(Q,oe)=>dt?.(Q,oe),()=>({text:`The main record fields represent the old/existing record field values.
To target the newly submitted ones you can use @request.body.*`,position:"top"})),p(B,J)};G(V,B=>{r(H)||B(U)})}p(L,j)}},$$legacy:!0});var A=y(D,2);Lr(A,{label:"Delete rule",formKey:"deleteRule",get collection(){return a()},get rule(){return a().deleteRule},set rule(L){a(a().deleteRule=L,!0)},$$legacy:!0}),p(E,w)};G(x,E=>{R(a()),M(()=>a()?.type!=="view")&&E(C)})}var O=y(x,2);{var $=E=>{var w=mD(),I=y(q(w),2),D=y(T(I),2);{var A=j=>{var V=uD();p(j,V)},L=j=>{var V=dD();p(j,V)};G(D,j=>{r(o)?j(A):j(L,!1)})}var N=y(I,2);{var H=j=>{var V=vD(),U=T(V);Lr(U,{label:"Authentication rule",formKey:"authRule",placeholder:"",get collection(){return a()},get rule(){return a().authRule},set rule(J){a(a().authRule=J,!0)},children:(J,Q)=>{var oe=fD();p(J,oe)},$$slots:{default:!0},$$legacy:!0});var B=y(U,2);{let J=ie(()=>(R(a()),M(()=>a().manageRule!==null)));Lr(B,{label:"Manage rule",formKey:"manageRule",placeholder:"",get required(){return r(J)},get collection(){return a()},get rule(){return a().manageRule},set rule(Q){a(a().manageRule=Q,!0)},children:(Q,oe)=>{var de=hD();p(Q,de)},$$slots:{default:!0},$$legacy:!0})}Et(3,V,()=>mn,()=>({duration:150})),p(j,V)};G(N,j=>{r(o)&&j(H)})}z(()=>Re(I,1,`btn btn-sm m-b-sm ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),re("click",I,()=>{_(o,!r(o))}),p(E,w)};G(O,E=>{R(a()),M(()=>a()?.type==="auth")&&E($)})}z(()=>{W(f,"href",M(()=>"https://pocketbase.io/docs/api-rules-and-filters")),Te(b,r(s)?"Hide available fields":"Show available fields")}),re("click",h,()=>_(s,!r(s))),p(n,l),Be()}var bD=S("<p>All data associated with the removed fields will be permanently deleted!</p>"),yD=S(`<div class="alert alert-warning"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content txt-bold"><p>If any of the collection changes is part of another collection rule, filter or view query,
                    you'll have to update it manually!</p> <!></div></div>`),_D=S('<li class="svelte-xqpcsf"><div class="inline-flex">Renamed collection <strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div></li>'),xD=S('<li class="svelte-xqpcsf">Multiple to single value conversion of field <strong> </strong> <em class="txt-sm">(will keep only the last array item)</em></li>'),wD=S('<li class="svelte-xqpcsf"><div class="inline-flex">Renamed field <strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div></li>'),kD=S('<li class="txt-danger svelte-xqpcsf">Removed field <span class="txt-bold"> </span></li>'),SD=S("<!> <!> <!>",1),TD=S('<li class="svelte-xqpcsf">Changed API rule <code class="txt-sm"> </code>: <br/> <small class="txt-mono txt-hint"><strong>Old</strong>: <span class="txt-preline"> </span></small> <br/> <small class="txt-mono txt-success"><strong>New</strong>: <span class="txt-preline"> </span></small></li>'),$D=S(`<li class="svelte-xqpcsf">Changed <code> </code> host <div class="inline-flex m-l-5"><strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div> <br/> <em class="txt-hint">If the old and new OIDC configuration is not for the same provider consider deleting
                        all old <code class="txt-sm">_externalAuths</code> records associated to the current
                        collection and provider, otherwise it may result in account linking errors. <a target="_blank">Review existing <code class="txt-sm">_externalAuths</code> records <i class="ri-external-link-line txt-sm"></i></a>.</em></li>`),ID=S('<h6>Changes:</h6> <ul class="changes-list svelte-xqpcsf"><!> <!> <!> <!></ul>',1),CD=S("<!> <!>",1),ED=S("<h4>Confirm collection changes</h4>"),OD=S('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button" class="btn btn-expanded"><span class="txt">Confirm</span></button>',1);function DD(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=P(),o=P(),l=P(),c=P(),u=zt();let d=P(),f=P(),h=P(),b,v=P([]),g=P([]);async function m(I,D,A=!0){_(f,I),_(h,D),b=A,await O(),w(),await Tn(),r(t)||r(s).length||r(o).length||r(l).length||r(v).length||r(g).length?r(d)?.show():x()}function k(){r(d)?.hide()}function x(){k(),u("confirm",b)}const C=["oidc","oidc2","oidc3"];async function O(){_(v,[]);for(let I of C){let D=r(f)?.oauth2?.providers?.find(H=>H.name==I),A=r(h)?.oauth2?.providers?.find(H=>H.name==I);if(!D||!A)continue;let L=new URL(D.authURL).host,N=new URL(A.authURL).host;L!=N&&await $(I)&&r(v).push({name:I,oldHost:L,newHost:N})}}async function $(I){try{return await Le.collection("_externalAuths").getFirstListItem(Le.filter("collectionRef={:collectionId} && provider={:provider}",{collectionId:r(h)?.id,provider:I})),!0}catch{}return!1}function E(I){return`#/collections?collection=_externalAuths&filter=collectionRef%3D%22${r(h)?.id}%22+%26%26+provider%3D%22${I}%22`}function w(){if(_(g,[]),window.location.protocol!="https:")return;const I=["listRule","viewRule"];r(i)||I.push("createRule","updateRule","deleteRule"),r(a)&&I.push("manageRule","authRule");let D,A;for(let L of I)D=r(f)?.[L],A=r(h)?.[L],D!==A&&r(g).push({prop:L,oldRule:D,newRule:A})}return ne(()=>(r(f),r(h)),()=>{_(t,r(f)?.name!=r(h)?.name)}),ne(()=>r(h),()=>{_(i,r(h)?.type==="view")}),ne(()=>r(h),()=>{_(a,r(h)?.type==="auth")}),ne(()=>(r(i),r(h)),()=>{_(s,!r(i)&&r(h)?.fields?.filter(I=>I.id&&!I._toDelete&&I._originalName!=I.name)||[])}),ne(()=>(r(i),r(h)),()=>{_(o,!r(i)&&r(h)?.fields?.filter(I=>I.id&&I._toDelete)||[])}),ne(()=>(r(h),r(f)),()=>{_(l,r(h)?.fields?.filter(I=>{const D=r(f)?.fields?.find(A=>A.id==I.id);return D?D.maxSelect!=1&&I.maxSelect==1:!1})||[])}),ne(()=>(r(i),r(t),r(g)),()=>{_(c,!r(i)||r(t)||r(g).length)}),ft(),He(),mt(pn(n,{class:"confirm-changes-panel",popup:!0,$$events:{hide(I){ot.call(this,e,I)},show(I){ot.call(this,e,I)}},children:(I,D)=>{var A=CD(),L=q(A);{var N=V=>{var U=yD(),B=y(T(U),2),J=y(T(B),2);{var Q=oe=>{var de=bD();p(oe,de)};G(J,oe=>{r(o),M(()=>r(o).length)&&oe(Q)})}p(V,U)};G(L,V=>{r(t),r(o),r(s),M(()=>r(t)||r(o).length||r(s).length)&&V(N)})}var H=y(L,2);{var j=V=>{var U=ID(),B=y(q(U),2),J=T(B);{var Q=xe=>{var ve=_D(),Ee=T(ve),ce=y(T(Ee)),he=T(ce),be=y(ce,4),we=T(be);z(()=>{Te(he,(r(f),M(()=>r(f)?.name))),Te(we,(r(h),M(()=>r(h)?.name)))}),p(xe,ve)};G(J,xe=>{r(t)&&xe(Q)})}var oe=y(J,2);{var de=xe=>{var ve=SD(),Ee=q(ve);bt(Ee,1,()=>r(l),At,(be,we)=>{var ue=xD(),me=y(T(ue)),ae=T(me);z(()=>Te(ae,(r(we),M(()=>r(we).name)))),p(be,ue)});var ce=y(Ee,2);bt(ce,1,()=>r(s),At,(be,we)=>{var ue=wD(),me=T(ue),ae=y(T(me)),te=T(ae),se=y(ae,4),ye=T(se);z(()=>{Te(te,(r(we),M(()=>r(we)._originalName))),Te(ye,(r(we),M(()=>r(we).name)))}),p(be,ue)});var he=y(ce,2);bt(he,1,()=>r(o),At,(be,we)=>{var ue=kD(),me=y(T(ue)),ae=T(me);z(()=>Te(ae,(r(we),M(()=>r(we).name)))),p(be,ue)}),p(xe,ve)};G(oe,xe=>{r(i)||xe(de)})}var ge=y(oe,2);bt(ge,1,()=>r(g),At,(xe,ve)=>{var Ee=TD(),ce=y(T(Ee)),he=T(ce),be=y(ce,4),we=y(T(be),2),ue=T(we),me=y(be,4),ae=y(T(me),2),te=T(ae);z(()=>{Te(he,(r(ve),M(()=>r(ve).prop))),Te(ue,(r(ve),M(()=>r(ve).oldRule===null?"null (superusers only)":r(ve).oldRule||'""'))),Te(te,(r(ve),M(()=>r(ve).newRule===null?"null (superusers only)":r(ve).newRule||'""')))}),p(xe,Ee)});var pe=y(ge,2);bt(pe,1,()=>r(v),At,(xe,ve)=>{var Ee=$D(),ce=y(T(Ee)),he=T(ce),be=y(ce,2),we=T(be),ue=T(we),me=y(we,4),ae=T(me),te=y(be,4),se=y(T(te),3);z(ye=>{Te(he,(r(ve),M(()=>r(ve).name))),Te(ue,(r(ve),M(()=>r(ve).oldHost))),Te(ae,(r(ve),M(()=>r(ve).newHost))),W(se,"href",ye)},[()=>(r(ve),M(()=>E(r(ve).name)))]),p(xe,Ee)}),p(V,U)};G(H,V=>{r(c)&&V(j)})}p(I,A)},$$slots:{default:!0,header:(I,D)=>{var A=ED();p(I,A)},footer:(I,D)=>{var A=OD(),L=q(A);Ui(L,!0);var N=y(L,2);re("click",L,()=>k()),re("click",N,()=>x()),p(I,A)}},$$legacy:!0}),I=>_(d,I),()=>r(d)),_t(e,"show",m),_t(e,"hide",k),Be({show:m,hide:k})}var PD=S('<div class="tab-item active"><!></div>'),MD=S("<div><!></div>"),AD=S('<div class="tabs-content svelte-xyiw1b"><div><!></div> <!> <!></div>'),LD=S('<button type="button" class="dropdown-item" role="menuitem"><i class="ri-file-copy-line" aria-hidden="true"></i> <span class="txt">Duplicate</span></button> <hr/>',1),ND=S('<button type="button" class="dropdown-item txt-danger" role="menuitem"><i class="ri-eraser-line" aria-hidden="true"></i> <span class="txt">Truncate</span></button>'),RD=S('<button type="button" class="dropdown-item txt-danger" role="menuitem"><i class="ri-delete-bin-7-line" aria-hidden="true"></i> <span class="txt">Delete</span></button>'),FD=S("<!> <!> <!>",1),qD=S('<div class="flex-fill"></div> <div tabindex="0" role="button" aria-label="More collection options" class="btn btn-sm btn-circle btn-transparent flex-gap-0"><i class="ri-more-line" aria-hidden="true"></i> <!></div>',1),zD=S('<button type="button" role="menuitem"><i aria-hidden="true"></i> <span class="txt"> </span></button>'),jD=S('<i class="ri-arrow-down-s-fill" aria-hidden="true"></i> <!>',1),VD=S('<div class="help-block">System collection</div>'),UD=S('<label>Name</label> <input type="text" required spellcheck="false"/> <div class="form-field-addon"><div aria-label="View types"><span aria-hidden="true"></span> <span class="txt"> </span> <!></div></div> <!>',1),BD=S('<i class="ri-error-warning-fill txt-danger"></i>'),HD=S('<i class="ri-error-warning-fill txt-danger"></i>'),WD=S('<button type="button"><span class="txt">API Rules</span> <!></button>'),YD=S('<i class="ri-error-warning-fill txt-danger"></i>'),KD=S('<button type="button"><span class="txt">Options</span> <!></button>'),ZD=S('<h4 class="upsert-panel-title svelte-xyiw1b"> </h4> <!> <form class="block"><!> <input type="submit" class="hidden" tabindex="-1"/></form> <div class="tabs-header stretched"><button type="button"><span class="txt"> </span> <!></button> <!> <!></div>',1),JD=S('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Save and continue</span></button>'),GD=S('<button type="button" class="btn p-l-5 p-r-5 flex-gap-0"><i class="ri-arrow-down-s-line" aria-hidden="true"></i> <!></button>'),XD=S('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <div class="btns-group no-gap"><button type="button" title="Save and close"><span class="txt"> </span></button> <!></div>',1),QD=S("<!> <!>",1);function Rd(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(vd,"$scaffolds",t),s=()=>It(jn,"$errors",t),o=P(),l=P(),c=P(),u=P(),d=P(),f=P(),h="schema",b="api_rules",v="options",g="base",m="auth",k="view",x=P({});ut(x,r(x)[g]="Base"),ut(x,r(x)[k]="View"),ut(x,r(x)[m]="Auth");const C=zt();let O=P(),$=P(),E=P(null),w=P({}),I=P(!1),D=P(!1),A=P(!1),L=P(h),N=P(ve(r(w))),H=P(""),j=P([]);function V(te){_(L,te)}function U(te){return Q(te),_(A,!0),_(D,!1),_(I,!1),V(h),r(O)?.show()}function B(){return r(O)?.hide()}function J(){_(A,!1),B()}async function Q(te){rn({}),typeof te<"u"?(_(E,te),_(w,structuredClone(te))):(_(E,null),_(w,structuredClone(a().base)),r(w).fields.push({type:"autodate",name:"created",onCreate:!0}),r(w).fields.push({type:"autodate",name:"updated",onCreate:!0,onUpdate:!0})),ut(w,r(w).fields=r(w).fields||[]),ut(w,r(w)._originalName=r(w).name||""),await Tn(),_(N,ve(r(w)))}async function oe(te=!0){if(!r(D)){_(D,!0);try{r(w).id?await r($)?.show(r(E),r(w),te):await de(te)}catch{}_(D,!1)}}function de(te=!0){if(r(I))return;_(I,!0);const se=ge(),ye=!r(w).id;let ke;return ye?ke=Le.collections.create(se):ke=Le.collections.update(r(w).id,se),ke.then(Ie=>{Fs(),L1(Ie),te?(_(A,!1),B()):Q(Ie),vn(r(w).id?"Successfully updated collection.":"Successfully created collection."),C("save",{isNew:ye,collection:Ie}),ye&&Zn(Hi,Ie)}).catch(Ie=>{Le.error(Ie)}).finally(()=>{_(I,!1)})}function ge(){const te=Object.assign({},r(w));te.fields=te.fields.slice(0);for(let se=te.fields.length-1;se>=0;se--)te.fields[se]._toDelete&&te.fields.splice(se,1);return te}function pe(){r(E)?.id&&Ln(`Do you really want to delete all "${r(E).name}" records, including their cascade delete references and files?`,()=>Le.collections.truncate(r(E).id).then(()=>{J(),vn(`Successfully truncated collection "${r(E).name}".`),C("truncate")}).catch(te=>{Le.error(te)}))}function xe(){r(E)?.id&&Ln(`Do you really want to delete collection "${r(E).name}" and all its records?`,()=>Le.collections.delete(r(E).id).then(()=>{J(),vn(`Successfully deleted collection "${r(E).name}".`),C("delete",r(E)),N1(r(E))}).catch(te=>{Le.error(te)}))}function ve(te){return JSON.stringify(te)}function Ee(te){ut(w,r(w).type=te),_(w,Object.assign(structuredClone(a()[te]),r(w))),Gn("fields")}function ce(){r(d)?Ln("You have unsaved changes. Do you really want to discard them?",()=>{he()}):he()}async function he(){const te=r(E)?structuredClone(r(E)):null;if(te){if(te.id="",te.created="",te.updated="",te.name+="_duplicate",!F.isEmpty(te.fields))for(const se of te.fields)se.id="";if(!F.isEmpty(te.indexes))for(let se=0;se<te.indexes.length;se++){const ye=F.parseIndex(te.indexes[se]);ye.indexName="idx_"+F.randomString(10),ye.tableName=te.name,te.indexes[se]=F.buildIndex(ye)}}U(te),await Tn(),_(N,"")}function be(te,se=[]){if(F.isEmpty(te))return!1;const ye=Object.keys(te);for(let ke of ye)if(!se.includes(ke))return!0;return!1}ne(()=>a(),()=>{_(j,Object.keys(a().base||{}))}),ne(()=>r(w),()=>{_(o,r(w).type===m)}),ne(()=>r(w),()=>{_(l,r(w).type===k)}),ne(()=>(s(),F),()=>{s().fields||s().viewQuery||s().indexes?_(H,F.getNestedVal(s(),"fields.message")||"Has errors"):_(H,"")}),ne(()=>r(w),()=>{_(c,!!r(w).id&&r(w).system)}),ne(()=>r(w),()=>{_(u,!!r(w).id&&r(w).system&&r(w).name=="_superusers")}),ne(()=>(r(N),r(w)),()=>{_(d,r(N)!=ve(r(w)))}),ne(()=>(r(w),r(d)),()=>{_(f,!r(w).id||r(d))}),ne(()=>(r(L),r(w)),()=>{r(L)===v&&r(w).type!=="auth"&&V(h)}),ne(()=>r(w),()=>{r(w).type==="view"&&(ut(w,r(w).createRule=null),ut(w,r(w).updateRule=null),ut(w,r(w).deleteRule=null),ut(w,r(w).indexes=[]))}),ne(()=>(r(w),r(E),F),()=>{r(w).name&&r(E)?.name!=r(w).name&&r(w).indexes.length>0&&ut(w,r(w).indexes=r(w).indexes?.map(te=>F.replaceIndexTableName(te,r(w).name)))}),ft(),He();var we=QD(),ue=q(we);{let te=ie(()=>!r(I));mt(pn(ue,{class:"overlay-panel-lg colored-header collection-panel",escClose:!1,get overlayClose(){return r(te)},beforeHide:()=>r(d)&&r(A)?(Ln("You have unsaved changes. Do you really want to close the panel?",()=>{_(A,!1),B()}),!1):!0,$$events:{hide(se){ot.call(this,e,se)},show(se){ot.call(this,e,se)}},children:(se,ye)=>{var ke=AD(),Ie=T(ke);let Ne;var ze=T(Ie);{var Me=je=>{rD(je,{get collection(){return r(w)},set collection(nt){_(w,nt)},$$legacy:!0})},Ge=je=>{QO(je,{get collection(){return r(w)},set collection(nt){_(w,nt)},$$legacy:!0})};G(ze,je=>{r(l)?je(Me):je(Ge,!1)})}var _e=y(Ie,2);{var Oe=je=>{var nt=PD(),We=T(nt);gD(We,{get collection(){return r(w)},set collection(Ye){_(w,Ye)},$$legacy:!0}),p(je,nt)};G(_e,je=>{!r(u)&&r(L)===b&&je(Oe)})}var Fe=y(_e,2);{var at=je=>{var nt=MD();let We;var Ye=T(nt);WC(Ye,{get collection(){return r(w)},set collection(De){_(w,De)},$$legacy:!0}),z(De=>We=Re(nt,1,"tab-item",null,We,De),[()=>({active:r(L)===v})]),p(je,nt)};G(Fe,je=>{r(o)&&je(at)})}z(je=>Ne=Re(Ie,1,"tab-item",null,Ne,je),[()=>({active:r(L)===h})]),p(se,ke)},$$slots:{default:!0,header:(se,ye)=>{var ke=ZD(),Ie=q(ke),Ne=T(Ie),ze=y(Ie,2);{var Me=Ve=>{var Xe=qD(),et=y(q(Xe),2),Je=y(T(et),2);Jn(Je,{class:"dropdown dropdown-right m-t-5",children:(ht,gt)=>{var it=FD(),$e=q(it);{var vt=Ze=>{var st=LD(),wt=q(st);re("click",wt,()=>ce()),p(Ze,st)};G($e,Ze=>{r(w),M(()=>!r(w).system)&&Ze(vt)})}var Y=y($e,2);{var Z=Ze=>{var st=ND();re("click",st,()=>pe()),p(Ze,st)};G(Y,Ze=>{r(l)||Ze(Z)})}var le=y(Y,2);{var Se=Ze=>{var st=RD();re("click",st,Ct(hn(()=>xe()))),p(Ze,st)};G(le,Ze=>{r(w),M(()=>!r(w).system)&&Ze(Se)})}p(ht,it)},$$slots:{default:!0}}),p(Ve,Xe)};G(ze,Ve=>{r(w),r(l),M(()=>!!r(w).id&&(!r(w).system||!r(l)))&&Ve(Me)})}var Ge=y(ze,2),_e=T(Ge);Pe(_e,{class:"form-field collection-field-name required m-b-0",name:"name",children:Ce,$$slots:{default:(Ve,Xe)=>{const et=ie(()=>Xe.uniqueId);var Je=UD(),ht=q(Je),gt=y(ht,2);Ui(gt,(r(w),M(()=>!r(w).id)));let it;var $e=y(gt,2),vt=T($e);let Y;var Z=y(T(vt),2),le=T(Z),Se=y(Z,2);{var Ze=rt=>{var St=jD(),pt=y(q(St),2);Jn(pt,{class:"dropdown dropdown-right dropdown-nowrap m-t-5",children:(Tt,Ft)=>{var _n=tt(),Zt=q(_n);bt(Zt,1,()=>(r(x),M(()=>Object.entries(r(x)))),At,(Cn,Vn)=>{var dn=ga(()=>Ya(r(Vn),2));let sn=()=>r(dn)[0],ci=()=>r(dn)[1];var Un=zD();let Qn;var yi=T(Un),Mi=y(yi,2),Bn=T(Mi);z((_i,ea)=>{Qn=Re(Un,1,"dropdown-item closable",null,Qn,_i),Re(yi,1,ea,"svelte-xyiw1b"),Te(Bn,`${ci()??""} collection`)},[()=>({selected:sn()==r(w).type}),()=>$n((R(F),sn(),M(()=>F.getCollectionTypeIcon(sn()))))]),re("click",Un,()=>Ee(sn())),p(Cn,Un)}),p(Tt,_n)},$$slots:{default:!0}}),p(rt,St)};G(Se,rt=>{r(w),M(()=>!r(w).id)&&rt(Ze)})}var st=y($e,2);{var wt=rt=>{var St=VD();p(rt,St)};G(st,rt=>{r(w),M(()=>r(w).system)&&rt(wt)})}z((rt,St)=>{W(ht,"for",r(et)),W(gt,"id",r(et)),gt.disabled=r(c),W(gt,"placeholder",r(o)?'eg. "users"':'eg. "posts"'),Rn(gt,(r(w),M(()=>r(w).name))),it=Re(gt,1,"",null,it,rt),W(vt,"tabindex",(r(w),M(()=>r(w).id?-1:0))),W(vt,"role",(r(w),M(()=>r(w).id?"":"button"))),Y=Re(vt,1,`btn btn-sm p-r-10 p-l-10 ${r(w),M(()=>r(w).id?"btn-transparent":"btn-outline")??""}`,null,Y,St),Te(le,`Type: ${r(x),r(w),M(()=>r(x)[r(w).type]||"N/A")??""}`)},[()=>({"txt-bold":r(w).system}),()=>({"btn-disabled":!!r(w).id})]),re("input",gt,rt=>{ut(w,r(w).name=F.slugify(rt.target.value)),rt.target.value=r(w).name}),p(Ve,Je)}}});var Oe=y(Ge,2),Fe=T(Oe);let at;var je=T(Fe),nt=T(je),We=y(je,2);{var Ye=Ve=>{var Xe=BD();Qe(Xe,(et,Je)=>dt?.(et,Je),()=>r(H)),Et(3,Xe,()=>Fn,()=>({duration:150,start:.7})),p(Ve,Xe)};G(We,Ve=>{R(F),r(H),M(()=>!F.isEmpty(r(H)))&&Ve(Ye)})}var De=y(Fe,2);{var qe=Ve=>{var Xe=WD();let et;var Je=y(T(Xe),2);{var ht=gt=>{var it=HD();Qe(it,($e,vt)=>dt?.($e,vt),()=>"Has errors"),Et(3,it,()=>Fn,()=>({duration:150,start:.7})),p(gt,it)};G(Je,gt=>{R(F),s(),M(()=>!F.isEmpty(s()?.listRule)||!F.isEmpty(s()?.viewRule)||!F.isEmpty(s()?.createRule)||!F.isEmpty(s()?.updateRule)||!F.isEmpty(s()?.deleteRule)||!F.isEmpty(s()?.authRule)||!F.isEmpty(s()?.manageRule))&&gt(ht)})}z(gt=>et=Re(Xe,1,"tab-item",null,et,gt),[()=>({active:r(L)===b})]),re("click",Xe,()=>V(b)),p(Ve,Xe)};G(De,Ve=>{r(u)||Ve(qe)})}var Ke=y(De,2);{var ct=Ve=>{var Xe=KD();let et;var Je=y(T(Xe),2);{var ht=gt=>{var it=YD();Qe(it,($e,vt)=>dt?.($e,vt),()=>"Has errors"),Et(3,it,()=>Fn,()=>({duration:150,start:.7})),p(gt,it)};G(Je,gt=>{s(),r(j),M(()=>s()&&be(s(),r(j).concat(["manageRule","authRule"])))&&gt(ht)})}z(gt=>et=Re(Xe,1,"tab-item",null,et,gt),[()=>({active:r(L)===v})]),re("click",Xe,()=>V(v)),p(Ve,Xe)};G(Ke,Ve=>{r(o)&&Ve(ct)})}z(Ve=>{Te(Ne,(r(w),M(()=>r(w).id?"Edit collection":"New collection"))),at=Re(Fe,1,"tab-item",null,at,Ve),Te(nt,r(l)?"Query":"Fields")},[()=>({active:r(L)===h})]),re("submit",Ge,Ct(()=>{r(f)&&oe()})),re("click",Fe,()=>V(h)),p(se,ke)},footer:(se,ye)=>{var ke=XD(),Ie=q(ke),Ne=y(Ie,2),ze=T(Ne);let Me;var Ge=T(ze),_e=T(Ge),Oe=y(ze,2);{var Fe=at=>{var je=GD(),nt=y(T(je),2);Jn(nt,{class:"dropdown dropdown-upside dropdown-right dropdown-nowrap m-b-5",children:(We,Ye)=>{var De=JD();re("click",De,()=>oe(!1)),p(We,De)},$$slots:{default:!0}}),z(()=>je.disabled=!r(f)||r(I)||r(D)),p(at,je)};G(Oe,at=>{r(w),M(()=>r(w).id)&&at(Fe)})}z(at=>{Ie.disabled=r(I),Me=Re(ze,1,"btn",null,Me,at),ze.disabled=!r(f)||r(I)||r(D),Te(_e,(r(w),M(()=>r(w).id?"Save changes":"Create")))},[()=>({"btn-expanded":!r(w).id,"btn-expanded-sm":!!r(w).id,"btn-loading":r(I)||r(D)})]),re("click",Ie,()=>B()),re("click",ze,()=>oe()),p(se,ke)}},$$legacy:!0}),se=>_(O,se),()=>r(O))}var me=y(ue,2);mt(DD(me,{$$events:{confirm:te=>de(te.detail)},$$legacy:!0}),te=>_($,te),()=>r($)),p(n,we),_t(e,"changeTab",V),_t(e,"show",U),_t(e,"hide",B),_t(e,"forceHide",J);var ae=Be({changeTab:V,show:U,hide:B,forceHide:J});return i(),ae}var eP=S("<span></span>");function tP(n,e){Ue(e,!1);const t=zt();let i=ee(e,"tolerance",8,0),a=P(),s=0,o=0,l=0,c=0,u=P(!1);function d(g){g.stopPropagation(),s=g.clientX,o=g.clientY,l=g.clientX-r(a).offsetLeft,c=g.clientY-r(a).offsetTop,document.addEventListener("touchmove",h),document.addEventListener("mousemove",h),document.addEventListener("touchend",f),document.addEventListener("mouseup",f)}function f(g){r(u)&&(g.preventDefault(),_(u,!1),r(a).classList.remove("no-pointer-events"),t("dragstop",{event:g,elem:r(a)})),document.removeEventListener("touchmove",h),document.removeEventListener("mousemove",h),document.removeEventListener("touchend",f),document.removeEventListener("mouseup",f)}function h(g){let m=g.clientX-s,k=g.clientY-o,x=g.clientX-l,C=g.clientY-c;!r(u)&&Math.abs(x-r(a).offsetLeft)<i()&&Math.abs(C-r(a).offsetTop)<i()||(g.preventDefault(),r(u)||(_(u,!0),r(a).classList.add("no-pointer-events"),t("dragstart",{event:g,elem:r(a)})),t("dragging",{event:g,elem:r(a),diffX:m,diffY:k}))}He();var b=eP();let v;mt(b,g=>_(a,g),()=>r(a)),z(g=>v=Re(b,1,"dragline svelte-pjbzyu",null,v,g),[()=>({dragging:r(u)})]),re("mousedown",b,g=>{g.button==0&&d(g)}),re("touchstart",b,d),p(n,b),Be()}var nP=S("<aside><!></aside> <!>",1);function Xg(n,e){Ue(e,!1);const t="@superuserSidebarWidth";let i=ee(e,"class",8,""),a=P(),s=P(),o=P(localStorage.getItem(t)||null);ne(()=>(r(o),r(a)),()=>{r(o)&&r(a)&&(ut(a,r(a).style.width=r(o)),localStorage.setItem(t,r(o)))}),ft(),He();var l=nP(),c=q(l),u=T(c);Gt(u,e,"default",{},null),mt(c,f=>_(a,f),()=>r(a));var d=y(c,2);tP(d,{$$events:{dragstart:()=>{_(s,r(a).offsetWidth)},dragging:f=>{_(o,r(s)+f.detail.diffX+"px")},dragstop:()=>{F.triggerResize()}}}),z(()=>Re(c,1,`page-sidebar ${i()??""}`)),p(n,l),Be()}var iP=S('<i class="ri-alert-line txt-sm link-hint" aria-hidden="true"></i>'),rP=S('<i class="ri-unpin-line svelte-5oh3nd"></i>'),aP=S('<i class="ri-pushpin-line m-l-auto svelte-5oh3nd"></i>'),sP=S('<a><i aria-hidden="true"></i> <span class="txt"> </span> <!>  <span class="btn btn-xs btn-circle btn-hint btn-transparent btn-pin-collection m-l-auto svelte-5oh3nd" aria-hidden="true"><!></span></a>');function Jc(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Hi,"$activeCollection",t),s=P();let o=ee(e,"collection",8),l=ee(e,"pinnedIds",12);function c(O){l().includes(O.id)?F.removeByValue(l(),O.id):l().push(O.id),l(l())}ne(()=>(R(l()),R(o())),()=>{_(s,l().includes(o().id))}),ft(),He();var u=sP();let d;var f=T(u),h=y(f,2),b=T(h),v=y(h,2);{var g=O=>{var $=iP();Qe($,(E,w)=>dt?.(E,w),()=>"OAuth2 auth is enabled but the collection doesn't have any registered providers"),p(O,$)};G(v,O=>{R(o()),M(()=>o().type=="auth"&&o().oauth2?.enabled&&!o().oauth2.providers?.length)&&O(g)})}var m=y(v,2);W(m,"aria-label","Pin collection");var k=T(m);{var x=O=>{var $=rP();p(O,$)},C=O=>{var $=aP();p(O,$)};G(k,O=>{r(s)?O(x):O(C,!1)})}Qe(m,(O,$)=>dt?.(O,$),()=>({position:"right",text:(r(s)?"Unpin":"Pin")+" collection"})),Rt(()=>re("click",m,Ct(hn(()=>c(o()))))),Qe(u,O=>ii?.(O)),z((O,$)=>{W(u,"href",`/collections?collection=${R(o()),M(()=>o().id)??""}`),d=Re(u,1,"sidebar-list-item svelte-5oh3nd",null,d,O),W(u,"title",(R(o()),M(()=>o().name))),Re(f,1,$,"svelte-5oh3nd"),Te(b,(R(o()),M(()=>o().name)))},[()=>({active:a()?.id===o().id}),()=>$n((R(F),R(o()),M(()=>F.getCollectionTypeIcon(o().type))))]),p(n,u),Be(),i()}var oP=S('<div class="sidebar-title">Pinned</div> <!>',1),lP=S('<div class="sidebar-title">Others</div>'),cP=S("<!> <!>",1),uP=S('<i aria-hidden="true"></i>'),dP=S('<button type="button"><span class="txt">System</span> <!></button> <!>',1),fP=S('<p class="txt-hint m-t-10 m-b-10 txt-center">No collections found.</p>'),hP=S('<footer class="sidebar-footer"><button type="button" class="btn btn-block btn-outline"><i class="ri-add-line"></i> <span class="txt">New collection</span></button></footer>'),vP=S('<header class="sidebar-header"><div><div class="form-field-addon"><button type="button"><i class="ri-close-line"></i></button></div> <input type="text" placeholder="Search collections..." name="collections-search"/></div></header> <hr class="m-t-5 m-b-xs"/> <div><!> <!> <!> <!></div> <!>',1),mP=S("<!> <!>",1);function pP(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Xn,"$collections",t),s=()=>It(Hi,"$activeCollection",t),o=()=>It(Gs,"$isCollectionsLoading",t),l=()=>It(po,"$hideControls",t),c=P(),u=P(),d=P(),f=P(),h=P(),b=P(),v="@pinnedCollections";let g=P(),m=P(""),k=P([]),x=P(!1),C=P();$();function O(){setTimeout(()=>{const A=document.querySelector(".collection-sidebar .sidebar-list-item.active");A&&A?.scrollIntoView({block:"nearest"})},0)}function $(){_(k,[]);try{const A=localStorage.getItem(v);A&&_(k,JSON.parse(A)||[])}catch{}}function E(){_(k,r(k).filter(A=>!!a().find(L=>L.id==A)))}ne(()=>a(),()=>{a()&&(E(),O())}),ne(()=>r(m),()=>{_(c,r(m).replace(/\s+/g,"").toLowerCase())}),ne(()=>r(m),()=>{_(u,r(m)!=="")}),ne(()=>r(k),()=>{r(k)&&localStorage.setItem(v,JSON.stringify(r(k)))}),ne(()=>(a(),r(m),r(c)),()=>{_(d,a().filter(A=>A.id==r(m)||A.name?.replace(/\s+/g,"")?.toLowerCase()?.includes(r(c))))}),ne(()=>(r(d),r(k)),()=>{_(f,r(d).filter(A=>r(k).includes(A.id)))}),ne(()=>(r(d),r(k)),()=>{_(h,r(d).filter(A=>!A.system&&!r(k).includes(A.id)))}),ne(()=>(r(d),r(k)),()=>{_(b,r(d).filter(A=>A.system&&!r(k).includes(A.id)))}),ne(()=>(s(),r(C),r(f)),()=>{s()?.id&&r(C)!=s().id&&(_(C,s().id),s().system&&!r(f).find(A=>A.id==s().id)?_(x,!0):_(x,!1))}),ft(),He();var w=mP(),I=q(w);Xg(I,{class:"collection-sidebar",children:(A,L)=>{var N=vP(),H=q(N),j=T(H);let V;var U=T(j),B=T(U);let J;var Q=y(U,2),oe=y(H,4);let de;var ge=T(oe);{var pe=me=>{var ae=oP(),te=y(q(ae),2);bt(te,1,()=>r(f),se=>se.id,(se,ye)=>{Jc(se,{get collection(){return r(ye)},get pinnedIds(){return r(k)},set pinnedIds(ke){_(k,ke)},$$legacy:!0})}),p(me,ae)};G(ge,me=>{r(f),M(()=>r(f).length)&&me(pe)})}var xe=y(ge,2);{var ve=me=>{var ae=cP(),te=q(ae);{var se=ke=>{var Ie=lP();p(ke,Ie)};G(te,ke=>{r(f),M(()=>r(f).length)&&ke(se)})}var ye=y(te,2);bt(ye,1,()=>r(h),ke=>ke.id,(ke,Ie)=>{Jc(ke,{get collection(){return r(Ie)},get pinnedIds(){return r(k)},set pinnedIds(Ne){_(k,Ne)},$$legacy:!0})}),p(me,ae)};G(xe,me=>{r(h),M(()=>r(h).length)&&me(ve)})}var Ee=y(xe,2);{var ce=me=>{var ae=dP(),te=q(ae);let se;var ye=y(T(te),2);{var ke=ze=>{var Me=uP();z(()=>Re(Me,1,`ri-arrow-${r(x)?"up":"down"}-s-line`)),p(ze,Me)};G(ye,ze=>{r(c),M(()=>!r(c).length)&&ze(ke)})}var Ie=y(te,2);{var Ne=ze=>{var Me=tt(),Ge=q(Me);bt(Ge,1,()=>r(b),_e=>_e.id,(_e,Oe)=>{Jc(_e,{get collection(){return r(Oe)},get pinnedIds(){return r(k)},set pinnedIds(Fe){_(k,Fe)},$$legacy:!0})}),p(ze,Me)};G(Ie,ze=>{r(x),r(c),M(()=>r(x)||r(c).length)&&ze(Ne)})}z(ze=>{se=Re(te,1,"sidebar-title m-b-xs",null,se,ze),W(te,"aria-label",r(x)?"Expand system collections":"Collapse system collections"),W(te,"aria-expanded",(r(x),r(c),M(()=>r(x)||r(c).length))),te.disabled=(r(c),M(()=>r(c).length))},[()=>({"link-hint":!r(c).length})]),re("click",te,()=>{r(c).length||_(x,!r(x))}),p(me,ae)};G(Ee,me=>{r(b),M(()=>r(b).length)&&me(ce)})}var he=y(Ee,2);{var be=me=>{var ae=fP();p(me,ae)};G(he,me=>{r(c),r(d),M(()=>r(c).length&&!r(d).length)&&me(be)})}var we=y(oe,2);{var ue=me=>{var ae=hP(),te=T(ae);re("click",te,()=>r(g)?.show()),p(me,ae)};G(we,me=>{l()||me(ue)})}z((me,ae,te)=>{V=Re(j,1,"form-field search",null,V,me),J=Re(B,1,"btn btn-xs btn-transparent btn-circle btn-clear",null,J,ae),de=Re(oe,1,"sidebar-content",null,de,te)},[()=>({active:r(u)}),()=>({hidden:!r(u)}),()=>({fade:o(),"sidebar-content-compact":r(d).length>20})]),re("click",B,()=>_(m,"")),xt(Q,()=>r(m),me=>_(m,me)),p(A,N)},$$slots:{default:!0}});var D=y(I,2);mt(Rd(D,{$$legacy:!0}),A=>_(g,A),()=>r(g)),p(n,w),Be(),i()}var gP=S('<div class="datetime svelte-5pjd03"><div class="date"> </div> <div class="time svelte-5pjd03"> </div></div>'),bP=S('<span class="txt txt-hint">N/A</span>');function yP(n,e){Ue(e,!1);const t=P(),i=P();let a=ee(e,"date",8,"");const s={get text(){return F.formatToLocalDate(a())+" Local"}};ne(()=>R(a()),()=>{_(t,a()?a().substring(0,10):null)}),ne(()=>R(a()),()=>{_(i,a()?a().substring(10,19):null)}),ft(),He();var o=tt(),l=q(o);{var c=d=>{var f=gP(),h=T(f),b=T(h),v=y(h,2),g=T(v);Qe(f,(m,k)=>dt?.(m,k),()=>s),z(()=>{Te(b,r(t)),Te(g,`${r(i)??""} UTC`)}),p(d,f)},u=d=>{var f=bP();p(d,f)};G(l,d=>{a()?d(c):d(u,!1)})}p(n,o),Be()}var _P=S("<img/>"),xP=S("<object>Cannot preview the file.</object>"),wP=S('<button type="button" class="overlay-close"><i class="ri-close-line"></i></button>'),kP=S('<button type="button" class="link-hint txt-ellipsis inline-flex"> <i class="ri-external-link-line"></i></button> <div class="flex-fill"></div> <button type="button" class="btn btn-transparent">Close</button>',1);function SP(n,e){Ue(e,!1);const t=P(),i=P(),a=P();let s=P(),o=P(""),l;async function c(h){l=h,l&&(_(o,await d()),r(s)?.show())}function u(){return r(s)?.hide()}async function d(){return typeof l=="function"?await l():await l}async function f(){try{_(o,await d()),window.open(r(o),"_blank","noreferrer,noopener")}catch(h){h.isAbort||console.warn("openInNewTab file token failure:",h)}}return ne(()=>r(o),()=>{_(t,r(o).indexOf("?"))}),ne(()=>(r(o),r(t)),()=>{_(i,r(o).substring(r(o).lastIndexOf("/")+1,r(t)>0?r(t):void 0))}),ne(()=>r(i),()=>{_(a,F.getFileType(r(i)))}),ft(),He(),mt(pn(n,{get class(){return`preview preview-${r(a)??""}`},btnClose:!1,popup:!0,$$events:{show(h){ot.call(this,e,h)},hide(h){ot.call(this,e,h)}},children:(h,b)=>{var v=tt(),g=q(v);{var m=k=>{var x=tt(),C=q(x);{var O=E=>{var w=_P();z(()=>{W(w,"src",r(o)),W(w,"alt",`Preview ${r(i)??""}`)}),p(E,w)},$=E=>{var w=xP();z(()=>{W(w,"title",r(i)),W(w,"data",r(o))}),p(E,w)};G(C,E=>{r(a)==="image"?E(O):E($,!1)})}p(k,x)};G(g,k=>{r(s),M(()=>r(s)?.isActive())&&k(m)})}p(h,v)},$$slots:{default:!0,header:(h,b)=>{var v=wP();re("click",v,Ct(u)),p(h,v)},footer:(h,b)=>{var v=kP(),g=q(v),m=T(g),k=y(g,4);z(()=>{W(g,"title",r(i)),Te(m,`${r(i)??""} `)}),re("auxclick",g,f),re("click",g,f),re("click",k,u),p(h,v)}},$$legacy:!0}),h=>_(s,h),()=>r(s)),_t(e,"show",c),_t(e,"hide",u),Be({show:c,hide:u})}var TP=S("<div></div>"),$P=S('<img loading="lazy"/>'),IP=S('<i class="ri-video-line"></i>'),CP=S('<i class="ri-file-3-line"></i>'),EP=S('<button type="button"><!></button>'),OP=S("<!> <!>",1);function Fd(n,e){Ue(e,!1);const t=P(),i=P();let a=ee(e,"record",8,null),s=ee(e,"filename",8,""),o=ee(e,"size",8,""),l=P(),c=P(""),u=P(""),d=P(!0);f();async function f(){_(d,!0);try{_(u,await Le.getSuperuserFileToken(a().collectionId))}catch(C){console.warn("File token failure:",C)}_(d,!1)}function h(){_(c,"")}ne(()=>R(s()),()=>{_(t,F.getFileType(s()))}),ne(()=>(r(t),R(s())),()=>{_(i,["image","audio","video"].includes(r(t))||s().endsWith(".pdf"))}),ne(()=>(r(d),R(a()),R(s()),r(u)),()=>{_(c,r(d)?"":Le.files.getURL(a(),s(),{thumb:"100x100",token:r(u)}))}),ft(),He();var b=OP(),v=q(b);{var g=C=>{var O=TP();z(()=>Re(O,1,`thumb ${o()?`thumb-${o()}`:""}`)),p(C,O)},m=C=>{var O=EP();W(O,"draggable",!1);var $=T(O);{var E=I=>{var D=$P();W(D,"draggable",!1),z(()=>{W(D,"src",r(c)),W(D,"alt",s()),W(D,"title",`Preview ${s()??""}`)}),re("error",D,h),p(I,D)},w=I=>{var D=tt(),A=q(D);{var L=H=>{var j=IP();p(H,j)},N=H=>{var j=CP();p(H,j)};G(A,H=>{r(t)==="video"||r(t)==="audio"?H(L):H(N,!1)},!0)}p(I,D)};G($,I=>{r(t)==="image"?I(E):I(w,!1)})}z(()=>{Re(O,1,`handle thumb ${o()?`thumb-${o()}`:""}`),W(O,"title",(r(i)?"Preview":"Download")+" "+s())}),re("click",O,hn(async()=>{if(r(i))try{r(l)?.show(async()=>(_(u,await Le.getSuperuserFileToken(a().collectionId)),Le.files.getURL(a(),s(),{token:r(u)})))}catch(I){I.isAbort||console.warn("Preview file token failure:",I)}})),p(C,O)};G(v,C=>{r(d)?C(g):C(m,!1)})}var k=y(v,2);{var x=C=>{mt(SP(C,{$$legacy:!0}),O=>_(l,O),()=>r(l))};G(k,C=>{r(i)&&C(x)})}p(n,b),Be()}var DP=S('<div class="txt"> <span class="txt-disabled txt-xs">|</span> </div>');function Qg(n,e){Ue(e,!1);let t=ee(e,"value",24,()=>({}));He();var i=DP(),a=T(i),s=y(a,2);z(()=>{Te(a,`${R(t()),M(()=>t()?.lon)??""} `),Te(s,` ${R(t()),M(()=>t().lat)??""}`)}),p(n,i),Be()}var PP=S("<!> <!>",1),MP=S("<!> <!>",1);function eb(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Xn,"$collections",t),s=P();let o=ee(e,"record",12),l=P([]),c=P([]);function u(){const b=r(s)?.fields||[];if(_(l,b.filter(v=>!v.hidden&&v.presentable&&v.type=="file")),_(c,b.filter(v=>!v.hidden&&v.presentable&&v.type!="file")),!r(l).length&&!r(c).length){const v=b.find(g=>!g.hidden&&g.type=="file"&&g.maxSelect==1&&g.mimeTypes?.find(m=>m.startsWith("image/")));v&&r(l).push(v)}}ne(()=>(a(),R(o())),()=>{_(s,a()?.find(b=>b.id==o()?.collectionId))}),ne(()=>r(s),()=>{r(s)&&u()}),ft(),He();var d=MP(),f=q(d);bt(f,1,()=>r(l),At,(b,v)=>{const g=ie(()=>(R(F),R(o()),r(v),M(()=>F.toArray(o()[r(v).name]).slice(0,5))));var m=tt(),k=q(m);bt(k,1,()=>r(g),At,(x,C)=>{var O=tt(),$=q(O);{var E=w=>{Fd(w,{get record(){return o()},get filename(){return r(C)},size:"xs"})};G($,w=>{R(F),r(C),M(()=>!F.isEmpty(r(C)))&&w(E)})}p(x,O)}),p(b,m)});var h=y(f,2);bt(h,1,()=>r(c),At,(b,v,g)=>{var m=PP(),k=q(m);{var x=E=>{var w=or(",");p(E,w)};G(k,E=>{g>0&&E(x)})}var C=y(k,2);{var O=E=>{eb(E,{get record(){return o().expand[r(v).name]},set record(w){o(o().expand[r(v).name]=w,!0)},$$legacy:!0})},$=E=>{var w=tt(),I=q(w);{var D=L=>{Qg(L,{get value(){return R(o()),r(v),M(()=>o()[r(v).name])}})},A=L=>{var N=or();z(H=>Te(N,H),[()=>(R(F),R(o()),r(v),M(()=>F.truncate(F.displayValue(o(),[r(v).name]),70)))]),p(L,N)};G(I,L=>{r(v),M(()=>r(v).type=="geoPoint")?L(D):L(A,!1)},!0)}p(E,w)};G(C,E=>{r(v),R(o()),M(()=>r(v).type=="relation"&&o().expand?.[r(v).name])?E(O):E($,!1)})}p(b,m)},b=>{var v=or();z(g=>Te(v,g),[()=>(R(F),R(o()),M(()=>F.truncate(F.displayValue(o(),[]),70)))]),p(b,v)}),p(n,d),Be(),i()}var AP=S('<div class="record-info svelte-69icne"><!> <a target="_blank" class="inline-flex link-hint" rel="noopener noreferrer"><i class="ri-external-link-line txt-sm"></i></a></div>');function Il(n,e){Ue(e,!1);let t=ee(e,"record",8);function i(l,...c){const u=Object.assign({},l);for(let d of c)delete u[d];return u}He();var a=AP(),s=T(a);eb(s,{get record(){return t()}});var o=y(s,2);Qe(o,(l,c)=>dt?.(l,c),()=>({text:`Open relation record in new tab:
`+F.truncate(JSON.stringify(F.truncateObject(i(t(),"expand")),null,2),800,!0),class:"code",position:"left"})),Rt(()=>re("click",o,hn(function(l){ot.call(this,e,l)}))),Rt(()=>re("keydown",o,hn(function(l){ot.call(this,e,l)}))),z(()=>W(o,"href",`#/collections?collection=${R(t()),M(()=>t().collectionId)??""}&recordId=${R(t()),M(()=>t().id)??""}`)),p(n,a),Be()}var LP=S('<span class="label label-warning">You</span>'),NP=S('<div class="label"><!> <div class="txt txt-ellipsis"> </div></div> <!>',1),RP=S('<span class="txt txt-ellipsis"> </span>'),FP=S('<span class="txt"> </span> <!>',1),qP=S('<span class="txt-hint">N/A</span>'),zP=S("<span> </span>"),jP=S('<span class="txt"> </span>'),VP=S('<a class="txt-ellipsis" target="_blank" rel="noopener noreferrer"> </a>'),UP=S('<span class="txt"> </span>'),BP=S('<span class="label"> </span>'),HP=S('<div class="inline-flex"></div>'),WP=S('<span class="label"><!></span>'),YP=S('<span class="label"> </span>'),KP=S("<div><!> <!></div>"),ZP=S("<div><!> <!></div>"),JP=S('<div class="label"><!></div>'),GP=S('<span class="txt txt-ellipsis"> </span>'),XP=S('<div class="block txt-break fallback-block svelte-18nsns9"> </div>');function Vu(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Wl,"$superuser",t),s=P();let o=ee(e,"record",8),l=ee(e,"field",8),c=ee(e,"short",8,!1);ne(()=>(R(o()),R(l())),()=>{_(s,o()?.[l().name])}),ft(),He();var u=tt(),d=q(u);{var f=b=>{var v=NP(),g=q(v),m=T(g);rr(m,{get value(){return r(s)}});var k=y(m,2),x=T(k),C=y(g,2);{var O=$=>{var E=LP();p($,E)};G(C,$=>{R(o()),a(),M(()=>o().collectionName=="_superusers"&&o().id==a().id)&&$(O)})}z(()=>Te(x,r(s))),p(b,v)},h=b=>{var v=tt(),g=q(v);{var m=x=>{const C=ie(()=>(R(F),r(s),M(()=>F.trimQuotedValue(JSON.stringify(r(s)))||'""')));var O=tt(),$=q(O);{var E=I=>{var D=RP(),A=T(D);z(L=>Te(A,L),[()=>(R(F),R(r(C)),M(()=>F.truncate(r(C))))]),p(I,D)},w=I=>{var D=FP(),A=q(D),L=T(A),N=y(A,2);{var H=j=>{{let V=ie(()=>(r(s),M(()=>JSON.stringify(r(s),null,2))));rr(j,{get value(){return r(V)}})}};G(N,j=>{R(r(C)),M(()=>r(C).length>500)&&j(H)})}z(j=>Te(L,j),[()=>(R(F),R(r(C)),M(()=>F.truncate(r(C),500,!0)))]),p(I,D)};G($,I=>{c()?I(E):I(w,!1)})}p(x,O)},k=x=>{var C=tt(),O=q(C);{var $=w=>{var I=qP();p(w,I)},E=w=>{var I=tt(),D=q(I);{var A=N=>{var H=zP();let j;var V=T(H);z(U=>{j=Re(H,1,"label",null,j,U),Te(V,r(s)?"True":"False")},[()=>({"label-success":!!r(s)})]),p(N,H)},L=N=>{var H=tt(),j=q(H);{var V=B=>{var J=jP(),Q=T(J);z(()=>Te(Q,r(s))),p(B,J)},U=B=>{var J=tt(),Q=q(J);{var oe=ge=>{var pe=VP(),xe=T(pe);Qe(pe,(ve,Ee)=>dt?.(ve,Ee),()=>"Open in new tab"),Rt(()=>re("click",pe,hn(function(ve){ot.call(this,e,ve)}))),z(ve=>{W(pe,"href",r(s)),Te(xe,ve)},[()=>(R(F),r(s),M(()=>F.truncate(r(s))))]),p(ge,pe)},de=ge=>{var pe=tt(),xe=q(pe);{var ve=ce=>{var he=tt(),be=q(he);{var we=me=>{var ae=UP(),te=T(ae);z(se=>Te(te,se),[()=>(R(F),r(s),M(()=>F.truncate(F.plainText(r(s)),195)))]),p(me,ae)},ue=me=>{cd(me,{cssClass:"tinymce-preview",conf:{branding:!1,promotion:!1,menubar:!1,statusbar:!1,min_height:30,height:59,max_height:500,autoresize_bottom_margin:5,resize:!1,content_style:"body { font-size: 14px }",toolbar:"",plugins:["autoresize"],skin:"pocketbase"},get value(){return r(s)},disabled:!0})};G(be,me=>{c()?me(we):me(ue,!1)})}p(ce,he)},Ee=ce=>{var he=tt(),be=q(he);{var we=me=>{yP(me,{get date(){return r(s)}})},ue=me=>{var ae=tt(),te=q(ae);{var se=ke=>{var Ie=HP();bt(Ie,7,()=>(R(F),r(s),M(()=>F.toArray(r(s)))),(Ne,ze)=>ze+Ne,(Ne,ze)=>{var Me=BP(),Ge=T(Me);z(()=>Te(Ge,r(ze))),p(Ne,Me)}),p(ke,Ie)},ye=ke=>{var Ie=tt(),Ne=q(Ie);{var ze=Ge=>{const _e=ie(()=>(R(F),r(s),M(()=>F.toArray(r(s))))),Oe=ie(()=>(R(F),R(o()),R(l()),M(()=>F.toArray(o()?.expand?.[l().name])))),Fe=ie(()=>c()?20:500);var at=KP();let je;var nt=T(at);{var We=Ke=>{var ct=tt(),Ve=q(ct);bt(Ve,3,()=>(R(r(Oe)),R(r(Fe)),M(()=>r(Oe).slice(0,r(Fe)))),(Xe,et)=>et+Xe,(Xe,et)=>{var Je=WP(),ht=T(Je);Il(ht,{get record(){return r(et)}}),p(Xe,Je)}),p(Ke,ct)},Ye=Ke=>{var ct=tt(),Ve=q(ct);bt(Ve,1,()=>(R(r(_e)),R(r(Fe)),M(()=>r(_e).slice(0,r(Fe)))),At,(Xe,et)=>{var Je=YP(),ht=T(Je);z(()=>Te(ht,r(et))),p(Xe,Je)}),p(Ke,ct)};G(nt,Ke=>{R(r(Oe)),M(()=>r(Oe).length)?Ke(We):Ke(Ye,!1)})}var De=y(nt,2);{var qe=Ke=>{var ct=or("...");p(Ke,ct)};G(De,Ke=>{R(r(_e)),R(r(Fe)),M(()=>r(_e).length>r(Fe))&&Ke(qe)})}z(Ke=>je=Re(at,1,"rel-values svelte-18nsns9",null,je,Ke),[()=>({"inline-flex":c(),vertical:!c()})]),p(Ge,at)},Me=Ge=>{var _e=tt(),Oe=q(_e);{var Fe=je=>{const nt=ie(()=>(R(F),r(s),M(()=>F.toArray(r(s))))),We=ie(()=>c()?10:500);var Ye=ZP();let De;var qe=T(Ye);bt(qe,3,()=>(R(r(nt)),R(r(We)),M(()=>r(nt).slice(0,r(We)))),(Ve,Xe)=>Xe+Ve,(Ve,Xe)=>{Fd(Ve,{get record(){return o()},get filename(){return r(Xe)},size:"sm"})});var Ke=y(qe,2);{var ct=Ve=>{var Xe=or("...");p(Ve,Xe)};G(Ke,Ve=>{R(r(nt)),R(r(We)),M(()=>r(nt).length>r(We))&&Ve(ct)})}z(Ve=>De=Re(Ye,1,"inline-flex",null,De,Ve),[()=>({multiple:l().maxSelect!=1})]),p(je,Ye)},at=je=>{var nt=tt(),We=q(nt);{var Ye=qe=>{var Ke=JP(),ct=T(Ke);Qg(ct,{get value(){return r(s)}}),p(qe,Ke)},De=qe=>{var Ke=tt(),ct=q(Ke);{var Ve=et=>{var Je=GP(),ht=T(Je);z((gt,it)=>{W(Je,"title",gt),Te(ht,it)},[()=>(R(F),r(s),M(()=>F.truncate(r(s)))),()=>(R(F),r(s),M(()=>F.truncate(r(s))))]),p(et,Je)},Xe=et=>{var Je=XP(),ht=T(Je);z(()=>Te(ht,r(s))),p(et,Je)};G(ct,et=>{c()?et(Ve):et(Xe,!1)},!0)}p(qe,Ke)};G(We,qe=>{R(l()),M(()=>l().type==="geoPoint")?qe(Ye):qe(De,!1)},!0)}p(je,nt)};G(Oe,je=>{R(l()),M(()=>l().type==="file")?je(Fe):je(at,!1)},!0)}p(Ge,_e)};G(Ne,Ge=>{R(l()),M(()=>l().type==="relation")?Ge(ze):Ge(Me,!1)},!0)}p(ke,Ie)};G(te,ke=>{R(l()),M(()=>l().type==="select")?ke(se):ke(ye,!1)},!0)}p(me,ae)};G(be,me=>{R(l()),M(()=>l().type==="date"||l().type==="autodate")?me(we):me(ue,!1)},!0)}p(ce,he)};G(xe,ce=>{R(l()),M(()=>l().type==="editor")?ce(ve):ce(Ee,!1)},!0)}p(ge,pe)};G(Q,ge=>{R(l()),M(()=>l().type==="url")?ge(oe):ge(de,!1)},!0)}p(B,J)};G(j,B=>{R(l()),M(()=>l().type==="number")?B(V):B(U,!1)},!0)}p(N,H)};G(D,N=>{R(l()),M(()=>l().type==="bool")?N(A):N(L,!1)},!0)}p(w,I)};G(O,w=>{R(F),r(s),M(()=>F.isEmpty(r(s)))?w($):w(E,!1)},!0)}p(x,C)};G(g,x=>{R(l()),M(()=>l().type==="json")?x(m):x(k,!1)},!0)}p(b,v)};G(d,b=>{R(l()),M(()=>l().primaryKey)?b(f):b(h,!1)})}p(n,u),Be(),i()}var QP=S('<tr><td class="min-width txt-hint txt-bold"> </td><td class="col-field svelte-1nt58f7"><!></td></tr>'),eM=S("<table><tbody></tbody></table>"),tM=S("<h4><strong> </strong> record preview</h4>"),nM=S('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button>');function iM(n,e){Ue(e,!1);const t=P();let i=ee(e,"collection",8),a=P(),s=P({}),o=P(!1);function l(f){return u(f),r(a)?.show()}function c(){return _(o,!1),r(a)?.hide()}async function u(f){_(s,{}),_(o,!0),_(s,await d(f)||{}),_(o,!1)}async function d(f){if(f&&typeof f=="string"){try{return await Le.collection(i().id).getOne(f)}catch(h){h.isAbort||(c(),console.warn("resolveModel:",h),ur(`Unable to load record with id "${f}"`))}return null}return f}ne(()=>R(i()),()=>{_(t,!!i()?.fields?.find(f=>f.type==="editor"))}),ft(),He();{let f=ie(()=>r(t)?"overlay-panel-xl":"overlay-panel-lg");mt(pn(n,{get class(){return`record-preview-panel ${r(f)??""}`},$$events:{hide(h){ot.call(this,e,h)},show(h){ot.call(this,e,h)}},children:(h,b)=>{var v=eM();let g;var m=T(v);bt(m,5,()=>(R(i()),M(()=>i()?.fields)),At,(k,x)=>{var C=QP(),O=T(C),$=T(O),E=y(O),w=T(E);Vu(w,{get field(){return r(x)},get record(){return r(s)}}),z(()=>Te($,(r(x),M(()=>r(x).name)))),p(k,C)}),z(k=>g=Re(v,1,"table-border preview-table",null,g,k),[()=>({"table-loading":r(o)})]),p(h,v)},$$slots:{default:!0,header:(h,b)=>{var v=tM(),g=T(v),m=T(g);z(()=>Te(m,(R(i()),M(()=>i()?.name)))),p(h,v)},footer:(h,b)=>{var v=nM();re("click",v,()=>c()),p(h,v)}},$$legacy:!0}),h=>_(a,h),()=>r(a))}return _t(e,"show",l),_t(e,"hide",c),Be({show:l,hide:c})}var rM=S('<i class="ri-calendar-event-line txt-disabled"></i>');function aM(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Xn,"$collections",t),s=P(),o="yyyy-MM-dd HH:mm:ss.SSS";let l=ee(e,"record",8),c=P([]);function u(){_(c,[]);const f=r(s).fields||[];for(let h of f)h.type=="autodate"&&r(c).push(h.name+": "+F.formatToLocalDate(l()[h.name],o)+" Local")}ne(()=>(R(l()),a()),()=>{_(s,l()&&a().find(f=>f.id==l().collectionId))}),ne(()=>R(l()),()=>{l()&&u()}),ft(),He();var d=rM();Qe(d,(f,h)=>dt?.(f,h),()=>({text:r(c).join(`
`),position:"left"})),p(n,d),Be(),i()}var sM=S('<div class="block txt-center"><span class="loader"></span></div>'),oM=S('<div class="list-item"><figure class="provider-logo"><img alt="Provider logo"/></figure> <span class="txt"> </span> <div class="txt-hint"> </div> <button type="button" class="btn btn-transparent link-hint btn-circle btn-sm m-l-auto"><i class="ri-close-line"></i></button></div>'),lM=S('<div class="list"></div>'),cM=S('<h6 class="txt-hint txt-center m-t-sm m-b-sm">No linked OAuth2 providers.</h6>');function uM(n,e){Ue(e,!1);const t=zt();let i=ee(e,"record",8),a=P([]),s=P(!1);function o(v){return Nd.find(g=>g.key==v)||{}}function l(v){return o(v)?.title||F.sentenize(v,!1)}async function c(){if(!i()?.id){_(a,[]),_(s,!1);return}_(s,!0);try{_(a,await Le.collection("_externalAuths").getFullList({filter:Le.filter("collectionRef = {:collectionId} && recordRef = {:recordId}",{collectionId:i().collectionId,recordId:i().id})}))}catch(v){Le.error(v)}_(s,!1)}function u(v){!i()?.id||!v||Ln(`Do you really want to unlink the ${l(v.provider)} provider?`,()=>Le.collection("_externalAuths").delete(v.id).then(()=>{vn(`Successfully unlinked the ${l(v.provider)} provider.`),t("unlink",v.provider),c()}).catch(g=>{Le.error(g)}))}c(),He();var d=tt(),f=q(d);{var h=v=>{var g=sM();p(v,g)},b=v=>{var g=tt(),m=q(g);{var k=C=>{var O=lM();bt(O,5,()=>r(a),At,($,E)=>{var w=oM(),I=T(w),D=T(I),A=y(I,2),L=T(A),N=y(A,2),H=T(N),j=y(N,2);z((V,U)=>{W(D,"src",`${M(()=>"./")??""}images/oauth2/${V??""}`),Te(L,U),Te(H,`ID: ${r(E),M(()=>r(E).providerId)??""}`)},[()=>(r(E),M(()=>o(r(E).provider)?.logo)),()=>(r(E),M(()=>l(r(E).provider)))]),re("click",j,()=>u(r(E))),p($,w)}),p(C,O)},x=C=>{var O=cM();p(C,O)};G(m,C=>{R(i()),r(a),M(()=>i()?.id&&r(a).length)?C(k):C(x,!1)},!0)}p(v,g)};G(f,v=>{r(s)?v(h):v(b,!1)})}p(n,d),Be()}var dM=S('<div class="flex flex-gap-5 p-5"><span class="secret svelte-1rc8nx9"> </span> <!>  <i class="ri-refresh-line txt-sm link-hint" aria-label="Refresh"></i></div>'),fM=S('<button tabindex="-1" type="button" aria-label="Generate"><i class="ri-sparkling-line" aria-hidden="true"></i> <!></button>');function hM(n,e){Ue(e,!1);const t=zt();let i=ee(e,"class",8,"btn-sm btn-hint btn-transparent"),a=ee(e,"length",8,32),s=P(""),o=P(),l=P(!1);async function c(){if(_(s,F.randomSecret(a())),t("generate",r(s)),await Tn(),r(o)){let f=document.createRange();f.selectNode(r(o)),window.getSelection().removeAllRanges(),window.getSelection().addRange(f)}}He();var u=fM(),d=y(T(u),2);Jn(d,{class:"dropdown dropdown-upside dropdown-center dropdown-nowrap",get active(){return r(l)},set active(f){_(l,f)},$$events:{show:c},children:(f,h)=>{var b=dM(),v=T(b),g=T(v);mt(v,x=>_(o,x),()=>r(o));var m=y(v,2);rr(m,{get value(){return r(s)}});var k=y(m,2);Qe(k,(x,C)=>dt?.(x,C),()=>"Refresh"),Rt(()=>re("click",k,c)),z(()=>Te(g,r(s))),p(f,b)},$$slots:{default:!0},$$legacy:!0}),Qe(u,(f,h)=>dt?.(f,h),()=>r(l)?"":"Generate"),z(()=>Re(u,1,`btn btn-circle ${i()??""}`,"svelte-1rc8nx9")),p(n,u),Be()}var vM=S('<div class="form-field-addon email-visibility-addon svelte-1751a4d"><button type="button"><span class="txt"> </span></button></div>'),mM=S('<label><i></i> <span class="txt">email</span></label> <!> <input type="email" autocomplete="off" class="svelte-1751a4d"/>',1),pM=S('<input type="checkbox"/> <label>Change password</label>',1),gM=S('<label><i class="ri-lock-line"></i> <span class="txt">Password</span></label> <input type="password" autocomplete="new-password" required/> <div class="form-field-addon"><!></div>',1),bM=S('<label><i class="ri-lock-line"></i> <span class="txt">Password confirm</span></label> <input type="password" autocomplete="new-password" required/>',1),yM=S('<div class="block"><div><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div></div>'),_M=S('<input type="checkbox"/> <label>Verified</label>',1),xM=S('<div class="col-lg-12"><!></div>'),wM=S('<div class="grid m-b-base"><div class="col-lg-12"><!></div> <div class="col-lg-12"><!> <!></div> <!></div>');function kM(n,e){Ue(e,!1);const t=P(),i=P(),a=P();let s=ee(e,"record",12),o=ee(e,"collection",8),l=ee(e,"isNew",24,()=>!s()?.id),c=P(!1);ne(()=>R(o()),()=>{_(t,o()?.name=="_superusers")}),ne(()=>R(o()),()=>{_(i,o()?.fields?.find(C=>C.name=="email")||{})}),ne(()=>R(o()),()=>{_(a,o()?.fields?.find(C=>C.name=="password")||{})}),ne(()=>(r(c),Gn),()=>{r(c)||(s(s().password=void 0,!0),s(s().passwordConfirm=void 0,!0),Gn("password"),Gn("passwordConfirm"))}),ft(),He();var u=wM(),d=T(u),f=T(d);{let C=ie(()=>(r(i),M(()=>r(i)?.required?"required":"")));Pe(f,{get class(){return`form-field ${r(C)??""}`},name:"email",children:Ce,$$slots:{default:(O,$)=>{const E=ie(()=>$.uniqueId);var w=mM(),I=q(w),D=T(I),A=y(I,2);{var L=H=>{var j=vM(),V=T(j),U=T(V),B=T(U);Qe(V,(J,Q)=>dt?.(J,Q),()=>({text:"Make email public or private",position:"top-right"})),Rt(()=>re("click",V,Ct(()=>s(s().emailVisibility=!s().emailVisibility,!0)))),z(()=>{Re(V,1,`btn btn-sm btn-transparent ${R(s()),M(()=>s().emailVisibility?"btn-success":"btn-hint")??""}`),Te(B,`Public: ${R(s()),M(()=>s().emailVisibility?"On":"Off")??""}`)}),p(H,j)};G(A,H=>{r(t)||H(L)})}var N=y(A,2);Ui(N,l()),z(H=>{W(I,"for",r(E)),Re(D,1,H),W(N,"id",r(E)),N.required=(r(i),M(()=>r(i).required))},[()=>$n((R(F),M(()=>F.getFieldTypeIcon("email"))))]),xt(N,()=>s().email,H=>s(s().email=H,!0)),p(O,w)}}})}var h=y(d,2),b=T(h);{var v=C=>{Pe(C,{class:"form-field form-field-toggle",name:"verified",children:Ce,$$slots:{default:(O,$)=>{const E=ie(()=>$.uniqueId);var w=pM(),I=q(w),D=y(I,2);z(()=>{W(I,"id",r(E)),W(D,"for",r(E))}),Qt(I,()=>r(c),A=>_(c,A)),p(O,w)}}})};G(b,C=>{l()||C(v)})}var g=y(b,2);{var m=C=>{var O=yM(),$=T(O);let E;var w=T($),I=T(w);Pe(I,{class:"form-field required",name:"password",children:Ce,$$slots:{default:(L,N)=>{const H=ie(()=>N.uniqueId);var j=gM(),V=q(j),U=y(V,2),B=y(U,2),J=T(B);{let Q=ie(()=>(r(a),M(()=>Math.max(15,r(a).min||0))));hM(J,{get length(){return r(Q)}})}z(()=>{W(V,"for",r(H)),W(U,"id",r(H))}),xt(U,()=>s().password,Q=>s(s().password=Q,!0)),p(L,j)}}});var D=y(w,2),A=T(D);Pe(A,{class:"form-field required",name:"passwordConfirm",children:Ce,$$slots:{default:(L,N)=>{const H=ie(()=>N.uniqueId);var j=bM(),V=q(j),U=y(V,2);z(()=>{W(V,"for",r(H)),W(U,"id",r(H))}),xt(U,()=>s().passwordConfirm,B=>s(s().passwordConfirm=B,!0)),p(L,j)}}}),z(L=>E=Re($,1,"grid",null,E,L),[()=>({"p-t-xs":r(c)})]),Et(3,O,()=>mn,()=>({duration:150})),p(C,O)};G(g,C=>{(l()||r(c))&&C(m)})}var k=y(h,2);{var x=C=>{var O=xM(),$=T(O);Pe($,{class:"form-field form-field-toggle",name:"verified",children:Ce,$$slots:{default:(E,w)=>{const I=ie(()=>w.uniqueId);var D=_M(),A=q(D),L=y(A,2);z(()=>{W(A,"id",r(I)),W(L,"for",r(I))}),Qt(A,()=>s().verified,N=>s(s().verified=N,!0)),re("change",A,Ct(N=>{l()||Ln("Do you really want to manually change the verified account state?",()=>{},()=>{s(s().verified=!N.target.checked,!0)})})),p(E,D)}}}),p(C,O)};G(k,C=>{r(t)||C(x)})}p(n,u),Be()}var SM=S("<i></i>"),TM=S("<i></i>"),$M=S('<small class="label label-sm label-danger">Hidden</small>'),IM=S('<label><!> <span class="txt"> </span> <!> <!></label>');function bi(n,e){Ue(e,!1);let t=ee(e,"uniqueId",8),i=ee(e,"field",8),a=ee(e,"icon",8,!0);He();var s=IM(),o=T(s);{var l=b=>{var v=tt(),g=q(v);{var m=x=>{var C=SM();z(O=>Re(C,1,O),[()=>$n((R(F),M(()=>F.getFieldTypeIcon("primary"))))]),p(x,C)},k=x=>{var C=TM();z(O=>Re(C,1,O),[()=>$n((R(F),R(i()),M(()=>F.getFieldTypeIcon(i().type))))]),p(x,C)};G(g,x=>{R(i()),M(()=>i().primaryKey)?x(m):x(k,!1)})}p(b,v)};G(o,b=>{a()&&b(l)})}var c=y(o,2),u=T(c),d=y(c,2);{var f=b=>{var v=$M();p(b,v)};G(d,b=>{R(i()),M(()=>i().hidden)&&b(f)})}var h=y(d,2);Gt(h,e,"default",{},null),z(()=>{W(s,"for",t()),Te(u,(R(i()),M(()=>i().name)))}),p(n,s),Be()}var CM=S('<input type="checkbox"/> <!>',1);function EM(n,e){Ue(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,!1);He();{let a=ie(()=>(R(t()),M(()=>t().required?"required":"")));Pe(n,{get class(){return`form-field form-field-toggle ${r(a)??""}`},get name(){return R(t()),M(()=>t().name)},children:Ce,$$slots:{default:(s,o)=>{const l=ie(()=>o.uniqueId);var c=CM(),u=q(c),d=y(u,2);bi(d,{get uniqueId(){return r(l)},get field(){return t()},icon:!1}),z(()=>W(u,"id",r(l))),Qt(u,i),p(s,c)}}})}Be()}var OM=S('<div class="form-field-addon"><button type="button" class="link-hint clear-btn svelte-11df51y"><i class="ri-close-line"></i></button></div>'),DM=S("<!> <!> <!>",1);function PM(n,e){Ue(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0),a=P(i());function s(l){l.detail&&l.detail.length==3&&i(l.detail[1])}function o(){i("")}ne(()=>R(i()),()=>{i()&&i().length>19&&i(i().substring(0,19))}),ne(()=>(r(a),R(i())),()=>{r(a)!=i()&&_(a,i())}),ft(),He();{let l=ie(()=>(R(t()),M(()=>t().required?"required":"")));Pe(n,{get class(){return`form-field ${r(l)??""}`},get name(){return R(t()),M(()=>t().name)},children:Ce,$$slots:{default:(c,u)=>{const d=ie(()=>u.uniqueId);var f=DM(),h=q(f);bi(h,{get uniqueId(){return r(d)},get field(){return t()}});var b=y(h,2);{var v=m=>{var k=OM(),x=T(k);Qe(x,(C,O)=>dt?.(C,O),()=>"Clear"),Rt(()=>re("click",x,()=>o())),p(m,k)};G(b,m=>{R(i()),R(t()),M(()=>i()&&!t().required)&&m(v)})}var g=y(b,2);{let m=ie(()=>(R(F),M(()=>F.defaultFlatpickrOptions())));ju(g,{get id(){return r(d)},get options(){return r(m)},get value(){return r(a)},set value(k){_(a,k)},get formattedValue(){return i()},set formattedValue(k){i(k)},$$events:{close:s},$$legacy:!0})}p(c,f)}}})}Be()}var MM=S(`<h6 class="txt-center txt-hint">You currently don't have any collection with <code>file</code> field.</h6>`),AM=S('<button type="button"> </button>'),LM=S('<img loading="lazy"/>'),NM=S('<i class="ri-file-3-line"></i>'),RM=S('<button type="button"><!></button>'),FM=S('<button type="button" class="btn btn-hint btn-sm"><span class="txt">Clear filter</span></button>'),qM=S('<div class="inline-flex"><span class="txt txt-hint">No records with images found.</span> <!></div>'),zM=S('<div class="block txt-center"><span class="loader loader-sm active"></span></div>'),jM=S("<!> <!>",1),VM=S('<div class="file-picker"><aside class="file-picker-sidebar"></aside> <div class="file-picker-content"><div class="flex m-b-base flex-gap-10"><!> <button type="button" class="btn btn-pill btn-transparent btn-hint p-l-xs p-r-xs"><div class="txt">New record</div></button></div> <!></div></div>'),UM=S("<h4> </h4>"),BM=S('<button type="button" class="btn btn-transparent m-r-auto"><span class="txt">Cancel</span></button> <!> <button type="button" class="btn btn-expanded"><span class="txt"> </span></button>',1),HM=S("<!> <!>",1);function WM(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["show","hide","title","submitText","fileTypes"]);Ue(e,!1);const[a,s]=Lt(),o=()=>It(Xn,"$collections",a),l=P(),c=P(),u=P(),d=P(),f=zt(),h="file_picker_"+F.randomString(5),b=50;let v=ee(e,"title",8,"Select a file"),g=ee(e,"submitText",8,"Insert"),m=ee(e,"fileTypes",24,()=>["image","document","video","audio","file"]),k=P(),x=P(),C=P(""),O=P([]),$=1,E=P(0),w=P(!1),I=P([]),D=P([]),A=P([]),L=P({}),N=P({}),H=P("");function j(){return J(!0),r(k)?.show()}function V(){return r(k)?.hide()}function U(){_(O,[]),_(N,{}),_(H,"")}function B(){_(C,"")}async function J(ce=!1){if(r(L)?.id){_(w,!0),ce&&U();try{const he=ce?1:$+1,be=F.getAllCollectionIdentifiers(r(L));let we=F.normalizeSearchFilter(r(C),be)||"";we&&(we+=" && "),we+="("+r(D).map(ae=>`${ae.name}:length>0`).join("||")+")";let ue="";r(L).type!="view"&&(ue="-@rowid");const me=await Le.collection(r(L).id).getList(he,b,{filter:we,sort:ue,fields:"*:excerpt(100)",skipTotal:1,requestKey:h+"loadImagePicker"});_(O,F.filterDuplicatesByKey(r(O).concat(me.items))),$=me.page,_(E,me.items.length),_(w,!1)}catch(he){he.isAbort||(Le.error(he),_(w,!1))}}}function Q(){let ce=["100x100"];if(r(N)?.record?.id){for(const he of r(D))if(F.toArray(r(N).record[he.name]).includes(r(N).name)){ce=ce.concat(F.toArray(he.thumbs));break}}_(A,[{label:"Original size",value:""}]);for(const he of ce)r(A).push({label:`${he} thumb`,value:he});r(H)&&!ce.includes(r(H))&&_(H,"")}function oe(ce){let he=[];for(const be of r(D)){const we=F.toArray(ce[be.name]);for(const ue of we)m().includes(F.getFileType(ue))&&he.push(ue)}return he}function de(ce,he){_(N,{record:ce,name:he})}function ge(){r(d)&&(f("submit",Object.assign({size:r(H)},r(N))),V())}ne(()=>(o(),F),()=>{_(I,o().filter(ce=>ce.type!=="view"&&!!F.toArray(ce.fields).find(he=>he.type==="file"&&!he.protected&&(!he.mimeTypes?.length||!!he.mimeTypes?.find(be=>be.startsWith("image/"))))))}),ne(()=>(r(L),r(I)),()=>{!r(L)?.id&&r(I).length>0&&_(L,r(I)[0])}),ne(()=>r(L),()=>{_(D,r(L)?.fields?.filter(ce=>ce.type==="file"&&!ce.protected))}),ne(()=>r(L),()=>{r(L)?.id&&(B(),Q())}),ne(()=>r(N),()=>{r(N)?.name&&Q()}),ne(()=>(r(C),r(L),r(k)),()=>{typeof r(C)<"u"&&r(L)?.id&&r(k)?.isActive()&&J(!0)}),ne(()=>r(N),()=>{_(l,(ce,he)=>r(N)?.name==he&&r(N)?.record?.id==ce.id)}),ne(()=>r(O),()=>{_(c,r(O).find(ce=>oe(ce).length>0))}),ne(()=>(r(w),r(E)),()=>{_(u,!r(w)&&r(E)==b)}),ne(()=>(r(w),r(N)),()=>{_(d,!r(w)&&!!r(N)?.name)}),ft(),He();var pe=HM(),xe=q(pe);mt(pn(xe,tn({popup:!0,class:"file-picker-popup"},()=>i,{$$events:{hide(ce){ot.call(this,e,ce)},show(ce){ot.call(this,e,ce)}},children:(ce,he)=>{var be=tt(),we=q(be);{var ue=ae=>{var te=MM();p(ae,te)},me=ae=>{var te=VM(),se=T(te);bt(se,5,()=>r(I),Me=>Me.id,(Me,Ge)=>{var _e=AM();let Oe;var Fe=T(_e);z(at=>{Oe=Re(_e,1,"sidebar-item",null,Oe,at),Te(Fe,(r(Ge),M(()=>r(Ge).name)))},[()=>({active:r(L)?.id==r(Ge).id})]),re("click",_e,Ct(()=>{_(L,r(Ge))})),p(Me,_e)});var ye=y(se,2),ke=T(ye),Ie=T(ke);Zl(Ie,{get value(){return r(C)},placeholder:"Record search term or filter...",get autocompleteCollection(){return r(L)},$$events:{submit:Me=>_(C,Me.detail)}});var Ne=y(Ie,2),ze=y(ke,2);bd(ze,{class:"files-list",vThreshold:100,$$events:{vScrollEnd:()=>{r(u)&&J()}},children:(Me,Ge)=>{var _e=jM(),Oe=q(_e);{var Fe=We=>{var Ye=tt(),De=q(Ye);bt(De,1,()=>r(O),qe=>qe.id,(qe,Ke)=>{const ct=ie(()=>(r(Ke),M(()=>oe(r(Ke)))));var Ve=tt(),Xe=q(Ve);bt(Xe,1,()=>r(ct),At,(et,Je)=>{var ht=RM(),gt=ga(()=>de(r(Ke),r(Je)));let it;var $e=T(ht);{var vt=Z=>{var le=LM();z(Se=>{W(le,"src",Se),W(le,"alt",r(Je))},[()=>(R(Le),r(Ke),r(Je),M(()=>Le.files.getURL(r(Ke),r(Je),{thumb:"100x100"})))]),p(Z,le)},Y=Z=>{var le=NM();p(Z,le)};G($e,Z=>{R(F),r(Je),M(()=>F.hasImageExtension(r(Je)))?Z(vt):Z(Y,!1)})}Qe(ht,(Z,le)=>dt?.(Z,le),()=>r(Je)+`
(record: `+r(Ke).id+")"),Rt(()=>re("click",ht,Ct(function(...Z){r(gt)?.apply(this,Z)}))),z(Z=>it=Re(ht,1,"thumb handle",null,it,Z),[()=>({"thumb-warning":r(l)(r(Ke),r(Je))})]),p(et,ht)}),p(qe,Ve)}),p(We,Ye)},at=We=>{var Ye=tt(),De=q(Ye);{var qe=Ke=>{var ct=qM(),Ve=y(T(ct),2);{var Xe=et=>{var Je=FM();re("click",Je,Ct(B)),p(et,Je)};G(Ve,et=>{r(C),M(()=>r(C)?.length)&&et(Xe)})}p(Ke,ct)};G(De,Ke=>{r(w)||Ke(qe)},!0)}p(We,Ye)};G(Oe,We=>{r(c)?We(Fe):We(at,!1)})}var je=y(Oe,2);{var nt=We=>{var Ye=zM();p(We,Ye)};G(je,We=>{r(w)&&We(nt)})}p(Me,_e)},$$slots:{default:!0}}),re("click",Ne,()=>r(x)?.show()),p(ae,te)};G(we,ae=>{r(I),M(()=>!r(I).length)?ae(ue):ae(me,!1)})}p(ce,be)},$$slots:{default:!0,header:(ce,he)=>{var be=UM(),we=T(be);z(()=>Te(we,v())),p(ce,be)},footer:(ce,he)=>{var be=BM(),we=q(be),ue=y(we,2);{var me=ye=>{Pe(ye,{class:"form-field file-picker-size-select",children:Ce,$$slots:{default:(ke,Ie)=>{const Ne=ie(()=>Ie.uniqueId);{let ze=ie(()=>!r(d));Nn(ke,{upside:!0,get id(){return r(Ne)},get items(){return r(A)},get disabled(){return r(ze)},selectPlaceholder:"Select size",get keyOfSelected(){return r(H)},set keyOfSelected(Me){_(H,Me)},$$legacy:!0})}}}})};G(ue,ye=>{R(F),r(N),M(()=>F.hasImageExtension(r(N)?.name))&&ye(me)})}var ae=y(ue,2),te=T(ae),se=T(te);z(()=>{we.disabled=r(w),ae.disabled=!r(d),Te(se,g())}),re("click",we,V),re("click",ae,ge),p(ce,be)}},$$legacy:!0})),ce=>_(k,ce),()=>r(k));var ve=y(xe,2);mt(qd(ve,{get collection(){return r(L)},$$events:{save:ce=>{F.removeByKey(r(O),"id",ce.detail.record.id),r(O).unshift(ce.detail.record),_(O,r(O));const he=oe(ce.detail.record);he.length>0&&de(ce.detail.record,he[0])},delete:ce=>{r(N)?.record?.id==ce.detail.id&&_(N,{}),F.removeByKey(r(O),"id",ce.detail.id),_(O,r(O))}},$$legacy:!0}),ce=>_(x,ce),()=>r(x)),p(n,pe),_t(e,"show",j),_t(e,"hide",V);var Ee=Be({show:j,hide:V});return s(),Ee}var YM=S('<div class="tinymce-wrapper"></div>'),KM=S("<!> <!>",1),ZM=S("<!> <!>",1);function JM(n,e){Ue(e,!1);const t=P();let i=ee(e,"field",8),a=ee(e,"value",12,""),s=P(),o=P(),l=P(!1),c=null;un(async()=>(typeof a()>"u"&&a(""),c=setTimeout(()=>{_(l,!0)},100),()=>{clearTimeout(c)})),ne(()=>R(i()),()=>{_(t,Object.assign(F.defaultEditorOptions(),{convert_urls:i().convertURLs,relative_urls:!1}))}),ne(()=>R(a()),()=>{typeof a()>"u"&&a("")}),ft(),He();var u=ZM(),d=q(u);{let h=ie(()=>(R(i()),M(()=>i().required?"required":"")));Pe(d,{get class(){return`form-field form-field-editor ${r(h)??""}`},get name(){return R(i()),M(()=>i().name)},children:Ce,$$slots:{default:(b,v)=>{const g=ie(()=>v.uniqueId);var m=KM(),k=q(m);bi(k,{get uniqueId(){return r(g)},get field(){return i()}});var x=y(k,2);{var C=$=>{cd($,{get id(){return r(g)},get conf(){return r(t)},get value(){return a()},set value(E){a(E)},$$events:{init:E=>{_(o,E.detail.editor),r(o).on("collections_file_picker",()=>{r(s)?.show()})}},$$legacy:!0})},O=$=>{var E=YM();p($,E)};G(x,$=>{r(l)?$(C):$(O,!1)})}p(b,m)}}})}var f=y(d,2);mt(WM(f,{title:"Select an image",fileTypes:["image"],$$events:{submit:h=>{r(o)?.execCommand("InsertImage",!1,Le.files.getURL(h.detail.record,h.detail.name,{thumb:h.detail.size}))}},$$legacy:!0}),h=>_(s,h),()=>r(s)),p(n,u),Be()}var GM=S('<!> <input type="email"/>',1);function XM(n,e){Ue(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0);He();{let a=ie(()=>(R(t()),M(()=>t().required?"required":"")));Pe(n,{get class(){return`form-field ${r(a)??""}`},get name(){return R(t()),M(()=>t().name)},children:Ce,$$slots:{default:(s,o)=>{const l=ie(()=>o.uniqueId);var c=GM(),u=q(c);bi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=y(u,2);z(()=>{W(d,"id",r(l)),d.required=(R(t()),M(()=>t().required))}),xt(d,i),p(s,c)}}})}Be()}var QM=S("<img/>"),eA=S('<i class="ri-file-line"></i>');function tA(n,e){Ue(e,!1);const t=P();let i=ee(e,"file",8),a=ee(e,"size",8,50);function s(){F.hasImageExtension(i()?.name)?F.generateThumb(i(),a(),a()).then(d=>{_(t,d)}).catch(d=>{_(t,""),console.warn("Unable to generate thumb: ",d)}):_(t,"")}ne(()=>R(i()),()=>{typeof i()<"u"&&s()}),ne(()=>{},()=>{_(t,"")}),ft(),He();var o=tt(),l=q(o);{var c=d=>{var f=QM();W(f,"draggable",!1),z(()=>{W(f,"src",r(t)),W(f,"width",a()),W(f,"height",a()),W(f,"alt",(R(i()),M(()=>i().name)))}),p(d,f)},u=d=>{var f=eA();z(()=>W(f,"alt",(R(i()),M(()=>i().name)))),p(d,f)};G(l,d=>{r(t)?d(c):d(u,!1)})}p(n,o),Be()}var nA=S('<button type="button" class="btn btn-sm btn-danger btn-transparent"><span class="txt">Restore</span></button>'),iA=S('<button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove"><i class="ri-close-line"></i></button>'),rA=S('<div><div><!></div> <div class="content"><button type="button" title="Download"> </button></div> <div class="actions"><!></div></div>'),aA=S('<div><figure class="thumb"><!></figure> <div class="filename m-r-auto"><small class="label label-success m-r-5">New</small> <span class="txt"> </span></div> <button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove"><i class="ri-close-line"></i></button></div>'),sA=S('<!> <div class="list"><!> <!> <div class="list-item list-item-btn"><input type="file" class="hidden"/> <button type="button" class="btn btn-transparent btn-sm btn-block"><i class="ri-upload-cloud-line"></i> <span class="txt">Upload new file</span></button></div></div>',1),oA=S('<div class="block"><!></div>');function lA(n,e){Ue(e,!1);const t=P(),i=P(),a=P();let s=ee(e,"record",8),o=ee(e,"field",8),l=ee(e,"value",12,""),c=ee(e,"uploadedFiles",28,()=>[]),u=ee(e,"deletedFileNames",28,()=>[]),d=P(),f=P(),h=P(!1);function b($){F.removeByValue(u(),$),u(u())}function v($){F.pushUnique(u(),$),u(u())}function g($){F.isEmpty(c()[$])||c().splice($,1),c(c())}function m(){r(f)?.dispatchEvent(new CustomEvent("change",{detail:{value:l(),uploadedFiles:c(),deletedFileNames:u()},bubbles:!0}))}function k($){$.preventDefault(),_(h,!1);const E=$.dataTransfer?.files||[];if(!(r(a)||!E.length)){for(const w of E){const I=r(i).length+c().length-u().length;if(o().maxSelect<=I)break;c().push(w)}c(c())}}async function x($){try{let E=await Le.getSuperuserFileToken(s().collectionId),w=Le.files.getURL(s(),$,{token:E});window.open(w,"_blank","noreferrer, noopener")}catch(E){console.warn("openInNewTab file token failure:",E)}}ne(()=>(R(c()),F),()=>{Array.isArray(c())||c(F.toArray(c()))}),ne(()=>(R(u()),F),()=>{Array.isArray(u())||u(F.toArray(u()))}),ne(()=>R(o()),()=>{_(t,o().maxSelect>1)}),ne(()=>(R(l()),r(t)),()=>{F.isEmpty(l())&&l(r(t)?[]:"")}),ne(()=>R(l()),()=>{_(i,F.toArray(l()))}),ne(()=>(r(i),R(c()),R(o()),R(u())),()=>{_(a,(r(i).length||c().length)&&o().maxSelect<=r(i).length+c().length-u().length)}),ne(()=>(R(c()),R(u())),()=>{(c()!==-1||u()!==-1)&&m()}),ft(),He();var C=oA(),O=T(C);{let $=ie(()=>(R(o()),M(()=>o().required?"required":""))),E=ie(()=>r(h)?"dragover":"");Pe(O,{get class(){return`
            form-field form-field-list form-field-file
            ${r($)??""}
            ${r(E)??""}
        `},get name(){return R(o()),M(()=>o().name)},children:Ce,$$slots:{default:(w,I)=>{const D=ie(()=>I.uniqueId);var A=sA(),L=q(A);bi(L,{get uniqueId(){return r(D)},get field(){return o()}});var N=y(L,2),H=T(N);bt(H,3,()=>r(i),J=>J+s().id,(J,Q,oe)=>{const de=ie(()=>(R(u()),r(Q),M(()=>u().includes(r(Q)))));{let ge=ie(()=>(R(o()),M(()=>o().name+"_uploaded"))),pe=ie(()=>!r(t));cs(J,{get group(){return r(ge)},get index(){return r(oe)},get disabled(){return r(pe)},get list(){return l()},set list(xe){l(xe)},children:Ce,$$slots:{default:(xe,ve)=>{const Ee=ie(()=>ve.dragging),ce=ie(()=>ve.dragover);var he=rA();let be;var we=T(he);let ue;var me=T(we);Fd(me,{get record(){return s()},get filename(){return r(Q)}});var ae=y(we,2),te=T(ae);W(te,"draggable",!1);var se=T(te),ye=y(ae,2),ke=T(ye);{var Ie=ze=>{var Me=nA();re("click",Me,()=>b(r(Q))),p(ze,Me)},Ne=ze=>{var Me=iA();Qe(Me,(Ge,_e)=>dt?.(Ge,_e),()=>"Remove file"),Rt(()=>re("click",Me,()=>v(r(Q)))),p(ze,Me)};G(ke,ze=>{r(de)?ze(Ie):ze(Ne,!1)})}z((ze,Me)=>{be=Re(he,1,"list-item",null,be,ze),ue=Re(we,1,"",null,ue,Me),Re(te,1,`txt-ellipsis ${r(de)?"txt-strikethrough link-hint":"link-primary"}`),Te(se,r(Q))},[()=>({dragging:r(Ee),dragover:r(ce)}),()=>({fade:r(de)})]),re("auxclick",te,()=>x(r(Q))),re("click",te,()=>x(r(Q))),p(xe,he)}},$$legacy:!0})}});var j=y(H,2);bt(j,3,c,(J,Q)=>J.name+Q,(J,Q,oe)=>{{let de=ie(()=>(R(o()),M(()=>o().name+"_new"))),ge=ie(()=>!r(t));cs(J,{get group(){return r(de)},get index(){return r(oe)},get disabled(){return r(ge)},get list(){return c()},set list(pe){c(pe)},children:Ce,$$slots:{default:(pe,xe)=>{const ve=ie(()=>xe.dragging),Ee=ie(()=>xe.dragover);var ce=aA();let he;var be=T(ce),we=T(be);tA(we,{get file(){return r(Q)}});var ue=y(be,2),me=y(T(ue),2),ae=T(me),te=y(ue,2);Qe(te,(se,ye)=>dt?.(se,ye),()=>"Remove file"),Rt(()=>re("click",te,()=>g(r(oe)))),z(se=>{he=Re(ce,1,"list-item",null,he,se),W(ue,"title",(r(Q),M(()=>r(Q).name))),Te(ae,(r(Q),M(()=>r(Q).name)))},[()=>({dragging:r(ve),dragover:r(Ee)})]),p(pe,ce)}},$$legacy:!0})}});var V=y(j,2),U=T(V);mt(U,J=>_(d,J),()=>r(d));var B=y(U,2);mt(N,J=>_(f,J),()=>r(f)),z(J=>{W(U,"accept",J),U.multiple=r(t),B.disabled=r(a)},[()=>(R(o()),M(()=>o().mimeTypes?.join(",")||null))]),re("change",U,()=>{for(let J of r(d).files)c().push(J);c(c()),ut(d,r(d).value=null)}),re("click",B,()=>r(d)?.click()),p(w,A)}}})}re("dragover",C,Ct(()=>{_(h,!0)})),re("dragleave",C,()=>{_(h,!1)}),re("drop",C,k),p(n,C),Be()}var cA=S('<i class="ri-checkbox-circle-fill txt-success"></i>'),uA=S('<i class="ri-error-warning-fill txt-danger"></i>'),dA=S('<span class="json-state svelte-p6ecb8"><!></span>'),fA=S('<input type="text" class="txt-mono" value="Loading..." disabled/>'),hA=S("<!> <!>",1);function vA(n,e){Ue(e,!1);const t=P();let i=ee(e,"field",8),a=ee(e,"value",12,void 0),s=P(),o=P(l(a()));function l(u){return typeof u=="string"&&c(u)?u:JSON.stringify(typeof u>"u"?null:u,null,2)}function c(u){try{return JSON.parse(u===""?null:u),!0}catch{}return!1}un(async()=>{try{_(s,(await Ut(async()=>{const{default:u}=await import("./CodeEditor-Bk8QeLSV.js");return{default:u}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(u){console.warn(u)}}),ne(()=>(R(a()),r(o)),()=>{a()!==r(o)?.trim()&&(_(o,l(a())),a(r(o)))}),ne(()=>r(o),()=>{_(t,c(r(o)))}),ft(),He();{let u=ie(()=>(R(i()),M(()=>i().required?"required":"")));Pe(n,{get class(){return`form-field ${r(u)??""}`},get name(){return R(i()),M(()=>i().name)},children:Ce,$$slots:{default:(d,f)=>{const h=ie(()=>f.uniqueId);var b=hA(),v=q(b);bi(v,{get uniqueId(){return r(h)},get field(){return i()},children:(x,C)=>{var O=dA(),$=T(O);{var E=I=>{var D=cA();p(I,D)},w=I=>{var D=uA();p(I,D)};G($,I=>{r(t)?I(E):I(w,!1)})}Qe(O,(I,D)=>dt?.(I,D),()=>({position:"left",text:r(t)?"Valid JSON":"Invalid JSON"})),p(x,O)},$$slots:{default:!0}});var g=y(v,2);{var m=x=>{var C=tt(),O=q(C);pi(O,()=>r(s),($,E)=>{E($,{get id(){return r(h)},maxHeight:"500",language:"json",get value(){return r(o)},$$events:{change:w=>{_(o,w.detail),a(r(o).trim())}}})}),p(x,C)},k=x=>{var C=fA();p(x,C)};G(g,x=>{r(s)?x(m):x(k,!1)})}p(d,b)}}})}Be()}var mA=S('<!> <input type="number" step="any"/>',1);function pA(n,e){Ue(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0);He();{let a=ie(()=>(R(t()),M(()=>t().required?"required":"")));Pe(n,{get class(){return`form-field ${r(a)??""}`},get name(){return R(t()),M(()=>t().name)},children:Ce,$$slots:{default:(s,o)=>{const l=ie(()=>o.uniqueId);var c=mA(),u=q(c);bi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=y(u,2);z(()=>{W(d,"id",r(l)),d.required=(R(t()),M(()=>t().required)),W(d,"min",(R(t()),M(()=>t().min))),W(d,"max",(R(t()),M(()=>t().max)))}),xt(d,i),p(s,c)}}})}Be()}var gA=S('<!> <input type="password" autocomplete="new-password"/>',1);function bA(n,e){Ue(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0);He();{let a=ie(()=>(R(t()),M(()=>t().required?"required":"")));Pe(n,{get class(){return`form-field ${r(a)??""}`},get name(){return R(t()),M(()=>t().name)},children:Ce,$$slots:{default:(s,o)=>{const l=ie(()=>o.uniqueId);var c=gA(),u=q(c);bi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=y(u,2);z(()=>{W(d,"id",r(l)),d.required=(R(t()),M(()=>t().required))}),xt(d,i),p(s,c)}}})}Be()}function Ov(n){return typeof n=="function"?{threshold:100,callback:n}:n||{}}function yA(n,e){e=Ov(e),e?.callback&&e.callback();function t(i){if(!e?.callback)return;i.target.scrollHeight-i.target.clientHeight-i.target.scrollTop<=e.threshold&&e.callback()}return n.addEventListener("scroll",t),n.addEventListener("resize",t),{update(i){e=Ov(i)},destroy(){n.removeEventListener("scroll",t),n.removeEventListener("resize",t)}}}var _A=S("<option> </option>"),xA=S('<div class="form-field"><label>Collection</label> <select class="input"></select></div>'),wA=S('<button type="button" class="btn btn-pill btn-transparent btn-hint p-l-xs p-r-xs"><div class="txt">New record</div></button>'),kA=S('<i class="ri-checkbox-circle-fill txt-success"></i>'),SA=S('<i class="ri-checkbox-blank-circle-line txt-disabled"></i>'),TA=S('<span class="loader loader-xs active"></span>'),$A=S('<div class="actions nonintrusive"><button type="button" class="btn btn-sm btn-circle btn-transparent btn-hint m-l-auto"><i class="ri-pencil-line"></i></button></div>'),IA=S('<div tabindex="0"><!> <div class="content"><!></div> <!></div>'),CA=S('<button type="button" class="btn btn-hint btn-sm"><span class="txt">Clear filters</span></button>'),EA=S('<div class="list-item"><span class="txt txt-hint">No records found.</span> <!></div>'),OA=S('<div class="list-item"><div class="block txt-center"><span class="loader loader-sm active"></span></div></div>'),DA=S('<span class="loader loader-xs active"></span>'),PA=S('<span><!> <button type="button" title="Remove" class="btn btn-circle btn-transparent btn-hint btn-xs"><i class="ri-close-line"></i></button></span>'),MA=S('<div class="selected-list svelte-1u8jhky"></div>'),AA=S('<p class="txt-hint">No selected records.</p>'),LA=S('<div class="flex m-b-base flex-gap-10"><!> <!> <!></div> <div class="list picker-list m-b-base svelte-1u8jhky"><!> <!></div> <h5 class="section-title">Selected <!></h5> <!>',1),NA=S("<h4>Select <strong> </strong> records</h4>"),RA=S('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button" class="btn"><span class="txt">Set selection</span></button>',1),FA=S("<!> <!>",1);function qA(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["show","hide","value","field"]);Ue(e,!1);const[a,s]=Lt(),o=()=>It(Xn,"$collections",a),l=P(),c=P(),u=P(),d=P(),f=P(),h=P(),b=P(),v=P(),g=P(),m=P(),k=zt(),x="picker_"+F.randomString(5),C=50;let O=ee(e,"value",8),$=ee(e,"field",8),E=P(),w=P(),I=P(""),D=P([]),A=P([]),L=P(1),N=P(0),H=P(!1),j=P(!1),V=P({}),U=P();function B(){return _(I,""),_(D,[]),_(A,[]),r(u)&&!r(U)&&r(d)?.length&&_(U,r(d)[0].id),oe(),de(!0),r(E)?.show()}function J(){return r(E)?.hide()}function Q(){let ue=[];const me=r(f)?.fields?.filter(ae=>!ae.hidden&&ae.presentable&&ae.type=="relation");for(const ae of me)ue=ue.concat(F.getExpandPresentableRelFields(ae,o(),2));return ue.join(",")}async function oe(){const ue=F.toArray(O());if(!ue.length)return;_(j,!0);let me=[];if(r(u)){const ae={};for(const se of ue){const ye=""+se,ke=ye.indexOf(":");if(ke>0&&ke<ye.length-1){const Ie=ye.slice(0,ke),Ne=ye.slice(ke+1);ae[Ie]=ae[Ie]||[],ae[Ie].push(Ne)}}const te=[];for(const se in ae){const ye=ae[se].slice();for(;ye.length>0;){const ke=[];for(const Ie of ye.splice(0,C))ke.push(`id="${Ie}"`);te.push(Le.collection(se).getFullList({batch:C,filter:ke.join("||"),fields:"*:excerpt(200)",expand:Q(),requestKey:null}))}}try{await Promise.all(te).then(se=>{me=me.concat(...se)});for(const se of me)se.collectionId||(se.collectionId=r(f)?.id||r(U));_(A,[]);for(const se of ue){const ye=(""+se).indexOf(":"),ke=ye>0?(""+se).slice(ye+1):""+se,Ie=F.findByKey(me,"id",ke);Ie&&r(A).push(Ie)}r(I).trim()||_(D,F.filterDuplicatesByKey(r(A).concat(r(D)))),_(j,!1)}catch(se){se.isAbort||(Le.error(se),_(j,!1))}}else{if(!r(c)){_(j,!1);return}const ae=ue.slice(),te=[];for(;ae.length>0;){const se=[];for(const ye of ae.splice(0,C))se.push(`id="${ye}"`);te.push(Le.collection(r(c)).getFullList({batch:C,filter:se.join("||"),fields:"*:excerpt(200)",expand:Q(),requestKey:null}))}try{await Promise.all(te).then(se=>{me=me.concat(...se)}),_(A,[]);for(const se of ue){const ye=F.findByKey(me,"id",se);ye&&r(A).push(ye)}r(I).trim()||_(D,F.filterDuplicatesByKey(r(A).concat(r(D)))),_(j,!1)}catch(se){se.isAbort||(Le.error(se),_(j,!1))}}}async function de(ue=!1){if(!(!r(U)&&!r(c))&&!(r(H)&&!ue)){_(H,!0),ue&&(r(I).trim()?_(D,[]):_(D,F.toArray(r(A)).slice()));try{const me=ue?1:r(L)+1,ae=F.getAllCollectionIdentifiers(r(f));let te="";r(h)||(te="-@rowid");const se=r(U)||r(c),ye=await Le.collection(se).getList(me,C,{filter:F.normalizeSearchFilter(r(I),ae),sort:te,fields:"*:excerpt(200)",skipTotal:1,expand:Q(),requestKey:x+"loadList"});_(D,F.filterDuplicatesByKey(r(D).concat(ye.items))),_(L,ye.page),_(N,ye.items.length),_(H,!1)}catch(me){me.isAbort||(Le.error(me),_(H,!1))}}}async function ge(ue){if(ue?.id){ut(V,r(V)[ue.id]=!0);try{const me=r(U)||r(c),ae=await Le.collection(me).getOne(ue.id,{fields:"*:excerpt(200)",expand:Q(),requestKey:x+"reload"+ue.id});F.pushOrReplaceByKey(r(A),ae),F.pushOrReplaceByKey(r(D),ae),_(A,r(A)),_(D,r(D)),ut(V,r(V)[ue.id]=!1)}catch(me){me.isAbort||(Le.error(me),ut(V,r(V)[ue.id]=!1))}}}function pe(ue){r(l)==1?_(A,[ue]):r(g)&&(F.pushOrReplaceByKey(r(A),ue),_(A,r(A)))}function xe(ue){F.removeByKey(r(A),"id",ue.id),_(A,r(A))}function ve(ue){r(m)(ue)?xe(ue):pe(ue)}function Ee(){k("save",r(A)),J()}ne(()=>R($()),()=>{_(l,$()?.maxSelect||null)}),ne(()=>R($()),()=>{_(c,$()?.collectionId)}),ne(()=>R($()),()=>{_(u,Array.isArray($()?.collectionIds)&&$().collectionIds.length>0)}),ne(()=>(r(u),o(),R($()),r(c)),()=>{_(d,r(u)?o().filter(ue=>$().collectionIds.includes(ue.id)):o().filter(ue=>ue.id==r(c)))}),ne(()=>(r(u),r(U),r(d),r(c)),()=>{r(u)?!r(U)&&r(d)?.length&&_(U,r(d)[0].id):r(U)!==r(c)&&_(U,r(c))}),ne(()=>(o(),r(U)),()=>{_(f,o().find(ue=>ue.id==r(U))||null)}),ne(()=>(r(I),r(E)),()=>{typeof r(I)<"u"&&r(E)?.isActive()&&de(!0)}),ne(()=>r(f),()=>{_(h,r(f)?.type==="view")}),ne(()=>(r(H),r(j)),()=>{_(b,r(H)||r(j))}),ne(()=>r(N),()=>{_(v,r(N)==C)}),ne(()=>(r(l),r(A)),()=>{_(g,r(l)<=0||r(l)>r(A).length)}),ne(()=>r(A),()=>{_(m,function(ue){return F.findByKey(r(A),"id",ue.id)})}),ft(),He();var ce=FA(),he=q(ce);mt(pn(he,tn({popup:!0,class:"overlay-panel-xl"},()=>i,{$$events:{hide(ue){ot.call(this,e,ue)},show(ue){ot.call(this,e,ue)}},children:(ue,me)=>{var ae=LA(),te=q(ae),se=T(te);{var ye=Ye=>{var De=xA(),qe=T(De),Ke=y(qe,2);z(()=>{r(U),fa(()=>{r(D),r(L),r(d)})}),bt(Ke,5,()=>r(d),At,(ct,Ve)=>{var Xe=_A(),et=T(Xe),Je={};z(()=>{Te(et,(r(Ve),M(()=>r(Ve).name))),Je!==(Je=(r(Ve),M(()=>r(Ve).id)))&&(Xe.value=(Xe.__value=(r(Ve),M(()=>r(Ve).id)))??"")}),p(ct,Xe)}),z(()=>{W(qe,"for",x+"_collection"),W(Ke,"id",x+"_collection")}),$y(Ke,()=>r(U),ct=>_(U,ct)),re("change",Ke,()=>{_(D,[]),_(L,1),de(!0)}),p(Ye,De)};G(se,Ye=>{r(u)&&Ye(ye)})}var ke=y(se,2);Zl(ke,{get value(){return r(I)},get autocompleteCollection(){return r(f)},$$events:{submit:Ye=>_(I,Ye.detail)}});var Ie=y(ke,2);{var Ne=Ye=>{var De=wA();re("click",De,()=>r(w)?.show()),p(Ye,De)};G(Ie,Ye=>{r(h)||Ye(Ne)})}var ze=y(te,2),Me=T(ze);bt(Me,1,()=>r(D),Ye=>Ye.id,(Ye,De,qe,Ke)=>{const ct=ie(()=>(r(m),r(De),M(()=>r(m)(r(De)))));var Ve=IA();let Xe;var et=T(Ve);{var Je=le=>{var Se=kA();p(le,Se)},ht=le=>{var Se=SA();p(le,Se)};G(et,le=>{r(ct)?le(Je):le(ht,!1)})}var gt=y(et,2),it=T(gt);{var $e=le=>{var Se=TA();p(le,Se)},vt=le=>{Il(le,{get record(){return r(De)}})};G(it,le=>{r(V),r(De),M(()=>r(V)[r(De).id])?le($e):le(vt,!1)})}var Y=y(gt,2);{var Z=le=>{var Se=$A(),Ze=T(Se);Qe(Ze,(st,wt)=>dt?.(st,wt),()=>"Edit"),Rt(()=>re("keydown",Ze,hn(function(st){ot.call(this,e,st)}))),Rt(()=>re("click",Ze,hn(()=>r(w)?.show(r(De).id)))),p(le,Se)};G(Y,le=>{r(h)||le(Z)})}z(le=>Xe=Re(Ve,1,"list-item handle",null,Xe,le),[()=>({selected:r(ct),disabled:r(V)[r(De).id]||!r(ct)&&r(l)>1&&!r(g)})]),re("click",Ve,()=>ve(r(De))),re("keydown",Ve,le=>{(le.code==="Enter"||le.code==="Space")&&(le.preventDefault(),le.stopPropagation(),ve(r(De)))}),p(Ye,Ve)},Ye=>{var De=tt(),qe=q(De);{var Ke=ct=>{var Ve=EA(),Xe=y(T(Ve),2);{var et=Je=>{var ht=CA();re("click",ht,()=>_(I,"")),p(Je,ht)};G(Xe,Je=>{r(I),M(()=>r(I)?.length)&&Je(et)})}p(ct,Ve)};G(qe,ct=>{r(b)||ct(Ke)})}p(Ye,De)});var Ge=y(Me,2);{var _e=Ye=>{var De=OA();p(Ye,De)};G(Ge,Ye=>{r(b)&&Ye(_e)})}Qe(ze,(Ye,De)=>yA?.(Ye,De),()=>()=>{r(v)&&!r(H)&&de()});var Oe=y(ze,2),Fe=y(T(Oe));{var at=Ye=>{var De=or();z(()=>Te(De,`(${r(A),M(()=>r(A).length)??""} of MAX ${r(l)??""})`)),p(Ye,De)};G(Fe,Ye=>{r(l)>1&&Ye(at)})}var je=y(Oe,2);{var nt=Ye=>{var De=MA();bt(De,5,()=>r(A),At,(qe,Ke,ct)=>{cs(qe,{index:ct,get list(){return r(A)},set list(Ve){_(A,Ve)},children:Ce,$$slots:{default:(Ve,Xe)=>{const et=ie(()=>Xe.dragging),Je=ie(()=>Xe.dragover);var ht=PA();let gt;var it=T(ht);{var $e=Z=>{var le=DA();p(Z,le)},vt=Z=>{Il(Z,{get record(){return r(Ke)}})};G(it,Z=>{r(V),r(Ke),M(()=>r(V)[r(Ke).id])?Z($e):Z(vt,!1)})}var Y=y(it,2);z(Z=>gt=Re(ht,1,"label",null,gt,Z),[()=>({"label-danger":r(et),"label-warning":r(Je)})]),re("click",Y,()=>xe(r(Ke))),p(Ve,ht)}},$$legacy:!0})}),p(Ye,De)},We=Ye=>{var De=AA();p(Ye,De)};G(je,Ye=>{r(A),M(()=>r(A).length)?Ye(nt):Ye(We,!1)})}p(ue,ae)},$$slots:{default:!0,header:(ue,me)=>{var ae=NA(),te=y(T(ae)),se=T(te);z(()=>Te(se,(r(f),M(()=>r(f)?.name||"")))),p(ue,ae)},footer:(ue,me)=>{var ae=RA(),te=q(ae),se=y(te,2);re("click",te,()=>J()),re("click",se,()=>Ee()),p(ue,ae)}},$$legacy:!0})),ue=>_(E,ue),()=>r(E));var be=y(he,2);mt(qd(be,{get collection(){return r(f)},$$events:{save:ue=>{F.removeByKey(r(D),"id",ue.detail.record.id),r(D).unshift(ue.detail.record),_(D,r(D)),pe(ue.detail.record),ge(ue.detail.record)},delete:ue=>{F.removeByKey(r(D),"id",ue.detail.id),_(D,r(D)),xe(ue.detail)}},$$legacy:!0}),ue=>_(w,ue),()=>r(w)),p(n,ce),_t(e,"show",B),_t(e,"hide",J);var we=Be({show:B,hide:J});return s(),we}var zA=S('<i class="ri-error-warning-line link-hint m-l-auto flex-order-10"></i>'),jA=S('<div><div class="content"><!></div> <div class="actions"><button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove"><i class="ri-close-line"></i></button></div></div>'),VA=S('<div class="list-item"><div class="skeleton-loader"></div></div>'),UA=S('<!> <div class="list"><div class="relations-list svelte-1ynw0pc"></div> <div class="list-item list-item-btn"><button type="button" class="btn btn-transparent btn-sm btn-block"><i class="ri-magic-line"></i> <span class="txt">Open picker</span></button></div></div>',1),BA=S("<!> <!>",1);function HA(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Xn,"$collections",t),s=P(),o=P(),l=100;let c=ee(e,"field",8),u=ee(e,"value",12),d=ee(e,"picker",12),f=P(),h=P([]),b=P(!1),v=P(),g=P([]);function m(){if(r(b))return!1;const w=F.toArray(u());return _(h,r(h).filter(I=>{const D=I.id,A=I?.collectionId?`${I.collectionId}:${I.id}`:null;return w.includes(D)||A&&w.includes(A)})),w.length!=r(h).length}async function k(){const w=F.toArray(u());if(_(h,[]),_(g,[]),!c()?.collectionId&&!r(o)||!w.length){_(b,!1);return}_(b,!0);function I(N){let H=[];const j=a().find(V=>V.id==N)?.fields?.filter(V=>!V.hidden&&V.presentable&&V.type=="relation");for(const V of j||[])H=H.concat(F.getExpandPresentableRelFields(V,a(),2));return H.join(",")}const D={},A=[];for(const N of w){const H=(""+N).indexOf(":");if(H>0&&H<(""+N).length-1){const j=(""+N).slice(0,H),V=(""+N).slice(H+1);D[j]=D[j]||[],D[j].push(V)}else A.push(N)}A.length&&c().collectionId&&(D[c().collectionId]=(D[c().collectionId]||[]).concat(A));const L=[];for(const N in D){const H=D[N].slice();for(;H.length>0;){const j=[];for(const V of H.splice(0,l))j.push(`id="${V}"`);L.push(Le.collection(N).getFullList(l,{filter:j.join("||"),fields:"*:excerpt(200)",expand:I(N),requestKey:null}))}}try{let N=[];await Promise.all(L).then(H=>{N=N.concat(...H)});for(const H of w){const j=(""+H).indexOf(":"),V=j>0?(""+H).slice(j+1):""+H,U=F.findByKey(N,"id",V);U?r(h).push(U):r(g).push(H)}_(h,r(h)),C()}catch(N){Le.error(N)}_(b,!1)}function x(w){F.removeByKey(r(h),"id",w.id),_(h,r(h)),C()}function C(){const w=r(o)||r(h).some(I=>!!I?.collectionId&&(!c()?.collectionId||I.collectionId!==c().collectionId));if(r(s))u(r(h).map(I=>w?`${I.collectionId}:${I.id}`:I.id));else{const I=r(h)[0];u(I?w?`${I.collectionId}:${I.id}`:I.id:"")}}uo(()=>{clearTimeout(r(v))}),ne(()=>R(c()),()=>{_(s,c().maxSelect>1)}),ne(()=>R(c()),()=>{_(o,Array.isArray(c().collectionIds)&&c().collectionIds.length>0)}),ne(()=>(R(u()),r(f)),()=>{typeof u()<"u"&&r(f)?.changed()}),ne(()=>(r(h),R(u()),r(v)),()=>{m(r(h),u())&&(_(b,!0),clearTimeout(r(v)),_(v,setTimeout(k,0)))}),ft(),He();var O=BA(),$=q(O);{let w=ie(()=>(R(c()),M(()=>c().required?"required":"")));mt(Pe($,{get class(){return`form-field form-field-list ${r(w)??""}`},get name(){return R(c()),M(()=>c().name)},children:Ce,$$slots:{default:(I,D)=>{const A=ie(()=>D.uniqueId);var L=UA(),N=q(L);bi(N,{get uniqueId(){return r(A)},get field(){return c()},children:(B,J)=>{var Q=tt(),oe=q(Q);{var de=ge=>{var pe=zA();Qe(pe,(xe,ve)=>dt?.(xe,ve),()=>({position:"left",text:"The following relation ids were removed from the list because they are missing or invalid: "+r(g).join(", ")})),p(ge,pe)};G(oe,ge=>{r(g),M(()=>r(g).length)&&ge(de)})}p(B,Q)},$$slots:{default:!0}});var H=y(N,2),j=T(H);bt(j,7,()=>r(h),B=>B.id,(B,J,Q)=>{{let oe=ie(()=>(R(c()),M(()=>c().name+"_relation"))),de=ie(()=>!r(s));cs(B,{get group(){return r(oe)},get index(){return r(Q)},get disabled(){return r(de)},get list(){return r(h)},set list(ge){_(h,ge)},$$events:{sort:()=>{C()}},children:Ce,$$slots:{default:(ge,pe)=>{const xe=ie(()=>pe.dragging),ve=ie(()=>pe.dragover);var Ee=jA();let ce;var he=T(Ee),be=T(he);Il(be,{get record(){return r(J)}});var we=y(he,2),ue=T(we);Qe(ue,(me,ae)=>dt?.(me,ae),()=>"Remove"),Rt(()=>re("click",ue,()=>x(r(J)))),z(me=>ce=Re(Ee,1,"list-item",null,ce,me),[()=>({dragging:r(xe),dragover:r(ve)})]),p(ge,Ee)}},$$legacy:!0})}},B=>{var J=tt(),Q=q(J);{var oe=de=>{var ge=tt(),pe=q(ge);bt(pe,1,()=>(R(F),R(u()),M(()=>F.toArray(u()).slice(0,10))),At,(xe,ve)=>{var Ee=VA();p(xe,Ee)}),p(de,ge)};G(Q,de=>{r(b)&&de(oe)})}p(B,J)});var V=y(j,2),U=T(V);re("click",U,()=>d()?.show()),p(I,L)}},$$legacy:!0}),I=>_(f,I),()=>r(f))}var E=y($,2);mt(qA(E,{get value(){return u()},get field(){return c()},$$events:{save:w=>{_(h,w.detail||[]),C()}},$$legacy:!0}),w=>d(w),()=>d()),p(n,O),Be(),i()}var WA=S('<div class="help-block"> </div>'),YA=S("<!> <!> <!>",1);function KA(n,e){Ue(e,!1);const t=P(),i=P();let a=ee(e,"field",8),s=ee(e,"value",12,void 0);ne(()=>R(a()),()=>{_(t,a().maxSelect>1)}),ne(()=>(R(s()),r(t)),()=>{typeof s()>"u"&&s(r(t)?[]:"")}),ne(()=>R(a()),()=>{_(i,a().maxSelect||a().values.length)}),ne(()=>(r(t),R(s()),R(a()),r(i)),()=>{r(t)&&Array.isArray(s())&&(s(s().filter(o=>a().values.includes(o))),s().length>r(i)&&s(s().slice(s().length-r(i))))}),ft(),He();{let o=ie(()=>(R(a()),M(()=>a().required?"required":"")));Pe(n,{get class(){return`form-field ${r(o)??""}`},get name(){return R(a()),M(()=>a().name)},children:Ce,$$slots:{default:(l,c)=>{const u=ie(()=>c.uniqueId);var d=YA(),f=q(d);bi(f,{get uniqueId(){return r(u)},get field(){return a()}});var h=y(f,2);{let g=ie(()=>(R(a()),r(t),M(()=>!a().required||r(t)))),m=ie(()=>(r(t),R(s()),R(a()),M(()=>!r(t)||s()?.length>=a().maxSelect))),k=ie(()=>(R(a()),M(()=>a().values?.length>5)));Wa(h,{get id(){return r(u)},get toggle(){return r(g)},get multiple(){return r(t)},get closable(){return r(m)},get items(){return R(a()),M(()=>a().values)},get searchable(){return r(k)},get selected(){return s()},set selected(x){s(x)},$$legacy:!0})}var b=y(h,2);{var v=g=>{var m=WA(),k=T(m);z(()=>Te(k,`Select up to ${r(i)??""} items.`)),p(g,m)};G(b,g=>{r(t)&&g(v)})}p(l,d)}}})}Be()}var ZA=S("<textarea></textarea>");function JA(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","maxHeight"]);Ue(e,!1);let a=ee(e,"value",12,""),s=ee(e,"maxHeight",8,200),o=P(),l;function c(){clearTimeout(l),l=setTimeout(()=>{r(o)&&(ut(o,r(o).style.height=""),ut(o,r(o).style.height=Math.min(r(o).scrollHeight,s())+"px"))},0)}function u(f){if(f?.code==="Enter"&&!f?.shiftKey&&!f?.isComposing){f.preventDefault();const h=r(o).closest("form");h?.requestSubmit&&h.requestSubmit()}}un(()=>(c(),()=>clearTimeout(l))),ne(()=>R(a()),()=>{typeof a()!==void 0&&c()}),ft(),He();var d=ZA();is(d,()=>({...i}),void 0,void 0,"svelte-1x1pbts"),mt(d,f=>_(o,f),()=>r(o)),xt(d,a),re("keydown",d,u),p(n,d),Be()}var GA=S("<!> <!>",1);function XA(n,e){Ue(e,!1);const t=P(),i=P();let a=ee(e,"original",8),s=ee(e,"field",8),o=ee(e,"value",12,void 0);ne(()=>(R(s()),R(a())),()=>{_(t,!F.isEmpty(s().autogeneratePattern)&&!a()?.id)}),ne(()=>(R(s()),r(t)),()=>{_(i,s().required&&!r(t))}),ft(),He();{let l=ie(()=>r(i)?"required":"");Pe(n,{get class(){return`form-field ${r(l)??""}`},get name(){return R(s()),M(()=>s().name)},children:Ce,$$slots:{default:(c,u)=>{const d=ie(()=>u.uniqueId);var f=GA(),h=q(f);bi(h,{get uniqueId(){return r(d)},get field(){return s()}});var b=y(h,2);{let v=ie(()=>r(t)?"Leave empty to autogenerate...":"");JA(b,{get id(){return r(d)},get required(){return r(i)},get placeholder(){return r(v)},get value(){return o()},set value(g){o(g)},$$legacy:!0})}p(c,f)}}})}Be()}var QA=S('<!> <input type="url"/>',1);function eL(n,e){Ue(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0);He();{let a=ie(()=>(R(t()),M(()=>t().required?"required":"")));Pe(n,{get class(){return`form-field ${r(a)??""}`},get name(){return R(t()),M(()=>t().name)},children:Ce,$$slots:{default:(s,o)=>{const l=ie(()=>o.uniqueId);var c=QA(),u=q(c);bi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=y(u,2);z(()=>{W(d,"id",r(l)),d.required=(R(t()),M(()=>t().required))}),xt(d,i),p(s,c)}}})}Be()}var tL=S('<label>Longitude:</label> <input type="number" placeholder="0" step="any" min="-180" max="180"/>',1),nL=S('<label>Latitude:</label> <input type="number" placeholder="0" step="any" min="-90" max="90"/>',1),iL=S('<div class="block txt-center p-base"><span class="loader loader-sm"></span></div>'),rL=S('<div class="block" style="height:200px"><!></div>'),aL=S('<!> <div class="list"><div class="list-item svelte-m6kyna"><!> <span class="separator svelte-m6kyna"></span> <!> <span class="separator svelte-m6kyna"></span> <button type="button" aria-label="Toggle map"><i class="ri-map-2-line"></i></button></div> <!></div>',1);function sL(n,e){Ue(e,!1),ee(e,"original",8);let t=ee(e,"field",8),i=ee(e,"value",12,void 0),a=P(),s=P(!1),o=P(!1);function l(){i().lat>90&&i(i().lat=90,!0),i().lat<-90&&i(i().lat=-90,!0),i().lon>180&&i(i().lon=180,!0),i().lon<-180&&i(i().lon=-180,!0)}function c(){r(o)?d():u()}function u(){f(),_(o,!0)}function d(){_(o,!1)}async function f(){r(a)||r(s)||(_(s,!0),_(a,(await Ut(async()=>{const{default:h}=await import("./Leaflet-DjUOP05d.js");return{default:h}},__vite__mapDeps([14,15]),import.meta.url)).default),_(s,!1))}ne(()=>R(i()),()=>{typeof i()>"u"&&i({lat:0,lon:0})}),ne(()=>R(i()),()=>{i()&&l()}),ft(),He();{let h=ie(()=>(R(t()),M(()=>t().required?"required":"")));Pe(n,{get class(){return`form-field form-field-list ${r(h)??""}`},get name(){return R(t()),M(()=>t().name)},children:Ce,$$slots:{default:(b,v)=>{const g=ie(()=>v.uniqueId);var m=aL(),k=q(m);bi(k,{get uniqueId(){return r(g)},get field(){return t()}});var x=y(k,2),C=T(x),O=T(C);Pe(O,{class:"form-field form-field-inline m-0",children:Ce,$$slots:{default:(D,A)=>{const L=ie(()=>A.uniqueId);var N=tL(),H=q(N),j=y(H,2);z(()=>{W(H,"for",r(L)),W(j,"id",r(L)),j.required=(R(t()),M(()=>t().required))}),xt(j,()=>i().lon,V=>i(i().lon=V,!0)),p(D,N)}}});var $=y(O,4);Pe($,{class:"form-field form-field-inline m-0",children:Ce,$$slots:{default:(D,A)=>{const L=ie(()=>A.uniqueId);var N=nL(),H=q(N),j=y(H,2);z(()=>{W(H,"for",r(L)),W(j,"id",r(L)),j.required=(R(t()),M(()=>t().required))}),xt(j,()=>i().lat,V=>i(i().lat=V,!0)),p(D,N)}}});var E=y($,4);Qe(E,(D,A)=>dt?.(D,A),()=>"Toggle map"),Rt(()=>re("click",E,c));var w=y(C,2);{var I=D=>{var A=rL(),L=T(A);{var N=j=>{var V=iL();p(j,V)},H=j=>{var V=tt(),U=q(V);pi(U,()=>r(a),(B,J)=>{J(B,{height:200,get point(){return i()},set point(Q){i(Q)},$$legacy:!0})}),p(j,V)};G(L,j=>{r(s)?j(N):j(H,!1)})}Et(3,A,()=>mn,()=>({duration:150})),p(D,A)};G(w,D=>{r(o)&&D(I)})}z(()=>Re(E,1,`btn btn-circle btn-sm btn-circle ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),p(b,m)}}})}Be()}var oL=S('<button><div class="txt"> </div></button>'),lL=S('<div><!> <div class="txt-right"><em class="txt-sm txt-hint"><a target="_blank" rel="noopener noreferrer"> </a></em></div></div>'),cL=S('<div><div class="tabs-header compact combined left svelte-1maocj6"></div> <div class="tabs-content"></div></div>');function uL(n,e){Ue(e,!1);const t=P(),i="pb_sdk_preference";let a=ee(e,"class",8,"m-b-sm"),s=ee(e,"js",8,""),o=ee(e,"dart",8,""),l=P(localStorage.getItem(i)||"javascript");ne(()=>r(l),()=>{r(l)&&localStorage.setItem(i,r(l))}),ne(()=>(R(s()),R(o())),()=>{_(t,[{title:"JavaScript",language:"javascript",content:s(),url:"https://github.com/pocketbase/js-sdk"},{title:"Dart",language:"dart",content:o(),url:"https://github.com/pocketbase/dart-sdk"}])}),ft(),He();var c=cL(),u=T(c);bt(u,5,()=>r(t),f=>f.language,(f,h)=>{var b=oL();let v;var g=T(b),m=T(g);z(k=>{v=Re(b,1,"tab-item svelte-1maocj6",null,v,k),Te(m,(r(h),M(()=>r(h).title)))},[()=>({active:r(l)===r(h).language})]),re("click",b,()=>_(l,r(h).language)),p(f,b)});var d=y(u,2);bt(d,5,()=>r(t),f=>f.language,(f,h)=>{var b=lL();let v;var g=T(b);qu(g,{get language(){return r(h),M(()=>r(h).language)},get content(){return r(h),M(()=>r(h).content)}});var m=y(g,2),k=T(m),x=T(k),C=T(x);z(O=>{v=Re(b,1,"tab-item",null,v,O),W(x,"href",(r(h),M(()=>r(h).url))),Te(C,`${r(h),M(()=>r(h).title)??""} SDK`)},[()=>({active:r(l)===r(h).language})]),p(f,b)}),z(()=>Re(c,1,`tabs sdk-tabs ${a()??""}`,"svelte-1maocj6")),p(n,c),Be()}var dL=S('<div class="alert alert-success"><div class="content txt-bold"><span class="txt token-holder svelte-1mqbnxn"> </span> <!></div></div> <!>',1),fL=S('<label>Token duration (in seconds)</label> <input type="number" min="0" step="1"/>',1),hL=S('<form><div class="content"><p>Generate a nonrenewable auth token for <strong> </strong></p></div> <!></form>'),vL=S('<div class="clearfix"></div> <!>',1),mL=S("<h4>Impersonate auth token</h4>"),pL=S('<button type="button" class="btn btn-secondary btn-expanded"><span class="txt">Generate a new one</span></button>'),gL=S('<button type="submit"><span class="txt">Generate token</span></button>'),bL=S('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button> <!>',1);function yL(n,e){Ue(e,!1);const t=P(),i=zt(),a="impersonate_"+F.randomString(5);let s=ee(e,"collection",8),o=ee(e,"record",8),l=P(),c=P(0),u=P(!1),d=P();function f(){o()&&(v(),r(l)?.show())}function h(){r(l)?.hide(),v()}async function b(){if(!(r(u)||!s()||!o())){_(u,!0);try{_(d,await Le.collection(s().name).impersonate(o().id,r(c))),i("submit",r(d))}catch(g){Le.error(g)}_(u,!1)}}function v(){_(c,0),_(d,void 0)}ne(()=>r(d),()=>{_(t,F.getApiExampleUrl(r(d)?.baseURL))}),ft(),He();{let g=ie(()=>!r(u));mt(pn(n,{overlayClose:!1,get escClose(){return r(g)},beforeHide:()=>!r(u),popup:!0,$$events:{show(m){ot.call(this,e,m)},hide(m){ot.call(this,e,m)}},children:(m,k)=>{var x=vL(),C=y(q(x),2);{var O=E=>{var w=dL(),I=q(w),D=T(I),A=T(D),L=T(A),N=y(A,2);rr(N,{get value(){return r(d),M(()=>r(d).authStore.token)}});var H=y(I,2);{let j=ie(()=>`
                import PocketBase from 'pocketbase';

                const token = "...";

                const pb = new PocketBase('${r(t)}');

                pb.authStore.save(token, null);
            `),V=ie(()=>`
                import 'package:pocketbase/pocketbase.dart';

                final token = "...";

                final pb = PocketBase('${r(t)}');

                pb.authStore.save(token, null);
            `);uL(H,{class:"m-b-0",get js(){return r(j)},get dart(){return r(V)}})}z(()=>Te(L,(r(d),M(()=>r(d).authStore.token)))),p(E,w)},$=E=>{var w=hL(),I=T(w),D=T(I),A=y(T(D)),L=T(A),N=y(I,2);Pe(N,{class:"form-field m-b-xs m-t-sm",name:"duration",children:Ce,$$slots:{default:(H,j)=>{const V=ie(()=>j.uniqueId);var U=fL(),B=q(U),J=y(B,2);z(()=>{W(B,"for",r(V)),W(J,"id",r(V)),W(J,"placeholder",`Default to the collection setting (${R(s()),M(()=>s()?.authToken?.duration||0)??""}s)`),Rn(J,r(c)||"")}),re("input",J,Q=>_(c,Q.target.value<<0)),p(H,U)}}}),z(H=>{W(w,"id",a),Te(L,`${H??""}:`)},[()=>(R(F),R(o()),M(()=>F.displayValue(o())))]),re("submit",w,Ct(b)),p(E,w)};G(C,E=>{r(d),M(()=>r(d)?.authStore?.token)?E(O):E($,!1)})}p(m,x)},$$slots:{default:!0,header:(m,k)=>{var x=mL();p(m,x)},footer:(m,k)=>{var x=bL(),C=q(x),O=y(C,2);{var $=w=>{var I=pL();z(()=>I.disabled=r(u)),re("click",I,()=>v()),p(w,I)},E=w=>{var I=gL();let D;z(A=>{W(I,"form",a),D=Re(I,1,"btn btn-expanded",null,D,A),I.disabled=r(u)},[()=>({"btn-loading":r(u)})]),re("click",I,()=>b()),p(w,I)};G(O,w=>{r(d),M(()=>r(d)?.authStore?.token)?w($):w(E,!1)})}z(()=>C.disabled=r(u)),re("click",C,h),p(m,x)}},$$legacy:!0}),m=>_(l,m),()=>r(l))}return _t(e,"show",f),_t(e,"hide",h),Be({show:f,hide:h})}var _L=S('<div class="block"><div class="alert alert-info m-0"><div class="icon"><i class="ri-information-line"></i></div> <div class="flex flex-gap-xs">The record has previous unsaved changes. <button type="button" class="btn btn-sm btn-secondary">Restore draft</button></div> <button type="button" class="close" aria-label="Discard draft"><i class="ri-close-line"></i></button></div> <div class="clearfix p-b-base"></div></div>'),xL=S('<div class="form-field-addon"><!></div>'),wL=S('<label><i></i> <span class="txt">id</span> <span class="flex-fill"></span></label> <!> <input type="text"/>',1),kL=S("<hr/>"),SL=S("<!> <!>",1),TL=S("<div><!></div>"),$L=S('<div class="tabs-content no-animations"><form><!> <!> <!> <!></form> <!></div>'),IL=S('<span class="loader loader-sm"></span> <h4 class="panel-title txt-hint svelte-qc5ngu">Loading...</h4>',1),CL=S('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-mail-check-line" aria-hidden="true"></i> <span class="txt">Send verification email</span></button>'),EL=S('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-mail-lock-line" aria-hidden="true"></i> <span class="txt">Send password reset email</span></button>'),OL=S('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-id-card-line" aria-hidden="true"></i> <span class="txt">Impersonate</span></button>'),DL=S('<!> <!> <!> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-braces-line" aria-hidden="true"></i> <span class="txt">Copy raw JSON</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-file-copy-line" aria-hidden="true"></i> <span class="txt">Duplicate</span></button> <hr/> <button type="button" class="dropdown-item txt-danger closable" role="menuitem"><i class="ri-delete-bin-7-line" aria-hidden="true"></i> <span class="txt">Delete</span></button>',1),PL=S('<div class="flex-fill"></div> <div tabindex="0" role="button" aria-label="More record options" class="btn btn-sm btn-circle btn-transparent flex-gap-0"><i class="ri-more-line" aria-hidden="true"></i> <!></div>',1),ML=S('<h4 class="panel-title svelte-qc5ngu"> <strong> </strong> record</h4> <!>',1),AL=S('<div class="tabs-header stretched"><button type="button">Account</button> <button type="button">Authorized providers</button></div>'),LL=S("<!> <!>",1),NL=S('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Save and continue</span></button>'),RL=S('<button type="button" class="btn p-l-5 p-r-5 flex-gap-0"><i class="ri-arrow-down-s-line" aria-hidden="true"></i> <!></button>'),FL=S('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <div class="btns-group no-gap"><button type="submit" title="Save and close"><span class="txt"> </span></button> <!></div>',1),qL=S("<!> <!>",1);function qd(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=P(),o=P(),l=P(),c=P(),u=P(),d=zt(),f="record_"+F.randomString(5),h="form",b="providers";let v=ee(e,"collection",8),g=P(),m=P(),k=P({}),x=P({}),C=P(null),O=P(!1),$=P(!1),E=P({}),w=P({}),I=P(JSON.stringify(r(k))),D=P(r(I)),A=P(h),L=P(!0),N=P(!0),H=P(v()),j=P([]);const V=["id"],U=V.concat("email","emailVisibility","verified","tokenKey","password");function B(_e){return ge(_e),_($,!0),_(A,h),r(g)?.show()}function J(){return r(g)?.hide()}function Q(){_($,!1),J()}function oe(){_(H,v()),r(g)?.isActive()&&(Ee(JSON.stringify(r(x))),Q())}async function de(_e){if(!_e)return null;let Oe=typeof _e=="string"?_e:_e?.id;if(Oe)try{return await Le.collection(v().id).getOne(Oe)}catch(Fe){Fe.isAbort||(Q(),console.warn("resolveModel:",Fe),ur(`Unable to load record with id "${Oe}"`))}return typeof _e=="object"?_e:null}async function ge(_e){_(N,!0),rn({}),_(E,{}),_(w,{}),_(k,typeof _e=="string"?{id:_e,collectionId:v()?.id,collectionName:v()?.name}:_e||{}),_(x,structuredClone(r(k))),_(k,await de(_e)||{}),_(x,structuredClone(r(k))),await Tn(),_(C,ve()),!r(C)||he(r(x),r(C))?_(C,null):(delete r(C).password,delete r(C).passwordConfirm),_(I,JSON.stringify(r(x))),_(N,!1)}async function pe(_e){rn({}),_(k,_e||{}),_(E,{}),_(w,{});const Oe=v()?.fields?.filter(Fe=>Fe.type!="file")?.map(Fe=>Fe.name)||[];for(let Fe in _e)Oe.includes(Fe)||ut(x,r(x)[Fe]=_e[Fe]);await Tn(),_(I,JSON.stringify(r(x))),be()}function xe(){return"record_draft_"+(v()?.id||"")+"_"+(r(k)?.id||"")}function ve(_e){try{const Oe=window.localStorage.getItem(xe());if(Oe)return JSON.parse(Oe)}catch{}return _e}function Ee(_e){try{window.localStorage.setItem(xe(),_e)}catch(Oe){console.warn("updateDraft failure:",Oe),window.localStorage.removeItem(xe())}}function ce(){r(C)&&(_(x,r(C)),_(C,null))}function he(_e,Oe){const Fe=structuredClone(_e||{}),at=structuredClone(Oe||{}),je=v()?.fields?.filter(We=>We.type==="file");for(let We of je)delete Fe[We.name],delete at[We.name];const nt=["expand","password","passwordConfirm"];for(let We of nt)delete Fe[We],delete at[We];return JSON.stringify(Fe)==JSON.stringify(at)}function be(){_(C,null),window.localStorage.removeItem(xe())}async function we(_e=!0){if(!(r(O)||!r(c)||!v()?.id)){_(O,!0);try{const Oe=me();let Fe;if(r(L)?Fe=await Le.collection(v().id).create(Oe):Fe=await Le.collection(v().id).update(r(x).id,Oe),vn(r(L)?"Successfully created record.":"Successfully updated record."),be(),r(i)&&r(x)?.id==Le.authStore.record?.id&&Oe.get("password"))return Le.logout();_e?Q():pe(Fe),d("save",{isNew:r(L),record:Fe})}catch(Oe){Le.error(Oe)}_(O,!1)}}function ue(){r(k)?.id&&Ln("Do you really want to delete the selected record?",()=>Le.collection(r(k).collectionId).delete(r(k).id).then(()=>{Q(),vn("Successfully deleted record."),d("delete",r(k))}).catch(_e=>{Le.error(_e)}))}function me(){const _e=structuredClone(r(x)||{}),Oe=new FormData,Fe={},at={};for(const je of v()?.fields||[])je.type=="autodate"||r(t)&&je.type=="password"||(Fe[je.name]=!0,je.type=="json"&&(at[je.name]=!0));r(t)&&_e.password&&(Fe.password=!0),r(t)&&_e.passwordConfirm&&(Fe.passwordConfirm=!0);for(const je in _e)if(Fe[je]){if(typeof _e[je]>"u"&&(_e[je]=null),at[je]&&_e[je]!=="")try{JSON.parse(_e[je])}catch(nt){const We={};throw We[je]={code:"invalid_json",message:nt.toString()},new oi({status:400,response:{data:We}})}F.addValueToFormData(Oe,je,_e[je])}for(const je in r(E)){const nt=F.toArray(r(E)[je]);for(const We of nt)Oe.append(je+"+",We)}for(const je in r(w)){const nt=F.toArray(r(w)[je]);for(const We of nt)Oe.append(je+"-",We)}return Oe}function ae(){!v()?.id||!r(k)?.email||Ln(`Do you really want to sent verification email to ${r(k).email}?`,()=>Le.collection(v().id).requestVerification(r(k).email).then(()=>{vn(`Successfully sent verification email to ${r(k).email}.`)}).catch(_e=>{Le.error(_e)}))}function te(){!v()?.id||!r(k)?.email||Ln(`Do you really want to sent password reset email to ${r(k).email}?`,()=>Le.collection(v().id).requestPasswordReset(r(k).email).then(()=>{vn(`Successfully sent password reset email to ${r(k).email}.`)}).catch(_e=>{Le.error(_e)}))}function se(){r(l)?Ln("You have unsaved changes. Do you really want to discard them?",()=>{ye()}):ye()}async function ye(){let _e=r(k)?structuredClone(r(k)):null;if(_e){const Oe=["file","autodate"],Fe=v()?.fields||[];for(const at of Fe)Oe.includes(at.type)&&delete _e[at.name];_e.id=""}be(),B(_e),await Tn(),_(I,"")}function ke(_e){(_e.ctrlKey||_e.metaKey)&&_e.code=="KeyS"&&(_e.preventDefault(),_e.stopPropagation(),we(!1))}function Ie(){F.copyToClipboard(JSON.stringify(r(k),null,2)),Js("The record JSON was copied to your clipboard!",3e3)}ne(()=>R(v()),()=>{_(t,v()?.type==="auth")}),ne(()=>R(v()),()=>{_(i,v()?.name==="_superusers")}),ne(()=>R(v()),()=>{_(a,!!v()?.fields?.find(_e=>_e.type==="editor"))}),ne(()=>R(v()),()=>{_(s,v()?.fields?.find(_e=>_e.name==="id"))}),ne(()=>(r(E),r(w)),()=>{_(o,F.hasNonEmptyProps(r(E))||F.hasNonEmptyProps(r(w)))}),ne(()=>r(x),()=>{_(D,JSON.stringify(r(x)))}),ne(()=>(r(o),r(I),r(D)),()=>{_(l,r(o)||r(I)!=r(D))}),ne(()=>r(k),()=>{_(L,!r(k)||!r(k).id)}),ne(()=>(r(N),r(L),r(l)),()=>{_(c,!r(N)&&(r(L)||r(l)))}),ne(()=>(r(N),r(D)),()=>{r(N)||Ee(r(D))}),ne(()=>(R(v()),r(H)),()=>{v()&&r(H)?.id!=v()?.id&&oe()}),ne(()=>r(t),()=>{_(u,r(t)?U:V)}),ne(()=>(R(v()),r(u)),()=>{_(j,v()?.fields?.filter(_e=>!r(u).includes(_e.name)&&_e.type!="autodate")||[])}),ft(),He();var Ne=qL(),ze=q(Ne);{let _e=ie(()=>r(a)?"overlay-panel-xl":"overlay-panel-lg"),Oe=ie(()=>r(t)&&!r(i)&&!r(L)?"colored-header":""),Fe=ie(()=>!r(N)),at=ie(()=>!r(N)),je=ie(()=>!r(N));mt(pn(ze,{get class(){return`
        record-panel
        ${r(_e)??""}
        ${r(Oe)??""}
    `},get btnClose(){return r(Fe)},get escClose(){return r(at)},get overlayClose(){return r(je)},beforeHide:()=>r(l)&&r($)?(Ln("You have unsaved changes. Do you really want to close the panel?",()=>{Q()}),!1):(rn({}),be(),!0),$$events:{hide(nt){ot.call(this,e,nt)},show(nt){ot.call(this,e,nt)}},children:(nt,We)=>{var Ye=$L(),De=T(Ye);let qe;var Ke=T(De);{var ct=it=>{var $e=_L(),vt=T($e),Y=y(T(vt),2),Z=y(T(Y)),le=y(Y,2);Qe(le,(Se,Ze)=>dt?.(Se,Ze),()=>"Discard draft"),Rt(()=>re("click",le,Ct(()=>be()))),re("click",Z,()=>ce()),Et(2,$e,()=>mn,()=>({duration:150})),p(it,$e)};G(Ke,it=>{!r(l)&&r(C)&&!r(N)&&it(ct)})}var Ve=y(Ke,2);{let it=ie(()=>r(L)?"":"readonly");Pe(Ve,{get class(){return`form-field ${r(it)??""}`},name:"id",children:Ce,$$slots:{default:($e,vt)=>{const Y=ie(()=>vt.uniqueId);var Z=wL(),le=q(Z),Se=T(le),Ze=y(le,2);{var st=rt=>{var St=xL(),pt=T(St);aM(pt,{get record(){return r(x)}}),p(rt,St)};G(Ze,rt=>{r(L)||rt(st)})}var wt=y(Ze,2);z((rt,St)=>{W(le,"for",r(Y)),Re(Se,1,rt,"svelte-qc5ngu"),W(wt,"id",r(Y)),W(wt,"placeholder",St),W(wt,"minlength",(r(s),M(()=>r(s)?.min||null))),W(wt,"maxlength",(r(s),M(()=>r(s)?.max||null))),wt.readOnly=!r(L)},[()=>$n((R(F),M(()=>F.getFieldTypeIcon("primary")))),()=>(r(N),R(F),r(s),M(()=>!r(N)&&!F.isEmpty(r(s)?.autogeneratePattern)?"Leave empty to auto generate...":""))]),xt(wt,()=>r(x).id,rt=>ut(x,r(x).id=rt)),p($e,Z)}}})}var Xe=y(Ve,2);{var et=it=>{var $e=SL(),vt=q($e);kM(vt,{get isNew(){return r(L)},get collection(){return v()},get record(){return r(x)},set record(le){_(x,le)},$$legacy:!0});var Y=y(vt,2);{var Z=le=>{var Se=kL();p(le,Se)};G(Y,le=>{r(j),M(()=>r(j).length)&&le(Z)})}p(it,$e)};G(Xe,it=>{r(t)&&it(et)})}var Je=y(Xe,2);bt(Je,1,()=>r(j),it=>it.name,(it,$e)=>{var vt=tt(),Y=q(vt);{var Z=Se=>{XA(Se,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(Ze){ut(x,r(x)[r($e).name]=Ze)},$$legacy:!0})},le=Se=>{var Ze=tt(),st=q(Ze);{var wt=St=>{pA(St,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(pt){ut(x,r(x)[r($e).name]=pt)},$$legacy:!0})},rt=St=>{var pt=tt(),Tt=q(pt);{var Ft=Zt=>{EM(Zt,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(Cn){ut(x,r(x)[r($e).name]=Cn)},$$legacy:!0})},_n=Zt=>{var Cn=tt(),Vn=q(Cn);{var dn=ci=>{XM(ci,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(Un){ut(x,r(x)[r($e).name]=Un)},$$legacy:!0})},sn=ci=>{var Un=tt(),Qn=q(Un);{var yi=Bn=>{eL(Bn,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(_i){ut(x,r(x)[r($e).name]=_i)},$$legacy:!0})},Mi=Bn=>{var _i=tt(),ea=q(_i);{var nc=xn=>{JM(xn,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(Ai){ut(x,r(x)[r($e).name]=Ai)},$$legacy:!0})},Aa=xn=>{var Ai=tt(),Wi=q(Ai);{var Li=En=>{PM(En,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(ei){ut(x,r(x)[r($e).name]=ei)},$$legacy:!0})},ta=En=>{var ei=tt(),xo=q(ei);{var wo=kn=>{KA(kn,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(fr){ut(x,r(x)[r($e).name]=fr)},$$legacy:!0})},La=kn=>{var fr=tt(),bs=q(fr);{var ys=Yi=>{vA(Yi,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(hr){ut(x,r(x)[r($e).name]=hr)},$$legacy:!0})},_s=Yi=>{var hr=tt(),Ki=q(hr);{var ic=Zi=>{lA(Zi,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(Ni){ut(x,r(x)[r($e).name]=Ni)},get uploadedFiles(){return r(E)[r($e).name]},set uploadedFiles(Ni){ut(E,r(E)[r($e).name]=Ni)},get deletedFileNames(){return r(w)[r($e).name]},set deletedFileNames(Ni){ut(w,r(w)[r($e).name]=Ni)},$$legacy:!0})},ko=Zi=>{var Ni=tt(),rc=q(Ni);{var ac=X=>{HA(X,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(fe){ut(x,r(x)[r($e).name]=fe)},$$legacy:!0})},K=X=>{var fe=tt(),Ae=q(fe);{var lt=Pt=>{bA(Pt,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(nn){ut(x,r(x)[r($e).name]=nn)},$$legacy:!0})},kt=Pt=>{var nn=tt(),wn=q(nn);{var On=ti=>{sL(ti,{get field(){return r($e)},get original(){return r(k)},get record(){return r(x)},get value(){return r(x)[r($e).name]},set value(nb){ut(x,r(x)[r($e).name]=nb)},$$legacy:!0})};G(wn,ti=>{r($e),M(()=>r($e).type==="geoPoint")&&ti(On)},!0)}p(Pt,nn)};G(Ae,Pt=>{r($e),M(()=>r($e).type==="password")?Pt(lt):Pt(kt,!1)},!0)}p(X,fe)};G(rc,X=>{r($e),M(()=>r($e).type==="relation")?X(ac):X(K,!1)},!0)}p(Zi,Ni)};G(Ki,Zi=>{r($e),M(()=>r($e).type==="file")?Zi(ic):Zi(ko,!1)},!0)}p(Yi,hr)};G(bs,Yi=>{r($e),M(()=>r($e).type==="json")?Yi(ys):Yi(_s,!1)},!0)}p(kn,fr)};G(xo,kn=>{r($e),M(()=>r($e).type==="select")?kn(wo):kn(La,!1)},!0)}p(En,ei)};G(Wi,En=>{r($e),M(()=>r($e).type==="date")?En(Li):En(ta,!1)},!0)}p(xn,Ai)};G(ea,xn=>{r($e),M(()=>r($e).type==="editor")?xn(nc):xn(Aa,!1)},!0)}p(Bn,_i)};G(Qn,Bn=>{r($e),M(()=>r($e).type==="url")?Bn(yi):Bn(Mi,!1)},!0)}p(ci,Un)};G(Vn,ci=>{r($e),M(()=>r($e).type==="email")?ci(dn):ci(sn,!1)},!0)}p(Zt,Cn)};G(Tt,Zt=>{r($e),M(()=>r($e).type==="bool")?Zt(Ft):Zt(_n,!1)},!0)}p(St,pt)};G(st,St=>{r($e),M(()=>r($e).type==="number")?St(wt):St(rt,!1)},!0)}p(Se,Ze)};G(Y,Se=>{r($e),M(()=>r($e).type==="text")?Se(Z):Se(le,!1)})}p(it,vt)});var ht=y(De,2);{var gt=it=>{var $e=TL();let vt;var Y=T($e);uM(Y,{get record(){return r(x)}}),z(Z=>vt=Re($e,1,"tab-item",null,vt,Z),[()=>({active:r(A)===b})]),p(it,$e)};G(ht,it=>{r(t)&&!r(i)&&!r(L)&&it(gt)})}z(it=>{W(De,"id",f),qe=Re(De,1,"tab-item",null,qe,it)},[()=>({"no-pointer-events":r(N),active:r(A)===h})]),re("submit",De,Ct(we)),re("keydown",De,ke),p(nt,Ye)},$$slots:{default:!0,header:(nt,We)=>{var Ye=LL(),De=q(Ye);{var qe=Xe=>{var et=IL();p(Xe,et)},Ke=Xe=>{var et=ML(),Je=q(et),ht=T(Je),gt=y(ht),it=T(gt),$e=y(Je,2);{var vt=Y=>{var Z=PL(),le=y(q(Z),2),Se=y(T(le),2);Jn(Se,{class:"dropdown dropdown-right dropdown-nowrap",children:(Ze,st)=>{var wt=DL(),rt=q(wt);{var St=dn=>{var sn=CL();re("click",sn,()=>ae()),p(dn,sn)};G(rt,dn=>{r(t),r(k),M(()=>r(t)&&!r(k).verified&&r(k).email)&&dn(St)})}var pt=y(rt,2);{var Tt=dn=>{var sn=EL();re("click",sn,()=>te()),p(dn,sn)};G(pt,dn=>{r(t),r(k),M(()=>r(t)&&r(k).email)&&dn(Tt)})}var Ft=y(pt,2);{var _n=dn=>{var sn=OL();re("click",sn,()=>r(m)?.show()),p(dn,sn)};G(Ft,dn=>{r(t)&&dn(_n)})}var Zt=y(Ft,2),Cn=y(Zt,2),Vn=y(Cn,4);re("click",Zt,()=>Ie()),re("click",Cn,()=>se()),re("click",Vn,Ct(hn(()=>ue()))),p(Ze,wt)},$$slots:{default:!0}}),p(Y,Z)};G($e,Y=>{r(L)||Y(vt)})}z(()=>{Te(ht,`${r(L)?"New":"Edit"} `),Te(it,(R(v()),M(()=>v()?.name)))}),p(Xe,et)};G(De,Xe=>{r(N)?Xe(qe):Xe(Ke,!1)})}var ct=y(De,2);{var Ve=Xe=>{var et=AL(),Je=T(et);let ht;var gt=y(Je,2);let it;z(($e,vt)=>{ht=Re(Je,1,"tab-item",null,ht,$e),it=Re(gt,1,"tab-item",null,it,vt)},[()=>({active:r(A)===h}),()=>({active:r(A)===b})]),re("click",Je,()=>_(A,h)),re("click",gt,()=>_(A,b)),p(Xe,et)};G(ct,Xe=>{r(t)&&!r(i)&&!r(L)&&Xe(Ve)})}p(nt,Ye)},footer:(nt,We)=>{var Ye=FL(),De=q(Ye),qe=y(De,2),Ke=T(qe);let ct;var Ve=T(Ke),Xe=T(Ve),et=y(Ke,2);{var Je=ht=>{var gt=RL(),it=y(T(gt),2);Jn(it,{class:"dropdown dropdown-upside dropdown-right dropdown-nowrap m-b-5",children:($e,vt)=>{var Y=NL();re("click",Y,()=>we(!1)),p($e,Y)},$$slots:{default:!0}}),z(()=>gt.disabled=!r(c)||r(O)),p(ht,gt)};G(et,ht=>{r(L)||ht(Je)})}z(ht=>{De.disabled=r(O)||r(N),W(Ke,"form",f),ct=Re(Ke,1,"btn",null,ct,ht),Ke.disabled=!r(c)||r(O),Te(Xe,r(L)?"Create":"Save changes")},[()=>({"btn-expanded":r(L),"btn-expanded-sm":!r(L),"btn-loading":r(O)||r(N)})]),re("click",De,()=>J()),p(nt,Ye)}},$$legacy:!0}),nt=>_(g,nt),()=>r(g))}var Me=y(ze,2);{var Ge=_e=>{mt(yL(_e,{get record(){return r(x)},get collection(){return v()},$$legacy:!0}),Oe=>_(m,Oe),()=>r(m))};G(Me,_e=>{r(t)&&_e(Ge)})}return p(n,Ne),_t(e,"show",B),_t(e,"hide",J),Be({show:B,hide:J})}var zL=S('<div><span class="txt">Total found:</span> <span class="txt"> </span></div>');function jL(n,e){Ue(e,!1);const t=zt();let i=ee(e,"collection",8),a=ee(e,"filter",8,""),s=ee(e,"totalCount",12,0),o=ee(e,"class",8,void 0),l=P(!1);async function c(){if(i()?.id){_(l,!0),s(0);try{const h=F.getAllCollectionIdentifiers(i()),b=await Le.collection(i().id).getList(1,1,{filter:F.normalizeSearchFilter(a(),h),fields:"id",requestKey:"records_count"});s(b.totalItems),t("count",s()),_(l,!1)}catch(h){h?.isAbort||(_(l,!1),console.warn(h))}}}ne(()=>(R(i()),R(a())),()=>{i()?.id&&a()!==-1&&c()}),ft(),He();var u=zL(),d=y(T(u),2),f=T(d);return z(()=>{Re(u,1,`inline-flex flex-gap-5 records-counter ${o()??""}`),Te(f,r(l)?"...":s())}),p(n,u),_t(e,"reload",c),Be({reload:c})}var VL=S('<span class="loader loader-sm"></span>'),UL=S('<div class="form-field"><input type="checkbox" id="checkbox_0"/> <label for="checkbox_0"></label></div>'),BL=S('<th class="bulk-select-col min-width"><!></th>'),HL=S("<i></i>"),WL=S("<i></i>"),YL=S('<div class="col-header-content"><!> <span class="txt"> </span></div>'),KL=S('<button type="button" aria-label="Toggle columns" class="btn btn-sm btn-transparent p-0"><i class="ri-more-line"></i></button>'),ZL=S('<td class="bulk-select-col min-width"><div class="form-field"><input type="checkbox"/> <label></label></div></td>'),JL=S('<div class="relation-cell svelte-8gnvtl"><!></div>'),GL=S("<td><!></td>"),XL=S('<tr tabindex="0" class="row-handle"><!><!><td class="col-type-action min-width"><i class="ri-arrow-right-line"></i></td></tr>'),QL=S('<tr><td colspan="99" class="p-xs"><span class="skeleton-loader m-0"></span></td></tr>'),eN=S('<button type="button" class="btn btn-hint btn-expanded m-t-sm"><span class="txt">Clear filters</span></button>'),tN=S('<button type="button" class="btn btn-secondary btn-expanded m-t-sm"><i class="ri-add-line"></i> <span class="txt">New record</span></button>'),nN=S('<tr><td colspan="99" class="txt-center txt-hint p-xs"><h6>No records found.</h6> <!></td></tr>'),iN=S('<tr><td colspan="99" class="txt-center"><button><span class="txt">Load more</span></button></td></tr>'),rN=S('<table><thead><tr><!><!><th class="col-type-action min-width"><!></th></tr></thead><tbody><!><!></tbody></table>'),aN=S('<input type="checkbox"/> <label> </label>',1),sN=S('<div class="txt-hint txt-sm p-5 m-b-5">Toggle columns</div> <!>',1),oN=S('<div class="bulkbar"><div class="txt">Selected <strong> </strong> </div> <button type="button"><span class="txt">Reset</span></button> <div class="flex-fill"></div> <button type="button"><span class="txt">Delete selected</span></button></div>'),lN=S("<!> <!>",1);function cN(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Gs,"$isCollectionsLoading",t),s=()=>It(Xn,"$collections",t),o=P(),l=P(),c=P(),u=P(),d=P(),f=P(),h=P(),b=P(),v=P(),g=zt(),m=/^([\+\-])?(\w+)$/,k=40;let x=ee(e,"collection",8),C=ee(e,"sort",12,""),O=ee(e,"filter",12,""),$=P(),E=P([]),w=P(1),I=P(0),D=P({}),A=P(!0),L=P(!1),N=0,H=P(),j=P([]),V=P([]),U=P("");const B=["verified","emailVisibility"];function J(){x()?.id&&(r(j).length?localStorage.setItem(r(U),JSON.stringify(r(j))):localStorage.removeItem(r(U)))}function Q(){if(_(j,[]),!!x()?.id)try{const se=localStorage.getItem(r(U));se&&_(j,JSON.parse(se)||[])}catch{}}function oe(se){return!!r(E).find(ye=>ye.id==se)}async function de(){const se=r(w);for(let ye=1;ye<=se;ye++)(ye===1||r(h))&&await ge(ye,!1)}async function ge(se=1,ye=!0){if(!x()?.id)return;_(A,!0);let ke=C();const Ie=ke.match(m),Ne=Ie?r(d).find(_e=>_e.name===Ie[2]):null;if(Ie&&Ne){const _e=s()?.find(Fe=>Fe.id==Ne.collectionId)?.fields?.filter(Fe=>Fe.presentable)?.map(Fe=>Fe.name)||[],Oe=[];for(const Fe of _e)Oe.push((Ie[1]||"")+Ie[2]+"."+Fe);Oe.length>0&&(ke=Oe.join(","))}const ze=F.getAllCollectionIdentifiers(x()),Me=r(u).map(_e=>_e.name+":excerpt(200)").concat(r(d).map(_e=>"expand."+_e.name+".*:excerpt(200)"));Me.length&&Me.unshift("*");let Ge=[];for(const _e of r(d)){const Oe=F.getExpandPresentableRelFields(_e,s(),2);Oe?.length&&(Ge=Ge.concat(Oe)),F.pushUnique(Ge,_e.name)}return Le.collection(x().id).getList(se,k,{sort:ke,skipTotal:1,filter:F.normalizeSearchFilter(O(),ze),expand:Ge.join(","),fields:Me.join(","),requestKey:"records_list"}).then(async _e=>{if(se<=1&&pe(),_(A,!1),_(w,_e.page),_(I,_e.items.length),g("load",r(E).concat(_e.items)),r(u).length)for(let Oe of _e.items)Oe._partial=!0;if(ye){const Oe=++N;for(;_e.items?.length&&N==Oe;){const Fe=_e.items.splice(0,20);for(let at of Fe)F.pushOrReplaceByKey(r(E),at);_(E,r(E)),await F.yieldToMain()}}else{for(let Oe of _e.items)F.pushOrReplaceByKey(r(E),Oe);_(E,r(E))}}).catch(_e=>{_e?.isAbort||(_(A,!1),console.warn(_e),pe(),Le.error(_e,!O()||_e?.status!=400))})}function pe(){r($)?.resetVerticalScroll(),_(E,[]),_(w,1),_(I,0),_(D,{})}function xe(){r(v)?ve():Ee()}function ve(){_(D,{})}function Ee(){for(const se of r(E))ut(D,r(D)[se.id]=se);_(D,r(D))}function ce(se){r(D)[se.id]?delete r(D)[se.id]:ut(D,r(D)[se.id]=se),_(D,r(D))}function he(){const se=`Do you really want to delete the selected ${r(b)===1?"record":"records"}?`;Ln(se,be)}async function be(){if(r(L)||!r(b)||!x()?.id)return;let se=[];for(const ye of Object.keys(r(D)))se.push(Le.collection(x().id).delete(ye));return _(L,!0),Promise.all(se).then(()=>{vn(`Successfully deleted the selected ${r(b)===1?"record":"records"}.`),g("delete",r(D)),ve()}).catch(ye=>{Le.error(ye)}).finally(()=>(_(L,!1),de()))}ne(()=>R(x()),()=>{x()?.id&&(_(U,x().id+"@hiddenColumns"),Q(),pe())}),ne(()=>R(x()),()=>{_(o,x()?.type==="view")}),ne(()=>R(x()),()=>{_(l,x()?.type==="auth"&&x().name==="_superusers")}),ne(()=>(R(x()),r(l)),()=>{_(c,(x()?.fields||[]).filter(se=>!se.hidden&&(!r(l)||!B.includes(se.name))))}),ne(()=>r(c),()=>{_(u,r(c).filter(se=>se.type==="editor"))}),ne(()=>r(c),()=>{_(d,r(c).filter(se=>se.type==="relation"))}),ne(()=>(r(c),r(j)),()=>{_(f,r(c).filter(se=>!r(j).includes(se.id)))}),ne(()=>(a(),R(x()),R(C()),R(O())),()=>{!a()&&x()?.id&&C()!==-1&&O()!==-1&&ge(1)}),ne(()=>r(I),()=>{_(h,r(I)>=k)}),ne(()=>r(D),()=>{_(b,Object.keys(r(D)).length)}),ne(()=>(r(E),r(b)),()=>{_(v,r(E).length&&r(b)===r(E).length)}),ne(()=>r(j),()=>{r(j)!==-1&&J()}),ne(()=>r(c),()=>{_(V,r(c).filter(se=>!se.primaryKey).map(se=>({id:se.id,name:se.name})))}),ft(),He();var we=lN(),ue=q(we);mt(bd(ue,{class:"table-wrapper",children:(se,ye)=>{var ke=rN();let Ie;var Ne=T(ke),ze=T(Ne),Me=T(ze);{var Ge=De=>{var qe=BL(),Ke=T(qe);{var ct=Xe=>{var et=VL();p(Xe,et)},Ve=Xe=>{var et=UL(),Je=T(et);z(()=>{Je.disabled=(r(E),M(()=>!r(E).length)),Ur(Je,r(v))}),re("change",Je,()=>xe()),p(Xe,et)};G(Ke,Xe=>{r(A)?Xe(ct):Xe(Ve,!1)})}p(De,qe)};G(Me,De=>{r(o)||De(Ge)})}var _e=y(Me);bt(_e,1,()=>r(f),De=>De.id,(De,qe)=>{rl(De,{get class(){return`col-type-${r(qe),M(()=>r(qe).type)??""} col-field-${r(qe),M(()=>r(qe).name)??""}`},get name(){return r(qe),M(()=>r(qe).name)},get sort(){return C()},set sort(Ke){C(Ke)},children:(Ke,ct)=>{var Ve=YL(),Xe=T(Ve);{var et=it=>{var $e=HL();z(vt=>Re($e,1,vt,"svelte-8gnvtl"),[()=>$n((R(F),M(()=>F.getFieldTypeIcon("primary"))))]),p(it,$e)},Je=it=>{var $e=WL();z(vt=>Re($e,1,vt,"svelte-8gnvtl"),[()=>$n((R(F),r(qe),M(()=>F.getFieldTypeIcon(r(qe).type))))]),p(it,$e)};G(Xe,it=>{r(qe),M(()=>r(qe).primaryKey)?it(et):it(Je,!1)})}var ht=y(Xe,2),gt=T(ht);z(()=>Te(gt,(r(qe),M(()=>r(qe).name)))),p(Ke,Ve)},$$slots:{default:!0},$$legacy:!0})});var Oe=y(_e),Fe=T(Oe);{var at=De=>{var qe=KL();mt(qe,Ke=>_(H,Ke),()=>r(H)),p(De,qe)};G(Fe,De=>{r(V),M(()=>r(V).length)&&De(at)})}var je=y(Ne),nt=T(je);bt(nt,1,()=>r(E),De=>r(o)?De:De.id,(De,qe)=>{var Ke=XL(),ct=T(Ke);{var Ve=et=>{var Je=ZL(),ht=T(Je),gt=T(ht),it=y(gt,2);z(()=>{W(gt,"id",`checkbox_${r(qe),M(()=>r(qe).id)??""}`),Ur(gt,(r(D),r(qe),M(()=>r(D)[r(qe).id]))),W(it,"for",`checkbox_${r(qe),M(()=>r(qe).id)??""}`)}),re("change",gt,()=>ce(r(qe))),re("click",ht,hn(function($e){ot.call(this,e,$e)})),p(et,Je)};G(ct,et=>{r(o)||et(Ve)})}var Xe=y(ct);bt(Xe,1,()=>r(f),et=>et.id,(et,Je)=>{var ht=GL(),gt=T(ht);{var it=vt=>{var Y=JL(),Z=T(Y);Vu(Z,{get record(){return r(qe)},get field(){return r(Je)}}),p(vt,Y)},$e=vt=>{Vu(vt,{short:!0,get record(){return r(qe)},get field(){return r(Je)}})};G(gt,vt=>{r(Je),M(()=>r(Je).type==="relation")?vt(it):vt($e,!1)})}z(()=>Re(ht,1,`col-type-${r(Je),M(()=>r(Je).type)??""} col-field-${r(Je),M(()=>r(Je).name)??""}`,"svelte-8gnvtl")),p(et,ht)}),re("click",Ke,()=>g("select",r(qe))),re("keydown",Ke,et=>{et.code==="Enter"&&(et.preventDefault(),g("select",r(qe)))}),p(De,Ke)},De=>{var qe=tt(),Ke=q(qe);{var ct=Xe=>{var et=QL();p(Xe,et)},Ve=Xe=>{var et=nN(),Je=T(et),ht=y(T(Je),2);{var gt=$e=>{var vt=eN();re("click",vt,()=>O("")),p($e,vt)},it=$e=>{var vt=tt(),Y=q(vt);{var Z=le=>{var Se=tN();re("click",Se,()=>g("new")),p(le,Se)};G(Y,le=>{r(o)||le(Z)},!0)}p($e,vt)};G(ht,$e=>{R(O()),M(()=>O()?.length)?$e(gt):$e(it,!1)})}p(Xe,et)};G(Ke,Xe=>{r(A)?Xe(ct):Xe(Ve,!1)})}p(De,qe)});var We=y(nt);{var Ye=De=>{var qe=iN(),Ke=T(qe),ct=T(Ke);let Ve;z(Xe=>{Ve=Re(ct,1,"btn btn-expanded-lg btn-secondary btn-horizontal-sticky",null,Ve,Xe),ct.disabled=r(A)},[()=>({"btn-loading":r(A)})]),re("click",ct,Ct(()=>ge(r(w)+1))),p(De,qe)};G(We,De=>{r(E),r(h),M(()=>r(E).length&&r(h))&&De(Ye)})}z(De=>Ie=Re(ke,1,"table",null,Ie,De),[()=>({"table-loading":r(A)})]),p(se,ke)},$$slots:{default:!0,before:(se,ye)=>{var ke=tt(),Ie=q(ke);{var Ne=ze=>{Jn(ze,{class:"dropdown dropdown-right dropdown-nowrap columns-dropdown",get trigger(){return r(H)},children:(Me,Ge)=>{var _e=sN(),Oe=y(q(_e),2);bt(Oe,1,()=>r(V),Fe=>Fe.id+Fe.name,(Fe,at)=>{Pe(Fe,{class:"form-field form-field-sm form-field-toggle m-0 p-5",children:Ce,$$slots:{default:(je,nt)=>{const We=ie(()=>nt.uniqueId);var Ye=aN(),De=q(Ye),qe=y(De,2),Ke=T(qe);z(ct=>{W(De,"id",r(We)),Ur(De,ct),W(qe,"for",r(We)),Te(Ke,(r(at),M(()=>r(at).name)))},[()=>(r(j),r(at),M(()=>!r(j).includes(r(at).id)))]),re("change",De,ct=>{ct.target.checked?F.removeByValue(r(j),r(at).id):F.pushUnique(r(j),r(at).id),_(j,r(j))}),p(je,Ye)}}})}),p(Me,_e)},$$slots:{default:!0}})};G(Ie,ze=>{r(H)&&ze(Ne)})}p(se,ke)}},$$legacy:!0}),se=>_($,se),()=>r($));var me=y(ue,2);{var ae=se=>{var ye=oN(),ke=T(ye),Ie=y(T(ke)),Ne=T(Ie),ze=y(Ie),Me=y(ke,2);let Ge;var _e=y(Me,4);let Oe;z((Fe,at)=>{Te(Ne,r(b)),Te(ze,` ${r(b)===1?"record":"records"}`),Ge=Re(Me,1,"btn btn-xs btn-transparent btn-outline p-l-5 p-r-5",null,Ge,Fe),Oe=Re(_e,1,"btn btn-sm btn-transparent btn-danger",null,Oe,at)},[()=>({"btn-disabled":r(L)}),()=>({"btn-loading":r(L),"btn-disabled":r(L)})]),re("click",Me,()=>ve()),re("click",_e,()=>he()),Et(3,ye,()=>Kr,()=>({duration:150,y:5})),p(se,ye)};G(me,se=>{r(b)&&se(ae)})}p(n,we),_t(e,"hasRecord",oe),_t(e,"reloadLoadedPages",de),_t(e,"load",ge);var te=Be({hasRecord:oe,reloadLoadedPages:de,load:ge});return i(),te}var uN=S('<div class="placeholder-section m-b-base"><span class="loader loader-lg"></span> <h1>Loading collections...</h1></div>'),dN=S(`<h1 class="m-b-10">You don't have any collections yet.</h1>`),fN=S('<h1 class="m-b-10">Create your first collection to add records!</h1> <button type="button" class="btn btn-expanded-lg btn-lg"><i class="ri-add-line"></i> <span class="txt">Create new collection</span></button>',1),hN=S('<div class="placeholder-section m-b-base"><div class="icon"><i class="ri-database-2-line"></i></div> <!></div>'),vN=S('<button type="button" aria-label="Edit collection" class="btn btn-transparent btn-circle"><i class="ri-settings-4-line"></i></button>'),mN=S('<button type="button" class="btn btn-expanded"><i class="ri-add-line"></i> <span class="txt">New record</span></button>'),pN=S('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Collections</div> <div class="breadcrumb-item"> </div></nav> <div class="inline-flex gap-5"><!> <!></div> <div class="btns-group"><button type="button" class="btn btn-outline"><i class="ri-code-s-slash-line"></i> <span class="txt">API Preview</span></button> <!></div></header> <!> <div class="clearfix m-b-sm"></div> <!>',1),gN=S("<!> <!>",1),bN=S("<!> <!> <!> <!> <!>",1);function yN(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(gd,"$querystring",t),s=()=>It(Hi,"$activeCollection",t),o=()=>It(Gs,"$isCollectionsLoading",t),l=()=>It(Xn,"$collections",t),c=()=>It(po,"$hideControls",t),u=P(),d=P(),f=new URLSearchParams(a());let h=P(),b=P(),v=P(),g=P(),m=P(),k=P(),x=P(f.get("filter")||""),C=P(f.get("sort")||"-@rowid"),O=P(f.get("collection")||s()?.id),$=P(0);md(r(O));async function E(J){await Tn(),s()?.type==="view"?r(g).show(J):r(v)?.show(J)}function w(){_(O,s()?.id),_(x,""),_(C,"-@rowid"),I(),D({recordId:null}),r(h)?.forceHide(),r(b)?.hide()}async function I(){if(!r(C))return;const J=F.getAllCollectionIdentifiers(s()),Q=r(C).split(",").map(oe=>oe.startsWith("+")||oe.startsWith("-")?oe.substring(1):oe);Q.filter(oe=>J.includes(oe)).length!=Q.length&&(s()?.type!="view"?_(C,"-@rowid"):J.includes("created")?_(C,"-created"):_(C,""))}function D(J={}){const Q=Object.assign({collection:s()?.id||"",filter:r(x),sort:r(C)},J);F.replaceHashQueryParams(Q)}ne(()=>a(),()=>{_(u,new URLSearchParams(a()))}),ne(()=>r(u),()=>{_(d,r(u).get("collection"))}),ne(()=>(o(),r(d),r(O),s(),Uf),()=>{!o()&&r(d)&&r(d)!=r(O)&&r(d)!=s()?.id&&r(d)!=s()?.name&&Uf(r(d))}),ne(()=>(s(),r(O)),()=>{s()?.id&&r(O)!=s().id&&r(O)!=s().name&&w()}),ne(()=>s(),()=>{s()?.id&&I()}),ne(()=>o(),()=>{!o()&&f.get("recordId")&&E(f.get("recordId"))}),ne(()=>(o(),r(C),r(x),s()),()=>{!o()&&(r(C)||r(x)||s()?.id)&&D()}),ne(()=>s(),()=>{Zn(In,s()?.name||"Collections")}),ft(),He();var A=bN(),L=q(A);{var N=J=>{Ci(J,{center:!0,children:(Q,oe)=>{var de=uN();p(Q,de)},$$slots:{default:!0}})},H=J=>{var Q=tt(),oe=q(Q);{var de=pe=>{Ci(pe,{center:!0,children:(xe,ve)=>{var Ee=hN(),ce=y(T(Ee),2);{var he=we=>{var ue=dN();p(we,ue)},be=we=>{var ue=fN(),me=y(q(ue),2);re("click",me,()=>r(h)?.show()),p(we,ue)};G(ce,we=>{c()?we(he):we(be,!1)})}p(xe,Ee)},$$slots:{default:!0}})},ge=pe=>{var xe=gN(),ve=q(xe);pP(ve,{});var Ee=y(ve,2);Ci(Ee,{class:"flex-content",children:(ce,he)=>{var be=pN(),we=q(be),ue=T(we),me=y(T(ue),2),ae=T(me),te=y(ue,2),se=T(te);{var ye=Oe=>{var Fe=vN();Qe(Fe,(at,je)=>dt?.(at,je),()=>({text:"Edit collection",position:"right"})),Rt(()=>re("click",Fe,()=>r(h)?.show(s()))),p(Oe,Fe)};G(se,Oe=>{c()||Oe(ye)})}var ke=y(se,2);Jl(ke,{$$events:{refresh:()=>{r(m)?.load(),r(k)?.reload()}}});var Ie=y(te,2),Ne=T(Ie),ze=y(Ne,2);{var Me=Oe=>{var Fe=mN();re("click",Fe,()=>r(v)?.show()),p(Oe,Fe)};G(ze,Oe=>{s(),M(()=>s().type!=="view")&&Oe(Me)})}var Ge=y(we,2);Zl(Ge,{get value(){return r(x)},get autocompleteCollection(){return s()},$$events:{submit:Oe=>_(x,Oe.detail)}});var _e=y(Ge,4);mt(cN(_e,{get collection(){return s()},get filter(){return r(x)},set filter(Oe){_(x,Oe)},get sort(){return r(C)},set sort(Oe){_(C,Oe)},$$events:{select:Oe=>{D({recordId:Oe.detail.id});let Fe=Oe.detail._partial?Oe.detail.id:Oe.detail;s().type==="view"?r(g)?.show(Fe):r(v)?.show(Fe)},delete:()=>{r(k)?.reload()},new:()=>r(v)?.show()},$$legacy:!0}),Oe=>_(m,Oe),()=>r(m)),z(()=>Te(ae,(s(),M(()=>s().name)))),re("click",Ne,()=>r(b)?.show(s())),p(ce,be)},$$slots:{default:!0,footer:(ce,he)=>{mt(jL(ce,{class:"m-r-auto txt-sm txt-hint",get collection(){return s()},get filter(){return r(x)},get totalCount(){return r($)},set totalCount(be){_($,be)},$$legacy:!0}),be=>_(k,be),()=>r(k))}}}),p(pe,xe)};G(oe,pe=>{l(),M(()=>!l().length)?pe(de):pe(ge,!1)},!0)}p(J,Q)};G(L,J=>{o(),l(),M(()=>o()&&!l().length)?J(N):J(H,!1)})}var j=y(L,2);mt(Rd(j,{$$events:{truncate:()=>{r(m)?.load(),r(k)?.reload()}},$$legacy:!0}),J=>_(h,J),()=>r(h));var V=y(j,2);mt(c$(V,{$$legacy:!0}),J=>_(b,J),()=>r(b));var U=y(V,2);mt(qd(U,{get collection(){return s()},$$events:{hide:()=>{D({recordId:null})},save:J=>{r(x)?r(k)?.reload():J.detail.isNew&&_r($),r(m)?.reloadLoadedPages()},delete:J=>{(!r(x)||r(m)?.hasRecord(J.detail.id))&&_r($,-1),r(m)?.reloadLoadedPages()}},$$legacy:!0}),J=>_(v,J),()=>r(v));var B=y(U,2);mt(iM(B,{get collection(){return s()},$$events:{hide:()=>{D({recordId:null})}},$$legacy:!0}),J=>_(g,J),()=>r(g)),p(n,A),Be(),i()}var _N=S('<div class="sidebar-title"><span class="txt">Sync</span></div> <a href="/settings/export-collections" class="sidebar-list-item"><i class="ri-uninstall-line" aria-hidden="true"></i> <span class="txt">Export collections</span></a> <a href="/settings/import-collections" class="sidebar-list-item"><i class="ri-install-line" aria-hidden="true"></i> <span class="txt">Import collections</span></a>',1),xN=S('<div class="sidebar-content"><div class="sidebar-title">System</div> <a href="/settings" class="sidebar-list-item"><i class="ri-home-gear-line" aria-hidden="true"></i> <span class="txt">Application</span></a> <a href="/settings/mail" class="sidebar-list-item"><i class="ri-send-plane-2-line" aria-hidden="true"></i> <span class="txt">Mail settings</span></a> <a href="/settings/storage" class="sidebar-list-item"><i class="ri-archive-drawer-line" aria-hidden="true"></i> <span class="txt">Files storage</span></a> <a href="/settings/backups" class="sidebar-list-item"><i class="ri-archive-line" aria-hidden="true"></i> <span class="txt">Backups</span></a> <a href="/settings/crons" class="sidebar-list-item"><i class="ri-time-line" aria-hidden="true"></i> <span class="txt">Crons</span></a> <!></div>');function Ma(n){const[e,t]=Lt(),i=()=>It(po,"$hideControls",e);Xg(n,{class:"settings-sidebar",children:(a,s)=>{var o=xN(),l=y(T(o),2);Qe(l,(v,g)=>er?.(v,g),()=>({path:"/settings"})),Qe(l,v=>ii?.(v));var c=y(l,2);Qe(c,(v,g)=>er?.(v,g),()=>({path:"/settings/mail/?.*"})),Qe(c,v=>ii?.(v));var u=y(c,2);Qe(u,(v,g)=>er?.(v,g),()=>({path:"/settings/storage/?.*"})),Qe(u,v=>ii?.(v));var d=y(u,2);Qe(d,(v,g)=>er?.(v,g),()=>({path:"/settings/backups/?.*"})),Qe(d,v=>ii?.(v));var f=y(d,2);Qe(f,(v,g)=>er?.(v,g),()=>({path:"/settings/crons/?.*"})),Qe(f,v=>ii?.(v));var h=y(f,2);{var b=v=>{var g=_N(),m=y(q(g),2);Qe(m,(x,C)=>er?.(x,C),()=>({path:"/settings/export-collections/?.*"})),Qe(m,x=>ii?.(x));var k=y(m,2);Qe(k,(x,C)=>er?.(x,C),()=>({path:"/settings/import-collections/?.*"})),Qe(k,x=>ii?.(x)),p(v,g)};G(h,v=>{i()||v(b)})}p(a,o)},$$slots:{default:!0}}),t()}var wN=S('<input type="checkbox"/> <label>Enable <small class="txt-hint">(experimental)</small></label>',1),kN=S('<label><span class="txt">Max requests in a batch</span> <i class="ri-information-line link-hint"></i></label> <input type="number" min="0" step="1"/>',1),SN=S('<label><span class="txt">Max processing time (in seconds)</span></label> <input type="number" min="0" step="1"/>',1),TN=S('<label>Max body size (in bytes)</label> <input type="number" min="0" step="1" placeholder="Default to 128MB"/>',1),$N=S('<!> <div class="grid"><div class="col-lg-4"><!></div> <div class="col-lg-4"><!></div> <div class="col-lg-4"><!></div></div>',1),IN=S('<span class="label label-success">Enabled</span>'),CN=S('<span class="label">Disabled</span>'),EN=S('<i class="ri-error-warning-fill txt-danger"></i>'),ON=S('<div class="inline-flex"><i class="ri-archive-stack-line"></i> <span class="txt">Batch API</span></div> <div class="flex-fill"></div> <!> <!>',1);function DN(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s=P(),o=P();let l=ee(e,"formSettings",12);ne(()=>a(),()=>{_(s,!F.isEmpty(a()?.batch))}),ne(()=>R(l()),()=>{_(o,!!l().batch?.enabled)}),ft(),He(),Dr(n,{single:!0,children:(c,u)=>{var d=$N(),f=q(d);Pe(f,{class:"form-field form-field-toggle m-b-sm",name:"batch.enabled",children:Ce,$$slots:{default:(C,O)=>{const $=ie(()=>O.uniqueId);var E=wN(),w=q(E),I=y(w,2);z(()=>{W(w,"id",r($)),W(I,"for",r($))}),Qt(w,()=>l().batch.enabled,D=>l(l().batch.enabled=D,!0)),p(C,E)}}});var h=y(f,2),b=T(h),v=T(b);{let C=ie(()=>r(o)?"required":"");Pe(v,{get class(){return`form-field ${r(C)??""}`},name:"batch.maxRequests",children:Ce,$$slots:{default:(O,$)=>{const E=ie(()=>$.uniqueId);var w=kN(),I=q(w),D=y(T(I),2);Qe(D,(L,N)=>dt?.(L,N),()=>({text:"Rate limiting (if enabled) also applies for the batch create/update/upsert/delete requests.",position:"right"}));var A=y(I,2);z(()=>{W(I,"for",r(E)),W(A,"id",r(E)),A.required=r(o)}),xt(A,()=>l().batch.maxRequests,L=>l(l().batch.maxRequests=L,!0)),p(O,w)}}})}var g=y(b,2),m=T(g);{let C=ie(()=>r(o)?"required":"");Pe(m,{get class(){return`form-field ${r(C)??""}`},name:"batch.timeout",children:Ce,$$slots:{default:(O,$)=>{const E=ie(()=>$.uniqueId);var w=SN(),I=q(w),D=y(I,2);z(()=>{W(I,"for",r(E)),W(D,"id",r(E)),D.required=r(o)}),xt(D,()=>l().batch.timeout,A=>l(l().batch.timeout=A,!0)),p(O,w)}}})}var k=y(g,2),x=T(k);Pe(x,{class:"form-field",name:"batch.maxBodySize",children:Ce,$$slots:{default:(C,O)=>{const $=ie(()=>O.uniqueId);var E=TN(),w=q(E),I=y(w,2);z(()=>{W(w,"for",r($)),W(I,"id",r($)),Rn(I,(R(l()),M(()=>l().batch.maxBodySize||"")))}),re("input",I,D=>l(l().batch.maxBodySize=D.target.value<<0,!0)),p(C,E)}}}),p(c,d)},$$slots:{default:!0,header:(c,u)=>{var d=ON(),f=y(q(d),4);{var h=m=>{var k=IN();p(m,k)},b=m=>{var k=CN();p(m,k)};G(f,m=>{r(o)?m(h):m(b,!1)})}var v=y(f,2);{var g=m=>{var k=EN();Qe(k,(x,C)=>dt?.(x,C),()=>({text:"Has errors",position:"left"})),Et(3,k,()=>Fn,()=>({duration:150,start:.7})),p(m,k)};G(v,m=>{r(s)&&m(g)})}p(c,d)}}}),Be(),i()}var PN=S('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),MN=S('<label>Trusted IP proxy headers</label> <!> <div class="form-field-addon"><button type="button">Clear</button></div> <div class="help-block"><p>Comma separated list of headers such as: <!></p></div>',1),AN=S('<label><span class="txt">IP priority selection</span> <i class="ri-information-line link-hint"></i></label> <!>',1),LN=S(`<div class="alert alert-info m-b-sm"><div class="content"><div class="inline-flex flex-gap-5"><span>Resolved user IP:</span> <strong> </strong> <i class="ri-information-line txt-sm link-hint"></i></div> <br/> <div class="inline-flex flex-gap-5"><span>Detected proxy header:</span> <strong> </strong></div></div></div> <div class="content m-b-sm"><p>When PocketBase is deployed on platforms like Fly or it is accessible through proxies such as
            NGINX, requests from different users will originate from the same IP address (the IP of the proxy
            connecting to your PocketBase app).</p> <p>In this case to retrieve the actual user IP (used for rate limiting, logging, etc.) you need to
            properly configure your proxy and list below the trusted headers that PocketBase could use to
            extract the user IP.</p> <p class="txt-bold">When using such proxy, to avoid spoofing it is recommended to:</p> <ul class="m-t-0 txt-bold"><li>use headers that are controlled only by the proxy and cannot be manually set by the users</li> <li>make sure that the PocketBase server can be accessed only through the proxy</li></ul> <p>You can clear the headers field if PocketBase is not deployed behind a proxy.</p></div> <div class="grid grid-sm"><div class="col-lg-9"><!></div> <div class="col-lg-3"><!></div></div>`,1),NN=S('<i class="ri-alert-line txt-sm txt-warning"></i>'),RN=S('<i class="ri-alert-line txt-sm txt-hint"></i>'),FN=S('<span class="label label-success">Enabled</span>'),qN=S('<span class="label">Disabled</span>'),zN=S('<i class="ri-error-warning-fill txt-danger"></i>'),jN=S('<div class="inline-flex"><i class="ri-route-line"></i> <span class="txt">User IP proxy headers</span> <!></div> <div class="flex-fill"></div> <!> <!>',1);function VN(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s=P(),o=P(),l=P(),c=P(),u=P(),d=["X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP"];let f=ee(e,"formSettings",12),h=ee(e,"healthData",8),b=P("");function v(m){f(f().trustedProxy.headers=[m],!0)}const g=[{label:"Use leftmost IP",value:!0},{label:"Use rightmost IP",value:!1}];ne(()=>R(f()),()=>{_(s,JSON.stringify(f()))}),ne(()=>(r(b),r(s)),()=>{r(b)!=r(s)&&_(b,r(s))}),ne(()=>(r(b),r(s)),()=>{_(o,r(b)!=r(s))}),ne(()=>a(),()=>{_(l,!F.isEmpty(a()?.trustedProxy))}),ne(()=>R(f()),()=>{_(c,!F.isEmpty(f().trustedProxy.headers))}),ne(()=>R(h()),()=>{_(u,h().possibleProxyHeader?[h().possibleProxyHeader].concat(d.filter(m=>m!=h().possibleProxyHeader)):d)}),ft(),He(),Dr(n,{single:!0,children:(m,k)=>{var x=LN(),C=q(x),O=T(C),$=T(O),E=y(T($),2),w=T(E),I=y(E,2);Qe(I,(B,J)=>dt?.(B,J),()=>`Must show your actual IP.
If not, set the correct proxy header.`);var D=y($,4),A=y(T(D),2),L=T(A),N=y(C,4),H=T(N),j=T(H);Pe(j,{class:"form-field m-b-0",name:"trustedProxy.headers",children:Ce,$$slots:{default:(B,J)=>{const Q=ie(()=>J.uniqueId);var oe=MN(),de=q(oe),ge=y(de,2);io(ge,{get id(){return r(Q)},placeholder:"Leave empty to disable",get value(){return f().trustedProxy.headers},set value(be){f(f().trustedProxy.headers=be,!0)},$$legacy:!0});var pe=y(ge,2),xe=T(pe);let ve;var Ee=y(pe,2),ce=T(Ee),he=y(T(ce));bt(he,1,()=>r(u),At,(be,we)=>{var ue=PN(),me=q(ue),ae=T(me);z(()=>Te(ae,r(we))),re("click",me,()=>v(r(we))),p(be,ue)}),z(be=>{W(de,"for",r(Q)),ve=Re(xe,1,"btn btn-sm btn-hint btn-transparent btn-clear",null,ve,be)},[()=>({hidden:F.isEmpty(f().trustedProxy.headers)})]),re("click",xe,()=>f(f().trustedProxy.headers=[],!0)),p(B,oe)}}});var V=y(H,2),U=T(V);Pe(U,{class:"form-field m-0",name:"trustedProxy.useLeftmostIP",children:Ce,$$slots:{default:(B,J)=>{const Q=ie(()=>J.uniqueId);var oe=AN(),de=q(oe),ge=y(T(de),2);Qe(ge,(xe,ve)=>dt?.(xe,ve),()=>({text:"This is in case the proxy returns more than 1 IP as header value. The rightmost IP is usually considered to be the more trustworthy but this could vary depending on the proxy.",position:"right"}));var pe=y(de,2);Nn(pe,{get items(){return g},get keyOfSelected(){return f().trustedProxy.useLeftmostIP},set keyOfSelected(xe){f(f().trustedProxy.useLeftmostIP=xe,!0)},$$legacy:!0}),z(()=>W(de,"for",r(Q))),p(B,oe)}}}),z(()=>{Te(w,(R(h()),M(()=>h().realIP||"N/A"))),Te(L,(R(h()),M(()=>h().possibleProxyHeader||"N/A")))}),p(m,x)},$$slots:{default:!0,header:(m,k)=>{var x=jN(),C=q(x),O=y(T(C),4);{var $=N=>{var H=NN();Qe(H,(j,V)=>dt?.(j,V),()=>`Detected proxy header.
It is recommend to list it as trusted.`),p(N,H)},E=N=>{var H=tt(),j=q(H);{var V=U=>{var B=RN();Qe(B,(J,Q)=>dt?.(J,Q),()=>"The configured proxy header doesn't match with the detected one."),p(U,B)};G(j,U=>{r(c),r(o),R(f()),R(h()),M(()=>r(c)&&!r(o)&&!f().trustedProxy.headers.includes(h().possibleProxyHeader))&&U(V)},!0)}p(N,H)};G(O,N=>{r(c),R(h()),M(()=>!r(c)&&h().possibleProxyHeader)?N($):N(E,!1)})}var w=y(C,4);{var I=N=>{var H=FN();p(N,H)},D=N=>{var H=qN();p(N,H)};G(w,N=>{r(c)?N(I):N(D,!1)})}var A=y(w,2);{var L=N=>{var H=zN();Qe(H,(j,V)=>dt?.(j,V),()=>({text:"Has errors",position:"left"})),Et(3,H,()=>Fn,()=>({duration:150,start:.7})),p(N,H)};G(A,N=>{r(l)&&N(L)})}p(m,x)}}}),Be(),i()}var UN=S("<option> </option>"),BN=S("<input/> <datalist></datalist>",1);function HN(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","options"]);Ue(e,!1);let a=ee(e,"value",12,""),s=ee(e,"options",24,()=>[]);const o="list_"+F.randomString(5);He();var l=BN(),c=q(l);is(c,()=>({type:(R(i),M(()=>i.type||"text")),list:o,value:a(),...i}));var u=y(c,2);bt(u,5,s,At,(d,f)=>{var h=UN(),b=T(h),v={};z(()=>{Te(b,(r(f),M(()=>r(f).label||""))),v!==(v=(r(f),M(()=>r(f).value)))&&(h.value=(h.__value=(r(f),M(()=>r(f).value)))??"")}),p(d,h)}),z(()=>W(u,"id",o)),re("input",c,d=>{a(d.target.value)}),p(n,l),Be()}var WN=S('<input type="checkbox"/> <label>Enable <small class="txt-hint">(experimental)</small></label>',1),YN=S('<input type="number" required placeholder="Max requests*" min="1" step="1"/>'),KN=S('<input type="number" required placeholder="Interval*" min="1" step="1"/>'),ZN=S('<tr class="rate-limit-row"><td class="col-label"><!></td><td class="col-requests"><!></td><td class="col-duration"><!></td><td class="col-audience"><!></td><td class="col-action"><button type="button" title="Remove rule" aria-label="Remove rule" class="btn btn-xs btn-circle btn-hint btn-transparent"><i class="ri-close-line"></i></button></td></tr>'),JN=S('<table class="rate-limit-table"><thead><tr><th class="col-label">Rate limit label</th><th class="col-requests">Max requests<br/><small>(per IP)</small></th><th class="col-duration">Interval<br/><small>(in seconds)</small></th><th class="col-audience">Targeted users</th><th></th></tr></thead><tbody></tbody></table>'),GN=S('<!> <!> <div class="flex m-t-sm"><button type="button"><i class="ri-add-line"></i> <span class="txt">Add rate limit rule</span></button> <button type="button" class="txt-nowrap txt-sm link-hint"><em>Learn more about the rate limit rules</em></button></div>',1),XN=S('<i class="ri-error-warning-fill txt-danger"></i>'),QN=S('<span class="label label-success">Enabled</span>'),eR=S('<span class="label">Disabled</span>'),tR=S('<div class="inline-flex"><i class="ri-pulse-fill"></i> <span class="txt">Rate limiting</span></div> <div class="flex-fill"></div> <!> <!>',1),nR=S('<em class="txt-hint"> </em>'),iR=S('<li class="m-0"> <!></li>'),rR=S(`<p>The rate limit rules are resolved in the following order (stops on the first match):</p> <ol><li>exact tag (e.g. <code>users:create</code>)</li> <li>wildcard tag (e.g. <code>*:create</code>)</li> <li>METHOD + exact path (e.g. <code>POST /a/b</code>)</li> <li>METHOD + prefix path (e.g. <code>POST /a/b<strong>/</strong></code>)</li> <li>exact path (e.g. <code>/a/b</code>)</li> <li>prefix path (e.g. <code>/a/b<strong>/</strong></code>)</li></ol> <p>In case of multiple rules with the same label but different target user audience (e.g. "guest" vs
        "auth"), only the matching audience rule is taken in consideration.</p> <hr class="m-t-xs m-b-xs"/> <p>The rate limit label could be in one of the following formats:</p> <ul><li class="m-b-sm"><code>[METHOD ]/my/path</code> - full exact route match ( <strong>must be without trailing slash</strong>; "METHOD" is optional). <br/> For example: <ul class="m-0"><li class="m-0"><code>/hello</code> - matches <code>GET /hello</code>, <code>POST /hello</code>, etc.</li> <li class="m-0"><code>POST /hello</code> - matches only <code>POST /hello</code></li></ul></li> <li class="m-b-sm"><code>[METHOD ]/my/prefix<strong>/</strong></code> - path prefix ( <strong>must end with trailing slash;</strong> "METHOD" is optional). For example: <ul class="m-0"><li class="m-0"><code>/hello/</code> - matches <code>GET /hello</code>, <code>POST /hello/a/b/c</code>, etc.</li> <li class="m-0"><code>POST /hello/</code> - matches <code>POST /hello</code>, <code>POST /hello/a/b/c</code>, etc.</li></ul></li> <li><code>collectionName:predefinedTag</code> - targets a specific action of a single collection. To
            apply the rule for all collections you can use the <code>*</code> wildcard. For example: <code>posts:create</code>, <code>users:listAuthMethods</code>, <code>*:auth</code>. <br/> The predifined collection tags are (<em>there should be autocomplete once you start typing</em>): <ul></ul></li></ul>`,1),aR=S('<h4 class="center txt-break">Rate limit label format</h4>'),sR=S('<button type="button" class="btn btn-transparent">Close</button>'),oR=S("<!> <!>",1);function lR(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(jn,"$errors",t),s=()=>It(Xn,"$collections",t),o=P();let l=ee(e,"formSettings",12);const c=[{value:"",label:"All"},{value:"@guest",label:"Guest only"},{value:"@auth",label:"Auth only"}],u=[{value:"*:list"},{value:"*:view"},{value:"*:create"},{value:"*:update"},{value:"*:delete"},{value:"*:file",description:"targets the files download endpoint"},{value:"*:listAuthMethods"},{value:"*:authRefresh"},{value:"*:auth",description:"targets all auth methods"},{value:"*:authWithPassword"},{value:"*:authWithOAuth2"},{value:"*:authWithOTP"},{value:"*:requestOTP"},{value:"*:requestPasswordReset"},{value:"*:confirmPasswordReset"},{value:"*:requestVerification"},{value:"*:confirmVerification"},{value:"*:requestEmailChange"},{value:"*:confirmEmailChange"}];let d=P(u),f=P();h();async function h(){await md(),_(d,[]);for(let x of s())x.system||(r(d).push({value:x.name+":list"}),r(d).push({value:x.name+":view"}),x.type!="view"&&(r(d).push({value:x.name+":create"}),r(d).push({value:x.name+":update"}),r(d).push({value:x.name+":delete"})),x.type=="auth"&&(r(d).push({value:x.name+":listAuthMethods"}),r(d).push({value:x.name+":authRefresh"}),r(d).push({value:x.name+":auth"}),r(d).push({value:x.name+":authWithPassword"}),r(d).push({value:x.name+":authWithOAuth2"}),r(d).push({value:x.name+":authWithOTP"}),r(d).push({value:x.name+":requestOTP"}),r(d).push({value:x.name+":requestPasswordReset"}),r(d).push({value:x.name+":confirmPasswordReset"}),r(d).push({value:x.name+":requestVerification"}),r(d).push({value:x.name+":confirmVerification"}),r(d).push({value:x.name+":requestEmailChange"}),r(d).push({value:x.name+":confirmEmailChange"})),x.fields.find(C=>C.type=="file")&&r(d).push({value:x.name+":file"}));_(d,r(d).concat(u))}function b(){rn({}),Array.isArray(l().rateLimits.rules)||l(l().rateLimits.rules=[],!0),l().rateLimits.rules.push({label:"",maxRequests:300,duration:10,audience:""}),l(l().rateLimits.rules=l().rateLimits.rules,!0),l().rateLimits.rules.length==1&&l(l().rateLimits.enabled=!0,!0)}function v(x){rn({}),l().rateLimits.rules.splice(x,1),l(l().rateLimits.rules=l().rateLimits.rules,!0),l().rateLimits.rules.length||l(l().rateLimits.enabled=!1,!0)}ne(()=>a(),()=>{_(o,!F.isEmpty(a()?.rateLimits))}),ft(),He();var g=oR(),m=q(g);Dr(m,{single:!0,children:(x,C)=>{var O=GN(),$=q(O);Pe($,{class:"form-field form-field-toggle m-b-xs",name:"rateLimits.enabled",children:Ce,$$slots:{default:(N,H)=>{const j=ie(()=>H.uniqueId);var V=WN(),U=q(V),B=y(U,2);z(()=>{W(U,"id",r(j)),W(B,"for",r(j))}),Qt(U,()=>l().rateLimits.enabled,J=>l(l().rateLimits.enabled=J,!0)),p(N,V)}}});var E=y($,2);{var w=N=>{var H=JN(),j=y(T(H));bt(j,5,()=>(R(l()),M(()=>l().rateLimits.rules||[])),At,(V,U,B)=>{var J=ZN(),Q=T(J),oe=T(Q);Pe(oe,{class:"form-field",name:"rateLimits.rules."+B+".label",inlineError:!0,children:(be,we)=>{HN(be,{required:!0,placeholder:"tag (users:create) or path (/api/)",get options(){return r(d)},get value(){return r(U).label},set value(ue){r(U).label=ue,fa(()=>l())},$$legacy:!0})},$$slots:{default:!0}});var de=y(Q),ge=T(de);Pe(ge,{class:"form-field",name:"rateLimits.rules."+B+".maxRequests",inlineError:!0,children:(be,we)=>{var ue=YN();xt(ue,()=>r(U).maxRequests,me=>(r(U).maxRequests=me,fa(()=>l()))),p(be,ue)},$$slots:{default:!0}});var pe=y(de),xe=T(pe);Pe(xe,{class:"form-field",name:"rateLimits.rules."+B+".duration",inlineError:!0,children:(be,we)=>{var ue=KN();xt(ue,()=>r(U).duration,me=>(r(U).duration=me,fa(()=>l()))),p(be,ue)},$$slots:{default:!0}});var ve=y(pe),Ee=T(ve);Pe(Ee,{class:"form-field",name:"rateLimits.rules."+B+".audience",inlineError:!0,children:(be,we)=>{Nn(be,{get items(){return c},get keyOfSelected(){return r(U).audience},set keyOfSelected(ue){r(U).audience=ue,fa(()=>l())},$$events:{change:()=>{Gn("rateLimits.rules."+B)}},$$legacy:!0})},$$slots:{default:!0}});var ce=y(ve),he=T(ce);re("click",he,()=>v(B)),p(V,J)}),p(N,H)};G(E,N=>{R(F),R(l()),M(()=>!F.isEmpty(l().rateLimits.rules))&&N(w)})}var I=y(E,2),D=T(I);let A;var L=y(D,2);z(N=>A=Re(D,1,"btn btn-sm btn-secondary m-r-auto",null,A,N),[()=>({"btn-danger":a()?.rateLimits?.rules?.message})]),re("click",D,()=>b()),re("click",L,()=>r(f)?.show()),p(x,O)},$$slots:{default:!0,header:(x,C)=>{var O=tR(),$=y(q(O),4);{var E=A=>{var L=XN();Qe(L,(N,H)=>dt?.(N,H),()=>({text:"Has errors",position:"left"})),Et(3,L,()=>Fn,()=>({duration:150,start:.7})),p(A,L)};G($,A=>{r(o)&&A(E)})}var w=y($,2);{var I=A=>{var L=QN();p(A,L)},D=A=>{var L=eR();p(A,L)};G(w,A=>{R(l()),M(()=>l().rateLimits.enabled)?A(I):A(D,!1)})}p(x,O)}}});var k=y(m,2);mt(pn(k,{children:(x,C)=>{var O=rR(),$=y(q(O),10),E=y(T($),4),w=y(T(E),14);bt(w,5,()=>u,At,(I,D)=>{var A=iR(),L=T(A),N=y(L);{var H=j=>{var V=nR(),U=T(V);z(()=>Te(U,`(${r(D),M(()=>r(D).description)??""})`)),p(j,V)};G(N,j=>{r(D),M(()=>r(D).description)&&j(H)})}z(j=>Te(L,`${j??""} `),[()=>(r(D),M(()=>r(D).value.replace("*:",":")))]),p(I,A)}),p(x,O)},$$slots:{default:!0,header:(x,C)=>{var O=aR();p(x,O)},footer:(x,C)=>{var O=sR();re("click",O,()=>r(f)?.hide()),p(x,O)}},$$legacy:!0}),x=>_(f,x),()=>r(f)),p(n,g),Be(),i()}var cR=S('<div class="loader"></div>'),uR=S('<label>Application name</label> <input type="text" required/>',1),dR=S('<label>Application URL</label> <input type="text" required/>',1),fR=S('<input type="checkbox"/> <label><span class="txt">Hide collection create and edit controls</span> <i class="ri-information-line link-hint"></i></label>',1),hR=S('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Cancel</span></button>'),vR=S('<div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"><div class="accordions"><!> <!> <!></div></div> <div class="col-lg-12"><!></div></div> <div class="flex m-t-base"><div class="flex-fill"></div> <!> <button type="submit"><span class="txt">Save changes</span></button></div>',1),mR=S('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item">Application</div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><!></form></div>',1),pR=S("<!> <!>",1);function gR(n,e){Ue(e,!1);const[t,i]=Lt(),a=P();Zn(In,"Application settings");let s=P({}),o=P({}),l=P(!1),c=P(!1),u=P(""),d=P({});h();async function f(){try{_(d,(await Le.health.check()||{})?.data||{})}catch(O){console.warn("Health check failed:",O)}}async function h(){_(l,!0);try{const O=await Le.settings.getAll()||{};v(O),await f()}catch(O){Le.error(O)}_(l,!1)}async function b(){if(!(r(c)||!r(a))){_(c,!0),ut(o,r(o).rateLimits.rules=m(r(o).rateLimits.rules));try{const O=await Le.settings.update(F.filterRedactedProps(r(o)));v(O),await f(),rn({}),vn("Successfully saved application settings.")}catch(O){Le.error(O)}_(c,!1)}}function v(O={}){Zn(_u,O?.meta?.appName),Zn(po,!!O?.meta?.hideControls),_(o,{meta:O?.meta||{},batch:O.batch||{},trustedProxy:O.trustedProxy||{headers:[]},rateLimits:O.rateLimits||{rules:[]}}),m(r(o).rateLimits.rules),_(s,JSON.parse(JSON.stringify(r(o))))}function g(){_(o,JSON.parse(JSON.stringify(r(s)||{})))}function m(O){if(!O)return;let $=[{},{}];return O.sort((E,w)=>{$[0].length=E.label.length,$[0].isTag=E.label.includes(":")||!E.label.includes("/"),$[0].isWildcardTag=$[0].isTag&&E.label.startsWith("*"),$[0].isExactTag=$[0].isTag&&!$[0].isWildcardTag,$[0].isPrefix=!$[0].isTag&&E.label.endsWith("/"),$[0].hasMethod=!$[0].isTag&&E.label.includes(" /"),$[1].length=w.label.length,$[1].isTag=w.label.includes(":")||!w.label.includes("/"),$[1].isWildcardTag=$[1].isTag&&w.label.startsWith("*"),$[1].isExactTag=$[1].isTag&&!$[1].isWildcardTag,$[1].isPrefix=!$[1].isTag&&w.label.endsWith("/"),$[1].hasMethod=!$[1].isTag&&w.label.includes(" /");for(let I of $)I.priority=0,I.isTag?(I.priority+=1e3,I.isExactTag?I.priority+=10:I.priority+=5):(I.hasMethod&&(I.priority+=10),I.isPrefix||(I.priority+=5));return $[0].isPrefix&&$[1].isPrefix&&($[0].hasMethod&&$[1].hasMethod||!$[0].hasMethod&&!$[1].hasMethod)&&($[0].length>$[1].length?$[0].priority+=1:$[0].length<$[1].length&&($[1].priority+=1)),$[0].priority>$[1].priority?-1:$[0].priority<$[1].priority?1:0}),O}ne(()=>r(s),()=>{_(u,JSON.stringify(r(s)))}),ne(()=>(r(u),r(o)),()=>{_(a,r(u)!=JSON.stringify(r(o)))}),ft(),He();var k=pR(),x=q(k);Ma(x);var C=y(x,2);Ci(C,{children:(O,$)=>{var E=mR(),w=y(q(E),2),I=T(w),D=T(I);{var A=N=>{var H=cR();p(N,H)},L=N=>{var H=vR(),j=q(H),V=T(j),U=T(V);Pe(U,{class:"form-field required",name:"meta.appName",children:Ce,$$slots:{default:(ue,me)=>{const ae=ie(()=>me.uniqueId);var te=uR(),se=q(te),ye=y(se,2);z(()=>{W(se,"for",r(ae)),W(ye,"id",r(ae))}),xt(ye,()=>r(o).meta.appName,ke=>ut(o,r(o).meta.appName=ke)),p(ue,te)}}});var B=y(V,2),J=T(B);Pe(J,{class:"form-field required",name:"meta.appURL",children:Ce,$$slots:{default:(ue,me)=>{const ae=ie(()=>me.uniqueId);var te=dR(),se=q(te),ye=y(se,2);z(()=>{W(se,"for",r(ae)),W(ye,"id",r(ae))}),xt(ye,()=>r(o).meta.appURL,ke=>ut(o,r(o).meta.appURL=ke)),p(ue,te)}}});var Q=y(B,2),oe=T(Q),de=T(oe);VN(de,{get healthData(){return r(d)},get formSettings(){return r(o)},set formSettings(ue){_(o,ue)},$$legacy:!0});var ge=y(de,2);lR(ge,{get formSettings(){return r(o)},set formSettings(ue){_(o,ue)},$$legacy:!0});var pe=y(ge,2);DN(pe,{get formSettings(){return r(o)},set formSettings(ue){_(o,ue)},$$legacy:!0});var xe=y(Q,2),ve=T(xe);Pe(ve,{class:"form-field form-field-toggle m-0",name:"meta.hideControls",children:Ce,$$slots:{default:(ue,me)=>{const ae=ie(()=>me.uniqueId);var te=fR(),se=q(te),ye=y(se,2),ke=y(T(ye),2);Qe(ke,(Ie,Ne)=>dt?.(Ie,Ne),()=>({text:"This could prevent making accidental schema changes when in production environment.",position:"right"})),z(()=>{W(se,"id",r(ae)),W(ye,"for",r(ae))}),Qt(se,()=>r(o).meta.hideControls,Ie=>ut(o,r(o).meta.hideControls=Ie)),p(ue,te)}}});var Ee=y(j,2),ce=y(T(Ee),2);{var he=ue=>{var me=hR();z(()=>me.disabled=r(c)),re("click",me,()=>g()),p(ue,me)};G(ce,ue=>{r(a)&&ue(he)})}var be=y(ce,2);let we;z(ue=>{we=Re(be,1,"btn btn-expanded",null,we,ue),be.disabled=!r(a)||r(c)},[()=>({"btn-loading":r(c)})]),re("click",be,()=>b()),p(N,H)};G(D,N=>{r(l)?N(A):N(L,!1)})}re("submit",I,Ct(b)),p(O,E)},$$slots:{default:!0}}),p(n,k),Be(),i()}var bR=S('<label>Backup name</label> <input type="text" pattern="^[a-z0-9_-]+\\.zip$"/> <em class="help-block">Must be in the format [a-z0-9_-].zip</em>',1),yR=S(`<div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content"><p>Please note that during the backup other concurrent write requests may fail since the
                database will be temporary "locked" (this usually happens only during the ZIP generation).</p> <p class="txt-bold">If you are using S3 storage for the collections file upload, you'll have to backup them
                separately since they are not locally stored and will not be included in the final backup!</p></div></div> <form autocomplete="off"><!></form>`,1),_R=S('<h4 class="center txt-break">Initialize new backup</h4>'),xR=S('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Start backup</span></button>',1);function wR(n,e){Ue(e,!1);const t=zt(),i="backup_create_"+F.randomString(5);let a=P(),s=P(""),o=P(!1),l;function c(f){rn({}),_(o,!1),_(s,f||""),r(a)?.show()}function u(){return r(a)?.hide()}async function d(){if(!r(o)){_(o,!0),clearTimeout(l),l=setTimeout(()=>{u()},1500);try{await Le.backups.create(r(s),{$cancelKey:i}),_(o,!1),u(),t("submit"),vn("Successfully generated new backup.")}catch(f){f.isAbort||Le.error(f)}clearTimeout(l),_(o,!1)}}return uo(()=>{clearTimeout(l)}),He(),mt(pn(n,{class:"backup-create-panel",beforeOpen:()=>r(o)?(Js("A backup has already been started, please wait."),!1):!0,beforeHide:()=>(r(o)&&Js("The backup was started but may take a while to complete. You can come back later.",4500),!0),popup:!0,$$events:{show(f){ot.call(this,e,f)},hide(f){ot.call(this,e,f)}},children:(f,h)=>{var b=yR(),v=y(q(b),2),g=T(v);Pe(g,{class:"form-field m-0",name:"name",children:Ce,$$slots:{default:(m,k)=>{const x=ie(()=>k.uniqueId);var C=bR(),O=q(C),$=y(O,2);W($,"placeholder","Leave empty to autogenerate"),z(()=>{W(O,"for",r(x)),W($,"id",r(x))}),xt($,()=>r(s),E=>_(s,E)),p(m,C)}}}),z(()=>W(v,"id",i)),re("submit",v,Ct(d)),p(f,b)},$$slots:{default:!0,header:(f,h)=>{var b=_R();p(f,b)},footer:(f,h)=>{var b=xR(),v=q(b),g=y(v,2);let m;z(k=>{v.disabled=r(o),W(g,"form",i),m=Re(g,1,"btn btn-expanded",null,m,k),g.disabled=r(o)},[()=>({"btn-loading":r(o)})]),re("click",v,u),p(f,b)}},$$legacy:!0}),f=>_(a,f),()=>r(a)),_t(e,"show",c),_t(e,"hide",u),Be({show:c,hide:u})}var kR=S('<label>Backup name</label> <input type="text" required/>',1),SR=S(`<div class="alert alert-danger"><div class="icon"><i class="ri-alert-line"></i></div> <div class="content"><p class="txt-bold">Please proceed with caution and use it only with trusted backups!</p> <p>Backup restore is experimental and works only on UNIX based systems.</p> <p>The restore operation will attempt to replace your existing <code>pb_data</code> with the one from
                the backup and will restart the application process.</p> <p>This means that on success all of your data (including app settings, users, superusers, etc.) will
                be replaced with the ones from the backup.</p> <p>Nothing will happen if the backup is invalid or incompatible (ex. missing <code>data.db</code> file).</p></div></div> <div class="content m-b-xs">Type the backup name <div class="label"><span class="txt"> </span> <!></div> to confirm:</div> <form autocomplete="off"><!></form>`,1),TR=S('<h4 class="popup-title txt-ellipsis svelte-1fcgldh">Restore <strong> </strong></h4>'),$R=S('<button type="button" class="btn btn-transparent">Cancel</button> <button type="submit"><span class="txt">Restore backup</span></button>',1);function IR(n,e){Ue(e,!1);const t=P(),i="backup_restore_"+F.randomString(5);let a=P(),s=P(""),o=P(""),l=P(!1),c=null;function u(h){rn({}),_(o,""),_(s,h),_(l,!1),r(a)?.show()}function d(){return r(a)?.hide()}async function f(){if(!(!r(t)||r(l))){clearTimeout(c),_(l,!0);try{await Le.backups.restore(r(s)),c=setTimeout(()=>{window.location.reload()},2e3)}catch(h){clearTimeout(c),h?.isAbort||(_(l,!1),ur(h.response?.message||h.message))}}}uo(()=>{clearTimeout(c)}),ne(()=>(r(o),r(s)),()=>{_(t,r(o)!=""&&r(s)==r(o))}),ft(),He();{let h=ie(()=>!r(l)),b=ie(()=>!r(l));mt(pn(n,{class:"backup-restore-panel",get overlayClose(){return r(h)},get escClose(){return r(b)},beforeHide:()=>!r(l),popup:!0,$$events:{show(v){ot.call(this,e,v)},hide(v){ot.call(this,e,v)}},children:(v,g)=>{var m=SR(),k=y(q(m),2),x=y(T(k)),C=T(x),O=T(C),$=y(C,2);rr($,{get value(){return r(s)}});var E=y(k,2),w=T(E);Pe(w,{class:"form-field required m-0",name:"name",children:Ce,$$slots:{default:(I,D)=>{const A=ie(()=>D.uniqueId);var L=kR(),N=q(L),H=y(N,2);z(()=>{W(N,"for",r(A)),W(H,"id",r(A))}),xt(H,()=>r(o),j=>_(o,j)),p(I,L)}}}),z(()=>{Te(O,r(s)),W(E,"id",i)}),re("submit",E,Ct(f)),p(v,m)},$$slots:{default:!0,header:(v,g)=>{var m=TR(),k=y(T(m)),x=T(k);z(()=>Te(x,r(s))),p(v,m)},footer:(v,g)=>{var m=$R(),k=q(m),x=y(k,2);let C;z(O=>{k.disabled=r(l),W(x,"form",i),C=Re(x,1,"btn btn-expanded",null,C,O),x.disabled=!r(t)||r(l)},[()=>({"btn-loading":r(l)})]),re("click",k,d),p(v,m)}},$$legacy:!0}),v=>_(a,v),()=>r(a))}return _t(e,"show",u),_t(e,"hide",d),Be({show:u,hide:d})}var CR=S('<div class="list-item list-item-loader svelte-1ulbkf5"><span class="skeleton-loader"></span></div>'),ER=S('<div class="list-item svelte-1ulbkf5"><i class="ri-folder-zip-line"></i> <div class="content"><span class="name backup-name svelte-1ulbkf5"> </span> <span class="size txt-hint txt-nowrap"> </span></div> <div class="actions nonintrusive"><button type="button" aria-label="Download"><i class="ri-download-line"></i></button> <button type="button" class="btn btn-sm btn-circle btn-hint btn-transparent" aria-label="Restore"><i class="ri-restart-line"></i></button> <button type="button" aria-label="Delete"><i class="ri-delete-bin-7-line"></i></button></div></div>'),OR=S('<div class="list-item list-item-placeholder svelte-1ulbkf5"><span class="txt">No backups yet.</span></div>'),DR=S('<i class="ri-play-circle-line"></i> <span class="txt">Initialize new backup</span>',1),PR=S('<span class="loader loader-sm"></span> <span class="txt">Backup/restore operation is in process</span>',1),MR=S('<div class="list list-compact"><div class="list-content svelte-1ulbkf5"><!></div> <div class="list-item list-item-btn"><button type="button" class="btn btn-block btn-transparent"><!></button></div></div> <!> <!>',1);function AR(n,e){Ue(e,!1);let t=P(),i=P(),a=P([]),s=P(!1),o=P({}),l=P({}),c=P(!0);u(),b();async function u(){_(s,!0);try{_(a,await Le.backups.getFullList()),r(a).sort((L,N)=>L.modified<N.modified?1:L.modified>N.modified?-1:0),_(s,!1)}catch(L){L.isAbort||(Le.error(L),_(s,!1))}}async function d(L){if(!r(o)[L]){ut(o,r(o)[L]=!0);try{const N=await Le.getSuperuserFileToken();F.download(Le.backups.getDownloadURL(N,L))}catch(N){N.isAbort||Le.error(N)}delete r(o)[L],_(o,r(o))}}function f(L){Ln(`Do you really want to delete ${L}?`,()=>h(L))}async function h(L){if(!r(l)[L]){ut(l,r(l)[L]=!0);try{await Le.backups.delete(L),F.removeByKey(r(a),"name",L),u(),vn(`Successfully deleted ${L}.`)}catch(N){N.isAbort||Le.error(N)}delete r(l)[L],_(l,r(l))}}async function b(){try{const L=await Le.health.check({$autoCancel:!1}),N=r(c);_(c,L?.data?.canBackup||!1),N!=r(c)&&r(c)&&u()}catch{}}un(()=>{let L=setInterval(()=>{b()},3e3);return()=>{clearInterval(L)}}),He();var v=MR(),g=q(v),m=T(g),k=T(m);{var x=L=>{var N=tt(),H=q(N);bt(H,1,()=>(r(a),M(()=>Array(r(a).length||1))),At,(j,V)=>{var U=CR();p(j,U)}),p(L,N)},C=L=>{var N=tt(),H=q(N);bt(H,1,()=>r(a),j=>j.key,(j,V)=>{var U=ER(),B=y(T(U),2),J=T(B),Q=T(J),oe=y(J,2),de=T(oe),ge=y(B,2),pe=T(ge);let xe;Qe(pe,(he,be)=>dt?.(he,be),()=>"Download"),Rt(()=>re("click",pe,Ct(()=>d(r(V).key))));var ve=y(pe,2);Qe(ve,(he,be)=>dt?.(he,be),()=>"Restore"),Rt(()=>re("click",ve,Ct(()=>r(i).show(r(V).key))));var Ee=y(ve,2);let ce;Qe(Ee,(he,be)=>dt?.(he,be),()=>"Delete"),Rt(()=>re("click",Ee,Ct(()=>f(r(V).key)))),z((he,be,we)=>{W(J,"title",(r(V),M(()=>r(V).key))),Te(Q,(r(V),M(()=>r(V).key))),Te(de,`(${he??""})`),xe=Re(pe,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,xe,be),pe.disabled=(r(l),r(V),r(o),M(()=>r(l)[r(V).key]||r(o)[r(V).key])),ve.disabled=(r(l),r(V),M(()=>r(l)[r(V).key])),ce=Re(Ee,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,ce,we),Ee.disabled=(r(l),r(V),M(()=>r(l)[r(V).key]))},[()=>(R(F),r(V),M(()=>F.formattedFileSize(r(V).size))),()=>({"btn-loading":r(o)[r(V).key]}),()=>({"btn-loading":r(l)[r(V).key]})]),Et(3,U,()=>mn,()=>({duration:150})),p(j,U)},j=>{var V=OR();p(j,V)}),p(L,N)};G(k,L=>{r(s)?L(x):L(C,!1)})}var O=y(m,2),$=T(O),E=T($);{var w=L=>{var N=DR();p(L,N)},I=L=>{var N=PR();p(L,N)};G(E,L=>{r(c)?L(w):L(I,!1)})}var D=y(g,2);mt(wR(D,{$$events:{submit:()=>{u()}},$$legacy:!0}),L=>_(t,L),()=>r(t));var A=y(D,2);return mt(IR(A,{$$legacy:!0}),L=>_(i,L),()=>r(i)),z(()=>$.disabled=r(s)||!r(c)),re("click",$,()=>r(t)?.show()),p(n,v),_t(e,"loadBackups",u),Be({loadBackups:u})}var LR=S('<input type="checkbox" required/> <label> </label>',1),NR=S('<label>Endpoint</label> <input type="text" required/>',1),RR=S('<label>Bucket</label> <input type="text" required/>',1),FR=S('<label>Region</label> <input type="text" required/>',1),qR=S('<label>Access key</label> <input type="text" required/>',1),zR=S("<label>Secret</label> <!>",1),jR=S('<input type="checkbox"/> <label><span class="txt">Force path-style addressing</span> <i class="ri-information-line link-hint"></i></label>',1),VR=S('<div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"><!></div> <div class="col-lg-12"></div></div>'),UR=S("<!> <!> <!>",1);function tb(n,e){Ue(e,!1);const t="s3_test_request";let i=ee(e,"originalConfig",24,()=>({})),a=ee(e,"config",28,()=>({})),s=ee(e,"configKey",8,"s3"),o=ee(e,"toggleLabel",8,"Enable S3"),l=ee(e,"testFilesystem",8,"storage"),c=ee(e,"testError",12,null),u=ee(e,"isTesting",12,!1),d=null,f=null,h=P(!1);function b(){_(h,!!i()?.accessKey)}function v($){u(!0),clearTimeout(f),f=setTimeout(()=>{g()},$)}async function g(){if(c(null),!a().enabled)return u(!1),c();Le.cancelRequest(t),clearTimeout(d),d=setTimeout(()=>{Le.cancelRequest(t),c(new Error("S3 test connection timeout.")),u(!1)},3e4),u(!0);let $;try{await Le.settings.testS3(l(),{$cancelKey:t})}catch(E){$=E}return $?.isAbort||(c($),u(!1),clearTimeout(d)),c()}un(()=>()=>{clearTimeout(d),clearTimeout(f)}),ne(()=>R(i()),()=>{i()?.enabled&&(b(),v(100))}),ne(()=>(R(a()),R(s())),()=>{a().enabled||Gn(s())}),ft(),He();var m=UR(),k=q(m);Pe(k,{class:"form-field form-field-toggle",children:Ce,$$slots:{default:($,E)=>{const w=ie(()=>E.uniqueId);var I=LR(),D=q(I),A=y(D,2),L=T(A);z(()=>{W(D,"id",r(w)),W(A,"for",r(w)),Te(L,o())}),Qt(D,()=>a().enabled,N=>a(a().enabled=N,!0)),p($,I)}}});var x=y(k,2);Gt(x,e,"default",{get isTesting(){return u()},get testError(){return c()},get enabled(){return R(a()),M(()=>a().enabled)}},null);var C=y(x,2);{var O=$=>{var E=VR(),w=T(E),I=T(w);Pe(I,{class:"form-field required",get name(){return`${s()??""}.endpoint`},children:Ce,$$slots:{default:(Q,oe)=>{const de=ie(()=>oe.uniqueId);var ge=NR(),pe=q(ge),xe=y(pe,2);z(()=>{W(pe,"for",r(de)),W(xe,"id",r(de))}),xt(xe,()=>a().endpoint,ve=>a(a().endpoint=ve,!0)),p(Q,ge)}}});var D=y(w,2),A=T(D);Pe(A,{class:"form-field required",get name(){return`${s()??""}.bucket`},children:Ce,$$slots:{default:(Q,oe)=>{const de=ie(()=>oe.uniqueId);var ge=RR(),pe=q(ge),xe=y(pe,2);z(()=>{W(pe,"for",r(de)),W(xe,"id",r(de))}),xt(xe,()=>a().bucket,ve=>a(a().bucket=ve,!0)),p(Q,ge)}}});var L=y(D,2),N=T(L);Pe(N,{class:"form-field required",get name(){return`${s()??""}.region`},children:Ce,$$slots:{default:(Q,oe)=>{const de=ie(()=>oe.uniqueId);var ge=FR(),pe=q(ge),xe=y(pe,2);z(()=>{W(pe,"for",r(de)),W(xe,"id",r(de))}),xt(xe,()=>a().region,ve=>a(a().region=ve,!0)),p(Q,ge)}}});var H=y(L,2),j=T(H);Pe(j,{class:"form-field required",get name(){return`${s()??""}.accessKey`},children:Ce,$$slots:{default:(Q,oe)=>{const de=ie(()=>oe.uniqueId);var ge=qR(),pe=q(ge),xe=y(pe,2);z(()=>{W(pe,"for",r(de)),W(xe,"id",r(de))}),xt(xe,()=>a().accessKey,ve=>a(a().accessKey=ve,!0)),p(Q,ge)}}});var V=y(H,2),U=T(V);Pe(U,{class:"form-field required",get name(){return`${s()??""}.secret`},children:Ce,$$slots:{default:(Q,oe)=>{const de=ie(()=>oe.uniqueId);var ge=zR(),pe=q(ge),xe=y(pe,2);Ld(xe,{required:!0,get id(){return r(de)},get mask(){return r(h)},set mask(ve){_(h,ve)},get value(){return a().secret},set value(ve){a(a().secret=ve,!0)},$$legacy:!0}),z(()=>W(pe,"for",r(de))),p(Q,ge)}}});var B=y(V,2),J=T(B);Pe(J,{class:"form-field",get name(){return`${s()??""}.forcePathStyle`},children:Ce,$$slots:{default:(Q,oe)=>{const de=ie(()=>oe.uniqueId);var ge=jR(),pe=q(ge),xe=y(pe,2),ve=y(T(xe),2);Qe(ve,(Ee,ce)=>dt?.(Ee,ce),()=>({text:'Forces the request to use path-style addressing, eg. "https://s3.amazonaws.com/BUCKET/KEY" instead of the default "https://BUCKET.s3.amazonaws.com/KEY".',position:"top"})),z(()=>{W(pe,"id",r(de)),W(xe,"for",r(de))}),Qt(pe,()=>a().forcePathStyle,Ee=>a(a().forcePathStyle=Ee,!0)),p(Q,ge)}}}),Et(3,E,()=>mn,()=>({duration:150})),p($,E)};G(C,$=>{R(a()),M(()=>a().enabled)&&$(O)})}p(n,m),Be()}var BR=S('<button type="button" aria-label="Upload backup"><i class="ri-upload-cloud-line"></i></button> <input type="file" accept="application/zip" class="hidden"/>',1);function HR(n,e){Ue(e,!1);const t=zt(),i="upload_backup";let a=ee(e,"class",8,""),s=P(),o=P(!1);function l(){r(s)&&ut(s,r(s).value="")}function c(v){v&&Ln(`Note that we don't perform validations for the uploaded backup files. Proceed with caution and only if you trust the source.

Do you really want to upload "${v.name}"?`,()=>{u(v)},()=>{l()})}async function u(v){if(r(o)||!v)return;_(o,!0);const g=new FormData;g.set("file",v);try{await Le.backups.upload(g,{requestKey:i}),_(o,!1),t("success"),vn("Successfully uploaded a new backup.")}catch(m){m.isAbort||(_(o,!1),m.response?.data?.file?.message?ur(m.response.data.file.message):Le.error(m))}l()}uo(()=>{Le.cancelRequest(i)}),He();var d=BR(),f=q(d);let h;Qe(f,(v,g)=>dt?.(v,g),()=>"Upload backup"),Rt(()=>re("click",f,()=>r(s)?.click()));var b=y(f,2);mt(b,v=>_(s,v),()=>r(s)),z(v=>h=Re(f,1,`btn btn-circle btn-transparent ${a()??""}`,null,h,v),[()=>({"btn-loading":r(o),"btn-disabled":r(o)})]),re("change",b,v=>{c(v?.target?.files?.[0])}),p(n,d),Be()}var WR=S('<i class="ri-arrow-up-s-line"></i>'),YR=S('<i class="ri-arrow-down-s-line"></i>'),KR=S('<input type="checkbox"/> <label>Enable auto backups</label>',1),ZR=S('<button type="button" class="dropdown-item closable"><span class="txt">Every day at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every sunday at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every Mon and Wed at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every first day of the month at 00:00h</span></button>',1),JR=S('<label>Cron expression</label> <input required type="text" class="txt-lg txt-mono" placeholder="* * * * *"/> <div class="form-field-addon"><button type="button" class="btn btn-sm btn-outline p-r-0"><span class="txt">Presets</span> <i class="ri-arrow-drop-down-fill"></i> <!></button></div> <div class="help-block"><p>Supports numeric list, steps, ranges or <span class="link-primary">macros</span>. <br/> The timezone is in UTC.</p></div>',1),GR=S('<label>Max @auto backups to keep</label> <input type="number" min="1"/>',1),XR=S('<div class="block"><div class="grid p-t-base p-b-sm"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div></div></div>'),QR=S('<span class="loader loader-sm"></span>'),eF=S('<div class="label label-sm label-warning entrance-right"><i class="ri-error-warning-line txt-warning"></i> <span class="txt">Failed to establish S3 connection</span></div>'),tF=S('<div class="label label-sm label-success entrance-right"><i class="ri-checkbox-circle-line txt-success"></i> <span class="txt">S3 connected successfully</span></div>'),nF=S('<button type="button" class="btn btn-hint btn-transparent"><span class="txt">Reset</span></button>'),iF=S('<form class="block" autocomplete="off"><!> <!> <div class="clearfix m-b-base"></div> <!> <div class="flex"><div class="flex-fill"></div> <!> <!> <button type="submit"><span class="txt">Save changes</span></button></div></form>'),rF=S('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel" autocomplete="off"><div class="flex m-b-sm flex-gap-10"><span class="txt-xl">Backup and restore your PocketBase data</span> <!> <!></div> <!> <hr/> <button type="button"><span class="txt">Backups options</span> <!></button> <!></div></div>',1),aF=S("<!> <!>",1);function sF(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(In,"$pageTitle",t),s=P();Zn(In,"Backups");let o=P(),l=P({}),c=P({}),u=P(!1),d=P(!1),f=P(""),h=P(!1),b=P(!1),v=P(!1),g=P(null);m();async function m(){_(u,!0);try{const I=await Le.settings.getAll()||{};x(I)}catch(I){Le.error(I)}_(u,!1)}async function k(){if(!(r(d)||!r(s))){_(d,!0);try{const I=await Le.settings.update(F.filterRedactedProps(r(c)));rn({}),await O(),x(I),vn("Successfully saved application settings.")}catch(I){Le.error(I)}_(d,!1)}}function x(I={}){_(c,{backups:I?.backups||{}}),_(h,r(c).backups.cron!=""),_(l,JSON.parse(JSON.stringify(r(c))))}function C(){_(c,JSON.parse(JSON.stringify(r(l)||{backups:{}}))),_(h,r(c).backups.cron!="")}async function O(){return r(o)?.loadBackups()}ne(()=>r(l),()=>{_(f,JSON.stringify(r(l)))}),ne(()=>(r(f),r(c)),()=>{_(s,r(f)!=JSON.stringify(r(c)))}),ne(()=>(r(h),r(c),Gn),()=>{!r(h)&&r(c)?.backups?.cron&&(Gn("backups.cron"),ut(c,r(c).backups.cron=""))}),ft(),He();var $=aF(),E=q($);Ma(E);var w=y(E,2);Ci(w,{children:(I,D)=>{var A=rF(),L=q(A),N=T(L),H=y(T(N),2),j=T(H),V=y(L,2),U=T(V),B=T(U),J=y(T(B),2);Jl(J,{class:"btn-sm",tooltip:"Refresh",$$events:{refresh:O}});var Q=y(J,2);HR(Q,{class:"btn-sm",$$events:{success:O}});var oe=y(B,2);mt(AR(oe,{$$legacy:!0}),he=>_(o,he),()=>r(o));var de=y(oe,4);let ge;var pe=y(T(de),2);{var xe=he=>{var be=WR();p(he,be)},ve=he=>{var be=YR();p(he,be)};G(pe,he=>{r(b)?he(xe):he(ve,!1)})}var Ee=y(de,2);{var ce=he=>{var be=iF(),we=T(be);Pe(we,{class:"form-field form-field-toggle m-t-base m-b-0",children:Ce,$$slots:{default:(Me,Ge)=>{const _e=ie(()=>Ge.uniqueId);var Oe=KR(),Fe=q(Oe),at=y(Fe,2);z(()=>{W(Fe,"id",r(_e)),W(at,"for",r(_e))}),Qt(Fe,()=>r(h),je=>_(h,je)),p(Me,Oe)}}});var ue=y(we,2);{var me=Me=>{var Ge=XR(),_e=T(Ge),Oe=T(_e),Fe=T(Oe);Pe(Fe,{class:"form-field required",name:"backups.cron",children:Ce,$$slots:{default:(nt,We)=>{const Ye=ie(()=>We.uniqueId);var De=JR(),qe=q(De),Ke=y(qe,2);Ui(Ke,(r(l),M(()=>!r(l)?.backups?.cron)));var ct=y(Ke,2),Ve=T(ct),Xe=y(T(Ve),4);Jn(Xe,{class:"dropdown dropdown-nowrap dropdown-right",children:(gt,it)=>{var $e=ZR(),vt=q($e),Y=y(vt,2),Z=y(Y,2),le=y(Z,2);re("click",vt,()=>{ut(c,r(c).backups.cron="0 0 * * *")}),re("click",Y,()=>{ut(c,r(c).backups.cron="0 0 * * 0")}),re("click",Z,()=>{ut(c,r(c).backups.cron="0 0 * * 1,3")}),re("click",le,()=>{ut(c,r(c).backups.cron="0 0 1 * *")}),p(gt,$e)},$$slots:{default:!0}});var et=y(ct,2),Je=T(et),ht=y(T(Je));Qe(ht,(gt,it)=>dt?.(gt,it),()=>`@yearly
@annually
@monthly
@weekly
@daily
@midnight
@hourly`),z(()=>{W(qe,"for",r(Ye)),W(Ke,"id",r(Ye))}),xt(Ke,()=>r(c).backups.cron,gt=>ut(c,r(c).backups.cron=gt)),p(nt,De)}}});var at=y(Oe,2),je=T(at);Pe(je,{class:"form-field required",name:"backups.cronMaxKeep",children:Ce,$$slots:{default:(nt,We)=>{const Ye=ie(()=>We.uniqueId);var De=GR(),qe=q(De),Ke=y(qe,2);z(()=>{W(qe,"for",r(Ye)),W(Ke,"id",r(Ye))}),xt(Ke,()=>r(c).backups.cronMaxKeep,ct=>ut(c,r(c).backups.cronMaxKeep=ct)),p(nt,De)}}}),Et(3,Ge,()=>mn,()=>({duration:150})),p(Me,Ge)};G(ue,Me=>{r(h)&&Me(me)})}var ae=y(ue,4);{let Me=ie(()=>(r(l),M(()=>r(l).backups?.s3)));tb(ae,{toggleLabel:"Store backups in S3 storage",testFilesystem:"backups",configKey:"backups.s3",get originalConfig(){return r(Me)},get config(){return r(c).backups.s3},set config(Ge){ut(c,r(c).backups.s3=Ge)},get isTesting(){return r(v)},set isTesting(Ge){_(v,Ge)},get testError(){return r(g)},set testError(Ge){_(g,Ge)},$$legacy:!0})}var te=y(ae,2),se=y(T(te),2);{var ye=Me=>{var Ge=tt(),_e=q(Ge);{var Oe=at=>{var je=QR();p(at,je)},Fe=at=>{var je=tt(),nt=q(je);{var We=De=>{var qe=eF();Qe(qe,(Ke,ct)=>dt?.(Ke,ct),()=>r(g).data?.message),p(De,qe)},Ye=De=>{var qe=tF();p(De,qe)};G(nt,De=>{r(g)?De(We):De(Ye,!1)},!0)}p(at,je)};G(_e,at=>{r(v)?at(Oe):at(Fe,!1)})}p(Me,Ge)};G(se,Me=>{r(c),r(s),r(d),M(()=>r(c).backups?.s3?.enabled&&!r(s)&&!r(d))&&Me(ye)})}var ke=y(se,2);{var Ie=Me=>{var Ge=nF();z(()=>Ge.disabled=!r(s)||r(d)),re("click",Ge,()=>C()),p(Me,Ge)};G(ke,Me=>{r(s)&&Me(Ie)})}var Ne=y(ke,2);let ze;z(Me=>{ze=Re(Ne,1,"btn btn-expanded",null,ze,Me),Ne.disabled=!r(s)||r(d)},[()=>({"btn-loading":r(d)})]),re("click",Ne,()=>k()),re("submit",be,Ct(k)),Et(3,be,()=>mn,()=>({duration:150})),p(he,be)};G(Ee,he=>{r(b)&&!r(u)&&he(ce)})}z(he=>{Te(j,a()),ge=Re(de,1,"btn btn-secondary",null,ge,he),de.disabled=r(u)},[()=>({"btn-loading":r(u)})]),re("click",de,()=>_(b,!r(b))),re("submit",U,Ct(k)),p(I,A)},$$slots:{default:!0}}),p(n,$),Be(),i()}var oF=S('<div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div>',1),lF=S('<div class="list-item"><div class="content"><span class="txt"> </span></div> <span class="txt-hint txt-nowrap txt-mono cron-expr m-r-xs"> </span> <div class="actions"><button type="button" aria-label="Run"><i class="ri-play-large-line"></i></button></div></div>'),cF=S('<div class="list-item list-item-placeholder"><span class="txt">No app crons found.</span></div>'),uF=S('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel" autocomplete="off"><div class="flex m-b-sm flex-gap-10"><span class="txt-xl">Registered app cron jobs</span> <!></div> <div class="list list-compact"><div class="list-content"><!></div></div> <p class="txt-hint m-t-xs">App cron jobs can be registered only programmatically with <a target="_blank" rel="noopener noreferrer">Go</a> or <a target="_blank" rel="noopener noreferrer">JavaScript</a>.</p></div></div>',1),dF=S("<!> <!>",1);function fF(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(In,"$pageTitle",t);Zn(In,"Crons");let s=P([]),o=P(!1),l=P({});c();async function c(){_(o,!0);try{_(s,await Le.crons.getFullList()),_(o,!1)}catch(b){b.isAbort||(Le.error(b),_(o,!1))}}async function u(b){ut(l,r(l)[b]=!0);try{await Le.crons.run(b),vn(`Successfully triggered ${b}.`),ut(l,r(l)[b]=!1)}catch(v){v.isAbort||(Le.error(v),ut(l,r(l)[b]=!1))}}He();var d=dF(),f=q(d);Ma(f);var h=y(f,2);Ci(h,{children:(b,v)=>{var g=uF(),m=q(g),k=T(m),x=y(T(k),2),C=T(x),O=y(m,2),$=T(O),E=T($),w=y(T(E),2);Jl(w,{class:"btn-sm",tooltip:"Refresh",$$events:{refresh:c}});var I=y(E,2),D=T(I),A=T(D);{var L=U=>{var B=oF();p(U,B)},N=U=>{var B=tt(),J=q(B);bt(J,1,()=>r(s),Q=>Q.id,(Q,oe)=>{var de=lF(),ge=T(de),pe=T(ge),xe=T(pe),ve=y(ge,2),Ee=T(ve),ce=y(ve,2),he=T(ce);let be;Qe(he,(we,ue)=>dt?.(we,ue),()=>"Run"),Rt(()=>re("click",he,Ct(()=>u(r(oe).id)))),z(we=>{Te(xe,(r(oe),M(()=>r(oe).id))),Te(Ee,(r(oe),M(()=>r(oe).expression))),be=Re(he,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,be,we),he.disabled=(r(l),r(oe),M(()=>r(l)[r(oe).id]))},[()=>({"btn-loading":r(l)[r(oe).id]})]),p(Q,de)},Q=>{var oe=cF();p(Q,oe)}),p(U,B)};G(A,U=>{r(o)?U(L):U(N,!1)})}var H=y(I,2),j=y(T(H)),V=y(j,2);z(()=>{Te(C,a()),W(j,"href",`${M(()=>"https://pocketbase.io/docs")??""}/go-jobs-scheduling/`),W(V,"href",`${M(()=>"https://pocketbase.io/docs")??""}/js-jobs-scheduling/`)}),p(b,g)},$$slots:{default:!0}}),p(n,d),Be(),i()}var hF=S('<div class="loader"></div>'),vF=S('<input type="checkbox"/> <label>Select all</label>',1),mF=S('<input type="checkbox"/> <label> </label>',1),pF=S('<div class="list-item list-item-collection"><!></div>'),gF=S(`<div class="content txt-xl m-b-base"><p>Below you'll find your current collections configuration that you could import in
                        another PocketBase environment.</p></div> <div class="export-panel"><div class="export-list"><div class="list-item list-item-section"><!></div> <!></div>  <div tabindex="0" class="export-preview"><button type="button" class="btn btn-sm btn-transparent fade copy-schema"><span class="txt">Copy</span></button> <pre class="code-wrapper"> </pre></div></div> <div class="flex m-t-base"><div class="flex-fill"></div> <button type="button" class="btn btn-expanded"><i class="ri-download-line"></i> <span class="txt">Download as JSON</span></button></div>`,1),bF=S('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel"><!></div></div>',1),yF=S("<!> <!>",1);function _F(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(In,"$pageTitle",t),s=P(),o=P(),l=P();Zn(In,"Export collections");const c="export_"+F.randomString(5);let u=P(),d=P([]),f=P({}),h=P(!1);b();async function b(){_(h,!0);try{_(d,await Le.collections.getFullList({batch:100,$cancelKey:c})),_(d,F.sortCollections(r(d)));for(let w of r(d))delete w.created,delete w.updated,delete w.oauth2?.providers;x()}catch(w){Le.error(w)}_(h,!1)}function v(){F.downloadJson(Object.values(r(f)),"pb_schema")}function g(){F.copyToClipboard(r(s)),Js("The configuration was copied to your clipboard!",3e3)}function m(){r(l)?k():x()}function k(){_(f,{})}function x(){_(f,{});for(const w of r(d))ut(f,r(f)[w.id]=w)}function C(w){r(f)[w.id]?delete r(f)[w.id]:ut(f,r(f)[w.id]=w),_(f,r(f))}ne(()=>r(f),()=>{_(s,JSON.stringify(Object.values(r(f)),null,4))}),ne(()=>r(f),()=>{_(o,Object.keys(r(f)).length)}),ne(()=>(r(d),r(o)),()=>{_(l,r(d).length&&r(o)===r(d).length)}),ft(),He();var O=yF(),$=q(O);Ma($);var E=y($,2);Ci(E,{children:(w,I)=>{var D=bF(),A=q(D),L=T(A),N=y(T(L),2),H=T(N),j=y(A,2),V=T(j),U=T(V);{var B=Q=>{var oe=hF();p(Q,oe)},J=Q=>{var oe=gF(),de=y(q(oe),2),ge=T(de),pe=T(ge),xe=T(pe);Pe(xe,{class:"form-field",children:Ce,$$slots:{default:(me,ae)=>{const te=ie(()=>ae.uniqueId);var se=vF(),ye=q(se),ke=y(ye,2);z(()=>{W(ye,"id",r(te)),ye.disabled=(r(d),M(()=>!r(d).length)),Ur(ye,r(l)),W(ke,"for",r(te))}),re("change",ye,()=>m()),p(me,se)}}});var ve=y(pe,2);bt(ve,1,()=>r(d),me=>me.id,(me,ae)=>{var te=pF(),se=T(te);Pe(se,{class:"form-field",children:Ce,$$slots:{default:(ye,ke)=>{const Ie=ie(()=>ke.uniqueId);var Ne=mF(),ze=q(Ne),Me=y(ze,2),Ge=T(Me);z(()=>{W(ze,"id",r(Ie)),Ur(ze,(r(f),r(ae),M(()=>r(f)[r(ae).id]))),W(Me,"for",r(Ie)),W(Me,"title",(r(ae),M(()=>r(ae).name))),Te(Ge,(r(ae),M(()=>r(ae).name)))}),re("change",ze,()=>C(r(ae))),p(ye,Ne)}}}),p(me,te)});var Ee=y(ge,2),ce=T(Ee),he=y(ce,2),be=T(he);mt(Ee,me=>_(u,me),()=>r(u));var we=y(de,2),ue=y(T(we),2);z(()=>{ce.disabled=!r(o),Te(be,r(s)),ue.disabled=!r(o)}),re("click",ce,()=>g()),re("keydown",Ee,me=>{if(me.ctrlKey&&me.code==="KeyA"){me.preventDefault();const ae=window.getSelection(),te=document.createRange();te.selectNodeContents(r(u)),ae.removeAllRanges(),ae.addRange(te)}}),re("click",ue,()=>v()),p(Q,oe)};G(U,Q=>{r(h)?Q(B):Q(J,!1)})}z(()=>Te(H,a())),p(w,D)},$$slots:{default:!0}}),p(n,O),Be(),i()}var xF=S('<span class="label label-success">Added</span> <strong> </strong>',1),wF=S('<span class="label label-danger">Deleted</span> <strong> </strong>',1),kF=S('<span class="label label-warning">Changed</span>'),SF=S('<strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i>',1),TF=S('<div class="inline-flex fleg-gap-5"><!> <!> <strong class="txt"> </strong></div>'),$F=S('<tr><td class="min-width svelte-qs0w8h"><span> </span></td><td><pre class="txt diff-value svelte-qs0w8h"> </pre></td><td><pre class="txt diff-value svelte-qs0w8h"> </pre></td></tr>'),IF=S('<tr class="txt-primary svelte-qs0w8h"><td class="min-width field-key-col svelte-qs0w8h"> </td><td class="changed-old-col svelte-qs0w8h"><pre class="txt"> </pre></td><td class="changed-none-col svelte-qs0w8h"></td></tr>'),CF=S('<tr class="svelte-qs0w8h"><th class="min-width svelte-qs0w8h" colspan="3"><span class="txt"> </span> <span class="label label-danger m-l-5 svelte-qs0w8h">Deleted - <small>All stored data related to <strong> </strong> will be deleted!</small></span></th></tr> <!>',1),EF=S('<span class="label label-warning m-l-5 svelte-qs0w8h">Changed</span>'),OF=S('<tr><td class="min-width field-key-col svelte-qs0w8h"> </td><td><pre class="txt"> </pre></td><td><pre class="txt"> </pre></td></tr>'),DF=S('<tr class="svelte-qs0w8h"><th class="min-width svelte-qs0w8h" colspan="3"><span class="txt"> </span> <!></th></tr> <!>',1),PF=S('<tr class="txt-primary svelte-qs0w8h"><td class="min-width field-key-col svelte-qs0w8h"> </td><td class="changed-none-col svelte-qs0w8h"></td><td class="changed-new-col svelte-qs0w8h"><pre class="txt"> </pre></td></tr>'),MF=S('<tr class="svelte-qs0w8h"><th class="min-width svelte-qs0w8h" colspan="3"><span class="txt"> </span> <span class="label label-success m-l-5 svelte-qs0w8h">Added</span></th></tr> <!>',1),AF=S('<div class="section-title"><!></div> <table class="table collections-diff-table m-b-base svelte-qs0w8h"><thead class="svelte-qs0w8h"><tr class="svelte-qs0w8h"><th class="svelte-qs0w8h">Props</th><th width="10%" class="svelte-qs0w8h">Old</th><th width="10%" class="svelte-qs0w8h">New</th></tr></thead><tbody><!><!><!><!></tbody></table>',1);function LF(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=P();let o=ee(e,"collectionA",24,()=>({})),l=ee(e,"collectionB",24,()=>({})),c=ee(e,"deleteMissing",8,!1),u=P([]),d=P([]),f=P([]),h=P([]),b=P([]);function v(){_(d,Array.isArray(l()?.fields)?l()?.fields.concat():[]),c()||_(d,r(d).concat(r(u).filter(j=>!r(d).find(V=>j.id==V.id))))}function g(j,V){j=j||[];for(let U of j)if(U.id==V)return U;return null}function m(j,V){return j===V?!1:JSON.stringify(j)!==JSON.stringify(V)}function k(j){return typeof j>"u"?"":F.isObject(j)?JSON.stringify(j,null,4):j}ne(()=>R(l()),()=>{_(t,!l()?.id&&!l()?.name)}),ne(()=>(r(t),R(o())),()=>{_(i,!r(t)&&!o()?.id)}),ne(()=>R(o()),()=>{_(u,Array.isArray(o()?.fields)?o()?.fields.concat():[])}),ne(()=>(R(o()),R(l()),R(c())),()=>{(typeof o()?.fields<"u"||typeof l()?.fields<"u"||typeof c()<"u")&&v()}),ne(()=>(r(u),r(d)),()=>{_(f,r(u).filter(j=>!r(d).find(V=>j.id==V.id)))}),ne(()=>(r(d),r(u)),()=>{_(h,r(d).filter(j=>r(u).find(V=>V.id==j.id)))}),ne(()=>(r(d),r(u)),()=>{_(b,r(d).filter(j=>!r(u).find(V=>V.id==j.id)))}),ne(()=>(R(o()),R(l()),R(c())),()=>{_(a,F.hasCollectionChanges(o(),l(),c()))}),ne(()=>(R(o()),R(l())),()=>{_(s,F.mergeUnique(Object.keys(o()||{}),Object.keys(l()||{})).filter(j=>!["fields","created","updated"].includes(j)))}),ft(),He();var x=AF(),C=q(x),O=T(C);{var $=j=>{var V=xF(),U=y(q(V),2),B=T(U);z(()=>Te(B,(R(l()),M(()=>l()?.name)))),p(j,V)},E=j=>{var V=tt(),U=q(V);{var B=Q=>{var oe=wF(),de=y(q(oe),2),ge=T(de);z(()=>Te(ge,(R(o()),M(()=>o()?.name)))),p(Q,oe)},J=Q=>{var oe=TF(),de=T(oe);{var ge=ce=>{var he=kF();p(ce,he)};G(de,ce=>{r(a)&&ce(ge)})}var pe=y(de,2);{var xe=ce=>{var he=SF(),be=q(he),we=T(be);z(()=>Te(we,(R(o()),M(()=>o().name)))),p(ce,he)};G(pe,ce=>{R(o()),R(l()),M(()=>o().name!==l().name)&&ce(xe)})}var ve=y(pe,2),Ee=T(ve);z(()=>Te(Ee,(R(l()),M(()=>l().name)))),p(Q,oe)};G(U,Q=>{R(l()),M(()=>!l()?.id)?Q(B):Q(J,!1)},!0)}p(j,V)};G(O,j=>{R(o()),M(()=>!o()?.id)?j($):j(E,!1)})}var w=y(C,2),I=y(T(w)),D=T(I);bt(D,1,()=>r(s),At,(j,V)=>{var U=$F();let B;var J=T(U),Q=T(J),oe=T(Q),de=y(J);let ge;var pe=T(de),xe=T(pe),ve=y(de);let Ee;var ce=T(ve),he=T(ce);z((be,we,ue,me,ae)=>{B=Re(U,1,"svelte-qs0w8h",null,B,be),Te(oe,r(V)),ge=Re(de,1,"svelte-qs0w8h",null,ge,we),Te(xe,ue),Ee=Re(ve,1,"svelte-qs0w8h",null,Ee,me),Te(he,ae)},[()=>({"txt-primary":m(o()?.[r(V)],l()?.[r(V)])}),()=>({"changed-old-col":!r(i)&&m(o()?.[r(V)],l()?.[r(V)]),"changed-none-col":r(i)}),()=>(R(o()),r(V),M(()=>k(o()?.[r(V)]))),()=>({"changed-new-col":!r(t)&&m(o()?.[r(V)],l()?.[r(V)]),"changed-none-col":r(t)}),()=>(R(l()),r(V),M(()=>k(l()?.[r(V)])))]),p(j,U)});var A=y(D);{var L=j=>{var V=tt(),U=q(V);bt(U,1,()=>r(f),At,(B,J)=>{var Q=CF(),oe=q(Q),de=T(oe),ge=T(de),pe=T(ge),xe=y(ge,2),ve=y(T(xe)),Ee=y(T(ve)),ce=T(Ee),he=y(oe,2);bt(he,1,()=>(r(J),M(()=>Object.entries(r(J)))),At,(be,we)=>{var ue=ga(()=>Ya(r(we),2));let me=()=>r(ue)[0],ae=()=>r(ue)[1];var te=IF(),se=T(te),ye=T(se),ke=y(se),Ie=T(ke),Ne=T(Ie);z(ze=>{Te(ye,me()),Te(Ne,ze)},[()=>(ae(),M(()=>k(ae())))]),p(be,te)}),z(()=>{Te(pe,`field: ${r(J),M(()=>r(J).name)??""}`),Te(ce,(r(J),M(()=>r(J).name)))}),p(B,Q)}),p(j,V)};G(A,j=>{(c()||r(t))&&j(L)})}var N=y(A);bt(N,1,()=>r(h),At,(j,V)=>{var U=DF(),B=q(U),J=T(B),Q=T(J),oe=T(Q),de=y(Q,2);{var ge=xe=>{var ve=EF();p(xe,ve)};G(de,xe=>{r(u),r(V),r(d),M(()=>m(g(r(u),r(V).id),g(r(d),r(V).id)))&&xe(ge)})}var pe=y(B,2);bt(pe,1,()=>(r(V),M(()=>Object.entries(r(V)))),At,(xe,ve)=>{var Ee=ga(()=>Ya(r(ve),2));let ce=()=>r(Ee)[0],he=()=>r(Ee)[1];var be=OF();let we;var ue=T(be),me=T(ue),ae=y(ue);let te;var se=T(ae),ye=T(se),ke=y(ae);let Ie;var Ne=T(ke),ze=T(Ne);z((Me,Ge,_e,Oe,Fe)=>{we=Re(be,1,"svelte-qs0w8h",null,we,Me),Te(me,ce()),te=Re(ae,1,"svelte-qs0w8h",null,te,Ge),Te(ye,_e),Ie=Re(ke,1,"svelte-qs0w8h",null,Ie,Oe),Te(ze,Fe)},[()=>({"txt-primary":m(g(r(u),r(V).id)?.[ce()],he())}),()=>({"changed-old-col":m(g(r(u),r(V).id)?.[ce()],he())}),()=>(r(u),r(V),ce(),M(()=>k(g(r(u),r(V).id)?.[ce()]))),()=>({"changed-new-col":m(g(r(u),r(V).id)?.[ce()],he())}),()=>(he(),M(()=>k(he())))]),p(xe,be)}),z(()=>Te(oe,`field: ${r(V),M(()=>r(V).name)??""}`)),p(j,U)});var H=y(N);bt(H,1,()=>r(b),At,(j,V)=>{var U=MF(),B=q(U),J=T(B),Q=T(J),oe=T(Q),de=y(B,2);bt(de,1,()=>(r(V),M(()=>Object.entries(r(V)))),At,(ge,pe)=>{var xe=ga(()=>Ya(r(pe),2));let ve=()=>r(xe)[0],Ee=()=>r(xe)[1];var ce=PF(),he=T(ce),be=T(he),we=y(he,2),ue=T(we),me=T(ue);z(ae=>{Te(be,ve()),Te(me,ae)},[()=>(Ee(),M(()=>k(Ee())))]),p(ge,ce)}),z(()=>Te(oe,`field: ${r(V),M(()=>r(V).name)??""}`)),p(j,U)}),p(n,x),Be()}var NF=S('<h4 class="center txt-break">Side-by-side diff</h4>'),RF=S('<button type="button" class="btn btn-transparent">Close</button> <button type="button"><span class="txt">Confirm and import</span></button>',1);function FF(n,e){Ue(e,!1);const t=zt();let i=P(),a=P([]),s=P([]),o=P([]),l=P(!1),c=P(!1);function u(v,g,m=!1){_(a,v),_(s,g),_(l,m),r(i)?.show()}function d(){return r(i)?.hide()}function f(){_(o,[]);for(const v of r(a)){const g=F.findByKey(r(s),"id",v.id)||null;(r(l)&&!g?.id||g?.id&&F.hasCollectionChanges(v,g,r(l)))&&r(o).push({old:v,new:g})}for(const v of r(s)){const g=F.findByKey(r(a),"id",v.id)||null;g?.id||r(o).push({old:g,new:v})}}function h(){const v=[];if(r(l))for(const g of r(a)){const m=F.findByKey(r(s),"id",g.id);if(!m)v.push(g.name+".*");else{const k=Array.isArray(g.fields)?g.fields:[];for(const x of k)F.findByKey(m.fields,"id",x.id)||v.push(`${g.name}.${x.name} (${x.id})`)}}v.length?Ln(`Do you really want to delete the following collection fields and their related records data:
- ${v.join(`
- `)}`,()=>{b()}):b()}async function b(){if(!r(c)){_(c,!0);try{await Le.collections.import(r(s),r(l)),vn("Successfully imported collections configuration."),t("submit")}catch(v){Le.error(v)}_(c,!1),d()}}ne(()=>(r(a),r(s)),()=>{Array.isArray(r(a))&&Array.isArray(r(s))&&f()}),ft(),He();{let v=ie(()=>!r(c));mt(pn(n,{class:"full-width-popup import-popup",overlayClose:!1,get escClose(){return r(v)},beforeHide:()=>!r(c),popup:!0,$$events:{show(g){ot.call(this,e,g)},hide(g){ot.call(this,e,g)}},children:(g,m)=>{var k=tt(),x=q(k);bt(x,1,()=>r(o),At,(C,O)=>{LF(C,{get collectionA(){return r(O),M(()=>r(O).old)},get collectionB(){return r(O),M(()=>r(O).new)},get deleteMissing(){return r(l)}})}),p(g,k)},$$slots:{default:!0,header:(g,m)=>{var k=NF();p(g,k)},footer:(g,m)=>{var k=RF(),x=q(k),C=y(x,2);let O;z($=>{x.disabled=r(c),O=Re(C,1,"btn btn-expanded",null,O,$),C.disabled=r(c)},[()=>({"btn-loading":r(c)})]),re("click",x,d),re("click",C,()=>h()),p(g,k)}},$$legacy:!0}),g=>_(i,g),()=>r(i))}return _t(e,"show",u),_t(e,"hide",d),Be({show:u,hide:d})}var qF=S('<div class="loader"></div>'),zF=S('<div class="help-block help-block-error">Invalid collections configuration.</div>'),jF=S('<label class="p-b-10">Collections</label> <textarea class="code" spellcheck="false" rows="15" required></textarea> <!>',1),VF=S('<input type="checkbox"/> <label>Merge with the existing collections</label>',1),UF=S('<div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content"><string>Your collections configuration is already up-to-date!</string></div></div>'),BF=S('<small class="txt-hint"> </small>'),HF=S('<div class="list-item"><span class="label label-danger list-label svelte-1jx20fl">Deleted</span> <div class="inline-flex flex-gap-5"><strong> </strong> <!></div></div>'),WF=S('<strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i>',1),YF=S('<small class="txt-hint"> </small>'),KF=S('<div class="list-item"><span class="label label-warning list-label svelte-1jx20fl">Changed</span> <div class="inline-flex flex-gap-5"><!> <strong> </strong> <!></div></div>'),ZF=S('<small class="txt-hint"> </small>'),JF=S('<div class="list-item"><span class="label label-success list-label svelte-1jx20fl">Added</span> <div class="inline-flex flex-gap-5"><strong> </strong> <!></div></div>'),GF=S('<h5 class="section-title">Detected changes</h5> <div class="list"><!> <!> <!></div>',1),XF=S(`<div class="alert alert-warning m-t-base"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content"><string>Some of the imported collections share the same name and/or fields but are
                                imported with different IDs. You can replace them in the import if you want
                                to.</string></div> <button type="button" class="btn btn-warning btn-sm btn-outline"><span class="txt">Replace with original ids</span></button></div>`),QF=S('<button type="button" class="btn btn-transparent link-hint"><span class="txt">Clear</span></button>'),eq=S('<input type="file" class="hidden" accept=".json"/> <div class="content txt-xl m-b-base"><p>Paste below the collections configuration you want to import or <button><span class="txt">Load from JSON file</span></button></p></div> <!> <!> <!> <!> <!> <!> <div class="flex m-t-base"><!> <div class="flex-fill"></div> <button type="button" class="btn btn-expanded btn-warning m-l-auto"><span class="txt">Review</span></button></div>',1),tq=S('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel"><!></div></div>',1),nq=S("<!> <!> <!>",1);function iq(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(In,"$pageTitle",t),s=P(),o=P(),l=P(),c=P(),u=P(),d=P();Zn(In,"Import collections");let f=P(),h=P(),b=P(""),v=P(!1),g=P([]),m=P([]),k=P(!0),x=P([]),C=P(!1),O=P(!1);$();async function $(){_(C,!0);try{_(m,await Le.collections.getFullList(200));for(let U of r(m))delete U.created,delete U.updated,delete U.oauth2?.providers}catch(U){Le.error(U)}_(C,!1)}function E(){if(_(x,[]),!!r(s))for(let U of r(g)){const B=F.findByKey(r(m),"id",U.id);!B?.id||!F.hasCollectionChanges(B,U,r(k))||r(x).push({new:U,old:B})}}function w(){_(g,[]);try{_(g,JSON.parse(r(b)))}catch{}Array.isArray(r(g))?_(g,F.filterDuplicatesByKey(r(g))):_(g,[]);for(let U of r(g))delete U.created,delete U.updated,U.fields=F.filterDuplicatesByKey(U.fields)}function I(){for(let U of r(g)){const B=F.findByKey(r(m),"name",U.name)||F.findByKey(r(m),"id",U.id);if(!B)continue;const J=U.id,Q=B.id;U.id=Q;const oe=Array.isArray(B.fields)?B.fields:[],de=Array.isArray(U.fields)?U.fields:[];for(const ge of de){const pe=F.findByKey(oe,"name",ge.name);pe&&pe.id&&(ge.id=pe.id)}for(let ge of r(g))if(Array.isArray(ge.fields))for(let pe of ge.fields)pe.collectionId&&pe.collectionId===J&&(pe.collectionId=Q);for(let ge=0;ge<U.indexes?.length;ge++)U.indexes[ge]=U.indexes[ge].replace(/create\s+(?:unique\s+)?\s*index\s*(?:if\s+not\s+exists\s+)?(\S*)\s+on/gim,pe=>pe.replace(J,Q))}_(b,JSON.stringify(r(g),null,4))}function D(U){_(v,!0);const B=new FileReader;B.onload=async J=>{_(v,!1),ut(f,r(f).value=""),_(b,J.target.result),await Tn(),r(g).length||(ur("Invalid collections configuration."),A())},B.onerror=J=>{console.warn(J),ur("Failed to load the imported JSON."),_(v,!1),ut(f,r(f).value="")},B.readAsText(U)}function A(){_(b,""),ut(f,r(f).value=""),rn({})}function L(){const U=r(O)?F.filterDuplicatesByKey(r(m).concat(r(g))):r(g);r(h)?.show(r(m),U,r(k))}ne(()=>(r(b),r(O)),()=>{typeof r(b)<"u"&&r(O)!==null&&w(r(b))}),ne(()=>(r(b),r(g)),()=>{_(s,!!r(b)&&r(g).length&&r(g).length===r(g).filter(U=>!!U.id&&!!U.name).length)}),ne(()=>(r(m),r(s),r(O),r(k),r(g)),()=>{_(o,r(m).filter(U=>r(s)&&!r(O)&&r(k)&&!F.findByKey(r(g),"id",U.id)))}),ne(()=>(r(g),r(s),r(m)),()=>{_(l,r(g).filter(U=>r(s)&&!F.findByKey(r(m),"id",U.id)))}),ne(()=>(r(g),r(k)),()=>{(typeof r(g)<"u"||typeof r(k)<"u")&&E()}),ne(()=>(r(b),r(o),r(l),r(x)),()=>{_(c,!!r(b)&&(r(o).length||r(l).length||r(x).length))}),ne(()=>(r(C),r(s),r(c)),()=>{_(u,!r(C)&&r(s)&&r(c))}),ne(()=>(r(g),r(m)),()=>{_(d,r(g).filter(U=>{let B=F.findByKey(r(m),"name",U.name)||F.findByKey(r(m),"id",U.id);if(!B)return!1;if(B.id!=U.id)return!0;const J=Array.isArray(B.fields)?B.fields:[],Q=Array.isArray(U.fields)?U.fields:[];for(const oe of Q){if(F.findByKey(J,"id",oe.id))continue;const ge=F.findByKey(J,"name",oe.name);if(ge&&oe.id!=ge.id)return!0}return!1}))}),ft(),He();var N=nq(),H=q(N);Ma(H);var j=y(H,2);Ci(j,{children:(U,B)=>{var J=tq(),Q=q(J),oe=T(Q),de=y(T(oe),2),ge=T(de),pe=y(Q,2),xe=T(pe),ve=T(xe);{var Ee=he=>{var be=qF();p(he,be)},ce=he=>{var be=eq(),we=q(be);mt(we,We=>_(f,We),()=>r(f));var ue=y(we,2),me=T(ue),ae=y(T(me));let te;var se=y(ue,2);{let We=ie(()=>r(s)?"":"field-error");Pe(se,{get class(){return`form-field ${r(We)??""}`},name:"collections",children:Ce,$$slots:{default:(Ye,De)=>{const qe=ie(()=>De.uniqueId);var Ke=jF(),ct=q(Ke),Ve=y(ct,2),Xe=y(Ve,2);{var et=Je=>{var ht=zF();p(Je,ht)};G(Xe,Je=>{r(b)&&!r(s)&&Je(et)})}z(()=>{W(ct,"for",r(qe)),W(Ve,"id",r(qe))}),xt(Ve,()=>r(b),Je=>_(b,Je)),p(Ye,Ke)}}})}var ye=y(se,2);{var ke=We=>{Pe(We,{class:"form-field form-field-toggle",children:Ce,$$slots:{default:(Ye,De)=>{const qe=ie(()=>De.uniqueId);var Ke=VF(),ct=q(Ke),Ve=y(ct,2);z(()=>{W(ct,"id",r(qe)),ct.disabled=!r(s),W(Ve,"for",r(qe))}),Qt(ct,()=>r(O),Xe=>_(O,Xe)),p(Ye,Ke)}}})};G(ye,We=>{r(g),M(()=>r(g).length)&&We(ke)})}var Ie=y(ye,2);G(Ie,We=>{});var Ne=y(Ie,2);{var ze=We=>{var Ye=UF();p(We,Ye)};G(Ne,We=>{r(s),r(g),r(c),M(()=>r(s)&&r(g).length&&!r(c))&&We(ze)})}var Me=y(Ne,2);{var Ge=We=>{var Ye=GF(),De=y(q(Ye),2),qe=T(De);{var Ke=Je=>{var ht=tt(),gt=q(ht);bt(gt,1,()=>r(o),it=>it.id,(it,$e)=>{var vt=HF(),Y=y(T(vt),2),Z=T(Y),le=T(Z),Se=y(Z,2);{var Ze=st=>{var wt=BF(),rt=T(wt);z(()=>Te(rt,(r($e),M(()=>r($e).id)))),p(st,wt)};G(Se,st=>{r($e),M(()=>r($e).id)&&st(Ze)})}z(()=>Te(le,(r($e),M(()=>r($e).name)))),p(it,vt)}),p(Je,ht)};G(qe,Je=>{r(o),M(()=>r(o).length)&&Je(Ke)})}var ct=y(qe,2);{var Ve=Je=>{var ht=tt(),gt=q(ht);bt(gt,1,()=>r(x),it=>it.old.id+it.new.id,(it,$e)=>{var vt=KF(),Y=y(T(vt),2),Z=T(Y);{var le=rt=>{var St=WF(),pt=q(St),Tt=T(pt);z(()=>Te(Tt,(r($e),M(()=>r($e).old.name)))),p(rt,St)};G(Z,rt=>{r($e),M(()=>r($e).old.name!==r($e).new.name)&&rt(le)})}var Se=y(Z,2),Ze=T(Se),st=y(Se,2);{var wt=rt=>{var St=YF(),pt=T(St);z(()=>Te(pt,(r($e),M(()=>r($e).new.id)))),p(rt,St)};G(st,rt=>{r($e),M(()=>r($e).new.id)&&rt(wt)})}z(()=>Te(Ze,(r($e),M(()=>r($e).new.name)))),p(it,vt)}),p(Je,ht)};G(ct,Je=>{r(x),M(()=>r(x).length)&&Je(Ve)})}var Xe=y(ct,2);{var et=Je=>{var ht=tt(),gt=q(ht);bt(gt,1,()=>r(l),it=>it.id,(it,$e)=>{var vt=JF(),Y=y(T(vt),2),Z=T(Y),le=T(Z),Se=y(Z,2);{var Ze=st=>{var wt=ZF(),rt=T(wt);z(()=>Te(rt,(r($e),M(()=>r($e).id)))),p(st,wt)};G(Se,st=>{r($e),M(()=>r($e).id)&&st(Ze)})}z(()=>Te(le,(r($e),M(()=>r($e).name)))),p(it,vt)}),p(Je,ht)};G(Xe,Je=>{r(l),M(()=>r(l).length)&&Je(et)})}p(We,Ye)};G(Me,We=>{r(s),r(g),r(c),M(()=>r(s)&&r(g).length&&r(c))&&We(Ge)})}var _e=y(Me,2);{var Oe=We=>{var Ye=XF(),De=y(T(Ye),4);re("click",De,()=>I()),p(We,Ye)};G(_e,We=>{r(d),M(()=>r(d).length)&&We(Oe)})}var Fe=y(_e,2),at=T(Fe);{var je=We=>{var Ye=QF();re("click",Ye,()=>A()),p(We,Ye)};G(at,We=>{r(b)&&We(je)})}var nt=y(at,4);z(We=>{te=Re(ae,1,"btn btn-outline btn-sm m-l-5",null,te,We),nt.disabled=!r(u)},[()=>({"btn-loading":r(v)})]),re("change",we,()=>{r(f).files.length&&D(r(f).files[0])}),re("click",ae,()=>{r(f).click()}),re("click",nt,L),p(he,be)};G(ve,he=>{r(C)?he(Ee):he(ce,!1)})}z(()=>Te(ge,a())),p(U,J)},$$slots:{default:!0}});var V=y(j,2);mt(FF(V,{$$events:{submit:()=>{A(),$()}},$$legacy:!0}),U=>_(h,U),()=>r(h)),p(n,N),Be(),i()}var rq=S('<div class="loader"></div>'),aq=S('<label>Sender name</label> <input type="text" required/>',1),sq=S('<label>Sender address</label> <input type="email" required/>',1),oq=S('<input type="checkbox" required/> <label><span class="txt">Use SMTP mail server <strong>(recommended)</strong></span> <i class="ri-information-line link-hint"></i></label>',1),lq=S('<label>SMTP server host</label> <input type="text" required/>',1),cq=S('<label>Port</label> <input type="number" required/>',1),uq=S('<label>Username</label> <input type="text"/>',1),dq=S("<label>Password</label> <!>",1),fq=S('<span class="txt">Hide more options</span> <i class="ri-arrow-up-s-line"></i>',1),hq=S('<span class="txt">Show more options</span> <i class="ri-arrow-down-s-line"></i>',1),vq=S("<label>TLS encryption</label> <!>",1),mq=S("<label>AUTH method</label> <!>",1),pq=S('<label><span class="txt">EHLO/HELO domain</span> <i class="ri-information-line link-hint"></i></label> <input type="text" placeholder="Default to localhost"/>',1),gq=S('<div class="grid"><div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"></div></div>'),bq=S('<div><div class="grid"><div class="col-lg-4"><!></div> <div class="col-lg-2"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div></div> <button type="button" class="btn btn-sm btn-secondary m-t-sm m-b-sm"><!></button> <!></div>'),yq=S('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Save changes</span></button>',1),_q=S('<button type="button" class="btn btn-expanded btn-outline"><i class="ri-mail-check-line"></i> <span class="txt">Send test email</span></button>'),xq=S('<div class="grid m-b-base"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div></div> <!> <!> <div class="flex"><div class="flex-fill"></div> <!></div>',1),wq=S('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><div class="content txt-xl m-b-base"><p>Configure common settings for sending emails.</p></div> <!></form></div>',1),kq=S("<!> <!> <!>",1);function Sq(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(In,"$pageTitle",t),s=P(),o=P(),l=[{label:"Auto (StartTLS)",value:!1},{label:"Always",value:!0}],c=[{label:"PLAIN (default)",value:"PLAIN"},{label:"LOGIN",value:"LOGIN"}];Zn(In,"Mail settings");let u=P(),d=P({}),f=P({}),h=P(!1),b=P(!1),v=P(!1),g=P(!1);m();async function m(){_(h,!0);try{const I=await Le.settings.getAll()||{};x(I)}catch(I){Le.error(I)}_(h,!1)}async function k(){if(!(r(b)||!r(o))){_(b,!0);try{const I=await Le.settings.update(F.filterRedactedProps(r(f)));x(I),rn({}),vn("Successfully saved mail settings.")}catch(I){Le.error(I)}_(b,!1)}}function x(I={}){_(f,{meta:I?.meta||{},smtp:I?.smtp||{}}),r(f).smtp.authMethod||ut(f,r(f).smtp.authMethod=c[0].value),_(d,JSON.parse(JSON.stringify(r(f)))),_(v,!!r(f).smtp.username)}function C(){_(f,JSON.parse(JSON.stringify(r(d)||{})))}ne(()=>r(d),()=>{_(s,JSON.stringify(r(d)))}),ne(()=>(r(s),r(f)),()=>{_(o,r(s)!=JSON.stringify(r(f)))}),ft(),He();var O=kq(),$=q(O);Ma($);var E=y($,2);Ci(E,{children:(I,D)=>{var A=wq(),L=q(A),N=T(L),H=y(T(N),2),j=T(H),V=y(L,2),U=T(V),B=y(T(U),2);{var J=oe=>{var de=rq();p(oe,de)},Q=oe=>{var de=xq(),ge=q(de),pe=T(ge),xe=T(pe);Pe(xe,{class:"form-field required",name:"meta.senderName",children:Ce,$$slots:{default:(te,se)=>{const ye=ie(()=>se.uniqueId);var ke=aq(),Ie=q(ke),Ne=y(Ie,2);z(()=>{W(Ie,"for",r(ye)),W(Ne,"id",r(ye))}),xt(Ne,()=>r(f).meta.senderName,ze=>ut(f,r(f).meta.senderName=ze)),p(te,ke)}}});var ve=y(pe,2),Ee=T(ve);Pe(Ee,{class:"form-field required",name:"meta.senderAddress",children:Ce,$$slots:{default:(te,se)=>{const ye=ie(()=>se.uniqueId);var ke=sq(),Ie=q(ke),Ne=y(Ie,2);z(()=>{W(Ie,"for",r(ye)),W(Ne,"id",r(ye))}),xt(Ne,()=>r(f).meta.senderAddress,ze=>ut(f,r(f).meta.senderAddress=ze)),p(te,ke)}}});var ce=y(ge,2);Pe(ce,{class:"form-field form-field-toggle m-b-sm",children:Ce,$$slots:{default:(te,se)=>{const ye=ie(()=>se.uniqueId);var ke=oq(),Ie=q(ke),Ne=y(Ie,2),ze=y(T(Ne),2);Qe(ze,(Me,Ge)=>dt?.(Me,Ge),()=>({text:'By default PocketBase uses the unix "sendmail" command for sending emails. For better emails deliverability it is recommended to use a SMTP mail server.',position:"top"})),z(()=>{W(Ie,"id",r(ye)),W(Ne,"for",r(ye))}),Qt(Ie,()=>r(f).smtp.enabled,Me=>ut(f,r(f).smtp.enabled=Me)),p(te,ke)}}});var he=y(ce,2);{var be=te=>{var se=bq(),ye=T(se),ke=T(ye),Ie=T(ke);Pe(Ie,{class:"form-field required",name:"smtp.host",children:Ce,$$slots:{default:(De,qe)=>{const Ke=ie(()=>qe.uniqueId);var ct=lq(),Ve=q(ct),Xe=y(Ve,2);z(()=>{W(Ve,"for",r(Ke)),W(Xe,"id",r(Ke))}),xt(Xe,()=>r(f).smtp.host,et=>ut(f,r(f).smtp.host=et)),p(De,ct)}}});var Ne=y(ke,2),ze=T(Ne);Pe(ze,{class:"form-field required",name:"smtp.port",children:Ce,$$slots:{default:(De,qe)=>{const Ke=ie(()=>qe.uniqueId);var ct=cq(),Ve=q(ct),Xe=y(Ve,2);z(()=>{W(Ve,"for",r(Ke)),W(Xe,"id",r(Ke))}),xt(Xe,()=>r(f).smtp.port,et=>ut(f,r(f).smtp.port=et)),p(De,ct)}}});var Me=y(Ne,2),Ge=T(Me);Pe(Ge,{class:"form-field",name:"smtp.username",children:Ce,$$slots:{default:(De,qe)=>{const Ke=ie(()=>qe.uniqueId);var ct=uq(),Ve=q(ct),Xe=y(Ve,2);z(()=>{W(Ve,"for",r(Ke)),W(Xe,"id",r(Ke))}),xt(Xe,()=>r(f).smtp.username,et=>ut(f,r(f).smtp.username=et)),p(De,ct)}}});var _e=y(Me,2),Oe=T(_e);Pe(Oe,{class:"form-field",name:"smtp.password",children:Ce,$$slots:{default:(De,qe)=>{const Ke=ie(()=>qe.uniqueId);var ct=dq(),Ve=q(ct),Xe=y(Ve,2);Ld(Xe,{get id(){return r(Ke)},get mask(){return r(v)},set mask(et){_(v,et)},get value(){return r(f).smtp.password},set value(et){ut(f,r(f).smtp.password=et)},$$legacy:!0}),z(()=>W(Ve,"for",r(Ke))),p(De,ct)}}});var Fe=y(ye,2),at=T(Fe);{var je=De=>{var qe=fq();p(De,qe)},nt=De=>{var qe=hq();p(De,qe)};G(at,De=>{r(g)?De(je):De(nt,!1)})}var We=y(Fe,2);{var Ye=De=>{var qe=gq(),Ke=T(qe),ct=T(Ke);Pe(ct,{class:"form-field",name:"smtp.tls",children:Ce,$$slots:{default:(ht,gt)=>{const it=ie(()=>gt.uniqueId);var $e=vq(),vt=q($e),Y=y(vt,2);Nn(Y,{get id(){return r(it)},get items(){return l},get keyOfSelected(){return r(f).smtp.tls},set keyOfSelected(Z){ut(f,r(f).smtp.tls=Z)},$$legacy:!0}),z(()=>W(vt,"for",r(it))),p(ht,$e)}}});var Ve=y(Ke,2),Xe=T(Ve);Pe(Xe,{class:"form-field",name:"smtp.authMethod",children:Ce,$$slots:{default:(ht,gt)=>{const it=ie(()=>gt.uniqueId);var $e=mq(),vt=q($e),Y=y(vt,2);Nn(Y,{get id(){return r(it)},get items(){return c},get keyOfSelected(){return r(f).smtp.authMethod},set keyOfSelected(Z){ut(f,r(f).smtp.authMethod=Z)},$$legacy:!0}),z(()=>W(vt,"for",r(it))),p(ht,$e)}}});var et=y(Ve,2),Je=T(et);Pe(Je,{class:"form-field",name:"smtp.localName",children:Ce,$$slots:{default:(ht,gt)=>{const it=ie(()=>gt.uniqueId);var $e=pq(),vt=q($e),Y=y(T(vt),2);Qe(Y,(le,Se)=>dt?.(le,Se),()=>({text:"Some SMTP servers, such as the Gmail SMTP-relay, requires a proper domain name in the inital EHLO/HELO exchange and will reject attempts to use localhost.",position:"top"}));var Z=y(vt,2);z(()=>{W(vt,"for",r(it)),W(Z,"id",r(it))}),xt(Z,()=>r(f).smtp.localName,le=>ut(f,r(f).smtp.localName=le)),p(ht,$e)}}}),Et(3,qe,()=>mn,()=>({duration:150})),p(De,qe)};G(We,De=>{r(g)&&De(Ye)})}re("click",Fe,Ct(()=>{_(g,!r(g))})),Et(3,se,()=>mn,()=>({duration:150})),p(te,se)};G(he,te=>{r(f),M(()=>r(f).smtp.enabled)&&te(be)})}var we=y(he,2),ue=y(T(we),2);{var me=te=>{var se=yq(),ye=q(se),ke=y(ye,2);let Ie;z(Ne=>{ye.disabled=r(b),Ie=Re(ke,1,"btn btn-expanded",null,Ie,Ne),ke.disabled=!r(o)||r(b)},[()=>({"btn-loading":r(b)})]),re("click",ye,()=>C()),re("click",ke,()=>k()),p(te,se)},ae=te=>{var se=_q();re("click",se,()=>r(u)?.show()),p(te,se)};G(ue,te=>{r(o)?te(me):te(ae,!1)})}p(oe,de)};G(B,oe=>{r(h)?oe(J):oe(Q,!1)})}z(()=>Te(j,a())),re("submit",U,Ct(()=>k())),p(I,A)},$$slots:{default:!0}});var w=y(E,2);mt(Kg(w,{$$legacy:!0}),I=>_(u,I),()=>r(u)),p(n,O),Be(),i()}var Tq=S('<div class="loader"></div>'),$q=S(`<div><div class="alert alert-warning m-0"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content">If you have existing uploaded files, you'll have to migrate them manually
                                    from the <strong> </strong> to the <strong> </strong>. <br/> There are numerous command line tools that can help you, such as: <a href="https://github.com/rclone/rclone" target="_blank" rel="noopener noreferrer" class="txt-bold">rclone</a>, <a href="https://github.com/peak/s5cmd" target="_blank" rel="noopener noreferrer" class="txt-bold">s5cmd</a>, etc.</div></div> <div class="clearfix m-t-base"></div></div>`),Iq=S('<span class="loader loader-sm"></span>'),Cq=S('<div class="label label-sm label-warning entrance-right"><i class="ri-error-warning-line txt-warning"></i> <span class="txt">Failed to establish S3 connection</span></div>'),Eq=S('<div class="label label-sm label-success entrance-right"><i class="ri-checkbox-circle-line txt-success"></i> <span class="txt">S3 connected successfully</span></div>'),Oq=S('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Reset</span></button>'),Dq=S('<!> <div class="flex"><div class="flex-fill"></div> <!> <!> <button type="submit"><span class="txt">Save changes</span></button></div>',1),Pq=S('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><div class="content txt-xl m-b-base"><p>By default PocketBase uses the local file system to store uploaded files.</p> <p>If you have limited disk space, you could optionally connect to an S3 compatible storage.</p></div> <!></form></div>',1),Mq=S("<!> <!>",1);function Aq(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(In,"$pageTitle",t),s=P(),o=P();Zn(In,"Files storage");const l="s3_test_request";let c=P({}),u=P({}),d=P(!1),f=P(!1),h=P(!1),b=P(null);v();async function v(){_(d,!0);try{const $=await Le.settings.getAll()||{};m($)}catch($){Le.error($)}_(d,!1)}async function g(){if(!(r(f)||!r(o))){_(f,!0);try{Le.cancelRequest(l);const $=await Le.settings.update(F.filterRedactedProps(r(u)));rn({}),await m($),Fs(),vn("Successfully saved storage settings.")}catch($){Le.error($)}_(f,!1)}}async function m($={}){_(u,{s3:$?.s3||{}}),_(c,JSON.parse(JSON.stringify(r(u))))}async function k(){_(u,JSON.parse(JSON.stringify(r(c)||{})))}ne(()=>r(c),()=>{_(s,JSON.stringify(r(c)))}),ne(()=>(r(s),r(u)),()=>{_(o,r(s)!=JSON.stringify(r(u)))}),ft(),He();var x=Mq(),C=q(x);Ma(C);var O=y(C,2);Ci(O,{children:($,E)=>{var w=Pq(),I=q(w),D=T(I),A=y(T(D),2),L=T(A),N=y(I,2),H=T(N),j=y(T(H),2);{var V=B=>{var J=Tq();p(B,J)},U=B=>{var J=Dq(),Q=q(J);tb(Q,{toggleLabel:"Use S3 storage",get originalConfig(){return r(c),M(()=>r(c).s3)},get config(){return r(u).s3},set config(ce){ut(u,r(u).s3=ce)},get isTesting(){return r(h)},set isTesting(ce){_(h,ce)},get testError(){return r(b)},set testError(ce){_(b,ce)},children:(ce,he)=>{var be=tt(),we=q(be);{var ue=me=>{var ae=$q(),te=T(ae),se=y(T(te),2),ye=y(T(se)),ke=T(ye),Ie=y(ye,2),Ne=T(Ie);z(()=>{Te(ke,(r(c),M(()=>r(c).s3?.enabled?"S3 storage":"local file system"))),Te(Ne,(r(u),M(()=>r(u).s3.enabled?"S3 storage":"local file system")))}),Et(3,ae,()=>mn,()=>({duration:150})),p(me,ae)};G(we,me=>{r(c),r(u),M(()=>r(c).s3?.enabled!=r(u).s3.enabled)&&me(ue)})}p(ce,be)},$$slots:{default:!0},$$legacy:!0});var oe=y(Q,2),de=y(T(oe),2);{var ge=ce=>{var he=tt(),be=q(he);{var we=me=>{var ae=Iq();p(me,ae)},ue=me=>{var ae=tt(),te=q(ae);{var se=ke=>{var Ie=Cq();Qe(Ie,(Ne,ze)=>dt?.(Ne,ze),()=>r(b).data?.message),p(ke,Ie)},ye=ke=>{var Ie=Eq();p(ke,Ie)};G(te,ke=>{r(b)?ke(se):ke(ye,!1)},!0)}p(me,ae)};G(be,me=>{r(h)?me(we):me(ue,!1)})}p(ce,he)};G(de,ce=>{r(u),r(o),r(f),M(()=>r(u).s3?.enabled&&!r(o)&&!r(f))&&ce(ge)})}var pe=y(de,2);{var xe=ce=>{var he=Oq();z(()=>he.disabled=r(f)),re("click",he,()=>k()),p(ce,he)};G(pe,ce=>{r(o)&&ce(xe)})}var ve=y(pe,2);let Ee;z(ce=>{Ee=Re(ve,1,"btn btn-expanded",null,Ee,ce),ve.disabled=!r(o)||r(f)},[()=>({"btn-loading":r(f)})]),re("click",ve,()=>g()),p(B,J)};G(j,B=>{r(d)?B(V):B(U,!1)})}z(()=>Te(L,a())),re("submit",H,Ct(()=>g())),p($,w)},$$slots:{default:!0}}),p(n,x),Be(),i()}var Lq=S('<div class="block txt-center m-b-lg"><figure class="logo"><img alt="PocketBase logo" width="40" height="40"/> <span class="txt">Pocket<strong>Base</strong></span></figure></div> <div class="clearfix"></div>',1),Nq=S('<div class="wrapper wrapper-sm m-b-xl panel-wrapper svelte-lxxzfu"><!> <!></div>');function Rq(n,e){Ue(e,!1);let t=ee(e,"nobranding",8,!1);He(),Ci(n,{class:"full-page",center:!0,children:(i,a)=>{var s=Nq(),o=T(s);{var l=u=>{var d=Lq(),f=q(d),h=T(f),b=T(h);z(()=>W(b,"src",`${M(()=>"./")??""}images/logo.svg`)),p(u,d)};G(o,u=>{t()||u(l)})}var c=y(o,2);Gt(c,e,"default",{},null),p(i,s)},$$slots:{default:!0}}),Be()}var Fq=S('<div class="block txt-center"><span class="loader"></span></div>'),qq=S("<label> </label> <input required/>",1),zq=S('<label>Password</label> <input type="password" required/> <div class="help-block"><a href="/request-password-reset" class="link-hint">Forgotten password?</a></div>',1),jq=S('<form class="block"><!> <!> <button type="submit"><span class="txt"> </span> <i class="ri-arrow-right-line"></i></button></form>'),Vq=S('<label>Email</label> <input type="email" required/>',1),Uq=S('<form class="block"><!> <button type="submit"><i class="ri-mail-send-line"></i> <span class="txt">Send OTP</span></button></form>'),Bq=S(`<div class="content txt-center m-b-sm"><p>Check your <strong> </strong> inbox and enter in the input below the received
                        One-time password (OTP).</p></div>`),Hq=S('<label>Id</label> <input type="text" required/>',1),Wq=S('<label>One-time password</label> <input type="password" required/>',1),Yq=S('<!> <form class="block"><!> <!> <button type="submit"><span class="txt">Login</span> <i class="ri-arrow-right-line"></i></button></form> <div class="content txt-center m-t-sm"><button type="button" class="link-hint">Request another OTP</button></div>',1),Kq=S('<div class="content txt-center m-b-base"><h4>Superuser login <!></h4></div> <!>',1);function Zq(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(gd,"$querystring",t),s=new URLSearchParams(a());let o=P(s.get("demoEmail")||""),l=P(s.get("demoPassword")||""),c=P({}),u=P(1),d=P(1),f=P(!1),h=P(!1),b=P(!1),v=P(!1),g=P(""),m=P(""),k=P(""),x=P(""),C=P("");O();async function O(){if(!r(v)){_(v,!0);try{_(c,await Le.collection("_superusers").listAuthMethods())}catch(I){Le.error(I)}_(v,!1)}}async function $(){if(!r(f)){_(f,!0);try{await Le.collection("_superusers").authWithPassword(r(o),r(l)),Fs(),rn({}),as("/")}catch(I){I.status==401?(_(g,I.response.mfaId),r(c)?.password?.identityFields?.length==1&&r(c).password.identityFields[0]=="email"?(_(x,r(o)),await E()):/^[^@\s]+@[^@\s]+$/.test(r(o))&&_(x,r(o))):I.status!=400?Le.error(I):ur("Invalid login credentials.")}_(f,!1)}}async function E(){if(!r(h)){_(h,!0);try{const I=await Le.collection("_superusers").requestOTP(r(x));_(m,I.otpId),_(k,r(m)),Fs(),rn({})}catch(I){I.status==429&&_(m,r(k)),Le.error(I)}_(h,!1)}}async function w(){if(!r(b)){_(b,!0);try{await Le.collection("_superusers").authWithOTP(r(m)||r(k),r(C),{mfaId:r(g)}),Fs(),rn({}),as("/")}catch(I){Le.error(I)}_(b,!1)}}ne(()=>(r(d),r(u),r(c),r(g),r(m)),()=>{_(d,1),_(u,1),r(c)?.mfa?.enabled&&_r(d),r(c)?.otp?.enabled&&_r(d),r(g)!=""&&_r(u),r(m)!=""&&_r(u)}),ft(),He(),Rq(n,{children:(I,D)=>{var A=Kq(),L=q(A),N=T(L),H=y(T(N));{var j=J=>{var Q=or();z(()=>Te(Q,`(${r(u)??""}/${r(d)??""})`)),p(J,Q)};G(H,J=>{r(d)>1&&J(j)})}var V=y(L,2);{var U=J=>{var Q=Fq();p(J,Q)},B=J=>{var Q=tt(),oe=q(Q);{var de=pe=>{var xe=jq(),ve=T(xe);Pe(ve,{class:"form-field required",name:"identity",children:Ce,$$slots:{default:(ue,me)=>{const ae=ie(()=>me.uniqueId);var te=qq(),se=q(te),ye=T(se),ke=y(se,2);Ui(ke,!0),z(Ie=>{W(se,"for",r(ae)),Te(ye,Ie),W(ke,"id",r(ae)),W(ke,"type",(r(c),M(()=>r(c).password.identityFields.length==1&&r(c).password.identityFields[0]=="email"?"email":"text"))),Rn(ke,r(o))},[()=>(R(F),r(c),M(()=>F.sentenize(r(c).password.identityFields.join(" or "),!1)))]),re("input",ke,Ie=>{_(o,Ie.target.value)}),p(ue,te)}}});var Ee=y(ve,2);Pe(Ee,{class:"form-field required",name:"password",children:Ce,$$slots:{default:(ue,me)=>{const ae=ie(()=>me.uniqueId);var te=zq(),se=q(te),ye=y(se,2),ke=y(ye,2),Ie=T(ke);Qe(Ie,Ne=>ii?.(Ne)),z(()=>{W(se,"for",r(ae)),W(ye,"id",r(ae))}),xt(ye,()=>r(l),Ne=>_(l,Ne)),p(ue,te)}}});var ce=y(Ee,2);let he;var be=T(ce),we=T(be);z(ue=>{he=Re(ce,1,"btn btn-lg btn-block btn-next",null,he,ue),Te(we,r(d)>1?"Next":"Login")},[()=>({"btn-disabled":r(f),"btn-loading":r(f)})]),re("submit",xe,Ct($)),p(pe,xe)},ge=pe=>{var xe=tt(),ve=q(xe);{var Ee=ce=>{var he=tt(),be=q(he);{var we=me=>{var ae=Uq(),te=T(ae);Pe(te,{class:"form-field required",name:"email",children:Ce,$$slots:{default:(ke,Ie)=>{const Ne=ie(()=>Ie.uniqueId);var ze=Vq(),Me=q(ze),Ge=y(Me,2);z(()=>{W(Me,"for",r(Ne)),W(Ge,"id",r(Ne))}),xt(Ge,()=>r(x),_e=>_(x,_e)),p(ke,ze)}}});var se=y(te,2);let ye;z(ke=>ye=Re(se,1,"btn btn-lg btn-block btn-next",null,ye,ke),[()=>({"btn-disabled":r(h),"btn-loading":r(h)})]),re("submit",ae,Ct(E)),p(me,ae)},ue=me=>{var ae=Yq(),te=q(ae);{var se=_e=>{var Oe=Bq(),Fe=T(Oe),at=y(T(Fe)),je=T(at);z(()=>Te(je,r(x))),p(_e,Oe)};G(te,_e=>{r(x)&&_e(se)})}var ye=y(te,2),ke=T(ye);Pe(ke,{class:"form-field required",name:"otpId",children:Ce,$$slots:{default:(_e,Oe)=>{const Fe=ie(()=>Oe.uniqueId);var at=Hq(),je=q(at),nt=y(je,2);z(()=>{W(je,"for",r(Fe)),W(nt,"id",r(Fe)),Rn(nt,r(m)),W(nt,"placeholder",r(k))}),re("change",nt,We=>{_(m,We.target.value||r(k)),We.target.value=r(m)}),p(_e,at)}}});var Ie=y(ke,2);Pe(Ie,{class:"form-field required",name:"password",children:Ce,$$slots:{default:(_e,Oe)=>{const Fe=ie(()=>Oe.uniqueId);var at=Wq(),je=q(at),nt=y(je,2);Ui(nt,!0),z(()=>{W(je,"for",r(Fe)),W(nt,"id",r(Fe))}),xt(nt,()=>r(C),We=>_(C,We)),p(_e,at)}}});var Ne=y(Ie,2);let ze;var Me=y(ye,2),Ge=T(Me);z(_e=>{ze=Re(Ne,1,"btn btn-lg btn-block btn-next",null,ze,_e),Ge.disabled=r(b)},[()=>({"btn-disabled":r(b),"btn-loading":r(b)})]),re("submit",ye,Ct(w)),re("click",Ge,()=>{_(m,"")}),p(me,ae)};G(be,me=>{r(m)?me(ue,!1):me(we)})}p(ce,he)};G(ve,ce=>{r(c),M(()=>r(c).otp.enabled)&&ce(Ee)},!0)}p(pe,xe)};G(oe,pe=>{r(c),r(g),M(()=>r(c).password.enabled&&!r(g))?pe(de):pe(ge,!1)},!0)}p(J,Q)};G(V,J=>{r(v)?J(U):J(B,!1)})}p(I,A)},$$slots:{default:!0}}),Be(),i()}function on(n){if(!n)throw Error("Parameter args is required");if(!n.component==!n.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(n.component&&(n.asyncComponent=()=>Promise.resolve(n.component)),typeof n.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(n.conditions){Array.isArray(n.conditions)||(n.conditions=[n.conditions]);for(let t=0;t<n.conditions.length;t++)if(!n.conditions[t]||typeof n.conditions[t]!="function")throw Error("Invalid parameter conditions["+t+"]")}return n.loadingComponent&&(n.asyncComponent.loading=n.loadingComponent,n.asyncComponent.loadingParams=n.loadingParams||void 0),{component:n.asyncComponent,userData:n.userData,conditions:n.conditions&&n.conditions.length?n.conditions:void 0,props:n.props&&Object.keys(n.props).length?n.props:{},_sveltesparouter:!0}}const Jq={"/pbinstal/:token":on({asyncComponent:()=>Ut(()=>import("./PageInstaller-DeS12w5T.js"),[],import.meta.url),conditions:[n=>n.params.token&&!Yl(n.params.token)],userData:{showAppSidebar:!1}}),"/login":on({component:Zq,conditions:[n=>!Le.authStore.isValid],userData:{showAppSidebar:!1}}),"/request-password-reset":on({asyncComponent:()=>Ut(()=>import("./PageSuperuserRequestPasswordReset-CiBXWAvL.js"),[],import.meta.url),conditions:[n=>!Le.authStore.isValid],userData:{showAppSidebar:!1}}),"/confirm-password-reset/:token":on({asyncComponent:()=>Ut(()=>import("./PageSuperuserConfirmPasswordReset-BINkwFt9.js"),[],import.meta.url),conditions:[n=>!Le.authStore.isValid],userData:{showAppSidebar:!1}}),"/collections":on({component:yN,conditions:[n=>Le.authStore.isValid],userData:{showAppSidebar:!0}}),"/logs":on({component:n$,conditions:[n=>Le.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings":on({component:gR,conditions:[n=>Le.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/mail":on({component:Sq,conditions:[n=>Le.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/storage":on({component:Aq,conditions:[n=>Le.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/export-collections":on({component:_F,conditions:[n=>Le.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/import-collections":on({component:iq,conditions:[n=>Le.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/backups":on({component:sF,conditions:[n=>Le.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/crons":on({component:fF,conditions:[n=>Le.authStore.isValid],userData:{showAppSidebar:!0}}),"/users/confirm-password-reset/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmPasswordReset-B_mK8KKH.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-password-reset/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmPasswordReset-B_mK8KKH.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/users/confirm-verification/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmVerification-CDsgXZLr.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-verification/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmVerification-CDsgXZLr.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/users/confirm-email-change/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmEmailChange-B-Ug-XI_.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-email-change/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmEmailChange-B-Ug-XI_.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/oauth2-redirect-success":on({asyncComponent:()=>Ut(()=>import("./PageOAuth2RedirectSuccess-xh3U-G9I.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/oauth2-redirect-failure":on({asyncComponent:()=>Ut(()=>import("./PageOAuth2RedirectFailure-CQzfvmo6.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"*":on({component:U1,userData:{showAppSidebar:!1}})};function Gq(n,e,t,i){e(!r(t)),window.localStorage?.setItem(i,r(t)?"dark":"light")}function Xq(){Le.logout()}var Qq=S('<link rel="shortcut icon" type="image/png"/>'),e3=S('<div class="txt-ellipsis current-superuser svelte-1ahgi3o"> </div> <hr/> <a href="/collections?collection=_superusers" class="dropdown-item closable" role="menuitem"><i class="ri-shield-user-line" aria-hidden="true"></i> <span class="txt">Manage superusers</span></a> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-logout-circle-line" aria-hidden="true"></i> <span class="txt">Logout</span></button>',1),t3=S('<i class="ri-sun-line" aria-hidden="true"></i>'),n3=S('<i class="ri-moon-line" aria-hidden="true"></i>'),i3=S('<aside class="app-sidebar"><a href="/" class="logo logo-sm"><img alt="PocketBase logo" width="40" height="40"/></a> <nav class="main-menu"><a href="/collections" class="menu-item" aria-label="Collections"><i class="ri-database-2-line"></i></a> <a href="/logs" class="menu-item" aria-label="Logs"><i class="ri-line-chart-line"></i></a> <a href="/settings" class="menu-item" aria-label="Settings"><i class="ri-tools-line"></i></a></nav> <div tabindex="0" role="button" aria-label="Logged superuser menu" class="thumb thumb-circle link-hint"><span class="initials"> </span> <!></div> <button class="btn btn-transparent btn-sm m-t-10" title="Toggle dark theme"><!></button></aside>'),r3=S('<div class="tinymce-preloader hidden"><!></div>'),a3=S('<div class="app-layout"><!> <div class="app-body"><!> <!></div></div> <!> <!>',1);function s3(n,e){Ue(e,!1);const[t,i]=Lt(),a=()=>It(Wl,"$superuser",t),s=()=>It(In,"$pageTitle",t),o=()=>It(_u,"$appName",t);let l,c=P(!1);const u="pb_ui_theme";let d=P(!1);function f(L){_(d,!!L);try{const N=document.documentElement;N.setAttribute("data-theme",r(d)?"dark":"light"),N.classList.toggle("dark",r(d))}catch{}}function h(){const L=window.localStorage?.getItem(u);if(L==="dark"||L==="light"){f(L==="dark");return}const N=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;f(N)}let b=P(!1);function v(L){L?.detail?.location!==l&&(_(c,!!L?.detail?.userData?.showAppSidebar),l=L?.detail?.location,Zn(In,""),rn({}),Ap())}function g(){as("/")}async function m(){if(a()?.id)try{const L=await Le.settings.getAll({$cancelKey:"initialAppSettings"});Zn(_u,L?.meta?.appName||""),Zn(po,!!L?.meta?.hideControls)}catch(L){L?.isAbort||console.warn("Failed to load app settings.",L)}}un(()=>{h()}),ne(()=>a(),()=>{a()?.id&&m()}),ft(),He();var k=a3();hy(L=>{var N=tt(),H=q(N);{var j=V=>{var U=Qq();z(()=>W(U,"href",`${M(()=>"./")??""}images/favicon/favicon_prod.png`)),p(V,U)};G(H,V=>{M(()=>window.location.protocol=="https:")&&V(j)})}z(V=>Xv.title=V,[()=>(R(F),s(),o(),M(()=>F.joinNonEmpty([s(),o(),"PocketBase"]," - ",!1)))]),p(L,N)});var x=q(k),C=T(x);{var O=L=>{var N=i3(),H=T(N),j=T(H);Qe(H,ce=>ii?.(ce));var V=y(H,2),U=T(V);Qe(U,ce=>ii?.(ce)),Qe(U,(ce,he)=>er?.(ce,he),()=>({path:"/collections/?.*",className:"current-route"})),Qe(U,(ce,he)=>dt?.(ce,he),()=>({text:"Collections",position:"right"}));var B=y(U,2);Qe(B,ce=>ii?.(ce)),Qe(B,(ce,he)=>er?.(ce,he),()=>({path:"/logs/?.*",className:"current-route"})),Qe(B,(ce,he)=>dt?.(ce,he),()=>({text:"Logs",position:"right"}));var J=y(B,2);Qe(J,ce=>ii?.(ce)),Qe(J,(ce,he)=>er?.(ce,he),()=>({path:"/settings/?.*",className:"current-route"})),Qe(J,(ce,he)=>dt?.(ce,he),()=>({text:"Settings",position:"right"}));var Q=y(V,2),oe=T(Q),de=T(oe),ge=y(oe,2);Jn(ge,{class:"dropdown dropdown-nowrap dropdown-upside dropdown-left",children:(ce,he)=>{var be=e3(),we=q(be),ue=T(we),me=y(we,4);Qe(me,te=>ii?.(te));var ae=y(me,2);ae.__click=[Xq],z(()=>{W(we,"title",(a(),M(()=>a().email))),Te(ue,(a(),M(()=>a().email)))}),p(ce,be)},$$slots:{default:!0}});var pe=y(Q,2);pe.__click=[Gq,f,d,u];var xe=T(pe);{var ve=ce=>{var he=t3();p(ce,he)},Ee=ce=>{var he=n3();p(ce,he)};G(xe,ce=>{r(d)?ce(ve):ce(Ee,!1)})}z(ce=>{W(j,"src",`${M(()=>"./")??""}images/logo.svg`),W(Q,"title",(a(),M(()=>a().email))),Te(de,ce),W(pe,"aria-pressed",r(d))},[()=>(R(F),a(),M(()=>F.getInitials(a().email)))]),p(L,N)};G(C,L=>{a(),r(c),M(()=>a()?.id&&r(c))&&L(O)})}var $=y(C,2),E=T($);q1(E,{get routes(){return Jq},$$events:{routeLoading:v,conditionsFailed:g}});var w=y(E,2);m1(w,{});var I=y(x,2);e1(I,{});var D=y(I,2);{var A=L=>{var N=r3(),H=T(N);{let j=ie(()=>(R(F),M(()=>F.defaultEditorOptions())));cd(H,{get conf(){return r(j)},$$events:{init:()=>{_(b,!0)}}})}p(L,N)};G(D,L=>{r(c)&&!r(b)&&L(A)})}p(n,k),Be(),i()}bm(["click"]);vy(s3,{target:document.getElementById("app")});export{qu as $,Be as A,Ln as B,Js as C,ut as D,W as E,Rq as F,ie as G,G as H,Qe as I,Ui as J,ii as K,Te as L,R as M,vn as N,F as O,tt as P,go as Q,Yl as R,Zn as S,un as T,Lt as U,In as V,zt as W,_t as X,It as Y,Xn as Z,uL as _,ee as a,bt as a0,At as a1,M as a2,or as a3,pi as a4,Ty as a5,DS as a6,l3 as a7,dt as a8,Rt as a9,Le as b,ur as c,r as d,ft as e,S as f,Ga as g,q as h,He as i,y as j,T as k,ne as l,P as m,Pe as n,Ce as o,Ue as p,mt as q,as as r,_ as s,Tn as t,z as u,xt as v,p as w,Re as x,re as y,Ct as z};
