import{p as Q,a as R,l as S,M as W,e as Y,i as B,F as K,P as N,h as b,H,d as a,m as _,w as c,f as h,j as n,y as J,k as g,n as U,o as V,J as X,u as C,v as Z,x as aa,z as ea,A as sa,s as d,Q as ta,g as ra,b as na,O as oa,L as la,E as L,G as ia}from"./index-DnvcJ3JO.js";var ca=h('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Successfully changed the user email address.</p> <p>You can now sign in with your new email address.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),da=h('to <strong class="txt-nowrap"> </strong>',1),ua=h('<label>Password</label> <input type="password" required/>',1),fa=h('<form><div class="content txt-center m-b-base"><h5>Type your password to confirm changing your email address <!></h5></div> <!> <button type="submit"><span class="txt">Confirm new email</span></button></form>');function ma($,P){Q(P,!1);const w=_();let u=R(P,"params",8),y=_(""),o=_(!1),q=_(!1);async function j(){var k,l;if(a(o))return;d(o,!0);const s=new ta("../");try{const i=ra((k=u())==null?void 0:k.token);await s.collection(i.collectionId).confirmEmailChange((l=u())==null?void 0:l.token,a(y)),d(q,!0)}catch(i){na.error(i)}d(o,!1)}S(()=>W(u()),()=>{var s;d(w,oa.getJWTPayload((s=u())==null?void 0:s.token).newEmail||"")}),Y(),B(),K($,{nobranding:!0,children:(s,k)=>{var l=N(),i=b(l);{var z=t=>{var r=ca(),f=n(b(r),2);J("click",f,()=>window.close()),c(t,r)},A=t=>{var r=fa(),f=g(r),D=g(f),G=n(g(D));{var M=e=>{var p=da(),m=n(b(p)),v=g(m);C(()=>la(v,a(w))),c(e,p)};H(G,e=>{a(w)&&e(M)})}var E=n(f,2);U(E,{class:"form-field required",name:"password",children:V,$$slots:{default:(e,p)=>{const m=ia(()=>p.uniqueId);var v=ua(),T=b(v),x=n(T,2);X(x,!0),C(()=>{L(T,"for",a(m)),L(x,"id",a(m))}),Z(x,()=>a(y),O=>d(y,O)),c(e,v)}}});var F=n(E,2);let I;C(e=>{I=aa(F,1,"btn btn-lg btn-block",null,I,e),F.disabled=a(o)},[()=>({"btn-loading":a(o)})]),J("submit",r,ea(j)),c(t,r)};H(i,t=>{a(q)?t(z):t(A,!1)})}c(s,l)},$$slots:{default:!0}}),sa()}export{ma as default};
