import{p as B,a as K,l as U,M as V,e as X,i as Z,F as ee,P as ae,h as p,H as N,d as e,m as v,w as d,f as b,j as s,y as S,k as g,n as T,o as j,J as se,u as h,v as z,x as te,z as re,A as oe,s as c,Q as ne,g as le,b as ie,O as de,L as ce,E as y,G as A}from"./index-65vYvwo_.js";var ue=b('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Successfully changed the user password.</p> <p>You can now sign in with your new password.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),fe=b("for <strong> </strong>",1),pe=b('<label>New password</label> <input type="password" required/>',1),ve=b('<label>New password confirm</label> <input type="password" required/>',1),be=b('<form><div class="content txt-center m-b-base"><h5>Reset your user password <!></h5></div> <!> <!> <button type="submit"><span class="txt">Set new password</span></button></form>');function _e(D,I){B(I,!1);const k=v();let m=K(I,"params",8),P=v(""),q=v(""),u=v(!1),R=v(!1);async function E(){if(e(u))return;c(u,!0);const x=new ne("../");try{const _=le(m()?.token);await x.collection(_.collectionId).confirmPasswordReset(m()?.token,e(P),e(q)),c(R,!0)}catch(_){ie.error(_)}c(u,!1)}U(()=>V(m()),()=>{c(k,de.getJWTPayload(m()?.token).email||"")}),X(),Z(),ee(D,{nobranding:!0,children:(x,_)=>{var $=ae(),G=p($);{var M=o=>{var n=ue(),w=s(p(n),2);S("click",w,()=>window.close()),d(o,n)},O=o=>{var n=be(),w=g(n),Q=g(w),W=s(g(Q));{var Y=a=>{var l=fe(),t=s(p(l)),r=g(t);h(()=>ce(r,e(k))),d(a,l)};N(W,a=>{e(k)&&a(Y)})}var F=s(w,2);T(F,{class:"form-field required",name:"password",children:j,$$slots:{default:(a,l)=>{const t=A(()=>l.uniqueId);var r=pe(),f=p(r),i=s(f,2);se(i,!0),h(()=>{y(f,"for",e(t)),y(i,"id",e(t))}),z(i,()=>e(P),C=>c(P,C)),d(a,r)}}});var H=s(F,2);T(H,{class:"form-field required",name:"passwordConfirm",children:j,$$slots:{default:(a,l)=>{const t=A(()=>l.uniqueId);var r=ve(),f=p(r),i=s(f,2);h(()=>{y(f,"for",e(t)),y(i,"id",e(t))}),z(i,()=>e(q),C=>c(q,C)),d(a,r)}}});var J=s(H,2);let L;h(a=>{L=te(J,1,"btn btn-lg btn-block",null,L,a),J.disabled=e(u)},[()=>({"btn-loading":e(u)})]),S("submit",n,re(E)),d(o,n)};N(G,o=>{e(R)?o(M):o(O,!1)})}d(x,$)},$$slots:{default:!0}}),oe()}export{_e as default};
