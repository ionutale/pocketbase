import{p as U,a as W,d as a,m,s as e,Q as q,g as R,l as X,R as A,M as Y,e as Z,i as $,F as ee,P as I,h as v,H as y,w as t,f,A as te,j as V,y as w,u as ae,x as se,b as ne}from"./index-DQ9K3nHd.js";var le=f('<div class="txt-center"><div class="loader loader-lg"><em>Please wait...</em></div></div>'),oe=f('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Successfully verified email address.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),ie=f('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Please check your email for the new verification link.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),re=f('<button type="button"><span class="txt">Resend</span></button>'),ce=f('<button type="button" class="btn btn-transparent btn-block">Close</button>'),de=f('<div class="alert alert-danger"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content txt-bold"><p>Invalid or expired verification token.</p></div></div> <!>',1);function fe(E,F){U(F,!1);const T=m();let s=W(F,"params",8),h=m(!1),k=m(!1),x=m(!1),b=m(!1);H();async function H(){if(a(k))return;e(k,!0);const o=new q("../");try{const u=R(s()?.token);await o.collection(u.collectionId).confirmVerification(s()?.token),e(h,!0)}catch{e(h,!1)}e(k,!1)}async function M(){const o=R(s()?.token);if(a(b)||!o.collectionId||!o.email)return;e(b,!0);const u=new q("../");try{const n=R(s()?.token);await u.collection(n.collectionId).requestVerification(n.email),e(x,!0)}catch(n){ne.error(n),e(x,!1)}e(b,!1)}X(()=>(Y(s()),A),()=>{e(T,s()?.token&&A(s().token))}),Z(),$(),ee(E,{nobranding:!0,children:(o,u)=>{var n=I(),Q=v(n);{var S=i=>{var g=le();t(i,g)},z=i=>{var g=I(),B=v(g);{var D=r=>{var p=oe(),C=V(v(p),2);w("click",C,()=>window.close()),t(r,p)},G=r=>{var p=I(),C=v(p);{var J=c=>{var _=ie(),P=V(v(_),2);w("click",P,()=>window.close()),t(c,_)},K=c=>{var _=de(),P=V(v(_),2);{var L=d=>{var l=re();let j;ae(O=>{j=se(l,1,"btn btn-transparent btn-block",null,j,O),l.disabled=a(b)},[()=>({"btn-loading":a(b)})]),w("click",l,M),t(d,l)},N=d=>{var l=ce();w("click",l,()=>window.close()),t(d,l)};y(P,d=>{a(T)?d(L):d(N,!1)})}t(c,_)};y(C,c=>{a(x)?c(J):c(K,!1)},!0)}t(r,p)};y(B,r=>{a(h)?r(D):r(G,!1)},!0)}t(i,g)};y(Q,i=>{a(k)?i(S):i(z,!1)})}t(o,n)},$$slots:{default:!0}}),te()}export{fe as default};
