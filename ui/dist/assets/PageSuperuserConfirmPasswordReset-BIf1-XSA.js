import{p as K,a as M,l as O,M as W,e as A,i as Q,F as U,f as _,h as c,j as e,k as d,H as V,d as a,m as f,n as N,o as R,J as X,u as p,v as D,w as m,I as Y,x as Z,y as aa,z as sa,s as u,K as ea,b as H,N as ra,r as ta,O as oa,L as la,D as v,E as J,G as na}from"./index-D0ntNp7m.js";var ia=_('for <strong class="txt-nowrap"> </strong>',1),da=_('<label>New password</label> <input type="password" required/>',1),ua=_('<label>New password confirm</label> <input type="password" required/>',1),ca=_('<form class="m-b-base"><div class="content txt-center m-b-sm"><h4 class="m-b-xs">Reset your superuser password <!></h4></div> <!> <!> <button type="submit"><span class="txt">Set new password</span></button></form> <div class="content txt-center"><a href="/login" class="link-hint">Back to login</a></div>',1);function ma(L,k){K(k,!1);const b=f();let w=M(k,"params",8),g=f(""),h=f(""),n=f(!1);async function T(){if(!a(n)){u(n,!0);try{await H.collection("_superusers").confirmPasswordReset(w()?.token,a(g),a(h)),ra("Successfully set a new superuser password."),ta("/")}catch(y){H.error(y)}u(n,!1)}}O(()=>W(w()),()=>{u(b,oa.getJWTPayload(w()?.token).email||"")}),A(),Q(),U(L,{children:(y,fa)=>{var P=ca(),q=c(P),$=d(q),j=d($),z=e(d(j));{var B=s=>{var o=ia(),r=e(c(o)),t=d(r);p(()=>la(t,a(b))),m(s,o)};V(z,s=>{a(b)&&s(B)})}var I=e($,2);N(I,{class:"form-field required",name:"password",children:R,$$slots:{default:(s,o)=>{const r=J(()=>o.uniqueId);var t=da(),i=c(t),l=e(i,2);X(l,!0),p(()=>{v(i,"for",a(r)),v(l,"id",a(r))}),D(l,()=>a(g),x=>u(g,x)),m(s,t)}}});var C=e(I,2);N(C,{class:"form-field required",name:"passwordConfirm",children:R,$$slots:{default:(s,o)=>{const r=J(()=>o.uniqueId);var t=ua(),i=c(t),l=e(i,2);p(()=>{v(i,"for",a(r)),v(l,"id",a(r))}),D(l,()=>a(h),x=>u(h,x)),m(s,t)}}});var S=e(C,2);let F;var E=e(q,2),G=d(E);Y(G,s=>ea?.(s)),p(()=>{F=na(S,1,"btn btn-lg btn-block",null,F,{"btn-loading":a(n)}),S.disabled=a(n)}),Z("submit",q,aa(T)),m(y,P)},$$slots:{default:!0}}),sa()}export{ma as default};
