import{p as K,a as M,l as O,M as W,e as Q,i as U,F as V,f as b,h as f,j as r,k as u,H as X,d as a,m as p,n as R,o as H,J as Y,u as m,v as J,w as v,I as Z,x as aa,y as sa,z as ea,A as ra,s as c,K as ta,b as L,N as oa,r as la,O as na,L as ia,E as _,G as T}from"./index-4eYEYVcK.js";var da=b('for <strong class="txt-nowrap"> </strong>',1),ua=b('<label>New password</label> <input type="password" required/>',1),ca=b('<label>New password confirm</label> <input type="password" required/>',1),fa=b('<form class="m-b-base"><div class="content txt-center m-b-sm"><h4 class="m-b-xs">Reset your superuser password <!></h4></div> <!> <!> <button type="submit"><span class="txt">Set new password</span></button></form> <div class="content txt-center"><a href="/login" class="link-hint">Back to login</a></div>',1);function ma(j,k){K(k,!1);const w=p();let g=M(k,"params",8),h=p(""),y=p(""),i=p(!1);async function z(){var t;if(!a(i)){c(i,!0);try{await L.collection("_superusers").confirmPasswordReset((t=g())==null?void 0:t.token,a(h),a(y)),oa("Successfully set a new superuser password."),la("/")}catch(P){L.error(P)}c(i,!1)}}O(()=>W(g()),()=>{var t;c(w,na.getJWTPayload((t=g())==null?void 0:t.token).email||"")}),Q(),U(),V(j,{children:(t,P)=>{var $=fa(),q=f($),I=u(q),A=u(I),B=r(u(A));{var D=s=>{var e=da(),o=r(f(e)),l=u(o);m(()=>ia(l,a(w))),v(s,e)};X(B,s=>{a(w)&&s(D)})}var C=r(I,2);R(C,{class:"form-field required",name:"password",children:H,$$slots:{default:(s,e)=>{const o=T(()=>e.uniqueId);var l=ua(),d=f(l),n=r(d,2);Y(n,!0),m(()=>{_(d,"for",a(o)),_(n,"id",a(o))}),J(n,()=>a(h),x=>c(h,x)),v(s,l)}}});var S=r(C,2);R(S,{class:"form-field required",name:"passwordConfirm",children:H,$$slots:{default:(s,e)=>{const o=T(()=>e.uniqueId);var l=ca(),d=f(l),n=r(d,2);m(()=>{_(d,"for",a(o)),_(n,"id",a(o))}),J(n,()=>a(y),x=>c(y,x)),v(s,l)}}});var F=r(S,2);let N;var E=r(q,2),G=u(E);Z(G,s=>{var e;return(e=ta)==null?void 0:e(s)}),m(s=>{N=aa(F,1,"btn btn-lg btn-block",null,N,s),F.disabled=a(i)},[()=>({"btn-loading":a(i)})]),sa("submit",q,ea(z)),v(t,$)},$$slots:{default:!0}}),ra()}export{ma as default};
