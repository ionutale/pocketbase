const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FilterAutocompleteInput-Bfmesr8o.js","./index-BYqHMM3t.js","./ListApiDocs-DyLwujIg.js","./FieldsQueryParam-DEDtIDJr.js","./ListApiDocs-g_Ubu-fN.css","./ViewApiDocs-ud5bqKGv.js","./CreateApiDocs-CNmhNM4X.js","./UpdateApiDocs-DQF2QFBq.js","./AuthMethodsDocs-BswKKjgw.js","./AuthWithPasswordDocs-D74hD3nU.js","./AuthWithOAuth2Docs-Z8I4DRpu.js","./AuthWithOtpDocs-Dv42TuSr.js","./AuthRefreshDocs-BWmDBAam.js","./CodeEditor-Dnzy5TIO.js","./Leaflet-DFtAmbtI.js","./Leaflet-C-JzZQCi.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();const Zg="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Zg);let vs=!1,Gg=!1;function Xg(){vs=!0}Xg();const Qg=1,eb=2,Iv=4,tb=8,nb=16,ib=1,rb=2,Cv=4,ab=8,sb=16,ob=1,lb=2,cb=4,ub=1,db=2,wn=Symbol(),fb="http://www.w3.org/1999/xhtml",hb="@attach",Yc=!1;var po=Array.isArray,vb=Array.prototype.indexOf,qu=Array.from,Ev=Object.defineProperty,_a=Object.getOwnPropertyDescriptor,Ov=Object.getOwnPropertyDescriptors,pb=Object.prototype,mb=Array.prototype,zu=Object.getPrototypeOf;function Ha(n){return typeof n=="function"}const mi=()=>{};function gb(n){return typeof n?.then=="function"}function bb(n){return n()}function fl(n){for(var e=0;e<n.length;e++)n[e]()}function Dv(){var n,e,t=new Promise((i,a)=>{n=i,e=a});return{promise:t,resolve:n,reject:e}}function Ga(n,e){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const t=[];for(const i of n)if(t.push(i),t.length===e)break;return t}const Pn=2,to=4,mo=8,ju=1<<24,fr=16,Er=32,ps=64,Pv=128,Pi=512,Dn=1024,oi=2048,Or=4096,gi=8192,kr=16384,Pl=32768,$a=65536,Fd=1<<17,Uu=1<<18,Ml=1<<19,Mv=1<<20,xr=1<<25,Ia=32768,Kc=1<<21,Vu=1<<22,Br=1<<23,or=Symbol("$state"),Av=Symbol("legacy props"),yb=Symbol(""),Ya=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ee(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function Al(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function _b(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function xb(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function wb(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function kb(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Sb(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Tb(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function $b(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ib(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Cb(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Eb(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ob(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Lv(n){return n===this.v}function Bu(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Nv(n){return!Bu(n,this.v)}let Gt=null;function hl(n){Gt=n}function Ue(n,e=!1,t){Gt={p:Gt,i:!1,c:null,e:null,s:n,x:null,l:vs&&!e?{s:null,u:null,$:[]}:null}}function Ve(n){var e=Gt,t=e.e;if(t!==null){e.e=null;for(var i of t)Xv(i)}return n!==void 0&&(e.x=n),e.i=!0,Gt=e.p,n??{}}function Pa(){return!vs||Gt!==null&&Gt.l===null}let va=[];function Rv(){var n=va;va=[],fl(n)}function $r(n){if(va.length===0&&!Xa){var e=va;queueMicrotask(()=>{e===va&&Rv()})}va.push(n)}function Db(){for(;va.length>0;)Rv()}function Pb(n){var e=Ht;if(e===null)return Vt.f|=Br,n;if((e.f&Pl)===0){if((e.f&Pv)===0)throw n;e.b.error(n)}else vl(n,e)}function vl(n,e){for(;e!==null;){if((e.f&Pv)!==0)try{e.b.error(n);return}catch(t){n=t}e=e.parent}throw n}const Mb=-7169;function Mn(n,e){n.f=n.f&Mb|e}function Hu(n){(n.f&Pi)!==0||n.deps===null?Mn(n,Dn):Mn(n,Or)}function Fv(n){if(n!==null)for(const e of n)(e.f&Pn)===0||(e.f&Ia)===0||(e.f^=Ia,Fv(e.deps))}function Ab(n,e,t){(n.f&oi)!==0?e.add(n):(n.f&Or)!==0&&t.add(n),Fv(n.deps),Mn(n,Dn)}const Do=new Set;let Bt=null,Hs=null,ji=null,Ei=[],Ll=null,Jc=!1,Xa=!1;class rs{committed=!1;current=new Map;previous=new Map;#t=new Set;#n=new Set;#e=0;#i=0;#a=null;#r=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#i>0}process(e){Ei=[],Hs=null,this.apply();var t=[],i=[];for(const a of e)this.#o(a,t,i);this.is_fork||this.#c(),this.is_deferred()?(this.#l(i),this.#l(t)):(Hs=this,Bt=null,qd(i),qd(t),Hs=null,this.#a?.resolve()),ji=null}#o(e,t,i){e.f^=Dn;for(var a=e.first,s=null;a!==null;){var o=a.f,l=(o&(Er|ps))!==0,c=l&&(o&Dn)!==0,u=c||(o&gi)!==0||this.skipped_effects.has(a);if(!u&&a.fn!==null){l?a.f^=Dn:s!==null&&(o&(to|mo|ju))!==0?s.b.defer_effect(a):(o&to)!==0?t.push(a):ys(a)&&((o&fr)!==0&&this.#r.add(a),as(a));var d=a.first;if(d!==null){a=d;continue}}var f=a.parent;for(a=a.next;a===null&&f!==null;)f===s&&(s=null),a=f.next,f=f.parent}}#l(e){for(var t=0;t<e.length;t+=1)Ab(e[t],this.#r,this.#s)}capture(e,t){t!==wn&&!this.previous.has(e)&&this.previous.set(e,t),(e.f&Br)===0&&(this.current.set(e,e.v),ji?.set(e,e.v))}activate(){Bt=this,this.apply()}deactivate(){Bt===this&&(Bt=null,ji=null)}flush(){if(this.activate(),Ei.length>0){if(zv(),Bt!==null&&Bt!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#n)e(this);this.#n.clear()}#c(){if(this.#i===0){for(const e of this.#t)e();this.#t.clear()}this.#e===0&&this.#u()}#u(){if(Do.size>1){this.previous.clear();var e=ji,t=!0;for(const a of Do){if(a===this){t=!1;continue}const s=[];for(const[l,c]of this.current){if(a.current.has(l))if(t&&c!==a.current.get(l))a.current.set(l,c);else continue;s.push(l)}if(s.length===0)continue;const o=[...a.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var i=Ei;Ei=[];const l=new Set,c=new Map;for(const u of s)jv(u,o,l,c);if(Ei.length>0){Bt=a,a.apply();for(const u of Ei)a.#o(u,[],[]);a.deactivate()}Ei=i}}Bt=null,ji=e}this.committed=!0,Do.delete(this)}increment(e){this.#e+=1,e&&(this.#i+=1)}decrement(e){this.#e-=1,e&&(this.#i-=1),this.revive()}revive(){for(const e of this.#r)this.#s.delete(e),Mn(e,oi),Ca(e);for(const e of this.#s)Mn(e,Or),Ca(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#n.add(e)}settled(){return(this.#a??=Dv()).promise}static ensure(){if(Bt===null){const e=Bt=new rs;Do.add(Bt),Xa||rs.enqueue(()=>{Bt===e&&e.flush()})}return Bt}static enqueue(e){$r(e)}apply(){}}function qv(n){var e=Xa;Xa=!0;try{for(var t;;){if(Db(),Ei.length===0&&(Bt?.flush(),Ei.length===0))return Ll=null,t;zv()}}finally{Xa=e}}function zv(){var n=wa;Jc=!0;var e=null;try{var t=0;for(pl(!0);Ei.length>0;){var i=rs.ensure();if(t++>1e3){var a,s;Lb()}i.process(Ei),Hr.clear()}}finally{Jc=!1,pl(n),Ll=null}}function Lb(){try{Sb()}catch(n){vl(n,Ll)}}let br=null;function qd(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var i=n[t++];if((i.f&(kr|gi))===0&&ys(i)&&(br=new Set,as(i),i.deps===null&&i.first===null&&i.nodes===null&&(i.teardown===null&&i.ac===null?ip(i):i.fn=null),br?.size>0)){Hr.clear();for(const a of br){if((a.f&(kr|gi))!==0)continue;const s=[a];let o=a.parent;for(;o!==null;)br.has(o)&&(br.delete(o),s.push(o)),o=o.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(kr|gi))===0&&as(c)}}br.clear()}}br=null}}function jv(n,e,t,i){if(!t.has(n)&&(t.add(n),n.reactions!==null))for(const a of n.reactions){const s=a.f;(s&Pn)!==0?jv(a,e,t,i):(s&(Vu|fr))!==0&&(s&oi)===0&&Uv(a,e,i)&&(Mn(a,oi),Ca(a))}}function Uv(n,e,t){const i=t.get(n);if(i!==void 0)return i;if(n.deps!==null)for(const a of n.deps){if(e.includes(a))return!0;if((a.f&Pn)!==0&&Uv(a,e,t))return t.set(a,!0),!0}return t.set(n,!1),!1}function Ca(n){for(var e=Ll=n;e.parent!==null;){e=e.parent;var t=e.f;if(Jc&&e===Ht&&(t&fr)!==0&&(t&Uu)===0)return;if((t&(ps|Er))!==0){if((t&Dn)===0)return;e.f^=Dn}}Ei.push(e)}function Wu(n,e,t,i){const a=Pa()?go:ne;if(t.length===0&&n.length===0){i(e.map(a));return}var s=Bt,o=Ht,l=Vv();function c(){Promise.all(t.map(u=>Nb(u))).then(u=>{l();try{i([...e.map(a),...u])}catch(d){(o.f&kr)===0&&vl(d,o)}s?.deactivate(),no()}).catch(u=>{vl(u,o)})}n.length>0?Promise.all(n).then(()=>{l();try{return c()}finally{s?.deactivate(),no()}}):c()}function Vv(){var n=Ht,e=Vt,t=Gt,i=Bt;return function(s=!0){ur(n),cr(e),hl(t),s&&i?.activate()}}function no(){ur(null),cr(null),hl(null)}function go(n){var e=Pn|oi,t=Vt!==null&&(Vt.f&Pn)!==0?Vt:null;return Ht!==null&&(Ht.f|=Ml),{ctx:Gt,deps:null,effects:null,equals:Lv,f:e,fn:n,reactions:null,rv:0,v:wn,wv:0,parent:t??Ht,ac:null}}function Nb(n,e,t){let i=Ht;i===null&&_b();var a=i.b,s=void 0,o=Ir(wn),l=!Vt,c=new Map;return Yb(()=>{var u=Dv();s=u.promise;try{Promise.resolve(n()).then(u.resolve,u.reject).then(()=>{d===Bt&&d.committed&&d.deactivate(),no()})}catch(v){u.reject(v),no()}var d=Bt;if(l){var f=a.is_rendered();a.update_pending_count(1),d.increment(f),c.get(d)?.reject(Ya),c.delete(d),c.set(d,u)}const h=(v,_=void 0)=>{if(d.activate(),_)_!==Ya&&(o.f|=Br,Sr(o,_));else{(o.f&Br)!==0&&(o.f^=Br),Sr(o,v);for(const[b,m]of c){if(c.delete(b),b===d)break;m.reject(Ya)}}l&&(a.update_pending_count(-1),d.decrement(f))};u.promise.then(h,v=>h(null,v||"unknown"))}),gs(()=>{for(const u of c.values())u.reject(Ya)}),new Promise(u=>{function d(f){function h(){f===s?u(o):d(s)}f.then(h,h)}d(s)})}function xa(n){const e=go(n);return sp(e),e}function ne(n){const e=go(n);return e.equals=Nv,e}function Bv(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Mi(e[t])}}function Rb(n){for(var e=n.parent;e!==null;){if((e.f&Pn)===0)return(e.f&kr)===0?e:null;e=e.parent}return null}function Yu(n){var e,t=Ht;ur(Rb(n));try{n.f&=~Ia,Bv(n),e=up(n)}finally{ur(t)}return e}function Hv(n){var e=Yu(n);if(!n.equals(e)&&(n.wv=lp(),(!Bt?.is_fork||n.deps===null)&&(n.v=e,n.deps===null))){Mn(n,Dn);return}Gr||(ji!==null?(Gv()||Bt?.is_fork)&&ji.set(n,e):Hu(n))}let Zc=new Set;const Hr=new Map;let Wv=!1;function Ir(n,e){var t={f:0,v:n,reactions:null,equals:Lv,rv:0,wv:0};return t}function Ar(n,e){const t=Ir(n);return sp(t),t}function P(n,e=!1,t=!0){const i=Ir(n);return e||(i.equals=Nv),vs&&t&&Gt!==null&&Gt.l!==null&&(Gt.l.s??=[]).push(i),i}function ft(n,e){return y(n,M(()=>r(n))),e}function y(n,e,t=!1){Vt!==null&&(!Ui||(Vt.f&Fd)!==0)&&Pa()&&(Vt.f&(Pn|fr|Vu|Fd))!==0&&!Tr?.includes(n)&&Eb();let i=t?Ka(e):e;return Sr(n,i)}function Sr(n,e){if(!n.equals(e)){var t=n.v;Gr?Hr.set(n,e):Hr.set(n,t),n.v=e;var i=rs.ensure();if(i.capture(n,t),(n.f&Pn)!==0){const a=n;(n.f&oi)!==0&&Yu(a),Hu(a)}n.wv=lp(),Yv(n,oi),Pa()&&Ht!==null&&(Ht.f&Dn)!==0&&(Ht.f&(Er|ps))===0&&(Ci===null?Xb([n]):Ci.push(n)),!i.is_fork&&Zc.size>0&&!Wv&&Fb()}return e}function Fb(){Wv=!1;var n=wa;pl(!0);const e=Array.from(Zc);try{for(const t of e)(t.f&Dn)!==0&&Mn(t,Or),ys(t)&&as(t)}finally{pl(n)}Zc.clear()}function wr(n,e=1){var t=r(n),i=e===1?t++:t--;return y(n,t),i}function ac(n){y(n,n.v+1)}function Yv(n,e){var t=n.reactions;if(t!==null)for(var i=Pa(),a=t.length,s=0;s<a;s++){var o=t[s],l=o.f;if(!(!i&&o===Ht)){var c=(l&oi)===0;if(c&&Mn(o,e),(l&Pn)!==0){var u=o;ji?.delete(u),(l&Ia)===0&&(l&Pi&&(o.f|=Ia),Yv(u,Or))}else c&&((l&fr)!==0&&br!==null&&br.add(o),Ca(o))}}}function Ka(n){if(typeof n!="object"||n===null||or in n)return n;const e=zu(n);if(e!==pb&&e!==mb)return n;var t=new Map,i=po(n),a=Ar(0),s=ka,o=l=>{if(ka===s)return l();var c=Vt,u=ka;cr(null),Vd(s);var d=l();return cr(c),Vd(u),d};return i&&t.set("length",Ar(n.length)),new Proxy(n,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ib();var d=t.get(c);return d===void 0?d=o(()=>{var f=Ar(u.value);return t.set(c,f),f}):y(d,u.value,!0),!0},deleteProperty(l,c){var u=t.get(c);if(u===void 0){if(c in l){const d=o(()=>Ar(wn));t.set(c,d),ac(a)}}else y(u,wn),ac(a);return!0},get(l,c,u){if(c===or)return n;var d=t.get(c),f=c in l;if(d===void 0&&(!f||_a(l,c)?.writable)&&(d=o(()=>{var v=Ka(f?l[c]:wn),_=Ar(v);return _}),t.set(c,d)),d!==void 0){var h=r(d);return h===wn?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=t.get(c);d&&(u.value=r(d))}else if(u===void 0){var f=t.get(c),h=f?.v;if(f!==void 0&&h!==wn)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===or)return!0;var u=t.get(c),d=u!==void 0&&u.v!==wn||Reflect.has(l,c);if(u!==void 0||Ht!==null&&(!d||_a(l,c)?.writable)){u===void 0&&(u=o(()=>{var h=d?Ka(l[c]):wn,v=Ar(h);return v}),t.set(c,u));var f=r(u);if(f===wn)return!1}return d},set(l,c,u,d){var f=t.get(c),h=c in l;if(i&&c==="length")for(var v=u;v<f.v;v+=1){var _=t.get(v+"");_!==void 0?y(_,wn):v in l&&(_=o(()=>Ar(wn)),t.set(v+"",_))}if(f===void 0)(!h||_a(l,c)?.writable)&&(f=o(()=>Ar(void 0)),y(f,Ka(u)),t.set(c,f));else{h=f.v!==wn;var b=o(()=>Ka(u));y(f,b)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m?.set&&m.set.call(d,u),!h){if(i&&typeof c=="string"){var k=t.get("length"),S=Number(c);Number.isInteger(S)&&S>=k.v&&y(k,S+1)}ac(a)}return!0},ownKeys(l){r(a);var c=Reflect.ownKeys(l).filter(f=>{var h=t.get(f);return h===void 0||h.v!==wn});for(var[u,d]of t)d.v!==wn&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Cb()}})}function zd(n){try{if(n!==null&&typeof n=="object"&&or in n)return n[or]}catch{}return n}function Kv(n,e){return Object.is(zd(n),zd(e))}var pa,qb,zb,jb,Ub;function Wr(n=""){return document.createTextNode(n)}function jr(n){return jb.call(n)}function bo(n){return Ub.call(n)}function T(n,e){return jr(n)}function F(n,e=!1){{var t=jr(n);return t instanceof Comment&&t.data===""?bo(t):t}}function g(n,e=1,t=!1){let i=n;for(;e--;)i=bo(i);return i}function Vb(n){n.textContent=""}function Jv(){return!1}function Wi(n,e){if(e){const t=document.body;n.autofocus=!0,$r(()=>{document.activeElement===t&&n.focus()})}}let jd=!1;function Bb(){jd||(jd=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const e of n.target.elements)e.__on_r?.()})},{capture:!0}))}function ms(n){var e=Vt,t=Ht;cr(null),ur(null);try{return n()}finally{cr(e),ur(t)}}function Nl(n,e,t,i=t){n.addEventListener(e,()=>ms(t));const a=n.__on_r;a?n.__on_r=()=>{a(),i(!0)}:n.__on_r=()=>i(!0),Bb()}function Zv(n){Ht===null&&(Vt===null&&kb(),wb()),Gr&&xb()}function Hb(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Ji(n,e,t){var i=Ht;i!==null&&(i.f&gi)!==0&&(n|=gi);var a={ctx:Gt,deps:null,nodes:null,f:n|oi|Pi,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{as(a),a.f|=Pl}catch(l){throw Mi(a),l}else e!==null&&Ca(a);var s=a;if(t&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&Ml)===0&&(s=s.first,(n&fr)!==0&&(n&$a)!==0&&s!==null&&(s.f|=$a)),s!==null&&(s.parent=i,i!==null&&Hb(s,i),Vt!==null&&(Vt.f&Pn)!==0&&(n&ps)===0)){var o=Vt;(o.effects??=[]).push(s)}return a}function Gv(){return Vt!==null&&!Ui}function gs(n){const e=Ji(mo,null,!1);return Mn(e,Dn),e.teardown=n,e}function Gc(n){Zv();var e=Ht.f,t=!Vt&&(e&Er)!==0&&(e&Pl)===0;if(t){var i=Gt;(i.e??=[]).push(n)}else return Xv(n)}function Xv(n){return Ji(to|Mv,n,!1)}function Wb(n){return Zv(),Ji(mo|Mv,n,!0)}function Nt(n){return Ji(to,n,!1)}function ie(n,e){var t=Gt,i={effect:null,ran:!1,deps:n};t.l.$.push(i),i.effect=Ma(()=>{n(),!i.ran&&(i.ran=!0,M(e))})}function dt(){var n=Gt;Ma(()=>{for(var e of n.l.$){e.deps();var t=e.effect;(t.f&Dn)!==0&&t.deps!==null&&Mn(t,Or),ys(t)&&as(t),e.ran=!1}})}function Yb(n){return Ji(Vu|Ml,n,!0)}function Ma(n,e=0){return Ji(mo|e,n,!0)}function V(n,e=[],t=[],i=[]){Wu(i,e,t,a=>{Ji(mo,()=>n(...a.map(r)),!0)})}function Kb(n,e=[],t=[],i=[]){var a=Bt,s=t.length>0||i.length>0;s&&a.increment(!0),Wu(i,e,t,o=>{Ji(to,()=>n(...o.map(r)),!1),s&&a.decrement(!0)})}function bs(n,e=0){var t=Ji(fr|e,n,!0);return t}function Qv(n,e=0){var t=Ji(ju|e,n,!0);return t}function Ea(n){return Ji(Er|Ml,n,!0)}function ep(n){var e=n.teardown;if(e!==null){const t=Gr,i=Vt;Ud(!0),cr(null);try{e.call(null)}finally{Ud(t),cr(i)}}}function tp(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const a=t.ac;a!==null&&ms(()=>{a.abort(Ya)});var i=t.next;(t.f&ps)!==0?t.parent=null:Mi(t,e),t=i}}function Jb(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&Er)===0&&Mi(e),e=t}}function Mi(n,e=!0){var t=!1;(e||(n.f&Uu)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(np(n.nodes.start,n.nodes.end),t=!0),tp(n,e&&!t),ml(n,0),Mn(n,kr);var i=n.nodes&&n.nodes.t;if(i!==null)for(const s of i)s.stop();ep(n);var a=n.parent;a!==null&&a.first!==null&&ip(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function np(n,e){for(;n!==null;){var t=n===e?null:bo(n);n.remove(),n=t}}function ip(n){var e=n.parent,t=n.prev,i=n.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===n&&(e.first=i),e.last===n&&(e.last=t))}function Ku(n,e,t=!0){var i=[];rp(n,i,!0);var a=()=>{t&&Mi(n),e&&e()},s=i.length;if(s>0){var o=()=>--s||a();for(var l of i)l.out(o)}else a()}function rp(n,e,t){if((n.f&gi)===0){n.f^=gi;var i=n.nodes&&n.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&e.push(l);for(var a=n.first;a!==null;){var s=a.next,o=(a.f&$a)!==0||(a.f&Er)!==0&&(n.f&fr)!==0;rp(a,e,o?t:!1),a=s}}}function Ju(n){ap(n,!0)}function ap(n,e){if((n.f&gi)!==0){n.f^=gi,(n.f&Dn)===0&&(Mn(n,oi),Ca(n));for(var t=n.first;t!==null;){var i=t.next,a=(t.f&$a)!==0||(t.f&Er)!==0;ap(t,a?e:!1),t=i}var s=n.nodes&&n.nodes.t;if(s!==null)for(const o of s)(o.is_global||e)&&o.in()}}function Zb(n,e){if(n.nodes)for(var t=n.nodes.start,i=n.nodes.end;t!==null;){var a=t===i?null:bo(t);e.append(t),t=a}}let Wa=null;function Gb(n){var e=Wa;try{if(Wa=new Set,M(n),e!==null)for(var t of Wa)e.add(t);return Wa}finally{Wa=e}}function ma(n){for(var e of Gb(n))Sr(e,e.v)}let wa=!1;function pl(n){wa=n}let Gr=!1;function Ud(n){Gr=n}let Vt=null,Ui=!1;function cr(n){Vt=n}let Ht=null;function ur(n){Ht=n}let Tr=null;function sp(n){Vt!==null&&(Tr===null?Tr=[n]:Tr.push(n))}let Wn=null,pi=0,Ci=null;function Xb(n){Ci=n}let op=1,io=0,ka=io;function Vd(n){ka=n}function lp(){return++op}function ys(n){var e=n.f;if((e&oi)!==0)return!0;if(e&Pn&&(n.f&=~Ia),(e&Or)!==0){for(var t=n.deps,i=t.length,a=0;a<i;a++){var s=t[a];if(ys(s)&&Hv(s),s.wv>n.wv)return!0}(e&Pi)!==0&&ji===null&&Mn(n,Dn)}return!1}function cp(n,e,t=!0){var i=n.reactions;if(i!==null&&!Tr?.includes(n))for(var a=0;a<i.length;a++){var s=i[a];(s.f&Pn)!==0?cp(s,e,!1):e===s&&(t?Mn(s,oi):(s.f&Dn)!==0&&Mn(s,Or),Ca(s))}}function up(n){var e=Wn,t=pi,i=Ci,a=Vt,s=Tr,o=Gt,l=Ui,c=ka,u=n.f;Wn=null,pi=0,Ci=null,Vt=(u&(Er|ps))===0?n:null,Tr=null,hl(n.ctx),Ui=!1,ka=++io,n.ac!==null&&(ms(()=>{n.ac.abort(Ya)}),n.ac=null);try{n.f|=Kc;var d=n.fn,f=d(),h=n.deps;if(Wn!==null){var v;if(ml(n,pi),h!==null&&pi>0)for(h.length=pi+Wn.length,v=0;v<Wn.length;v++)h[pi+v]=Wn[v];else n.deps=h=Wn;if(Gv()&&(n.f&Pi)!==0)for(v=pi;v<h.length;v++)(h[v].reactions??=[]).push(n)}else h!==null&&pi<h.length&&(ml(n,pi),h.length=pi);if(Pa()&&Ci!==null&&!Ui&&h!==null&&(n.f&(Pn|Or|oi))===0)for(v=0;v<Ci.length;v++)cp(Ci[v],n);return a!==null&&a!==n&&(io++,Ci!==null&&(i===null?i=Ci:i.push(...Ci))),(n.f&Br)!==0&&(n.f^=Br),f}catch(_){return Pb(_)}finally{n.f^=Kc,Wn=e,pi=t,Ci=i,Vt=a,Tr=s,hl(o),Ui=l,ka=c}}function Qb(n,e){let t=e.reactions;if(t!==null){var i=vb.call(t,n);if(i!==-1){var a=t.length-1;a===0?t=e.reactions=null:(t[i]=t[a],t.pop())}}if(t===null&&(e.f&Pn)!==0&&(Wn===null||!Wn.includes(e))){var s=e;(s.f&Pi)!==0&&(s.f^=Pi,s.f&=~Ia),Hu(s),Bv(s),ml(s,0)}}function ml(n,e){var t=n.deps;if(t!==null)for(var i=e;i<t.length;i++)Qb(n,t[i])}function as(n){var e=n.f;if((e&kr)===0){Mn(n,Dn);var t=Ht,i=wa;Ht=n,wa=!0;try{(e&(fr|ju))!==0?Jb(n):tp(n),ep(n);var a=up(n);n.teardown=typeof a=="function"?a:null,n.wv=op;var s;Yc&&Gg&&(n.f&oi)!==0&&n.deps}finally{wa=i,Ht=t}}}async function Tn(){await Promise.resolve(),qv()}function r(n){var e=n.f,t=(e&Pn)!==0;if(Wa?.add(n),Vt!==null&&!Ui){var i=Ht!==null&&(Ht.f&kr)!==0;if(!i&&!Tr?.includes(n)){var a=Vt.deps;if((Vt.f&Kc)!==0)n.rv<io&&(n.rv=io,Wn===null&&a!==null&&a[pi]===n?pi++:Wn===null?Wn=[n]:Wn.includes(n)||Wn.push(n));else{(Vt.deps??=[]).push(n);var s=n.reactions;s===null?n.reactions=[Vt]:s.includes(Vt)||s.push(Vt)}}}if(Gr&&Hr.has(n))return Hr.get(n);if(t){var o=n;if(Gr){var l=o.v;return((o.f&Dn)===0&&o.reactions!==null||fp(o))&&(l=Yu(o)),Hr.set(o,l),l}var c=(o.f&Pi)===0&&!Ui&&Vt!==null&&(wa||(Vt.f&Pi)!==0),u=o.deps===null;ys(o)&&(c&&(o.f|=Pi),Hv(o)),c&&!u&&dp(o)}if(ji?.has(n))return ji.get(n);if((n.f&Br)!==0)throw n.v;return n.v}function dp(n){if(n.deps!==null){n.f|=Pi;for(const e of n.deps)(e.reactions??=[]).push(n),(e.f&Pn)!==0&&(e.f&Pi)===0&&dp(e)}}function fp(n){if(n.v===wn)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(Hr.has(e)||(e.f&Pn)!==0&&fp(e))return!0;return!1}function M(n){var e=Ui;try{return Ui=!0,n()}finally{Ui=e}}function N(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(or in n)Xc(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&or in t&&Xc(t)}}}function Xc(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let i in n)try{Xc(n[i],e)}catch{}const t=zu(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=Ov(t);for(let a in i){const s=i[a].get;if(s)try{s.call(n)}catch{}}}}}const ey=new Set,ty=new Set;function hp(n,e,t,i={}){function a(s){if(i.capture||iy.call(e,s),!s.cancelBubble)return ms(()=>t?.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?$r(()=>{e.addEventListener(n,a,i)}):e.addEventListener(n,a,i),a}function re(n,e,t,i,a){var s={capture:i,passive:a},o=hp(n,e,t,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&gs(()=>{e.removeEventListener(n,o,s)})}function ny(n){for(var e=0;e<n.length;e++)ey.add(n[e]);for(var t of ty)t(n)}let Bd=null;function iy(n){var e=this,t=e.ownerDocument,i=n.type,a=n.composedPath?.()||[],s=a[0]||n.target;Bd=n;var o=0,l=Bd===n&&n.__root;if(l){var c=a.indexOf(l);if(c!==-1&&(e===document||e===window)){n.__root=e;return}var u=a.indexOf(e);if(u===-1)return;c<=u&&(o=c)}if(s=a[o]||n.target,s!==e){Ev(n,"currentTarget",{configurable:!0,get(){return s||t}});var d=Vt,f=Ht;cr(null),ur(null);try{for(var h,v=[];s!==null;){var _=s.assignedSlot||s.parentNode||s.host||null;try{var b=s["__"+i];b!=null&&(!s.disabled||n.target===s)&&b.call(s,n)}catch(m){h?v.push(m):h=m}if(n.cancelBubble||_===e||_===null)break;s=_}if(h){for(let m of v)queueMicrotask(()=>{throw m});throw h}}finally{n.__root=e,delete n.currentTarget,cr(d),ur(f)}}}function vp(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function ro(n,e){var t=Ht;t.nodes===null&&(t.nodes={start:n,end:e,a:null,t:null})}function x(n,e){var t=(e&ub)!==0,i=(e&db)!==0,a,s=!n.startsWith("<!>");return()=>{a===void 0&&(a=vp(s?n:"<!>"+n),t||(a=jr(a)));var o=i||zb?document.importNode(a,!0):a.cloneNode(!0);if(t){var l=jr(o),c=o.lastChild;ro(l,c)}else ro(o,o);return o}}function Oa(n=""){{var e=Wr(n+"");return ro(e,e),e}}function et(){var n=document.createDocumentFragment(),e=document.createComment(""),t=Wr();return n.append(e,t),ro(e,t),n}function p(n,e){n!==null&&n.before(e)}function ry(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const ay=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function sy(n){return ay.includes(n)}const oy={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function ly(n){return n=n.toLowerCase(),oy[n]??n}let cy=!0;function $e(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??=n.nodeValue)&&(n.__t=t,n.nodeValue=t+"")}class Rl{anchor;#t=new Map;#n=new Map;#e=new Map;#i=new Set;#a=!0;constructor(e,t=!0){this.anchor=e,this.#a=t}#r=()=>{var e=Bt;if(this.#t.has(e)){var t=this.#t.get(e),i=this.#n.get(t);if(i)Ju(i),this.#i.delete(t);else{var a=this.#e.get(t);a&&(this.#n.set(t,a.effect),this.#e.delete(t),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),i=a.effect)}for(const[s,o]of this.#t){if(this.#t.delete(s),s===e)break;const l=this.#e.get(o);l&&(Mi(l.effect),this.#e.delete(o))}for(const[s,o]of this.#n){if(s===t||this.#i.has(s))continue;const l=()=>{if(Array.from(this.#t.values()).includes(s)){var u=document.createDocumentFragment();Zb(o,u),u.append(Wr()),this.#e.set(s,{effect:o,fragment:u})}else Mi(o);this.#i.delete(s),this.#n.delete(s)};this.#a||!i?(this.#i.add(s),Ku(o,l,!1)):l()}}};#s=e=>{this.#t.delete(e);const t=Array.from(this.#t.values());for(const[i,a]of this.#e)t.includes(i)||(Mi(a.effect),this.#e.delete(i))};ensure(e,t){var i=Bt,a=Jv();if(t&&!this.#n.has(e)&&!this.#e.has(e))if(a){var s=document.createDocumentFragment(),o=Wr();s.append(o),this.#e.set(e,{effect:Ea(()=>t(o)),fragment:s})}else this.#n.set(e,Ea(()=>t(this.anchor)));if(this.#t.set(i,e),a){for(const[l,c]of this.#n)l===e?i.skipped_effects.delete(c):i.skipped_effects.add(c);for(const[l,c]of this.#e)l===e?i.skipped_effects.delete(c.effect):i.skipped_effects.add(c.effect);i.oncommit(this.#r),i.ondiscard(this.#s)}else this.#r()}}function un(n){Gt===null&&Al(),vs&&Gt.l!==null?pp(Gt).m.push(n):Gc(()=>{const e=M(n);if(typeof e=="function")return e})}function yo(n){Gt===null&&Al(),un(()=>()=>M(n))}function uy(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function qt(){const n=Gt;return n===null&&Al(),(e,t,i)=>{const a=n.s.$$events?.[e];if(a){const s=po(a)?a.slice():[a],o=uy(e,t,i);for(const l of s)l.call(n.x,o);return!o.defaultPrevented}return!0}}function dy(n){Gt===null&&Al(),Gt.l===null&&Tb(),pp(Gt).a.push(n)}function pp(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}const fy=0,sc=1;function hy(n,e,t,i,a){var s=Pa(),o=wn,l=s?Ir(o):P(o,!1,!1),c=s?Ir(o):P(o,!1,!1),u=new Rl(n);bs(()=>{var d=e(),f=!1;if(gb(d)){var h=Vv(),v=!1;const _=b=>{if(!f){v=!0,h(!1),rs.ensure();try{b()}finally{no(),Xa||qv()}}};d.then(b=>{_(()=>{Sr(l,b),u.ensure(sc,i&&(m=>i(m,l)))})},b=>{_(()=>{if(Sr(c,b),u.ensure(sc,a&&(m=>a(m,c))),!a)throw c.v})}),$r(()=>{v||_(()=>{u.ensure(fy,t)})})}else Sr(l,d),u.ensure(sc,i&&(_=>i(_,l)));return()=>{f=!0}})}function G(n,e,t=!1){var i=new Rl(n),a=t?$a:0;function s(o,l){i.ensure(o,l)}bs(()=>{var o=!1;e((l,c=!0)=>{o=!0,s(c,l)}),o||s(!1,null)},a)}function Hd(n,e,t){var i=new Rl(n),a=!Pa();bs(()=>{var s=e();a&&s!==null&&typeof s=="object"&&(s={}),i.ensure(s,t)})}function Mt(n,e){return e}function vy(n,e,t){for(var i=[],a=e.length,s,o=e.length,l=0;l<a;l++){let f=e[l];Ku(f,()=>{if(s){if(s.pending.delete(f),s.done.add(f),s.pending.size===0){var h=n.outrogroups;Qc(qu(s.done)),h.delete(s),h.size===0&&(n.outrogroups=null)}}else o-=1},!1)}if(o===0){var c=i.length===0&&t!==null;if(c){var u=t,d=u.parentNode;Vb(d),d.append(u),n.items.clear()}Qc(e,!c)}else s={pending:new Set(e),done:new Set},(n.outrogroups??=new Set).add(s)}function Qc(n,e=!0){for(var t=0;t<n.length;t++)Mi(n[t],e)}var Wd;function bt(n,e,t,i,a,s=null){var o=n,l=new Map,c=(e&Iv)!==0;if(c){var u=n;o=u.appendChild(Wr())}var d=null,f=ne(()=>{var k=t();return po(k)?k:k==null?[]:qu(k)}),h,v=!0;function _(){m.fallback=d,py(m,h,o,e,i),d!==null&&(h.length===0?(d.f&xr)===0?Ju(d):(d.f^=xr,Fs(d,null,o)):Ku(d,()=>{d=null}))}var b=bs(()=>{h=r(f);for(var k=h.length,S=new Set,$=Bt,D=Jv(),I=0;I<k;I+=1){var C=h[I],w=i(C,I),E=v?null:l.get(w);E?(E.v&&Sr(E.v,C),E.i&&Sr(E.i,I),D&&$.skipped_effects.delete(E.e)):(E=my(l,v?o:Wd??=Wr(),C,w,I,a,e,t),v||(E.e.f|=xr),l.set(w,E)),S.add(w)}if(k===0&&s&&!d&&(v?d=Ea(()=>s(o)):(d=Ea(()=>s(Wd??=Wr())),d.f|=xr)),!v)if(D){for(const[O,A]of l)S.has(O)||$.skipped_effects.add(A.e);$.oncommit(_),$.ondiscard(()=>{})}else _();r(f)}),m={effect:b,items:l,outrogroups:null,fallback:d};v=!1}function py(n,e,t,i,a){var s=(i&tb)!==0,o=e.length,l=n.items,c=n.effect.first,u,d=null,f,h=[],v=[],_,b,m,k;if(s)for(k=0;k<o;k+=1)_=e[k],b=a(_,k),m=l.get(b).e,(m.f&xr)===0&&(m.nodes?.a?.measure(),(f??=new Set).add(m));for(k=0;k<o;k+=1){if(_=e[k],b=a(_,k),m=l.get(b).e,n.outrogroups!==null)for(const A of n.outrogroups)A.pending.delete(m),A.done.delete(m);if((m.f&xr)!==0)if(m.f^=xr,m===c)Fs(m,null,t);else{var S=d?d.next:c;m===n.effect.last&&(n.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Lr(n,d,m),Lr(n,m,S),Fs(m,S,t),d=m,h=[],v=[],c=d.next;continue}if((m.f&gi)!==0&&(Ju(m),s&&(m.nodes?.a?.unfix(),(f??=new Set).delete(m))),m!==c){if(u!==void 0&&u.has(m)){if(h.length<v.length){var $=v[0],D;d=$.prev;var I=h[0],C=h[h.length-1];for(D=0;D<h.length;D+=1)Fs(h[D],$,t);for(D=0;D<v.length;D+=1)u.delete(v[D]);Lr(n,I.prev,C.next),Lr(n,d,I),Lr(n,C,$),c=$,d=C,k-=1,h=[],v=[]}else u.delete(m),Fs(m,c,t),Lr(n,m.prev,m.next),Lr(n,m,d===null?n.effect.first:d.next),Lr(n,d,m),d=m;continue}for(h=[],v=[];c!==null&&c!==m;)(u??=new Set).add(c),v.push(c),c=c.next;if(c===null)continue}(m.f&xr)===0&&h.push(m),d=m,c=m.next}if(n.outrogroups!==null){for(const A of n.outrogroups)A.pending.size===0&&(Qc(qu(A.done)),n.outrogroups?.delete(A));n.outrogroups.size===0&&(n.outrogroups=null)}if(c!==null||u!==void 0){var w=[];if(u!==void 0)for(m of u)(m.f&gi)===0&&w.push(m);for(;c!==null;)(c.f&gi)===0&&c!==n.fallback&&w.push(c),c=c.next;var E=w.length;if(E>0){var O=(i&Iv)!==0&&o===0?t:null;if(s){for(k=0;k<E;k+=1)w[k].nodes?.a?.measure();for(k=0;k<E;k+=1)w[k].nodes?.a?.fix()}vy(n,w,O)}}s&&$r(()=>{if(f!==void 0)for(m of f)m.nodes?.a?.apply()})}function my(n,e,t,i,a,s,o,l){var c=(o&Qg)!==0?(o&nb)===0?P(t,!1,!1):Ir(t):null,u=(o&eb)!==0?Ir(a):null;return{v:c,i:u,e:Ea(()=>(s(e,c??t,u??a,l),()=>{n.delete(i)}))}}function Fs(n,e,t){if(n.nodes)for(var i=n.nodes.start,a=n.nodes.end,s=e&&(e.f&xr)===0?e.nodes.start:t;i!==null;){var o=bo(i);if(s.before(i),i===a)return;i=o}}function Lr(n,e,t){e===null?n.effect.first=t:e.next=t,t===null?n.effect.last=e:t.prev=e}function gy(n,e,t=!1,i=!1,a=!1){var s=n,o="";V(()=>{var l=Ht;if(o!==(o=e()??"")&&(l.nodes!==null&&(np(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var c=o+"";t?c=`<svg>${c}</svg>`:i&&(c=`<math>${c}</math>`);var u=vp(c);if((t||i)&&(u=jr(u)),ro(jr(u),u.lastChild),t||i)for(;jr(u);)s.before(jr(u));else s.before(u)}})}function Zt(n,e,t,i,a){var s=e.$$slots?.[t],o=!1;s===!0&&(s=e[t==="default"?"children":t],o=!0),s===void 0?a!==null&&a(n):s(n,o?()=>i:i)}function yi(n,e,t){var i=new Rl(n);bs(()=>{var a=e()??null;i.ensure(a,a&&(s=>t(s,a)))},$a)}const by=()=>performance.now(),_r={tick:n=>requestAnimationFrame(n),now:()=>by(),tasks:new Set};function mp(){const n=_r.now();_r.tasks.forEach(e=>{e.c(n)||(_r.tasks.delete(e),e.f())}),_r.tasks.size!==0&&_r.tick(mp)}function yy(n){let e;return _r.tasks.size===0&&_r.tick(mp),{promise:new Promise(t=>{_r.tasks.add(e={c:n,f:t})}),abort(){_r.tasks.delete(e)}}}function Po(n,e){ms(()=>{n.dispatchEvent(new CustomEvent(e))})}function _y(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Yd(n){const e={},t=n.split(";");for(const i of t){const[a,s]=i.split(":");if(!a||s===void 0)break;const o=_y(a.trim());e[o]=s.trim()}return e}const xy=n=>n;function wy(n,e,t){var i=Ht,a=i.nodes,s,o,l,c=null;a.a??={element:n,measure(){s=this.element.getBoundingClientRect()},apply(){if(l?.abort(),o=this.element.getBoundingClientRect(),s.left!==o.left||s.right!==o.right||s.top!==o.top||s.bottom!==o.bottom){const u=e()(this.element,{from:s,to:o},t?.());l=gl(this.element,u,void 0,1,()=>{l?.abort(),l=void 0})}},fix(){if(!n.getAnimations().length){var{position:u,width:d,height:f}=getComputedStyle(n);if(u!=="absolute"&&u!=="fixed"){var h=n.style;c={position:h.position,width:h.width,height:h.height,transform:h.transform},h.position="absolute",h.width=d,h.height=f;var v=n.getBoundingClientRect();if(s.left!==v.left||s.top!==v.top){var _=`translate(${s.left-v.left}px, ${s.top-v.top}px)`;h.transform=h.transform?`${h.transform} ${_}`:_}}}},unfix(){if(c){var u=n.style;u.position=c.position,u.width=c.width,u.height=c.height,u.transform=c.transform}}},a.a.element=n}function Et(n,e,t,i){var a=(n&ob)!==0,s=(n&lb)!==0,o=a&&s,l=(n&cb)!==0,c=o?"both":a?"in":"out",u,d=e.inert,f=e.style.overflow,h,v;function _(){return ms(()=>u??=t()(e,i?.()??{},{direction:c}))}var b={is_global:l,in(){if(e.inert=d,!a){v?.abort(),v?.reset?.();return}s||h?.abort(),Po(e,"introstart"),h=gl(e,_(),v,1,()=>{Po(e,"introend"),h?.abort(),h=u=void 0,e.style.overflow=f})},out($){if(!s){$?.(),u=void 0;return}e.inert=!0,Po(e,"outrostart"),v=gl(e,_(),h,0,()=>{Po(e,"outroend"),$?.()})},stop:()=>{h?.abort(),v?.abort()}},m=Ht;if((m.nodes.t??=[]).push(b),a&&cy){var k=l;if(!k){for(var S=m.parent;S&&(S.f&$a)!==0;)for(;(S=S.parent)&&(S.f&fr)===0;);k=!S||(S.f&Pl)!==0}k&&Nt(()=>{M(()=>b.in())})}}function gl(n,e,t,i,a){var s=i===1;if(Ha(e)){var o,l=!1;return $r(()=>{if(!l){var m=e({direction:s?"in":"out"});o=gl(n,m,t,i,a)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!e?.duration)return a(),{abort:mi,deactivate:mi,reset:mi,t:()=>i};const{delay:c=0,css:u,tick:d,easing:f=xy}=e;var h=[];if(s&&t===void 0&&(d&&d(0,1),u)){var v=Yd(u(0,1));h.push(v,v)}var _=()=>1-i,b=n.animate(h,{duration:c,fill:"forwards"});return b.onfinish=()=>{b.cancel();var m=t?.t()??1-i;t?.abort();var k=i-m,S=e.duration*Math.abs(k),$=[];if(S>0){var D=!1;if(u)for(var I=Math.ceil(S/16.666666666666668),C=0;C<=I;C+=1){var w=m+k*f(C/I),E=Yd(u(w,1-w));$.push(E),D||=E.overflow==="hidden"}D&&(n.style.overflow="hidden"),_=()=>{var O=b.currentTime;return m+k*f(O/S)},d&&yy(()=>{if(b.playState!=="running")return!1;var O=_();return d(O,1-O),!0})}b=n.animate($,{duration:S,fill:"forwards"}),b.onfinish=()=>{_=()=>i,d?.(i,1-i),a()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=mi)},deactivate:()=>{a=mi},reset:()=>{i===0&&d?.(1,0)},t:()=>_()}}function ky(n,e){var t;t=document.head.appendChild(Wr()),bs(()=>e(t),Uu)}function Ge(n,e,t){Nt(()=>{var i=M(()=>e(n,t?.())||{});if(t&&i?.update){var a=!1,s={};Ma(()=>{var o=t();N(o),a&&Bu(s,o)&&(s=o,i.update(o))}),a=!0}if(i?.destroy)return()=>i.destroy()})}function Sy(n,e){var t=void 0,i;Qv(()=>{t!==(t=e())&&(i&&(Mi(i),i=null),t&&(i=Ea(()=>{Nt(()=>t(n))})))})}function gp(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=gp(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Ty(){for(var n,e,t=0,i="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=gp(n))&&(i&&(i+=" "),i+=e);return i}function $n(n){return typeof n=="object"?Ty(n):n??""}const Kd=[...` 	
\r\fÂ \v\uFEFF`];function $y(n,e,t){var i=n==null?"":""+n;if(e&&(i=i?i+" "+e:e),t){for(var a in t)if(t[a])i=i?i+" "+a:a;else if(i.length)for(var s=a.length,o=0;(o=i.indexOf(a,o))>=0;){var l=o+s;(o===0||Kd.includes(i[o-1]))&&(l===i.length||Kd.includes(i[l]))?i=(o===0?"":i.substring(0,o))+i.substring(l+1):o=l}}return i===""?null:i}function Jd(n,e=!1){var t=e?" !important;":";",i="";for(var a in n){var s=n[a];s!=null&&s!==""&&(i+=" "+a+": "+s+t)}return i}function oc(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function Iy(n,e){if(e){var t="",i,a;if(Array.isArray(e)?(i=e[0],a=e[1]):i=e,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,l=!1,c=[];i&&c.push(...Object.keys(i).map(oc)),a&&c.push(...Object.keys(a).map(oc));var u=0,d=-1;const b=n.length;for(var f=0;f<b;f++){var h=n[f];if(l?h==="/"&&n[f-1]==="*"&&(l=!1):s?s===h&&(s=!1):h==="/"&&n[f+1]==="*"?l=!0:h==='"'||h==="'"?s=h:h==="("?o++:h===")"&&o--,!l&&s===!1&&o===0){if(h===":"&&d===-1)d=f;else if(h===";"||f===b-1){if(d!==-1){var v=oc(n.substring(u,d).trim());if(!c.includes(v)){h!==";"&&f++;var _=n.substring(u,f).trim();t+=" "+_+";"}}u=f+1,d=-1}}}}return i&&(t+=Jd(i)),a&&(t+=Jd(a,!0)),t=t.trim(),t===""?null:t}return n==null?null:String(n)}function Re(n,e,t,i,a,s){var o=n.__className;if(o!==t||o===void 0){var l=$y(t,i,s);l==null?n.removeAttribute("class"):e?n.className=l:n.setAttribute("class",l),n.__className=t}else if(s&&a!==s)for(var c in s){var u=!!s[c];(a==null||u!==!!a[c])&&n.classList.toggle(c,u)}return s}function lc(n,e={},t,i){for(var a in t){var s=t[a];e[a]!==s&&(t[a]==null?n.style.removeProperty(a):n.style.setProperty(a,s,i))}}function Cy(n,e,t,i){var a=n.__style;if(a!==e){var s=Iy(e,i);s==null?n.removeAttribute("style"):n.style.cssText=s,n.__style=e}else i&&(Array.isArray(i)?(lc(n,t?.[0],i[0]),lc(n,t?.[1],i[1],"important")):lc(n,t,i));return i}function bl(n,e,t=!1){if(n.multiple){if(e==null)return;if(!po(e))return Ob();for(var i of n.options)i.selected=e.includes(Ws(i));return}for(i of n.options){var a=Ws(i);if(Kv(a,e)){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function bp(n){var e=new MutationObserver(()=>{bl(n,n.__value)});e.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),gs(()=>{e.disconnect()})}function Ey(n,e,t=e){var i=new WeakSet,a=!0;Nl(n,"change",s=>{var o=s?"[selected]":":checked",l;if(n.multiple)l=[].map.call(n.querySelectorAll(o),Ws);else{var c=n.querySelector(o)??n.querySelector("option:not([disabled])");l=c&&Ws(c)}t(l),Bt!==null&&i.add(Bt)}),Nt(()=>{var s=e();if(n===document.activeElement){var o=Hs??Bt;if(i.has(o))return}if(bl(n,s,a),a&&s===void 0){var l=n.querySelector(":checked");l!==null&&(s=Ws(l),t(s))}n.__value=s,a=!1}),bp(n)}function Ws(n){return"__value"in n?n.__value:n.value}const Os=Symbol("class"),Ds=Symbol("style"),yp=Symbol("is custom element"),_p=Symbol("is html");function zn(n,e){var t=Fl(n);t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function Yr(n,e){var t=Fl(n);t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function Oy(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function H(n,e,t,i){var a=Fl(n);a[e]!==(a[e]=t)&&(e==="loading"&&(n[yb]=t),t==null?n.removeAttribute(e):typeof t!="string"&&xp(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Dy(n,e,t,i,a=!1,s=!1){var o=Fl(n),l=o[yp],c=!o[_p],u=e||{},d=n.tagName==="OPTION";for(var f in e)f in t||(t[f]=null);t.class?t.class=$n(t.class):(i||t[Os])&&(t.class=null),t[Ds]&&(t.style??=null);var h=xp(n);for(const $ in t){let D=t[$];if(d&&$==="value"&&D==null){n.value=n.__value="",u[$]=D;continue}if($==="class"){var v=n.namespaceURI==="http://www.w3.org/1999/xhtml";Re(n,v,D,i,e?.[Os],t[Os]),u[$]=D,u[Os]=t[Os];continue}if($==="style"){Cy(n,D,e?.[Ds],t[Ds]),u[$]=D,u[Ds]=t[Ds];continue}var _=u[$];if(!(D===_&&!(D===void 0&&n.hasAttribute($)))){u[$]=D;var b=$[0]+$[1];if(b!=="$$")if(b==="on"){const I={},C="$$"+$;let w=$.slice(2);var m=sy(w);if(ry(w)&&(w=w.slice(0,-7),I.capture=!0),!m&&_){if(D!=null)continue;n.removeEventListener(w,u[C],I),u[C]=null}if(D!=null)if(m)n[`__${w}`]=D,ny([w]);else{let E=function(O){u[$].call(this,O)};u[C]=hp(w,n,E,I)}else m&&(n[`__${w}`]=void 0)}else if($==="style")H(n,$,D);else if($==="autofocus")Wi(n,!!D);else if(!l&&($==="__value"||$==="value"&&D!=null))n.value=n.__value=D;else if($==="selected"&&d)Oy(n,D);else{var k=$;c||(k=ly(k));var S=k==="defaultValue"||k==="defaultChecked";if(D==null&&!l&&!S)if(o[$]=null,k==="value"||k==="checked"){let I=n;const C=e===void 0;if(k==="value"){let w=I.defaultValue;I.removeAttribute(k),I.defaultValue=w,I.value=I.__value=C?w:null}else{let w=I.defaultChecked;I.removeAttribute(k),I.defaultChecked=w,I.checked=C?w:!1}}else n.removeAttribute($);else S||h.includes(k)&&(l||typeof D!="string")?(n[k]=D,k in o&&(o[k]=wn)):typeof D!="function"&&H(n,k,D)}}}return u}function ss(n,e,t=[],i=[],a=[],s,o=!1,l=!1){Wu(a,t,i,c=>{var u=void 0,d={},f=n.nodeName==="SELECT",h=!1;if(Qv(()=>{var _=e(...c.map(r)),b=Dy(n,u,_,s,o,l);h&&f&&"value"in _&&bl(n,_.value);for(let k of Object.getOwnPropertySymbols(d))_[k]||Mi(d[k]);for(let k of Object.getOwnPropertySymbols(_)){var m=_[k];k.description===hb&&(!u||m!==u[k])&&(d[k]&&Mi(d[k]),d[k]=Ea(()=>Sy(n,()=>m))),b[k]=m}u=b}),f){var v=n;Nt(()=>{bl(v,u.value,!0),bp(v)})}h=!0})}function Fl(n){return n.__attributes??={[yp]:n.nodeName.includes("-"),[_p]:n.namespaceURI===fb}}var Zd=new Map;function xp(n){var e=n.getAttribute("is")||n.nodeName,t=Zd.get(e);if(t)return t;Zd.set(e,t=[]);for(var i,a=n,s=Element.prototype;s!==a;){i=Ov(a);for(var o in i)i[o].set&&t.push(o);a=zu(a)}return t}function xt(n,e,t=e){var i=new WeakSet;Nl(n,"input",async a=>{var s=a?n.defaultValue:n.value;if(s=uc(n)?dc(s):s,t(s),Bt!==null&&i.add(Bt),await Tn(),s!==(s=e())){var o=n.selectionStart,l=n.selectionEnd,c=n.value.length;if(n.value=s??"",l!==null){var u=n.value.length;o===l&&l===c&&u>c?(n.selectionStart=u,n.selectionEnd=u):(n.selectionStart=o,n.selectionEnd=Math.min(l,u))}}}),M(e)==null&&n.value&&(t(uc(n)?dc(n.value):n.value),Bt!==null&&i.add(Bt)),Ma(()=>{var a=e();if(n===document.activeElement){var s=Hs??Bt;if(i.has(s))return}uc(n)&&a===dc(n.value)||n.type==="date"&&!a&&!n.value||a!==n.value&&(n.value=a??"")})}const cc=new Set;function Py(n,e,t,i,a=i){var s=t.getAttribute("type")==="checkbox",o=n;if(e!==null)for(var l of e)o=o[l]??=[];o.push(t),Nl(t,"change",()=>{var c=t.__value;s&&(c=My(o,c,t.checked)),a(c)},()=>a(s?[]:null)),Ma(()=>{var c=i();s?(c=c||[],t.checked=c.includes(t.__value)):t.checked=Kv(t.__value,c)}),gs(()=>{var c=o.indexOf(t);c!==-1&&o.splice(c,1)}),cc.has(o)||(cc.add(o),$r(()=>{o.sort((c,u)=>c.compareDocumentPosition(u)===4?-1:1),cc.delete(o)})),$r(()=>{})}function Xt(n,e,t=e){Nl(n,"change",i=>{var a=i?n.defaultChecked:n.checked;t(a)}),M(e)==null&&t(n.checked),Ma(()=>{var i=e();n.checked=!!i})}function My(n,e,t){for(var i=new Set,a=0;a<n.length;a+=1)n[a].checked&&i.add(n[a].__value);return t||i.delete(e),Array.from(i)}function uc(n){var e=n.type;return e==="number"||e==="range"}function dc(n){return n===""?null:+n}function _t(n,e,t){var i=_a(n,e);i&&i.set&&(n[e]=t,gs(()=>{n[e]=null}))}function Gd(n,e){return n===e||n?.[or]===e}function pt(n={},e,t,i){return Nt(()=>{var a,s;return Ma(()=>{a=s,s=[],M(()=>{n!==t(...s)&&(e(n,...s),a&&Gd(t(...a),n)&&e(null,...a))})}),()=>{$r(()=>{s&&Gd(t(...s),n)&&e(null,...s)})}}),n}function fn(n){return function(...e){var t=e[0];return t.stopPropagation(),n?.apply(this,e)}}function Ct(n){return function(...e){var t=e[0];return t.preventDefault(),n?.apply(this,e)}}function Be(n=!1){const e=Gt,t=e.l.u;if(!t)return;let i=()=>N(e.s);if(n){let a=0,s={};const o=go(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&a++,a});i=()=>r(o)}t.b.length&&Wb(()=>{Xd(e,i),fl(t.b)}),Gc(()=>{const a=M(()=>t.m.map(bb));return()=>{for(const s of a)typeof s=="function"&&s()}}),t.a.length&&Gc(()=>{Xd(e,i),fl(t.a)})}function Xd(n,e){if(n.l.s)for(const t of n.l.s)r(t);e()}function v3(n){var e=Ir(0);return function(){return arguments.length===1?(y(e,r(e)+1),arguments[0]):(r(e),n())}}function lt(n,e){var t=n.$$events?.[e.type],i=po(t)?t.slice():t==null?[]:[t];for(var a of i)a.call(this,e)}function Zu(n,e,t){if(n==null)return e(void 0),t&&t(void 0),mi;const i=M(()=>n.subscribe(e,t));return i.unsubscribe?()=>i.unsubscribe():i}const za=[];function wp(n,e){return{subscribe:li(n,e).subscribe}}function li(n,e=mi){let t=null;const i=new Set;function a(l){if(Bu(n,l)&&(n=l,t)){const c=!za.length;for(const u of i)u[1](),za.push(u,n);if(c){for(let u=0;u<za.length;u+=2)za[u][0](za[u+1]);za.length=0}}}function s(l){a(l(n))}function o(l,c=mi){const u=[l,c];return i.add(u),i.size===1&&(t=e(a,s)||mi),l(n),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:a,update:s,subscribe:o}}function kp(n,e,t){const i=!Array.isArray(n),a=i?[n]:n;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return wp(t,(o,l)=>{let c=!1;const u=[];let d=0,f=mi;const h=()=>{if(d)return;f();const _=e(i?u[0]:u,o,l);s?o(_):f=typeof _=="function"?_:mi},v=a.map((_,b)=>Zu(_,m=>{u[b]=m,d&=~(1<<b),c&&h()},()=>{d|=1<<b}));return c=!0,h(),function(){fl(v),f(),c=!1}})}function Gu(n){let e;return Zu(n,t=>e=t)(),e}let Mo=!1,eu=Symbol();function It(n,e,t){const i=t[e]??={store:null,source:P(void 0),unsubscribe:mi};if(i.store!==n&&!(eu in t))if(i.unsubscribe(),i.store=n??null,n==null)i.source.v=void 0,i.unsubscribe=mi;else{var a=!0;i.unsubscribe=Zu(n,s=>{a?i.source.v=s:y(i.source,s)}),a=!1}return n&&eu in t?Gu(n):r(i.source)}function Kn(n,e){return n.set(e),e}function At(){const n={};function e(){gs(()=>{for(var t in n)n[t].unsubscribe();Ev(n,eu,{enumerable:!1,value:!0})})}return[n,e]}function Ay(n){var e=Mo;try{return Mo=!1,[n(),Mo]}finally{Mo=e}}const Ly={get(n,e){if(!n.exclude.includes(e))return r(n.version),e in n.special?n.special[e]():n.props[e]},set(n,e,t){if(!(e in n.special)){var i=Ht;try{ur(n.parent_effect),n.special[e]=te({get[e](){return n.props[e]}},e,Cv)}finally{ur(i)}}return n.special[e](t),wr(n.version),!0},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},deleteProperty(n,e){return n.exclude.includes(e)||(n.exclude.push(e),wr(n.version)),!0},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function Ot(n,e){return new Proxy({props:n,exclude:e,special:{},version:Ir(0),parent_effect:Ht},Ly)}const Ny={get(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(Ha(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i)return i[e]}},set(n,e,t){let i=n.props.length;for(;i--;){let a=n.props[i];Ha(a)&&(a=a());const s=_a(a,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(Ha(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i){const a=_a(i,e);return a&&!a.configurable&&(a.configurable=!0),a}}},has(n,e){if(e===or||e===Av)return!1;for(let t of n.props)if(Ha(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props)if(Ha(t)&&(t=t()),!!t){for(const i in t)e.includes(i)||e.push(i);for(const i of Object.getOwnPropertySymbols(t))e.includes(i)||e.push(i)}return e}};function tn(...n){return new Proxy({props:n},Ny)}function te(n,e,t,i){var a=!vs||(t&rb)!==0,s=(t&ab)!==0,o=(t&sb)!==0,l=i,c=!0,u=()=>(c&&(c=!1,l=o?M(i):i),l),d;if(s){var f=or in n||Av in n;d=_a(n,e)?.set??(f&&e in n?$=>n[e]=$:void 0)}var h,v=!1;s?[h,v]=Ay(()=>n[e]):h=n[e],h===void 0&&i!==void 0&&(h=u(),d&&(a&&$b(),d(h)));var _;if(a?_=()=>{var $=n[e];return $===void 0?u():(c=!0,$)}:_=()=>{var $=n[e];return $!==void 0&&(l=void 0),$===void 0?l:$},a&&(t&Cv)===0)return _;if(d){var b=n.$$legacy;return(function($,D){return arguments.length>0?((!a||!D||b||v)&&d(D?_():$),$):_()})}var m=!1,k=((t&ib)!==0?go:ne)(()=>(m=!1,_()));s&&r(k);var S=Ht;return(function($,D){if(arguments.length>0){const I=D?r(k):a&&s?Ka($):$;return y(k,I),m=!0,l!==void 0&&(l=I),$}return Gr&&m||(S.f&kr)!==0?k.v:r(k)})}class Aa extends Error{}class Ry extends Aa{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Fy extends Aa{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class qy extends Aa{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Ja extends Aa{}class Sp extends Aa{constructor(e){super(`Invalid unit ${e}`)}}class Nn extends Aa{}class Nr extends Aa{constructor(){super("Zone is an abstract class")}}const yt="numeric",Yi="short",bi="long",yl={year:yt,month:yt,day:yt},Tp={year:yt,month:Yi,day:yt},zy={year:yt,month:Yi,day:yt,weekday:Yi},$p={year:yt,month:bi,day:yt},Ip={year:yt,month:bi,day:yt,weekday:bi},Cp={hour:yt,minute:yt},Ep={hour:yt,minute:yt,second:yt},Op={hour:yt,minute:yt,second:yt,timeZoneName:Yi},Dp={hour:yt,minute:yt,second:yt,timeZoneName:bi},Pp={hour:yt,minute:yt,hourCycle:"h23"},Mp={hour:yt,minute:yt,second:yt,hourCycle:"h23"},Ap={hour:yt,minute:yt,second:yt,hourCycle:"h23",timeZoneName:Yi},Lp={hour:yt,minute:yt,second:yt,hourCycle:"h23",timeZoneName:bi},Np={year:yt,month:yt,day:yt,hour:yt,minute:yt},Rp={year:yt,month:yt,day:yt,hour:yt,minute:yt,second:yt},Fp={year:yt,month:Yi,day:yt,hour:yt,minute:yt},qp={year:yt,month:Yi,day:yt,hour:yt,minute:yt,second:yt},jy={year:yt,month:Yi,day:yt,weekday:Yi,hour:yt,minute:yt},zp={year:yt,month:bi,day:yt,hour:yt,minute:yt,timeZoneName:Yi},jp={year:yt,month:bi,day:yt,hour:yt,minute:yt,second:yt,timeZoneName:Yi},Up={year:yt,month:bi,day:yt,weekday:bi,hour:yt,minute:yt,timeZoneName:bi},Vp={year:yt,month:bi,day:yt,weekday:bi,hour:yt,minute:yt,second:yt,timeZoneName:bi};class _o{get type(){throw new Nr}get name(){throw new Nr}get ianaName(){return this.name}get isUniversal(){throw new Nr}offsetName(e,t){throw new Nr}formatOffset(e,t){throw new Nr}offset(e){throw new Nr}equals(e){throw new Nr}get isValid(){throw new Nr}}let fc=null;class ql extends _o{static get instance(){return fc===null&&(fc=new ql),fc}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return em(e,t,i)}formatOffset(e,t){return Ys(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const tu=new Map;function Uy(n){let e=tu.get(n);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),tu.set(n,e)),e}const Vy={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function By(n,e){const t=n.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,a,s,o,l,c,u,d]=i;return[o,a,s,l,c,u,d]}function Hy(n,e){const t=n.formatToParts(e),i=[];for(let a=0;a<t.length;a++){const{type:s,value:o}=t[a],l=Vy[s];s==="era"?i[l]=o:Dt(l)||(i[l]=parseInt(o,10))}return i}const hc=new Map;class Cr extends _o{static create(e){let t=hc.get(e);return t===void 0&&hc.set(e,t=new Cr(e)),t}static resetCache(){hc.clear(),tu.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Cr.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return em(e,t,i,this.name)}formatOffset(e,t){return Ys(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const i=Uy(this.name);let[a,s,o,l,c,u,d]=i.formatToParts?Hy(i,t):By(i,t);l==="BC"&&(a=-Math.abs(a)+1);const h=jl({year:a,month:s,day:o,hour:c===24?0:c,minute:u,second:d,millisecond:0});let v=+t;const _=v%1e3;return v-=_>=0?_:1e3+_,(h-v)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Qd={};function Wy(n,e={}){const t=JSON.stringify([n,e]);let i=Qd[t];return i||(i=new Intl.ListFormat(n,e),Qd[t]=i),i}const nu=new Map;function iu(n,e={}){const t=JSON.stringify([n,e]);let i=nu.get(t);return i===void 0&&(i=new Intl.DateTimeFormat(n,e),nu.set(t,i)),i}const ru=new Map;function Yy(n,e={}){const t=JSON.stringify([n,e]);let i=ru.get(t);return i===void 0&&(i=new Intl.NumberFormat(n,e),ru.set(t,i)),i}const au=new Map;function Ky(n,e={}){const{base:t,...i}=e,a=JSON.stringify([n,i]);let s=au.get(a);return s===void 0&&(s=new Intl.RelativeTimeFormat(n,e),au.set(a,s)),s}let qs=null;function Jy(){return qs||(qs=new Intl.DateTimeFormat().resolvedOptions().locale,qs)}const su=new Map;function Bp(n){let e=su.get(n);return e===void 0&&(e=new Intl.DateTimeFormat(n).resolvedOptions(),su.set(n,e)),e}const ou=new Map;function Zy(n){let e=ou.get(n);if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...Hp,...e}),ou.set(n,e)}return e}function Gy(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let i,a;try{i=iu(n).resolvedOptions(),a=n}catch{const c=n.substring(0,t);i=iu(c).resolvedOptions(),a=c}const{numberingSystem:s,calendar:o}=i;return[a,s,o]}}function Xy(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function Qy(n){const e=[];for(let t=1;t<=12;t++){const i=$t.utc(2009,t,1);e.push(n(i))}return e}function e_(n){const e=[];for(let t=1;t<=7;t++){const i=$t.utc(2016,11,13+t);e.push(n(i))}return e}function Ao(n,e,t,i){const a=n.listingMode();return a==="error"?null:a==="en"?t(e):i(e)}function t_(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||Bp(n.locale).numberingSystem==="latn"}class n_{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:a,floor:s,...o}=i;if(!t||Object.keys(o).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=Yy(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):nd(e,3);return gn(t,this.padTo)}}}class i_{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Cr.create(l).valid?(a=l,this.dt=e):(a="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,a=e.zone.name):(a="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||a,this.dtf=iu(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class r_{constructor(e,t,i){this.opts={style:"long",...i},!t&&Xp()&&(this.rtf=Ky(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):$_(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Hp={firstDay:1,minimalDays:4,weekend:[6,7]};class Jt{static fromOpts(e){return Jt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,a,s=!1){const o=e||cn.defaultLocale,l=o||(s?"en-US":Jy()),c=t||cn.defaultNumberingSystem,u=i||cn.defaultOutputCalendar,d=cu(a)||cn.defaultWeekSettings;return new Jt(l,c,u,d,o)}static resetCache(){qs=null,nu.clear(),ru.clear(),au.clear(),su.clear(),ou.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:a}={}){return Jt.create(e,t,i,a)}constructor(e,t,i,a,s){const[o,l,c]=Gy(e);this.locale=o,this.numberingSystem=t||l||null,this.outputCalendar=i||c||null,this.weekSettings=a,this.intl=Xy(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=t_(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Jt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,cu(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Ao(this,e,im,()=>{const i=this.intl==="ja"||this.intl.startsWith("ja-");t&=!i;const a=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";if(!this.monthsCache[s][e]){const o=i?l=>this.dtFormatter(l,a).format():l=>this.extract(l,a,"month");this.monthsCache[s][e]=Qy(o)}return this.monthsCache[s][e]})}weekdays(e,t=!1){return Ao(this,e,sm,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},a=t?"format":"standalone";return this.weekdaysCache[a][e]||(this.weekdaysCache[a][e]=e_(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[a][e]})}meridiems(){return Ao(this,void 0,()=>om,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[$t.utc(2016,11,13,9),$t.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Ao(this,e,lm,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[$t.utc(-40,1,1),$t.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const a=this.dtFormatter(e,t),s=a.formatToParts(),o=s.find(l=>l.type.toLowerCase()===i);return o?o.value:null}numberFormatter(e={}){return new n_(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new i_(e,this.intl,t)}relFormatter(e={}){return new r_(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Wy(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Bp(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Qp()?Zy(this.locale):Hp}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let vc=null;class Yn extends _o{static get utcInstance(){return vc===null&&(vc=new Yn(0)),vc}static instance(e){return e===0?Yn.utcInstance:new Yn(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Yn(Ul(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ys(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ys(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Ys(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class a_ extends _o{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function zr(n,e){if(Dt(n)||n===null)return e;if(n instanceof _o)return n;if(d_(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?ql.instance:t==="utc"||t==="gmt"?Yn.utcInstance:Yn.parseSpecifier(t)||Cr.create(n)}else return Kr(n)?Yn.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new a_(n)}const Xu={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼]",gujr:"[à«¦-à«¯]",hanidec:"[ã|ä¸|äº|ä¸|å|äº|å­|ä¸|å«|ä¹]",khmr:"[á -á©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»]",limb:"[á¥-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ]",mymr:"[á-á]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹]",tibt:"[à¼ -à¼©]",latn:"\\d"},ef={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},s_=Xu.hanidec.replace(/[\[|\]]/g,"").split("");function o_(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);if(n[t].search(Xu.hanidec)!==-1)e+=s_.indexOf(n[t]);else for(const a in ef){const[s,o]=ef[a];i>=s&&i<=o&&(e+=i-s)}}return parseInt(e,10)}else return e}const lu=new Map;function l_(){lu.clear()}function qi({numberingSystem:n},e=""){const t=n||"latn";let i=lu.get(t);i===void 0&&(i=new Map,lu.set(t,i));let a=i.get(e);return a===void 0&&(a=new RegExp(`${Xu[t]}${e}`),i.set(e,a)),a}let tf=()=>Date.now(),nf="system",rf=null,af=null,sf=null,of=60,lf,cf=null;class cn{static get now(){return tf}static set now(e){tf=e}static set defaultZone(e){nf=e}static get defaultZone(){return zr(nf,ql.instance)}static get defaultLocale(){return rf}static set defaultLocale(e){rf=e}static get defaultNumberingSystem(){return af}static set defaultNumberingSystem(e){af=e}static get defaultOutputCalendar(){return sf}static set defaultOutputCalendar(e){sf=e}static get defaultWeekSettings(){return cf}static set defaultWeekSettings(e){cf=cu(e)}static get twoDigitCutoffYear(){return of}static set twoDigitCutoffYear(e){of=e%100}static get throwOnInvalid(){return lf}static set throwOnInvalid(e){lf=e}static resetCaches(){Jt.resetCache(),Cr.resetCache(),$t.resetCache(),l_()}}class Vi{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Wp=[0,31,59,90,120,151,181,212,243,273,304,334],Yp=[0,31,60,91,121,152,182,213,244,274,305,335];function Oi(n,e){return new Vi("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function Qu(n,e,t){const i=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const a=i.getUTCDay();return a===0?7:a}function Kp(n,e,t){return t+(xo(n)?Yp:Wp)[e-1]}function Jp(n,e){const t=xo(n)?Yp:Wp,i=t.findIndex(s=>s<e),a=e-t[i];return{month:i+1,day:a}}function ed(n,e){return(n-e+7)%7+1}function _l(n,e=4,t=1){const{year:i,month:a,day:s}=n,o=Kp(i,a,s),l=ed(Qu(i,a,s),t);let c=Math.floor((o-l+14-e)/7),u;return c<1?(u=i-1,c=ao(u,e,t)):c>ao(i,e,t)?(u=i+1,c=1):u=i,{weekYear:u,weekNumber:c,weekday:l,...Vl(n)}}function uf(n,e=4,t=1){const{weekYear:i,weekNumber:a,weekday:s}=n,o=ed(Qu(i,1,e),t),l=Qa(i);let c=a*7+s-o-7+e,u;c<1?(u=i-1,c+=Qa(u)):c>l?(u=i+1,c-=Qa(i)):u=i;const{month:d,day:f}=Jp(u,c);return{year:u,month:d,day:f,...Vl(n)}}function pc(n){const{year:e,month:t,day:i}=n,a=Kp(e,t,i);return{year:e,ordinal:a,...Vl(n)}}function df(n){const{year:e,ordinal:t}=n,{month:i,day:a}=Jp(e,t);return{year:e,month:i,day:a,...Vl(n)}}function ff(n,e){if(!Dt(n.localWeekday)||!Dt(n.localWeekNumber)||!Dt(n.localWeekYear)){if(!Dt(n.weekday)||!Dt(n.weekNumber)||!Dt(n.weekYear))throw new Ja("Cannot mix locale-based week fields with ISO-based week fields");return Dt(n.localWeekday)||(n.weekday=n.localWeekday),Dt(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),Dt(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function c_(n,e=4,t=1){const i=zl(n.weekYear),a=Di(n.weekNumber,1,ao(n.weekYear,e,t)),s=Di(n.weekday,1,7);return i?a?s?!1:Oi("weekday",n.weekday):Oi("week",n.weekNumber):Oi("weekYear",n.weekYear)}function u_(n){const e=zl(n.year),t=Di(n.ordinal,1,Qa(n.year));return e?t?!1:Oi("ordinal",n.ordinal):Oi("year",n.year)}function Zp(n){const e=zl(n.year),t=Di(n.month,1,12),i=Di(n.day,1,xl(n.year,n.month));return e?t?i?!1:Oi("day",n.day):Oi("month",n.month):Oi("year",n.year)}function Gp(n){const{hour:e,minute:t,second:i,millisecond:a}=n,s=Di(e,0,23)||e===24&&t===0&&i===0&&a===0,o=Di(t,0,59),l=Di(i,0,59),c=Di(a,0,999);return s?o?l?c?!1:Oi("millisecond",a):Oi("second",i):Oi("minute",t):Oi("hour",e)}function Dt(n){return typeof n>"u"}function Kr(n){return typeof n=="number"}function zl(n){return typeof n=="number"&&n%1===0}function d_(n){return typeof n=="string"}function f_(n){return Object.prototype.toString.call(n)==="[object Date]"}function Xp(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Qp(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function h_(n){return Array.isArray(n)?n:[n]}function hf(n,e,t){if(n.length!==0)return n.reduce((i,a)=>{const s=[e(a),a];return i&&t(i[0],s[0])===i[0]?i:s},null)[1]}function v_(n,e){return e.reduce((t,i)=>(t[i]=n[i],t),{})}function os(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function cu(n){if(n==null)return null;if(typeof n!="object")throw new Nn("Week settings must be an object");if(!Di(n.firstDay,1,7)||!Di(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!Di(e,1,7)))throw new Nn("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function Di(n,e,t){return zl(n)&&n>=e&&n<=t}function p_(n,e){return n-e*Math.floor(n/e)}function gn(n,e=2){const t=n<0;let i;return t?i="-"+(""+-n).padStart(e,"0"):i=(""+n).padStart(e,"0"),i}function qr(n){if(!(Dt(n)||n===null||n===""))return parseInt(n,10)}function aa(n){if(!(Dt(n)||n===null||n===""))return parseFloat(n)}function td(n){if(!(Dt(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function nd(n,e,t="round"){const i=10**e;switch(t){case"expand":return n>0?Math.ceil(n*i)/i:Math.floor(n*i)/i;case"trunc":return Math.trunc(n*i)/i;case"round":return Math.round(n*i)/i;case"floor":return Math.floor(n*i)/i;case"ceil":return Math.ceil(n*i)/i;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function xo(n){return n%4===0&&(n%100!==0||n%400===0)}function Qa(n){return xo(n)?366:365}function xl(n,e){const t=p_(e-1,12)+1,i=n+(e-t)/12;return t===2?xo(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function jl(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function vf(n,e,t){return-ed(Qu(n,1,e),t)+e-1}function ao(n,e=4,t=1){const i=vf(n,e,t),a=vf(n+1,e,t);return(Qa(n)-i+a)/7}function uu(n){return n>99?n:n>cn.twoDigitCutoffYear?1900+n:2e3+n}function em(n,e,t,i=null){const a=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:e,...s},l=new Intl.DateTimeFormat(t,o).formatToParts(a).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function Ul(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,a=t<0||Object.is(t,-0)?-i:i;return t*60+a}function tm(n){const e=Number(n);if(typeof n=="boolean"||n===""||!Number.isFinite(e))throw new Nn(`Invalid unit value ${n}`);return e}function wl(n,e){const t={};for(const i in n)if(os(n,i)){const a=n[i];if(a==null)continue;t[e(i)]=tm(a)}return t}function Ys(n,e){const t=Math.trunc(Math.abs(n/60)),i=Math.trunc(Math.abs(n%60)),a=n>=0?"+":"-";switch(e){case"short":return`${a}${gn(t,2)}:${gn(i,2)}`;case"narrow":return`${a}${t}${i>0?`:${i}`:""}`;case"techie":return`${a}${gn(t,2)}${gn(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Vl(n){return v_(n,["hour","minute","second","millisecond"])}const m_=["January","February","March","April","May","June","July","August","September","October","November","December"],nm=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g_=["J","F","M","A","M","J","J","A","S","O","N","D"];function im(n){switch(n){case"narrow":return[...g_];case"short":return[...nm];case"long":return[...m_];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const rm=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],am=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],b_=["M","T","W","T","F","S","S"];function sm(n){switch(n){case"narrow":return[...b_];case"short":return[...am];case"long":return[...rm];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const om=["AM","PM"],y_=["Before Christ","Anno Domini"],__=["BC","AD"],x_=["B","A"];function lm(n){switch(n){case"narrow":return[...x_];case"short":return[...__];case"long":return[...y_];default:return null}}function w_(n){return om[n.hour<12?0:1]}function k_(n,e){return sm(e)[n.weekday-1]}function S_(n,e){return im(e)[n.month-1]}function T_(n,e){return lm(e)[n.year<0?0:1]}function $_(n,e,t="always",i=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){const f=n==="days";switch(e){case 1:return f?"tomorrow":`next ${a[n][0]}`;case-1:return f?"yesterday":`last ${a[n][0]}`;case 0:return f?"today":`this ${a[n][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,u=a[n],d=i?c?u[1]:u[2]||u[1]:c?a[n][0]:n;return o?`${l} ${d} ago`:`in ${l} ${d}`}function pf(n,e){let t="";for(const i of n)i.literal?t+=i.val:t+=e(i.val);return t}const I_={D:yl,DD:Tp,DDD:$p,DDDD:Ip,t:Cp,tt:Ep,ttt:Op,tttt:Dp,T:Pp,TT:Mp,TTT:Ap,TTTT:Lp,f:Np,ff:Fp,fff:zp,ffff:Up,F:Rp,FF:qp,FFF:jp,FFFF:Vp};class Fn{static create(e,t={}){return new Fn(e,t)}static parseFormat(e){let t=null,i="",a=!1;const s=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?((i.length>0||a)&&s.push({literal:a||/^\s+$/.test(i),val:i===""?"'":i}),t=null,i="",a=!a):a||l===t?i+=l:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=l,t=l)}return i.length>0&&s.push({literal:a||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return I_[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,i=void 0){if(this.opts.forceSimple)return gn(e,t);const a={...this.opts};return t>0&&(a.padTo=t),i&&(a.signDisplay=i),this.loc.numberFormatter(a).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(v,_)=>this.loc.extract(e,v,_),o=v=>e.isOffsetFixed&&e.offset===0&&v.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,v.format):"",l=()=>i?w_(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(v,_)=>i?S_(e,v):s(_?{month:v}:{month:v,day:"numeric"},"month"),u=(v,_)=>i?k_(e,v):s(_?{weekday:v}:{weekday:v,month:"long",day:"numeric"},"weekday"),d=v=>{const _=Fn.macroTokenToFormatOpts(v);return _?this.formatWithSystemDefault(e,_):v},f=v=>i?T_(e,v):s({era:v},"era"),h=v=>{switch(v){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return a?s({day:"numeric"},"day"):this.num(e.day);case"dd":return a?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return a?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return a?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return a?s({month:"numeric"},"month"):this.num(e.month);case"MM":return a?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return a?s({year:"numeric"},"year"):this.num(e.year);case"yy":return a?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return a?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return a?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(v)}};return pf(Fn.parseFormat(t),h)}formatDurationFromString(e,t){const i=this.opts.signMode==="negativeLargestOnly"?-1:1,a=d=>{switch(d[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(d,f)=>h=>{const v=a(h);if(v){const _=f.isNegativeDuration&&v!==f.largestUnit?i:1;let b;return this.opts.signMode==="negativeLargestOnly"&&v!==f.largestUnit?b="never":this.opts.signMode==="all"?b="always":b="auto",this.num(d.get(v)*_,h.length,b)}else return h},o=Fn.parseFormat(t),l=o.reduce((d,{literal:f,val:h})=>f?d:d.concat(h),[]),c=e.shiftTo(...l.map(a).filter(d=>d)),u={isNegativeDuration:c<0,largestUnit:Object.keys(c.values)[0]};return pf(o,s(c,u))}}const cm=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function _s(...n){const e=n.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function xs(...n){return e=>n.reduce(([t,i,a],s)=>{const[o,l,c]=s(e,a);return[{...t,...o},l||i,c]},[{},null,1]).slice(0,2)}function ws(n,...e){if(n==null)return[null,null];for(const[t,i]of e){const a=t.exec(n);if(a)return i(a)}return[null,null]}function um(...n){return(e,t)=>{const i={};let a;for(a=0;a<n.length;a++)i[n[a]]=qr(e[t+a]);return[i,null,t+a]}}const dm=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,C_=`(?:${dm.source}?(?:\\[(${cm.source})\\])?)?`,id=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,fm=RegExp(`${id.source}${C_}`),rd=RegExp(`(?:[Tt]${fm.source})?`),E_=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,O_=/(\d{4})-?W(\d\d)(?:-?(\d))?/,D_=/(\d{4})-?(\d{3})/,P_=um("weekYear","weekNumber","weekDay"),M_=um("year","ordinal"),A_=/(\d{4})-(\d\d)-(\d\d)/,hm=RegExp(`${id.source} ?(?:${dm.source}|(${cm.source}))?`),L_=RegExp(`(?: ${hm.source})?`);function es(n,e,t){const i=n[e];return Dt(i)?t:qr(i)}function N_(n,e){return[{year:es(n,e),month:es(n,e+1,1),day:es(n,e+2,1)},null,e+3]}function ks(n,e){return[{hours:es(n,e,0),minutes:es(n,e+1,0),seconds:es(n,e+2,0),milliseconds:td(n[e+3])},null,e+4]}function wo(n,e){const t=!n[e]&&!n[e+1],i=Ul(n[e+1],n[e+2]),a=t?null:Yn.instance(i);return[{},a,e+3]}function ko(n,e){const t=n[e]?Cr.create(n[e]):null;return[{},t,e+1]}const R_=RegExp(`^T?${id.source}$`),F_=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function q_(n){const[e,t,i,a,s,o,l,c,u]=n,d=e[0]==="-",f=c&&c[0]==="-",h=(v,_=!1)=>v!==void 0&&(_||v&&d)?-v:v;return[{years:h(aa(t)),months:h(aa(i)),weeks:h(aa(a)),days:h(aa(s)),hours:h(aa(o)),minutes:h(aa(l)),seconds:h(aa(c),c==="-0"),milliseconds:h(td(u),f)}]}const z_={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ad(n,e,t,i,a,s,o){const l={year:e.length===2?uu(qr(e)):qr(e),month:nm.indexOf(t)+1,day:qr(i),hour:qr(a),minute:qr(s)};return o&&(l.second=qr(o)),n&&(l.weekday=n.length>3?rm.indexOf(n)+1:am.indexOf(n)+1),l}const j_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function U_(n){const[,e,t,i,a,s,o,l,c,u,d,f]=n,h=ad(e,a,i,t,s,o,l);let v;return c?v=z_[c]:u?v=0:v=Ul(d,f),[h,new Yn(v)]}function V_(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const B_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,H_=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,W_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function mf(n){const[,e,t,i,a,s,o,l]=n;return[ad(e,a,i,t,s,o,l),Yn.utcInstance]}function Y_(n){const[,e,t,i,a,s,o,l]=n;return[ad(e,l,t,i,a,s,o),Yn.utcInstance]}const K_=_s(E_,rd),J_=_s(O_,rd),Z_=_s(D_,rd),G_=_s(fm),vm=xs(N_,ks,wo,ko),X_=xs(P_,ks,wo,ko),Q_=xs(M_,ks,wo,ko),ex=xs(ks,wo,ko);function tx(n){return ws(n,[K_,vm],[J_,X_],[Z_,Q_],[G_,ex])}function nx(n){return ws(V_(n),[j_,U_])}function ix(n){return ws(n,[B_,mf],[H_,mf],[W_,Y_])}function rx(n){return ws(n,[F_,q_])}const ax=xs(ks);function sx(n){return ws(n,[R_,ax])}const ox=_s(A_,L_),lx=_s(hm),cx=xs(ks,wo,ko);function ux(n){return ws(n,[ox,vm],[lx,cx])}const gf="Invalid Duration",pm={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},dx={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...pm},Ti=146097/400,ja=146097/4800,fx={years:{quarters:4,months:12,weeks:Ti/7,days:Ti,hours:Ti*24,minutes:Ti*24*60,seconds:Ti*24*60*60,milliseconds:Ti*24*60*60*1e3},quarters:{months:3,weeks:Ti/28,days:Ti/4,hours:Ti*24/4,minutes:Ti*24*60/4,seconds:Ti*24*60*60/4,milliseconds:Ti*24*60*60*1e3/4},months:{weeks:ja/7,days:ja,hours:ja*24,minutes:ja*24*60,seconds:ja*24*60*60,milliseconds:ja*24*60*60*1e3},...pm},ga=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],hx=ga.slice(0).reverse();function vr(n,e,t=!1){const i={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new jt(i)}function mm(n,e){let t=e.milliseconds??0;for(const i of hx.slice(1))e[i]&&(t+=e[i]*n[i].milliseconds);return t}function bf(n,e){const t=mm(n,e)<0?-1:1;ga.reduceRight((i,a)=>{if(Dt(e[a]))return i;if(i){const s=e[i]*t,o=n[a][i],l=Math.floor(s/o);e[a]+=l*t,e[i]-=l*o*t}return a},null),ga.reduce((i,a)=>{if(Dt(e[a]))return i;if(i){const s=e[i]%1;e[i]-=s,e[a]+=s*n[i][a]}return a},null)}function yf(n){const e={};for(const[t,i]of Object.entries(n))i!==0&&(e[t]=i);return e}class jt{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?fx:dx;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Jt.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return jt.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Nn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new jt({values:wl(e,jt.normalizeUnit),loc:Jt.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Kr(e))return jt.fromMillis(e);if(jt.isDuration(e))return e;if(typeof e=="object")return jt.fromObject(e);throw new Nn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=rx(e);return i?jt.fromObject(i,t):jt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=sx(e);return i?jt.fromObject(i,t):jt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Nn("need to specify a reason the Duration is invalid");const i=e instanceof Vi?e:new Vi(e,t);if(cn.throwOnInvalid)throw new qy(i);return new jt({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Sp(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Fn.create(this.loc,i).formatDurationFromString(this,e):gf}toHuman(e={}){if(!this.isValid)return gf;const t=e.showZeros!==!1,i=ga.map(a=>{const s=this.values[a];return Dt(s)||s===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:a.slice(0,-1)}).format(s)}).filter(a=>a);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=nd(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},$t.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?mm(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=jt.fromDurationLike(e),i={};for(const a of ga)(os(t.values,a)||os(this.values,a))&&(i[a]=t.get(a)+this.get(a));return vr(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=jt.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=tm(e(this.values[i],i));return vr(this,{values:t},!0)}get(e){return this[jt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...wl(e,jt.normalizeUnit)};return vr(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:a}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:a,conversionAccuracy:i};return vr(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return bf(this.matrix,e),vr(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=yf(this.normalize().shiftToAll().toObject());return vr(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>jt.normalizeUnit(o));const t={},i={},a=this.toObject();let s;for(const o of ga)if(e.indexOf(o)>=0){s=o;let l=0;for(const u in i)l+=this.matrix[u][o]*i[u],i[u]=0;Kr(a[o])&&(l+=a[o]);const c=Math.trunc(l);t[o]=c,i[o]=(l*1e3-c*1e3)/1e3}else Kr(a[o])&&(i[o]=a[o]);for(const o in i)i[o]!==0&&(t[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return bf(this.matrix,t),vr(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return vr(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=yf(this.values);return vr(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,a){return i===void 0||i===0?a===void 0||a===0:i===a}for(const i of ga)if(!t(this.values[i],e.values[i]))return!1;return!0}}const Ua="Invalid Interval";function vx(n,e){return!n||!n.isValid?ln.invalid("missing or invalid start"):!e||!e.isValid?ln.invalid("missing or invalid end"):e<n?ln.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class ln{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Nn("need to specify a reason the Interval is invalid");const i=e instanceof Vi?e:new Vi(e,t);if(cn.throwOnInvalid)throw new Fy(i);return new ln({invalid:i})}static fromDateTimes(e,t){const i=Ps(e),a=Ps(t),s=vx(i,a);return s??new ln({start:i,end:a})}static after(e,t){const i=jt.fromDurationLike(t),a=Ps(e);return ln.fromDateTimes(a,a.plus(i))}static before(e,t){const i=jt.fromDurationLike(t),a=Ps(e);return ln.fromDateTimes(a.minus(i),a)}static fromISO(e,t){const[i,a]=(e||"").split("/",2);if(i&&a){let s,o;try{s=$t.fromISO(i,t),o=s.isValid}catch{o=!1}let l,c;try{l=$t.fromISO(a,t),c=l.isValid}catch{c=!1}if(o&&c)return ln.fromDateTimes(s,l);if(o){const u=jt.fromISO(a,t);if(u.isValid)return ln.after(s,u)}else if(c){const u=jt.fromISO(i,t);if(u.isValid)return ln.before(l,u)}}return ln.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let a;return t?.useLocaleWeeks?a=this.end.reconfigure({locale:i.locale}):a=this.end,a=a.startOf(e,t),Math.floor(a.diff(i,e).get(e))+(a.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?ln.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Ps).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),i=[];let{s:a}=this,s=0;for(;a<this.e;){const o=t[s]||this.e,l=+o>+this.e?this.e:o;i.push(ln.fromDateTimes(a,l)),a=l,s+=1}return i}splitBy(e){const t=jt.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,a=1,s;const o=[];for(;i<this.e;){const l=this.start.plus(t.mapUnits(c=>c*a));s=+l>+this.e?this.e:l,o.push(ln.fromDateTimes(i,s)),i=s,a+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:ln.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return ln.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((a,s)=>a.s-s.s).reduce(([a,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[a,s.union(o)]:[a.concat([s]),o]:[a,o],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const a=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((c,u)=>c.time-u.time);for(const c of l)i+=c.type==="s"?1:-1,i===1?t=c.time:(t&&+t!=+c.time&&a.push(ln.fromDateTimes(t,c.time)),t=null);return ln.merge(a)}difference(...e){return ln.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â ${this.e.toISO()})`:Ua}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=yl,t={}){return this.isValid?Fn.create(this.s.loc.clone(t),e).formatInterval(this):Ua}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Ua}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ua}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Ua}toFormat(e,{separator:t=" â "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Ua}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):jt.invalid(this.invalidReason)}mapEndpoints(e){return ln.fromDateTimes(e(this.s),e(this.e))}}class Lo{static hasDST(e=cn.defaultZone){const t=$t.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Cr.isValidZone(e)}static normalizeZone(e){return zr(e,cn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Jt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Jt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Jt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null,outputCalendar:s="gregory"}={}){return(a||Jt.create(t,i,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null,outputCalendar:s="gregory"}={}){return(a||Jt.create(t,i,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null}={}){return(a||Jt.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:a=null}={}){return(a||Jt.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Jt.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Jt.create(t,null,"gregory").eras(e)}static features(){return{relative:Xp(),localeWeek:Qp()}}}function _f(n,e){const t=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(n);return Math.floor(jt.fromMillis(i).as("days"))}function px(n,e,t){const i=[["years",(c,u)=>u.year-c.year],["quarters",(c,u)=>u.quarter-c.quarter+(u.year-c.year)*4],["months",(c,u)=>u.month-c.month+(u.year-c.year)*12],["weeks",(c,u)=>{const d=_f(c,u);return(d-d%7)/7}],["days",_f]],a={},s=n;let o,l;for(const[c,u]of i)t.indexOf(c)>=0&&(o=c,a[c]=u(n,e),l=s.plus(a),l>e?(a[c]--,n=s.plus(a),n>e&&(l=n,a[c]--,n=s.plus(a))):n=l);return[n,a,l,o]}function mx(n,e,t,i){let[a,s,o,l]=px(n,e,t);const c=e-a,u=t.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);u.length===0&&(o<e&&(o=a.plus({[l]:1})),o!==a&&(s[l]=(s[l]||0)+c/(o-a)));const d=jt.fromObject(s,i);return u.length>0?jt.fromMillis(c,i).shiftTo(...u).plus(d):d}const gx="missing Intl.DateTimeFormat.formatToParts support";function Wt(n,e=t=>t){return{regex:n,deser:([t])=>e(o_(t))}}const bx="Â ",gm=`[ ${bx}]`,bm=new RegExp(gm,"g");function yx(n){return n.replace(/\./g,"\\.?").replace(bm,gm)}function xf(n){return n.replace(/\./g,"").replace(bm," ").toLowerCase()}function zi(n,e){return n===null?null:{regex:RegExp(n.map(yx).join("|")),deser:([t])=>n.findIndex(i=>xf(t)===xf(i))+e}}function wf(n,e){return{regex:n,deser:([,t,i])=>Ul(t,i),groups:e}}function No(n){return{regex:n,deser:([e])=>e}}function _x(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function xx(n,e){const t=qi(e),i=qi(e,"{2}"),a=qi(e,"{3}"),s=qi(e,"{4}"),o=qi(e,"{6}"),l=qi(e,"{1,2}"),c=qi(e,"{1,3}"),u=qi(e,"{1,6}"),d=qi(e,"{1,9}"),f=qi(e,"{2,4}"),h=qi(e,"{4,6}"),v=m=>({regex:RegExp(_x(m.val)),deser:([k])=>k,literal:!0}),b=(m=>{if(n.literal)return v(m);switch(m.val){case"G":return zi(e.eras("short"),0);case"GG":return zi(e.eras("long"),0);case"y":return Wt(u);case"yy":return Wt(f,uu);case"yyyy":return Wt(s);case"yyyyy":return Wt(h);case"yyyyyy":return Wt(o);case"M":return Wt(l);case"MM":return Wt(i);case"MMM":return zi(e.months("short",!0),1);case"MMMM":return zi(e.months("long",!0),1);case"L":return Wt(l);case"LL":return Wt(i);case"LLL":return zi(e.months("short",!1),1);case"LLLL":return zi(e.months("long",!1),1);case"d":return Wt(l);case"dd":return Wt(i);case"o":return Wt(c);case"ooo":return Wt(a);case"HH":return Wt(i);case"H":return Wt(l);case"hh":return Wt(i);case"h":return Wt(l);case"mm":return Wt(i);case"m":return Wt(l);case"q":return Wt(l);case"qq":return Wt(i);case"s":return Wt(l);case"ss":return Wt(i);case"S":return Wt(c);case"SSS":return Wt(a);case"u":return No(d);case"uu":return No(l);case"uuu":return Wt(t);case"a":return zi(e.meridiems(),0);case"kkkk":return Wt(s);case"kk":return Wt(f,uu);case"W":return Wt(l);case"WW":return Wt(i);case"E":case"c":return Wt(t);case"EEE":return zi(e.weekdays("short",!1),1);case"EEEE":return zi(e.weekdays("long",!1),1);case"ccc":return zi(e.weekdays("short",!0),1);case"cccc":return zi(e.weekdays("long",!0),1);case"Z":case"ZZ":return wf(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return wf(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return No(/[a-z_+-/]{1,256}?/i);case" ":return No(/[^\S\n\r]/);default:return v(m)}})(n)||{invalidReason:gx};return b.token=n,b}const wx={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function kx(n,e,t){const{type:i,value:a}=n;if(i==="literal"){const c=/^\s+$/.test(a);return{literal:!c,val:c?" ":a}}const s=e[i];let o=i;i==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let l=wx[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function Sx(n){return[`^${n.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,n]}function Tx(n,e,t){const i=n.match(e);if(i){const a={};let s=1;for(const o in t)if(os(t,o)){const l=t[o],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(a[l.token.val[0]]=l.deser(i.slice(s,s+c))),s+=c}return[i,a]}else return[i,{}]}function $x(n){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return Dt(n.z)||(t=Cr.create(n.z)),Dt(n.Z)||(t||(t=new Yn(n.Z)),i=n.Z),Dt(n.q)||(n.M=(n.q-1)*3+1),Dt(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),Dt(n.u)||(n.S=td(n.u)),[Object.keys(n).reduce((s,o)=>{const l=e(o);return l&&(s[l]=n[o]),s},{}),t,i]}let mc=null;function Ix(){return mc||(mc=$t.fromMillis(1555555555555)),mc}function Cx(n,e){if(n.literal)return n;const t=Fn.macroTokenToFormatOpts(n.val),i=wm(t,e);return i==null||i.includes(void 0)?n:i}function ym(n,e){return Array.prototype.concat(...n.map(t=>Cx(t,e)))}class _m{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=ym(Fn.parseFormat(t),e),this.units=this.tokens.map(i=>xx(i,e)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,a]=Sx(this.units);this.regex=RegExp(i,"i"),this.handlers=a}}explainFromTokens(e){if(this.isValid){const[t,i]=Tx(e,this.regex,this.handlers),[a,s,o]=i?$x(i):[null,null,void 0];if(os(i,"a")&&os(i,"H"))throw new Ja("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:i,result:a,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function xm(n,e,t){return new _m(n,t).explainFromTokens(e)}function Ex(n,e,t){const{result:i,zone:a,specificOffset:s,invalidReason:o}=xm(n,e,t);return[i,a,s,o]}function wm(n,e){if(!n)return null;const i=Fn.create(e,n).dtFormatter(Ix()),a=i.formatToParts(),s=i.resolvedOptions();return a.map(o=>kx(o,n,s))}const gc="Invalid DateTime",kf=864e13;function zs(n){return new Vi("unsupported zone",`the zone "${n.name}" is not supported`)}function bc(n){return n.weekData===null&&(n.weekData=_l(n.c)),n.weekData}function yc(n){return n.localWeekData===null&&(n.localWeekData=_l(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function sa(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new $t({...t,...e,old:t})}function km(n,e,t){let i=n-e*60*1e3;const a=t.offset(i);if(e===a)return[i,e];i-=(a-e)*60*1e3;const s=t.offset(i);return a===s?[i,a]:[n-Math.min(a,s)*60*1e3,Math.max(a,s)]}function Ro(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function il(n,e,t){return km(jl(n),e,t)}function Sf(n,e){const t=n.o,i=n.c.year+Math.trunc(e.years),a=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:i,month:a,day:Math.min(n.c.day,xl(i,a))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=jt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=jl(s);let[c,u]=km(l,t,n.zone);return o!==0&&(c+=o,u=n.zone.offset(c)),{ts:c,o:u}}function Va(n,e,t,i,a,s){const{setZone:o,zone:l}=t;if(n&&Object.keys(n).length!==0||e){const c=e||l,u=$t.fromObject(n,{...t,zone:c,specificOffset:s});return o?u:u.setZone(l)}else return $t.invalid(new Vi("unparsable",`the input "${a}" can't be parsed as ${i}`))}function Fo(n,e,t=!0){return n.isValid?Fn.create(Jt.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function _c(n,e,t){const i=n.c.year>9999||n.c.year<0;let a="";if(i&&n.c.year>=0&&(a+="+"),a+=gn(n.c.year,i?6:4),t==="year")return a;if(e){if(a+="-",a+=gn(n.c.month),t==="month")return a;a+="-"}else if(a+=gn(n.c.month),t==="month")return a;return a+=gn(n.c.day),a}function Tf(n,e,t,i,a,s,o){let l=!t||n.c.millisecond!==0||n.c.second!==0,c="";switch(o){case"day":case"month":case"year":break;default:if(c+=gn(n.c.hour),o==="hour")break;if(e){if(c+=":",c+=gn(n.c.minute),o==="minute")break;l&&(c+=":",c+=gn(n.c.second))}else{if(c+=gn(n.c.minute),o==="minute")break;l&&(c+=gn(n.c.second))}if(o==="second")break;l&&(!i||n.c.millisecond!==0)&&(c+=".",c+=gn(n.c.millisecond,3))}return a&&(n.isOffsetFixed&&n.offset===0&&!s?c+="Z":n.o<0?(c+="-",c+=gn(Math.trunc(-n.o/60)),c+=":",c+=gn(Math.trunc(-n.o%60))):(c+="+",c+=gn(Math.trunc(n.o/60)),c+=":",c+=gn(Math.trunc(n.o%60)))),s&&(c+="["+n.zone.ianaName+"]"),c}const Sm={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ox={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Dx={ordinal:1,hour:0,minute:0,second:0,millisecond:0},rl=["year","month","day","hour","minute","second","millisecond"],Px=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Mx=["year","ordinal","hour","minute","second","millisecond"];function al(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new Sp(n);return e}function $f(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return al(n)}}function Ax(n){if(js===void 0&&(js=cn.now()),n.type!=="iana")return n.offset(js);const e=n.name;let t=du.get(e);return t===void 0&&(t=n.offset(js),du.set(e,t)),t}function If(n,e){const t=zr(e.zone,cn.defaultZone);if(!t.isValid)return $t.invalid(zs(t));const i=Jt.fromObject(e);let a,s;if(Dt(n.year))a=cn.now();else{for(const c of rl)Dt(n[c])&&(n[c]=Sm[c]);const o=Zp(n)||Gp(n);if(o)return $t.invalid(o);const l=Ax(t);[a,s]=il(n,l,t)}return new $t({ts:a,zone:t,loc:i,o:s})}function Cf(n,e,t){const i=Dt(t.round)?!0:t.round,a=Dt(t.rounding)?"trunc":t.rounding,s=(l,c)=>(l=nd(l,i||t.calendary?0:2,t.calendary?"round":a),e.loc.clone(t).relFormatter(t).format(l,c)),o=l=>t.calendary?e.hasSame(n,l)?0:e.startOf(l).diff(n.startOf(l),l).get(l):e.diff(n,l).get(l);if(t.unit)return s(o(t.unit),t.unit);for(const l of t.units){const c=o(l);if(Math.abs(c)>=1)return s(c,l)}return s(n>e?-0:0,t.units[t.units.length-1])}function Ef(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let js;const du=new Map;class $t{constructor(e){const t=e.zone||cn.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new Vi("invalid input"):null)||(t.isValid?null:zs(t));this.ts=Dt(e.ts)?cn.now():e.ts;let a=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[a,s]=[e.old.c,e.old.o];else{const l=Kr(e.o)&&!e.old?e.o:t.offset(this.ts);a=Ro(this.ts,l),i=Number.isNaN(a.year)?new Vi("invalid input"):null,a=i?null:a,s=i?null:l}this._zone=t,this.loc=e.loc||Jt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=a,this.o=s,this.isLuxonDateTime=!0}static now(){return new $t({})}static local(){const[e,t]=Ef(arguments),[i,a,s,o,l,c,u]=t;return If({year:i,month:a,day:s,hour:o,minute:l,second:c,millisecond:u},e)}static utc(){const[e,t]=Ef(arguments),[i,a,s,o,l,c,u]=t;return e.zone=Yn.utcInstance,If({year:i,month:a,day:s,hour:o,minute:l,second:c,millisecond:u},e)}static fromJSDate(e,t={}){const i=f_(e)?e.valueOf():NaN;if(Number.isNaN(i))return $t.invalid("invalid input");const a=zr(t.zone,cn.defaultZone);return a.isValid?new $t({ts:i,zone:a,loc:Jt.fromObject(t)}):$t.invalid(zs(a))}static fromMillis(e,t={}){if(Kr(e))return e<-kf||e>kf?$t.invalid("Timestamp out of range"):new $t({ts:e,zone:zr(t.zone,cn.defaultZone),loc:Jt.fromObject(t)});throw new Nn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Kr(e))return new $t({ts:e*1e3,zone:zr(t.zone,cn.defaultZone),loc:Jt.fromObject(t)});throw new Nn("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=zr(t.zone,cn.defaultZone);if(!i.isValid)return $t.invalid(zs(i));const a=Jt.fromObject(t),s=wl(e,$f),{minDaysInFirstWeek:o,startOfWeek:l}=ff(s,a),c=cn.now(),u=Dt(t.specificOffset)?i.offset(c):t.specificOffset,d=!Dt(s.ordinal),f=!Dt(s.year),h=!Dt(s.month)||!Dt(s.day),v=f||h,_=s.weekYear||s.weekNumber;if((v||d)&&_)throw new Ja("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&d)throw new Ja("Can't mix ordinal dates with month/day");const b=_||s.weekday&&!v;let m,k,S=Ro(c,u);b?(m=Px,k=Ox,S=_l(S,o,l)):d?(m=Mx,k=Dx,S=pc(S)):(m=rl,k=Sm);let $=!1;for(const A of m){const q=s[A];Dt(q)?$?s[A]=k[A]:s[A]=S[A]:$=!0}const D=b?c_(s,o,l):d?u_(s):Zp(s),I=D||Gp(s);if(I)return $t.invalid(I);const C=b?uf(s,o,l):d?df(s):s,[w,E]=il(C,u,i),O=new $t({ts:w,zone:i,o:E,loc:a});return s.weekday&&v&&e.weekday!==O.weekday?$t.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:$t.invalid(O.invalid)}static fromISO(e,t={}){const[i,a]=tx(e);return Va(i,a,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,a]=nx(e);return Va(i,a,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,a]=ix(e);return Va(i,a,t,"HTTP",t)}static fromFormat(e,t,i={}){if(Dt(e)||Dt(t))throw new Nn("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:s=null}=i,o=Jt.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0}),[l,c,u,d]=Ex(o,e,t);return d?$t.invalid(d):Va(l,c,i,`format ${t}`,e,u)}static fromString(e,t,i={}){return $t.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,a]=ux(e);return Va(i,a,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Nn("need to specify a reason the DateTime is invalid");const i=e instanceof Vi?e:new Vi(e,t);if(cn.throwOnInvalid)throw new Ry(i);return new $t({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=wm(e,Jt.fromObject(t));return i?i.map(a=>a?a.val:null).join(""):null}static expandFormat(e,t={}){return ym(Fn.parseFormat(e),Jt.fromObject(t)).map(a=>a.val).join("")}static resetCache(){js=void 0,du.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?bc(this).weekYear:NaN}get weekNumber(){return this.isValid?bc(this).weekNumber:NaN}get weekday(){return this.isValid?bc(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?yc(this).weekday:NaN}get localWeekNumber(){return this.isValid?yc(this).weekNumber:NaN}get localWeekYear(){return this.isValid?yc(this).weekYear:NaN}get ordinal(){return this.isValid?pc(this.c).ordinal:NaN}get monthShort(){return this.isValid?Lo.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Lo.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Lo.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Lo.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=jl(this.c),a=this.zone.offset(i-e),s=this.zone.offset(i+e),o=this.zone.offset(i-a*t),l=this.zone.offset(i-s*t);if(o===l)return[this];const c=i-o*t,u=i-l*t,d=Ro(c,o),f=Ro(u,l);return d.hour===f.hour&&d.minute===f.minute&&d.second===f.second&&d.millisecond===f.millisecond?[sa(this,{ts:c}),sa(this,{ts:u})]:[this]}get isInLeapYear(){return xo(this.year)}get daysInMonth(){return xl(this.year,this.month)}get daysInYear(){return this.isValid?Qa(this.year):NaN}get weeksInWeekYear(){return this.isValid?ao(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ao(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:a}=Fn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:a}}toUTC(e=0,t={}){return this.setZone(Yn.instance(e),t)}toLocal(){return this.setZone(cn.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=zr(e,cn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let a=this.ts;if(t||i){const s=e.offset(this.ts),o=this.toObject();[a]=il(o,s,e)}return sa(this,{ts:a,zone:e})}else return $t.invalid(zs(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const a=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return sa(this,{loc:a})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=wl(e,$f),{minDaysInFirstWeek:i,startOfWeek:a}=ff(t,this.loc),s=!Dt(t.weekYear)||!Dt(t.weekNumber)||!Dt(t.weekday),o=!Dt(t.ordinal),l=!Dt(t.year),c=!Dt(t.month)||!Dt(t.day),u=l||c,d=t.weekYear||t.weekNumber;if((u||o)&&d)throw new Ja("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Ja("Can't mix ordinal dates with month/day");let f;s?f=uf({..._l(this.c,i,a),...t},i,a):Dt(t.ordinal)?(f={...this.toObject(),...t},Dt(t.day)&&(f.day=Math.min(xl(f.year,f.month),f.day))):f=df({...pc(this.c),...t});const[h,v]=il(f,this.o,this.zone);return sa(this,{ts:h,o:v})}plus(e){if(!this.isValid)return this;const t=jt.fromDurationLike(e);return sa(this,Sf(this,t))}minus(e){if(!this.isValid)return this;const t=jt.fromDurationLike(e).negate();return sa(this,Sf(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},a=jt.normalizeUnit(e);switch(a){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(a==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(a==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Fn.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):gc}toLocaleString(e=yl,t={}){return this.isValid?Fn.create(this.loc.clone(t),e).formatDateTime(this):gc}toLocaleParts(e={}){return this.isValid?Fn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:a=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=al(o);const l=e==="extended";let c=_c(this,l,o);return rl.indexOf(o)>=3&&(c+="T"),c+=Tf(this,l,t,i,a,s,o),c}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?_c(this,e==="extended",al(t)):null}toISOWeekDate(){return Fo(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:a=!1,extendedZone:s=!1,format:o="extended",precision:l="milliseconds"}={}){return this.isValid?(l=al(l),(a&&rl.indexOf(l)>=3?"T":"")+Tf(this,o==="extended",t,e,i,s,l)):null}toRFC2822(){return Fo(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Fo(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?_c(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let a="HH:mm:ss.SSS";return(t||e)&&(i&&(a+=" "),t?a+="z":e&&(a+="ZZ")),Fo(this,a,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():gc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return jt.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=h_(t).map(jt.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,c=o?e:this,u=mx(l,c,s,a);return o?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff($t.now(),e,t)}until(e){return this.isValid?ln.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const a=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,i)<=a&&a<=s.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||$t.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let a=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(a=e.unit,s=void 0),Cf(t,this.plus(i),{...e,numeric:"always",units:a,unit:s})}toRelativeCalendar(e={}){return this.isValid?Cf(e.base||$t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every($t.isDateTime))throw new Nn("min requires all arguments be DateTimes");return hf(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every($t.isDateTime))throw new Nn("max requires all arguments be DateTimes");return hf(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:a=null,numberingSystem:s=null}=i,o=Jt.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0});return xm(o,e,t)}static fromStringExplain(e,t,i={}){return $t.fromFormatExplain(e,t,i)}static buildFormatParser(e,t={}){const{locale:i=null,numberingSystem:a=null}=t,s=Jt.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0});return new _m(s,e)}static fromFormatParser(e,t,i={}){if(Dt(e)||Dt(t))throw new Nn("fromFormatParser requires an input string and a format parser");const{locale:a=null,numberingSystem:s=null}=i,o=Jt.fromOpts({locale:a,numberingSystem:s,defaultToEN:!0});if(!o.equals(t.locale))throw new Nn(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:l,zone:c,specificOffset:u,invalidReason:d}=t.explainFromTokens(e);return d?$t.invalid(d):Va(l,c,i,`format ${t.format}`,e,u)}static get DATE_SHORT(){return yl}static get DATE_MED(){return Tp}static get DATE_MED_WITH_WEEKDAY(){return zy}static get DATE_FULL(){return $p}static get DATE_HUGE(){return Ip}static get TIME_SIMPLE(){return Cp}static get TIME_WITH_SECONDS(){return Ep}static get TIME_WITH_SHORT_OFFSET(){return Op}static get TIME_WITH_LONG_OFFSET(){return Dp}static get TIME_24_SIMPLE(){return Pp}static get TIME_24_WITH_SECONDS(){return Mp}static get TIME_24_WITH_SHORT_OFFSET(){return Ap}static get TIME_24_WITH_LONG_OFFSET(){return Lp}static get DATETIME_SHORT(){return Np}static get DATETIME_SHORT_WITH_SECONDS(){return Rp}static get DATETIME_MED(){return Fp}static get DATETIME_MED_WITH_SECONDS(){return qp}static get DATETIME_MED_WITH_WEEKDAY(){return jy}static get DATETIME_FULL(){return zp}static get DATETIME_FULL_WITH_SECONDS(){return jp}static get DATETIME_HUGE(){return Up}static get DATETIME_HUGE_WITH_SECONDS(){return Vp}}function Ps(n){if($t.isDateTime(n))return n;if(n&&n.valueOf&&Kr(n.valueOf()))return $t.fromJSDate(n);if(n&&typeof n=="object")return $t.fromObject(n);throw new Nn(`Unknown datetime argument: ${n}, of type ${typeof n}`)}const Lx=[".jpg",".jpeg",".png",".svg",".gif",".jfif",".webp",".avif"],Nx=[".mp4",".avi",".mov",".3gp",".wmv"],Rx=[".aa",".aac",".m4v",".mp3",".ogg",".oga",".mogg",".amr"],Fx=[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".odp",".odt",".ods",".txt"],qx=["relation","file","select"],zx=["text","email","url","editor"],Tm=[{level:-4,label:"DEBUG",class:""},{level:0,label:"INFO",class:"label-success"},{level:4,label:"WARN",class:"label-warning"},{level:8,label:"ERROR",class:"label-danger"}];class R{static isObject(e){return e!==null&&typeof e=="object"&&e.constructor===Object}static clone(e){return typeof structuredClone<"u"?structuredClone(e):JSON.parse(JSON.stringify(e))}static zeroValue(e){switch(typeof e){case"string":return"";case"number":return 0;case"boolean":return!1;case"object":return e===null?null:Array.isArray(e)?[]:{};case"undefined":return;default:return null}}static isEmpty(e){return e===""||e===null||typeof e>"u"||Array.isArray(e)&&e.length===0||R.isObject(e)&&Object.keys(e).length===0}static isInput(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return t==="input"||t==="select"||t==="textarea"||e?.isContentEditable}static isFocusable(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return R.isInput(e)||t==="button"||t==="a"||t==="details"||e?.tabIndex>=0}static hasNonEmptyProps(e){for(let t in e)if(!R.isEmpty(e[t]))return!0;return!1}static toArray(e,t=!1){return Array.isArray(e)?e.slice():(t||!R.isEmpty(e))&&typeof e<"u"?[e]:[]}static inArray(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t)return!0;return!1}static removeByValue(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t){e.splice(i,1);break}}static pushUnique(e,t){R.inArray(e,t)||e.push(t)}static mergeUnique(e,t){for(let i of t)R.pushUnique(e,i);return e}static findByKey(e,t,i){e=Array.isArray(e)?e:[];for(let a in e)if(e[a][t]==i)return e[a];return null}static groupByKey(e,t){e=Array.isArray(e)?e:[];const i={};for(let a in e)i[e[a][t]]=i[e[a][t]]||[],i[e[a][t]].push(e[a]);return i}static removeByKey(e,t,i){for(let a in e)if(e[a][t]==i){e.splice(a,1);break}}static pushOrReplaceByKey(e,t,i="id"){for(let a=e.length-1;a>=0;a--)if(e[a][i]==t[i]){e[a]=t;return}e.push(t)}static filterDuplicatesByKey(e,t="id"){e=Array.isArray(e)?e:[];const i={};for(const a of e)i[a[t]]=a;return Object.values(i)}static filterRedactedProps(e,t="******"){const i=JSON.parse(JSON.stringify(e||{}));for(let a in i)typeof i[a]=="object"&&i[a]!==null?i[a]=R.filterRedactedProps(i[a],t):i[a]===t&&delete i[a];return i}static getNestedVal(e,t,i=null,a="."){let s=e||{},o=(t||"").split(a);for(const l of o){if(!R.isObject(s)&&!Array.isArray(s)||typeof s[l]>"u")return i;s=s[l]}return s}static setByPath(e,t,i,a="."){if(e===null||typeof e!="object"){console.warn("setByPath: data not an object or array.");return}let s=e,o=t.split(a),l=o.pop();for(const c of o)(!R.isObject(s)&&!Array.isArray(s)||!R.isObject(s[c])&&!Array.isArray(s[c]))&&(s[c]={}),s=s[c];s[l]=i}static deleteByPath(e,t,i="."){let a=e||{},s=(t||"").split(i),o=s.pop();for(const l of s)(!R.isObject(a)&&!Array.isArray(a)||!R.isObject(a[l])&&!Array.isArray(a[l]))&&(a[l]={}),a=a[l];Array.isArray(a)?a.splice(o,1):R.isObject(a)&&delete a[o],s.length>0&&(Array.isArray(a)&&!a.length||R.isObject(a)&&!Object.keys(a).length)&&(Array.isArray(e)&&e.length>0||R.isObject(e)&&Object.keys(e).length>0)&&R.deleteByPath(e,s.join(i),i)}static randomString(e=10){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}static randomSecret(e=15){if(typeof crypto>"u")return R.randomString(e);const t=new Uint8Array(e);crypto.getRandomValues(t);const i="-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let a="";for(let s=0;s<e;s++)a+=i.charAt(t[s]%i.length);return a}static sentenize(e,t=!0){if(typeof e!="string")return"";if(e=e.trim().split("_").join(" "),e==="")return e;if(e=e[0].toUpperCase()+e.substring(1),t){let i=e[e.length-1];i!=="."&&i!=="?"&&i!=="!"&&(e+=".")}return e}static trimQuotedValue(e){return typeof e=="string"&&(e[0]=='"'||e[0]=="'"||e[0]=="`")&&e[0]==e[e.length-1]?e.slice(1,-1):e}static plainText(e){return e?(new DOMParser().parseFromString(e,"text/html").body.innerText||"").trim():""}static truncate(e,t=150,i=!0){return e=""+e,e.length<=t?e:e.substring(0,t)+(i?"...":"")}static truncateObject(e){const t={};for(let i in e){let a=e[i];typeof a=="string"&&(a=R.truncate(a,150,!0)),t[i]=a}return t}static slugify(e,t="_",i=[".","=","-"]){if(e==="")return"";const a={a:/Ð°|Ã |Ã¡|Ã¥|Ã¢/gi,b:/Ð±/gi,c:/Ñ|Ã§/gi,d:/Ð´/gi,e:/Ðµ|Ã¨|Ã©|Ãª|áº½|Ã«/gi,f:/Ñ/gi,g:/Ð³/gi,h:/Ñ/gi,i:/Ð¹|Ð¸|Ã¬|Ã­|Ã®/gi,j:/Ð¶/gi,k:/Ðº/gi,l:/Ð»/gi,m:/Ð¼/gi,n:/Ð½|Ã±/gi,o:/Ð¾|Ã²|Ã³|Ã´|Ã¸/gi,p:/Ð¿/gi,q:/Ñ/gi,r:/Ñ/gi,s:/Ñ/gi,t:/Ñ/gi,u:/Ñ|Ã¹|Ãº|Å¯|Ã»/gi,v:/Ð²/gi,w:/Ð²/gi,x:/Ñ/gi,y:/Ñ/gi,z:/Ð·/gi,ae:/Ã¤|Ã¦/gi,oe:/Ã¶/gi,ue:/Ã¼/gi,Ae:/Ã/gi,Ue:/Ã/gi,Oe:/Ã/gi,ss:/Ã/gi,and:/&/gi};for(let s in a)e=e.replace(a[s],s);return e.replace(new RegExp("["+i.join("")+"]","g")," ").replace(/[^\w\ ]/gi,"").replace(/\s+/g,t)}static escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}static splitNonEmpty(e,t=","){const i=[],a=(e||"").replaceAll("\\"+t,"{_PB_ESCAPED_}").split(t).map(s=>s.replaceAll("{_PB_ESCAPED_}",t));for(let s of a)s=s.trim(),R.isEmpty(s)||i.push(s);return i}static joinNonEmpty(e,t=", ",i=!0){e=e||[];const a=[],s=t.length>1?t.trim():t;for(let o of e)o=typeof o=="string"?o.trim():"",!R.isEmpty(o)&&(i&&(o=o.replaceAll(s,"\\"+s)),a.push(o));return a.join(t)}static getInitials(e){if(e=(e||"").split("@")[0].trim(),e.length<=2)return e.toUpperCase();const t=e.split(/[\.\_\-\ ]/);return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e[0].toUpperCase()}static formattedFileSize(e){const t=e?Math.floor(Math.log(e)/Math.log(1024)):0;return(e/Math.pow(1024,t)).toFixed(2)*1+" "+["B","KB","MB","GB","TB"][t]}static getDateTime(e){if(typeof e=="string"){const t={19:"yyyy-MM-dd HH:mm:ss",23:"yyyy-MM-dd HH:mm:ss.SSS",20:"yyyy-MM-dd HH:mm:ss'Z'",24:"yyyy-MM-dd HH:mm:ss.SSS'Z'"},i=t[e.length]||t[19];return $t.fromFormat(e,i,{zone:"UTC"})}return typeof e=="number"?$t.fromMillis(e):$t.fromJSDate(e)}static formatToUTCDate(e,t="yyyy-MM-dd HH:mm:ss"){return R.getDateTime(e).toUTC().toFormat(t)}static formatToLocalDate(e,t="yyyy-MM-dd HH:mm:ss"){return R.getDateTime(e).toLocal().toFormat(t)}static async copyToClipboard(e){if(typeof e=="object")try{e=JSON.stringify(e,null,2)}catch{}if(e=""+e,!(!e.length||!window?.navigator?.clipboard))return window.navigator.clipboard.writeText(e).catch(t=>{console.warn("Failed to copy.",t)})}static download(e,t){const i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("download",t),i.setAttribute("target","_blank"),i.click(),i.remove()}static downloadJson(e,t){t=t.endsWith(".json")?t:t+".json";const i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=window.URL.createObjectURL(i);R.download(a,t)}static getJWTPayload(e){const t=(e||"").split(".")[1]||"";if(t==="")return{};try{const i=decodeURIComponent(atob(t));return JSON.parse(i)||{}}catch(i){console.warn("Failed to parse JWT payload data.",i)}return{}}static hasImageExtension(e){return e=e||"",!!Lx.find(t=>e.toLowerCase().endsWith(t))}static hasVideoExtension(e){return e=e||"",!!Nx.find(t=>e.toLowerCase().endsWith(t))}static hasAudioExtension(e){return e=e||"",!!Rx.find(t=>e.toLowerCase().endsWith(t))}static hasDocumentExtension(e){return e=e||"",!!Fx.find(t=>e.toLowerCase().endsWith(t))}static getFileType(e){return R.hasImageExtension(e)?"image":R.hasDocumentExtension(e)?"document":R.hasVideoExtension(e)?"video":R.hasAudioExtension(e)?"audio":"file"}static generateThumb(e,t=100,i=100){return new Promise(a=>{let s=new FileReader;s.onload=function(o){let l=new Image;l.onload=function(){let c=document.createElement("canvas"),u=c.getContext("2d"),d=l.width,f=l.height;return c.width=t,c.height=i,u.drawImage(l,d>f?(d-f)/2:0,0,d>f?f:d,d>f?f:d,0,0,t,i),a(c.toDataURL(e.type))},l.src=o.target.result},s.readAsDataURL(e)})}static addValueToFormData(e,t,i){if(!(typeof i>"u"))if(R.isEmpty(i))e.append(t,"");else if(Array.isArray(i))for(const a of i)R.addValueToFormData(e,t,a);else i instanceof File?e.append(t,i):i instanceof Date?e.append(t,i.toISOString()):R.isObject(i)?e.append(t,JSON.stringify(i)):e.append(t,""+i)}static dummyCollectionRecord(e){return Object.assign({collectionId:e?.id,collectionName:e?.name},R.dummyCollectionSchemaData(e))}static dummyCollectionSchemaData(e,t=!1){const i=e?.fields||[],a={};for(const s of i){if(s.hidden||t&&s.primaryKey&&s.autogeneratePattern||t&&s.type==="autodate")continue;let o=null;if(s.type==="number")o=123;else if(s.type==="date"||s.type==="autodate")o="2022-01-01 10:00:00.123Z";else if(s.type=="bool")o=!0;else if(s.type=="email")o="test@example.com";else if(s.type=="url")o="https://example.com";else if(s.type=="json")o="JSON";else if(s.type=="file"){if(t)continue;o="filename.jpg",s.maxSelect!=1&&(o=[o])}else if(s.type=="select")o=s?.values?.[0],s?.maxSelect!=1&&(o=[o]);else if(s.type=="relation"){const c=Array.isArray(s?.collectionIds)&&s.collectionIds.length>0?"collectionId:RELATION_RECORD_ID":"RELATION_RECORD_ID";o=c,s?.maxSelect!=1&&(o=[c])}else s.type=="geoPoint"?o={lon:0,lat:0}:o="test";a[s.name]=o}return a}static getCollectionTypeIcon(e){switch(e?.toLowerCase()){case"auth":return"ri-group-line";case"view":return"ri-table-line";default:return"ri-folder-2-line"}}static getFieldTypeIcon(e){switch(e){case"primary":return"ri-key-line";case"text":return"ri-text";case"number":return"ri-hashtag";case"date":return"ri-calendar-line";case"bool":return"ri-toggle-line";case"email":return"ri-mail-line";case"url":return"ri-link";case"editor":return"ri-edit-2-line";case"select":return"ri-list-check";case"json":return"ri-braces-line";case"file":return"ri-image-line";case"relation":return"ri-mind-map";case"password":return"ri-lock-password-line";case"autodate":return"ri-calendar-check-line";case"geoPoint":return"ri-map-pin-2-line";default:return"ri-star-s-line"}}static getFieldValueType(e){switch(e?.type){case"bool":return"Boolean";case"number":return"Number";case"geoPoint":return"Object";case"file":return"File";case"select":case"relation":return e?.maxSelect==1?"String":"Array<String>";default:return"String"}}static zeroDefaultStr(e){return e?.type==="number"?"0":e?.type==="bool"?"false":e?.type==="geoPoint"?'{"lon":0,"lat":0}':e?.type==="json"?'null, "", [], {}':["select","relation","file"].includes(e?.type)&&e?.maxSelect!=1?"[]":'""'}static getApiExampleUrl(e){return(window.location.href.substring(0,window.location.href.indexOf("/_"))||e||"/").replace("//localhost","//127.0.0.1")}static hasCollectionChanges(e,t,i=!1){if(e=e||{},t=t||{},e.id!=t.id)return!0;for(let u in e)if(u!=="fields"&&JSON.stringify(e[u])!==JSON.stringify(t[u]))return!0;const a=Array.isArray(e.fields)?e.fields:[],s=Array.isArray(t.fields)?t.fields:[],o=a.filter(u=>u?.id&&!R.findByKey(s,"id",u.id)),l=s.filter(u=>u?.id&&!R.findByKey(a,"id",u.id)),c=s.filter(u=>{const d=R.isObject(u)&&R.findByKey(a,"id",u.id);if(!d)return!1;for(let f in d)if(JSON.stringify(u[f])!=JSON.stringify(d[f]))return!0;return!1});return!!(l.length||c.length||i&&o.length)}static sortCollections(e=[]){const t=[],i=[],a=[];for(const o of e)o.type==="auth"?t.push(o):o.type==="base"?i.push(o):a.push(o);function s(o,l){return o.name>l.name?1:o.name<l.name?-1:0}return[].concat(t.sort(s),i.sort(s),a.sort(s))}static getExpandPresentableRelFields(e,t,i=2){let a=[];const s=t.find(o=>o.id==e.collectionId);if(!s)return a;for(const o of s.fields){if(!o.presentable||o.type!="relation"||i<=0)continue;const l=R.getExpandPresentableRelFields(o,t,i-1);for(const c of l)a.push(e.name+"."+c)}return a.length||a.push(e.name),a}static yieldToMain(){return new Promise(e=>{setTimeout(e,0)})}static defaultFlatpickrOptions(){return{dateFormat:"Y-m-d H:i:S",disableMobile:!0,allowInput:!0,enableTime:!0,enableSeconds:!0,time_24hr:!0,locale:{firstDayOfWeek:1}}}static defaultEditorOptions(){const e=["DIV","P","A","EM","B","STRONG","H1","H2","H3","H4","H5","H6","TABLE","TR","TD","TH","TBODY","THEAD","TFOOT","BR","HR","Q","SUP","SUB","DEL","IMG","OL","UL","LI","CODE"];function t(a){let s=a.parentNode;for(;a.firstChild;)s.insertBefore(a.firstChild,a);s.removeChild(a)}function i(a){if(a){for(const s of a.children)i(s);e.includes(a.tagName)?(a.removeAttribute("style"),a.removeAttribute("class")):t(a)}}return{branding:!1,promotion:!1,menubar:!1,min_height:270,height:270,max_height:700,autoresize_bottom_margin:30,convert_unsafe_embeds:!0,skin:"pocketbase",content_style:"body { font-size: 14px }",plugins:["autoresize","autolink","lists","link","image","searchreplace","fullscreen","media","table","code","codesample","directionality"],codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"CSS",value:"css"},{text:"SQL",value:"sql"},{text:"JavaScript",value:"javascript"},{text:"Go",value:"go"},{text:"Dart",value:"dart"},{text:"Zig",value:"zig"},{text:"Rust",value:"rust"},{text:"Lua",value:"lua"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"Markdown",value:"markdown"},{text:"Swift",value:"swift"},{text:"Kotlin",value:"kotlin"},{text:"Elixir",value:"elixir"},{text:"Scala",value:"scala"},{text:"Julia",value:"julia"},{text:"Haskell",value:"haskell"}],toolbar:"styles | alignleft aligncenter alignright | bold italic forecolor backcolor | bullist numlist | link image_picker table codesample direction | code fullscreen",paste_postprocess:(a,s)=>{i(s.node)},file_picker_types:"image",file_picker_callback:(a,s,o)=>{const l=document.createElement("input");l.setAttribute("type","file"),l.setAttribute("accept","image/*"),l.addEventListener("change",c=>{const u=c.target.files[0],d=new FileReader;d.addEventListener("load",()=>{if(!tinymce)return;const f="blobid"+new Date().getTime(),h=tinymce.activeEditor.editorUpload.blobCache,v=d.result.split(",")[1],_=h.create(f,u,v);h.add(_),a(_.blobUri(),{title:u.name})}),d.readAsDataURL(u)}),l.click()},setup:a=>{a.on("keydown",o=>{(o.ctrlKey||o.metaKey)&&o.code=="KeyS"&&a.formElement&&(o.preventDefault(),o.stopPropagation(),a.formElement.dispatchEvent(new KeyboardEvent("keydown",o)))});const s="tinymce_last_direction";a.on("init",()=>{const o=window?.localStorage?.getItem(s);!a.isDirty()&&a.getContent()==""&&o=="rtl"&&a.execCommand("mceDirectionRTL")}),a.ui.registry.addMenuButton("direction",{icon:"visualchars",fetch:o=>{o([{type:"menuitem",text:"LTR content",icon:"ltr",onAction:()=>{window?.localStorage?.setItem(s,"ltr"),a.execCommand("mceDirectionLTR")}},{type:"menuitem",text:"RTL content",icon:"rtl",onAction:()=>{window?.localStorage?.setItem(s,"rtl"),a.execCommand("mceDirectionRTL")}}])}}),a.ui.registry.addMenuButton("image_picker",{icon:"image",fetch:o=>{o([{type:"menuitem",text:"From collection",icon:"gallery",onAction:()=>{a.dispatch("collections_file_picker",{})}},{type:"menuitem",text:"Inline",icon:"browse",onAction:()=>{a.execCommand("mceImage")}}])}})}}}static displayValue(e,t,i="N/A"){e=e||{},t=t||[];let a=[];for(const o of t){let l=e[o];typeof l>"u"||(l=R.stringifyValue(l,i),a.push(l))}if(a.length>0)return a.join(", ");const s=["title","name","slug","email","username","nickname","label","heading","message","key","identifier","id"];for(const o of s){let l=R.stringifyValue(e[o],"");if(l)return l}return i}static stringifyValue(e,t="N/A",i=150){if(R.isEmpty(e))return t;if(typeof e=="number")return""+e;if(typeof e=="boolean")return e?"True":"False";if(typeof e=="string")return e=e.indexOf("<")>=0?R.plainText(e):e,R.truncate(e,i)||t;if(Array.isArray(e)&&typeof e[0]!="object")return R.truncate(e.join(","),i);if(typeof e=="object")try{return R.truncate(JSON.stringify(e),i)||t}catch{return t}return e}static extractColumnsFromQuery(e){const t="__GROUP__";e=(e||"").replace(/\([\s\S]+?\)/gm,t).replace(/[\t\r\n]|(?:\s\s)+/g," ");const a=e.match(/select\s+([\s\S]+)\s+from/)?.[1]?.split(",")||[],s=[];for(let o of a){const l=o.trim().split(" ").pop();l!=""&&l!=t&&s.push(l.replace(/[\'\"\`\[\]\s]/g,""))}return s}static getAllCollectionIdentifiers(e,t=""){if(!e)return[];let i=[t+"id"];if(e.type==="view")for(let s of R.extractColumnsFromQuery(e.viewQuery))R.pushUnique(i,t+s);const a=e.fields||[];for(const s of a)s.type=="geoPoint"?(R.pushUnique(i,t+s.name+".lon"),R.pushUnique(i,t+s.name+".lat")):R.pushUnique(i,t+s.name);return i}static getExcerptCollectionFieldsList(e,t=200){let i=["*"];const a=e?.fields||[];for(const s of a)s.primaryKey||s.type=="relation"||i.push(`${s.name}:excerpt(${t})`);return i.join(",")}static getCollectionAutocompleteKeys(e,t,i="",a=0){let s=e.find(l=>l.name==t||l.id==t);if(!s||a>=4)return[];s.fields=s.fields||[];let o=R.getAllCollectionIdentifiers(s,i);for(const l of s.fields){const c=i+l.name;if(l.type=="relation"&&l.collectionId){const u=R.getCollectionAutocompleteKeys(e,l.collectionId,c+".",a+1);u.length&&(o=o.concat(u))}l.maxSelect!=1&&qx.includes(l.type)?(o.push(c+":each"),o.push(c+":length")):zx.includes(l.type)&&o.push(c+":lower")}for(const l of e){l.fields=l.fields||[];for(const c of l.fields)if(c.type=="relation"&&c.collectionId==s.id){const u=i+l.name+"_via_"+c.name,d=R.getCollectionAutocompleteKeys(e,l.id,u+".",a+2);d.length&&(o=o.concat(d))}}return o}static getCollectionJoinAutocompleteKeys(e){const t=[];let i,a;for(const s of e)if(!s.system){i="@collection."+s.name+".",a=R.getCollectionAutocompleteKeys(e,s.name,i);for(const o of a)t.push(o)}return t}static getRequestAutocompleteKeys(e,t){const i=[];i.push("@request.context"),i.push("@request.method"),i.push("@request.query."),i.push("@request.body."),i.push("@request.headers."),i.push("@request.auth.collectionId"),i.push("@request.auth.collectionName");const a=e.filter(s=>s.type==="auth");for(const s of a){if(s.system)continue;const o=R.getCollectionAutocompleteKeys(e,s.id,"@request.auth.");for(const l of o)R.pushUnique(i,l)}if(t){const s=R.getCollectionAutocompleteKeys(e,t,"@request.body.");for(const o of s){i.push(o);const l=o.split(".");l.length===3&&l[2].indexOf(":")===-1&&(i.push(o+":changed"),i.push(o+":isset"))}}return i}static parseIndex(e){const t={unique:!1,optional:!1,schemaName:"",indexName:"",tableName:"",columns:[],where:""},a=/create\s+(unique\s+)?\s*index\s*(if\s+not\s+exists\s+)?(\S*)\s+on\s+(\S*)\s*\(([\s\S]*)\)(?:\s*where\s+([\s\S]*))?/gmi.exec((e||"").trim());if(a?.length!=7)return t;const s=/^[\"\'\`\[\{}]|[\"\'\`\]\}]$/gm;t.unique=a[1]?.trim().toLowerCase()==="unique",t.optional=!R.isEmpty(a[2]?.trim());const o=(a[3]||"").split(".");o.length==2?(t.schemaName=o[0].replace(s,""),t.indexName=o[1].replace(s,"")):(t.schemaName="",t.indexName=o[0].replace(s,"")),t.tableName=(a[4]||"").replace(s,"");const l=(a[5]||"").replace(/,(?=[^\(]*\))/gmi,"{PB_TEMP}").split(",");for(let c of l){c=c.trim().replaceAll("{PB_TEMP}",",");const d=/^([\s\S]+?)(?:\s+collate\s+([\w]+))?(?:\s+(asc|desc))?$/gmi.exec(c);if(d?.length!=4)continue;const f=d[1]?.trim()?.replace(s,"");f&&t.columns.push({name:f,collate:d[2]||"",sort:d[3]?.toUpperCase()||""})}return t.where=a[6]||"",t}static buildIndex(e){let t="CREATE ";e.unique&&(t+="UNIQUE "),t+="INDEX ",e.optional&&(t+="IF NOT EXISTS "),e.schemaName&&(t+=`\`${e.schemaName}\`.`),t+=`\`${e.indexName||"idx_"+R.randomString(10)}\` `,t+=`ON \`${e.tableName}\` (`;const i=e.columns.filter(a=>!!a?.name);return i.length>1&&(t+=`
  `),t+=i.map(a=>{let s="";return a.name.includes("(")||a.name.includes(" ")?s+=a.name:s+="`"+a.name+"`",a.collate&&(s+=" COLLATE "+a.collate),a.sort&&(s+=" "+a.sort.toUpperCase()),s}).join(`,
  `),i.length>1&&(t+=`
`),t+=")",e.where&&(t+=` WHERE ${e.where}`),t}static replaceIndexTableName(e,t){const i=R.parseIndex(e);return i.tableName=t,R.buildIndex(i)}static replaceIndexColumn(e,t,i){if(t===i)return e;const a=R.parseIndex(e);let s=!1;for(let o of a.columns)o.name===t&&(o.name=i,s=!0);return s?R.buildIndex(a):e}static normalizeSearchFilter(e,t){if(e=(e||"").trim(),!e||!t.length)return e;const i=["=","!=","~","!~",">",">=","<","<="];for(const a of i)if(e.includes(a))return e;return e=isNaN(e)&&e!="true"&&e!="false"?`"${e.replace(/^[\"\'\`]|[\"\'\`]$/gm,"")}"`:e,t.map(a=>`${a}~${e}`).join("||")}static normalizeLogsFilter(e,t=[]){return R.normalizeSearchFilter(e,["level","message","data"].concat(t))}static initSchemaField(e){return Object.assign({id:"",name:"",type:"text",system:!1,hidden:!1,required:!1},e)}static triggerResize(){window.dispatchEvent(new Event("resize"))}static getHashQueryParams(){let e="";const t=window.location.hash.indexOf("?");return t>-1&&(e=window.location.hash.substring(t+1)),Object.fromEntries(new URLSearchParams(e))}static replaceHashQueryParams(e){e=e||{};let t="",i=window.location.hash;const a=i.indexOf("?");a>-1&&(t=i.substring(a+1),i=i.substring(0,a));const s=new URLSearchParams(t);for(let c in e){const u=e[c];u===null?s.delete(c):s.set(c,u)}t=s.toString(),t!=""&&(i+="?"+t);let o=window.location.href;const l=o.indexOf("#");l>-1&&(o=o.substring(0,l)),window.location.replace(o+i)}}let fu,oa;const hu="app-tooltip";function Of(n){return typeof n=="string"?{text:n,position:"bottom",hideOnClick:null}:n||{}}function Jr(){return oa=oa||document.querySelector("."+hu),oa||(oa=document.createElement("div"),oa.classList.add(hu),document.body.appendChild(oa)),oa}function $m(n,e){let t=Jr();if(!t.classList.contains("active")||!e?.text){vu();return}t.textContent=e.text,t.className=hu+" active",e.class&&t.classList.add(e.class),e.position&&t.classList.add(e.position),t.style.top="0px",t.style.left="0px";let i=t.offsetHeight,a=t.offsetWidth,s=n.getBoundingClientRect(),o=0,l=0,c=5;e.position=="left"?(o=s.top+s.height/2-i/2,l=s.left-a-c):e.position=="right"?(o=s.top+s.height/2-i/2,l=s.right+c):e.position=="top"?(o=s.top-i-c,l=s.left+s.width/2-a/2):e.position=="top-left"?(o=s.top-i-c,l=s.left):e.position=="top-right"?(o=s.top-i-c,l=s.right-a):e.position=="bottom-left"?(o=s.top+s.height+c,l=s.left):e.position=="bottom-right"?(o=s.top+s.height+c,l=s.right-a):(o=s.top+s.height+c,l=s.left+s.width/2-a/2),l+a>document.documentElement.clientWidth&&(l=document.documentElement.clientWidth-a),l=l>=0?l:0,o+i>document.documentElement.clientHeight&&(o=document.documentElement.clientHeight-i),o=o>=0?o:0,t.style.top=o+"px",t.style.left=l+"px"}function vu(){clearTimeout(fu),Jr().classList.remove("active"),Jr().activeNode=void 0}function jx(n,e){Jr().activeNode=n,clearTimeout(fu),fu=setTimeout(()=>{Jr().classList.add("active"),$m(n,e)},isNaN(e.delay)?0:e.delay)}function ht(n,e){let t=Of(e);function i(){jx(n,t)}function a(){vu()}return n.addEventListener("mouseenter",i),n.addEventListener("mouseleave",a),n.addEventListener("blur",a),(t.hideOnClick===!0||t.hideOnClick===null&&R.isFocusable(n))&&n.addEventListener("click",a),Jr(),{update(s){t=Of(s),Jr()?.activeNode?.contains(n)&&$m(n,t)},destroy(){Jr()?.activeNode?.contains(n)&&vu(),n.removeEventListener("mouseenter",i),n.removeEventListener("mouseleave",a),n.removeEventListener("blur",a),n.removeEventListener("click",a)}}}const Ux=n=>n;function sd(n){const e=n-1;return e*e*e+1}function Df(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}function pu(n,{delay:e=0,duration:t=400,easing:i=Ux}={}){const a=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:s=>`opacity: ${s*a}`}}function Xr(n,{delay:e=0,duration:t=400,easing:i=sd,x:a=0,y:s=0,opacity:o=0}={}){const l=getComputedStyle(n),c=+l.opacity,u=l.transform==="none"?"":l.transform,d=c*(1-o),[f,h]=Df(a),[v,_]=Df(s);return{delay:e,duration:t,easing:i,css:(b,m)=>`
			transform: ${u} translate(${(1-b)*f}${h}, ${(1-b)*v}${_});
			opacity: ${c-d*m}`}}function vn(n,{delay:e=0,duration:t=400,easing:i=sd,axis:a="y"}={}){const s=getComputedStyle(n),o=+s.opacity,l=a==="y"?"height":"width",c=parseFloat(s[l]),u=a==="y"?["top","bottom"]:["left","right"],d=u.map(k=>`${k[0].toUpperCase()}${k.slice(1)}`),f=parseFloat(s[`padding${d[0]}`]),h=parseFloat(s[`padding${d[1]}`]),v=parseFloat(s[`margin${d[0]}`]),_=parseFloat(s[`margin${d[1]}`]),b=parseFloat(s[`border${d[0]}Width`]),m=parseFloat(s[`border${d[1]}Width`]);return{delay:e,duration:t,easing:i,css:k=>`overflow: hidden;opacity: ${Math.min(k*20,1)*o};${l}: ${k*c}px;padding-${u[0]}: ${k*f}px;padding-${u[1]}: ${k*h}px;margin-${u[0]}: ${k*v}px;margin-${u[1]}: ${k*_}px;border-${u[0]}-width: ${k*b}px;border-${u[1]}-width: ${k*m}px;min-${l}: 0`}}function jn(n,{delay:e=0,duration:t=400,easing:i=sd,start:a=0,opacity:s=0}={}){const o=getComputedStyle(n),l=+o.opacity,c=o.transform==="none"?"":o.transform,u=1-a,d=l*(1-s);return{delay:e,duration:t,easing:i,css:(f,h)=>`
			transform: ${c} scale(${1-u*h});
			opacity: ${l-d*h}
		`}}let la,xc=[];function Pf(){return la=la||document.querySelector(".overlays"),la||(la=document.createElement("div"),la.classList.add("overlays"),document.body.appendChild(la)),la}var Vx=x('<button type="button" aria-label="Close" class="overlay-close"><i class="ri-close-line" aria-hidden="true"></i></button>'),Bx=x('<button type="button" aria-label="Close" class="btn btn-sm btn-circle btn-transparent btn-close m-l-auto"><i class="ri-close-line txt-lg" aria-hidden="true"></i></button>'),Hx=x('<div><div class="overlay"></div> <div><div class="overlay-panel-section panel-header"><!> <!> <!></div> <div class="overlay-panel-section panel-content"><!></div> <div class="overlay-panel-section panel-footer"><!></div></div></div>'),Wx=x('<div class="overlay-panel-wrapper" tabindex="-1"><!></div>');function pn(n,e){Ue(e,!1);let t=te(e,"class",8,""),i=te(e,"active",12,!1),a=te(e,"popup",8,!1),s=te(e,"overlayClose",8,!0),o=te(e,"btnClose",8,!0),l=te(e,"escClose",8,!0),c=te(e,"beforeOpen",8,void 0),u=te(e,"beforeHide",8,void 0);const d=qt(),f="op_"+R.randomString(10);let h=P(),v=P(),_,b=150,m,k=P(""),S=P(i());function $(){typeof c()=="function"&&c()()===!1||i(!0)}function D(){typeof u()=="function"&&u()()===!1||i(!1)}function I(){return i()}async function C(z){y(S,z),z?(_=document.activeElement,d("show"),r(h)?.focus()):(clearTimeout(m),d("hide"),_?.focus()),await Tn(),w()}function w(){r(h)&&(i()?ft(h,r(h).style.zIndex=A()):ft(h,r(h).style=""))}function E(){R.pushUnique(xc,f),document.body.classList.add("overlay-active")}function O(){R.removeByValue(xc,f),xc.length||document.body.classList.remove("overlay-active")}function A(){return 1e3+Pf().querySelectorAll(".overlay-panel-container.active").length}function q(z){i()&&l()&&z.code=="Escape"&&!R.isInput(z.target)&&r(h)&&r(h).style.zIndex==A()&&(z.preventDefault(),D())}function L(z){i()&&j(r(v))}function j(z,X){X&&y(k,""),!(!z||m)&&(m=setTimeout(()=>{if(clearTimeout(m),m=null,!z)return;if(z.scrollHeight-z.offsetHeight>0)y(k,"scrollable");else{y(k,"");return}z.scrollTop==0?y(k,r(k)+" scroll-top-reached"):z.scrollTop+z.offsetHeight==z.scrollHeight&&y(k,r(k)+" scroll-bottom-reached")},100))}un(()=>{Pf().appendChild(r(h));let z=r(h);return()=>{clearTimeout(m),O(),z?.remove()}}),ie(()=>(r(S),N(i())),()=>{r(S)!=i()&&C(i())}),ie(()=>r(v),()=>{j(r(v),!0)}),ie(()=>r(h),()=>{r(h)&&w()}),ie(()=>N(i()),()=>{i()?E():O()}),dt();var U={show:$,hide:D,isActive:I};Be();var W=Wx();re("resize",pa,L),re("keydown",pa,q);var Y=T(W);{var J=z=>{var X=Hx();let oe;var ce=T(X),le=g(ce,2);let me;var _e=T(le),pe=T(_e);{var Te=se=>{var ge=Vx();Et(3,ge,()=>pu,()=>({duration:b})),re("click",ge,Ct(D)),p(se,ge)};G(pe,se=>{o()&&!a()&&se(Te)})}var Se=g(pe,2);Zt(Se,e,"header",{},null);var he=g(Se,2);{var ue=se=>{var ge=Bx();re("click",ge,Ct(D)),p(se,ge)};G(he,se=>{o()&&a()&&se(ue)})}var ke=g(_e,2),we=T(ke);Zt(we,e,"default",{},null),pt(ke,se=>y(v,se),()=>r(v));var ae=g(ke,2),xe=T(ae);Zt(xe,e,"footer",{},null),V(()=>{oe=Re(X,1,"overlay-panel-container",null,oe,{padded:a(),active:i()}),me=Re(le,1,`overlay-panel ${t()??""} ${r(k)??""}`,null,me,{popup:a()})}),re("click",ce,Ct(()=>s()?D():!0)),Et(3,ce,()=>pu,()=>({duration:b,opacity:0})),re("scroll",ke,se=>j(se.target)),Et(1,le,()=>Xr,()=>a()?{duration:b,y:-10}:{duration:b,x:50}),Et(2,le,()=>Xr,()=>a()?{duration:b,y:10}:{duration:b,x:50}),p(z,X)};G(Y,z=>{i()&&z(J)})}return pt(W,z=>y(h,z),()=>r(h)),p(n,W),_t(e,"show",$),_t(e,"hide",D),_t(e,"isActive",I),Ve(U)}const od=li({});function qn(n,e,t){od.set({text:n,yesCallback:e,noCallback:t})}function Im(){od.set({})}var Yx=x('<h4 class="block center txt-break" slot="header"> </h4>'),Kx=x('<button type="button" class="btn btn-transparent btn-expanded-sm"><span class="txt">No</span></button> <button type="button"><span class="txt">Yes</span></button>',1);function Jx(n,e){Ue(e,!1);const t=()=>It(od,"$confirmation",i),[i,a]=At();let s=P(),o=P(!1),l=P(!1);ie(()=>(t(),r(s)),()=>{t()?.text&&(y(l,!1),r(s)?.show())}),dt(),Be();{let c=ne(()=>!r(o)),u=ne(()=>!r(o));pt(pn(n,{class:"confirm-popup hide-content overlay-panel-sm",get overlayClose(){return r(c)},get escClose(){return r(u)},btnClose:!1,popup:!0,$$events:{hide:async()=>{!r(l)&&t()?.noCallback&&t().noCallback(),await Tn(),y(l,!1),Im()}},$$slots:{header:(d,f)=>{var h=Yx(),v=T(h);V(()=>$e(v,(t(),M(()=>t()?.text)))),p(d,h)},footer:(d,f)=>{var h=Kx(),v=F(h);Wi(v,!0);var _=g(v,2);let b;V(()=>{v.disabled=r(o),b=Re(_,1,"btn btn-danger btn-expanded",null,b,{"btn-loading":r(o)}),_.disabled=r(o)}),re("click",v,()=>{y(l,!1),r(s)?.hide()}),re("click",_,async()=>{t()?.yesCallback&&(y(o,!0),await Promise.resolve(t().yesCallback()),y(o,!1)),y(l,!0),r(s)?.hide()}),p(d,h)}},$$legacy:!0}),d=>y(s,d),()=>r(s))}Ve(),a()}function Zx(){let n={listeners:[],scriptLoaded:!1,injected:!1};function e(i,a,s){n.injected=!0;const o=i.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.src=a,o.onload=()=>{s()},i.head&&i.head.appendChild(o)}function t(i,a,s){n.scriptLoaded?s():(n.listeners.push(s),n.injected||e(i,a,()=>{n.listeners.forEach(o=>o()),n.scriptLoaded=!0}))}return{load:t}}let Gx=Zx();var Xx=x("<div></div>"),Qx=x('<textarea style="visibility: hidden"></textarea>'),e1=x("<div><!></div>");function ld(n,e){Ue(e,!1);let t=te(e,"id",24,()=>"tinymce_svelte"+R.randomString(7)),i=te(e,"inline",8,void 0),a=te(e,"disabled",8,!1),s=te(e,"scriptSrc",24,()=>"./libs/tinymce/tinymce.min.js"),o=te(e,"conf",24,()=>({})),l=te(e,"modelEvents",8,"change input undo redo"),c=te(e,"value",12,""),u=te(e,"text",12,""),d=te(e,"cssClass",8,"tinymce-wrapper");const f=["Activate","AddUndo","BeforeAddUndo","BeforeExecCommand","BeforeGetContent","BeforeRenderUI","BeforeSetContent","BeforePaste","Blur","Change","ClearUndos","Click","ContextMenu","Copy","Cut","Dblclick","Deactivate","Dirty","Drag","DragDrop","DragEnd","DragGesture","DragOver","Drop","ExecCommand","Focus","FocusIn","FocusOut","GetContent","Hide","Init","KeyDown","KeyPress","KeyUp","LoadContent","MouseDown","MouseEnter","MouseLeave","MouseMove","MouseOut","MouseOver","MouseUp","NodeChange","ObjectResizeStart","ObjectResized","ObjectSelected","Paste","PostProcess","PostRender","PreProcess","ProgressState","Redo","Remove","Reset","ResizeEditor","SaveContent","SelectionChange","SetAttrib","SetContent","Show","Submit","Undo","VisualAid"],h=(O,A)=>{f.forEach(q=>{O.on(q,L=>{A(q.toLowerCase(),{eventName:q,event:L,editor:O})})})};let v=P(),_=P(),b=P(),m=P(c()),k=P(a());const S=qt();function $(){return window&&window.tinymce?window.tinymce:null}function D(){const O={...o(),target:r(_),inline:i()!==void 0?i():o().inline!==void 0?o().inline:!1,readonly:a(),setup:A=>{y(b,A),A.on("init",()=>{A.setContent(c()),A.on(l(),()=>{y(m,A.getContent()),r(m)!==c()&&(c(r(m)),u(A.getContent({format:"text"})))})}),h(A,S),typeof o().setup=="function"&&o().setup(A)}};ft(_,r(_).style.visibility=""),$().init(O)}un(()=>($()!==null?D():Gx.load(r(v).ownerDocument,s(),()=>{r(v)&&D()}),()=>{try{r(b)&&(r(b).dom?.unbind(document),$()?.remove(r(b)))}catch{}})),ie(()=>(r(b),r(m),N(c()),N(a()),r(k)),()=>{try{r(b)&&r(m)!==c()&&(r(b).setContent(c()),u(r(b).getContent({format:"text"}))),r(b)&&a()!==r(k)&&(y(k,a()),typeof r(b).mode?.set=="function"?r(b).mode.set(a()?"readonly":"design"):r(b).setMode(a()?"readonly":"design"))}catch(O){console.warn("TinyMCE reactive error:",O)}}),dt(),Be();var I=e1(),C=T(I);{var w=O=>{var A=Xx();pt(A,q=>y(_,q),()=>r(_)),V(()=>H(A,"id",t())),p(O,A)},E=O=>{var A=Qx();pt(A,q=>y(_,q),()=>r(_)),V(()=>H(A,"id",t())),p(O,A)};G(C,O=>{i()?O(w):O(E,!1)})}pt(I,O=>y(v,O),()=>r(v)),V(()=>Re(I,1,$n(d()))),p(n,I),Ve()}function t1(n){const e=n-1;return e*e*e+1}function n1(n,{from:e,to:t},i={}){var{delay:a=0,duration:s=C=>Math.sqrt(C)*120,easing:o=t1}=i,l=getComputedStyle(n),c=l.transform==="none"?"":l.transform,[u,d]=l.transformOrigin.split(" ").map(parseFloat);u/=n.clientWidth,d/=n.clientHeight;var f=i1(n),h=n.clientWidth/t.width/f,v=n.clientHeight/t.height/f,_=e.left+e.width*u,b=e.top+e.height*d,m=t.left+t.width*u,k=t.top+t.height*d,S=(_-m)*h,$=(b-k)*v,D=e.width/t.width,I=e.height/t.height;return{delay:a,duration:typeof s=="function"?s(Math.sqrt(S*S+$*$)):s,easing:o,css:(C,w)=>{var E=w*S,O=w*$,A=C+w*D,q=C+w*I;return`transform: ${c} translate(${E}px, ${O}px) scale(${A}, ${q});`}}}function i1(n){if("currentCSSZoom"in n)return n.currentCSSZoom;for(var e=n,t=1;e!==null;)t*=+getComputedStyle(e).zoom,e=e.parentElement;return t}const Bl=li([]);function ls(n,e=4e3){return cd(n,"info",e)}function hn(n,e=3e3){return cd(n,"success",e)}function dr(n,e=4500){return cd(n,"error",e)}function cd(n,e,t){t=t||4e3;const i={message:n,type:e,duration:t,timeout:setTimeout(()=>{Cm(i)},t)};Bl.update(a=>(ud(a,i.message),R.pushOrReplaceByKey(a,i,"message"),a))}function Cm(n){Bl.update(e=>(ud(e,n),e))}function Ks(){Bl.update(n=>{for(let e of n)ud(n,e);return[]})}function ud(n,e){let t;typeof e=="string"?t=R.findByKey(n,"message",e):t=e,t&&(clearTimeout(t.timeout),R.removeByKey(n,"message",t.message))}var r1=x('<i class="ri-information-line"></i>'),a1=x('<i class="ri-checkbox-circle-line"></i>'),s1=x('<i class="ri-error-warning-line"></i>'),o1=x('<i class="ri-alert-line"></i>'),l1=x('<div><div class="icon"><!></div> <div class="content"> </div> <button type="button" class="close" aria-label="Close"><i class="ri-close-line"></i></button></div>'),c1=x('<div class="toasts-wrapper"></div>');function u1(n,e){Ue(e,!1);const t=()=>It(Bl,"$toasts",i),[i,a]=At();Be();var s=c1();bt(s,13,t,o=>o.message,(o,l)=>{var c=l1();let u;var d=T(c),f=T(d);{var h=k=>{var S=r1();p(k,S)},v=k=>{var S=et(),$=F(S);{var D=C=>{var w=a1();p(C,w)},I=C=>{var w=et(),E=F(w);{var O=q=>{var L=s1();p(q,L)},A=q=>{var L=o1();p(q,L)};G(E,q=>{r(l).type==="warning"?q(O):q(A,!1)},!0)}p(C,w)};G($,C=>{r(l).type==="success"?C(D):C(I,!1)},!0)}p(k,S)};G(f,k=>{r(l).type==="info"?k(h):k(v,!1)})}var _=g(d,2),b=T(_),m=g(_,2);V(()=>{u=Re(c,1,"alert txt-break",null,u,{"alert-info":r(l).type=="info","alert-success":r(l).type=="success","alert-danger":r(l).type=="error","alert-warning":r(l).type=="warning"}),$e(b,r(l).message)}),re("click",m,Ct(()=>Cm(r(l)))),Et(1,c,()=>vn,()=>({duration:150})),Et(2,c,()=>pu,()=>({duration:150})),wy(c,()=>n1,()=>({duration:150})),p(o,c)}),p(n,s),Ve(),a()}var d1=x("<div><!></div>"),f1=x('<div class="toggler-container" tabindex="-1" role="menu"><!></div>');function Jn(n,e){Ue(e,!1);let t=te(e,"trigger",8,void 0),i=te(e,"active",12,!1),a=te(e,"escClose",8,!0),s=te(e,"autoScroll",8,!0),o=te(e,"closableClass",8,"closable"),l=te(e,"class",8,""),c=P(),u=P(),d=P(),f,h,v=!1;const _=qt();function b(z=0){i()&&(clearTimeout(h),h=setTimeout(m,z))}function m(){i()&&(i(!1),v=!1,clearTimeout(f),clearTimeout(h))}function k(){clearTimeout(h),clearTimeout(f),!i()&&(i(!0),r(d)?.contains(r(c))||r(c)?.focus(),f=setTimeout(()=>{s()&&(r(u)?.scrollIntoViewIfNeeded?r(u)?.scrollIntoViewIfNeeded():r(u)?.scrollIntoView&&r(u)?.scrollIntoView({behavior:"smooth",block:"nearest"}))},180))}function S(){i()?m():k()}function $(z){return!r(c)||z.classList.contains(o())||r(c).contains(z)&&z.closest&&z.closest("."+o())}function D(z){I(),r(c)?.addEventListener("click",C),r(c)?.addEventListener("keydown",w),y(d,z||r(c)?.parentNode),r(d)?.addEventListener("click",E),r(d)?.addEventListener("keydown",O)}function I(){clearTimeout(f),clearTimeout(h),r(c)?.removeEventListener("click",C),r(c)?.removeEventListener("keydown",w),r(d)?.removeEventListener("click",E),r(d)?.removeEventListener("keydown",O)}function C(z){z.stopPropagation(),$(z.target)&&m()}function w(z){(z.code==="Enter"||z.code==="Space")&&(z.stopPropagation(),$(z.target)&&b(150))}function E(z){z.preventDefault(),z.stopPropagation(),S()}function O(z){(z.code==="Enter"||z.code==="Space")&&(z.preventDefault(),z.stopPropagation(),S())}function A(z){i()&&!r(d)?.contains(z.target)&&!r(c)?.contains(z.target)&&S()}function q(z){i()&&a()&&z.code==="Escape"&&(z.preventDefault(),m())}function L(z){i()&&(v=!r(c)?.contains(z.target))}function j(z){i()&&v&&!r(c)?.contains(z.target)&&!r(d)?.contains(z.target)&&!z.target?.closest(".flatpickr-calendar")&&m()}un(()=>(D(),()=>I())),ie(()=>(r(c),N(t())),()=>{r(c)&&D(t())}),ie(()=>(N(i()),r(d)),()=>{i()?(r(d)?.classList?.add("active"),r(d)?.setAttribute("aria-expanded",!0),_("show")):(r(d)?.classList?.remove("active"),r(d)?.setAttribute("aria-expanded",!1),_("hide"))}),dt();var U={hideWithDelay:b,hide:m,show:k,toggle:S};Be();var W=f1();re("click",pa,j),re("mousedown",pa,L),re("keydown",pa,q),re("focusin",pa,A);var Y=T(W);{var J=z=>{var X=d1();let oe;var ce=T(X);Zt(ce,e,"default",{},null),pt(X,le=>y(u,le),()=>r(u)),V(()=>oe=Re(X,1,$n(l()),null,oe,{active:i()})),Et(3,X,()=>Xr,()=>({duration:150,y:3})),p(z,X)};G(Y,z=>{i()&&z(J)})}return pt(W,z=>y(c,z),()=>r(c)),p(n,W),_t(e,"hideWithDelay",b),_t(e,"hide",m),_t(e,"show",k),_t(e,"toggle",S),Ve(U)}const In=li(""),mu=li(""),So=li(!1),Bn=li({});function nn(n){Bn.set(n||{})}function Zn(n){Bn.update(e=>(R.deleteByPath(e,n),e))}const Hl=li({});function Mf(n){Hl.set(n||{})}class si extends Error{constructor(e){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,si.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof si||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(e.name=="AbortError"||e.code==20)&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong."),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}}const qo=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function h1(n,e){const t={};if(typeof n!="string")return t;const i=Object.assign({},{}).decode||v1;let a=0;for(;a<n.length;){const s=n.indexOf("=",a);if(s===-1)break;let o=n.indexOf(";",a);if(o===-1)o=n.length;else if(o<s){a=n.lastIndexOf(";",s-1)+1;continue}const l=n.slice(a,s).trim();if(t[l]===void 0){let c=n.slice(s+1,o).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[l]=i(c)}catch{t[l]=c}}a=o+1}return t}function Af(n,e,t){const i=Object.assign({},t||{}),a=i.encode||p1;if(!qo.test(n))throw new TypeError("argument name is invalid");const s=a(e);if(s&&!qo.test(s))throw new TypeError("argument val is invalid");let o=n+"="+s;if(i.maxAge!=null){const l=i.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(l)}if(i.domain){if(!qo.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain="+i.domain}if(i.path){if(!qo.test(i.path))throw new TypeError("option path is invalid");o+="; Path="+i.path}if(i.expires){if(!(function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date})(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function v1(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function p1(n){return encodeURIComponent(n)}const m1=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let Em;function ts(n){if(n)try{const e=decodeURIComponent(Em(n.split(".")[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(e)||{}}catch{}return{}}function Wl(n,e=0){let t=ts(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}Em=typeof atob!="function"||m1?n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,i,a=0,s=0,o="";i=e.charAt(s++);~i&&(t=a%4?64*t+i:i,a++%4)?o+=String.fromCharCode(255&t>>(-2*a&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o}:atob;const Lf="pb_auth";class dd{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!Wl(this.token)}get isSuperuser(){let e=ts(this.token);return e.type=="auth"&&(this.record?.collectionName=="_superusers"||!this.record?.collectionName&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),ts(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Lf){const i=h1(e||"")[t]||"";let a={};try{a=JSON.parse(i),(typeof a===null||typeof a!="object"||Array.isArray(a))&&(a={})}catch{}this.save(a.token||"",a.record||a.model||null)}exportToCookie(e,t=Lf){const i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},a=ts(this.token);i.expires=a?.exp?new Date(1e3*a.exp):new Date("1970-01-01"),e=Object.assign({},i,e);const s={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let o=Af(t,JSON.stringify(s),e);const l=typeof Blob<"u"?new Blob([o]).size:o.length;if(s.record&&l>4096){s.record={id:s.record?.id,email:s.record?.email};const c=["collectionId","collectionName","verified"];for(const u in this.record)c.includes(u)&&(s.record[u]=this.record[u]);o=Af(t,JSON.stringify(s),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==e)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class Om extends dd{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&window?.localStorage){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&window?.localStorage){let i=t;typeof t!="string"&&(i=JSON.stringify(t)),window.localStorage.setItem(e,i)}else this.storageFallback[e]=t}_storageRemove(e){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",(e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)}))}}class Dr{constructor(e){this.client=e}}class g1 extends Dr{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then((()=>!0))}async testEmail(e,t,i,a){return a=Object.assign({method:"POST",body:{email:t,template:i,collection:e}},a),this.client.send("/api/settings/test/email",a).then((()=>!0))}async generateAppleClientSecret(e,t,i,a,s,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:i,privateKey:a,duration:s}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}const b1=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function fd(n){if(n){n.query=n.query||{};for(let e in n)b1.includes(e)||(n.query[e]=n[e],delete n[e])}}function Dm(n){const e=[];for(const t in n){const i=encodeURIComponent(t),a=Array.isArray(n[t])?n[t]:[n[t]];for(let s of a)s=y1(s),s!==null&&e.push(i+"="+s)}return e.join("&")}function y1(n){return n==null?null:n instanceof Date?encodeURIComponent(n.toISOString().replace("T"," ")):encodeURIComponent(typeof n=="object"?JSON.stringify(n):n)}class Pm extends Dr{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,i){if(!e)throw new Error("topic must be set.");let a=e;if(i){fd(i=Object.assign({},i));const o="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));a+=(a.includes("?")?"&":"?")+o}const s=function(o){const l=o;let c;try{c=JSON.parse(l?.data)}catch{}t(c||{})};return this.subscriptions[a]||(this.subscriptions[a]=[]),this.subscriptions[a].push(s),this.isConnected?this.subscriptions[a].length===1?await this.submitSubscriptions():this.eventSource?.addEventListener(a,s):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,s)}async unsubscribe(e){let t=!1;if(e){const i=this.getSubscriptionsByTopic(e);for(let a in i)if(this.hasSubscriptionListeners(a)){for(let s of this.subscriptions[a])this.eventSource?.removeEventListener(a,s);delete this.subscriptions[a],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let t=!1;for(let i in this.subscriptions)if((i+"?").startsWith(e)){t=!0;for(let a of this.subscriptions[i])this.eventSource?.removeEventListener(i,a);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){let i=!1;const a=this.getSubscriptionsByTopic(e);for(let s in a){if(!Array.isArray(this.subscriptions[s])||!this.subscriptions[s].length)continue;let o=!1;for(let l=this.subscriptions[s].length-1;l>=0;l--)this.subscriptions[s][l]===t&&(o=!0,delete this.subscriptions[s][l],this.subscriptions[s].splice(l,1),this.eventSource?.removeEventListener(s,t));o&&(this.subscriptions[s].length||delete this.subscriptions[s],i||this.hasSubscriptionListeners(s)||(i=!0))}this.hasSubscriptionListeners()?i&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let t in this.subscriptions)if(this.subscriptions[t]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch((e=>{if(!e?.isAbort)throw e}))}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let i in this.subscriptions)(i+"?").startsWith(e)&&(t[i]=this.subscriptions[i]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise(((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()}))}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout((()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))}),this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",(e=>{const t=e;this.clientId=t?.lastEventId,this.submitSubscriptions().then((async()=>{let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,await this.submitSubscriptions()})).then((()=>{for(let a of this.pendingConnects)a.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const i=this.getSubscriptionsByTopic("PB_CONNECT");for(let a in i)for(let s of i[a])s(e)})).catch((i=>{this.clientId="",this.connectErrorHandler(i)}))}))}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new si(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout((()=>{this.initConnect()}),t)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let t of this.pendingConnects)t.resolve();this.pendingConnects=[]}}}class Mm extends Dr{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let i=500;return(t=Object.assign({},e,t)).batch&&(i=t.batch,delete t.batch),this._getFullList(i,t)}async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send(this.baseCrudPath,i).then((a=>(a.items=a.items?.map((s=>this.decode(s)))||[],a)))}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then((i=>{if(!i?.items?.length)throw new si({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]}))}async getOne(e,t){if(!e)throw new si({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then((i=>this.decode(i)))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then((i=>this.decode(i)))}async update(e,t,i){return i=Object.assign({method:"PATCH",body:t},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),i).then((a=>this.decode(a)))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then((()=>!0))}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let i=[],a=async s=>this.getList(s,e||500,t).then((o=>{const l=o.items;return i=i.concat(l),l.length==o.perPage?a(s+1):i}));return a(1)}}function Rr(n,e,t,i){const a=i!==void 0;return a||t!==void 0?a?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,i),e):Object.assign(e,t):e}function wc(n){n._resetAutoRefresh?.()}class _1 extends Mm{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,t,i){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,i)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const i=Object.assign({},e,t);return super.getFullList(i)}async getList(e=1,t=30,i){return super.getList(e,t,i)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,i){return super.update(e,t,i).then((a=>{if(this.client.authStore.record?.id===a?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let s=Object.assign({},this.client.authStore.record.expand),o=Object.assign({},this.client.authStore.record,a);s&&(o.expand=Object.assign(s,a.expand)),this.client.authStore.save(this.client.authStore.token,o)}return a}))}async delete(e,t){return super.delete(e,t).then((i=>(!i||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),i)))}authResponse(e){const t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,t,i){let a;i=Object.assign({method:"POST",body:{identity:e,password:t}},i),this.isSuperusers&&(a=i.autoRefreshThreshold,delete i.autoRefreshThreshold,i.autoRefresh||wc(this.client));let s=await this.client.send(this.baseCollectionPath+"/auth-with-password",i);return s=this.authResponse(s),a&&this.isSuperusers&&(function(l,c,u,d){wc(l);const f=l.beforeSend,h=l.authStore.record,v=l.authStore.onChange(((_,b)=>{(!_||b?.id!=h?.id||(b?.collectionId||h?.collectionId)&&b?.collectionId!=h?.collectionId)&&wc(l)}));l._resetAutoRefresh=function(){v(),l.beforeSend=f,delete l._resetAutoRefresh},l.beforeSend=async(_,b)=>{const m=l.authStore.token;if(b.query?.autoRefresh)return f?f(_,b):{url:_,sendOptions:b};let k=l.authStore.isValid;if(k&&Wl(l.authStore.token,c))try{await u()}catch{k=!1}k||await d();const S=b.headers||{};for(let $ in S)if($.toLowerCase()=="authorization"&&m==S[$]&&l.authStore.token){S[$]=l.authStore.token;break}return b.headers=S,f?f(_,b):{url:_,sendOptions:b}}})(this.client,a,(()=>this.authRefresh({autoRefresh:!0})),(()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i)))),s}async authWithOAuth2Code(e,t,i,a,s,o,l){let c={method:"POST",body:{provider:e,code:t,codeVerifier:i,redirectURL:a,createData:s}};return c=Rr("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",c,o,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then((u=>this.authResponse(u)))}authWithOAuth2(...e){if(e.length>1||typeof e?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(e?.[0]||"",e?.[1]||"",e?.[2]||"",e?.[3]||"",e?.[4]||{},e?.[5]||{},e?.[6]||{});const t=e?.[0]||{};let i=null;t.urlCallback||(i=Nf(void 0));const a=new Pm(this.client);function s(){i?.close(),a.unsubscribe()}const o={},l=t.requestKey;return l&&(o.requestKey=l),this.listAuthMethods(o).then((c=>{const u=c.oauth2.providers.find((h=>h.name===t.provider));if(!u)throw new si(new Error(`Missing or invalid provider "${t.provider}".`));const d=this.client.buildURL("/api/oauth2-redirect"),f=l?this.client.cancelControllers?.[l]:void 0;return f&&(f.signal.onabort=()=>{s()}),new Promise((async(h,v)=>{try{await a.subscribe("@oauth2",(async k=>{const S=a.clientId;try{if(!k.state||S!==k.state)throw new Error("State parameters don't match.");if(k.error||!k.code)throw new Error("OAuth2 redirect error or missing code: "+k.error);const $=Object.assign({},t);delete $.provider,delete $.scopes,delete $.createData,delete $.urlCallback,f?.signal?.onabort&&(f.signal.onabort=null);const D=await this.authWithOAuth2Code(u.name,k.code,u.codeVerifier,d,t.createData,$);h(D)}catch($){v(new si($))}s()}));const _={state:a.clientId};t.scopes?.length&&(_.scope=t.scopes.join(" "));const b=this._replaceQueryParams(u.authURL+d,_);await(t.urlCallback||function(k){i?i.location.href=k:i=Nf(k)})(b)}catch(_){s(),v(new si(_))}}))})).catch((c=>{throw s(),c}))}async authRefresh(e,t){let i={method:"POST"};return i=Rr("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then((a=>this.authResponse(a)))}async requestPasswordReset(e,t,i){let a={method:"POST",body:{email:e}};return a=Rr("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/request-password-reset",a).then((()=>!0))}async confirmPasswordReset(e,t,i,a,s){let o={method:"POST",body:{token:e,password:t,passwordConfirm:i}};return o=Rr("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,a,s),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then((()=>!0))}async requestVerification(e,t,i){let a={method:"POST",body:{email:e}};return a=Rr("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/request-verification",a).then((()=>!0))}async confirmVerification(e,t,i){let a={method:"POST",body:{token:e}};return a=Rr("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/confirm-verification",a).then((()=>{const s=ts(e),o=this.client.authStore.record;return o&&!o.verified&&o.id===s.id&&o.collectionId===s.collectionId&&(o.verified=!0,this.client.authStore.save(this.client.authStore.token,o)),!0}))}async requestEmailChange(e,t,i){let a={method:"POST",body:{newEmail:e}};return a=Rr("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",a,t,i),this.client.send(this.baseCollectionPath+"/request-email-change",a).then((()=>!0))}async confirmEmailChange(e,t,i,a){let s={method:"POST",body:{token:e,password:t}};return s=Rr("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",s,i,a),this.client.send(this.baseCollectionPath+"/confirm-email-change",s).then((()=>{const o=ts(e),l=this.client.authStore.record;return l&&l.id===o.id&&l.collectionId===o.collectionId&&this.client.authStore.clear(),!0}))}async listExternalAuths(e,t){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,t,i){const a=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(a.id,i).then((()=>!0))}async requestOTP(e,t){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)}async authWithOTP(e,t,i){return i=Object.assign({method:"POST",body:{otpId:e,password:t}},i),this.client.send(this.baseCollectionPath+"/auth-with-otp",i).then((a=>this.authResponse(a)))}async impersonate(e,t,i){(i=Object.assign({method:"POST",body:{duration:t}},i)).headers=i.headers||{},i.headers.Authorization||(i.headers.Authorization=this.client.authStore.token);const a=new To(this.client.baseURL,new dd,this.client.lang),s=await a.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),i);return a.authStore.save(s?.token,this.decode(s?.record||{})),a}_replaceQueryParams(e,t={}){let i=e,a="";e.indexOf("?")>=0&&(i=e.substring(0,e.indexOf("?")),a=e.substring(e.indexOf("?")+1));const s={},o=a.split("&");for(const l of o){if(l=="")continue;const c=l.split("=");s[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete s[l]:s[l]=t[l]);a="";for(let l in s)s.hasOwnProperty(l)&&(a!=""&&(a+="&"),a+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(s[l].replace(/%20/g,"+")));return a!=""?i+"?"+a:i}}function Nf(n){if(typeof window>"u"||!window?.open)throw new si(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,i=window.innerWidth,a=window.innerHeight;e=e>i?i:e,t=t>a?a:t;let s=i/2-e/2,o=a/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+o+",left="+s+",resizable,menubar=no")}class x1 extends Mm{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,i){return i=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},i),this.client.send(this.baseCrudPath+"/import",i).then((()=>!0))}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then((()=>!0))}}class w1 extends Dr{async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send("/api/logs",i)}async getOne(e,t){if(!e)throw new si({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class k1 extends Dr{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class S1 extends Dr{getUrl(e,t,i={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,i)}getURL(e,t,i={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return"";const a=[];a.push("api"),a.push("files"),a.push(encodeURIComponent(e.collectionId||e.collectionName)),a.push(encodeURIComponent(e.id)),a.push(encodeURIComponent(t));let s=this.client.buildURL(a.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;const o=new URLSearchParams(i);s+=(s.includes("?")?"&":"?")+o}return s}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then((t=>t?.token||""))}}class T1 extends Dr{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then((()=>!0))}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then((()=>!0))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then((()=>!0))}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then((()=>!0))}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class $1 extends Dr{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then((()=>!0))}}function gu(n){return typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File||n!==null&&typeof n=="object"&&n.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function bu(n){return n&&(n.constructor?.name==="FormData"||typeof FormData<"u"&&n instanceof FormData)}function Rf(n){for(const e in n){const t=Array.isArray(n[e])?n[e]:[n[e]];for(const i of t)if(gu(i))return!0}return!1}const I1=/^[\-\.\d]+$/;function Ff(n){if(typeof n!="string")return n;if(n=="true")return!0;if(n=="false")return!1;if((n[0]==="-"||n[0]>="0"&&n[0]<="9")&&I1.test(n)){let e=+n;if(""+e===n)return e}return n}class C1 extends Dr{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new E1(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,i=[];for(let a=0;a<this.requests.length;a++){const s=this.requests[a];if(i.push({method:s.method,url:s.url,headers:s.headers,body:s.json}),s.files)for(let o in s.files){const l=s.files[o]||[];for(let c of l)t.append("requests."+a+"."+o,c)}}return t.append("@jsonPayload",JSON.stringify({requests:i})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)}}class E1{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const i={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}create(e,t){t=Object.assign({body:e||{}},t);const i={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}update(e,t,i){i=Object.assign({body:t||{}},i);const a={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(a,i),this.requests.push(a)}delete(e,t){t=Object.assign({},t);const i={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(i,t),this.requests.push(i)}prepareRequest(e,t){if(fd(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){const a=Dm(t.query);a&&(e.url+=(e.url.includes("?")?"&":"?")+a)}let i=t.body;bu(i)&&(i=(function(s){let o={};return s.forEach(((l,c)=>{if(c==="@jsonPayload"&&typeof l=="string")try{let u=JSON.parse(l);Object.assign(o,u)}catch(u){console.warn("@jsonPayload error:",u)}else o[c]!==void 0?(Array.isArray(o[c])||(o[c]=[o[c]]),o[c].push(Ff(l))):o[c]=Ff(l)})),o})(i));for(const a in i){const s=i[a];if(gu(s))e.files[a]=e.files[a]||[],e.files[a].push(s);else if(Array.isArray(s)){const o=[],l=[];for(const c of s)gu(c)?o.push(c):l.push(c);if(o.length>0&&o.length==s.length){e.files[a]=e.files[a]||[];for(let c of o)e.files[a].push(c)}else if(e.json[a]=l,o.length>0){let c=a;a.startsWith("+")||a.endsWith("+")||(c+="+"),e.files[c]=e.files[c]||[];for(let u of o)e.files[c].push(u)}}else e.json[a]=s}}}class To{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=i,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new dd:this.authStore=new Om,this.collections=new x1(this),this.files=new S1(this),this.logs=new w1(this),this.settings=new g1(this),this.realtime=new Pm(this),this.health=new k1(this),this.backups=new T1(this),this.crons=new $1(this)}get admins(){return this.collection("_superusers")}createBatch(){return new C1(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new _1(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let i in t){let a=t[i];switch(typeof a){case"boolean":case"number":a=""+a;break;case"string":a="'"+a.replace(/'/g,"\\'")+"'";break;default:a=a===null?"null":a instanceof Date?"'"+a.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(a).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+i+"}",a)}return e}getFileUrl(e,t,i={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,i)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let i=this.buildURL(e);if(this.beforeSend){const a=Object.assign({},await this.beforeSend(i,t));a.url!==void 0||a.options!==void 0?(i=a.url||i,t=a.options||t):Object.keys(a).length&&(t=a,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const a=Dm(t.query);a&&(i+=(i.includes("?")?"&":"?")+a),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(i,t).then((async a=>{let s={};try{s=await a.json()}catch(o){if(t.signal?.aborted||typeof DOMException<"u"&&o instanceof DOMException&&(o.name=="AbortError"||o.code==20))throw o}if(this.afterSend&&(s=await this.afterSend(a,s,t)),a.status>=400)throw new si({url:a.url,status:a.status,data:s});return s})).catch((a=>{throw new si(a)}))}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=(function(a){if(typeof FormData>"u"||a===void 0||typeof a!="object"||a===null||bu(a)||!Rf(a))return a;const s=new FormData;for(const o in a){const l=a[o];if(l!==void 0)if(typeof l!="object"||Rf({data:l})){const c=Array.isArray(l)?l:[l];for(let u of c)s.append(o,u)}else{let c={};c[o]=l,s.append("@jsonPayload",JSON.stringify(c))}}return s})(t.body),fd(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||bu(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const i=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(i);const a=new AbortController;this.cancelControllers[i]=a,t.signal=a.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let i in e)if(i.toLowerCase()==t)return e[i];return null}}const Gn=li([]),Ki=li({}),so=li(!1),Am=li({}),Yl=li({});let yu;typeof BroadcastChannel<"u"&&(yu=new BroadcastChannel("collections"),yu.onmessage=()=>{hd(Gu(Ki)?.id)});function Lm(){yu?.postMessage("reload")}function qf(n){Gn.update(e=>{const t=e.find(i=>i.id==n||i.name==n);return t?Ki.set(t):e.length&&Ki.set(e.find(i=>!i.system)||e[0]),e})}function O1(n){Ki.update(e=>R.isEmpty(e?.id)||e.id===n.id?n:e),Gn.update(e=>(R.pushOrReplaceByKey(e,n,"id"),vd(),Lm(),R.sortCollections(e)))}function D1(n){Gn.update(e=>(R.removeByKey(e,"id",n.id),Ki.update(t=>t.id===n.id?e.find(i=>!i.system)||e[0]:t),vd(),Lm(),e))}async function P1(){Yl.set(await Ae.collections.getScaffolds())}async function hd(n=null){so.set(!0);try{const e=[];e.push(Ae.collections.getScaffolds()),e.push(Ae.collections.getFullList());let[t,i]=await Promise.all(e);Yl.set(t),i=R.sortCollections(i),Gn.set(i);const a=n&&i.find(s=>s.id==n||s.name==n);a?Ki.set(a):i.length&&Ki.set(i.find(s=>!s.system)||i[0]),vd()}catch(e){Ae.error(e)}so.set(!1)}function vd(){Am.update(n=>(Gn.update(e=>{for(let t of e)n[t.id]=!!t.fields?.find(i=>i.type=="file"&&i.protected);return e}),n))}function Nm(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,a,s,o=[],l="",c=n.split("/");for(c[0]||c.shift();a=c.shift();)t=a[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(i=a.indexOf("?",1),s=a.indexOf(".",1),o.push(a.substring(1,~i?i:~s?s:a.length)),l+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~i?"?":"")+"\\"+a.substring(s))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function zf(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let i="";return t>-1&&(i=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:i}}const Kl=wp(null,function(e){e(zf());const t=()=>{e(zf())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}});kp(Kl,n=>n.location);const pd=kp(Kl,n=>n.querystring),jf=li(void 0);async function cs(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await Tn();const e=(n.charAt(0)=="#"?"":"#")+n;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function ni(n,e){if(e=Vf(e),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Uf(n,e),{update(t){t=Vf(t),Uf(n,t)}}}function M1(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Uf(n,e){let t=e.href||n.getAttribute("href");if(t&&t.charAt(0)=="/")t="#"+t;else if(!t||t.length<2||t.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+t);n.setAttribute("href",t),n.addEventListener("click",i=>{i.preventDefault(),e.disabled||A1(i.currentTarget.getAttribute("href"))})}function Vf(n){return n&&typeof n=="string"?{href:n}:n||{}}function A1(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function L1(n,e){Ue(e,!1);let t=te(e,"routes",24,()=>({})),i=te(e,"prefix",8,""),a=te(e,"restoreScrollState",8,!1);class s{constructor(C,w){if(!w||typeof w!="function"&&(typeof w!="object"||w._sveltesparouter!==!0))throw Error("Invalid component object");if(!C||typeof C=="string"&&(C.length<1||C.charAt(0)!="/"&&C.charAt(0)!="*")||typeof C=="object"&&!(C instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:E,keys:O}=Nm(C);this.path=C,typeof w=="object"&&w._sveltesparouter===!0?(this.component=w.component,this.conditions=w.conditions||[],this.userData=w.userData,this.props=w.props||{}):(this.component=()=>Promise.resolve(w),this.conditions=[],this.props={}),this._pattern=E,this._keys=O}match(C){if(i()){if(typeof i()=="string")if(C.startsWith(i()))C=C.substr(i().length)||"/";else return null;else if(i()instanceof RegExp){const A=C.match(i());if(A&&A[0])C=C.substr(A[0].length)||"/";else return null}}const w=this._pattern.exec(C);if(w===null)return null;if(this._keys===!1)return w;const E={};let O=0;for(;O<this._keys.length;){try{E[this._keys[O]]=decodeURIComponent(w[O+1]||"")||null}catch{E[this._keys[O]]=null}O++}return E}async checkConditions(C){for(let w=0;w<this.conditions.length;w++)if(!await this.conditions[w](C))return!1;return!0}}const o=[];t()instanceof Map?t().forEach((I,C)=>{o.push(new s(C,I))}):Object.keys(t()).forEach(I=>{o.push(new s(I,t()[I]))});let l=P(null),c=P(null),u=P({});const d=qt();async function f(I,C){await Tn(),d(I,C)}let h=null,v=null;a()&&(v=I=>{I.state&&(I.state.__svelte_spa_router_scrollY||I.state.__svelte_spa_router_scrollX)?h=I.state:h=null},window.addEventListener("popstate",v),dy(()=>{M1(h)}));let _=null,b=null;const m=Kl.subscribe(async I=>{_=I;let C=0;for(;C<o.length;){const w=o[C].match(I.location);if(!w){C++;continue}const E={route:o[C].path,location:I.location,querystring:I.querystring,userData:o[C].userData,params:w&&typeof w=="object"&&Object.keys(w).length?w:null};if(!await o[C].checkConditions(E)){y(l,null),b=null,f("conditionsFailed",E);return}f("routeLoading",Object.assign({},E));const O=o[C].component;if(b!=O){O.loading?(y(l,O.loading),b=O,y(c,O.loadingParams),y(u,{}),f("routeLoaded",Object.assign({},E,{component:r(l),name:r(l).name,params:r(c)}))):(y(l,null),b=null);const A=await O();if(I!=_)return;y(l,A&&A.default||A),b=O}w&&typeof w=="object"&&Object.keys(w).length?y(c,w):y(c,null),y(u,o[C].props),f("routeLoaded",Object.assign({},E,{component:r(l),name:r(l).name,params:r(c)})).then(()=>{jf.set(r(c))});return}y(l,null),b=null,jf.set(void 0)});yo(()=>{m(),v&&window.removeEventListener("popstate",v)}),ie(()=>N(a()),()=>{history.scrollRestoration=a()?"manual":"auto"}),dt(),Be();var k=et(),S=F(k);{var $=I=>{var C=et(),w=F(C);yi(w,()=>r(l),(E,O)=>{O(E,tn({get params(){return r(c)}},()=>r(u),{$$events:{routeEvent(A){lt.call(this,e,A)}}}))}),p(I,C)},D=I=>{var C=et(),w=F(C);yi(w,()=>r(l),(E,O)=>{O(E,tn(()=>r(u),{$$events:{routeEvent(A){lt.call(this,e,A)}}}))}),p(I,C)};G(S,I=>{r(c)?I($):I(D,!1)})}p(n,k),Ve()}const kc="pb_superuser_file_token";To.prototype.logout=function(n=!0){this.authStore.clear(),n&&cs("/login")};To.prototype.error=function(n,e=!0,t=""){if(!n||!(n instanceof Error)||n.isAbort)return;const i=n?.status<<0||400,a=n?.data||{},s=a.message||n.message||t;if(e&&s&&dr(s),R.isEmpty(a.data)||nn(a.data),i===401)return this.cancelAllRequests(),this.logout();if(i===403)return this.cancelAllRequests(),cs("/")};To.prototype.getSuperuserFileToken=async function(n=""){let e=!0;if(n){const i=Gu(Am);e=typeof i[n]<"u"?i[n]:!0}if(!e)return"";let t=localStorage.getItem(kc)||"";return(!t||Wl(t,10))&&(t&&localStorage.removeItem(kc),this._superuserFileTokenRequest||(this._superuserFileTokenRequest=this.files.getToken()),t=await this._superuserFileTokenRequest,localStorage.setItem(kc,t),this._superuserFileTokenRequest=null),t};class N1 extends Om{constructor(e="__pb_superuser_auth__"){super(e),this.save(this.token,this.record)}save(e,t){super.save(e,t),t?.collectionName=="_superusers"&&Mf(t)}clear(){super.clear(),Mf(null)}}const Ae=new To("../",new N1);Ae.authStore.isValid&&Ae.collection(Ae.authStore.record.collectionName||"_superusers").authRefresh().catch(n=>{console.warn("Failed to refresh the existing auth token:",n);const e=n?.status<<0;(e==401||e==403)&&Ae.authStore.clear()});const sl=[];let Rm;function Fm(n){const e=n.pattern.test(Rm);Bf(n,n.className,e),Bf(n,n.inactiveClassName,!e)}function Bf(n,e,t){(e||"").split(" ").forEach(i=>{i&&(n.node.classList.remove(i),t&&n.node.classList.add(i))})}Kl.subscribe(n=>{Rm=n.location+(n.querystring?"?"+n.querystring:""),sl.map(Fm)});function nr(n,e){if(e&&(typeof e=="string"||typeof e=="object"&&e instanceof RegExp)?e={path:e}:e=e||{},!e.path&&n.hasAttribute("href")&&(e.path=n.getAttribute("href"),e.path&&e.path.length>1&&e.path.charAt(0)=="#"&&(e.path=e.path.substring(1))),e.className||(e.className="active"),!e.path||typeof e.path=="string"&&(e.path.length<1||e.path.charAt(0)!="/"&&e.path.charAt(0)!="*"))throw Error('Invalid value for "path" argument');const{pattern:t}=typeof e.path=="string"?Nm(e.path):{pattern:e.path},i={node:n,className:e.className,inactiveClassName:e.inactiveClassName,pattern:t};return sl.push(i),Fm(i),{destroy(){sl.splice(sl.indexOf(i),1)}}}const R1="modulepreload",F1=function(n,e){return new URL(n,e).href},Hf={},Ut=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");a=u(t.map(d=>{if(d=F1(d,i),d in Hf)return;Hf[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(i)for(let _=o.length-1;_>=0;_--){const b=o[_];if(b.href===d&&(!f||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":R1,f||(v.as="script"),v.crossOrigin="",v.href=d,c&&v.setAttribute("nonce",c),document.head.appendChild(v),f)return new Promise((_,b)=>{v.addEventListener("load",_),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function q1(n,e){Ue(e,!1),t();function t(){Ae.authStore.isValid?cs("/collections"):Ae.logout()}Be(),Ve()}var z1=x('<div class="form-field-addon inline-error-icon"><i class="ri-error-warning-fill txt-danger"></i></div>'),j1=x('<div class="help-block help-block-error"><pre> </pre></div>'),U1=x("<div><!> <!></div>");function De(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At(),s="field_"+R.randomString(7),o="Invalid value";let l=te(e,"name",8,""),c=te(e,"inlineError",8,!1),u=te(e,"class",8,void 0),d=P(),f=P([]);function h(){Zn(l())}un(()=>(r(d).addEventListener("input",h),r(d).addEventListener("change",h),()=>{r(d).removeEventListener("input",h),r(d).removeEventListener("change",h)}));function v(C){return typeof C=="object"?C?.message||C?.code||o:C||o}ie(()=>(t(),N(l())),()=>{y(f,R.toArray(R.getNestedVal(t(),l())))}),dt();var _={changed:h};Be();var b=U1();let m;var k=T(b);Zt(k,e,"default",{get uniqueId(){return s}},null);var S=g(k,2);{var $=C=>{var w=z1(),E=T(w);Ge(E,(O,A)=>ht?.(O,A),()=>({position:"left",text:r(f).map(v).join(`
`)})),Et(3,E,()=>jn,()=>({duration:150,start:.7})),p(C,w)},D=C=>{var w=et(),E=F(w);bt(E,1,()=>r(f),Mt,(O,A)=>{var q=j1(),L=T(q),j=T(L);V(U=>$e(j,U),[()=>(r(A),M(()=>v(r(A))))]),Et(3,q,()=>vn,()=>({duration:150})),p(O,q)}),p(C,w)};G(S,C=>{N(c()),r(f),M(()=>c()&&r(f).length)?C($):C(D,!1)})}pt(b,C=>y(d,C),()=>r(d)),V(()=>m=Re(b,1,$n(u()),null,m,{error:r(f).length})),re("click",b,function(C){lt.call(this,e,C)}),p(n,b),_t(e,"changed",h);var I=Ve(_);return a(),I}var V1=x('<a target="_blank" rel="noopener noreferrer"><i class="ri-book-open-line txt-sm"></i> <span class="txt">Docs</span></a> <span class="delimiter">|</span> <a target="_blank" rel="noopener noreferrer" title="Releases"><span class="txt"> </span></a>',1),B1=x('<div><main class="page-content"><!></main> <footer class="page-footer"><!> <!></footer></div>');function Ai(n,e){Ue(e,!1);const t=()=>It(Hl,"$superuser",i),[i,a]=At();let s=te(e,"center",8,!1),o=te(e,"class",8,"");Be();var l=B1();let c;var u=T(l),d=T(u);Zt(d,e,"default",{},null);var f=g(u,2),h=T(f);Zt(h,e,"footer",{},null);var v=g(h,2);{var _=b=>{var m=V1(),k=F(m),S=g(k,4),$=T(S),D=T($);V(()=>{H(k,"href",M(()=>"https://pocketbase.io/docs")),H(S,"href",M(()=>"https://github.com/pocketbase/pocketbase/releases")),$e(D,`PocketBase ${M(()=>"v0.35.1")??""}`)}),p(b,m)};G(v,b=>{t(),M(()=>t()?.id)&&b(_)})}V(()=>c=Re(l,1,`page-wrapper ${o()??""}`,null,c,{"center-content":s()})),p(n,l),Ve(),a()}var H1=x('<input type="text"/>'),W1=x('<button type="submit" class="btn btn-expanded-sm btn-sm btn-warning"><span class="txt">Search</span></button>'),Y1=x('<button type="button" class="btn btn-transparent btn-sm btn-hint p-l-xs p-r-xs m-l-10"><span class="txt">Clear</span></button>'),K1=x('<form class="searchbar"><label class="m-l-10 txt-xl"><i class="ri-search-line"></i></label> <!> <!> <!></form>');function Jl(n,e){Ue(e,!1);const t=qt(),i="search_"+R.randomString(7);let a=te(e,"value",12,""),s=te(e,"placeholder",8,'Search term or filter like created > "2022-01-01"...'),o=te(e,"autocompleteCollection",8,null),l=te(e,"extraAutocompleteKeys",24,()=>[]),c=P(),u=P(!1),d=P(),f=P("");function h(E=!0){y(f,""),E&&r(d)?.focus(),t("clear")}function v(){a(r(f)),t("submit",a())}async function _(){r(c)||r(u)||(y(u,!0),y(c,(await Ut(async()=>{const{default:E}=await import("./FilterAutocompleteInput-Bfmesr8o.js");return{default:E}},__vite__mapDeps([0,1]),import.meta.url)).default),y(u,!1))}un(()=>{_()}),ie(()=>N(a()),()=>{typeof a()=="string"&&y(f,a())}),dt(),Be();var b=K1(),m=T(b),k=g(m,2);{var S=E=>{var O=et(),A=F(O);{let q=ne(()=>a()||s());yi(A,()=>r(c),(L,j)=>{j(L,{get id(){return i},singleLine:!0,disableRequestKeys:!0,disableCollectionJoinKeys:!0,get extraAutocompleteKeys(){return l()},get baseCollection(){return o()},get placeholder(){return r(q)},get value(){return r(f)},set value(U){y(f,U)},$$events:{submit:v},$$legacy:!0})})}p(E,O)},$=E=>{var O=H1();pt(O,A=>y(d,A),()=>r(d)),V(()=>{H(O,"id",i),H(O,"placeholder",a()||s())}),xt(O,()=>r(f),A=>y(f,A)),p(E,O)};G(k,E=>{r(c)&&!r(u)?E(S):E($,!1)})}var D=g(k,2);{var I=E=>{var O=W1();Et(3,O,()=>Xr,()=>({duration:150,x:5})),p(E,O)};G(D,E=>{N(a()),r(f),M(()=>(a().length||r(f).length)&&r(f)!=a())&&E(I)})}var C=g(D,2);{var w=E=>{var O=Y1();Et(3,O,()=>Xr,()=>({duration:150,x:5})),re("click",O,()=>{h(!1),v()}),p(E,O)};G(C,E=>{N(a()),r(f),M(()=>a().length||r(f).length)&&E(w)})}V(()=>H(m,"for",i)),re("click",b,fn(function(E){lt.call(this,e,E)})),re("submit",b,Ct(v)),p(n,b),Ve()}var J1=x('<button type="button" aria-label="Refresh"><i class="ri-refresh-line svelte-1y422nj"></i></button>');function Zl(n,e){Ue(e,!1);const t=qt();let i=te(e,"tooltip",28,()=>({text:"Refresh",position:"right"})),a=te(e,"class",8,""),s=P(null);function o(){t("refresh");const u=i();i(null),clearTimeout(r(s)),y(s,setTimeout(()=>{y(s,null),i(u)},150))}un(()=>()=>clearTimeout(r(s))),Be();var l=J1();let c;Ge(l,(u,d)=>ht?.(u,d),i),Nt(()=>re("click",l,o)),V(()=>c=Re(l,1,`btn btn-transparent btn-circle ${a()??""}`,"svelte-1y422nj",c,{refreshing:r(s)})),p(n,l),Ve()}var Z1=x('<div class="scroller-wrapper svelte-1nx51co"><!> <div><!></div> <!></div>');function md(n,e){Ue(e,!1);const t=qt();let i=te(e,"class",8,""),a=te(e,"vThreshold",12,0),s=te(e,"hThreshold",12,0),o=te(e,"dispatchOnNoScroll",8,!0),l=P(null),c=P(""),u=null,d,f,h,v,_;function b(){r(l)&&ft(l,r(l).scrollTop=0)}function m(){r(l)&&ft(l,r(l).scrollLeft=0)}function k(){r(l)&&(y(c,""),h=r(l).clientWidth+2,v=r(l).clientHeight+2,d=r(l).scrollWidth-h,f=r(l).scrollHeight-v,f>0?(y(c,r(c)+" v-scroll"),a()>=v&&a(0),r(l).scrollTop-a()<=0&&(y(c,r(c)+" v-scroll-start"),t("vScrollStart")),r(l).scrollTop+a()>=f&&(y(c,r(c)+" v-scroll-end"),t("vScrollEnd"))):o()&&t("vScrollEnd"),d>0?(y(c,r(c)+" h-scroll"),s()>=h&&s(0),r(l).scrollLeft-s()<=0&&(y(c,r(c)+" h-scroll-start"),t("hScrollStart")),r(l).scrollLeft+s()>=d&&(y(c,r(c)+" h-scroll-end"),t("hScrollEnd"))):o()&&t("hScrollEnd"))}function S(){u||(u=setTimeout(()=>{k(),u=null},150))}un(()=>(S(),_=new MutationObserver(S),_.observe(r(l),{attributeFilter:["width","height"],childList:!0,subtree:!0}),()=>{_?.disconnect(),clearTimeout(u)}));var $={resetVerticalScroll:b,resetHorizontalScroll:m,refresh:k,throttleRefresh:S};Be();var D=Z1();re("resize",pa,S);var I=T(D);Zt(I,e,"before",{},null);var C=g(I,2),w=T(C);Zt(w,e,"default",{},null),pt(C,O=>y(l,O),()=>r(l));var E=g(C,2);return Zt(E,e,"after",{},null),V(()=>Re(C,1,`scroller ${i()??""} ${r(c)??""}`,"svelte-1nx51co")),re("scroll",C,S),p(n,D),_t(e,"resetVerticalScroll",b),_t(e,"resetHorizontalScroll",m),_t(e,"refresh",k),_t(e,"throttleRefresh",S),Ve($)}var G1=x('<th tabindex="0"><!></th>');function ol(n,e){let t=te(e,"class",8,""),i=te(e,"name",8),a=te(e,"sort",12,""),s=te(e,"disable",8,!1);function o(){s()||("-"+i()===a()?a("+"+i()):a("-"+i()))}var l=G1();let c;var u=T(l);Zt(u,e,"default",{},null),V(()=>{H(l,"title",i()),c=Re(l,1,`col-sort ${t()??""}`,null,c,{"col-sort-disabled":s(),"sort-active":a()==="-"+i()||a()==="+"+i(),"sort-desc":a()==="-"+i(),"sort-asc":a()==="+"+i()})}),re("click",l,()=>o()),re("keydown",l,d=>{(d.code==="Enter"||d.code==="Space")&&(d.preventDefault(),o())}),p(n,l)}var X1=x('<span class="txt-nowrap"> </span>');function qm(n,e){Ue(e,!1);let t=te(e,"date",8);const i={get text(){return R.formatToLocalDate(t(),"yyyy-MM-dd HH:mm:ss.SSS")+" Local"}};Be();var a=X1(),s=T(a);Ge(a,(o,l)=>ht?.(o,l),()=>i),V(o=>$e(s,o),[()=>(N(t()),M(()=>t().replace("Z"," UTC")))]),p(n,a),Ve()}var Q1=x('<div><span class="txt"> </span></div>');function zm(n,e){Ue(e,!1);const t=P();let i=te(e,"level",8);ie(()=>N(i()),()=>{y(t,Tm.find(l=>l.level==i())?.label)}),dt(),Be();var a=Q1(),s=T(a),o=T(s);V(()=>{Re(a,1,`label log-level-label level-${i()??""}`,"svelte-18jvlpw"),$e(o,`${(r(t)||"UNKN")??""} (${i()??""})`)}),p(n,a),Ve()}var e0=x('<span class="loader loader-sm"></span>'),t0=x('<div class="form-field"><input type="checkbox" id="checkbox_0"/> <label for="checkbox_0"></label></div>'),n0=x('<div class="col-header-content"><i class="ri-bookmark-line"></i> <span class="txt">level</span></div>'),i0=x('<div class="col-header-content"><i class="ri-file-list-2-line"></i> <span class="txt">message</span></div>'),r0=x('<div class="col-header-content"><i></i> <span class="txt">created</span></div>'),a0=x("<span><!></span>"),s0=x('<div class="flex flex-wrap flex-gap-10 m-t-10"></div>'),o0=x('<tr tabindex="0" class="row-handle"><td class="bulk-select-col min-width"><div class="form-field"><input type="checkbox"/> <label></label></div></td><td class="col-type-text col-field-level min-width svelte-wy1nz"><!></td><td class="col-type-text col-field-message svelte-wy1nz"><div class="flex flex-gap-10"><span class="txt-ellipsis"> </span></div> <!></td><td class="col-type-date col-field-created"><!></td><td class="col-type-action min-width"><i class="ri-arrow-right-line"></i></td></tr>'),l0=x('<tr><td colspan="99" class="p-xs"><span class="skeleton-loader m-0"></span></td></tr>'),c0=x('<button type="button" class="btn btn-hint btn-expanded m-t-sm"><span class="txt">Clear filters</span></button>'),u0=x('<tr><td colspan="99" class="txt-center txt-hint p-xs"><h6>No logs found.</h6> <!></td></tr>'),d0=x('<table><thead><tr><th class="bulk-select-col min-width"><!></th><!><!><!><th class="col-type-action min-width"></th></tr></thead><tbody></tbody></table>'),f0=x('<div class="block txt-center m-t-sm"><button type="button"><span class="txt">Load more</span></button></div>'),h0=x('<div class="bulkbar svelte-wy1nz"><div class="txt">Selected <strong> </strong> </div> <button type="button" class="btn btn-xs btn-transparent btn-outline p-l-5 p-r-5"><span class="txt">Reset</span></button> <div class="flex-fill"></div> <button type="button" class="btn btn-sm"><span class="txt">Download as JSON</span></button></div>'),v0=x("<!> <!> <!>",1);function p0(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=qt(),o=50;let l=te(e,"filter",12,""),c=te(e,"presets",8,""),u=te(e,"zoom",24,()=>({})),d=te(e,"sort",12,"-@rowid"),f=P([]),h=P(1),v=P(0),_=P(!1),b=0,m=P({});async function k(J=1,z=!0){y(_,!0);const X=[c(),R.normalizeLogsFilter(l())];return u().min&&u().max&&X.push(`created >= "${u().min}" && created <= "${u().max}"`),Ae.logs.getList(J,o,{sort:d(),skipTotal:1,filter:X.filter(Boolean).map(oe=>"("+oe+")").join("&&")}).then(async oe=>{J<=1&&S();const ce=R.toArray(oe.items);if(y(_,!1),y(h,oe.page),y(v,oe.items?.length||0),s("load",r(f).concat(ce)),z){const le=++b;for(;ce.length&&b==le;){const me=ce.splice(0,10);for(let _e of me)R.pushOrReplaceByKey(r(f),_e);y(f,r(f)),await R.yieldToMain()}}else{for(let le of ce)R.pushOrReplaceByKey(r(f),le);y(f,r(f))}}).catch(oe=>{oe?.isAbort||(y(_,!1),console.warn(oe),S(),Ae.error(oe,!X||oe?.status!=400))})}function S(){y(f,[]),y(m,{}),y(h,1),y(v,0)}function $(){r(a)?D():I()}function D(){y(m,{})}function I(){for(const J of r(f))ft(m,r(m)[J.id]=J);y(m,r(m))}function C(J){r(m)[J.id]?delete r(m)[J.id]:ft(m,r(m)[J.id]=J),y(m,r(m))}const w=/[-:\. ]/gi;function E(){const J=Object.values(r(m)).sort((oe,ce)=>oe.created<ce.created?1:oe.created>ce.created?-1:0);if(!J.length)return;if(J.length==1)return R.downloadJson(J[0],"log_"+J[0].created.replaceAll(w,"")+".json");const z=J[0].created.replaceAll(w,""),X=J[J.length-1].created.replaceAll(w,"");return R.downloadJson(J,`${J.length}_logs_${X}_to_${z}.json`)}function O(J){let z=[];if(!J.data)return z;if(J.data.type=="request"){const X=["status","execTime","auth","authId","userIP"];for(let oe of X)typeof J.data[oe]<"u"&&z.push({key:oe});J.data.referer&&!J.data.referer.includes(window.location.host)&&z.push({key:"referer"})}else{const X=Object.keys(J.data);for(const oe of X)oe!="error"&&oe!="details"&&z.length<6&&z.push({key:oe})}return J.data.error&&z.push({key:"error",label:"label-danger"}),J.data.details&&z.push({key:"details",label:"label-warning"}),z}ie(()=>(N(d()),N(l()),N(c()),N(u())),()=>{(typeof d()<"u"||typeof l()<"u"||typeof c()<"u"||typeof u()<"u")&&(S(),k(1))}),ie(()=>r(v),()=>{y(t,r(v)>=o)}),ie(()=>r(m),()=>{y(i,Object.keys(r(m)).length)}),ie(()=>(r(f),r(i)),()=>{y(a,r(f).length&&r(i)===r(f).length)}),dt();var A={load:k};Be();var q=v0(),L=F(q);md(L,{class:"table-wrapper",children:(J,z)=>{var X=d0();let oe;var ce=T(X),le=T(ce),me=T(le),_e=T(me);{var pe=we=>{var ae=e0();p(we,ae)},Te=we=>{var ae=t0(),xe=T(ae);V(()=>{xe.disabled=(r(f),M(()=>!r(f).length)),Yr(xe,r(a))}),re("change",xe,()=>$()),p(we,ae)};G(_e,we=>{r(_)?we(pe):we(Te,!1)})}var Se=g(me);ol(Se,{disable:!0,class:"col-field-level min-width",name:"level",get sort(){return d()},set sort(we){d(we)},children:(we,ae)=>{var xe=n0();p(we,xe)},$$slots:{default:!0},$$legacy:!0});var he=g(Se);ol(he,{disable:!0,class:"col-type-text col-field-message",name:"data",get sort(){return d()},set sort(we){d(we)},children:(we,ae)=>{var xe=i0();p(we,xe)},$$slots:{default:!0},$$legacy:!0});var ue=g(he);ol(ue,{disable:!0,class:"col-type-date col-field-created",name:"created",get sort(){return d()},set sort(we){d(we)},children:(we,ae)=>{var xe=r0(),se=T(xe);V(ge=>Re(se,1,ge,"svelte-wy1nz"),[()=>$n((N(R),M(()=>R.getFieldTypeIcon("date"))))]),p(we,xe)},$$slots:{default:!0},$$legacy:!0});var ke=g(ce);bt(ke,5,()=>r(f),we=>we.id,(we,ae)=>{const xe=ne(()=>(r(ae),M(()=>r(ae).data?.type=="request"))),se=ne(()=>(r(ae),M(()=>O(r(ae)))));var ge=o0(),ee=T(ge),ve=T(ee),Ce=T(ve),Ie=g(Ce,2),ze=g(ee),qe=T(ze);zm(qe,{get level(){return r(ae),M(()=>r(ae).level)}});var je=g(ze),rt=T(je),be=T(rt),Le=T(be),Ke=g(rt,2);{var st=Je=>{var Fe=s0();bt(Fe,5,()=>r(se),Mt,(Me,Ne)=>{var Ze=a0(),Xe=T(Ze);{var vt=We=>{var Qe=Oa();V(()=>$e(Qe,`${r(Ne),M(()=>r(Ne).key)??""}: ${r(ae),r(Ne),M(()=>r(ae).data[r(Ne).key])??""}ms`)),p(We,Qe)},tt=We=>{var Qe=Oa();V(mt=>$e(Qe,`${r(Ne),M(()=>r(Ne).key)??""}: ${mt??""}`),[()=>(N(R),r(ae),r(Ne),M(()=>R.stringifyValue(r(ae).data[r(Ne).key],"N/A",80)))]),p(We,Qe)};G(Xe,We=>{N(r(xe)),r(Ne),M(()=>r(xe)&&r(Ne).key=="execTime")?We(vt):We(tt,!1)})}V(()=>Re(Ze,1,`label label-sm ${r(Ne),M(()=>r(Ne).label||"")??""}`,"svelte-wy1nz")),p(Me,Ze)}),p(Je,Fe)};G(Ke,Je=>{N(r(se)),M(()=>r(se).length)&&Je(st)})}var it=g(je),He=T(it);qm(He,{get date(){return r(ae),M(()=>r(ae).created)}}),V(()=>{H(Ce,"id",`checkbox_${r(ae),M(()=>r(ae).id)??""}`),Yr(Ce,(r(m),r(ae),M(()=>r(m)[r(ae).id]))),H(Ie,"for",`checkbox_${r(ae),M(()=>r(ae).id)??""}`),$e(Le,(r(ae),M(()=>r(ae).message)))}),re("change",Ce,()=>C(r(ae))),re("click",ve,fn(function(Je){lt.call(this,e,Je)})),re("click",ge,()=>s("select",r(ae))),re("keydown",ge,Je=>{Je.code==="Enter"&&(Je.preventDefault(),s("select",r(ae)))}),p(we,ge)},we=>{var ae=et(),xe=F(ae);{var se=ee=>{var ve=l0();p(ee,ve)},ge=ee=>{var ve=u0(),Ce=T(ve),Ie=g(T(Ce),2);{var ze=qe=>{var je=c0();re("click",je,()=>l("")),p(qe,je)};G(Ie,qe=>{N(l()),M(()=>l()?.length)&&qe(ze)})}p(ee,ve)};G(xe,ee=>{r(_)?ee(se):ee(ge,!1)})}p(we,ae)}),V(()=>oe=Re(X,1,"table",null,oe,{"table-loading":r(_)})),p(J,X)},$$slots:{default:!0}});var j=g(L,2);{var U=J=>{var z=f0(),X=T(z);let oe;V(()=>oe=Re(X,1,"btn btn-lg btn-secondary btn-expanded",null,oe,{"btn-loading":r(_),"btn-disabled":r(_)})),re("click",X,()=>k(r(h)+1)),p(J,z)};G(j,J=>{r(f),r(t),M(()=>r(f).length&&r(t))&&J(U)})}var W=g(j,2);{var Y=J=>{var z=h0(),X=T(z),oe=g(T(X)),ce=T(oe),le=g(oe),me=g(X,2),_e=g(me,4);V(()=>{$e(ce,r(i)),$e(le,` ${r(i)===1?"log":"logs"}`)}),re("click",me,()=>D()),re("click",_e,E),Et(3,z,()=>Xr,()=>({duration:150,y:5})),p(J,z)};G(W,J=>{r(i)&&J(Y)})}return p(n,q),_t(e,"load",k),Ve(A)}function $o(n){return n+.5|0}const Ur=(n,e,t)=>Math.max(Math.min(n,t),e);function Us(n){return Ur($o(n*2.55),0,255)}function Zr(n){return Ur($o(n*255),0,255)}function yr(n){return Ur($o(n/2.55)/100,0,1)}function Wf(n){return Ur($o(n*100),0,100)}const $i={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_u=[..."0123456789ABCDEF"],m0=n=>_u[n&15],g0=n=>_u[(n&240)>>4]+_u[n&15],zo=n=>(n&240)>>4===(n&15),b0=n=>zo(n.r)&&zo(n.g)&&zo(n.b)&&zo(n.a);function y0(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&$i[n[1]]*17,g:255&$i[n[2]]*17,b:255&$i[n[3]]*17,a:e===5?$i[n[4]]*17:255}:(e===7||e===9)&&(t={r:$i[n[1]]<<4|$i[n[2]],g:$i[n[3]]<<4|$i[n[4]],b:$i[n[5]]<<4|$i[n[6]],a:e===9?$i[n[7]]<<4|$i[n[8]]:255})),t}const _0=(n,e)=>n<255?e(n):"";function x0(n){var e=b0(n)?m0:g0;return n?"#"+e(n.r)+e(n.g)+e(n.b)+_0(n.a,e):void 0}const w0=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function jm(n,e,t){const i=e*Math.min(t,1-t),a=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function k0(n,e,t){const i=(a,s=(a+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function S0(n,e,t){const i=jm(n,1,.5);let a;for(e+t>1&&(a=1/(e+t),e*=a,t*=a),a=0;a<3;a++)i[a]*=1-e-t,i[a]+=e;return i}function T0(n,e,t,i,a){return n===a?(e-t)/i+(e<t?6:0):e===a?(t-n)/i+2:(n-e)/i+4}function gd(n){const t=n.r/255,i=n.g/255,a=n.b/255,s=Math.max(t,i,a),o=Math.min(t,i,a),l=(s+o)/2;let c,u,d;return s!==o&&(d=s-o,u=l>.5?d/(2-s-o):d/(s+o),c=T0(t,i,a,d,s),c=c*60+.5),[c|0,u||0,l]}function bd(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Zr)}function yd(n,e,t){return bd(jm,n,e,t)}function $0(n,e,t){return bd(S0,n,e,t)}function I0(n,e,t){return bd(k0,n,e,t)}function Um(n){return(n%360+360)%360}function C0(n){const e=w0.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Us(+e[5]):Zr(+e[5]));const a=Um(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=$0(a,s,o):e[1]==="hsv"?i=I0(a,s,o):i=yd(a,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function E0(n,e){var t=gd(n);t[0]=Um(t[0]+e),t=yd(t),n.r=t[0],n.g=t[1],n.b=t[2]}function O0(n){if(!n)return;const e=gd(n),t=e[0],i=Wf(e[1]),a=Wf(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${a}%, ${yr(n.a)})`:`hsl(${t}, ${i}%, ${a}%)`}const Yf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Kf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function D0(){const n={},e=Object.keys(Kf),t=Object.keys(Yf);let i,a,s,o,l;for(i=0;i<e.length;i++){for(o=l=e[i],a=0;a<t.length;a++)s=t[a],l=l.replace(s,Yf[s]);s=parseInt(Kf[o],16),n[l]=[s>>16&255,s>>8&255,s&255]}return n}let jo;function P0(n){jo||(jo=D0(),jo.transparent=[0,0,0,0]);const e=jo[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const M0=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function A0(n){const e=M0.exec(n);let t=255,i,a,s;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?Us(o):Ur(o*255,0,255)}return i=+e[1],a=+e[3],s=+e[5],i=255&(e[2]?Us(i):Ur(i,0,255)),a=255&(e[4]?Us(a):Ur(a,0,255)),s=255&(e[6]?Us(s):Ur(s,0,255)),{r:i,g:a,b:s,a:t}}}function L0(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${yr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Sc=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ba=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function N0(n,e,t){const i=Ba(yr(n.r)),a=Ba(yr(n.g)),s=Ba(yr(n.b));return{r:Zr(Sc(i+t*(Ba(yr(e.r))-i))),g:Zr(Sc(a+t*(Ba(yr(e.g))-a))),b:Zr(Sc(s+t*(Ba(yr(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Uo(n,e,t){if(n){let i=gd(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=yd(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Vm(n,e){return n&&Object.assign(e||{},n)}function Jf(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Zr(n[3]))):(e=Vm(n,{r:0,g:0,b:0,a:1}),e.a=Zr(e.a)),e}function R0(n){return n.charAt(0)==="r"?A0(n):C0(n)}class oo{constructor(e){if(e instanceof oo)return e;const t=typeof e;let i;t==="object"?i=Jf(e):t==="string"&&(i=y0(e)||P0(e)||R0(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Vm(this._rgb);return e&&(e.a=yr(e.a)),e}set rgb(e){this._rgb=Jf(e)}rgbString(){return this._valid?L0(this._rgb):void 0}hexString(){return this._valid?x0(this._rgb):void 0}hslString(){return this._valid?O0(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,a=e.rgb;let s;const o=t===s?.5:t,l=2*o-1,c=i.a-a.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;s=1-u,i.r=255&u*i.r+s*a.r+.5,i.g=255&u*i.g+s*a.g+.5,i.b=255&u*i.b+s*a.b+.5,i.a=o*i.a+(1-o)*a.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=N0(this._rgb,e._rgb,t)),this}clone(){return new oo(this.rgb)}alpha(e){return this._rgb.a=Zr(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=$o(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Uo(this._rgb,2,e),this}darken(e){return Uo(this._rgb,2,-e),this}saturate(e){return Uo(this._rgb,1,e),this}desaturate(e){return Uo(this._rgb,1,-e),this}rotate(e){return E0(this._rgb,e),this}}function pr(){}const F0=(()=>{let n=0;return()=>n++})();function en(n){return n==null}function Sn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function zt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Vn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Qi(n,e){return Vn(n)?n:e}function Kt(n,e){return typeof n>"u"?e:n}const q0=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Pt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Ft(n,e,t,i){let a,s,o;if(Sn(n))for(s=n.length,a=0;a<s;a++)e.call(t,n[a],a);else if(zt(n))for(o=Object.keys(n),s=o.length,a=0;a<s;a++)e.call(t,n[o[a]],o[a])}function kl(n,e){let t,i,a,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(a=n[t],s=e[t],a.datasetIndex!==s.datasetIndex||a.index!==s.index)return!1;return!0}function Sl(n){if(Sn(n))return n.map(Sl);if(zt(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let a=0;for(;a<i;++a)e[t[a]]=Sl(n[t[a]]);return e}return n}function Bm(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function z0(n,e,t,i){if(!Bm(n))return;const a=e[n],s=t[n];zt(a)&&zt(s)?lo(a,s,i):e[n]=Sl(s)}function lo(n,e,t){const i=Sn(e)?e:[e],a=i.length;if(!zt(n))return n;t=t||{};const s=t.merger||z0;let o;for(let l=0;l<a;++l){if(o=i[l],!zt(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)s(c[u],n,o,t)}return n}function Js(n,e){return lo(n,e,{merger:j0})}function j0(n,e,t){if(!Bm(n))return;const i=e[n],a=t[n];zt(i)&&zt(a)?Js(i,a):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Sl(a))}const Zf={"":n=>n,x:n=>n.x,y:n=>n.y};function U0(n){const e=n.split("."),t=[];let i="";for(const a of e)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function V0(n){const e=U0(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Tl(n,e){return(Zf[e]||(Zf[e]=V0(e)))(n)}function _d(n){return n.charAt(0).toUpperCase()+n.slice(1)}const $l=n=>typeof n<"u",Qr=n=>typeof n=="function",Gf=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function B0(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Un=Math.PI,lr=2*Un,H0=lr+Un,Il=Number.POSITIVE_INFINITY,W0=Un/180,Bi=Un/2,ca=Un/4,Xf=Un*2/3,Hm=Math.log10,ea=Math.sign;function Sa(n,e,t){return Math.abs(n-e)<t}function Qf(n){const e=Math.round(n);n=Sa(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Hm(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Y0(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((a,s)=>a-s).pop(),e}function K0(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function co(n){return!K0(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function J0(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function Z0(n,e,t){let i,a,s;for(i=0,a=n.length;i<a;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ba(n){return n*(Un/180)}function G0(n){return n*(180/Un)}function eh(n){if(!Vn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function X0(n,e){const t=e.x-n.x,i=e.y-n.y,a=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*Un&&(s+=lr),{angle:s,distance:a}}function xu(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Q0(n,e){return(n-e+H0)%lr-Un}function ir(n){return(n%lr+lr)%lr}function Wm(n,e,t,i){const a=ir(n),s=ir(e),o=ir(t),l=ir(s-a),c=ir(o-a),u=ir(a-s),d=ir(a-o);return a===s||a===o||i&&s===o||l>c&&u<d}function Hi(n,e,t){return Math.max(e,Math.min(t,n))}function ew(n){return Hi(n,-32768,32767)}function Ym(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function xd(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,a=0,s;for(;i-a>1;)s=a+i>>1,t(s)?a=s:i=s;return{lo:a,hi:i}}const ya=(n,e,t,i)=>xd(n,t,i?a=>{const s=n[a][e];return s<t||s===t&&n[a+1][e]===t}:a=>n[a][e]<t),tw=(n,e,t)=>xd(n,t,i=>n[i][e]>=t);function nw(n,e,t){let i=0,a=n.length;for(;i<a&&n[i]<e;)i++;for(;a>i&&n[a-1]>t;)a--;return i>0||a<n.length?n.slice(i,a):n}const Km=["push","pop","shift","splice","unshift"];function iw(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Km.forEach(t=>{const i="_onData"+_d(t),a=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=a.apply(this,s);return n._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...s)}),o}})})}function th(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,a=i.indexOf(e);a!==-1&&i.splice(a,1),!(i.length>0)&&(Km.forEach(s=>{delete n[s]}),delete n._chartjs)}function rw(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const Jm=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function Zm(n,e){let t=[],i=!1;return function(...a){t=a,i||(i=!0,Jm.call(window,()=>{i=!1,n.apply(e,t)}))}}function aw(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const sw=n=>n==="start"?"left":n==="end"?"right":"center",nh=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2;function ow(n,e,t){const i=e.length;let a=0,s=i;if(n._sorted){const{iScale:o,vScale:l,_parsed:c}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=o.axis,{min:f,max:h,minDefined:v,maxDefined:_}=o.getUserBounds();if(v){if(a=Math.min(ya(c,d,f).lo,t?i:ya(e,d,o.getPixelForValue(f)).lo),u){const b=c.slice(0,a+1).reverse().findIndex(m=>!en(m[l.axis]));a-=Math.max(0,b)}a=Hi(a,0,i-1)}if(_){let b=Math.max(ya(c,o.axis,h,!0).hi+1,t?0:ya(e,d,o.getPixelForValue(h),!0).hi+1);if(u){const m=c.slice(b-1).findIndex(k=>!en(k[l.axis]));b+=Math.max(0,m)}s=Hi(b,a,i)-a}else s=i-a}return{start:a,count:s}}function lw(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,a={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=a,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,a),s}const Vo=n=>n===0||n===1,ih=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*lr/t)),rh=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*lr/t)+1,Zs={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Bi)+1,easeOutSine:n=>Math.sin(n*Bi),easeInOutSine:n=>-.5*(Math.cos(Un*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Vo(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Vo(n)?n:ih(n,.075,.3),easeOutElastic:n=>Vo(n)?n:rh(n,.075,.3),easeInOutElastic(n){return Vo(n)?n:n<.5?.5*ih(n*2,.1125,.45):.5+.5*rh(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Zs.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Zs.easeInBounce(n*2)*.5:Zs.easeOutBounce(n*2-1)*.5+.5};function wd(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ah(n){return wd(n)?n:new oo(n)}function Tc(n){return wd(n)?n:new oo(n).saturate(.5).darken(.1).hexString()}const cw=["x","y","borderWidth","radius","tension"],uw=["color","borderColor","backgroundColor"];function dw(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:uw},numbers:{type:"number",properties:cw}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function fw(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const sh=new Map;function hw(n,e){e=e||{};const t=n+JSON.stringify(e);let i=sh.get(t);return i||(i=new Intl.NumberFormat(n,e),sh.set(t,i)),i}function Gm(n,e,t){return hw(e,t).format(n)}const vw={values(n){return Sn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let a,s=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(a="scientific"),s=pw(n,t)}const o=Hm(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:a,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Gm(n,i,c)}};function pw(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Xm={formatters:vw};function mw(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Da=Object.create(null),wu=Object.create(null);function Gs(n,e){if(!e)return n;const t=e.split(".");for(let i=0,a=t.length;i<a;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function $c(n,e,t){return typeof e=="string"?lo(Gs(n,e),t):lo(Gs(n,""),e)}class gw{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>Tc(a.backgroundColor),this.hoverBorderColor=(i,a)=>Tc(a.borderColor),this.hoverColor=(i,a)=>Tc(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return $c(this,e,t)}get(e){return Gs(this,e)}describe(e,t){return $c(wu,e,t)}override(e,t){return $c(Da,e,t)}route(e,t,i,a){const s=Gs(this,e),o=Gs(this,i),l="_"+t;Object.defineProperties(s,{[l]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],u=o[a];return zt(c)?Object.assign({},u,c):Kt(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var yn=new gw({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[dw,fw,mw]);function bw(n){return!n||en(n.size)||en(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function oh(n,e,t,i,a){let s=e[a];return s||(s=e[a]=n.measureText(a).width,t.push(a)),s>i&&(i=s),i}function ua(n,e,t){const i=n.currentDevicePixelRatio,a=t!==0?Math.max(t/2,.5):0;return Math.round((e-a)*i)/i+a}function lh(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function ku(n,e,t,i){yw(n,e,t,i)}function yw(n,e,t,i,a){let s,o,l,c,u,d,f,h;const v=e.pointStyle,_=e.rotation,b=e.radius;let m=(_||0)*W0;if(v&&typeof v=="object"&&(s=v.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),v){default:n.arc(t,i,b,0,lr),n.closePath();break;case"triangle":d=b,n.moveTo(t+Math.sin(m)*d,i-Math.cos(m)*b),m+=Xf,n.lineTo(t+Math.sin(m)*d,i-Math.cos(m)*b),m+=Xf,n.lineTo(t+Math.sin(m)*d,i-Math.cos(m)*b),n.closePath();break;case"rectRounded":u=b*.516,c=b-u,o=Math.cos(m+ca)*c,f=Math.cos(m+ca)*c,l=Math.sin(m+ca)*c,h=Math.sin(m+ca)*c,n.arc(t-f,i-l,u,m-Un,m-Bi),n.arc(t+h,i-o,u,m-Bi,m),n.arc(t+f,i+l,u,m,m+Bi),n.arc(t-h,i+o,u,m+Bi,m+Un),n.closePath();break;case"rect":if(!_){c=Math.SQRT1_2*b,d=c,n.rect(t-d,i-c,2*d,2*c);break}m+=ca;case"rectRot":f=Math.cos(m)*b,o=Math.cos(m)*b,l=Math.sin(m)*b,h=Math.sin(m)*b,n.moveTo(t-f,i-l),n.lineTo(t+h,i-o),n.lineTo(t+f,i+l),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":m+=ca;case"cross":f=Math.cos(m)*b,o=Math.cos(m)*b,l=Math.sin(m)*b,h=Math.sin(m)*b,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":f=Math.cos(m)*b,o=Math.cos(m)*b,l=Math.sin(m)*b,h=Math.sin(m)*b,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),m+=ca,f=Math.cos(m)*b,o=Math.cos(m)*b,l=Math.sin(m)*b,h=Math.sin(m)*b,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=Math.cos(m)*b,l=Math.sin(m)*b,n.moveTo(t-o,i-l),n.lineTo(t+o,i+l);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*b,i+Math.sin(m)*b);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function us(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function kd(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Sd(n){n.restore()}function _w(n,e,t,i,a){if(!e)return n.lineTo(t.x,t.y);if(a==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else a==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function xw(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function ww(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),en(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function kw(n,e,t,i,a){if(a.strikethrough||a.underline){const s=n.measureText(i),o=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,u=t+s.actualBoundingBoxDescent,d=a.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=a.decorationWidth||2,n.moveTo(o,d),n.lineTo(l,d),n.stroke()}}function Sw(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function ch(n,e,t,i,a,s={}){const o=Sn(e)?e:[e],l=s.strokeWidth>0&&s.strokeColor!=="";let c,u;for(n.save(),n.font=a.string,ww(n,s),c=0;c<o.length;++c)u=o[c],s.backdrop&&Sw(n,s.backdrop),l&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),en(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(u,t,i,s.maxWidth)),n.fillText(u,t,i,s.maxWidth),kw(n,t,i,u,s),i+=Number(a.lineHeight);n.restore()}function uh(n,e){const{x:t,y:i,w:a,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*Un,Un,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Un,Bi,!0),n.lineTo(t+a-o.bottomRight,i+s),n.arc(t+a-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Bi,0,!0),n.lineTo(t+a,i+o.topRight),n.arc(t+a-o.topRight,i+o.topRight,o.topRight,0,-Bi,!0),n.lineTo(t+o.topLeft,i)}const Tw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$w=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Iw(n,e){const t=(""+n).match(Tw);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const Cw=n=>+n||0;function Qm(n,e){const t={},i=zt(e),a=i?Object.keys(e):e,s=zt(n)?i?o=>Kt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of a)t[o]=Cw(s(o));return t}function Ew(n){return Qm(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ll(n){return Qm(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ta(n){const e=Ew(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function sr(n,e){n=n||{},e=e||yn.font;let t=Kt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Kt(n.style,e.style);i&&!(""+i).match($w)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:Kt(n.family,e.family),lineHeight:Iw(Kt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Kt(n.weight,e.weight),string:""};return a.string=bw(a),a}function Bo(n,e,t,i){let a,s,o;for(a=0,s=n.length;a<s;++a)if(o=n[a],o!==void 0&&o!==void 0)return o}function Ow(n,e,t){const{min:i,max:a}=n,s=q0(e,(a-i)/2),o=(l,c)=>t&&l===0?0:l+c;return{min:o(i,-Math.abs(s)),max:o(a,s)}}function La(n,e){return Object.assign(Object.create(n),e)}function Td(n,e=[""],t,i,a=()=>n[0]){const s=t||n;typeof i>"u"&&(i=ig("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:a,override:l=>Td([l,...n],e,s,i)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete n[0][c],!0},get(l,c){return tg(l,c,()=>Fw(c,e,n,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(l,c){return fh(l).includes(c)},ownKeys(l){return fh(l)},set(l,c,u){const d=l._storage||(l._storage=a());return l[c]=d[c]=u,delete l._keys,!0}})}function ds(n,e,t,i){const a={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:eg(n,i),setContext:s=>ds(n,s,t,i),override:s=>ds(n.override(s),e,t,i)};return new Proxy(a,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,l){return tg(s,o,()=>Pw(s,o,l))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,l){return n[o]=l,delete s[o],!0}})}function eg(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:a=e.allKeys}=n;return{allKeys:a,scriptable:t,indexable:i,isScriptable:Qr(t)?t:()=>t,isIndexable:Qr(i)?i:()=>i}}const Dw=(n,e)=>n?n+_d(e):e,$d=(n,e)=>zt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function tg(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function Pw(n,e,t){const{_proxy:i,_context:a,_subProxy:s,_descriptors:o}=n;let l=i[e];return Qr(l)&&o.isScriptable(e)&&(l=Mw(e,l,n,t)),Sn(l)&&l.length&&(l=Aw(e,l,n,o.isIndexable)),$d(e,l)&&(l=ds(l,a,s&&s[e],o)),l}function Mw(n,e,t,i){const{_proxy:a,_context:s,_subProxy:o,_stack:l}=t;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let c=e(s,o||i);return l.delete(n),$d(n,c)&&(c=Id(a._scopes,a,n,c)),c}function Aw(n,e,t,i){const{_proxy:a,_context:s,_subProxy:o,_descriptors:l}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(zt(e[0])){const c=e,u=a._scopes.filter(d=>d!==c);e=[];for(const d of c){const f=Id(u,a,n,d);e.push(ds(f,s,o&&o[n],l))}}return e}function ng(n,e,t){return Qr(n)?n(e,t):n}const Lw=(n,e)=>n===!0?e:typeof n=="string"?Tl(e,n):void 0;function Nw(n,e,t,i,a){for(const s of e){const o=Lw(t,s);if(o){n.add(o);const l=ng(o._fallback,t,a);if(typeof l<"u"&&l!==t&&l!==i)return l}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function Id(n,e,t,i){const a=e._rootScopes,s=ng(e._fallback,t,i),o=[...n,...a],l=new Set;l.add(i);let c=dh(l,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=dh(l,o,s,c,i),c===null)?!1:Td(Array.from(l),[""],a,s,()=>Rw(e,t,i))}function dh(n,e,t,i,a){for(;t;)t=Nw(n,e,t,i,a);return t}function Rw(n,e,t){const i=n._getTarget();e in i||(i[e]={});const a=i[e];return Sn(a)&&zt(t)?t:a||{}}function Fw(n,e,t,i){let a;for(const s of e)if(a=ig(Dw(s,n),t),typeof a<"u")return $d(n,a)?Id(t,i,n,a):a}function ig(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function fh(n){let e=n._keys;return e||(e=n._keys=qw(n._scopes)),e}function qw(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(a=>!a.startsWith("_")))e.add(i);return Array.from(e)}const zw=Number.EPSILON||1e-14,fs=(n,e)=>e<n.length&&!n[e].skip&&n[e],rg=n=>n==="x"?"y":"x";function jw(n,e,t,i){const a=n.skip?e:n,s=e,o=t.skip?e:t,l=xu(s,a),c=xu(o,s);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=i*u,h=i*d;return{previous:{x:s.x-f*(o.x-a.x),y:s.y-f*(o.y-a.y)},next:{x:s.x+h*(o.x-a.x),y:s.y+h*(o.y-a.y)}}}function Uw(n,e,t){const i=n.length;let a,s,o,l,c,u=fs(n,0);for(let d=0;d<i-1;++d)if(c=u,u=fs(n,d+1),!(!c||!u)){if(Sa(e[d],0,zw)){t[d]=t[d+1]=0;continue}a=t[d]/e[d],s=t[d+1]/e[d],l=Math.pow(a,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),t[d]=a*o*e[d],t[d+1]=s*o*e[d])}}function Vw(n,e,t="x"){const i=rg(t),a=n.length;let s,o,l,c=fs(n,0);for(let u=0;u<a;++u){if(o=l,l=c,c=fs(n,u+1),!l)continue;const d=l[t],f=l[i];o&&(s=(d-o[t])/3,l[`cp1${t}`]=d-s,l[`cp1${i}`]=f-s*e[u]),c&&(s=(c[t]-d)/3,l[`cp2${t}`]=d+s,l[`cp2${i}`]=f+s*e[u])}}function Bw(n,e="x"){const t=rg(e),i=n.length,a=Array(i).fill(0),s=Array(i);let o,l,c,u=fs(n,0);for(o=0;o<i;++o)if(l=c,c=u,u=fs(n,o+1),!!c){if(u){const d=u[e]-c[e];a[o]=d!==0?(u[t]-c[t])/d:0}s[o]=l?u?ea(a[o-1])!==ea(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}Uw(n,a,s),Vw(n,s,e)}function Ho(n,e,t){return Math.max(Math.min(n,t),e)}function Hw(n,e){let t,i,a,s,o,l=us(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=l,l=t<i-1&&us(n[t+1],e),s&&(a=n[t],o&&(a.cp1x=Ho(a.cp1x,e.left,e.right),a.cp1y=Ho(a.cp1y,e.top,e.bottom)),l&&(a.cp2x=Ho(a.cp2x,e.left,e.right),a.cp2y=Ho(a.cp2y,e.top,e.bottom)))}function Ww(n,e,t,i,a){let s,o,l,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Bw(n,a);else{let u=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)l=n[s],c=jw(u,l,n[Math.min(s+1,o-(i?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&Hw(n,t)}function Cd(){return typeof window<"u"&&typeof document<"u"}function Ed(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Cl(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Gl=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Yw(n,e){return Gl(n).getPropertyValue(e)}const Kw=["top","right","bottom","left"];function Ta(n,e,t){const i={};t=t?"-"+t:"";for(let a=0;a<4;a++){const s=Kw[a];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Jw=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Zw(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:a,offsetY:s}=i;let o=!1,l,c;if(Jw(a,s,n.target))l=a,c=s;else{const u=e.getBoundingClientRect();l=i.clientX-u.left,c=i.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function rr(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,a=Gl(t),s=a.boxSizing==="border-box",o=Ta(a,"padding"),l=Ta(a,"border","width"),{x:c,y:u,box:d}=Zw(n,t),f=o.left+(d&&l.left),h=o.top+(d&&l.top);let{width:v,height:_}=e;return s&&(v-=o.width+l.width,_-=o.height+l.height),{x:Math.round((c-f)/v*t.width/i),y:Math.round((u-h)/_*t.height/i)}}function Gw(n,e,t){let i,a;if(e===void 0||t===void 0){const s=n&&Ed(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),l=Gl(s),c=Ta(l,"border","width"),u=Ta(l,"padding");e=o.width-u.width-c.width,t=o.height-u.height-c.height,i=Cl(l.maxWidth,s,"clientWidth"),a=Cl(l.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||Il,maxHeight:a||Il}}const Vr=n=>Math.round(n*10)/10;function Xw(n,e,t,i){const a=Gl(n),s=Ta(a,"margin"),o=Cl(a.maxWidth,n,"clientWidth")||Il,l=Cl(a.maxHeight,n,"clientHeight")||Il,c=Gw(n,e,t);let{width:u,height:d}=c;if(a.boxSizing==="content-box"){const h=Ta(a,"border","width"),v=Ta(a,"padding");u-=v.width+h.width,d-=v.height+h.height}return u=Math.max(0,u-s.width),d=Math.max(0,i?u/i:d-s.height),u=Vr(Math.min(u,o,c.maxWidth)),d=Vr(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Vr(u/2)),(e!==void 0||t!==void 0)&&i&&c.height&&d>c.height&&(d=c.height,u=Vr(Math.floor(d*i))),{width:u,height:d}}function hh(n,e,t){const i=e||1,a=Vr(n.height*i),s=Vr(n.width*i);n.height=Vr(n.height),n.width=Vr(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==a||o.width!==s?(n.currentDevicePixelRatio=i,o.height=a,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Qw=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Cd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function vh(n,e){const t=Yw(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function fa(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function ek(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function tk(n,e,t,i){const a={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=fa(n,a,t),l=fa(a,s,t),c=fa(s,e,t),u=fa(o,l,t),d=fa(l,c,t);return fa(u,d,t)}const nk=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},ik=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Ic(n,e,t){return n?nk(e,t):ik()}function rk(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function ak(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function ag(n){return n==="angle"?{between:Wm,compare:Q0,normalize:ir}:{between:Ym,compare:(e,t)=>e-t,normalize:e=>e}}function ph({start:n,end:e,count:t,loop:i,style:a}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:a}}function sk(n,e,t){const{property:i,start:a,end:s}=t,{between:o,normalize:l}=ag(i),c=e.length;let{start:u,end:d,loop:f}=n,h,v;if(f){for(u+=c,d+=c,h=0,v=c;h<v&&o(l(e[u%c][i]),a,s);++h)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:n.style}}function sg(n,e,t){if(!t)return[n];const{property:i,start:a,end:s}=t,o=e.length,{compare:l,between:c,normalize:u}=ag(i),{start:d,end:f,loop:h,style:v}=sk(n,e,t),_=[];let b=!1,m=null,k,S,$;const D=()=>c(a,$,k)&&l(a,$)!==0,I=()=>l(s,k)===0||c(s,$,k),C=()=>b||D(),w=()=>!b||I();for(let E=d,O=d;E<=f;++E)S=e[E%o],!S.skip&&(k=u(S[i]),k!==$&&(b=c(k,a,s),m===null&&C()&&(m=l(k,a)===0?E:O),m!==null&&w()&&(_.push(ph({start:m,end:E,loop:h,count:o,style:v})),m=null),O=E,$=k));return m!==null&&_.push(ph({start:m,end:f,loop:h,count:o,style:v})),_}function og(n,e){const t=[],i=n.segments;for(let a=0;a<i.length;a++){const s=sg(i[a],n.points,e);s.length&&t.push(...s)}return t}function ok(n,e,t,i){let a=0,s=e-1;if(t&&!i)for(;a<e&&!n[a].skip;)a++;for(;a<e&&n[a].skip;)a++;for(a%=e,t&&(s+=a);s>a&&n[s%e].skip;)s--;return s%=e,{start:a,end:s}}function lk(n,e,t,i){const a=n.length,s=[];let o=e,l=n[e],c;for(c=e+1;c<=t;++c){const u=n[c%a];u.skip||u.stop?l.skip||(i=!1,s.push({start:e%a,end:(c-1)%a,loop:i}),e=o=u.stop?c:null):(o=c,l.skip&&(e=c)),l=u}return o!==null&&s.push({start:e%a,end:o%a,loop:i}),s}function ck(n,e){const t=n.points,i=n.options.spanGaps,a=t.length;if(!a)return[];const s=!!n._loop,{start:o,end:l}=ok(t,a,s,i);if(i===!0)return mh(n,[{start:o,end:l,loop:s}],t,e);const c=l<o?l+a:l,u=!!n._fullLoop&&o===0&&l===a-1;return mh(n,lk(t,o,c,u),t,e)}function mh(n,e,t,i){return!i||!i.setContext||!t?e:uk(n,e,t,i)}function uk(n,e,t,i){const a=n._chart.getContext(),s=gh(n.options),{_datasetIndex:o,options:{spanGaps:l}}=n,c=t.length,u=[];let d=s,f=e[0].start,h=f;function v(_,b,m,k){const S=l?-1:1;if(_!==b){for(_+=c;t[_%c].skip;)_-=S;for(;t[b%c].skip;)b+=S;_%c!==b%c&&(u.push({start:_%c,end:b%c,loop:m,style:k}),d=k,f=b%c)}}for(const _ of e){f=l?f:_.start;let b=t[f%c],m;for(h=f+1;h<=_.end;h++){const k=t[h%c];m=gh(i.setContext(La(a,{type:"segment",p0:b,p1:k,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),dk(m,d)&&v(f,h-1,_.loop,d),b=k,d=m}f<h-1&&v(f,h-1,_.loop,d)}return u}function gh(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function dk(n,e){if(!e)return!1;const t=[],i=function(a,s){return wd(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Wo(n,e,t){return n.options.clip?n[t]:e[t]}function fk(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Wo(t,e,"left"),right:Wo(t,e,"right"),top:Wo(i,e,"top"),bottom:Wo(i,e,"bottom")}:e}function lg(n,e){const t=e._clip;if(t.disabled)return!1;const i=fk(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}class hk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,a){const s=t.listeners[a],o=t.duration;s.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Jm.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,l=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(a.draw(),this._notify(a,i,e,"progress")),s.length||(i.running=!1,this._notify(a,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var mr=new hk;const bh="transparent",vk={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=ah(n||bh),a=i.valid&&ah(e||bh);return a&&a.valid?a.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class pk{constructor(e,t,i,a){const s=t[i];a=Bo([e.to,a,s,e.from]);const o=Bo([e.from,s,a]);this._active=!0,this._fn=e.fn||vk[e.type||typeof o],this._easing=Zs[e.easing]||Zs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const a=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Bo([e.to,t,a,e.from]),this._from=Bo([e.from,a,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,a=this._prop,s=this._from,o=this._loop,l=this._to;let c;if(this._active=s!==l&&(o||t<i),!this._active){this._target[a]=l,this._notify(!0);return}if(t<0){this._target[a]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[a]=this._fn(s,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][t]()}}class cg{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!zt(e))return;const t=Object.keys(yn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const s=e[a];if(!zt(s))return;const o={};for(const l of t)o[l]=s[l];(Sn(s.properties)&&s.properties||[a]).forEach(l=>{(l===a||!i.has(l))&&i.set(l,o)})})}_animateOptions(e,t){const i=t.options,a=gk(e,i);if(!a)return[];const s=this._createAnimations(a,i);return i.$shared&&mk(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,a=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){a.push(...this._animateOptions(e,t));continue}const d=t[u];let f=s[u];const h=i.get(u);if(f)if(h&&f.active()){f.update(h,d,l);continue}else f.cancel();if(!h||!h.duration){e[u]=d;continue}s[u]=f=new pk(h,e,u,d),a.push(f)}return a}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return mr.add(this._chart,i),!0}}function mk(n,e){const t=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const s=n[i[a]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function gk(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function yh(n,e){const t=n&&n.options||{},i=t.reverse,a=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:a,end:i?a:s}}function bk(n,e,t){if(t===!1)return!1;const i=yh(n,t),a=yh(e,t);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function yk(n){let e,t,i,a;return zt(n)?(e=n.top,t=n.right,i=n.bottom,a=n.left):e=t=i=a=n,{top:e,right:t,bottom:i,left:a,disabled:n===!1}}function ug(n,e){const t=[],i=n._getSortedDatasetMetas(e);let a,s;for(a=0,s=i.length;a<s;++a)t.push(i[a].index);return t}function _h(n,e,t,i={}){const a=n.keys,s=i.mode==="single";let o,l,c,u;if(e===null)return;let d=!1;for(o=0,l=a.length;o<l;++o){if(c=+a[o],c===t){if(d=!0,i.all)continue;break}u=n.values[c],Vn(u)&&(s||e===0||ea(e)===ea(u))&&(e+=u)}return!d&&!i.all?0:e}function _k(n,e){const{iScale:t,vScale:i}=e,a=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[a]:d,[s]:n[d]};return l}function Cc(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function xk(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function wk(n){const{min:e,max:t,minDefined:i,maxDefined:a}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:a?t:Number.POSITIVE_INFINITY}}function kk(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function xh(n,e,t,i){for(const a of e.getMatchingVisibleMetas(i).reverse()){const s=n[a.index];if(t&&s>0||!t&&s<0)return a.index}return null}function wh(n,e){const{chart:t,_cachedMeta:i}=n,a=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:l}=i,c=s.axis,u=o.axis,d=xk(s,o,i),f=e.length;let h;for(let v=0;v<f;++v){const _=e[v],{[c]:b,[u]:m}=_,k=_._stacks||(_._stacks={});h=k[u]=kk(a,d,b),h[l]=m,h._top=xh(h,o,!0,i.type),h._bottom=xh(h,o,!1,i.type);const S=h._visualValues||(h._visualValues={});S[l]=m}}function Ec(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function Sk(n,e){return La(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Tk(n,e,t){return La(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ms(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const a of e){const s=a._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const Oc=n=>n==="reset"||n==="none",kh=(n,e)=>e?n:Object.assign({},n),$k=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:ug(t,!0),values:null};class dg{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Cc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ms(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),a=(f,h,v,_)=>f==="x"?h:f==="r"?_:v,s=t.xAxisID=Kt(i.xAxisID,Ec(e,"x")),o=t.yAxisID=Kt(i.yAxisID,Ec(e,"y")),l=t.rAxisID=Kt(i.rAxisID,Ec(e,"r")),c=t.indexAxis,u=t.iAxisID=a(c,s,o,l),d=t.vAxisID=a(c,o,s,l);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&th(this._data,this),e._stacked&&Ms(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(zt(t)){const a=this._cachedMeta;this._data=_k(t,a)}else if(i!==t){if(i){th(i,this);const a=this._cachedMeta;Ms(a),a._parsed=[]}t&&Object.isExtensible(t)&&iw(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const s=t._stacked;t._stacked=Cc(t.vScale,t),t.stack!==i.stack&&(a=!0,Ms(t),t.stack=i.stack),this._resyncElements(e),(a||s!==t._stacked)&&(wh(this,t._parsed),t._stacked=Cc(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:a}=this,{iScale:s,_stacked:o}=i,l=s.axis;let c=e===0&&t===a.length?!0:i._sorted,u=e>0&&i._parsed[e-1],d,f,h;if(this._parsing===!1)i._parsed=a,i._sorted=!0,h=a;else{Sn(a[e])?h=this.parseArrayData(i,a,e,t):zt(a[e])?h=this.parseObjectData(i,a,e,t):h=this.parsePrimitiveData(i,a,e,t);const v=()=>f[l]===null||u&&f[l]<u[l];for(d=0;d<t;++d)i._parsed[d+e]=f=h[d],c&&(v()&&(c=!1),u=f);i._sorted=c}o&&wh(this,h)}parsePrimitiveData(e,t,i,a){const{iScale:s,vScale:o}=e,l=s.axis,c=o.axis,u=s.getLabels(),d=s===o,f=new Array(a);let h,v,_;for(h=0,v=a;h<v;++h)_=h+i,f[h]={[l]:d||s.parse(u[_],_),[c]:o.parse(t[_],_)};return f}parseArrayData(e,t,i,a){const{xScale:s,yScale:o}=e,l=new Array(a);let c,u,d,f;for(c=0,u=a;c<u;++c)d=c+i,f=t[d],l[c]={x:s.parse(f[0],d),y:o.parse(f[1],d)};return l}parseObjectData(e,t,i,a){const{xScale:s,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(a);let d,f,h,v;for(d=0,f=a;d<f;++d)h=d+i,v=t[h],u[d]={x:s.parse(Tl(v,l),h),y:o.parse(Tl(v,c),h)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const a=this.chart,s=this._cachedMeta,o=t[e.axis],l={keys:ug(a,!0),values:t._stacks[e.axis]._visualValues};return _h(l,o,s.index,{mode:i})}updateRangeFromParsed(e,t,i,a){const s=i[t.axis];let o=s===null?NaN:s;const l=a&&i._stacks[t.axis];a&&l&&(a.values=l,o=_h(a,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,a=i._parsed,s=i._sorted&&e===i.iScale,o=a.length,l=this._getOtherScale(e),c=$k(t,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=wk(l);let h,v;function _(){v=a[h];const b=v[l.axis];return!Vn(v[e.axis])||d>b||f<b}for(h=0;h<o&&!(!_()&&(this.updateRangeFromParsed(u,e,v,c),s));++h);if(s){for(h=o-1;h>=0;--h)if(!_()){this.updateRangeFromParsed(u,e,v,c);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let a,s,o;for(a=0,s=t.length;a<s;++a)o=t[a][e.axis],Vn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,a=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:a?""+a.getLabelForValue(s[a.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=yk(Kt(this.options.clip,bk(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,a=i.data||[],s=t.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||a.length-l,u=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(e,s,l,c),d=l;d<l+c;++d){const f=a[d];f.hidden||(f.active&&u?o.push(f):f.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const a=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Tk(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=a.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Sk(this.chart.getContext(),this.index)),s.dataset=a,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const a=t==="active",s=this._cachedDataOpts,o=e+"-"+t,l=s[o],c=this.enableOptionSharing&&$l(i);if(l)return kh(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=a?[`${e}Hover`,"hover",e,""]:[e,""],h=u.getOptionScopes(this.getDataset(),d),v=Object.keys(yn.elements[e]),_=()=>this.getContext(i,a,t),b=u.resolveNamedOptions(h,v,_,f);return b.$shared&&(b.$shared=c,s[o]=Object.freeze(kh(b,c))),b}_resolveAnimations(e,t,i){const a=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,l=s[o];if(l)return l;let c;if(a.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,t),h=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(h,this.getContext(e,i,t))}const u=new cg(a,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Oc(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),a=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(t,s)||s!==a;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:o}}updateElement(e,t,i,a){Oc(a)?Object.assign(e,i):this._resolveAnimations(t,a).update(e,i)}updateSharedOptions(e,t,i){e&&!Oc(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,a){e.active=a;const s=this.getStyle(t,a);this._resolveAnimations(t,i,a).update(e,{options:!a&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const a=i.length,s=t.length,o=Math.min(s,a);o&&this.parse(0,o),s>a?this._insertElements(a,s-a,e):s<a&&this._removeElements(s,a-s)}_insertElements(e,t,i=!0){const a=this._cachedMeta,s=a.data,o=e+t;let l;const c=u=>{for(u.length+=t,l=u.length-1;l>=o;l--)u[l]=u[l-t]};for(c(s),l=e;l<o;++l)s[l]=new this.dataElementType;this._parsing&&c(a._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,a){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(e,t);i._stacked&&Ms(i,a)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,a]=e;this[t](i,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Ik extends dg{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:a=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:l,count:c}=ow(t,a,o);this._drawStart=l,this._drawCount=c,lw(t)&&(l=0,c=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=a;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(a,l,c,e)}updateElements(e,t,i,a){const s=a==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(t,a),h=o.axis,v=l.axis,{spanGaps:_,segment:b}=this.options,m=co(_)?_:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||s||a==="none",S=t+i,$=e.length;let D=t>0&&this.getParsed(t-1);for(let I=0;I<$;++I){const C=e[I],w=k?C:{};if(I<t||I>=S){w.skip=!0;continue}const E=this.getParsed(I),O=en(E[v]),A=w[h]=o.getPixelForValue(E[h],I),q=w[v]=s||O?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,E,c):E[v],I);w.skip=isNaN(A)||isNaN(q)||O,w.stop=I>0&&Math.abs(E[h]-D[h])>m,b&&(w.parsed=E,w.raw=u.data[I]),f&&(w.options=d||this.resolveDataElementOptions(I,C.active?"active":a)),k||this.updateElement(C,I,w,a),D=E}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,a=e.data||[];if(!a.length)return i;const s=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function da(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Od{static override(e){Object.assign(Od.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return da()}parse(){return da()}format(){return da()}add(){return da()}diff(){return da()}startOf(){return da()}endOf(){return da()}}var fg={_date:Od};function Ck(n,e,t,i){const{controller:a,data:s,_sorted:o}=n,l=a._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&s.length){const u=l._reversePixels?tw:ya;if(i){if(a._sharedOptions){const d=s[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const h=u(s,e,t-f),v=u(s,e,t+f);return{lo:h.lo,hi:v.hi}}}}else{const d=u(s,e,t);if(c){const{vScale:f}=a._cachedMeta,{_parsed:h}=n,v=h.slice(0,d.lo+1).reverse().findIndex(b=>!en(b[f.axis]));d.lo-=Math.max(0,v);const _=h.slice(d.hi).findIndex(b=>!en(b[f.axis]));d.hi+=Math.max(0,_)}return d}}return{lo:0,hi:s.length-1}}function Xl(n,e,t,i,a){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,c=s.length;l<c;++l){const{index:u,data:d}=s[l],{lo:f,hi:h}=Ck(s[l],e,o,a);for(let v=f;v<=h;++v){const _=d[v];_.skip||i(_,u,v)}}}function Ek(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,a){const s=e?Math.abs(i.x-a.x):0,o=t?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Dc(n,e,t,i,a){const s=[];return!a&&!n.isPointInArea(e)||Xl(n,t,e,function(l,c,u){!a&&!us(l,n.chartArea,0)||l.inRange(e.x,e.y,i)&&s.push({element:l,datasetIndex:c,index:u})},!0),s}function Ok(n,e,t,i){let a=[];function s(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:f}=X0(o,{x:e.x,y:e.y});Wm(f,u,d)&&a.push({element:o,datasetIndex:l,index:c})}return Xl(n,t,e,s),a}function Dk(n,e,t,i,a,s){let o=[];const l=Ek(t);let c=Number.POSITIVE_INFINITY;function u(d,f,h){const v=d.inRange(e.x,e.y,a);if(i&&!v)return;const _=d.getCenterPoint(a);if(!(!!s||n.isPointInArea(_))&&!v)return;const m=l(e,_);m<c?(o=[{element:d,datasetIndex:f,index:h}],c=m):m===c&&o.push({element:d,datasetIndex:f,index:h})}return Xl(n,t,e,u),o}function Pc(n,e,t,i,a,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?Ok(n,e,t,a):Dk(n,e,t,i,a,s)}function Sh(n,e,t,i,a){const s=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return Xl(n,t,e,(c,u,d)=>{c[o]&&c[o](e[t],a)&&(s.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(e.x,e.y,a))}),i&&!l?[]:s}var Pk={modes:{index(n,e,t,i){const a=rr(e,n),s=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?Dc(n,a,s,i,o):Pc(n,a,s,!1,i,o),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(n,e,t,i){const a=rr(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?Dc(n,a,s,i,o):Pc(n,a,s,!1,i,o);if(l.length>0){const c=l[0].datasetIndex,u=n.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(n,e,t,i){const a=rr(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Dc(n,a,s,i,o)},nearest(n,e,t,i){const a=rr(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Pc(n,a,s,t.intersect,i,o)},x(n,e,t,i){const a=rr(e,n);return Sh(n,a,"x",t.intersect,i)},y(n,e,t,i){const a=rr(e,n);return Sh(n,a,"y",t.intersect,i)}}};const hg=["left","top","right","bottom"];function As(n,e){return n.filter(t=>t.pos===e)}function Th(n,e){return n.filter(t=>hg.indexOf(t.pos)===-1&&t.box.axis===e)}function Ls(n,e){return n.sort((t,i)=>{const a=e?i:t,s=e?t:i;return a.weight===s.weight?a.index-s.index:a.weight-s.weight})}function Mk(n){const e=[];let t,i,a,s,o,l;for(t=0,i=(n||[]).length;t<i;++t)a=n[t],{position:s,options:{stack:o,stackWeight:l=1}}=a,e.push({index:t,box:a,pos:s,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&s+o,stackWeight:l});return e}function Ak(n){const e={};for(const t of n){const{stack:i,pos:a,stackWeight:s}=t;if(!i||!hg.includes(a))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Lk(n,e){const t=Ak(n),{vBoxMaxWidth:i,hBoxMaxHeight:a}=e;let s,o,l;for(s=0,o=n.length;s<o;++s){l=n[s];const{fullSize:c}=l.box,u=t[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*i:c&&e.availableWidth,l.height=a):(l.width=i,l.height=d?d*a:c&&e.availableHeight)}return t}function Nk(n){const e=Mk(n),t=Ls(e.filter(u=>u.box.fullSize),!0),i=Ls(As(e,"left"),!0),a=Ls(As(e,"right")),s=Ls(As(e,"top"),!0),o=Ls(As(e,"bottom")),l=Th(e,"x"),c=Th(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:a.concat(c).concat(o).concat(l),chartArea:As(e,"chartArea"),vertical:i.concat(a).concat(c),horizontal:s.concat(o).concat(l)}}function $h(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function vg(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Rk(n,e,t,i){const{pos:a,box:s}=t,o=n.maxPadding;if(!zt(a)){t.size&&(n[a]-=t.size);const f=i[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?s.height:s.width),t.size=f.size/f.count,n[a]+=t.size}s.getPadding&&vg(o,s.getPadding());const l=Math.max(0,e.outerWidth-$h(o,n,"left","right")),c=Math.max(0,e.outerHeight-$h(o,n,"top","bottom")),u=l!==n.w,d=c!==n.h;return n.w=l,n.h=c,t.horizontal?{same:u,other:d}:{same:d,other:u}}function Fk(n){const e=n.maxPadding;function t(i){const a=Math.max(e[i]-n[i],0);return n[i]+=a,a}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function qk(n,e){const t=e.maxPadding;function i(a){const s={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Vs(n,e,t,i){const a=[];let s,o,l,c,u,d;for(s=0,o=n.length,u=0;s<o;++s){l=n[s],c=l.box,c.update(l.width||e.w,l.height||e.h,qk(l.horizontal,e));const{same:f,other:h}=Rk(e,t,l,i);u|=f&&a.length,d=d||h,c.fullSize||a.push(l)}return u&&Vs(a,e,t,i)||d}function Yo(n,e,t,i,a){n.top=t,n.left=e,n.right=e+i,n.bottom=t+a,n.width=i,n.height=a}function Ih(n,e,t,i){const a=t.padding;let{x:s,y:o}=e;for(const l of n){const c=l.box,u=i[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const f=e.w*d,h=u.size||c.height;$l(u.start)&&(o=u.start),c.fullSize?Yo(c,a.left,o,t.outerWidth-a.right-a.left,h):Yo(c,e.left+u.placed,o,f,h),u.start=o,u.placed+=f,o=c.bottom}else{const f=e.h*d,h=u.size||c.width;$l(u.start)&&(s=u.start),c.fullSize?Yo(c,s,a.top,h,t.outerHeight-a.bottom-a.top):Yo(c,s,e.top+u.placed,h,f),u.start=s,u.placed+=f,s=c.right}}e.x=s,e.y=o}var Ko={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const a=ta(n.options.layout.padding),s=Math.max(e-a.width,0),o=Math.max(t-a.height,0),l=Nk(n.boxes),c=l.vertical,u=l.horizontal;Ft(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const d=c.reduce((b,m)=>m.box.options&&m.box.options.display===!1?b:b+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:a,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},a);vg(h,ta(i));const v=Object.assign({maxPadding:h,w:s,h:o,x:a.left,y:a.top},a),_=Lk(c.concat(u),f);Vs(l.fullSize,v,f,_),Vs(c,v,f,_),Vs(u,v,f,_)&&Vs(c,v,f,_),Fk(v),Ih(l.leftAndTop,v,f,_),v.x+=v.w,v.y+=v.h,Ih(l.rightAndBottom,v,f,_),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Ft(l.chartArea,b=>{const m=b.box;Object.assign(m,n.chartArea),m.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class pg{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,a){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,a?Math.floor(t/a):i)}}isAttached(e){return!0}updateConfig(e){}}class zk extends pg{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const cl="$chartjs",jk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ch=n=>n===null||n==="";function Uk(n,e){const t=n.style,i=n.getAttribute("height"),a=n.getAttribute("width");if(n[cl]={initial:{height:i,width:a,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Ch(a)){const s=vh(n,"width");s!==void 0&&(n.width=s)}if(Ch(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=vh(n,"height");s!==void 0&&(n.height=s)}return n}const mg=Qw?{passive:!0}:!1;function Vk(n,e,t){n&&n.addEventListener(e,t,mg)}function Bk(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,mg)}function Hk(n,e){const t=jk[n.type]||n.type,{x:i,y:a}=rr(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:a!==void 0?a:null}}function El(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function Wk(n,e,t){const i=n.canvas,a=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||El(l.addedNodes,i),o=o&&!El(l.removedNodes,i);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}function Yk(n,e,t){const i=n.canvas,a=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||El(l.removedNodes,i),o=o&&!El(l.addedNodes,i);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}const uo=new Map;let Eh=0;function gg(){const n=window.devicePixelRatio;n!==Eh&&(Eh=n,uo.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Kk(n,e){uo.size||window.addEventListener("resize",gg),uo.set(n,e)}function Jk(n){uo.delete(n),uo.size||window.removeEventListener("resize",gg)}function Zk(n,e,t){const i=n.canvas,a=i&&Ed(i);if(!a)return;const s=Zm((l,c)=>{const u=a.clientWidth;t(l,c),u<a.clientWidth&&t()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||s(u,d)});return o.observe(a),Kk(n,s),o}function Mc(n,e,t){t&&t.disconnect(),e==="resize"&&Jk(n)}function Gk(n,e,t){const i=n.canvas,a=Zm(s=>{n.ctx!==null&&t(Hk(s,n))},n);return Vk(i,e,a),a}class Xk extends pg{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Uk(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[cl])return!1;const i=t[cl].initial;["height","width"].forEach(s=>{const o=i[s];en(o)?t.removeAttribute(s):t.setAttribute(s,o)});const a=i.style||{};return Object.keys(a).forEach(s=>{t.style[s]=a[s]}),t.width=t.width,delete t[cl],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const a=e.$proxies||(e.$proxies={}),o={attach:Wk,detach:Yk,resize:Zk}[t]||Gk;a[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),a=i[t];if(!a)return;({attach:Mc,detach:Mc,resize:Mc}[t]||Bk)(e,t,a),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,a){return Xw(e,t,i,a)}isAttached(e){const t=e&&Ed(e);return!!(t&&t.isConnected)}}function Qk(n){return!Cd()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?zk:Xk}let Io=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return co(this.x)&&co(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const a={};return e.forEach(s=>{a[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),a}};function e2(n,e){const t=n.options.ticks,i=t2(n),a=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?i2(e):[],o=s.length,l=s[0],c=s[o-1],u=[];if(o>a)return r2(e,u,s,o/a),u;const d=n2(s,e,a);if(o>0){let f,h;const v=o>1?Math.round((c-l)/(o-1)):null;for(Jo(e,u,d,en(v)?0:l-v,l),f=0,h=o-1;f<h;f++)Jo(e,u,d,s[f],s[f+1]);return Jo(e,u,d,c,en(v)?e.length:c+v),u}return Jo(e,u,d),u}function t2(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),a=n._maxLength/t;return Math.floor(Math.min(i,a))}function n2(n,e,t){const i=a2(n),a=e.length/t;if(!i)return Math.max(a,1);const s=Y0(i);for(let o=0,l=s.length-1;o<l;o++){const c=s[o];if(c>a)return c}return Math.max(a,1)}function i2(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function r2(n,e,t,i){let a=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),a++,s=t[a*i])}function Jo(n,e,t,i,a){const s=Kt(i,0),o=Math.min(Kt(a,n.length),n.length);let l=0,c,u,d;for(t=Math.ceil(t),a&&(c=a-i,t=c/Math.floor(c/t)),d=s;d<0;)l++,d=Math.round(s+l*t);for(u=Math.max(s,0);u<o;u++)u===d&&(e.push(n[u]),l++,d=Math.round(s+l*t))}function a2(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const s2=n=>n==="left"?"right":n==="right"?"left":n,Oh=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Dh=(n,e)=>Math.min(e||n,n);function Ph(n,e){const t=[],i=n.length/e,a=n.length;let s=0;for(;s<a;s+=i)t.push(n[Math.floor(s)]);return t}function o2(n,e,t){const i=n.ticks.length,a=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,l=1e-6;let c=n.getPixelForTick(a),u;if(!(t&&(i===1?u=Math.max(c-s,o-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(a-1))/2,c+=a<e?u:-u,c<s-l||c>o+l)))return c}function l2(n,e){Ft(n,t=>{const i=t.gc,a=i.length/2;let s;if(a>e){for(s=0;s<a;++s)delete t.data[i[s]];i.splice(0,a)}})}function Ns(n){return n.drawTicks?n.tickLength:0}function Mh(n,e){if(!n.display)return 0;const t=sr(n.font,e),i=ta(n.padding);return(Sn(n.text)?n.text.length:1)*t.lineHeight+i.height}function c2(n,e){return La(n,{scale:e,type:"scale"})}function u2(n,e,t){return La(n,{tick:t,index:e,type:"tick"})}function d2(n,e,t){let i=sw(n);return(t&&e!=="right"||!t&&e==="right")&&(i=s2(i)),i}function f2(n,e,t,i){const{top:a,left:s,bottom:o,right:l,chart:c}=n,{chartArea:u,scales:d}=c;let f=0,h,v,_;const b=o-a,m=l-s;if(n.isHorizontal()){if(v=nh(i,s,l),zt(t)){const k=Object.keys(t)[0],S=t[k];_=d[k].getPixelForValue(S)+b-e}else t==="center"?_=(u.bottom+u.top)/2+b-e:_=Oh(n,t,e);h=l-s}else{if(zt(t)){const k=Object.keys(t)[0],S=t[k];v=d[k].getPixelForValue(S)-m+e}else t==="center"?v=(u.left+u.right)/2-m+e:v=Oh(n,t,e);_=nh(i,o,a),f=t==="left"?-Bi:Bi}return{titleX:v,titleY:_,maxWidth:h,rotation:f}}class Co extends Io{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:a}=this;return e=Qi(e,Number.POSITIVE_INFINITY),t=Qi(t,Number.NEGATIVE_INFINITY),i=Qi(i,Number.POSITIVE_INFINITY),a=Qi(a,Number.NEGATIVE_INFINITY),{min:Qi(e,i),max:Qi(t,a),minDefined:Vn(e),maxDefined:Vn(t)}}getMinMax(e){let{min:t,max:i,minDefined:a,maxDefined:s}=this.getUserBounds(),o;if(a&&s)return{min:t,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),a||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=a&&t>i?t:i,{min:Qi(t,Qi(i,t)),max:Qi(i,Qi(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pt(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:a,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ow(this,s,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Ph(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=e2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pt(this.options.afterUpdate,[this])}beforeSetDimensions(){Pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,a,s;for(i=0,a=e.length;i<a;i++)s=e[i],s.label=Pt(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Dh(this.ticks.length,e.ticks.maxTicksLimit),a=t.minRotation||0,s=t.maxRotation;let o=a,l,c,u;if(!this._isVisible()||!t.display||a>=s||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const d=this._getLabelSizes(),f=d.widest.width,h=d.highest.height,v=Hi(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/i:v/(i-1),f+6>l&&(l=v/(i-(e.offset?.5:1)),c=this.maxHeight-Ns(e.grid)-t.padding-Mh(e.title,this.chart.options.font),u=Math.sqrt(f*f+h*h),o=G0(Math.min(Math.asin(Hi((d.highest.height+6)/l,-1,1)),Math.asin(Hi(c/u,-1,1))-Math.asin(Hi(h/u,-1,1)))),o=Math.max(a,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:a,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=Mh(a,t.options.font);if(l?(e.width=this.maxWidth,e.height=Ns(s)+c):(e.height=this.maxHeight,e.width=Ns(s)+c),i.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:h}=this._getLabelSizes(),v=i.padding*2,_=ba(this.labelRotation),b=Math.cos(_),m=Math.sin(_);if(l){const k=i.mirror?0:m*f.width+b*h.height;e.height=Math.min(this.maxHeight,e.height+k+v)}else{const k=i.mirror?0:b*f.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+k+v)}this._calculatePadding(u,d,m,b)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,a){const{ticks:{align:s,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,v=0;c?u?(h=a*e.width,v=i*t.height):(h=i*e.height,v=a*t.width):s==="start"?v=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,v=t.width/2),this.paddingLeft=Math.max((h-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((v-f+o)*this.width/(this.width-f),0)}else{let d=t.height/2,f=e.height/2;s==="start"?(d=0,f=e.height):s==="end"&&(d=t.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)en(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Ph(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:a,_longestTextCache:s}=this,o=[],l=[],c=Math.floor(t/Dh(t,i));let u=0,d=0,f,h,v,_,b,m,k,S,$,D,I;for(f=0;f<t;f+=c){if(_=e[f].label,b=this._resolveTickFontOptions(f),a.font=m=b.string,k=s[m]=s[m]||{data:{},gc:[]},S=b.lineHeight,$=D=0,!en(_)&&!Sn(_))$=oh(a,k.data,k.gc,$,_),D=S;else if(Sn(_))for(h=0,v=_.length;h<v;++h)I=_[h],!en(I)&&!Sn(I)&&($=oh(a,k.data,k.gc,$,I),D+=S);o.push($),l.push(D),u=Math.max($,u),d=Math.max(D,d)}l2(s,t);const C=o.indexOf(u),w=l.indexOf(d),E=O=>({width:o[O]||0,height:l[O]||0});return{first:E(0),last:E(t-1),widest:E(C),highest:E(w),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return ew(this._alignToPixels?ua(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=u2(this.getContext(),e,i))}return this.$context||(this.$context=c2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=ba(this.labelRotation),i=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,l=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>l*a?l/i:c/a:c*a<l*i?c/i:l/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,a=this.options,{grid:s,position:o,border:l}=a,c=s.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),h=Ns(s),v=[],_=l.setContext(this.getContext()),b=_.display?_.width:0,m=b/2,k=function(Y){return ua(i,Y,b)};let S,$,D,I,C,w,E,O,A,q,L,j;if(o==="top")S=k(this.bottom),w=this.bottom-h,O=S-m,q=k(e.top)+m,j=e.bottom;else if(o==="bottom")S=k(this.top),q=e.top,j=k(e.bottom)-m,w=S+m,O=this.top+h;else if(o==="left")S=k(this.right),C=this.right-h,E=S-m,A=k(e.left)+m,L=e.right;else if(o==="right")S=k(this.left),A=e.left,L=k(e.right)-m,C=S+m,E=this.left+h;else if(t==="x"){if(o==="center")S=k((e.top+e.bottom)/2+.5);else if(zt(o)){const Y=Object.keys(o)[0],J=o[Y];S=k(this.chart.scales[Y].getPixelForValue(J))}q=e.top,j=e.bottom,w=S+m,O=w+h}else if(t==="y"){if(o==="center")S=k((e.left+e.right)/2);else if(zt(o)){const Y=Object.keys(o)[0],J=o[Y];S=k(this.chart.scales[Y].getPixelForValue(J))}C=S-m,E=C-h,A=e.left,L=e.right}const U=Kt(a.ticks.maxTicksLimit,f),W=Math.max(1,Math.ceil(f/U));for($=0;$<f;$+=W){const Y=this.getContext($),J=s.setContext(Y),z=l.setContext(Y),X=J.lineWidth,oe=J.color,ce=z.dash||[],le=z.dashOffset,me=J.tickWidth,_e=J.tickColor,pe=J.tickBorderDash||[],Te=J.tickBorderDashOffset;D=o2(this,$,c),D!==void 0&&(I=ua(i,D,X),u?C=E=A=L=I:w=O=q=j=I,v.push({tx1:C,ty1:w,tx2:E,ty2:O,x1:A,y1:q,x2:L,y2:j,width:X,color:oe,borderDash:ce,borderDashOffset:le,tickWidth:me,tickColor:_e,tickBorderDash:pe,tickBorderDashOffset:Te}))}return this._ticksLength=f,this._borderValue=S,v}_computeLabelItems(e){const t=this.axis,i=this.options,{position:a,ticks:s}=i,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=s,h=Ns(i.grid),v=h+d,_=f?-d:v,b=-ba(this.labelRotation),m=[];let k,S,$,D,I,C,w,E,O,A,q,L,j="middle";if(a==="top")C=this.bottom-_,w=this._getXAxisLabelAlignment();else if(a==="bottom")C=this.top+_,w=this._getXAxisLabelAlignment();else if(a==="left"){const W=this._getYAxisLabelAlignment(h);w=W.textAlign,I=W.x}else if(a==="right"){const W=this._getYAxisLabelAlignment(h);w=W.textAlign,I=W.x}else if(t==="x"){if(a==="center")C=(e.top+e.bottom)/2+v;else if(zt(a)){const W=Object.keys(a)[0],Y=a[W];C=this.chart.scales[W].getPixelForValue(Y)+v}w=this._getXAxisLabelAlignment()}else if(t==="y"){if(a==="center")I=(e.left+e.right)/2-v;else if(zt(a)){const W=Object.keys(a)[0],Y=a[W];I=this.chart.scales[W].getPixelForValue(Y)}w=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?j="top":c==="end"&&(j="bottom"));const U=this._getLabelSizes();for(k=0,S=l.length;k<S;++k){$=l[k],D=$.label;const W=s.setContext(this.getContext(k));E=this.getPixelForTick(k)+s.labelOffset,O=this._resolveTickFontOptions(k),A=O.lineHeight,q=Sn(D)?D.length:1;const Y=q/2,J=W.color,z=W.textStrokeColor,X=W.textStrokeWidth;let oe=w;o?(I=E,w==="inner"&&(k===S-1?oe=this.options.reverse?"left":"right":k===0?oe=this.options.reverse?"right":"left":oe="center"),a==="top"?u==="near"||b!==0?L=-q*A+A/2:u==="center"?L=-U.highest.height/2-Y*A+A:L=-U.highest.height+A/2:u==="near"||b!==0?L=A/2:u==="center"?L=U.highest.height/2-Y*A:L=U.highest.height-q*A,f&&(L*=-1),b!==0&&!W.showLabelBackdrop&&(I+=A/2*Math.sin(b))):(C=E,L=(1-q)*A/2);let ce;if(W.showLabelBackdrop){const le=ta(W.backdropPadding),me=U.heights[k],_e=U.widths[k];let pe=L-le.top,Te=0-le.left;switch(j){case"middle":pe-=me/2;break;case"bottom":pe-=me;break}switch(w){case"center":Te-=_e/2;break;case"right":Te-=_e;break;case"inner":k===S-1?Te-=_e:k>0&&(Te-=_e/2);break}ce={left:Te,top:pe,width:_e+le.width,height:me+le.height,color:W.backdropColor}}m.push({label:D,font:O,textOffset:L,options:{rotation:b,color:J,strokeColor:z,strokeWidth:X,textAlign:oe,textBaseline:j,translation:[I,C],backdrop:ce}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ba(this.labelRotation))return e==="top"?"left":"right";let a="center";return t.align==="start"?a="left":t.align==="end"?a="right":t.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:a,padding:s}}=this.options,o=this._getLabelSizes(),l=e+s,c=o.widest.width;let u,d;return t==="left"?a?(d=this.right+s,i==="near"?u="left":i==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,i==="near"?u="right":i==="center"?(u="center",d-=c/2):(u="left",d=this.left)):t==="right"?a?(d=this.left+s,i==="near"?u="right":i==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,i==="near"?u="left":i==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:a,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,a,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const a=this.ticks.findIndex(s=>s.value===e);return a>=0?t.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const l=(c,u,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=a.length;s<o;++s){const c=a[s];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:a}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const l=a.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,h;this.isHorizontal()?(u=ua(e,this.left,o)-o/2,d=ua(e,this.right,l)+l/2,f=h=c):(f=ua(e,this.top,o)-o/2,h=ua(e,this.bottom,l)+l/2,u=d=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,f),t.lineTo(d,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&kd(i,a);const s=this.getLabelItems(e);for(const o of s){const l=o.options,c=o.font,u=o.label,d=o.textOffset;ch(i,u,0,d,c,l)}a&&Sd(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:a}}=this;if(!i.display)return;const s=sr(i.font),o=ta(i.padding),l=i.align;let c=s.lineHeight/2;t==="bottom"||t==="center"||zt(t)?(c+=o.bottom,Sn(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:f,rotation:h}=f2(this,c,t,l);ch(e,i.text,0,0,s,{color:i.color,maxWidth:f,rotation:h,textAlign:d2(l,t,a),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Kt(e.grid&&e.grid.z,-1),a=Kt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Co.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let s,o;for(s=0,o=t.length;s<o;++s){const l=t[s];l[i]===this.id&&(!e||l.type===e)&&a.push(l)}return a}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return sr(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Zo{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;p2(t)&&(i=this.register(t));const a=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in a||(a[s]=e,h2(e,o,i),this.override&&yn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,a=this.scope;i in t&&delete t[i],a&&i in yn[a]&&(delete yn[a][i],this.override&&delete Da[i])}}function h2(n,e,t){const i=lo(Object.create(null),[t?yn.get(t):{},yn.get(e),n.defaults]);yn.set(e,i),n.defaultRoutes&&v2(e,n.defaultRoutes),n.descriptors&&yn.describe(e,n.descriptors)}function v2(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),a=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),l=o.pop(),c=o.join(".");yn.route(s,a,c,l)})}function p2(n){return"id"in n&&"defaults"in n}class m2{constructor(){this.controllers=new Zo(dg,"datasets",!0),this.elements=new Zo(Io,"elements"),this.plugins=new Zo(Object,"plugins"),this.scales=new Zo(Co,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(a=>{const s=i||this._getRegistryForType(a);i||s.isForType(a)||s===this.plugins&&a.id?this._exec(e,s,a):Ft(a,o=>{const l=i||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,i){const a=_d(e);Pt(i["before"+a],[],i),t[e](i),Pt(i["after"+a],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const a=t.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return a}}var tr=new m2;class g2{constructor(){this._init=void 0}notify(e,t,i,a){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,i,a){a=a||{};for(const s of e){const o=s.plugin,l=o[i],c=[t,a,s.options];if(Pt(l,c,o)===!1&&a.cancelable)return!1}return!0}invalidate(){en(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,a=Kt(i.options&&i.options.plugins,{}),s=b2(i);return a===!1&&!t?[]:_2(e,s,a,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,a=(s,o)=>s.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(a(t,i),e,"stop"),this._notify(a(i,t),e,"start")}}function b2(n){const e={},t=[],i=Object.keys(tr.plugins.items);for(let s=0;s<i.length;s++)t.push(tr.getPlugin(i[s]));const a=n.plugins||[];for(let s=0;s<a.length;s++){const o=a[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function y2(n,e){return!e&&n===!1?null:n===!0?{}:n}function _2(n,{plugins:e,localIds:t},i,a){const s=[],o=n.getContext();for(const l of e){const c=l.id,u=y2(i[c],a);u!==null&&s.push({plugin:l,options:x2(n.config,{plugin:l,local:t[c]},u,o)})}return s}function x2(n,{plugin:e,local:t},i,a){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Su(n,e){const t=yn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function w2(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function k2(n,e){return n===e?"_index_":"_value_"}function Ah(n){if(n==="x"||n==="y"||n==="r")return n}function S2(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Tu(n,...e){if(Ah(n))return n;for(const t of e){const i=t.axis||S2(t.position)||n.length>1&&Ah(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Lh(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function T2(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Lh(n,"x",t[0])||Lh(n,"y",t[0])}return{}}function $2(n,e){const t=Da[n.type]||{scales:{}},i=e.scales||{},a=Su(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const l=i[o];if(!zt(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Tu(o,l,T2(o,n),yn.scales[l.type]),u=k2(c,a),d=t.scales||{};s[o]=Js(Object.create(null),[{axis:c},l,d[c],d[u]])}),n.data.datasets.forEach(o=>{const l=o.type||n.type,c=o.indexAxis||Su(l,e),d=(Da[l]||{}).scales||{};Object.keys(d).forEach(f=>{const h=w2(f,c),v=o[h+"AxisID"]||h;s[v]=s[v]||Object.create(null),Js(s[v],[{axis:h},i[v],d[f]])})}),Object.keys(s).forEach(o=>{const l=s[o];Js(l,[yn.scales[l.type],yn.scale])}),s}function bg(n){const e=n.options||(n.options={});e.plugins=Kt(e.plugins,{}),e.scales=$2(n,e)}function yg(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function I2(n){return n=n||{},n.data=yg(n.data),bg(n),n}const Nh=new Map,_g=new Set;function Go(n,e){let t=Nh.get(n);return t||(t=e(),Nh.set(n,t),_g.add(t)),t}const Rs=(n,e,t)=>{const i=Tl(e,t);i!==void 0&&n.add(i)};class C2{constructor(e){this._config=I2(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=yg(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),bg(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Go(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Go(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Go(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Go(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let a=i.get(e);return(!a||t)&&(a=new Map,i.set(e,a)),a}getOptionScopes(e,t,i){const{options:a,type:s}=this,o=this._cachedScopes(e,i),l=o.get(t);if(l)return l;const c=new Set;t.forEach(d=>{e&&(c.add(e),d.forEach(f=>Rs(c,e,f))),d.forEach(f=>Rs(c,a,f)),d.forEach(f=>Rs(c,Da[s]||{},f)),d.forEach(f=>Rs(c,yn,f)),d.forEach(f=>Rs(c,wu,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),_g.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,Da[t]||{},yn.datasets[t]||{},{type:t},yn,wu]}resolveNamedOptions(e,t,i,a=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=Rh(this._resolverCache,e,a);let c=o;if(O2(o,t)){s.$shared=!1,i=Qr(i)?i():i;const u=this.createResolver(e,i,l);c=ds(o,i,u)}for(const u of t)s[u]=c[u];return s}createResolver(e,t,i=[""],a){const{resolver:s}=Rh(this._resolverCache,e,i);return zt(t)?ds(s,t,void 0,a):s}}function Rh(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const a=t.join();let s=i.get(a);return s||(s={resolver:Td(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},i.set(a,s)),s}const E2=n=>zt(n)&&Object.getOwnPropertyNames(n).some(e=>Qr(n[e]));function O2(n,e){const{isScriptable:t,isIndexable:i}=eg(n);for(const a of e){const s=t(a),o=i(a),l=(o||s)&&n[a];if(s&&(Qr(l)||E2(l))||o&&Sn(l))return!0}return!1}var D2="4.5.1";const P2=["top","bottom","left","right","chartArea"];function Fh(n,e){return n==="top"||n==="bottom"||P2.indexOf(n)===-1&&e==="x"}function qh(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function zh(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Pt(t&&t.onComplete,[n],e)}function M2(n){const e=n.chart,t=e.options.animation;Pt(t&&t.onProgress,[n],e)}function xg(n){return Cd()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ul={},jh=n=>{const e=xg(n);return Object.values(ul).filter(t=>t.canvas===e).pop()};function A2(n,e,t){const i=Object.keys(n);for(const a of i){const s=+a;if(s>=e){const o=n[a];delete n[a],(t>0||s>e)&&(n[s+t]=o)}}}function L2(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}class dl{static defaults=yn;static instances=ul;static overrides=Da;static registry=tr;static version=D2;static getChart=jh;static register(...e){tr.add(...e),Uh()}static unregister(...e){tr.remove(...e),Uh()}constructor(e,t){const i=this.config=new C2(t),a=xg(e),s=jh(a);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Qk(a)),this.platform.updateConfig(i);const l=this.platform.acquireContext(a,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=F0(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new g2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=aw(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],ul[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}mr.listen(this,"complete",zh),mr.listen(this,"progress",M2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:a,_aspectRatio:s}=this;return en(e)?t&&s?s:a?i/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return tr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lh(this.canvas,this.ctx),this}stop(){return mr.stop(this),this}resize(e,t){mr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,a=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,t,s),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,hh(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Pt(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Ft(t,(i,a)=>{i.id=a})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,a=Object.keys(i).reduce((o,l)=>(o[l]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const l=t[o],c=Tu(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Ft(s,o=>{const l=o.options,c=l.id,u=Tu(c,l),d=Kt(l.type,o.dtype);(l.position===void 0||Fh(l.position,u)!==Fh(o.dposition))&&(l.position=o.dposition),a[c]=!0;let f=null;if(c in i&&i[c].type===d)f=i[c];else{const h=tr.getScale(d);f=new h({id:c,type:d,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(l,e)}),Ft(a,(o,l)=>{o||delete i[l]}),Ft(i,o=>{Ko.configure(this,o,o.options),Ko.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((a,s)=>a.index-s.index),i>t){for(let a=t;a<i;++a)this._destroyDatasetMeta(a);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(qh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,a)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=t.length;i<a;i++){const s=t[i];let o=this.getDatasetMeta(i);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=l,o.indexAxis=s.indexAxis||Su(l,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=tr.getController(l),{datasetElementType:u,dataElementType:d}=yn.datasets[l];Object.assign(c,{dataElementType:tr.getElement(d),datasetElementType:u&&tr.getElement(u)}),o.controller=new c(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ft(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),h=!a&&s.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),a||Ft(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(qh("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ft(this.scales,e=>{Ko.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Gf(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:s}of t){const o=i==="_removeElements"?-s:s;A2(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),a=i(0);for(let s=1;s<t;s++)if(!Gf(a,i(s)))return;return Array.from(a).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ko.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Ft(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,s)=>{a._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Qr(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),a={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(t),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(mr.has(this)?this.attached&&!mr.running(this)&&mr.start(this):(this.draw(),zh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let a,s;for(a=0,s=t.length;a<s;++a){const o=t[a];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},a=lg(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&kd(t,a),e.controller.draw(),a&&Sd(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return us(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,a){const s=Pk.modes[t];return typeof s=="function"?s(this,e,i,a):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let a=i.filter(s=>s&&s._dataset===t).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=La(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const a=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,a);$l(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(l=>l.datasetIndex===e?a:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),mr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),lh(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ul[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},a=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};Ft(this.options.events,s=>i(s,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(c,u)=>{t.addEventListener(this,c,u),e[c]=u},a=(c,u)=>{e[c]&&(t.removeEventListener(this,c,u),delete e[c])},s=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{a("attach",l),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,a("resize",s),this._stop(),this._resize(0,0),i("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){Ft(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ft(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const a=i?"set":"remove";let s,o,l,c;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+a+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!kl(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const a=this.options.hover,s=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=s(t,e),l=i?e:s(e,t);o.length&&this.updateHoverStyle(o,a.mode,!1),l.length&&a.mode&&this.updateHoverStyle(l,a.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:a=[],options:s}=this,o=t,l=this._getActiveElements(e,a,i,o),c=B0(e),u=L2(e,this._lastEvent,i,c);i&&(this._lastEvent=null,Pt(s.onHover,[e,l,this],this),c&&Pt(s.onClick,[e,l,this],this));const d=!kl(l,a);return(d||t)&&(this._active=l,this._updateHoverStyles(l,a,t)),this._lastEvent=u,d}_getActiveElements(e,t,i,a){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,a)}}function Uh(){return Ft(dl.instances,n=>n._plugins.invalidate())}function wg(n,e,t=e){n.lineCap=Kt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Kt(t.borderDash,e.borderDash)),n.lineDashOffset=Kt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Kt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Kt(t.borderWidth,e.borderWidth),n.strokeStyle=Kt(t.borderColor,e.borderColor)}function N2(n,e,t){n.lineTo(t.x,t.y)}function R2(n){return n.stepped?_w:n.tension||n.cubicInterpolationMode==="monotone"?xw:N2}function kg(n,e,t={}){const i=n.length,{start:a=0,end:s=i-1}=t,{start:o,end:l}=e,c=Math.max(a,o),u=Math.min(s,l),d=a<o&&s<o||a>l&&s>l;return{count:i,start:c,loop:e.loop,ilen:u<c&&!d?i+u-c:u-c}}function F2(n,e,t,i){const{points:a,options:s}=e,{count:o,start:l,loop:c,ilen:u}=kg(a,t,i),d=R2(s);let{move:f=!0,reverse:h}=i||{},v,_,b;for(v=0;v<=u;++v)_=a[(l+(h?u-v:v))%o],!_.skip&&(f?(n.moveTo(_.x,_.y),f=!1):d(n,b,_,h,s.stepped),b=_);return c&&(_=a[(l+(h?u:0))%o],d(n,b,_,h,s.stepped)),!!c}function q2(n,e,t,i){const a=e.points,{count:s,start:o,ilen:l}=kg(a,t,i),{move:c=!0,reverse:u}=i||{};let d=0,f=0,h,v,_,b,m,k;const S=D=>(o+(u?l-D:D))%s,$=()=>{b!==m&&(n.lineTo(d,m),n.lineTo(d,b),n.lineTo(d,k))};for(c&&(v=a[S(0)],n.moveTo(v.x,v.y)),h=0;h<=l;++h){if(v=a[S(h)],v.skip)continue;const D=v.x,I=v.y,C=D|0;C===_?(I<b?b=I:I>m&&(m=I),d=(f*d+D)/++f):($(),n.lineTo(D,I),_=C,f=0,b=m=I),k=I}$()}function $u(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?q2:F2}function z2(n){return n.stepped?ek:n.tension||n.cubicInterpolationMode==="monotone"?tk:fa}function j2(n,e,t,i){let a=e._path;a||(a=e._path=new Path2D,e.path(a,t,i)&&a.closePath()),wg(n,e.options),n.stroke(a)}function U2(n,e,t,i){const{segments:a,options:s}=e,o=$u(e);for(const l of a)wg(n,s,l.style),n.beginPath(),o(n,e,l,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const V2=typeof Path2D=="function";function B2(n,e,t,i){V2&&!e.options.segment?j2(n,e,t,i):U2(n,e,t,i)}class Ql extends Io{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const a=i.spanGaps?this._loop:this._fullLoop;Ww(this._points,i,e,a,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ck(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,a=e[t],s=this.points,o=og(this,{property:t,start:a,end:a});if(!o.length)return;const l=[],c=z2(i);let u,d;for(u=0,d=o.length;u<d;++u){const{start:f,end:h}=o[u],v=s[f],_=s[h];if(v===_){l.push(v);continue}const b=Math.abs((a-v[t])/(_[t]-v[t])),m=c(v,_,b,i.stepped);m[t]=e[t],l.push(m)}return l.length===1?l[0]:l}pathSegment(e,t,i){return $u(this)(e,this,t,i)}path(e,t,i){const a=this.segments,s=$u(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const l of a)o&=s(e,this,l,{start:t,end:t+i-1});return!!o}draw(e,t,i,a){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),B2(e,this,i,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Vh(n,e,t,i){const a=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<a.radius+a.hitRadius}class H2 extends Io{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const a=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(e-s,2)+Math.pow(t-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,t){return Vh(this,e,"x",t)}inYRange(e,t){return Vh(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!us(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,ku(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function W2(n,e,t){const i=n.segments,a=n.points,s=e.points,o=[];for(const l of i){let{start:c,end:u}=l;u=ec(c,u,a);const d=Iu(t,a[c],a[u],l.loop);if(!e.segments){o.push({source:l,target:d,start:a[c],end:a[u]});continue}const f=og(e,d);for(const h of f){const v=Iu(t,s[h.start],s[h.end],h.loop),_=sg(l,a,v);for(const b of _)o.push({source:b,target:h,start:{[t]:Bh(d,v,"start",Math.max)},end:{[t]:Bh(d,v,"end",Math.min)}})}}return o}function Iu(n,e,t,i){if(i)return;let a=e[n],s=t[n];return n==="angle"&&(a=ir(a),s=ir(s)),{property:n,start:a,end:s}}function Y2(n,e){const{x:t=null,y:i=null}=n||{},a=e.points,s=[];return e.segments.forEach(({start:o,end:l})=>{l=ec(o,l,a);const c=a[o],u=a[l];i!==null?(s.push({x:c.x,y:i}),s.push({x:u.x,y:i})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:u.y}))}),s}function ec(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Bh(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function Sg(n,e){let t=[],i=!1;return Sn(n)?(i=!0,t=n):t=Y2(n,e),t.length?new Ql({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function Hh(n){return n&&n.fill!==!1}function K2(n,e,t){let a=n[e].fill;const s=[e];let o;if(!t)return a;for(;a!==!1&&s.indexOf(a)===-1;){if(!Vn(a))return a;if(o=n[a],!o)return!1;if(o.visible)return a;s.push(a),a=o.fill}return!1}function J2(n,e,t){const i=Q2(n);if(zt(i))return isNaN(i.value)?!1:i;let a=parseFloat(i);return Vn(a)&&Math.floor(a)===a?Z2(i[0],e,a,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Z2(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function G2(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:zt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function X2(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:zt(n)?i=n.value:i=e.getBaseValue(),i}function Q2(n){const e=n.options,t=e.fill;let i=Kt(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function eS(n){const{scale:e,index:t,line:i}=n,a=[],s=i.segments,o=i.points,l=tS(e,t);l.push(Sg({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){const u=s[c];for(let d=u.start;d<=u.end;d++)nS(a,o[d],l)}return new Ql({points:a,options:{}})}function tS(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let a=0;a<i.length;a++){const s=i[a];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function nS(n,e,t){const i=[];for(let a=0;a<t.length;a++){const s=t[a],{first:o,last:l,point:c}=iS(s,e,"x");if(!(!c||o&&l)){if(o)i.unshift(c);else if(n.push(c),!l)break}}n.push(...i)}function iS(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const a=i[t],s=n.segments,o=n.points;let l=!1,c=!1;for(let u=0;u<s.length;u++){const d=s[u],f=o[d.start][t],h=o[d.end][t];if(Ym(a,f,h)){l=a===f,c=a===h;break}}return{first:l,last:c,point:i}}class Tg{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:a,y:s,radius:o}=this;return t=t||{start:0,end:lr},e.arc(a,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:a}=this,s=e.angle;return{x:t+Math.cos(s)*a,y:i+Math.sin(s)*a,angle:s}}}function rS(n){const{chart:e,fill:t,line:i}=n;if(Vn(t))return aS(e,t);if(t==="stack")return eS(n);if(t==="shape")return!0;const a=sS(n);return a instanceof Tg?a:Sg(a,i)}function aS(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function sS(n){return(n.scale||{}).getPointPositionForValue?lS(n):oS(n)}function oS(n){const{scale:e={},fill:t}=n,i=G2(t,e);if(Vn(i)){const a=e.isHorizontal();return{x:a?i:null,y:a?null:i}}return null}function lS(n){const{scale:e,fill:t}=n,i=e.options,a=e.getLabels().length,s=i.reverse?e.max:e.min,o=X2(t,e,s),l=[];if(i.grid.circular){const c=e.getPointPositionForValue(0,s);return new Tg({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<a;++c)l.push(e.getPointPositionForValue(c,o));return l}function Ac(n,e,t){const i=rS(e),{chart:a,index:s,line:o,scale:l,axis:c}=e,u=o.options,d=u.fill,f=u.backgroundColor,{above:h=f,below:v=f}=d||{},_=a.getDatasetMeta(s),b=lg(a,_);i&&o.points.length&&(kd(n,t),cS(n,{line:o,target:i,above:h,below:v,area:t,scale:l,axis:c,clip:b}),Sd(n))}function cS(n,e){const{line:t,target:i,above:a,below:s,area:o,scale:l,clip:c}=e,u=t._loop?"angle":e.axis;n.save();let d=s;s!==a&&(u==="x"?(Wh(n,i,o.top),Lc(n,{line:t,target:i,color:a,scale:l,property:u,clip:c}),n.restore(),n.save(),Wh(n,i,o.bottom)):u==="y"&&(Yh(n,i,o.left),Lc(n,{line:t,target:i,color:s,scale:l,property:u,clip:c}),n.restore(),n.save(),Yh(n,i,o.right),d=a)),Lc(n,{line:t,target:i,color:d,scale:l,property:u,clip:c}),n.restore()}function Wh(n,e,t){const{segments:i,points:a}=e;let s=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:u}=l,d=a[c],f=a[ec(c,u,a)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(d.x,t),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(f.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function Yh(n,e,t){const{segments:i,points:a}=e;let s=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:u}=l,d=a[c],f=a[ec(c,u,a)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(t,d.y),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(t,f.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function Lc(n,e){const{line:t,target:i,property:a,color:s,scale:o,clip:l}=e,c=W2(t,i,a);for(const{source:u,target:d,start:f,end:h}of c){const{style:{backgroundColor:v=s}={}}=u,_=i!==!0;n.save(),n.fillStyle=v,uS(n,o,l,_&&Iu(a,f,h)),n.beginPath();const b=!!t.pathSegment(n,u);let m;if(_){b?n.closePath():Kh(n,i,h,a);const k=!!i.pathSegment(n,d,{move:b,reverse:!0});m=b&&k,m||Kh(n,i,f,a)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function uS(n,e,t,i){const a=e.chart.chartArea,{property:s,start:o,end:l}=i||{};if(s==="x"||s==="y"){let c,u,d,f;s==="x"?(c=o,u=a.top,d=l,f=a.bottom):(c=a.left,u=o,d=a.right,f=l),n.beginPath(),t&&(c=Math.max(c,t.left),d=Math.min(d,t.right),u=Math.max(u,t.top),f=Math.min(f,t.bottom)),n.rect(c,u,d-c,f-u),n.clip()}}function Kh(n,e,t,i){const a=e.interpolate(t,i);a&&n.lineTo(a.x,a.y)}var dS={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,a=[];let s,o,l,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),l=s.dataset,c=null,l&&l.options&&l instanceof Ql&&(c={visible:n.isDatasetVisible(o),index:o,fill:J2(l,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=c,a.push(c);for(o=0;o<i;++o)c=a[o],!(!c||c.fill===!1)&&(c.fill=K2(a,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",a=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=a.length-1;o>=0;--o){const l=a[o].$filler;l&&(l.line.updateControlPoints(s,l.axis),i&&l.fill&&Ac(n.ctx,l,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let a=i.length-1;a>=0;--a){const s=i[a].$filler;Hh(s)&&Ac(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!Hh(i)||t.drawTime!=="beforeDatasetDraw"||Ac(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Bs={average(n){if(!n.length)return!1;let e,t,i=new Set,a=0,s=0;for(e=0,t=n.length;e<t;++e){const l=n[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),a+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:a/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,a=Number.POSITIVE_INFINITY,s,o,l;for(s=0,o=n.length;s<o;++s){const c=n[s].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=xu(e,u);d<a&&(a=d,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function er(n,e){return e&&(Sn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function gr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function fS(n,e){const{element:t,datasetIndex:i,index:a}=e,s=n.getDatasetMeta(i).controller,{label:o,value:l}=s.getLabelAndValue(a);return{chart:n,label:o,parsed:s.getParsed(a),raw:n.data.datasets[i].data[a],formattedValue:l,dataset:s.getDataset(),dataIndex:a,datasetIndex:i,element:t}}function Jh(n,e){const t=n.chart.ctx,{body:i,footer:a,title:s}=n,{boxWidth:o,boxHeight:l}=e,c=sr(e.bodyFont),u=sr(e.titleFont),d=sr(e.footerFont),f=s.length,h=a.length,v=i.length,_=ta(e.padding);let b=_.height,m=0,k=i.reduce((D,I)=>D+I.before.length+I.lines.length+I.after.length,0);if(k+=n.beforeBody.length+n.afterBody.length,f&&(b+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),k){const D=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;b+=v*D+(k-v)*c.lineHeight+(k-1)*e.bodySpacing}h&&(b+=e.footerMarginTop+h*d.lineHeight+(h-1)*e.footerSpacing);let S=0;const $=function(D){m=Math.max(m,t.measureText(D).width+S)};return t.save(),t.font=u.string,Ft(n.title,$),t.font=c.string,Ft(n.beforeBody.concat(n.afterBody),$),S=e.displayColors?o+2+e.boxPadding:0,Ft(i,D=>{Ft(D.before,$),Ft(D.lines,$),Ft(D.after,$)}),S=0,t.font=d.string,Ft(n.footer,$),t.restore(),m+=_.width,{width:m,height:b}}function hS(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function vS(n,e,t,i){const{x:a,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&a+s+o>e.width||n==="right"&&a-s-o<0)return!0}function pS(n,e,t,i){const{x:a,width:s}=t,{width:o,chartArea:{left:l,right:c}}=n;let u="center";return i==="center"?u=a<=(l+c)/2?"left":"right":a<=s/2?u="left":a>=o-s/2&&(u="right"),vS(u,n,e,t)&&(u="center"),u}function Zh(n,e,t){const i=t.yAlign||e.yAlign||hS(n,t);return{xAlign:t.xAlign||e.xAlign||pS(n,e,t,i),yAlign:i}}function mS(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function gS(n,e,t){let{y:i,height:a}=n;return e==="top"?i+=t:e==="bottom"?i-=a+t:i-=a/2,i}function Gh(n,e,t,i){const{caretSize:a,caretPadding:s,cornerRadius:o}=n,{xAlign:l,yAlign:c}=t,u=a+s,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:v}=ll(o);let _=mS(e,l);const b=gS(e,c,u);return c==="center"?l==="left"?_+=u:l==="right"&&(_-=u):l==="left"?_-=Math.max(d,h)+a:l==="right"&&(_+=Math.max(f,v)+a),{x:Hi(_,0,i.width-e.width),y:Hi(b,0,i.height-e.height)}}function Xo(n,e,t){const i=ta(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function Xh(n){return er([],gr(n))}function bS(n,e,t){return La(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Qh(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const $g={beforeTitle:pr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:pr,beforeBody:pr,beforeLabel:pr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return en(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:pr,afterBody:pr,beforeFooter:pr,footer:pr,afterFooter:pr};function ti(n,e,t,i){const a=n[e].call(t,i);return typeof a>"u"?$g[e].call(t,i):a}class ev extends Io{static positioners=Bs;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&t.options.animation&&i.animations,s=new cg(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=bS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,a=ti(i,"beforeTitle",this,e),s=ti(i,"title",this,e),o=ti(i,"afterTitle",this,e);let l=[];return l=er(l,gr(a)),l=er(l,gr(s)),l=er(l,gr(o)),l}getBeforeBody(e,t){return Xh(ti(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,a=[];return Ft(e,s=>{const o={before:[],lines:[],after:[]},l=Qh(i,s);er(o.before,gr(ti(l,"beforeLabel",this,s))),er(o.lines,ti(l,"label",this,s)),er(o.after,gr(ti(l,"afterLabel",this,s))),a.push(o)}),a}getAfterBody(e,t){return Xh(ti(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,a=ti(i,"beforeFooter",this,e),s=ti(i,"footer",this,e),o=ti(i,"afterFooter",this,e);let l=[];return l=er(l,gr(a)),l=er(l,gr(s)),l=er(l,gr(o)),l}_createItems(e){const t=this._active,i=this.chart.data,a=[],s=[],o=[];let l=[],c,u;for(c=0,u=t.length;c<u;++c)l.push(fS(this.chart,t[c]));return e.filter&&(l=l.filter((d,f,h)=>e.filter(d,f,h,i))),e.itemSort&&(l=l.sort((d,f)=>e.itemSort(d,f,i))),Ft(l,d=>{const f=Qh(e.callbacks,d);a.push(ti(f,"labelColor",this,d)),s.push(ti(f,"labelPointStyle",this,d)),o.push(ti(f,"labelTextColor",this,d))}),this.labelColors=a,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),a=this._active;let s,o=[];if(!a.length)this.opacity!==0&&(s={opacity:0});else{const l=Bs[i.position].call(this,a,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=Jh(this,i),u=Object.assign({},l,c),d=Zh(this.chart,i,u),f=Gh(i,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,a){const s=this.getCaretPosition(e,i,a);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:a,yAlign:s}=this,{caretSize:o,cornerRadius:l}=i,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=ll(l),{x:h,y:v}=e,{width:_,height:b}=t;let m,k,S,$,D,I;return s==="center"?(D=v+b/2,a==="left"?(m=h,k=m-o,$=D+o,I=D-o):(m=h+_,k=m+o,$=D-o,I=D+o),S=m):(a==="left"?k=h+Math.max(c,d)+o:a==="right"?k=h+_-Math.max(u,f)-o:k=this.caretX,s==="top"?($=v,D=$-o,m=k-o,S=k+o):($=v+b,D=$+o,m=k+o,S=k-o),I=$),{x1:m,x2:k,x3:S,y1:$,y2:D,y3:I}}drawTitle(e,t,i){const a=this.title,s=a.length;let o,l,c;if(s){const u=Ic(i.rtl,this.x,this.width);for(e.x=Xo(this,i.titleAlign,i),t.textAlign=u.textAlign(i.titleAlign),t.textBaseline="middle",o=sr(i.titleFont),l=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,c=0;c<s;++c)t.fillText(a[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===s&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,t,i,a,s){const o=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:u}=s,d=sr(s.bodyFont),f=Xo(this,"left",s),h=a.x(f),v=c<d.lineHeight?(d.lineHeight-c)/2:0,_=t.y+v;if(s.usePointStyle){const b={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},m=a.leftForLtr(h,u)+u/2,k=_+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,ku(e,b,m,k),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,ku(e,b,m,k)}else{e.lineWidth=zt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=a.leftForLtr(h,u),m=a.leftForLtr(a.xPlus(h,1),u-2),k=ll(o.borderRadius);Object.values(k).some(S=>S!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,uh(e,{x:b,y:_,w:u,h:c,radius:k}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),uh(e,{x:m,y:_+1,w:u-2,h:c-2,radius:k}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(b,_,u,c),e.strokeRect(b,_,u,c),e.fillStyle=o.backgroundColor,e.fillRect(m,_+1,u-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:a}=this,{bodySpacing:s,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=i,f=sr(i.bodyFont);let h=f.lineHeight,v=0;const _=Ic(i.rtl,this.x,this.width),b=function(E){t.fillText(E,_.x(e.x+v),e.y+h/2),e.y+=h+s},m=_.textAlign(o);let k,S,$,D,I,C,w;for(t.textAlign=o,t.textBaseline="middle",t.font=f.string,e.x=Xo(this,m,i),t.fillStyle=i.bodyColor,Ft(this.beforeBody,b),v=l&&m!=="right"?o==="center"?u/2+d:u+2+d:0,D=0,C=a.length;D<C;++D){for(k=a[D],S=this.labelTextColors[D],t.fillStyle=S,Ft(k.before,b),$=k.lines,l&&$.length&&(this._drawColorBox(t,e,D,_,i),h=Math.max(f.lineHeight,c)),I=0,w=$.length;I<w;++I)b($[I]),h=f.lineHeight;Ft(k.after,b)}v=0,h=f.lineHeight,Ft(this.afterBody,b),e.y-=s}drawFooter(e,t,i){const a=this.footer,s=a.length;let o,l;if(s){const c=Ic(i.rtl,this.x,this.width);for(e.x=Xo(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=c.textAlign(i.footerAlign),t.textBaseline="middle",o=sr(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,l=0;l<s;++l)t.fillText(a[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,a){const{xAlign:s,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:d}=i,{topLeft:f,topRight:h,bottomLeft:v,bottomRight:_}=ll(a.cornerRadius);t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.beginPath(),t.moveTo(l+f,c),o==="top"&&this.drawCaret(e,t,i,a),t.lineTo(l+u-h,c),t.quadraticCurveTo(l+u,c,l+u,c+h),o==="center"&&s==="right"&&this.drawCaret(e,t,i,a),t.lineTo(l+u,c+d-_),t.quadraticCurveTo(l+u,c+d,l+u-_,c+d),o==="bottom"&&this.drawCaret(e,t,i,a),t.lineTo(l+v,c+d),t.quadraticCurveTo(l,c+d,l,c+d-v),o==="center"&&s==="left"&&this.drawCaret(e,t,i,a),t.lineTo(l,c+f),t.quadraticCurveTo(l,c,l+f,c),t.closePath(),t.fill(),a.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,a=i&&i.x,s=i&&i.y;if(a||s){const o=Bs[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Jh(this,e),c=Object.assign({},o,this._size),u=Zh(t,e,c),d=Gh(e,c,u,t);(a._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const a={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ta(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,a,t),rk(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),ak(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,a=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),s=!kl(i,a),o=this._positionChanged(a,t);(s||o)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,i),l=this._positionChanged(o,e),c=t||!kl(o,s)||l;return c&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,i,a){const s=this.options;if(e.type==="mouseout")return[];if(!a)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:a,options:s}=this,o=Bs[s.position].call(this,e,t);return o!==!1&&(i!==o.x||a!==o.y)}}var yS={id:"tooltip",_element:ev,positioners:Bs,afterInit(n,e,t){t&&(n.tooltip=new ev({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:$g},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function _S(n,e){const t=[],{bounds:a,step:s,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:h}=n,v=s||1,_=d-1,{min:b,max:m}=e,k=!en(o),S=!en(l),$=!en(u),D=(m-b)/(f+1);let I=Qf((m-b)/_/v)*v,C,w,E,O;if(I<1e-14&&!k&&!S)return[{value:b},{value:m}];O=Math.ceil(m/I)-Math.floor(b/I),O>_&&(I=Qf(O*I/_/v)*v),en(c)||(C=Math.pow(10,c),I=Math.ceil(I*C)/C),a==="ticks"?(w=Math.floor(b/I)*I,E=Math.ceil(m/I)*I):(w=b,E=m),k&&S&&s&&J0((l-o)/s,I/1e3)?(O=Math.round(Math.min((l-o)/I,d)),I=(l-o)/O,w=o,E=l):$?(w=k?o:w,E=S?l:E,O=u-1,I=(E-w)/O):(O=(E-w)/I,Sa(O,Math.round(O),I/1e3)?O=Math.round(O):O=Math.ceil(O));const A=Math.max(eh(I),eh(w));C=Math.pow(10,en(c)?A:c),w=Math.round(w*C)/C,E=Math.round(E*C)/C;let q=0;for(k&&(h&&w!==o?(t.push({value:o}),w<o&&q++,Sa(Math.round((w+q*I)*C)/C,o,tv(o,D,n))&&q++):w<o&&q++);q<O;++q){const L=Math.round((w+q*I)*C)/C;if(S&&L>l)break;t.push({value:L})}return S&&h&&E!==l?t.length&&Sa(t[t.length-1].value,l,tv(l,D,n))?t[t.length-1].value=l:t.push({value:l}):(!S||E===l)&&t.push({value:E}),t}function tv(n,e,{horizontal:t,minRotation:i}){const a=ba(i),s=(t?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class xS extends Co{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return en(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:a,max:s}=this;const o=c=>a=t?a:c,l=c=>s=i?s:c;if(e){const c=ea(a),u=ea(s);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(a===s){let c=s===0?1:Math.abs(s*.05);l(s+c),e||o(a-c)}this.min=a,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),t=t||11),t&&(a=Math.min(t,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=_S(a,s);return e.bounds==="ticks"&&Z0(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const a=(i-t)/Math.max(e.length-1,1)/2;t-=a,i+=a}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Gm(e,this.chart.options.locale,this.options.ticks.format)}}class wS extends xS{static id="linear";static defaults={ticks:{callback:Xm.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Vn(e)?e:0,this.max=Vn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=ba(this.options.ticks.minRotation),a=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const tc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ai=Object.keys(tc);function nv(n,e){return n-e}function iv(n,e){if(en(e))return null;const t=n._adapter,{parser:i,round:a,isoWeekday:s}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Vn(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(a&&(o=a==="week"&&(co(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,a)),+o)}function rv(n,e,t,i){const a=ai.length;for(let s=ai.indexOf(n);s<a-1;++s){const o=tc[ai[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=i)return ai[s]}return ai[a-1]}function kS(n,e,t,i,a){for(let s=ai.length-1;s>=ai.indexOf(t);s--){const o=ai[s];if(tc[o].common&&n._adapter.diff(a,i,o)>=e-1)return o}return ai[t?ai.indexOf(t):0]}function SS(n){for(let e=ai.indexOf(n)+1,t=ai.length;e<t;++e)if(tc[ai[e]].common)return ai[e]}function av(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:a}=xd(t,e),s=t[i]>=e?t[i]:t[a];n[s]=!0}}function TS(n,e,t,i){const a=n._adapter,s=+a.startOf(e[0].value,i),o=e[e.length-1].value;let l,c;for(l=s;l<=o;l=+a.add(l,1,i))c=t[l],c>=0&&(e[c].major=!0);return e}function sv(n,e,t){const i=[],a={},s=e.length;let o,l;for(o=0;o<s;++o)l=e[o],a[l]=o,i.push({value:l,major:!1});return s===0||!t?i:TS(n,i,a,t)}class Cu extends Co{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),a=this._adapter=new fg._date(e.adapters.date);a.init(t),Js(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:iv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:a,max:s,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(a=Math.min(a,u.min)),!l&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),a=Vn(a)&&!isNaN(a)?a:+t.startOf(Date.now(),i),s=Vn(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(a,s-1),this.max=Math.max(a+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const s=this.min,o=this.max,l=nw(a,s,o);return this._unit=t.unit||(i.autoSkip?rv(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):kS(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:SS(this._unit),this.initOffsets(a),e.reverse&&l.reverse(),sv(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,a,s;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?t=1-a:t=(this.getDecimalForValue(e[1])-a)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Hi(t,0,o),i=Hi(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,a=this.options,s=a.time,o=s.unit||rv(s.minUnit,t,i,this._getLabelCapacity(t)),l=Kt(a.ticks.stepSize,1),c=o==="week"?s.isoWeekday:!1,u=co(c)||c===!0,d={};let f=t,h,v;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":o),e.diff(i,t,o)>1e5*l)throw new Error(t+" and "+i+" are too far apart with stepSize of "+l+" "+o);const _=a.ticks.source==="data"&&this.getDataTimestamps();for(h=f,v=0;h<i;h=+e.add(h,l,o),v++)av(d,h,_);return(h===i||a.bounds==="ticks"||v===1)&&av(d,h,_),Object.keys(d).sort(nv).map(b=>+b)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const a=this.options.time.displayFormats,s=this._unit,o=t||a[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,a){const s=this.options,o=s.ticks.callback;if(o)return Pt(o,[e,t,i],this);const l=s.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],f=u&&l[u],h=i[t],v=u&&f&&h&&h.major;return this._adapter.format(e,a||(v?f:d))}generateTickLabels(e){let t,i,a;for(t=0,i=e.length;t<i;++t)a=e[t],a.label=this._tickFormatFunction(a.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,a=ba(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(a),o=Math.sin(a),l=this._resolveTickFontOptions(0).size;return{w:i*s+l*o,h:i*o+l*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,a=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,sv(this,[e],this._majorUnit),a),o=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(t=0,i=a.length;t<i;++t)e=e.concat(a[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const a=this.getLabels();for(t=0,i=a.length;t<i;++t)e.push(iv(this,a[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return rw(e.sort(nv))}}function Qo(n,e,t){let i=0,a=n.length-1,s,o,l,c;t?(e>=n[i].pos&&e<=n[a].pos&&({lo:i,hi:a}=ya(n,"pos",e)),{pos:s,time:l}=n[i],{pos:o,time:c}=n[a]):(e>=n[i].time&&e<=n[a].time&&({lo:i,hi:a}=ya(n,"time",e)),{time:s,pos:l}=n[i],{time:o,pos:c}=n[a]);const u=o-s;return u?l+(c-l)*(e-s)/u:l}class m3 extends Cu{static id="timeseries";static defaults=Cu.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Qo(t,this.min),this._tableRange=Qo(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,a=[],s=[];let o,l,c,u,d;for(o=0,l=e.length;o<l;++o)u=e[o],u>=t&&u<=i&&a.push(u);if(a.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,l=a.length;o<l;++o)d=a[o+1],c=a[o-1],u=a[o],Math.round((d+c)/2)!==u&&s.push({time:u,pos:o/(l-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((a,s)=>a-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Qo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Qo(this._table,i*this._tableRange+this._minPos,!0)}}const $S={datetime:$t.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:$t.TIME_WITH_SECONDS,minute:$t.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};fg._date.override({_id:"luxon",_create:function(n){return $t.fromMillis(n,this.options)},init(n){this.options.locale||(this.options.locale=n.locale)},formats:function(){return $S},parse:function(n,e){const t=this.options,i=typeof n;return n===null||i==="undefined"?null:(i==="number"?n=this._create(n):i==="string"?typeof e=="string"?n=$t.fromFormat(n,e,t):n=$t.fromISO(n,t):n instanceof Date?n=$t.fromJSDate(n,t):i==="object"&&!(n instanceof $t)&&(n=$t.fromObject(n,t)),n.isValid?n.valueOf():null)},format:function(n,e){const t=this._create(n);return typeof e=="string"?t.toFormat(e):t.toLocaleString(e)},add:function(n,e,t){const i={};return i[t]=e,this._create(n).plus(i).valueOf()},diff:function(n,e,t){return this._create(n).diff(this._create(e)).as(t).valueOf()},startOf:function(n,e,t){if(e==="isoWeek"){t=Math.trunc(Math.min(Math.max(0,t),6));const i=this._create(n);return i.minus({days:(i.weekday-t+7)%7}).startOf("day").valueOf()}return e?this._create(n).startOf(e).valueOf():n},endOf:function(n,e){return this._create(n).endOf(e).valueOf()}});function IS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Nc={exports:{}};var ov;function CS(){return ov||(ov=1,(function(n){(function(e,t,i,a){var s=["","webkit","Moz","MS","ms","o"],o=t.createElement("div"),l="function",c=Math.round,u=Math.abs,d=Date.now;function f(K,Q,fe){return setTimeout($(K,fe),Q)}function h(K,Q,fe){return Array.isArray(K)?(v(K,fe[Q],fe),!0):!1}function v(K,Q,fe){var Pe;if(K)if(K.forEach)K.forEach(Q,fe);else if(K.length!==a)for(Pe=0;Pe<K.length;)Q.call(fe,K[Pe],Pe,K),Pe++;else for(Pe in K)K.hasOwnProperty(Pe)&&Q.call(fe,K[Pe],Pe,K)}function _(K,Q,fe){var Pe="DEPRECATED METHOD: "+Q+`
`+fe+` AT 
`;return function(){var ct=new Error("get-stack-trace"),kt=ct&&ct.stack?ct.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Lt=e.console&&(e.console.warn||e.console.log);return Lt&&Lt.call(e.console,Pe,kt),K.apply(this,arguments)}}var b;typeof Object.assign!="function"?b=function(Q){if(Q===a||Q===null)throw new TypeError("Cannot convert undefined or null to object");for(var fe=Object(Q),Pe=1;Pe<arguments.length;Pe++){var ct=arguments[Pe];if(ct!==a&&ct!==null)for(var kt in ct)ct.hasOwnProperty(kt)&&(fe[kt]=ct[kt])}return fe}:b=Object.assign;var m=_(function(Q,fe,Pe){for(var ct=Object.keys(fe),kt=0;kt<ct.length;)(!Pe||Pe&&Q[ct[kt]]===a)&&(Q[ct[kt]]=fe[ct[kt]]),kt++;return Q},"extend","Use `assign`."),k=_(function(Q,fe){return m(Q,fe,!0)},"merge","Use `assign`.");function S(K,Q,fe){var Pe=Q.prototype,ct;ct=K.prototype=Object.create(Pe),ct.constructor=K,ct._super=Pe,fe&&b(ct,fe)}function $(K,Q){return function(){return K.apply(Q,arguments)}}function D(K,Q){return typeof K==l?K.apply(Q&&Q[0]||a,Q):K}function I(K,Q){return K===a?Q:K}function C(K,Q,fe){v(A(Q),function(Pe){K.addEventListener(Pe,fe,!1)})}function w(K,Q,fe){v(A(Q),function(Pe){K.removeEventListener(Pe,fe,!1)})}function E(K,Q){for(;K;){if(K==Q)return!0;K=K.parentNode}return!1}function O(K,Q){return K.indexOf(Q)>-1}function A(K){return K.trim().split(/\s+/g)}function q(K,Q,fe){if(K.indexOf&&!fe)return K.indexOf(Q);for(var Pe=0;Pe<K.length;){if(fe&&K[Pe][fe]==Q||!fe&&K[Pe]===Q)return Pe;Pe++}return-1}function L(K){return Array.prototype.slice.call(K,0)}function j(K,Q,fe){for(var Pe=[],ct=[],kt=0;kt<K.length;){var Lt=K[kt][Q];q(ct,Lt)<0&&Pe.push(K[kt]),ct[kt]=Lt,kt++}return Pe=Pe.sort(function(sn,En){return sn[Q]>En[Q]}),Pe}function U(K,Q){for(var fe,Pe,ct=Q[0].toUpperCase()+Q.slice(1),kt=0;kt<s.length;){if(fe=s[kt],Pe=fe?fe+ct:Q,Pe in K)return Pe;kt++}return a}var W=1;function Y(){return W++}function J(K){var Q=K.ownerDocument||K;return Q.defaultView||Q.parentWindow||e}var z=/mobile|tablet|ip(ad|hone|od)|android/i,X="ontouchstart"in e,oe=U(e,"PointerEvent")!==a,ce=X&&z.test(navigator.userAgent),le="touch",me="pen",_e="mouse",pe="kinect",Te=25,Se=1,he=2,ue=4,ke=8,we=1,ae=2,xe=4,se=8,ge=16,ee=ae|xe,ve=se|ge,Ce=ee|ve,Ie=["x","y"],ze=["clientX","clientY"];function qe(K,Q){var fe=this;this.manager=K,this.callback=Q,this.element=K.element,this.target=K.options.inputTarget,this.domHandler=function(Pe){D(K.options.enable,[K])&&fe.handler(Pe)},this.init()}qe.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(J(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(J(this.element),this.evWin,this.domHandler)}};function je(K){var Q,fe=K.options.inputClass;return fe?Q=fe:oe?Q=Oe:ce?Q=at:X?Q=Rt:Q=We,new Q(K,rt)}function rt(K,Q,fe){var Pe=fe.pointers.length,ct=fe.changedPointers.length,kt=Q&Se&&Pe-ct===0,Lt=Q&(ue|ke)&&Pe-ct===0;fe.isFirst=!!kt,fe.isFinal=!!Lt,kt&&(K.session={}),fe.eventType=Q,be(K,fe),K.emit("hammer.input",fe),K.recognize(fe),K.session.prevInput=fe}function be(K,Q){var fe=K.session,Pe=Q.pointers,ct=Pe.length;fe.firstInput||(fe.firstInput=st(Q)),ct>1&&!fe.firstMultiple?fe.firstMultiple=st(Q):ct===1&&(fe.firstMultiple=!1);var kt=fe.firstInput,Lt=fe.firstMultiple,Qt=Lt?Lt.center:kt.center,sn=Q.center=it(Pe);Q.timeStamp=d(),Q.deltaTime=Q.timeStamp-kt.timeStamp,Q.angle=Me(Qt,sn),Q.distance=Fe(Qt,sn),Le(fe,Q),Q.offsetDirection=Je(Q.deltaX,Q.deltaY);var En=He(Q.deltaTime,Q.deltaX,Q.deltaY);Q.overallVelocityX=En.x,Q.overallVelocityY=En.y,Q.overallVelocity=u(En.x)>u(En.y)?En.x:En.y,Q.scale=Lt?Ze(Lt.pointers,Pe):1,Q.rotation=Lt?Ne(Lt.pointers,Pe):0,Q.maxPointers=fe.prevInput?Q.pointers.length>fe.prevInput.maxPointers?Q.pointers.length:fe.prevInput.maxPointers:Q.pointers.length,Ke(fe,Q);var Si=K.element;E(Q.srcEvent.target,Si)&&(Si=Q.srcEvent.target),Q.target=Si}function Le(K,Q){var fe=Q.center,Pe=K.offsetDelta||{},ct=K.prevDelta||{},kt=K.prevInput||{};(Q.eventType===Se||kt.eventType===ue)&&(ct=K.prevDelta={x:kt.deltaX||0,y:kt.deltaY||0},Pe=K.offsetDelta={x:fe.x,y:fe.y}),Q.deltaX=ct.x+(fe.x-Pe.x),Q.deltaY=ct.y+(fe.y-Pe.y)}function Ke(K,Q){var fe=K.lastInterval||Q,Pe=Q.timeStamp-fe.timeStamp,ct,kt,Lt,Qt;if(Q.eventType!=ke&&(Pe>Te||fe.velocity===a)){var sn=Q.deltaX-fe.deltaX,En=Q.deltaY-fe.deltaY,Si=He(Pe,sn,En);kt=Si.x,Lt=Si.y,ct=u(Si.x)>u(Si.y)?Si.x:Si.y,Qt=Je(sn,En),K.lastInterval=Q}else ct=fe.velocity,kt=fe.velocityX,Lt=fe.velocityY,Qt=fe.direction;Q.velocity=ct,Q.velocityX=kt,Q.velocityY=Lt,Q.direction=Qt}function st(K){for(var Q=[],fe=0;fe<K.pointers.length;)Q[fe]={clientX:c(K.pointers[fe].clientX),clientY:c(K.pointers[fe].clientY)},fe++;return{timeStamp:d(),pointers:Q,center:it(Q),deltaX:K.deltaX,deltaY:K.deltaY}}function it(K){var Q=K.length;if(Q===1)return{x:c(K[0].clientX),y:c(K[0].clientY)};for(var fe=0,Pe=0,ct=0;ct<Q;)fe+=K[ct].clientX,Pe+=K[ct].clientY,ct++;return{x:c(fe/Q),y:c(Pe/Q)}}function He(K,Q,fe){return{x:Q/K||0,y:fe/K||0}}function Je(K,Q){return K===Q?we:u(K)>=u(Q)?K<0?ae:xe:Q<0?se:ge}function Fe(K,Q,fe){fe||(fe=Ie);var Pe=Q[fe[0]]-K[fe[0]],ct=Q[fe[1]]-K[fe[1]];return Math.sqrt(Pe*Pe+ct*ct)}function Me(K,Q,fe){fe||(fe=Ie);var Pe=Q[fe[0]]-K[fe[0]],ct=Q[fe[1]]-K[fe[1]];return Math.atan2(ct,Pe)*180/Math.PI}function Ne(K,Q){return Me(Q[1],Q[0],ze)+Me(K[1],K[0],ze)}function Ze(K,Q){return Fe(Q[0],Q[1],ze)/Fe(K[0],K[1],ze)}var Xe={mousedown:Se,mousemove:he,mouseup:ue},vt="mousedown",tt="mousemove mouseup";function We(){this.evEl=vt,this.evWin=tt,this.pressed=!1,qe.apply(this,arguments)}S(We,qe,{handler:function(Q){var fe=Xe[Q.type];fe&Se&&Q.button===0&&(this.pressed=!0),fe&he&&Q.which!==1&&(fe=ue),this.pressed&&(fe&ue&&(this.pressed=!1),this.callback(this.manager,fe,{pointers:[Q],changedPointers:[Q],pointerType:_e,srcEvent:Q}))}});var Qe={pointerdown:Se,pointermove:he,pointerup:ue,pointercancel:ke,pointerout:ke},mt={2:le,3:me,4:_e,5:pe},gt="pointerdown",nt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(gt="MSPointerDown",nt="MSPointerMove MSPointerUp MSPointerCancel");function Oe(){this.evEl=gt,this.evWin=nt,qe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}S(Oe,qe,{handler:function(Q){var fe=this.store,Pe=!1,ct=Q.type.toLowerCase().replace("ms",""),kt=Qe[ct],Lt=mt[Q.pointerType]||Q.pointerType,Qt=Lt==le,sn=q(fe,Q.pointerId,"pointerId");kt&Se&&(Q.button===0||Qt)?sn<0&&(fe.push(Q),sn=fe.length-1):kt&(ue|ke)&&(Pe=!0),!(sn<0)&&(fe[sn]=Q,this.callback(this.manager,kt,{pointers:fe,changedPointers:[Q],pointerType:Lt,srcEvent:Q}),Pe&&fe.splice(sn,1))}});var B={touchstart:Se,touchmove:he,touchend:ue,touchcancel:ke},Z="touchstart",de="touchstart touchmove touchend touchcancel";function ye(){this.evTarget=Z,this.evWin=de,this.started=!1,qe.apply(this,arguments)}S(ye,qe,{handler:function(Q){var fe=B[Q.type];if(fe===Se&&(this.started=!0),!!this.started){var Pe=Ye.call(this,Q,fe);fe&(ue|ke)&&Pe[0].length-Pe[1].length===0&&(this.started=!1),this.callback(this.manager,fe,{pointers:Pe[0],changedPointers:Pe[1],pointerType:le,srcEvent:Q})}}});function Ye(K,Q){var fe=L(K.touches),Pe=L(K.changedTouches);return Q&(ue|ke)&&(fe=j(fe.concat(Pe),"identifier")),[fe,Pe]}var ot={touchstart:Se,touchmove:he,touchend:ue,touchcancel:ke},Tt="touchstart touchmove touchend touchcancel";function at(){this.evTarget=Tt,this.targetIds={},qe.apply(this,arguments)}S(at,qe,{handler:function(Q){var fe=ot[Q.type],Pe=wt.call(this,Q,fe);Pe&&this.callback(this.manager,fe,{pointers:Pe[0],changedPointers:Pe[1],pointerType:le,srcEvent:Q})}});function wt(K,Q){var fe=L(K.touches),Pe=this.targetIds;if(Q&(Se|he)&&fe.length===1)return Pe[fe[0].identifier]=!0,[fe,fe];var ct,kt,Lt=L(K.changedTouches),Qt=[],sn=this.target;if(kt=fe.filter(function(En){return E(En.target,sn)}),Q===Se)for(ct=0;ct<kt.length;)Pe[kt[ct].identifier]=!0,ct++;for(ct=0;ct<Lt.length;)Pe[Lt[ct].identifier]&&Qt.push(Lt[ct]),Q&(ue|ke)&&delete Pe[Lt[ct].identifier],ct++;if(Qt.length)return[j(kt.concat(Qt),"identifier"),Qt]}var ut=2500,St=25;function Rt(){qe.apply(this,arguments);var K=$(this.handler,this);this.touch=new at(this.manager,K),this.mouse=new We(this.manager,K),this.primaryTouch=null,this.lastTouches=[]}S(Rt,qe,{handler:function(Q,fe,Pe){var ct=Pe.pointerType==le,kt=Pe.pointerType==_e;if(!(kt&&Pe.sourceCapabilities&&Pe.sourceCapabilities.firesTouchEvents)){if(ct)_n.call(this,fe,Pe);else if(kt&&mn.call(this,Pe))return;this.callback(Q,fe,Pe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function _n(K,Q){K&Se?(this.primaryTouch=Q.changedPointers[0].identifier,dn.call(this,Q)):K&(ue|ke)&&dn.call(this,Q)}function dn(K){var Q=K.changedPointers[0];if(Q.identifier===this.primaryTouch){var fe={x:Q.clientX,y:Q.clientY};this.lastTouches.push(fe);var Pe=this.lastTouches,ct=function(){var kt=Pe.indexOf(fe);kt>-1&&Pe.splice(kt,1)};setTimeout(ct,ut)}}function mn(K){for(var Q=K.srcEvent.clientX,fe=K.srcEvent.clientY,Pe=0;Pe<this.lastTouches.length;Pe++){var ct=this.lastTouches[Pe],kt=Math.abs(Q-ct.x),Lt=Math.abs(fe-ct.y);if(kt<=St&&Lt<=St)return!0}return!1}var xn=U(o.style,"touchAction"),Zi=xn!==a,an="compute",kn="auto",Cn="manipulation",An="none",Xn="pan-x",wi="pan-y",Li=Ts();function Qn(K,Q){this.manager=K,this.set(Q)}Qn.prototype={set:function(K){K==an&&(K=this.compute()),Zi&&this.manager.element.style&&Li[K]&&(this.manager.element.style[xn]=K),this.actions=K.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var K=[];return v(this.manager.recognizers,function(Q){D(Q.options.enable,[Q])&&(K=K.concat(Q.getTouchAction()))}),Gi(K.join(" "))},preventDefaults:function(K){var Q=K.srcEvent,fe=K.offsetDirection;if(this.manager.session.prevented){Q.preventDefault();return}var Pe=this.actions,ct=O(Pe,An)&&!Li[An],kt=O(Pe,wi)&&!Li[wi],Lt=O(Pe,Xn)&&!Li[Xn];if(ct){var Qt=K.pointers.length===1,sn=K.distance<2,En=K.deltaTime<250;if(Qt&&sn&&En)return}if(!(Lt&&kt)&&(ct||kt&&fe&ee||Lt&&fe&ve))return this.preventSrc(Q)},preventSrc:function(K){this.manager.session.prevented=!0,K.preventDefault()}};function Gi(K){if(O(K,An))return An;var Q=O(K,Xn),fe=O(K,wi);return Q&&fe?An:Q||fe?Q?Xn:wi:O(K,Cn)?Cn:kn}function Ts(){if(!Zi)return!1;var K={},Q=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(fe){K[fe]=Q?e.CSS.supports("touch-action",fe):!0}),K}var Fa=1,ei=2,ci=4,ui=8,Ni=ui,ia=16,ki=32;function Ln(K){this.options=b({},this.defaults,K||{}),this.id=Y(),this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=Fa,this.simultaneous={},this.requireFail=[]}Ln.prototype={defaults:{},set:function(K){return b(this.options,K),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(K){if(h(K,"recognizeWith",this))return this;var Q=this.simultaneous;return K=qa(K,this),Q[K.id]||(Q[K.id]=K,K.recognizeWith(this)),this},dropRecognizeWith:function(K){return h(K,"dropRecognizeWith",this)?this:(K=qa(K,this),delete this.simultaneous[K.id],this)},requireFailure:function(K){if(h(K,"requireFailure",this))return this;var Q=this.requireFail;return K=qa(K,this),q(Q,K)===-1&&(Q.push(K),K.requireFailure(this)),this},dropRequireFailure:function(K){if(h(K,"dropRequireFailure",this))return this;K=qa(K,this);var Q=q(this.requireFail,K);return Q>-1&&this.requireFail.splice(Q,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(K){return!!this.simultaneous[K.id]},emit:function(K){var Q=this,fe=this.state;function Pe(ct){Q.manager.emit(ct,K)}fe<ui&&Pe(Q.options.event+ra(fe)),Pe(Q.options.event),K.additionalEvent&&Pe(K.additionalEvent),fe>=ui&&Pe(Q.options.event+ra(fe))},tryEmit:function(K){if(this.canEmit())return this.emit(K);this.state=ki},canEmit:function(){for(var K=0;K<this.requireFail.length;){if(!(this.requireFail[K].state&(ki|Fa)))return!1;K++}return!0},recognize:function(K){var Q=b({},K);if(!D(this.options.enable,[this,Q])){this.reset(),this.state=ki;return}this.state&(Ni|ia|ki)&&(this.state=Fa),this.state=this.process(Q),this.state&(ei|ci|ui|ia)&&this.tryEmit(Q)},process:function(K){},getTouchAction:function(){},reset:function(){}};function ra(K){return K&ia?"cancel":K&ui?"end":K&ci?"move":K&ei?"start":""}function Eo(K){return K==ge?"down":K==se?"up":K==ae?"left":K==xe?"right":""}function qa(K,Q){var fe=Q.manager;return fe?fe.get(K):K}function di(){Ln.apply(this,arguments)}S(di,Ln,{defaults:{pointers:1},attrTest:function(K){var Q=this.options.pointers;return Q===0||K.pointers.length===Q},process:function(K){var Q=this.state,fe=K.eventType,Pe=Q&(ei|ci),ct=this.attrTest(K);return Pe&&(fe&ke||!ct)?Q|ia:Pe||ct?fe&ue?Q|ui:Q&ei?Q|ci:ei:ki}});function Ri(){di.apply(this,arguments),this.pX=null,this.pY=null}S(Ri,di,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ce},getTouchAction:function(){var K=this.options.direction,Q=[];return K&ee&&Q.push(wi),K&ve&&Q.push(Xn),Q},directionTest:function(K){var Q=this.options,fe=!0,Pe=K.distance,ct=K.direction,kt=K.deltaX,Lt=K.deltaY;return ct&Q.direction||(Q.direction&ee?(ct=kt===0?we:kt<0?ae:xe,fe=kt!=this.pX,Pe=Math.abs(K.deltaX)):(ct=Lt===0?we:Lt<0?se:ge,fe=Lt!=this.pY,Pe=Math.abs(K.deltaY))),K.direction=ct,fe&&Pe>Q.threshold&&ct&Q.direction},attrTest:function(K){return di.prototype.attrTest.call(this,K)&&(this.state&ei||!(this.state&ei)&&this.directionTest(K))},emit:function(K){this.pX=K.deltaX,this.pY=K.deltaY;var Q=Eo(K.direction);Q&&(K.additionalEvent=this.options.event+Q),this._super.emit.call(this,K)}});function Mr(){di.apply(this,arguments)}S(Mr,di,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[An]},attrTest:function(K){return this._super.attrTest.call(this,K)&&(Math.abs(K.scale-1)>this.options.threshold||this.state&ei)},emit:function(K){if(K.scale!==1){var Q=K.scale<1?"in":"out";K.additionalEvent=this.options.event+Q}this._super.emit.call(this,K)}});function $s(){Ln.apply(this,arguments),this._timer=null,this._input=null}S($s,Ln,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[kn]},process:function(K){var Q=this.options,fe=K.pointers.length===Q.pointers,Pe=K.distance<Q.threshold,ct=K.deltaTime>Q.time;if(this._input=K,!Pe||!fe||K.eventType&(ue|ke)&&!ct)this.reset();else if(K.eventType&Se)this.reset(),this._timer=f(function(){this.state=Ni,this.tryEmit()},Q.time,this);else if(K.eventType&ue)return Ni;return ki},reset:function(){clearTimeout(this._timer)},emit:function(K){this.state===Ni&&(K&&K.eventType&ue?this.manager.emit(this.options.event+"up",K):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}});function Is(){di.apply(this,arguments)}S(Is,di,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[An]},attrTest:function(K){return this._super.attrTest.call(this,K)&&(Math.abs(K.rotation)>this.options.threshold||this.state&ei)}});function Cs(){di.apply(this,arguments)}S(Cs,di,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ee|ve,pointers:1},getTouchAction:function(){return Ri.prototype.getTouchAction.call(this)},attrTest:function(K){var Q=this.options.direction,fe;return Q&(ee|ve)?fe=K.overallVelocity:Q&ee?fe=K.overallVelocityX:Q&ve&&(fe=K.overallVelocityY),this._super.attrTest.call(this,K)&&Q&K.offsetDirection&&K.distance>this.options.threshold&&K.maxPointers==this.options.pointers&&u(fe)>this.options.velocity&&K.eventType&ue},emit:function(K){var Q=Eo(K.offsetDirection);Q&&this.manager.emit(this.options.event+Q,K),this.manager.emit(this.options.event,K)}});function Fi(){Ln.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}S(Fi,Ln,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Cn]},process:function(K){var Q=this.options,fe=K.pointers.length===Q.pointers,Pe=K.distance<Q.threshold,ct=K.deltaTime<Q.time;if(this.reset(),K.eventType&Se&&this.count===0)return this.failTimeout();if(Pe&&ct&&fe){if(K.eventType!=ue)return this.failTimeout();var kt=this.pTime?K.timeStamp-this.pTime<Q.interval:!0,Lt=!this.pCenter||Fe(this.pCenter,K.center)<Q.posThreshold;this.pTime=K.timeStamp,this.pCenter=K.center,!Lt||!kt?this.count=1:this.count+=1,this._input=K;var Qt=this.count%Q.taps;if(Qt===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Ni,this.tryEmit()},Q.interval,this),ei):Ni}return ki},failTimeout:function(){return this._timer=f(function(){this.state=ki},this.options.interval,this),ki},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ni&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function fi(K,Q){return Q=Q||{},Q.recognizers=I(Q.recognizers,fi.defaults.preset),new Es(K,Q)}fi.VERSION="2.0.7",fi.defaults={domEvents:!1,touchAction:an,enable:!0,inputTarget:null,inputClass:null,preset:[[Is,{enable:!1}],[Mr,{enable:!1},["rotate"]],[Cs,{direction:ee}],[Ri,{direction:ee},["swipe"]],[Fi],[Fi,{event:"doubletap",taps:2},["tap"]],[$s]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var nc=1,Oo=2;function Es(K,Q){this.options=b({},fi.defaults,Q||{}),this.options.inputTarget=this.options.inputTarget||K,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=K,this.input=je(this),this.touchAction=new Qn(this,this.options.touchAction),hr(this,!0),v(this.options.recognizers,function(fe){var Pe=this.add(new fe[0](fe[1]));fe[2]&&Pe.recognizeWith(fe[2]),fe[3]&&Pe.requireFailure(fe[3])},this)}Es.prototype={set:function(K){return b(this.options,K),K.touchAction&&this.touchAction.update(),K.inputTarget&&(this.input.destroy(),this.input.target=K.inputTarget,this.input.init()),this},stop:function(K){this.session.stopped=K?Oo:nc},recognize:function(K){var Q=this.session;if(!Q.stopped){this.touchAction.preventDefaults(K);var fe,Pe=this.recognizers,ct=Q.curRecognizer;(!ct||ct&&ct.state&Ni)&&(ct=Q.curRecognizer=null);for(var kt=0;kt<Pe.length;)fe=Pe[kt],Q.stopped!==Oo&&(!ct||fe==ct||fe.canRecognizeWith(ct))?fe.recognize(K):fe.reset(),!ct&&fe.state&(ei|ci|ui)&&(ct=Q.curRecognizer=fe),kt++}},get:function(K){if(K instanceof Ln)return K;for(var Q=this.recognizers,fe=0;fe<Q.length;fe++)if(Q[fe].options.event==K)return Q[fe];return null},add:function(K){if(h(K,"add",this))return this;var Q=this.get(K.options.event);return Q&&this.remove(Q),this.recognizers.push(K),K.manager=this,this.touchAction.update(),K},remove:function(K){if(h(K,"remove",this))return this;if(K=this.get(K),K){var Q=this.recognizers,fe=q(Q,K);fe!==-1&&(Q.splice(fe,1),this.touchAction.update())}return this},on:function(K,Q){if(K!==a&&Q!==a){var fe=this.handlers;return v(A(K),function(Pe){fe[Pe]=fe[Pe]||[],fe[Pe].push(Q)}),this}},off:function(K,Q){if(K!==a){var fe=this.handlers;return v(A(K),function(Pe){Q?fe[Pe]&&fe[Pe].splice(q(fe[Pe],Q),1):delete fe[Pe]}),this}},emit:function(K,Q){this.options.domEvents&&Xi(K,Q);var fe=this.handlers[K]&&this.handlers[K].slice();if(!(!fe||!fe.length)){Q.type=K,Q.preventDefault=function(){Q.srcEvent.preventDefault()};for(var Pe=0;Pe<fe.length;)fe[Pe](Q),Pe++}},destroy:function(){this.element&&hr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function hr(K,Q){var fe=K.element;if(fe.style){var Pe;v(K.options.cssProps,function(ct,kt){Pe=U(fe.style,kt),Q?(K.oldCssProps[Pe]=fe.style[Pe],fe.style[Pe]=ct):fe.style[Pe]=K.oldCssProps[Pe]||""}),Q||(K.oldCssProps={})}}function Xi(K,Q){var fe=t.createEvent("Event");fe.initEvent(K,!0,!0),fe.gesture=Q,Q.target.dispatchEvent(fe)}b(fi,{INPUT_START:Se,INPUT_MOVE:he,INPUT_END:ue,INPUT_CANCEL:ke,STATE_POSSIBLE:Fa,STATE_BEGAN:ei,STATE_CHANGED:ci,STATE_ENDED:ui,STATE_RECOGNIZED:Ni,STATE_CANCELLED:ia,STATE_FAILED:ki,DIRECTION_NONE:we,DIRECTION_LEFT:ae,DIRECTION_RIGHT:xe,DIRECTION_UP:se,DIRECTION_DOWN:ge,DIRECTION_HORIZONTAL:ee,DIRECTION_VERTICAL:ve,DIRECTION_ALL:Ce,Manager:Es,Input:qe,TouchAction:Qn,TouchInput:at,MouseInput:We,PointerEventInput:Oe,TouchMouseInput:Rt,SingleTouchInput:ye,Recognizer:Ln,AttrRecognizer:di,Tap:Fi,Pan:Ri,Swipe:Cs,Pinch:Mr,Rotate:Is,Press:$s,on:C,off:w,each:v,merge:k,extend:m,assign:b,inherit:S,bindFn:$,prefixed:U});var ic=typeof e<"u"?e:typeof self<"u"?self:{};ic.Hammer=fi,n.exports?n.exports=fi:e[i]=fi})(window,document,"Hammer")})(Nc)),Nc.exports}var ES=CS();const Xs=IS(ES);const fo=n=>n&&n.enabled&&n.modifierKey,Ig=(n,e)=>n&&e[n+"Key"],Dd=(n,e)=>n&&!e[n+"Key"];function na(n,e,t){return n===void 0?!0:typeof n=="string"?n.indexOf(e)!==-1:typeof n=="function"?n({chart:t}).indexOf(e)!==-1:!1}function Rc(n,e){return typeof n=="function"&&(n=n({chart:e})),typeof n=="string"?{x:n.indexOf("x")!==-1,y:n.indexOf("y")!==-1}:{x:!1,y:!1}}function OS(n,e){let t;return function(){return clearTimeout(t),t=setTimeout(n,e),e}}function DS({x:n,y:e},t){const i=t.scales,a=Object.keys(i);for(let s=0;s<a.length;s++){const o=i[a[s]];if(e>=o.top&&e<=o.bottom&&n>=o.left&&n<=o.right)return o}return null}function Cg(n,e,t){const{mode:i="xy",scaleMode:a,overScaleMode:s}=n||{},o=DS(e,t),l=Rc(i,t),c=Rc(a,t);if(s){const d=Rc(s,t);for(const f of["x","y"])d[f]&&(c[f]=l[f],l[f]=!1)}if(o&&c[o.axis])return[o];const u=[];return Ft(t.scales,function(d){l[d.axis]&&u.push(d)}),u}const Eu=new WeakMap;function rn(n){let e=Eu.get(n);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},Eu.set(n,e)),e}function PS(n){Eu.delete(n)}function Eg(n,e,t,i){const a=Math.max(0,Math.min(1,(n-e)/t||0)),s=1-a;return{min:i*a,max:i*s}}function Og(n,e){const t=n.isHorizontal()?e.x:e.y;return n.getValueForPixel(t)}function Dg(n,e,t){const i=n.max-n.min,a=i*(e-1),s=Og(n,t);return Eg(s,n.min,i,a)}function MS(n,e,t){const i=Og(n,t);if(i===void 0)return{min:n.min,max:n.max};const a=Math.log10(n.min),s=Math.log10(n.max),o=Math.log10(i),l=s-a,c=l*(e-1),u=Eg(o,a,l,c);return{min:Math.pow(10,a+u.min),max:Math.pow(10,s-u.max)}}function AS(n,e){return e&&(e[n.id]||e[n.axis])||{}}function lv(n,e,t,i,a){let s=t[i];if(s==="original"){const o=n.originalScaleLimits[e.id][i];s=Kt(o.options,o.scale)}return Kt(s,a)}function LS(n,e,t){const i=n.getValueForPixel(e),a=n.getValueForPixel(t);return{min:Math.min(i,a),max:Math.max(i,a)}}function NS(n,{min:e,max:t,minLimit:i,maxLimit:a},s){const o=(n-t+e)/2;e-=o,t+=o;const l=s.min.options??s.min.scale,c=s.max.options??s.max.scale,u=n/1e6;return Sa(e,l,u)&&(e=l),Sa(t,c,u)&&(t=c),e<i?(e=i,t=Math.min(i+n,a)):t>a&&(t=a,e=Math.max(a-n,i)),{min:e,max:t}}function Na(n,{min:e,max:t},i,a=!1){const s=rn(n.chart),{options:o}=n,l=AS(n,i),{minRange:c=0}=l,u=lv(s,n,l,"min",-1/0),d=lv(s,n,l,"max",1/0);if(a==="pan"&&(e<u||t>d))return!0;const f=n.max-n.min,h=a?Math.max(t-e,c):f;if(a&&h===c&&f<=c)return!0;const v=NS(h,{min:e,max:t,minLimit:u,maxLimit:d},s.originalScaleLimits[n.id]);return o.min=v.min,o.max=v.max,s.updatedScaleLimits[n.id]=v,n.parse(v.min)!==n.min||n.parse(v.max)!==n.max}function RS(n,e,t,i){const a=Dg(n,e,t),s={min:n.min+a.min,max:n.max-a.max};return Na(n,s,i,!0)}function FS(n,e,t,i){const a=MS(n,e,t);return Na(n,a,i,!0)}function qS(n,e,t,i){Na(n,LS(n,e,t),i,!0)}const cv=n=>n===0||isNaN(n)?0:n<0?Math.min(Math.round(n),-1):Math.max(Math.round(n),1);function zS(n){const t=n.getLabels().length-1;n.min>0&&(n.min-=1),n.max<t&&(n.max+=1)}function jS(n,e,t,i){const a=Dg(n,e,t);n.min===n.max&&e<1&&zS(n);const s={min:n.min+cv(a.min),max:n.max-cv(a.max)};return Na(n,s,i,!0)}function US(n){return n.isHorizontal()?n.width:n.height}function VS(n,e,t){const a=n.getLabels().length-1;let{min:s,max:o}=n;const l=Math.max(o-s,1),c=Math.round(US(n)/Math.max(l,10)),u=Math.round(Math.abs(e/c));let d;return e<-c?(o=Math.min(o+u,a),s=l===1?o:o-l,d=o===a):e>c&&(s=Math.max(0,s-u),o=l===1?s:s+l,d=s===0),Na(n,{min:s,max:o},t)||d}const BS={second:500,minute:30*1e3,hour:1800*1e3,day:720*60*1e3,week:3.5*24*60*60*1e3,month:360*60*60*1e3,quarter:1440*60*60*1e3,year:4368*60*60*1e3};function Pg(n,e,t,i=!1){const{min:a,max:s,options:o}=n,l=o.time&&o.time.round,c=BS[l]||0,u=n.getValueForPixel(n.getPixelForValue(a+c)-e),d=n.getValueForPixel(n.getPixelForValue(s+c)-e);return isNaN(u)||isNaN(d)?!0:Na(n,{min:u,max:d},t,i?"pan":!1)}function uv(n,e,t){return Pg(n,e,t,!0)}const Ou={category:jS,default:RS,logarithmic:FS},Du={default:qS},Pu={category:VS,default:Pg,logarithmic:uv,timeseries:uv};function HS(n,e,t){const{id:i,options:{min:a,max:s}}=n;if(!e[i]||!t[i])return!0;const o=t[i];return o.min!==a||o.max!==s}function dv(n,e){Ft(n,(t,i)=>{e[i]||delete n[i]})}function Ss(n,e){const{scales:t}=n,{originalScaleLimits:i,updatedScaleLimits:a}=e;return Ft(t,function(s){HS(s,i,a)&&(i[s.id]={min:{scale:s.min,options:s.options.min},max:{scale:s.max,options:s.options.max}})}),dv(i,t),dv(a,t),i}function fv(n,e,t,i){const a=Ou[n.type]||Ou.default;Pt(a,[n,e,t,i])}function hv(n,e,t,i){const a=Du[n.type]||Du.default;Pt(a,[n,e,t,i])}function WS(n){const e=n.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Pd(n,e,t="none",i="api"){const{x:a=1,y:s=1,focalPoint:o=WS(n)}=typeof e=="number"?{x:e,y:e}:e,l=rn(n),{options:{limits:c,zoom:u}}=l;Ss(n,l);const d=a!==1,f=s!==1,h=Cg(u,o,n);Ft(h||n.scales,function(v){v.isHorizontal()&&d?fv(v,a,o,c):!v.isHorizontal()&&f&&fv(v,s,o,c)}),n.update(t),Pt(u.onZoom,[{chart:n,trigger:i}])}function Mg(n,e,t,i="none",a="api"){const s=rn(n),{options:{limits:o,zoom:l}}=s,{mode:c="xy"}=l;Ss(n,s);const u=na(c,"x",n),d=na(c,"y",n);Ft(n.scales,function(f){f.isHorizontal()&&u?hv(f,e.x,t.x,o):!f.isHorizontal()&&d&&hv(f,e.y,t.y,o)}),n.update(i),Pt(l.onZoom,[{chart:n,trigger:a}])}function YS(n,e,t,i="none",a="api"){const s=rn(n);Ss(n,s);const o=n.scales[e];Na(o,t,void 0,!0),n.update(i),Pt(s.options.zoom?.onZoom,[{chart:n,trigger:a}])}function KS(n,e="default"){const t=rn(n),i=Ss(n,t);Ft(n.scales,function(a){const s=a.options;i[a.id]?(s.min=i[a.id].min.options,s.max=i[a.id].max.options):(delete s.min,delete s.max),delete t.updatedScaleLimits[a.id]}),n.update(e),Pt(t.options.zoom.onZoomComplete,[{chart:n}])}function JS(n,e){const t=n.originalScaleLimits[e];if(!t)return;const{min:i,max:a}=t;return Kt(a.options,a.scale)-Kt(i.options,i.scale)}function ZS(n){const e=rn(n);let t=1,i=1;return Ft(n.scales,function(a){const s=JS(e,a.id);if(s){const o=Math.round(s/(a.max-a.min)*100)/100;t=Math.min(t,o),i=Math.max(i,o)}}),t<1?t:i}function vv(n,e,t,i){const{panDelta:a}=i,s=a[n.id]||0;ea(s)===ea(e)&&(e+=s);const o=Pu[n.type]||Pu.default;Pt(o,[n,e,t])?a[n.id]=0:a[n.id]=e}function Ag(n,e,t,i="none"){const{x:a=0,y:s=0}=typeof e=="number"?{x:e,y:e}:e,o=rn(n),{options:{pan:l,limits:c}}=o,{onPan:u}=l||{};Ss(n,o);const d=a!==0,f=s!==0;Ft(t||n.scales,function(h){h.isHorizontal()&&d?vv(h,a,c,o):!h.isHorizontal()&&f&&vv(h,s,c,o)}),n.update(i),Pt(u,[{chart:n}])}function Lg(n){const e=rn(n);Ss(n,e);const t={};for(const i of Object.keys(n.scales)){const{min:a,max:s}=e.originalScaleLimits[i]||{min:{},max:{}};t[i]={min:a.scale,max:s.scale}}return t}function GS(n){const e=rn(n),t={};for(const i of Object.keys(n.scales))t[i]=e.updatedScaleLimits[i];return t}function XS(n){const e=Lg(n);for(const t of Object.keys(n.scales)){const{min:i,max:a}=e[t];if(i!==void 0&&n.scales[t].min!==i||a!==void 0&&n.scales[t].max!==a)return!0}return!1}function pv(n){const e=rn(n);return e.panning||e.dragging}const mv=(n,e,t)=>Math.min(t,Math.max(e,n));function ri(n,e){const{handlers:t}=rn(n),i=t[e];i&&i.target&&(i.target.removeEventListener(e,i),delete t[e])}function Qs(n,e,t,i){const{handlers:a,options:s}=rn(n),o=a[t];if(o&&o.target===e)return;ri(n,t),a[t]=c=>i(n,c,s),a[t].target=e;const l=t==="wheel"?!1:void 0;e.addEventListener(t,a[t],{passive:l})}function QS(n,e){const t=rn(n);t.dragStart&&(t.dragging=!0,t.dragEnd=e,n.update("none"))}function eT(n,e){const t=rn(n);!t.dragStart||e.key!=="Escape"||(ri(n,"keydown"),t.dragging=!1,t.dragStart=t.dragEnd=null,n.update("none"))}function Mu(n,e){if(n.target!==e.canvas){const t=e.canvas.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}return rr(n,e)}function Ng(n,e,t){const{onZoomStart:i,onZoomRejected:a}=t;if(i){const s=Mu(e,n);if(Pt(i,[{chart:n,event:e,point:s}])===!1)return Pt(a,[{chart:n,event:e}]),!1}}function tT(n,e){if(n.legend){const s=rr(e,n);if(us(s,n.legend))return}const t=rn(n),{pan:i,zoom:a={}}=t.options;if(e.button!==0||Ig(fo(i),e)||Dd(fo(a.drag),e))return Pt(a.onZoomRejected,[{chart:n,event:e}]);Ng(n,e,a)!==!1&&(t.dragStart=e,Qs(n,n.canvas.ownerDocument,"mousemove",QS),Qs(n,window.document,"keydown",eT))}function nT({begin:n,end:e},t){let i=e.x-n.x,a=e.y-n.y;const s=Math.abs(i/a);s>t?i=Math.sign(i)*Math.abs(a*t):s<t&&(a=Math.sign(a)*Math.abs(i/t)),e.x=n.x+i,e.y=n.y+a}function gv(n,e,t,{min:i,max:a,prop:s}){n[i]=mv(Math.min(t.begin[s],t.end[s]),e[i],e[a]),n[a]=mv(Math.max(t.begin[s],t.end[s]),e[i],e[a])}function iT(n,e,t){const i={begin:Mu(e.dragStart,n),end:Mu(e.dragEnd,n)};if(t){const a=n.chartArea.width/n.chartArea.height;nT(i,a)}return i}function Rg(n,e,t,i){const a=na(e,"x",n),s=na(e,"y",n),{top:o,left:l,right:c,bottom:u,width:d,height:f}=n.chartArea,h={top:o,left:l,right:c,bottom:u},v=iT(n,t,i&&a&&s);a&&gv(h,n.chartArea,v,{min:"left",max:"right",prop:"x"}),s&&gv(h,n.chartArea,v,{min:"top",max:"bottom",prop:"y"});const _=h.right-h.left,b=h.bottom-h.top;return{...h,width:_,height:b,zoomX:a&&_?1+(d-_)/d:1,zoomY:s&&b?1+(f-b)/f:1}}function rT(n,e){const t=rn(n);if(!t.dragStart)return;ri(n,"mousemove");const{mode:i,onZoomComplete:a,drag:{threshold:s=0,maintainAspectRatio:o}}=t.options.zoom,l=Rg(n,i,{dragStart:t.dragStart,dragEnd:e},o),c=na(i,"x",n)?l.width:0,u=na(i,"y",n)?l.height:0,d=Math.sqrt(c*c+u*u);if(t.dragStart=t.dragEnd=null,d<=s){t.dragging=!1,n.update("none");return}Mg(n,{x:l.left,y:l.top},{x:l.right,y:l.bottom},"zoom","drag"),t.dragging=!1,t.filterNextClick=!0,Pt(a,[{chart:n}])}function aT(n,e,t){if(Dd(fo(t.wheel),e)){Pt(t.onZoomRejected,[{chart:n,event:e}]);return}if(Ng(n,e,t)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function sT(n,e){const{handlers:{onZoomComplete:t},options:{zoom:i}}=rn(n);if(!aT(n,e,i))return;const a=e.target.getBoundingClientRect(),s=i.wheel.speed,o=e.deltaY>=0?2-1/(1-s):1+s,l={x:o,y:o,focalPoint:{x:e.clientX-a.left,y:e.clientY-a.top}};Pd(n,l,"zoom","wheel"),Pt(t,[{chart:n}])}function oT(n,e,t,i){t&&(rn(n).handlers[e]=OS(()=>Pt(t,[{chart:n}]),i))}function lT(n,e){const t=n.canvas,{wheel:i,drag:a,onZoomComplete:s}=e.zoom;i.enabled?(Qs(n,t,"wheel",sT),oT(n,"onZoomComplete",s,250)):ri(n,"wheel"),a.enabled?(Qs(n,t,"mousedown",tT),Qs(n,t.ownerDocument,"mouseup",rT)):(ri(n,"mousedown"),ri(n,"mousemove"),ri(n,"mouseup"),ri(n,"keydown"))}function cT(n){ri(n,"mousedown"),ri(n,"mousemove"),ri(n,"mouseup"),ri(n,"wheel"),ri(n,"click"),ri(n,"keydown")}function uT(n,e){return function(t,i){const{pan:a,zoom:s={}}=e.options;if(!a||!a.enabled)return!1;const o=i&&i.srcEvent;return o&&!e.panning&&i.pointerType==="mouse"&&(Dd(fo(a),o)||Ig(fo(s.drag),o))?(Pt(a.onPanRejected,[{chart:n,event:i}]),!1):!0}}function dT(n,e){const t=Math.abs(n.clientX-e.clientX),i=Math.abs(n.clientY-e.clientY),a=t/i;let s,o;return a>.3&&a<1.7?s=o=!0:t>i?s=!0:o=!0,{x:s,y:o}}function Fg(n,e,t){if(e.scale){const{center:i,pointers:a}=t,s=1/e.scale*t.scale,o=t.target.getBoundingClientRect(),l=dT(a[0],a[1]),c=e.options.zoom.mode,u={x:l.x&&na(c,"x",n)?s:1,y:l.y&&na(c,"y",n)?s:1,focalPoint:{x:i.x-o.left,y:i.y-o.top}};Pd(n,u,"zoom","pinch"),e.scale=t.scale}}function fT(n,e,t){if(e.options.zoom.pinch.enabled){const i=rr(t,n);Pt(e.options.zoom.onZoomStart,[{chart:n,event:t,point:i}])===!1?(e.scale=null,Pt(e.options.zoom.onZoomRejected,[{chart:n,event:t}])):e.scale=1}}function hT(n,e,t){e.scale&&(Fg(n,e,t),e.scale=null,Pt(e.options.zoom.onZoomComplete,[{chart:n}]))}function qg(n,e,t){const i=e.delta;i&&(e.panning=!0,Ag(n,{x:t.deltaX-i.x,y:t.deltaY-i.y},e.panScales),e.delta={x:t.deltaX,y:t.deltaY})}function vT(n,e,t){const{enabled:i,onPanStart:a,onPanRejected:s}=e.options.pan;if(!i)return;const o=t.target.getBoundingClientRect(),l={x:t.center.x-o.left,y:t.center.y-o.top};if(Pt(a,[{chart:n,event:t,point:l}])===!1)return Pt(s,[{chart:n,event:t}]);e.panScales=Cg(e.options.pan,l,n),e.delta={x:0,y:0},qg(n,e,t)}function pT(n,e){e.delta=null,e.panning&&(e.panning=!1,e.filterNextClick=!0,Pt(e.options.pan.onPanComplete,[{chart:n}]))}const Au=new WeakMap;function bv(n,e){const t=rn(n),i=n.canvas,{pan:a,zoom:s}=e,o=new Xs.Manager(i);s&&s.pinch.enabled&&(o.add(new Xs.Pinch),o.on("pinchstart",l=>fT(n,t,l)),o.on("pinch",l=>Fg(n,t,l)),o.on("pinchend",l=>hT(n,t,l))),a&&a.enabled&&(o.add(new Xs.Pan({threshold:a.threshold,enable:uT(n,t)})),o.on("panstart",l=>vT(n,t,l)),o.on("panmove",l=>qg(n,t,l)),o.on("panend",()=>pT(n,t))),Au.set(n,o)}function yv(n){const e=Au.get(n);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),Au.delete(n))}function mT(n,e){const{pan:t,zoom:i}=n,{pan:a,zoom:s}=e;return i?.zoom?.pinch?.enabled!==s?.zoom?.pinch?.enabled||t?.enabled!==a?.enabled||t?.threshold!==a?.threshold}var gT="2.2.0";function el(n,e,t){const i=t.zoom.drag,{dragStart:a,dragEnd:s}=rn(n);if(i.drawTime!==e||!s)return;const{left:o,top:l,width:c,height:u}=Rg(n,t.zoom.mode,{dragStart:a,dragEnd:s},i.maintainAspectRatio),d=n.ctx;d.save(),d.beginPath(),d.fillStyle=i.backgroundColor||"rgba(225,225,225,0.3)",d.fillRect(o,l,c,u),i.borderWidth>0&&(d.lineWidth=i.borderWidth,d.strokeStyle=i.borderColor||"rgba(225,225,225)",d.strokeRect(o,l,c,u)),d.restore()}var bT={id:"zoom",version:gT,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(n,e,t){const i=rn(n);i.options=t,Object.prototype.hasOwnProperty.call(t.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(t.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(t.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),Xs&&bv(n,t),n.pan=(a,s,o)=>Ag(n,a,s,o),n.zoom=(a,s)=>Pd(n,a,s),n.zoomRect=(a,s,o)=>Mg(n,a,s,o),n.zoomScale=(a,s,o)=>YS(n,a,s,o),n.resetZoom=a=>KS(n,a),n.getZoomLevel=()=>ZS(n),n.getInitialScaleBounds=()=>Lg(n),n.getZoomedScaleBounds=()=>GS(n),n.isZoomedOrPanned=()=>XS(n),n.isZoomingOrPanning=()=>pv(n)},beforeEvent(n,{event:e}){if(pv(n))return!1;if(e.type==="click"||e.type==="mouseup"){const t=rn(n);if(t.filterNextClick)return t.filterNextClick=!1,!1}},beforeUpdate:function(n,e,t){const i=rn(n),a=i.options;i.options=t,mT(a,t)&&(yv(n),bv(n,t)),lT(n,t)},beforeDatasetsDraw(n,e,t){el(n,"beforeDatasetsDraw",t)},afterDatasetsDraw(n,e,t){el(n,"afterDatasetsDraw",t)},beforeDraw(n,e,t){el(n,"beforeDraw",t)},afterDraw(n,e,t){el(n,"afterDraw",t)},stop:function(n){cT(n),Xs&&yv(n),PS(n)},panFunctions:Pu,zoomFunctions:Ou,zoomRectFunctions:Du},yT=x('<div class="chart-loader loader svelte-yac6bn"></div>'),_T=x('<button type="button" class="btn btn-secondary btn-sm btn-chart-zoom svelte-yac6bn">Reset zoom</button>'),xT=x('<div><div> </div> <!> <canvas class="chart-canvas svelte-yac6bn"></canvas> <!></div>');function wT(n,e){Ue(e,!1);let t=te(e,"filter",8,""),i=te(e,"zoom",28,()=>({})),a=te(e,"presets",8,""),s=P(),o=P(),l=P([]),c=P(0),u=P(!1),d=P(!1);async function f(){y(u,!0);const O=[a(),R.normalizeLogsFilter(t())].filter(Boolean).map(A=>"("+A+")").join("&&");return Ae.logs.getStats({filter:O}).then(A=>{h(),A=R.toArray(A);for(let q of A)r(l).push({x:new Date(q.date),y:q.total}),y(c,r(c)+q.total)}).catch(A=>{A?.isAbort||(h(),console.warn(A),Ae.error(A,!O||A?.status!=400))}).finally(()=>{y(u,!1)})}function h(){y(l,[]),y(c,0)}function v(){r(o)?.resetZoom()}un(()=>(dl.register(Ql,H2,Ik,wS,Cu,dS,yS),dl.register(bT),y(o,new dl(r(s),{type:"line",data:{datasets:[{label:"Total requests",data:r(l),borderColor:"#e34562",pointBackgroundColor:"#e34562",backgroundColor:"rgb(239,69,101,0.05)",borderWidth:2,pointRadius:1,pointBorderWidth:0,fill:!0}]},options:{resizeDelay:250,maintainAspectRatio:!1,animation:!1,interaction:{intersect:!1,mode:"index"},scales:{y:{beginAtZero:!0,grid:{color:"#edf0f3"},border:{color:"#e4e9ec"},ticks:{precision:0,maxTicksLimit:4,autoSkip:!0,color:"#666f75"}},x:{type:"time",time:{unit:"hour",tooltipFormat:"DD h a"},grid:{color:O=>O.tick?.major?"#edf0f3":""},color:"#e4e9ec",ticks:{maxTicksLimit:15,autoSkip:!0,maxRotation:0,major:{enabled:!0},color:O=>O.tick?.major?"#16161a":"#666f75"}}},plugins:{legend:{display:!1},zoom:{enabled:!0,zoom:{mode:"x",pinch:{enabled:!0},drag:{enabled:!0,backgroundColor:"rgba(255, 99, 132, 0.2)",borderWidth:0,threshold:10},limits:{x:{minRange:1e8},y:{minRange:1e8}},onZoomComplete:({chart:O})=>{y(d,O.isZoomedOrPanned()),r(d)?(i(i().min=R.formatToUTCDate(O.scales.x.min,"yyyy-MM-dd HH")+":00:00.000Z",!0),i(i().max=R.formatToUTCDate(O.scales.x.max,"yyyy-MM-dd HH")+":59:59.999Z",!0)):(i().min||i().max)&&i({})}}}}}})),()=>r(o)?.destroy())),ie(()=>(N(t()),N(a())),()=>{(typeof t()<"u"||typeof a()<"u")&&f()}),ie(()=>(r(l),r(o)),()=>{typeof r(l)<"u"&&r(o)&&(ft(o,r(o).data.datasets[0].data=r(l)),r(o).update())}),dt();var _={load:f};Be();var b=xT();let m;var k=T(b);let S;var $=T(k),D=g(k,2);{var I=O=>{var A=yT();Et(3,A,()=>jn,()=>({duration:150})),p(O,A)};G(D,O=>{r(u)&&O(I)})}var C=g(D,2);pt(C,O=>y(s,O),()=>r(s));var w=g(C,2);{var E=O=>{var A=_T();re("click",A,v),p(O,A)};G(w,O=>{r(d)&&O(E)})}return V(()=>{m=Re(b,1,"chart-wrapper svelte-yac6bn",null,m,{loading:r(u)}),S=Re(k,1,"total-logs entrance-right svelte-yac6bn",null,S,{hidden:r(u)}),$e($,`Found ${r(c)??""}
        ${r(c)==1?"log":"logs"}`)}),re("dblclick",C,v),p(n,b),_t(e,"load",f),Ve(_)}var kT=x('<div><code class="svelte-110ul6k"><!></code></div>');function Lu(n,e){Ue(e,!1);let t=te(e,"content",8,""),i=te(e,"language",8,"javascript"),a=te(e,"class",8,""),s=P("");function o(d){return d=typeof d=="string"?d:"",d=Prism.plugins.NormalizeWhitespace.normalize(d,{"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0}),Prism.highlight(d,Prism.languages[i()]||Prism.languages.javascript,i())}ie(()=>N(t()),()=>{typeof Prism<"u"&&t()&&y(s,o(t()))}),dt();var l=kT(),c=T(l),u=T(c);gy(u,()=>r(s)),V(()=>Re(l,1,`code-wrapper prism-light ${a()??""}`,"svelte-110ul6k")),p(n,l),Ve()}var ST=x('<i tabindex="-1" role="button"></i>');function ar(n,e){Ue(e,!1);let t=te(e,"value",8,""),i=te(e,"tooltip",8,"Copy"),a=te(e,"idleClasses",8,"ri-file-copy-line txt-sm link-hint"),s=te(e,"successClasses",8,"ri-check-line txt-sm txt-success"),o=te(e,"successDuration",8,500),l=P();function c(){R.isEmpty(t())||(R.copyToClipboard(t()),clearTimeout(r(l)),y(l,setTimeout(()=>{clearTimeout(r(l)),y(l,null)},o())))}un(()=>()=>{r(l)&&clearTimeout(r(l))}),Be();var u=ST();H(u,"aria-label","Copy to clipboard"),Ge(u,(d,f)=>ht?.(d,f),()=>r(l)?void 0:i()),Nt(()=>re("click",u,fn(c))),V(()=>Re(u,1,$n(r(l)?s():a()))),p(n,u),Ve()}var TT=x('<div class="block txt-center"><span class="loader"></span></div>'),$T=x('<span class="txt"> </span> <div class="copy-icon-wrapper svelte-zosojj"><!></div>',1),IT=x('<span class="txt txt-hint">N/A</span>'),CT=x('<tr class="svelte-zosojj"><td class="min-width txt-hint txt-bold">message</td><td class="svelte-zosojj"><!></td></tr>'),ET=x('<span class="txt txt-hint">N/A</span>'),OT=x('<span class="label label-danger log-error-label svelte-zosojj"> </span>'),DT=x('<span class="txt"> </span>'),PT=x('<div class="copy-icon-wrapper svelte-zosojj"><!></div>'),MT=x('<tr class="svelte-zosojj"><td> </td><td class="svelte-zosojj"><!> <!></td></tr>'),AT=x('<table class="table-border svelte-zosojj"><tbody class="svelte-zosojj"><tr class="svelte-zosojj"><td class="min-width txt-hint txt-bold">id</td><td class="svelte-zosojj"><span class="txt"> </span> <div class="copy-icon-wrapper svelte-zosojj"><!></div></td></tr><tr class="svelte-zosojj"><td class="min-width txt-hint txt-bold">level</td><td class="svelte-zosojj"><!> <div class="copy-icon-wrapper svelte-zosojj"><!></div></td></tr><tr class="svelte-zosojj"><td class="min-width txt-hint txt-bold">created</td><td class="svelte-zosojj"><!> <div class="copy-icon-wrapper svelte-zosojj"><!></div></td></tr><!><!></tbody></table>'),LT=x("<h4>Log details</h4>"),NT=x('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button> <button type="button" class="btn btn-primary"><i class="ri-download-line"></i> <span class="txt">Download as JSON</span></button>',1);function RT(n,e){Ue(e,!1);const t=P(),i="log_view",a=qt();let s=P(),o=P({}),l=P(!1);function c(k){return d(k).then(S=>{y(o,S),_()}),r(s)?.show()}function u(){return Ae.cancelRequest(i),r(s)?.hide()}async function d(k){if(k&&typeof k!="string")return y(l,!1),k;y(l,!0);let S={};try{S=await Ae.logs.getOne(k,{requestKey:i})}catch($){$.isAbort||(u(),console.warn("resolveModel:",$),dr(`Unable to load log with id "${k}"`))}return y(l,!1),S}const f=["execTime","type","auth","authId","status","method","url","referer","remoteIP","userIP","userAgent","error","details"];function h(k){if(!k)return[];let S=[];for(let D of f)typeof k[D]<"u"&&S.push(D);const $=Object.keys(k);for(let D of $)S.includes(D)||S.push(D);return S}function v(){R.downloadJson(r(o),"log_"+r(o).created.replaceAll(/[-:\. ]/gi,"")+".json")}function _(){a("show",r(o))}function b(){a("hide",r(o)),y(o,{})}ie(()=>r(o),()=>{y(t,r(o).data?.type=="request")}),dt();var m={show:c,hide:u};return Be(),pt(pn(n,{class:"overlay-panel-lg log-panel",$$events:{hide:b},children:(k,S)=>{var $=et(),D=F($);{var I=w=>{var E=TT();p(w,E)},C=w=>{var E=et(),O=F(E);{var A=q=>{var L=AT(),j=T(L),U=T(j),W=g(T(U)),Y=T(W),J=T(Y),z=g(Y,2),X=T(z);ar(X,{get value(){return r(o),M(()=>r(o).id)}});var oe=g(U),ce=g(T(oe)),le=T(ce);zm(le,{get level(){return r(o),M(()=>r(o).level)}});var me=g(le,2),_e=T(me);ar(_e,{get value(){return r(o),M(()=>r(o).level)}});var pe=g(oe),Te=g(T(pe)),Se=T(Te);qm(Se,{get date(){return r(o),M(()=>r(o).created)}});var he=g(Se,2),ue=T(he);ar(ue,{get value(){return r(o),M(()=>r(o).created)}});var ke=g(pe);{var we=xe=>{var se=CT(),ge=g(T(se)),ee=T(ge);{var ve=Ie=>{var ze=$T(),qe=F(ze),je=T(qe),rt=g(qe,2),be=T(rt);ar(be,{get value(){return r(o),M(()=>r(o).message)}}),V(()=>$e(je,(r(o),M(()=>r(o).message)))),p(Ie,ze)},Ce=Ie=>{var ze=IT();p(Ie,ze)};G(ee,Ie=>{r(o),M(()=>r(o).message)?Ie(ve):Ie(Ce,!1)})}p(xe,se)};G(ke,xe=>{r(t)||xe(we)})}var ae=g(ke);bt(ae,1,()=>(r(o),M(()=>h(r(o).data))),Mt,(xe,se)=>{const ge=ne(()=>(r(o),r(se),M(()=>r(o).data[r(se)]))),ee=ne(()=>(N(R),N(r(ge)),M(()=>R.isEmpty(r(ge))))),ve=ne(()=>!r(ee)&&r(ge)!==null&&typeof r(ge)=="object");var Ce=MT(),Ie=T(Ce);let ze;var qe=T(Ie),je=g(Ie),rt=T(je);{var be=it=>{var He=ET();p(it,He)},Le=it=>{var He=et(),Je=F(He);{var Fe=Ne=>{{let Ze=ne(()=>(N(r(ge)),M(()=>JSON.stringify(r(ge),null,2))));Lu(Ne,{get content(){return r(Ze)}})}},Me=Ne=>{var Ze=et(),Xe=F(Ze);{var vt=We=>{var Qe=OT(),mt=T(Qe);V(()=>$e(mt,r(ge))),p(We,Qe)},tt=We=>{var Qe=et(),mt=F(Qe);{var gt=Oe=>{Lu(Oe,{get content(){return r(ge)},language:"html"})},nt=Oe=>{var B=DT(),Z=T(B);V(()=>$e(Z,`${r(ge)??""}${r(t)&&r(se)=="execTime"?"ms":""}`)),p(Oe,B)};G(mt,Oe=>{r(se)=="details"?Oe(gt):Oe(nt,!1)},!0)}p(We,Qe)};G(Xe,We=>{r(se)=="error"?We(vt):We(tt,!1)},!0)}p(Ne,Ze)};G(Je,Ne=>{r(ve)?Ne(Fe):Ne(Me,!1)},!0)}p(it,He)};G(rt,it=>{r(ee)?it(be):it(Le,!1)})}var Ke=g(rt,2);{var st=it=>{var He=PT(),Je=T(He);ar(Je,{get value(){return r(ge)}}),p(it,He)};G(Ke,it=>{r(ee)||it(st)})}V(()=>{ze=Re(Ie,1,"min-width txt-hint txt-bold",null,ze,{"v-align-top":r(ve)}),$e(qe,`data.${r(se)??""}`)}),p(xe,Ce)}),V(()=>$e(J,(r(o),M(()=>r(o).id)))),p(q,L)};G(O,q=>{r(o),M(()=>r(o)?.id)&&q(A)},!0)}p(w,E)};G(D,w=>{r(l)?w(I):w(C,!1)})}p(k,$)},$$slots:{default:!0,header:(k,S)=>{var $=LT();p(k,$)},footer:(k,S)=>{var $=NT(),D=F($),I=g(D,2);V(()=>I.disabled=r(l)),re("click",D,()=>u()),re("click",I,()=>v()),p(k,$)}},$$legacy:!0}),k=>y(s,k),()=>r(s)),_t(e,"show",c),_t(e,"hide",u),Ve(m)}var FT=x('<code class="txt-xs"> </code>'),qT=x('<div>Default log levels: <div class="inline-flex flex-gap-5"></div></div>');function zg(n,e){let t=te(e,"class",8,"");var i=qT(),a=g(T(i));bt(a,5,()=>Tm,Mt,(s,o)=>{var l=FT(),c=T(l);V(()=>$e(c,`${r(o),M(()=>r(o).level)??""}:${r(o),M(()=>r(o).label)??""}`)),p(s,l)}),V(()=>Re(i,1,$n(t()))),p(n,i)}var zT=x('<div class="block txt-center"><div class="loader"></div></div>'),jT=x('<label>Max days retention</label> <input type="number" required/> <div class="help-block">Set to <code>0</code> to disable logs persistence.</div>',1),UT=x('<label>Min log level</label> <input type="number" required min="-100" max="100"/> <div class="help-block"><p>Logs with level below the minimum will be ignored.</p> <!></div>',1),VT=x('<input type="checkbox"/> <label>Enable IP logging</label>',1),BT=x('<input type="checkbox"/> <label>Enable Auth Id logging</label>',1),HT=x('<form class="grid" autocomplete="off"><!> <!> <!> <!></form>'),WT=x("<h4>Logs settings</h4>"),YT=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Save changes</span></button>',1);function KT(n,e){Ue(e,!1);const t=P(),i=P(),a=qt(),s="logs_settings_"+R.randomString(3);let o=P(),l=P(!1),c=P(!1),u=P({}),d=P({});function f(){return v(),_(),r(o)?.show()}function h(){return r(o)?.hide()}function v(){nn(),y(u,{}),y(d,JSON.parse(JSON.stringify(r(u)||{})))}async function _(){y(c,!0);try{const S=await Ae.settings.getAll()||{};m(S)}catch(S){Ae.error(S)}y(c,!1)}async function b(){if(r(i)){y(l,!0);try{const S=await Ae.settings.update(R.filterRedactedProps(r(d)));m(S),y(l,!1),h(),hn("Successfully saved logs settings."),a("save",S)}catch(S){y(l,!1),Ae.error(S)}}}function m(S={}){y(d,{logs:S?.logs||{}}),y(u,JSON.parse(JSON.stringify(r(d))))}ie(()=>r(u),()=>{y(t,JSON.stringify(r(u)))}),ie(()=>(r(t),r(d)),()=>{y(i,r(t)!=JSON.stringify(r(d)))}),dt();var k={show:f,hide:h};return Be(),pt(pn(n,{popup:!0,class:"superuser-panel",beforeHide:()=>!r(l),$$events:{hide(S){lt.call(this,e,S)},show(S){lt.call(this,e,S)}},children:(S,$)=>{var D=et(),I=F(D);{var C=E=>{var O=zT();p(E,O)},w=E=>{var O=HT(),A=T(O);De(A,{class:"form-field required",name:"logs.maxDays",children:Ee,$$slots:{default:(U,W)=>{const Y=ne(()=>W.uniqueId);var J=jT(),z=F(J),X=g(z,2);V(()=>{H(z,"for",r(Y)),H(X,"id",r(Y))}),xt(X,()=>r(d).logs.maxDays,oe=>ft(d,r(d).logs.maxDays=oe)),p(U,J)}}});var q=g(A,2);De(q,{class:"form-field",name:"logs.minLevel",children:Ee,$$slots:{default:(U,W)=>{const Y=ne(()=>W.uniqueId);var J=UT(),z=F(J),X=g(z,2),oe=g(X,2),ce=g(T(oe),2);zg(ce,{}),V(()=>H(z,"for",r(Y))),xt(X,()=>r(d).logs.minLevel,le=>ft(d,r(d).logs.minLevel=le)),p(U,J)}}});var L=g(q,2);De(L,{class:"form-field form-field-toggle",name:"logs.logIP",children:Ee,$$slots:{default:(U,W)=>{const Y=ne(()=>W.uniqueId);var J=VT(),z=F(J),X=g(z,2);V(()=>{H(z,"id",r(Y)),H(X,"for",r(Y))}),Xt(z,()=>r(d).logs.logIP,oe=>ft(d,r(d).logs.logIP=oe)),p(U,J)}}});var j=g(L,2);De(j,{class:"form-field form-field-toggle",name:"logs.logAuthId",children:Ee,$$slots:{default:(U,W)=>{const Y=ne(()=>W.uniqueId);var J=BT(),z=F(J),X=g(z,2);V(()=>{H(z,"id",r(Y)),H(X,"for",r(Y))}),Xt(z,()=>r(d).logs.logAuthId,oe=>ft(d,r(d).logs.logAuthId=oe)),p(U,J)}}}),V(()=>H(O,"id",s)),re("submit",O,Ct(b)),p(E,O)};G(I,E=>{r(c)?E(C):E(w,!1)})}p(S,D)},$$slots:{default:!0,header:(S,$)=>{var D=WT();p(S,D)},footer:(S,$)=>{var D=YT(),I=F(D),C=g(I,2);let w;V(()=>{I.disabled=r(l),H(C,"form",s),w=Re(C,1,"btn btn-expanded",null,w,{"btn-loading":r(l)}),C.disabled=!r(i)||r(l)}),re("click",I,h),p(S,D)}},$$legacy:!0}),S=>y(o,S),()=>r(o)),_t(e,"show",f),_t(e,"hide",h),Ve(k)}var JT=x('<input type="checkbox"/> <label>Include requests by superusers</label>',1),ZT=x('<div class="page-header-wrapper m-b-0"><header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item"> </div></nav> <button type="button" aria-label="Logs settings" class="btn btn-transparent btn-circle"><i class="ri-settings-4-line"></i></button> <!> <div class="flex-fill"></div> <div class="inline-flex"><!></div></header> <!> <!> <!></div> <!>',1),GT=x("<!> <!> <!>",1);function XT(n,e){Ue(e,!1);const t=()=>It(In,"$pageTitle",a),i=()=>It(pd,"$querystring",a),[a,s]=At(),o=P();Kn(In,"Logs");const l="logId",c="superuserRequests",u="superuserLogRequests",d=new URLSearchParams(i());let f=P(),h=P(),v=P(1),_=P(d.get("filter")||""),b=P({}),m=P((d.get(c)||window.localStorage?.getItem(u))<<0),k=P(r(m));function S(){wr(v)}function $(E={}){let O={};O.filter=r(_)||null,O[c]=r(m)<<0||null,R.replaceHashQueryParams(Object.assign(O,E))}ie(()=>r(f),()=>{d.get(l)&&r(f)&&r(f).show(d.get(l))}),ie(()=>r(m),()=>{y(o,r(m)?"":'data.auth!="_superusers"')}),ie(()=>(r(k),r(m)),()=>{r(k)!=r(m)&&(y(k,r(m)),window.localStorage?.setItem(u,r(m)<<0),$())}),ie(()=>r(_),()=>{typeof r(_)<"u"&&$()}),dt(),Be();var D=GT(),I=F(D);Ai(I,{children:(E,O)=>{var A=ZT(),q=F(A),L=T(q),j=T(L),U=T(j),W=T(U),Y=g(j,2);Ge(Y,(_e,pe)=>ht?.(_e,pe),()=>({text:"Logs settings",position:"right"})),Nt(()=>re("click",Y,()=>r(h)?.show()));var J=g(Y,2);Zl(J,{$$events:{refresh:()=>S()}});var z=g(J,4),X=T(z);De(X,{class:"form-field form-field-toggle m-0",children:Ee,$$slots:{default:(_e,pe)=>{const Te=ne(()=>pe.uniqueId);var Se=JT(),he=F(Se),ue=g(he,2);V(()=>{H(he,"id",r(Te)),H(ue,"for",r(Te))}),Xt(he,()=>r(m),ke=>y(m,ke)),p(_e,Se)}}});var oe=g(L,2);Jl(oe,{get value(){return r(_)},placeholder:"Search term or filter like `level > 0 && data.auth = 'guest'`",extraAutocompleteKeys:["level","message","data."],$$events:{submit:_e=>y(_,_e.detail)}});var ce=g(oe,2);zg(ce,{class:"block txt-sm txt-hint m-t-xs m-b-base"});var le=g(ce,2);Hd(le,()=>r(v),_e=>{wT(_e,{get filter(){return r(_)},get presets(){return r(o)},get zoom(){return r(b)},set zoom(pe){y(b,pe)},$$legacy:!0})});var me=g(q,2);Hd(me,()=>r(v),_e=>{p0(_e,{get presets(){return r(o)},get filter(){return r(_)},set filter(pe){y(_,pe)},get zoom(){return r(b)},set zoom(pe){y(b,pe)},$$events:{select:pe=>r(f)?.show(pe?.detail)},$$legacy:!0})}),V(()=>$e(W,t())),p(E,A)},$$slots:{default:!0}});var C=g(I,2);pt(RT(C,{$$events:{show:E=>{let O={};O[l]=E.detail?.id||null,R.replaceHashQueryParams(O)},hide:()=>{let E={};E[l]=null,R.replaceHashQueryParams(E)}},$$legacy:!0}),E=>y(f,E),()=>r(f));var w=g(C,2);pt(KT(w,{$$events:{save:S},$$legacy:!0}),E=>y(h,E),()=>r(h)),p(n,D),Ve(),s()}var QT=x('<hr class="m-t-sm m-b-sm"/>'),e$=x('<div class="sidebar-item disabled"> </div>'),t$=x('<button type="button"> </button>'),n$=x("<!> <!>",1),i$=x('<div class="docs-content-wrapper"><aside><nav class="sidebar-content"></nav></aside> <div class="docs-content"></div></div>'),r$=x('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button>');function a$(n,e){Ue(e,!1);const t={list:{label:"List/Search",component:Ut(()=>import("./ListApiDocs-DyLwujIg.js"),__vite__mapDeps([2,3,4]),import.meta.url)},view:{label:"View",component:Ut(()=>import("./ViewApiDocs-ud5bqKGv.js"),__vite__mapDeps([5,3]),import.meta.url)},create:{label:"Create",component:Ut(()=>import("./CreateApiDocs-CNmhNM4X.js"),__vite__mapDeps([6,3]),import.meta.url)},update:{label:"Update",component:Ut(()=>import("./UpdateApiDocs-DQF2QFBq.js"),__vite__mapDeps([7,3]),import.meta.url)},delete:{label:"Delete",component:Ut(()=>import("./DeleteApiDocs-C8ZHkrMH.js"),[],import.meta.url)},realtime:{label:"Realtime",component:Ut(()=>import("./RealtimeApiDocs-CeauPgLP.js"),[],import.meta.url)},batch:{label:"Batch",component:Ut(()=>import("./BatchApiDocs-Bikv2onT.js"),[],import.meta.url)}},i={"list-auth-methods":{label:"List auth methods",component:Ut(()=>import("./AuthMethodsDocs-BswKKjgw.js"),__vite__mapDeps([8,3]),import.meta.url)},"auth-with-password":{label:"Auth with password",component:Ut(()=>import("./AuthWithPasswordDocs-D74hD3nU.js"),__vite__mapDeps([9,3]),import.meta.url)},"auth-with-oauth2":{label:"Auth with OAuth2",component:Ut(()=>import("./AuthWithOAuth2Docs-Z8I4DRpu.js"),__vite__mapDeps([10,3]),import.meta.url)},"auth-with-otp":{label:"Auth with OTP",component:Ut(()=>import("./AuthWithOtpDocs-Dv42TuSr.js"),__vite__mapDeps([11,3]),import.meta.url)},refresh:{label:"Auth refresh",component:Ut(()=>import("./AuthRefreshDocs-BWmDBAam.js"),__vite__mapDeps([12,3]),import.meta.url)},verification:{label:"Verification",component:Ut(()=>import("./VerificationDocs-CAosZYLO.js"),[],import.meta.url)},"password-reset":{label:"Password reset",component:Ut(()=>import("./PasswordResetDocs-FTpAYHfR.js"),[],import.meta.url)},"email-change":{label:"Email change",component:Ut(()=>import("./EmailChangeDocs-DypNMKCy.js"),[],import.meta.url)}};let a=P(),s=P({}),o=P(),l=P([]);r(l).length&&y(o,Object.keys(r(l))[0]);function c(h){return y(s,h),d(Object.keys(r(l))[0]),r(a)?.show()}function u(){return r(a)?.hide()}function d(h){y(o,h)}ie(()=>(r(s),r(l)),()=>{r(s).type==="auth"?(y(l,Object.assign({},t,i)),ft(l,r(l)["auth-with-password"].disabled=!r(s).passwordAuth.enabled),ft(l,r(l)["auth-with-oauth2"].disabled=!r(s).oauth2.enabled),ft(l,r(l)["auth-with-otp"].disabled=!r(s).otp.enabled)):r(s).type==="view"?(y(l,Object.assign({},t)),delete r(l).create,delete r(l).update,delete r(l).delete,delete r(l).realtime,delete r(l).batch):y(l,Object.assign({},t))}),dt();var f={show:c,hide:u,changeTab:d};return Be(),pt(pn(n,{class:"docs-panel",$$events:{hide(h){lt.call(this,e,h)},show(h){lt.call(this,e,h)}},children:(h,v)=>{var _=i$(),b=T(_);let m;var k=T(b);bt(k,7,()=>(r(l),M(()=>Object.entries(r(l)))),([$,D])=>$,($,D,I)=>{var C=xa(()=>Ga(r(D),2));let w=()=>r(C)[0],E=()=>r(C)[1];var O=n$(),A=F(O);{var q=W=>{var Y=QT();p(W,Y)};G(A,W=>{N(r(I)),M(()=>r(I)===Object.keys(t).length)&&W(q)})}var L=g(A,2);{var j=W=>{var Y=e$(),J=T(Y);Ge(Y,(z,X)=>ht?.(z,X),()=>({position:"left",text:"Not enabled for the collection"})),V(()=>$e(J,(E(),M(()=>E().label)))),p(W,Y)},U=W=>{var Y=t$();let J;var z=T(Y);V(()=>{J=Re(Y,1,"sidebar-item",null,J,{active:r(o)===w()}),$e(z,(E(),M(()=>E().label)))}),re("click",Y,()=>d(w())),p(W,Y)};G(L,W=>{E(),M(()=>E().disabled)?W(j):W(U,!1)})}p($,O)});var S=g(b,2);bt(S,5,()=>(r(l),M(()=>Object.entries(r(l)))),([$,D])=>$,($,D)=>{var I=xa(()=>Ga(r(D),2));let C=()=>r(I)[0],w=()=>r(I)[1];var E=et(),O=F(E);{var A=q=>{var L=et(),j=F(L);hy(j,()=>(w(),M(()=>w().component)),null,(U,W)=>{var Y=ne(()=>{var{default:z}=r(W);return{TabComponent:z}}),J=ne(()=>r(Y).TabComponent);r(J)(U,{get collection(){return r(s)}})}),p(q,L)};G(O,q=>{r(o)===C()&&q(A)})}p($,E)}),V(()=>m=Re(b,1,"docs-sidebar",null,m,{compact:r(s)?.type==="auth"})),p(h,_)},$$slots:{default:!0,footer:(h,v)=>{var _=r$();re("click",_,()=>u()),p(h,_)}},$$legacy:!0}),h=>y(a,h),()=>r(a)),_t(e,"show",c),_t(e,"hide",u),_t(e,"changeTab",d),Ve(f)}var s$=x('<div class="accordion-content"><!></div>'),o$=x('<div><button type="button"><!></button> <!></div>');function Pr(n,e){Ue(e,!1);const t=qt();let i=P(),a=P(),s=te(e,"class",8,""),o=te(e,"draggable",8,!1),l=te(e,"active",12,!1),c=te(e,"interactive",8,!0),u=te(e,"single",8,!1),d=P(!1);function f(){return!!l()}function h(){b(),l(!0),t("expand")}function v(){l(!1),clearTimeout(r(a)),t("collapse")}function _(){t("toggle"),l()?v():h()}function b(){if(u()&&r(i).closest(".accordions")){const E=r(i).closest(".accordions").querySelectorAll(".accordion.active .accordion-header.interactive");for(const O of E)O.click()}}un(()=>()=>clearTimeout(r(a))),ie(()=>(N(l()),r(a),r(i)),()=>{l()&&(clearTimeout(r(a)),y(a,setTimeout(()=>{r(i)?.scrollIntoViewIfNeeded?r(i).scrollIntoViewIfNeeded():r(i)?.scrollIntoView&&r(i).scrollIntoView({behavior:"smooth",block:"nearest"})},200)))}),dt();var m={isExpanded:f,expand:h,collapse:v,toggle:_,collapseSiblings:b};Be();var k=o$();let S;var $=T(k);let D;var I=T($);Zt(I,e,"header",{get active(){return l()}},null);var C=g($,2);{var w=E=>{var O=s$(),A=T(O);Zt(A,e,"default",{},null),Et(3,O,()=>vn,()=>({delay:10,duration:150})),p(E,O)};G(C,E=>{l()&&E(w)})}return pt(k,E=>y(i,E),()=>r(i)),V(()=>{S=Re(k,1,`accordion ${r(d)?"drag-over":""} ${s()??""}`,null,S,{active:l()}),D=Re($,1,"accordion-header",null,D,{interactive:c()}),H($,"draggable",o()),H($,"aria-expanded",l())}),re("click",$,Ct(()=>c()&&_())),re("drop",$,Ct(E=>{o()&&(y(d,!1),b(),t("drop",E))})),re("dragstart",$,E=>o()&&t("dragstart",E)),re("dragenter",$,E=>{o()&&(y(d,!0),t("dragenter",E))}),re("dragleave",$,E=>{o()&&(y(d,!1),t("dragleave",E))}),re("dragover",$,Ct(function(E){lt.call(this,e,E)})),p(n,k),_t(e,"isExpanded",f),_t(e,"expand",h),_t(e,"collapse",v),_t(e,"toggle",_),_t(e,"collapseSiblings",b),Ve(m)}let _v;var l$=x('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),c$=x('<div class="help-block">Available placeholder parameters: <!></div>'),u$=x('<label>Subject</label> <input type="text" spellcheck="false" required/> <!>',1),d$=x('<textarea class="txt-mono" spellcheck="false" rows="14" required></textarea>'),f$=x('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),h$=x('<div class="help-block">Available placeholder parameters: <!></div>'),v$=x("<label>Body (HTML)</label> <!> <!>",1),p$=x("<!> <!>",1),m$=x('<i class="ri-error-warning-fill txt-danger"></i>'),g$=x('<div class="inline-flex"><i class="ri-draft-line"></i> <span class="txt"> </span></div> <div class="flex-fill"></div> <!>',1);function b$(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["expand","collapse","collapseSiblings","key","title","config","placeholders"]);Ue(e,!1);const a=()=>It(Bn,"$errors",s),[s,o]=At(),l=P();let c=te(e,"key",8),u=te(e,"title",8),d=te(e,"config",28,()=>({})),f=te(e,"placeholders",24,()=>[]),h=P(),v=P(_v),_=P(!1);function b(){r(h)?.expand()}function m(){r(h)?.collapse()}function k(){r(h)?.collapseSiblings()}async function S(){r(v)||r(_)||(y(_,!0),y(v,(await Ut(async()=>{const{default:C}=await import("./CodeEditor-Dnzy5TIO.js");return{default:C}},__vite__mapDeps([13,1]),import.meta.url)).default),_v=r(v),y(_,!1))}function $(C){C=C.replace("*",""),R.copyToClipboard(C),ls(`Copied ${C} to clipboard`,2e3)}S(),ie(()=>(a(),N(c())),()=>{y(l,!R.isEmpty(R.getNestedVal(a(),c())))}),ie(()=>(N(d()),N(c())),()=>{d().enabled||Zn(c())}),dt();var D={expand:b,collapse:m,collapseSiblings:k};Be(),pt(Pr(n,tn(()=>i,{$$events:{expand(C){lt.call(this,e,C)},collapse(C){lt.call(this,e,C)},toggle(C){lt.call(this,e,C)}},children:(C,w)=>{var E=p$(),O=F(E);De(O,{class:"form-field required",get name(){return`${c()??""}.subject`},children:Ee,$$slots:{default:(q,L)=>{const j=ne(()=>L.uniqueId);var U=u$(),W=F(U),Y=g(W,2),J=g(Y,2);{var z=X=>{var oe=c$(),ce=g(T(oe));bt(ce,1,f,Mt,(le,me)=>{var _e=l$(),pe=F(_e),Te=T(pe);V(()=>$e(Te,"{"+r(me)+"}")),re("click",pe,()=>$("{"+r(me)+"}")),p(le,_e)}),p(X,oe)};G(J,X=>{N(f()),M(()=>f()?.length>0)&&X(z)})}V(()=>{H(W,"for",r(j)),H(Y,"id",r(j))}),xt(Y,()=>d().subject,X=>d(d().subject=X,!0)),p(q,U)}}});var A=g(O,2);De(A,{class:"form-field m-0 required",get name(){return`${c()??""}.body`},children:Ee,$$slots:{default:(q,L)=>{const j=ne(()=>L.uniqueId);var U=v$(),W=F(U),Y=g(W,2);{var J=ce=>{var le=et(),me=F(le);yi(me,()=>r(v),(_e,pe)=>{pe(_e,{get id(){return r(j)},language:"html",get value(){return d().body},set value(Te){d(d().body=Te,!0)},$$legacy:!0})}),p(ce,le)},z=ce=>{var le=d$();V(()=>H(le,"id",r(j))),xt(le,()=>d().body,me=>d(d().body=me,!0)),p(ce,le)};G(Y,ce=>{r(v)&&!r(_)?ce(J):ce(z,!1)})}var X=g(Y,2);{var oe=ce=>{var le=h$(),me=g(T(le));bt(me,1,f,Mt,(_e,pe)=>{var Te=f$(),Se=F(Te),he=T(Se);V(()=>$e(he,"{"+r(pe)+"}")),re("click",Se,()=>$("{"+r(pe)+"}")),p(_e,Te)}),p(ce,le)};G(X,ce=>{N(f()),M(()=>f()?.length>0)&&ce(oe)})}V(()=>H(W,"for",r(j))),p(q,U)}}}),p(C,E)},$$slots:{default:!0,header:(C,w)=>{var E=g$(),O=F(E),A=g(T(O),2),q=T(A),L=g(O,4);{var j=U=>{var W=m$();Ge(W,(Y,J)=>ht?.(Y,J),()=>({text:"Has errors",position:"left"})),Et(3,W,()=>jn,()=>({duration:150,start:.7})),p(U,W)};G(L,U=>{r(l)&&U(j)})}V(()=>$e(q,u())),p(C,E)}},$$legacy:!0})),C=>y(h,C),()=>r(h)),_t(e,"expand",b),_t(e,"collapse",m),_t(e,"collapseSiblings",k);var I=Ve(D);return o(),I}var y$=x('<label> </label> <input type="number" required placeholder="No change"/> <div class="help-block"><span>Invalidate all previously issued tokens</span></div>',1);function _$(n,e){Ue(e,!1);let t=te(e,"key",8),i=te(e,"label",8),a=te(e,"duration",12),s=te(e,"secret",12);Be(),De(n,{class:"form-field required",get name(){return`${t()??""}.duration`},children:Ee,$$slots:{default:(o,l)=>{const c=ne(()=>l.uniqueId);var u=y$(),d=F(u),f=T(d),h=g(d,2),v=g(h,2),_=T(v);let b;V(()=>{H(d,"for",r(c)),$e(f,`${i()??""} duration (in seconds)`),H(h,"id",r(c)),b=Re(_,1,"link-primary",null,b,{"txt-success":!!s()})}),xt(h,a),re("click",_,()=>{s()?s(void 0):s(R.randomSecret(50))}),p(o,u)}}}),Ve()}var x$=x('<div class="col-sm-6"><!></div>'),w$=x('<div class="grid"></div>'),k$=x('<i class="ri-error-warning-fill txt-danger"></i>'),S$=x('<div class="inline-flex"><i class="ri-key-2-line"></i> <span class="txt">Tokens options (invalidate, duration)</span></div> <div class="flex-fill"></div> <!>',1);function T$(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At(),s=P(),o=P();let l=te(e,"collection",12),c=P([]);function u(d){if(R.isEmpty(d))return!1;for(let f of r(c))if(d[f.key])return!0;return!1}ie(()=>N(l()),()=>{y(s,l()?.system&&l()?.name==="_superusers")}),ie(()=>r(s),()=>{y(c,r(s)?[{key:"authToken",label:"Auth"},{key:"passwordResetToken",label:"Password reset"},{key:"fileToken",label:"Protected file access"}]:[{key:"authToken",label:"Auth"},{key:"verificationToken",label:"Email verification"},{key:"passwordResetToken",label:"Password reset"},{key:"emailChangeToken",label:"Email change"},{key:"fileToken",label:"Protected file access"}])}),ie(()=>t(),()=>{y(o,u(t()))}),dt(),Be(),Pr(n,{single:!0,children:(d,f)=>{var h=w$();bt(h,5,()=>r(c),v=>v.key,(v,_)=>{var b=x$(),m=T(b);_$(m,{get key(){return r(_),M(()=>r(_).key)},get label(){return r(_),M(()=>r(_).label)},get duration(){return l()[r(_).key].duration},set duration(k){l(l()[r(_).key].duration=k,!0)},get secret(){return l()[r(_).key].secret},set secret(k){l(l()[r(_).key].secret=k,!0)},$$legacy:!0}),p(v,b)}),p(d,h)},$$slots:{default:!0,header:(d,f)=>{var h=S$(),v=g(F(h),4);{var _=b=>{var m=k$();Ge(m,(k,S)=>ht?.(k,S),()=>({text:"Has errors",position:"left"})),Et(3,m,()=>jn,()=>({duration:150,start:.7})),p(b,m)};G(v,b=>{r(o)&&b(_)})}p(d,h)}}}),Ve(),a()}let xv;var $$=x('<div class="txt-center"><span class="loader"></span></div>'),I$=x('<button type="button" class="btn btn-sm btn-transparent btn-hint lock-toggle svelte-gmv44s"><i class="ri-lock-line" aria-hidden="true"></i> <span class="txt">Set Superusers only</span></button>'),C$=x('<small class="txt svelte-gmv44s">Unlock and set custom rule</small>'),E$=x('<button type="button" class="unlock-overlay svelte-gmv44s"><!> <div class="icon svelte-gmv44s" aria-hidden="true"><i class="ri-lock-unlock-line svelte-gmv44s"></i></div></button>'),O$=x('<div class="input-wrapper svelte-gmv44s"><label><!> <span> </span> <!> <!></label> <!> <!></div> <div class="help-block"><!></div>',1);function Fr(n,e){Ue(e,!1);const t=P(),i=P();let a=te(e,"collection",8,null),s=te(e,"rule",12,null),o=te(e,"label",8,"Rule"),l=te(e,"formKey",8,"rule"),c=te(e,"required",8,!1),u=te(e,"disabled",8,!1),d=te(e,"superuserToggle",8,!0),f=te(e,"placeholder",8,"Leave empty to grant everyone access..."),h=P(null),v=null,_=P(xv),b=P(!1);m();async function m(){r(_)||r(b)||(y(b,!0),y(_,(await Ut(async()=>{const{default:w}=await import("./FilterAutocompleteInput-Bfmesr8o.js");return{default:w}},__vite__mapDeps([0,1]),import.meta.url)).default),xv=r(_),y(b,!1))}async function k(){s(v||""),await Tn(),r(h)?.focus()}function S(){v=s(),s(null)}ie(()=>(N(d()),N(s())),()=>{y(t,d()&&s()===null)}),ie(()=>(N(u()),N(a())),()=>{y(i,u()||a().system)}),dt(),Be();var $=et(),D=F($);{var I=w=>{var E=$$();p(w,E)},C=w=>{{let E=ne(()=>c()?"requied":""),O=ne(()=>r(t)?"disabled":"");De(w,{get class(){return`form-field rule-field ${r(E)??""} ${r(O)??""}`},get name(){return l()},children:Ee,$$slots:{default:(A,q)=>{const L=ne(()=>q.uniqueId);var j=O$(),U=F(j),W=T(U),Y=T(W);Zt(Y,e,"beforeLabel",{get isSuperuserOnly(){return r(t)}},null);var J=g(Y,2);let z;var X=T(J),oe=g(J,2);Zt(oe,e,"afterLabel",{get isSuperuserOnly(){return r(t)}},null);var ce=g(oe,2);{var le=he=>{var ue=I$();V(()=>{H(ue,"aria-hidden",r(i)),ue.disabled=r(i)}),re("click",ue,S),p(he,ue)};G(ce,he=>{d()&&!r(t)&&he(le)})}var me=g(W,2);{let he=ne(()=>r(i)||r(t)),ue=ne(()=>r(t)?"":f());yi(me,()=>r(_),(ke,we)=>{pt(we(ke,{get id(){return r(L)},get baseCollection(){return a()},get disabled(){return r(he)},get placeholder(){return r(ue)},get value(){return s()},set value(ae){s(ae)},$$legacy:!0}),ae=>y(h,ae),()=>r(h))})}var _e=g(me,2);{var pe=he=>{var ue=E$(),ke=T(ue);{var we=ae=>{var xe=C$();p(ae,xe)};G(ke,ae=>{r(i)||ae(we)})}V(()=>{ue.disabled=r(i),H(ue,"aria-hidden",r(i))}),Et(3,ue,()=>jn,()=>({duration:150,start:.98})),re("click",ue,k),p(he,ue)};G(_e,he=>{d()&&r(t)&&he(pe)})}Ge(U,(he,ue)=>ht?.(he,ue),()=>a().system?{text:"System collection rule cannot be changed.",position:"top"}:void 0);var Te=g(U,2),Se=T(Te);Zt(Se,e,"default",{get isSuperuserOnly(){return r(t)}},null),V(()=>{H(W,"for",r(L)),z=Re(J,1,"txt",null,z,{"txt-hint":r(t)}),$e(X,`${o()??""}
                    ${r(t)?"- Superusers only":""}`)}),p(A,j)}}})}};G(D,w=>{r(b)?w(I):w(C,!1)})}p(n,$),Ve()}var D$=x('<input type="checkbox"/> <label><span class="txt">Enable</span></label>',1),P$=x("<p>This optional rule could be used to enable/disable MFA per account basis.</p> <p>For example, to require MFA only for accounts with non-empty email you can set it to <code>email != ''</code>.</p> <p>Leave the rule empty to require MFA for everyone.</p>",1),M$=x(`<div class="content m-b-sm"><p class="txt-bold">This feature is experimental and may change in the future.</p> <p>Multi-factor authentication (MFA) requires the user to authenticate with any 2 different auth
            methods (otp, identity/password, oauth2) before issuing an auth token. <a target="_blank" rel="noopener noreferrer" class="txt-sm link-hint" title="Learn more"><em>(Learn more)</em></a>.</p></div> <div class="grid"><!> <div><!></div></div>`,1),A$=x('<span class="label label-success">Enabled</span>'),L$=x('<span class="label">Disabled</span>'),N$=x('<i class="ri-error-warning-fill txt-danger"></i>'),R$=x('<div class="inline-flex"><i class="ri-shield-check-line"></i> <span class="txt">Multi-factor authentication (MFA)</span></div> <div class="flex-fill"></div> <!> <!>',1);function F$(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At(),s=P();let o=te(e,"collection",12);ie(()=>t(),()=>{y(s,!R.isEmpty(t()?.mfa))}),dt(),Be(),Pr(n,{single:!0,children:(l,c)=>{var u=M$(),d=F(u),f=g(T(d),2),h=g(T(f)),v=g(d,2),_=T(v);De(_,{class:"form-field form-field-toggle",name:"mfa.enabled",children:Ee,$$slots:{default:(S,$)=>{const D=ne(()=>$.uniqueId);var I=D$(),C=F(I),w=g(C,2);V(()=>{H(C,"id",r(D)),H(w,"for",r(D))}),Xt(C,()=>o().mfa.enabled,E=>o(o().mfa.enabled=E,!0)),p(S,I)}}});var b=g(_,2);let m;var k=T(b);{let S=ne(()=>(N(o()),M(()=>!o().mfa.enabled)));Fr(k,{label:"MFA rule",formKey:"mfa.rule",superuserToggle:!1,get disabled(){return r(S)},placeholder:"Leave empty to require MFA for everyone",get collection(){return o()},get rule(){return o().mfa.rule},set rule($){o(o().mfa.rule=$,!0)},children:($,D)=>{var I=P$();p($,I)},$$slots:{default:!0},$$legacy:!0})}V(()=>{H(h,"href",M(()=>"https://pocketbase.io/docs/authentication#multi-factor-authentication")),m=Re(b,1,"content",null,m,{fade:!o().mfa.enabled})}),p(l,u)},$$slots:{default:!0,header:(l,c)=>{var u=R$(),d=g(F(u),4);{var f=b=>{var m=A$();p(b,m)},h=b=>{var m=L$();p(b,m)};G(d,b=>{N(o()),M(()=>o().mfa.enabled)?b(f):b(h,!1)})}var v=g(d,2);{var _=b=>{var m=N$();Ge(m,(k,S)=>ht?.(k,S),()=>({text:"Has errors",position:"left"})),Et(3,m,()=>jn,()=>({duration:150,start:.7})),p(b,m)};G(v,b=>{r(s)&&b(_)})}p(l,u)}}}),Ve(),a()}var q$=x('<span class="txt"> </span>'),z$=x('<span class="clear"><i class="ri-close-line"></i></span>'),j$=x('<div class="option"><!> <!></div>'),U$=x("<div> </div>"),V$=x('<div class="addon suffix p-r-5"><button type="button" class="btn btn-sm btn-circle btn-transparent clear" aria-label="Clear"><i class="ri-close-line"></i></button></div>'),B$=x('<div class="form-field form-field-sm options-search"><label class="input-group"><div class="addon p-r-0"><i class="ri-search-line"></i></div> <input type="text"/> <!></label></div>'),H$=x('<div tabindex="0" role="menuitem"><!></div>'),W$=x('<div class="txt-missing"> </div>'),Y$=x('<!> <!> <div class="options-list"></div> <!>',1),K$=x('<div><div role="button"></div> <!></div>');function Za(n,e){Ue(e,!1);const t=P(),i=P();let a=te(e,"id",8,""),s=te(e,"noOptionsText",8,"No options found"),o=te(e,"selectPlaceholder",8,"- Select -"),l=te(e,"searchPlaceholder",8,"Search..."),c=te(e,"items",24,()=>[]),u=te(e,"multiple",8,!1),d=te(e,"disabled",8,!1),f=te(e,"readonly",8,!1),h=te(e,"upside",8,!1),v=te(e,"zeroFunc",8,()=>u()?[]:void 0),_=te(e,"selected",28,()=>v()()),b=te(e,"toggle",24,u),m=te(e,"closable",8,!0),k=te(e,"labelComponent",8,void 0),S=te(e,"labelComponentProps",24,()=>({})),$=te(e,"optionComponent",8,void 0),D=te(e,"optionComponentProps",24,()=>({})),I=te(e,"searchable",8,!1),C=te(e,"searchFunc",8,void 0);const w=qt();let E=te(e,"class",8,""),O=P(),A=P(""),q=P(void 0),L=P(void 0);function j(se){if(R.isEmpty(_()))return;let ge=R.toArray(_());R.inArray(ge,se)&&(R.removeByValue(ge,se),_(u()?ge:ge?.[0]||v()())),w("change",{selected:_()}),r(q)?.dispatchEvent(new CustomEvent("change",{detail:_(),bubbles:!0}))}function U(se){if(u()){let ge=R.toArray(_());R.inArray(ge,se)||_([...ge,se])}else _(se);w("change",{selected:_()}),r(q)?.dispatchEvent(new CustomEvent("change",{detail:_(),bubbles:!0}))}function W(se){return r(i)(se)?j(se):U(se)}function Y(){_(v()()),w("change",{selected:_()}),r(q)?.dispatchEvent(new CustomEvent("change",{detail:_(),bubbles:!0}))}function J(){r(O)?.show&&r(O)?.show()}function z(){r(O)?.hide&&r(O)?.hide()}function X(){if(R.isEmpty(_())||R.isEmpty(c()))return;let se=R.toArray(_()),ge=[];for(const ee of se)R.inArray(c(),ee)||ge.push(ee);if(ge.length){for(const ee of ge)R.removeByValue(se,ee);_(u()?se:se[0])}}function oe(se,ge){let ee=(""+ge).replace(/\s+/g,"").toLowerCase(),ve=se;try{typeof se=="object"&&se!==null&&(ve=JSON.stringify(se))}catch{}return(""+ve).replace(/\s+/g,"").toLowerCase().includes(ee)}function ce(){y(A,"")}function le(se,ge){se=se||[];const ee=C()||oe;return se.filter(ve=>ee(ve,ge))||[]}function me(se,ge){se.preventDefault(),b()&&u()?W(ge):U(ge)}function _e(se,ge){(se.code==="Enter"||se.code==="Space")&&(me(se,ge),m()&&z())}function pe(){ce(),setTimeout(()=>{const se=r(q)?.querySelector(".dropdown-item.option.selected");se&&(se.focus(),se.scrollIntoView({block:"nearest"}))},0)}function Te(se){se.stopPropagation(),!f()&&!d()&&r(O)?.toggle()}un(()=>{const se=document.querySelectorAll(`label[for="${a()}"]`);for(const ge of se)ge.addEventListener("click",Te);return()=>{for(const ge of se)ge.removeEventListener("click",Te)}}),ie(()=>N(c()),()=>{c()&&(X(),ce())}),ie(()=>(N(c()),r(A)),()=>{y(t,le(c(),r(A)))}),ie(()=>N(_()),()=>{y(i,function(se){const ge=R.toArray(_());return R.inArray(ge,se)})}),dt();var Se={deselectItem:j,selectItem:U,toggleItem:W,reset:Y,showDropdown:J,hideDropdown:z};Be();var he=K$();let ue;var ke=T(he);let we;bt(ke,5,()=>(N(R),N(_()),M(()=>R.toArray(_()))),Mt,(se,ge)=>{var ee=j$(),ve=T(ee);{var Ce=je=>{var rt=et(),be=F(rt);yi(be,k,(Le,Ke)=>{Ke(Le,tn({get item(){return r(ge)}},S))}),p(je,rt)},Ie=je=>{var rt=q$(),be=T(rt);V(()=>$e(be,r(ge))),p(je,rt)};G(ve,je=>{k()?je(Ce):je(Ie,!1)})}var ze=g(ve,2);{var qe=je=>{var rt=z$();Ge(rt,(be,Le)=>ht?.(be,Le),()=>"Clear"),Nt(()=>re("click",rt,Ct(fn(()=>j(r(ge)))))),p(je,rt)};G(ze,je=>{(u()||b())&&je(qe)})}p(se,ee)},se=>{var ge=U$();let ee;var ve=T(ge);V(()=>{ee=Re(ge,1,"block txt-placeholder",null,ee,{"link-hint":!d()&&!f()}),$e(ve,o())}),p(se,ge)}),pt(ke,se=>y(L,se),()=>r(L));var ae=g(ke,2);{var xe=se=>{{let ge=ne(()=>h()?"dropdown-upside":"");pt(Jn(se,{get class(){return`dropdown dropdown-block options-dropdown dropdown-left ${r(ge)??""}`},get trigger(){return r(L)},$$events:{show:pe,hide(ee){lt.call(this,e,ee)}},children:(ee,ve)=>{var Ce=Y$(),Ie=F(Ce);{var ze=be=>{var Le=B$(),Ke=T(Le),st=g(T(Ke),2);Wi(st,!0);var it=g(st,2);{var He=Je=>{var Fe=V$(),Me=T(Fe);re("click",Me,Ct(fn(ce))),p(Je,Fe)};G(it,Je=>{r(A),M(()=>r(A).length)&&Je(He)})}V(()=>H(st,"placeholder",l())),xt(st,()=>r(A),Je=>y(A,Je)),p(be,Le)};G(Ie,be=>{I()&&be(ze)})}var qe=g(Ie,2);Zt(qe,e,"beforeOptions",{},null);var je=g(qe,2);bt(je,5,()=>r(t),Mt,(be,Le)=>{var Ke=H$();let st;var it=T(Ke);{var He=Fe=>{var Me=et(),Ne=F(Me);yi(Ne,$,(Ze,Xe)=>{Xe(Ze,tn({get item(){return r(Le)}},D))}),p(Fe,Me)},Je=Fe=>{var Me=Oa();V(()=>$e(Me,r(Le))),p(Fe,Me)};G(it,Fe=>{$()?Fe(He):Fe(Je,!1)})}V(Fe=>st=Re(Ke,1,"dropdown-item option",null,st,Fe),[()=>({closable:m(),selected:r(i)(r(Le))})]),re("click",Ke,Fe=>me(Fe,r(Le))),re("keydown",Ke,Fe=>_e(Fe,r(Le))),p(be,Ke)},be=>{var Le=et(),Ke=F(Le);{var st=it=>{var He=W$(),Je=T(He);V(()=>$e(Je,s())),p(it,He)};G(Ke,it=>{s()&&it(st)})}p(be,Le)});var rt=g(je,2);Zt(rt,e,"afterOptions",{},null),p(ee,Ce)},$$slots:{default:!0},$$legacy:!0}),ee=>y(O,ee),()=>r(O))}};G(ae,se=>{!d()&&!f()&&se(xe)})}return pt(he,se=>y(q,se),()=>r(q)),V(()=>{ue=Re(he,1,`select ${E()??""}`,null,ue,{upside:h(),multiple:u(),disabled:d(),readonly:f()}),H(ke,"tabindex",d()||f()?"-1":"0"),we=Re(ke,1,"selected-container",null,we,{disabled:d(),readonly:f()})}),p(n,he),_t(e,"deselectItem",j),_t(e,"selectItem",U),_t(e,"toggleItem",W),_t(e,"reset",Y),_t(e,"showDropdown",J),_t(e,"hideDropdown",z),Ve(Se)}var J$=x('<div class="form-field-addon"><button type="button" class="btn btn-transparent btn-circle" aria-label="Toggle password visibility"><i class="ri-key-line"></i></button></div> <input/>',1),Z$=x("<input/>");function Md(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","mask"]);Ue(e,!1);let a=te(e,"value",12,void 0),s=te(e,"mask",12,!1),o=P();async function l(){a(""),s(!1),await Tn(),r(o)?.focus()}Be();var c=et(),u=F(c);{var d=h=>{var v=J$(),_=F(v),b=T(_);Ge(b,(k,S)=>ht?.(k,S),()=>({position:"left",text:"Set new value"})),Nt(()=>re("click",b,Ct(l)));var m=g(_,2);ss(m,()=>({disabled:!0,type:"text",placeholder:"******",...i}),void 0,void 0,void 0,void 0,!0),p(h,v)},f=h=>{var v=Z$();ss(v,()=>({type:"password",autocomplete:"new-password",...i}),void 0,void 0,void 0,void 0,!0),pt(v,_=>y(o,_),()=>r(o)),xt(v,a),p(h,v)};G(u,h=>{s()?h(d):h(f,!1)})}p(n,c),Ve()}var G$=x('<label>Client ID</label> <input type="text"/>',1),X$=x("<label>Client secret</label> <!>",1),Q$=x('<div class="col-lg-12"><!></div>'),eI=x('<form autocomplete="off"><!> <!> <!></form>'),tI=x("<img/>"),nI=x('<i class="ri-puzzle-line txt-sm txt-hint"></i>'),iI=x('<figure class="provider-logo"><!></figure> <h4 class="center txt-break"> <small class="txt-hint"> </small></h4>',1),rI=x('<button type="button" class="btn btn-transparent btn-circle btn-hint btn-sm" aria-label="Remove provider"><i class="ri-delete-bin-7-line" aria-hidden="true"></i></button> <div class="flex-fill"></div>',1),aI=x('<!> <button type="button" class="btn btn-transparent">Cancel</button> <button type="submit" class="btn btn-expanded"><span class="txt">Set provider config</span></button>',1);function sI(n,e){Ue(e,!1);const t=P(),i=P(),a=qt(),s="provider_popup_"+R.randomString(5);let o=P(),l=P({}),c=P({}),u=P(!1),d=P(""),f=P(!1),h=P(0);function v(S,$,D){y(h,D||0),y(u,R.isEmpty($)),y(l,Object.assign({},S)),y(c,Object.assign({},$)),y(f,!!r(c).clientId),y(d,JSON.stringify(r(c))),r(o)?.show()}function _(){Zn(r(i)),r(o)?.hide()}async function b(){a("submit",{uiOptions:r(l),config:r(c)}),_()}async function m(){qn(`Do you really want to remove the "${r(l).title}" OAuth2 provider from the collection?`,()=>{a("remove",{uiOptions:r(l)}),_()})}ie(()=>(r(c),r(d)),()=>{y(t,JSON.stringify(r(c))!=r(d))}),ie(()=>r(h),()=>{y(i,"oauth2.providers."+r(h))}),dt();var k={show:v,hide:_};return Be(),pt(pn(n,{btnClose:!1,$$events:{show(S){lt.call(this,e,S)},hide(S){lt.call(this,e,S)}},children:(S,$)=>{var D=eI(),I=T(D);De(I,{class:"form-field required",get name(){return`${r(i)??""}.clientId`},children:Ee,$$slots:{default:(O,A)=>{const q=ne(()=>A.uniqueId);var L=G$(),j=F(L),U=g(j,2);V(()=>{H(j,"for",r(q)),H(U,"id",r(q))}),xt(U,()=>r(c).clientId,W=>ft(c,r(c).clientId=W)),p(O,L)}}});var C=g(I,2);De(C,{class:"form-field required",get name(){return`${r(i)??""}.clientSecret`},children:Ee,$$slots:{default:(O,A)=>{const q=ne(()=>A.uniqueId);var L=X$(),j=F(L),U=g(j,2);Md(U,{get id(){return r(q)},get mask(){return r(f)},set mask(W){y(f,W)},get value(){return r(c).clientSecret},set value(W){ft(c,r(c).clientSecret=W)},$$legacy:!0}),V(()=>H(j,"for",r(q))),p(O,L)}}});var w=g(C,2);{var E=O=>{var A=Q$(),q=T(A);yi(q,()=>r(l).optionsComponent,(L,j)=>{j(L,tn({get key(){return r(i)}},()=>r(l).optionsComponentProps||{},{get config(){return r(c)},set config(U){y(c,U)},$$legacy:!0}))}),p(O,A)};G(w,O=>{r(l),M(()=>r(l).optionsComponent)&&O(E)})}V(()=>H(D,"id",s)),re("submit",D,Ct(()=>b())),p(S,D)},$$slots:{default:!0,header:(S,$)=>{var D=iI(),I=F(D),C=T(I);{var w=j=>{var U=tI();V(()=>{H(U,"src",`${M(()=>"./")??""}images/oauth2/${r(l),M(()=>r(l).logo)??""}`),H(U,"alt",`${r(l),M(()=>r(l).title)??""} logo`)}),p(j,U)},E=j=>{var U=nI();p(j,U)};G(C,j=>{r(l),M(()=>r(l).logo)?j(w):j(E,!1)})}var O=g(I,2),A=T(O),q=g(A),L=T(q);V(()=>{$e(A,`${r(l),M(()=>r(l).title)??""} `),$e(L,`(${r(l),M(()=>r(l).key)??""})`)}),p(S,D)},footer:(S,$)=>{var D=aI(),I=F(D);{var C=O=>{var A=rI(),q=F(A);Ge(q,(L,j)=>ht?.(L,j),()=>({text:"Remove provider",position:"right"})),Nt(()=>re("click",q,m)),p(O,A)};G(I,O=>{r(u)||O(C)})}var w=g(I,2),E=g(w,2);V(()=>{H(E,"form",s),E.disabled=!r(t)}),re("click",w,_),p(S,D)}},$$legacy:!0}),S=>y(o,S),()=>r(o)),_t(e,"show",v),_t(e,"hide",_),Ve(k)}var oI=x('<label>Client ID</label> <input type="text" required/>',1),lI=x('<label>Team ID</label> <input type="text" required/>',1),cI=x('<label>Key ID</label> <input type="text" required/>',1),uI=x('<label><span class="txt">Duration (in seconds)</span> <i class="ri-information-line link-hint"></i></label> <input type="number" required/>',1),dI=x('<label>Private key</label> <textarea required rows="8"></textarea> <div class="help-block">The key is not stored on the server and it is used only for generating the signed JWT.</div>',1),fI=x('<form autocomplete="off"><div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <!></div></form>'),hI=x('<h4 class="center txt-break">Generate Apple client secret</h4>'),vI=x('<button type="button" class="btn btn-transparent">Close</button> <button type="submit"><i class="ri-key-line"></i> <span class="txt">Generate and set secret</span></button>',1);function pI(n,e){Ue(e,!1);const t=P(),i=qt(),a="apple_secret_"+R.randomString(5),s=15777e3;let o=P(),l=P(),c=P(),u=P(),d=P(),f=P(),h=P(!1);function v(k={}){y(l,k.clientId||""),y(c,k.teamId||""),y(u,k.keyId||""),y(d,k.privateKey||""),y(f,k.duration||s),nn({}),r(o)?.show()}function _(){return r(o)?.hide()}async function b(){y(h,!0);try{const k=await Ae.settings.generateAppleClientSecret(r(l),r(c),r(u),r(d).trim(),r(f));y(h,!1),hn("Successfully generated client secret."),i("submit",k),r(o)?.hide()}catch(k){Ae.error(k)}y(h,!1)}ie(()=>{},()=>{y(t,!0)}),dt();var m={show:v,hide:_};Be();{let k=ne(()=>!r(h)),S=ne(()=>!r(h));pt(pn(n,{get overlayClose(){return r(k)},get escClose(){return r(S)},beforeHide:()=>!r(h),popup:!0,$$events:{show($){lt.call(this,e,$)},hide($){lt.call(this,e,$)}},children:($,D)=>{var I=fI(),C=T(I),w=T(C),E=T(w);De(E,{class:"form-field required",name:"clientId",children:Ee,$$slots:{default:(Y,J)=>{const z=ne(()=>J.uniqueId);var X=oI(),oe=F(X),ce=g(oe,2);V(()=>{H(oe,"for",r(z)),H(ce,"id",r(z))}),xt(ce,()=>r(l),le=>y(l,le)),p(Y,X)}}});var O=g(w,2),A=T(O);De(A,{class:"form-field required",name:"teamId",children:Ee,$$slots:{default:(Y,J)=>{const z=ne(()=>J.uniqueId);var X=lI(),oe=F(X),ce=g(oe,2);V(()=>{H(oe,"for",r(z)),H(ce,"id",r(z))}),xt(ce,()=>r(c),le=>y(c,le)),p(Y,X)}}});var q=g(O,2),L=T(q);De(L,{class:"form-field required",name:"keyId",children:Ee,$$slots:{default:(Y,J)=>{const z=ne(()=>J.uniqueId);var X=cI(),oe=F(X),ce=g(oe,2);V(()=>{H(oe,"for",r(z)),H(ce,"id",r(z))}),xt(ce,()=>r(u),le=>y(u,le)),p(Y,X)}}});var j=g(q,2),U=T(j);De(U,{class:"form-field required",name:"duration",children:Ee,$$slots:{default:(Y,J)=>{const z=ne(()=>J.uniqueId);var X=uI(),oe=F(X),ce=g(T(oe),2);Ge(ce,(me,_e)=>ht?.(me,_e),()=>({text:`Max ${s} seconds (~${s/(3600*24*30)<<0} months).`,position:"top"}));var le=g(oe,2);H(le,"max",s),V(()=>{H(oe,"for",r(z)),H(le,"id",r(z))}),xt(le,()=>r(f),me=>y(f,me)),p(Y,X)}}});var W=g(j,2);De(W,{class:"form-field required",name:"privateKey",children:Ee,$$slots:{default:(Y,J)=>{const z=ne(()=>J.uniqueId);var X=dI(),oe=F(X),ce=g(oe,2);H(ce,"placeholder",`-----BEGIN PRIVATE KEY-----
...
-----END PRIVATE KEY-----`),V(()=>{H(oe,"for",r(z)),H(ce,"id",r(z))}),xt(ce,()=>r(d),le=>y(d,le)),p(Y,X)}}}),V(()=>H(I,"id",a)),re("submit",I,Ct(()=>b())),p($,I)},$$slots:{default:!0,header:($,D)=>{var I=hI();p($,I)},footer:($,D)=>{var I=vI(),C=F(I),w=g(C,2);let E;V(()=>{C.disabled=r(h),H(w,"form",a),E=Re(w,1,"btn btn-expanded",null,E,{"btn-loading":r(h)}),w.disabled=!r(t)||r(h)}),re("click",C,_),p($,I)}},$$legacy:!0}),$=>y(o,$),()=>r(o))}return _t(e,"show",v),_t(e,"hide",_),Ve(m)}var mI=x('<button type="button"><i class="ri-key-line"></i> <span class="txt">Generate secret</span></button> <!>',1);function gI(n,e){Ue(e,!1);let t=te(e,"key",8,""),i=te(e,"config",28,()=>({})),a=P();Be();var s=mI(),o=F(s),l=g(o,2);pt(pI(l,{$$events:{submit:c=>{i(i().clientSecret=c.detail?.secret||"",!0)}},$$legacy:!0}),c=>y(a,c),()=>r(a)),V(()=>Re(o,1,`btn btn-sm btn-secondary btn-provider-${t()??""}`)),re("click",o,()=>r(a)?.show({clientId:i().clientId})),p(n,s),Ve()}var bI=x("<i></i>"),yI=x('<!> <span class="txt"> </span>',1);function wv(n,e){Ue(e,!1);let t=te(e,"item",24,()=>({}));Be();var i=yI(),a=F(i);{var s=c=>{var u=bI();V(()=>Re(u,1,`icon ${N(t()),M(()=>t().icon)??""}`)),p(c,u)};G(a,c=>{N(t()),M(()=>t().icon)&&c(s)})}var o=g(a,2),l=T(o);V(()=>$e(l,(N(t()),M(()=>t().label||t().name||t().title||t().id||t().value)))),p(n,i),Ve()}function On(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["items","multiple","selected","labelComponent","optionComponent","selectionKey","keyOfSelected"]);Ue(e,!1);let a=te(e,"items",24,()=>[]),s=te(e,"multiple",8,!1),o=te(e,"selected",28,()=>s()?[]:void 0),l=te(e,"labelComponent",8,wv),c=te(e,"optionComponent",8,wv),u=te(e,"selectionKey",8,"value"),d=te(e,"keyOfSelected",28,()=>s()?[]:void 0),f=JSON.stringify(d());function h(_){_=R.toArray(_,!0);let b=[];for(let m of _){const k=R.findByKey(a(),u(),m);k&&b.push(k)}_.length&&!b.length||o(s()?b:b[0])}async function v(_){if(!a().length)return;let b=R.toArray(_,!0).map(k=>k[u()]),m=s()?b:b[0];JSON.stringify(m)!=f&&(d(m),f=JSON.stringify(d()))}ie(()=>(N(a()),N(d())),()=>{a()&&h(d())}),ie(()=>N(o()),()=>{v(o())}),dt(),Be(),Za(n,tn({get items(){return a()},get multiple(){return s()},get labelComponent(){return l()},get optionComponent(){return c()}},()=>i,{get selected(){return o()},set selected(_){o(_)},$$events:{show(_){lt.call(this,e,_)},hide(_){lt.call(this,e,_)},change(_){lt.call(this,e,_)}},$$slots:{afterOptions:(_,b)=>{var m=et(),k=F(m);Zt(k,e,"afterOptions",{},null),p(_,m)}},$$legacy:!0})),Ve()}var _I=x("<label>Site</label> <!>",1),xI=x(`<!> <div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content">Note that the Lark user's <strong>Union ID</strong> will be used for the association with the
        PocketBase user (see <a href="https://open.feishu.cn/document/platform-overveiw/basic-concepts/user-identity-introduction/introduction#3f2d4b63" target="_blank" rel="noopener noreferrer">Different Types of Lark IDs</a> ).</div></div>`,1);function wI(n,e){Ue(e,!1);let t=te(e,"config",28,()=>({}));const i="feishu.cn",a="larksuite.com",s=[{label:"Feishu (China)",value:i},{label:"Lark (International)",value:a}];let o=P(i);t().authURL?.includes(a)&&y(o,a),ie(()=>r(o),()=>{t(t().authURL=`https://accounts.${r(o)}/open-apis/authen/v1/authorize`,!0),t(t().tokenURL=`https://open.${r(o)}/open-apis/authen/v2/oauth/token`,!0),t(t().userInfoURL=`https://open.${r(o)}/open-apis/authen/v1/user_info`,!0)}),dt(),Be();var l=xI(),c=F(l);De(c,{class:"form-field",children:Ee,$$slots:{default:(u,d)=>{const f=ne(()=>d.uniqueId);var h=_I(),v=F(h),_=g(v,2);On(_,{get id(){return r(f)},get items(){return s},get keyOfSelected(){return r(o)},set keyOfSelected(b){y(o,b)},$$legacy:!0}),V(()=>H(v,"for",r(f))),p(u,h)}}}),p(n,l),Ve()}var kI=x('<label>Auth URL</label> <input type="url" required/> <div class="help-block"></div>',1),SI=x('<label>Token URL</label> <input type="url" required/> <div class="help-block"></div>',1),TI=x('<div class="section-title">Azure AD endpoints</div> <!> <!>',1);function $I(n,e){Ue(e,!1);let t=te(e,"key",8,""),i=te(e,"config",28,()=>({}));Be();var a=TI(),s=g(F(a),2);De(s,{class:"form-field required",get name(){return`${t()??""}.authURL`},children:Ee,$$slots:{default:(l,c)=>{const u=ne(()=>c.uniqueId);var d=kI(),f=F(d),h=g(f,2),v=g(h,2);v.textContent="Ex. https://login.microsoftonline.com/YOUR_DIRECTORY_TENANT_ID/oauth2/v2.0/authorize",V(()=>{H(f,"for",r(u)),H(h,"id",r(u))}),xt(h,()=>i().authURL,_=>i(i().authURL=_,!0)),p(l,d)}}});var o=g(s,2);De(o,{class:"form-field required",get name(){return`${t()??""}.tokenURL`},children:Ee,$$slots:{default:(l,c)=>{const u=ne(()=>c.uniqueId);var d=SI(),f=F(d),h=g(f,2),v=g(h,2);v.textContent="Ex. https://login.microsoftonline.com/YOUR_DIRECTORY_TENANT_ID/oauth2/v2.0/token",V(()=>{H(f,"for",r(u)),H(h,"id",r(u))}),xt(h,()=>i().tokenURL,_=>i(i().tokenURL=_,!0)),p(l,d)}}}),p(n,a),Ve()}var II=x("<input/>");function ho(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","separator","readonly","disabled"]);Ue(e,!1);const a=P();let s=te(e,"value",28,()=>[]),o=te(e,"separator",8,","),l=te(e,"readonly",8,null),c=te(e,"disabled",8,null);ie(()=>(N(s()),N(o())),()=>{y(a,R.joinNonEmpty(s(),o()+" "))}),dt(),Be();var u=II();ss(u,()=>({type:(N(i),M(()=>i.type||"text")),value:r(a),disabled:c(),readonly:l(),...i}),void 0,void 0,void 0,void 0,!0),re("input",u,d=>{s(R.splitNonEmpty(d.target.value,o()))}),p(n,u),Ve()}var CI=x('<label>Display name</label> <input type="text" required/>',1),EI=x('<label>Auth URL</label> <input type="url" required/>',1),OI=x('<label>Token URL</label> <input type="url" required/>',1),DI=x("<label>Fetch user info from</label> <!>",1),PI=x('<label>User info URL</label> <input type="url" required/>',1),MI=x('<div class="content"><!></div>'),AI=x('<label><span class="txt">JWKS verification URL</span> <i class="ri-information-line link-hint"></i></label> <input type="url"/>',1),LI=x('<label><span class="txt">Issuers</span> <i class="ri-information-line link-hint"></i></label> <!>',1),NI=x('<div class="content"><p class="txt-hint txt-sm m-b-xs"><em>Both fields are considered optional because the parsed <code>id_token</code> is a direct result of the trusted server code->token exchange response.</em></p> <!> <!></div>'),RI=x('<input type="checkbox"/> <label><span class="txt">Support PKCE</span> <i class="ri-information-line link-hint"></i></label>',1),FI=x('<!> <div class="section-title">Endpoints</div> <!> <!> <!> <div class="sub-panel m-b-base"><!></div> <!>',1);function Fc(n,e){Ue(e,!1);let t=te(e,"key",8,""),i=te(e,"config",28,()=>({}));const a=[{label:"User info URL",value:!0},{label:"ID Token",value:!1}];let s=P(!!i().userInfoURL);R.isEmpty(i().pkce)&&i(i().pkce=!0,!0),i().displayName||i(i().displayName="OIDC",!0),i().extra||(i(i().extra={},!0),y(s,!0));function o(){r(s)?i(i().extra={},!0):(i(i().userInfoURL="",!0),i(i().extra=i().extra||{},!0))}ie(()=>r(s),()=>{typeof r(s)!==void 0&&o()}),dt(),Be();var l=FI(),c=F(l);De(c,{class:"form-field required",get name(){return`${t()??""}.displayName`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=CI(),I=F(D),C=g(I,2);V(()=>{H(I,"for",r($)),H(C,"id",r($))}),xt(C,()=>i().displayName,w=>i(i().displayName=w,!0)),p(k,D)}}});var u=g(c,4);De(u,{class:"form-field required",get name(){return`${t()??""}.authURL`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=EI(),I=F(D),C=g(I,2);V(()=>{H(I,"for",r($)),H(C,"id",r($))}),xt(C,()=>i().authURL,w=>i(i().authURL=w,!0)),p(k,D)}}});var d=g(u,2);De(d,{class:"form-field required",get name(){return`${t()??""}.tokenURL`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=OI(),I=F(D),C=g(I,2);V(()=>{H(I,"for",r($)),H(C,"id",r($))}),xt(C,()=>i().tokenURL,w=>i(i().tokenURL=w,!0)),p(k,D)}}});var f=g(d,2);De(f,{class:"form-field m-b-xs",children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=DI(),I=F(D),C=g(I,2);On(C,{get id(){return r($)},get items(){return a},get keyOfSelected(){return r(s)},set keyOfSelected(w){y(s,w)},$$legacy:!0}),V(()=>H(I,"for",r($))),p(k,D)}}});var h=g(f,2),v=T(h);{var _=k=>{var S=MI(),$=T(S);De($,{class:"form-field required",get name(){return`${t()??""}.userInfoURL`},children:Ee,$$slots:{default:(D,I)=>{const C=ne(()=>I.uniqueId);var w=PI(),E=F(w),O=g(E,2);V(()=>{H(E,"for",r(C)),H(O,"id",r(C))}),xt(O,()=>i().userInfoURL,A=>i(i().userInfoURL=A,!0)),p(D,w)}}}),Et(3,S,()=>vn,()=>({delay:10,duration:150})),p(k,S)},b=k=>{var S=NI(),$=g(T(S),2);De($,{class:"form-field m-b-xs",get name(){return`${t()??""}.extra.jwksURL`},children:Ee,$$slots:{default:(I,C)=>{const w=ne(()=>C.uniqueId);var E=AI(),O=F(E),A=g(T(O),2);Ge(A,(L,j)=>ht?.(L,j),()=>({text:"URL to the public token verification keys.",position:"top"}));var q=g(O,2);V(()=>{H(O,"for",r(w)),H(q,"id",r(w))}),xt(q,()=>i().extra.jwksURL,L=>i(i().extra.jwksURL=L,!0)),p(I,E)}}});var D=g($,2);De(D,{class:"form-field",get name(){return`${t()??""}.extra.issuers`},children:Ee,$$slots:{default:(I,C)=>{const w=ne(()=>C.uniqueId);var E=LI(),O=F(E),A=g(T(O),2);Ge(A,(L,j)=>ht?.(L,j),()=>({text:"Comma separated list of accepted values for the iss token claim validation.",position:"top"}));var q=g(O,2);ho(q,{get id(){return r(w)},get value(){return i().extra.issuers},set value(L){i(i().extra.issuers=L,!0)},$$legacy:!0}),V(()=>H(O,"for",r(w))),p(I,E)}}}),Et(3,S,()=>vn,()=>({delay:10,duration:150})),p(k,S)};G(v,k=>{r(s)?k(_):k(b,!1)})}var m=g(h,2);De(m,{class:"form-field",get name(){return`${t()??""}.pkce`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=RI(),I=F(D),C=g(I,2),w=g(T(C),2);Ge(w,(E,O)=>ht?.(E,O),()=>({text:"Usually it should be safe to be always enabled as most providers will just ignore the extra query parameters if they don't support PKCE.",position:"right"})),V(()=>{H(I,"id",r($)),H(C,"for",r($))}),Xt(I,()=>i().pkce,E=>i(i().pkce=E,!0)),p(k,D)}}}),p(n,l),Ve()}var qI=x('<label>Auth URL</label> <input type="url"/>',1),zI=x('<label>Token URL</label> <input type="url"/>',1),jI=x('<label>User info URL</label> <input type="url"/>',1),UI=x('<div class="section-title"> </div> <!> <!> <!>',1);function qc(n,e){Ue(e,!1);const t=P();let i=te(e,"key",8,""),a=te(e,"config",28,()=>({})),s=te(e,"required",8,!1),o=te(e,"title",8,"Provider endpoints");ie(()=>(N(s()),N(a())),()=>{y(t,s()&&a()?.enabled)}),dt(),Be();var l=UI(),c=F(l),u=T(c),d=g(c,2);{let v=ne(()=>r(t)?"required":"");De(d,{get class(){return`form-field ${r(v)??""}`},get name(){return`${i()??""}.authURL`},children:Ee,$$slots:{default:(_,b)=>{const m=ne(()=>b.uniqueId);var k=qI(),S=F(k),$=g(S,2);V(()=>{H(S,"for",r(m)),H($,"id",r(m)),$.required=r(t)}),xt($,()=>a().authURL,D=>a(a().authURL=D,!0)),p(_,k)}}})}var f=g(d,2);{let v=ne(()=>r(t)?"required":"");De(f,{get class(){return`form-field ${r(v)??""}`},get name(){return`${i()??""}.tokenURL`},children:Ee,$$slots:{default:(_,b)=>{const m=ne(()=>b.uniqueId);var k=zI(),S=F(k),$=g(S,2);V(()=>{H(S,"for",r(m)),H($,"id",r(m)),$.required=r(t)}),xt($,()=>a().tokenURL,D=>a(a().tokenURL=D,!0)),p(_,k)}}})}var h=g(f,2);{let v=ne(()=>r(t)?"required":"");De(h,{get class(){return`form-field ${r(v)??""}`},get name(){return`${i()??""}.userInfoURL`},children:Ee,$$slots:{default:(_,b)=>{const m=ne(()=>b.uniqueId);var k=jI(),S=F(k),$=g(S,2);V(()=>{H(S,"for",r(m)),H($,"id",r(m)),$.required=r(t)}),xt($,()=>a().userInfoURL,D=>a(a().userInfoURL=D,!0)),p(_,k)}}})}V(()=>$e(u,o())),p(n,l),Ve()}const Ad=[{key:"apple",title:"Apple",logo:"apple.svg",optionsComponent:gI},{key:"google",title:"Google",logo:"google.svg"},{key:"microsoft",title:"Microsoft",logo:"microsoft.svg",optionsComponent:$I},{key:"yandex",title:"Yandex",logo:"yandex.svg"},{key:"facebook",title:"Facebook",logo:"facebook.svg"},{key:"instagram2",title:"Instagram",logo:"instagram.svg"},{key:"github",title:"GitHub",logo:"github.svg"},{key:"gitlab",title:"GitLab",logo:"gitlab.svg",optionsComponent:qc,optionsComponentProps:{title:"Self-hosted endpoints (optional)"}},{key:"bitbucket",title:"Bitbucket",logo:"bitbucket.svg"},{key:"gitee",title:"Gitee",logo:"gitee.svg"},{key:"gitea",title:"Gitea",logo:"gitea.svg",optionsComponent:qc,optionsComponentProps:{title:"Self-hosted endpoints (optional)"}},{key:"discord",title:"Discord",logo:"discord.svg"},{key:"twitter",title:"X/Twitter",logo:"twitter.svg"},{key:"kakao",title:"Kakao",logo:"kakao.svg"},{key:"vk",title:"VK",logo:"vk.svg"},{key:"linear",title:"Linear",logo:"linear.svg"},{key:"notion",title:"Notion",logo:"notion.svg"},{key:"monday",title:"monday.com",logo:"monday.svg"},{key:"lark",title:"Lark",logo:"lark.svg",optionsComponent:wI},{key:"box",title:"Box",logo:"box.svg"},{key:"spotify",title:"Spotify",logo:"spotify.svg"},{key:"trakt",title:"Trakt",logo:"trakt.svg"},{key:"twitch",title:"Twitch",logo:"twitch.svg"},{key:"patreon",title:"Patreon (v2)",logo:"patreon.svg"},{key:"strava",title:"Strava",logo:"strava.svg"},{key:"wakatime",title:"WakaTime",logo:"wakatime.svg"},{key:"livechat",title:"LiveChat",logo:"livechat.svg"},{key:"mailcow",title:"mailcow",logo:"mailcow.svg",optionsComponent:qc,optionsComponentProps:{required:!0}},{key:"planningcenter",title:"Planning Center",logo:"planningcenter.svg"},{key:"oidc",title:"OpenID Connect",logo:"oidc.svg",optionsComponent:Fc},{key:"oidc2",title:"(2) OpenID Connect",logo:"oidc.svg",optionsComponent:Fc},{key:"oidc3",title:"(3) OpenID Connect",logo:"oidc.svg",optionsComponent:Fc}];var VI=x('<button type="button" class="btn btn-transparent btn-sm btn-hint p-l-xs p-r-xs m-l-10"><span class="txt">Clear</span></button>'),BI=x('<label class="m-l-10 txt-xl"><i class="ri-search-line"></i></label> <input type="text" placeholder="Search provider"/> <!>',1),HI=x("<img/>"),WI=x('<div class="col-6"><button type="button" class="provider-card handle"><figure class="provider-logo"><!></figure> <div class="content"><div class="title"> </div> <em class="txt-hint txt-sm m-r-auto"> </em></div></button></div>'),YI=x('<button type="button" class="btn btn-sm btn-secondary">Clear filter</button>'),KI=x('<div class="flex inline-flex"><span class="txt-hint">No providers to select.</span> <!></div>'),JI=x('<!> <div class="grid grid-sm"></div>',1),ZI=x('<h4 class="center txt-break">Add OAuth2 provider</h4>'),GI=x('<button type="button" class="btn btn-transparent">Cancel</button>');function XI(n,e){Ue(e,!1);const t=qt();let i=te(e,"disabled",24,()=>[]),a=P(),s=P(""),o=P([]);function l(){f(),r(a)?.show()}function c(){return r(a)?.hide()}function u(v){t("select",v),c()}function d(){const v=(r(s)||"").toLowerCase();return Ad.filter(_=>!i().includes(_.key)&&(v==""||_.key.toLowerCase().includes(v)||_.title.toLowerCase().includes(v)))}function f(){y(s,"")}ie(()=>(r(s),N(i())),()=>{(r(s)!==-1||i()!==-1)&&y(o,d())}),dt();var h={show:l,hide:c};return Be(),pt(pn(n,{btnClose:!1,$$events:{show(v){lt.call(this,e,v)},hide(v){lt.call(this,e,v)}},children:(v,_)=>{var b=JI(),m=F(b);De(m,{class:"searchbar m-b-sm",children:Ee,$$slots:{default:(S,$)=>{const D=ne(()=>$.uniqueId);var I=BI(),C=F(I),w=g(C,2),E=g(w,2);{var O=A=>{var q=VI();Et(3,q,()=>Xr,()=>({duration:150,x:5})),re("click",q,()=>y(s,"")),p(A,q)};G(E,A=>{r(s)!=""&&A(O)})}V(()=>{H(C,"for",r(D)),H(w,"id",r(D))}),xt(w,()=>r(s),A=>y(s,A)),p(S,I)}}});var k=g(m,2);bt(k,5,()=>r(o),S=>S.key,(S,$)=>{var D=WI(),I=T(D),C=T(I),w=T(C);{var E=U=>{var W=HI();V(()=>{H(W,"src",`${M(()=>"./")??""}images/oauth2/${r($),M(()=>r($).logo)??""}`),H(W,"alt",`${r($),M(()=>r($).title)??""} logo`)}),p(U,W)};G(w,U=>{r($),M(()=>r($).logo)&&U(E)})}var O=g(C,2),A=T(O),q=T(A),L=g(A,2),j=T(L);V(()=>{$e(q,(r($),M(()=>r($).title))),$e(j,(r($),M(()=>r($).key)))}),re("click",I,()=>u(r($))),p(S,D)},S=>{var $=KI(),D=g(T($),2);{var I=C=>{var w=YI();re("click",w,f),p(C,w)};G(D,C=>{r(s)!=""&&C(I)})}p(S,$)}),p(v,b)},$$slots:{default:!0,header:(v,_)=>{var b=ZI();p(v,b)},footer:(v,_)=>{var b=GI();re("click",b,c),p(v,b)}},$$legacy:!0}),v=>y(a,v),()=>r(a)),_t(e,"show",l),_t(e,"hide",c),Ve(h)}var QI=x('<input type="checkbox"/> <label>Enable</label>',1),eC=x("<img/>"),tC=x('<i class="ri-puzzle-line txt-sm txt-hint"></i>'),nC=x('<button type="button" class="btn btn-circle btn-hint btn-transparent" aria-label="Provider settings"><i class="ri-settings-4-line"></i></button>'),iC=x('<div class="col-lg-6"><div><figure class="provider-logo"><!></figure> <div class="content"><div class="title"> </div> <em class="txt-hint txt-sm m-r-auto"> </em></div> <!></div></div>'),rC=x('<i class="ri-arrow-up-s-line txt-sm"></i>'),aC=x('<i class="ri-arrow-down-s-line txt-sm"></i>'),sC=x("<label>OAuth2 full name</label> <!>",1),oC=x("<label>OAuth2 avatar</label> <!>",1),lC=x("<label>OAuth2 id</label> <!>",1),cC=x("<label>OAuth2 username</label> <!>",1),uC=x('<div class="block"><div class="grid grid-sm p-t-xs"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div></div>'),dC=x('<!> <div class="grid grid-sm"><!> <div class="col-lg-6"><button class="btn btn-block btn-lg btn-secondary txt-base"><i class="ri-add-line"></i> <span class="txt">Add provider</span></button></div></div> <button type="button"><strong class="txt"> </strong> <!></button> <!>',1),fC=x('<span> </span> <span class="label label-success">Enabled</span>',1),hC=x('<span class="label">Disabled</span>'),vC=x('<i class="ri-error-warning-fill txt-danger"></i>'),pC=x('<div class="inline-flex"><i class="ri-pass-expired-line"></i> <span class="txt">OAuth2</span></div> <div class="flex-fill"></div> <!> <!>',1),mC=x("<!> <!> <!>",1);function gC(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At(),s=P(),o=P();let l=te(e,"collection",12);const c=["id","email","emailVisibility","verified","tokenKey","password"],u=["text","editor","url","email","json"],d=u.concat("file");let f=P(),h=P(),v=P(!1),_=P([]),b=P([]);function m(C=[]){y(_,C?.filter(w=>u.includes(w.type)&&!c.includes(w.name))?.map(w=>w.name)||[]),y(b,C?.filter(w=>d.includes(w.type)&&!c.includes(w.name))?.map(w=>w.name)||[])}function k(C){for(let w of Ad)if(w.key==C)return w;return null}ie(()=>N(l()),()=>{m(l().fields)}),ie(()=>N(l()),()=>{R.isEmpty(l().oauth2)&&l(l().oauth2={enabled:!1,mappedFields:{},providers:[]},!0)}),ie(()=>t(),()=>{y(s,!R.isEmpty(t()?.oauth2))}),ie(()=>N(l()),()=>{y(o,l().oauth2?.providers?.length||0)}),dt(),Be();var S=mC(),$=F(S);Pr($,{single:!0,children:(C,w)=>{var E=dC(),O=F(E);De(O,{class:"form-field form-field-toggle",name:"oauth2.enabled",children:Ee,$$slots:{default:(le,me)=>{const _e=ne(()=>me.uniqueId);var pe=QI(),Te=F(pe),Se=g(Te,2);V(()=>{H(Te,"id",r(_e)),H(Se,"for",r(_e))}),Xt(Te,()=>l().oauth2.enabled,he=>l(l().oauth2.enabled=he,!0)),p(le,pe)}}});var A=g(O,2),q=T(A);bt(q,3,()=>(N(l()),M(()=>l().oauth2.providers)),le=>le.name,(le,me,_e)=>{const pe=ne(()=>(r(me),M(()=>k(r(me).name))));var Te=iC(),Se=T(Te);let he;var ue=T(Se),ke=T(ue);{var we=ze=>{var qe=eC();V(()=>{H(qe,"src",`${M(()=>"./")??""}images/oauth2/${N(r(pe)),M(()=>r(pe).logo)??""}`),H(qe,"alt",`${N(r(pe)),M(()=>r(pe).title)??""} logo`)}),p(ze,qe)},ae=ze=>{var qe=tC();p(ze,qe)};G(ke,ze=>{N(r(pe)),M(()=>r(pe)?.logo)?ze(we):ze(ae,!1)})}var xe=g(ue,2),se=T(xe),ge=T(se),ee=g(se,2),ve=T(ee),Ce=g(xe,2);{var Ie=ze=>{var qe=nC();Ge(qe,(je,rt)=>ht?.(je,rt),()=>({text:"Edit config",position:"left"})),Nt(()=>re("click",qe,()=>{r(h)?.show(r(pe),r(me),r(_e))})),p(ze,qe)};G(Ce,ze=>{r(pe)&&ze(Ie)})}V(ze=>{he=Re(Se,1,"provider-card",null,he,ze),$e(ge,(r(me),N(r(pe)),M(()=>r(me).displayName||r(pe)?.title||"Custom"))),$e(ve,(r(me),M(()=>r(me).name)))},[()=>({error:!R.isEmpty(t()?.oauth2?.providers?.[r(_e)])})]),p(le,Te)});var L=g(q,2),j=T(L),U=g(A,2),W=T(U),Y=T(W),J=g(W,2);{var z=le=>{var me=rC();p(le,me)},X=le=>{var me=aC();p(le,me)};G(J,le=>{r(v)?le(z):le(X,!1)})}var oe=g(U,2);{var ce=le=>{var me=uC(),_e=T(me),pe=T(_e),Te=T(pe);De(Te,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.name",children:Ee,$$slots:{default:(xe,se)=>{const ge=ne(()=>se.uniqueId);var ee=sC(),ve=F(ee),Ce=g(ve,2);Za(Ce,{get id(){return r(ge)},get items(){return r(_)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.name},set selected(Ie){l(l().oauth2.mappedFields.name=Ie,!0)},$$legacy:!0}),V(()=>H(ve,"for",r(ge))),p(xe,ee)}}});var Se=g(pe,2),he=T(Se);De(he,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.avatarURL",children:Ee,$$slots:{default:(xe,se)=>{const ge=ne(()=>se.uniqueId);var ee=oC(),ve=F(ee),Ce=g(ve,2);Za(Ce,{get id(){return r(ge)},get items(){return r(b)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.avatarURL},set selected(Ie){l(l().oauth2.mappedFields.avatarURL=Ie,!0)},$$legacy:!0}),V(()=>H(ve,"for",r(ge))),p(xe,ee)}}});var ue=g(Se,2),ke=T(ue);De(ke,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.id",children:Ee,$$slots:{default:(xe,se)=>{const ge=ne(()=>se.uniqueId);var ee=lC(),ve=F(ee),Ce=g(ve,2);Za(Ce,{get id(){return r(ge)},get items(){return r(_)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.id},set selected(Ie){l(l().oauth2.mappedFields.id=Ie,!0)},$$legacy:!0}),V(()=>H(ve,"for",r(ge))),p(xe,ee)}}});var we=g(ue,2),ae=T(we);De(ae,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.username",children:Ee,$$slots:{default:(xe,se)=>{const ge=ne(()=>se.uniqueId);var ee=cC(),ve=F(ee),Ce=g(ve,2);Za(Ce,{get id(){return r(ge)},get items(){return r(_)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.username},set selected(Ie){l(l().oauth2.mappedFields.username=Ie,!0)},$$legacy:!0}),V(()=>H(ve,"for",r(ge))),p(xe,ee)}}}),Et(3,me,()=>vn,()=>({duration:150})),p(le,me)};G(oe,le=>{r(v)&&le(ce)})}V(()=>{Re(U,1,`m-t-25 btn btn-sm ${r(v)?"btn-secondary":"btn-hint btn-transparent"}`),$e(Y,`Optional ${N(l()),M(()=>l().name)??""} create fields map`)}),re("click",j,()=>r(f)?.show()),re("click",U,()=>y(v,!r(v))),p(C,E)},$$slots:{default:!0,header:(C,w)=>{var E=pC(),O=g(F(E),4);{var A=U=>{var W=fC(),Y=F(W);let J;var z=T(Y);V(()=>{J=Re(Y,1,"label",null,J,{"label-warning":!r(o),"label-info":r(o)>0}),$e(z,`${r(o)??""}
                ${r(o)==1?"provider":"providers"}`)}),p(U,W)},q=U=>{var W=hC();p(U,W)};G(O,U=>{N(l()),M(()=>l().oauth2.enabled)?U(A):U(q,!1)})}var L=g(O,2);{var j=U=>{var W=vC();Ge(W,(Y,J)=>ht?.(Y,J),()=>({text:"Has errors",position:"left"})),Et(3,W,()=>jn,()=>({duration:150,start:.7})),p(U,W)};G(L,U=>{r(s)&&U(j)})}p(C,E)}}});var D=g($,2);{let C=ne(()=>(N(l()),M(()=>l().oauth2?.providers?.map(w=>w.name)||[])));pt(XI(D,{get disabled(){return r(C)},$$events:{select:w=>{r(h).show(w.detail,{},l().oauth2?.providers?.length||0)}},$$legacy:!0}),w=>y(f,w),()=>r(f))}var I=g(D,2);pt(sI(I,{$$events:{remove:C=>{const w=C.detail.uiOptions;R.removeByKey(l().oauth2.providers,"name",w.key),l(l().oauth2.providers=l().oauth2.providers,!0)},submit:C=>{const w=C.detail.uiOptions,E=C.detail.config;l(l().oauth2.providers=l().oauth2.providers||[],!0),R.pushOrReplaceByKey(l().oauth2.providers,Object.assign({name:w.key},E),"name"),l(l().oauth2.providers=l().oauth2.providers,!0)}},$$legacy:!0}),C=>y(h,C),()=>r(h)),p(n,S),Ve(),a()}var bC=x('<i class="ri-information-line link-hint"></i>'),yC=x('<input type="checkbox"/> <label>Enable</label> <!>',1),_C=x('<label>Duration (in seconds)</label> <input type="number" min="0" step="1" required/>',1),xC=x('<label>Generated password length</label> <input type="number" min="0" step="1" required/>',1),wC=x('<!> <div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>',1),kC=x('<span class="label label-success">Enabled</span>'),SC=x('<span class="label">Disabled</span>'),TC=x('<i class="ri-error-warning-fill txt-danger"></i>'),$C=x('<div class="inline-flex"><i class="ri-time-line"></i> <span class="txt">One-time password (OTP)</span></div> <div class="flex-fill"></div> <!> <!>',1);function IC(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At(),s=P(),o=P();let l=te(e,"collection",12);ie(()=>N(l()),()=>{y(s,l()?.system&&l()?.name==="_superusers")}),ie(()=>N(l()),()=>{R.isEmpty(l().otp)&&l(l().otp={enabled:!0,duration:300,length:8},!0)}),ie(()=>t(),()=>{y(o,!R.isEmpty(t()?.otp))}),dt(),Be(),Pr(n,{single:!0,children:(c,u)=>{var d=wC(),f=F(d);De(f,{class:"form-field form-field-toggle",name:"otp.enabled",children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=yC(),I=F(D),C=g(I,2),w=g(C,2);{var E=O=>{var A=bC();Ge(A,(q,L)=>ht?.(q,L),()=>({text:"Superusers can have OTP only as part of Two-factor authentication.",position:"right"})),p(O,A)};G(w,O=>{r(s)&&O(E)})}V(()=>{H(I,"id",r($)),H(C,"for",r($))}),Xt(I,()=>l().otp.enabled,O=>l(l().otp.enabled=O,!0)),re("change",I,O=>{r(s)&&l(l().mfa.enabled=O.target.checked,!0)}),p(k,D)}}});var h=g(f,2),v=T(h),_=T(v);De(_,{class:"form-field form-field-toggle required",name:"otp.duration",children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=_C(),I=F(D),C=g(I,2);V(()=>{H(I,"for",r($)),H(C,"id",r($))}),xt(C,()=>l().otp.duration,w=>l(l().otp.duration=w,!0)),p(k,D)}}});var b=g(v,2),m=T(b);De(m,{class:"form-field form-field-toggle required",name:"otp.length",children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=xC(),I=F(D),C=g(I,2);V(()=>{H(I,"for",r($)),H(C,"id",r($))}),xt(C,()=>l().otp.length,w=>l(l().otp.length=w,!0)),p(k,D)}}}),p(c,d)},$$slots:{default:!0,header:(c,u)=>{var d=$C(),f=g(F(d),4);{var h=m=>{var k=kC();p(m,k)},v=m=>{var k=SC();p(m,k)};G(f,m=>{N(l()),M(()=>l().otp.enabled)?m(h):m(v,!1)})}var _=g(f,2);{var b=m=>{var k=TC();Ge(k,(S,$)=>ht?.(S,$),()=>({text:"Has errors",position:"left"})),Et(3,k,()=>jn,()=>({duration:150,start:.7})),p(m,k)};G(_,m=>{r(o)&&m(b)})}p(c,d)}}}),Ve(),a()}var CC=x('<i class="ri-information-line link-hint"></i>'),EC=x('<input type="checkbox"/> <label>Enable</label> <!>',1),OC=x('<label><span class="txt">Unique identity fields</span></label> <!>',1),DC=x("<!> <!>",1),PC=x('<span class="label label-success">Enabled</span>'),MC=x('<span class="label">Disabled</span>'),AC=x('<i class="ri-error-warning-fill txt-danger"></i>'),LC=x('<div class="inline-flex"><i class="ri-lock-password-line"></i> <span class="txt">Identity/Password</span></div> <div class="flex-fill"></div> <!> <!>',1);function NC(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At(),s=P(),o=P();let l=te(e,"collection",12),c=P([]),u=P("");function d(){y(c,[{value:"email"}]);const f=l()?.fields||[],h=l()?.indexes||[];y(u,h.join(""));for(let v of h){const _=R.parseIndex(v);if(!_.unique||_.columns.length!=1||_.columns[0].name=="email")continue;const b=f.find(m=>!m.hidden&&m.name.toLowerCase()==_.columns[0].name.toLowerCase());b&&r(c).push({value:b.name})}}ie(()=>N(l()),()=>{y(s,l()?.system&&l()?.name==="_superusers")}),ie(()=>N(l()),()=>{R.isEmpty(l()?.passwordAuth)&&l(l().passwordAuth={enabled:!0,identityFields:["email"]},!0)}),ie(()=>t(),()=>{y(o,!R.isEmpty(t()?.passwordAuth))}),ie(()=>(N(l()),r(u)),()=>{l()&&r(u)!=l().indexes.join("")&&d()}),dt(),Be(),Pr(n,{single:!0,children:(f,h)=>{var v=DC(),_=F(v);De(_,{class:"form-field form-field-toggle",name:"passwordAuth.enabled",children:Ee,$$slots:{default:(m,k)=>{const S=ne(()=>k.uniqueId);var $=EC(),D=F($),I=g(D,2),C=g(I,2);{var w=E=>{var O=CC();Ge(O,(A,q)=>ht?.(A,q),()=>({text:"Superusers are required to have password auth enabled.",position:"right"})),p(E,O)};G(C,E=>{r(s)&&E(w)})}V(()=>{H(D,"id",r(S)),D.disabled=r(s),H(I,"for",r(S))}),Xt(D,()=>l().passwordAuth.enabled,E=>l(l().passwordAuth.enabled=E,!0)),p(m,$)}}});var b=g(_,2);De(b,{class:"form-field required m-0",name:"passwordAuth.identityFields",children:Ee,$$slots:{default:(m,k)=>{const S=ne(()=>k.uniqueId);var $=OC(),D=F($),I=g(D,2);On(I,{get items(){return r(c)},multiple:!0,get keyOfSelected(){return l().passwordAuth.identityFields},set keyOfSelected(C){l(l().passwordAuth.identityFields=C,!0)},$$legacy:!0}),V(()=>H(D,"for",r(S))),p(m,$)}}}),p(f,v)},$$slots:{default:!0,header:(f,h)=>{var v=LC(),_=g(F(v),4);{var b=$=>{var D=PC();p($,D)},m=$=>{var D=MC();p($,D)};G(_,$=>{N(l()),M(()=>l().passwordAuth.enabled)?$(b):$(m,!1)})}var k=g(_,2);{var S=$=>{var D=AC();Ge(D,(I,C)=>ht?.(I,C),()=>({text:"Has errors",position:"left"})),Et(3,D,()=>jn,()=>({duration:150,start:.7})),p($,D)};G(k,$=>{r(o)&&$(S)})}p(f,v)}}}),Ve(),a()}var RC=x('<div class="form-field-block"><input type="radio" name="template"/> <label> </label></div>'),FC=x("<label>Auth collection</label> <!>",1),qC=x('<label>To email address</label> <input type="email" required/>',1),zC=x('<form autocomplete="off"><!> <!> <!></form>'),jC=x('<h4 class="center txt-break">Send test email</h4>'),UC=x('<button type="button" class="btn btn-transparent">Close</button> <button type="submit"><i class="ri-mail-send-line"></i> <span class="txt">Send</span></button>',1);function jg(n,e){Ue(e,!1);const t=P(),i=[],a=qt(),s="email_test_"+R.randomString(5),o="last_email_test",l="email_test_request",c=[{label:"Verification",value:"verification"},{label:"Password reset",value:"password-reset"},{label:"Confirm email change",value:"email-change"},{label:"OTP",value:"otp"},{label:"Login alert",value:"login-alert"}];let u=P(),d=P(""),f=P(localStorage.getItem(o)),h=P(c[0].value),v=P(!1),_=null,b=P([]),m=P(!1),k=P(!1);function S(w="",E="",O=""){nn({}),y(k,!1),y(d,w||""),r(d)||I(),y(f,E||localStorage.getItem(o)),y(h,O||c[0].value),r(u)?.show()}function $(){return clearTimeout(_),r(u)?.hide()}async function D(){if(!(!r(t)||r(v)||!r(d))){y(v,!0),localStorage?.setItem(o,r(f)),clearTimeout(_),_=setTimeout(()=>{Ae.cancelRequest(l),dr("Test email send timeout.")},3e4);try{await Ae.settings.testEmail(r(d),r(f),r(h),{$cancelKey:l}),hn("Successfully sent test email."),a("submit"),y(v,!1),await Tn(),$()}catch(w){y(v,!1),Ae.error(w)}clearTimeout(_)}}async function I(){y(k,!0),y(m,!0);try{y(b,await Ae.collections.getFullList({filter:"type='auth'",sort:"+name",requestKey:s+"_collections_loading"})),y(d,r(b)[0]?.id||""),y(m,!1)}catch(w){w.isAbort||(y(m,!1),Ae.error(w))}}ie(()=>(r(f),r(h),r(d)),()=>{y(t,!!r(f)&&!!r(h)&&!!r(d))}),dt();var C={show:S,hide:$};Be();{let w=ne(()=>!r(v)),E=ne(()=>!r(v));pt(pn(n,{class:"overlay-panel-sm email-test-popup",get overlayClose(){return r(w)},get escClose(){return r(E)},beforeHide:()=>!r(v),popup:!0,$$events:{show(O){lt.call(this,e,O)},hide(O){lt.call(this,e,O)}},children:(O,A)=>{var q=zC(),L=T(q);De(L,{class:"form-field required",name:"template",children:Ee,$$slots:{default:(Y,J)=>{const z=ne(()=>J.uniqueId);var X=et(),oe=F(X);bt(oe,1,()=>c,ce=>ce.value,(ce,le)=>{var me=RC(),_e=T(me),pe,Te=g(_e,2),Se=T(Te);V(()=>{H(_e,"id",(N(r(z)),r(le),M(()=>r(z)+r(le).value))),pe!==(pe=(r(le),M(()=>r(le).value)))&&(_e.value=(_e.__value=(r(le),M(()=>r(le).value)))??""),H(Te,"for",(N(r(z)),r(le),M(()=>r(z)+r(le).value))),$e(Se,(r(le),M(()=>r(le).label)))}),Py(i,[],_e,()=>(r(le),M(()=>r(le).value),r(h)),he=>y(h,he)),p(ce,me)}),p(Y,X)}}});var j=g(L,2);{var U=Y=>{De(Y,{class:"form-field required",name:"collection",children:Ee,$$slots:{default:(J,z)=>{const X=ne(()=>z.uniqueId);var oe=FC(),ce=F(oe),le=g(ce,2);{let me=ne(()=>r(m)?"Loading auth collections...":"Select auth collection");On(le,{get id(){return r(X)},get selectPlaceholder(){return r(me)},noOptionsText:"No auth collections found",selectionKey:"id",get items(){return r(b)},get keyOfSelected(){return r(d)},set keyOfSelected(_e){y(d,_e)},$$legacy:!0})}V(()=>H(ce,"for",r(X))),p(J,oe)}}})};G(j,Y=>{r(k)&&Y(U)})}var W=g(j,2);De(W,{class:"form-field required m-0",name:"email",children:Ee,$$slots:{default:(Y,J)=>{const z=ne(()=>J.uniqueId);var X=qC(),oe=F(X),ce=g(oe,2);Wi(ce,!0),V(()=>{H(oe,"for",r(z)),H(ce,"id",r(z))}),xt(ce,()=>r(f),le=>y(f,le)),p(Y,X)}}}),V(()=>H(q,"id",s)),re("submit",q,Ct(()=>D())),p(O,q)},$$slots:{default:!0,header:(O,A)=>{var q=jC();p(O,q)},footer:(O,A)=>{var q=UC(),L=F(q),j=g(L,2);let U;V(()=>{L.disabled=r(v),H(j,"form",s),U=Re(j,1,"btn btn-expanded",null,U,{"btn-loading":r(v)}),j.disabled=!r(t)||r(v)}),re("click",L,$),p(O,q)}},$$legacy:!0}),O=>y(u,O),()=>r(u))}return _t(e,"show",S),_t(e,"hide",$),Ve(C)}var VC=x('<input type="checkbox"/> <label>Send email alert for new logins</label>',1),BC=x('<h4 class="section-title"><div class="flex"><span class="txt">Auth methods</span> <div class="m-l-auto handle"><!></div></div></h4> <div class="accordions m-b-35"><!> <!> <!> <!></div> <h4 class="section-title"><span class="txt">Mail templates</span> <button type="button" class="btn btn-xs m-l-auto btn-secondary">Send test email</button></h4> <div class="accordions m-b-35"><div class="accordions"></div></div> <h4 class="section-title">Other</h4> <div class="accordions m-b-base"><!></div> <!>',1);function HC(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=P(),o=P(),l=P();let c=te(e,"collection",12),u=P([]),d=P();ie(()=>N(c()),()=>{y(t,c().system&&c().name==="_superusers")}),ie(()=>N(c()),()=>{typeof c().otp?.emailTemplate>"u"&&(c(c().otp=c().otp||{},!0),c(c().otp.emailTemplate={},!0))}),ie(()=>N(c()),()=>{typeof c().authAlert?.emailTemplate>"u"&&(c(c().authAlert=c().authAlert||{},!0),c(c().authAlert.emailTemplate={},!0))}),ie(()=>N(c()),()=>{y(i,{key:"resetPasswordTemplate",label:"Default Password reset email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().resetPasswordTemplate})}),ie(()=>N(c()),()=>{y(a,{key:"verificationTemplate",label:"Default Verification email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().verificationTemplate})}),ie(()=>N(c()),()=>{y(s,{key:"confirmEmailChangeTemplate",label:"Default Confirm email change email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().confirmEmailChangeTemplate})}),ie(()=>N(c()),()=>{y(o,{key:"otp.emailTemplate",label:"Default OTP email template",placeholders:["APP_NAME","APP_URL","RECORD:*","OTP","OTP_ID"],config:c().otp.emailTemplate})}),ie(()=>N(c()),()=>{y(l,{key:"authAlert.emailTemplate",label:"Default Login alert email template",placeholders:["APP_NAME","APP_URL","RECORD:*","ALERT_INFO"],config:c().authAlert.emailTemplate})}),ie(()=>(r(t),r(i),r(o),r(l),r(a),r(s)),()=>{y(u,r(t)?[r(i),r(o),r(l)]:[r(a),r(i),r(s),r(o),r(l)])}),dt(),Be();var f=BC(),h=F(f),v=T(h),_=g(T(v),2),b=T(_);De(b,{class:"form-field form-field-sm form-field-toggle m-0",name:"authAlert.enabled",inlineError:!0,children:Ee,$$slots:{default:(j,U)=>{const W=ne(()=>U.uniqueId);var Y=VC(),J=F(Y),z=g(J,2);V(()=>{H(J,"id",r(W)),H(z,"for",r(W))}),Xt(J,()=>c().authAlert.enabled,X=>c(c().authAlert.enabled=X,!0)),p(j,Y)}}});var m=g(h,2),k=T(m);NC(k,{get collection(){return c()},set collection(j){c(j)},$$legacy:!0});var S=g(k,2);{var $=j=>{gC(j,{get collection(){return c()},set collection(U){c(U)},$$legacy:!0})};G(S,j=>{r(t)||j($)})}var D=g(S,2);IC(D,{get collection(){return c()},set collection(j){c(j)},$$legacy:!0});var I=g(D,2);F$(I,{get collection(){return c()},set collection(j){c(j)},$$legacy:!0});var C=g(m,2),w=g(T(C),2),E=g(C,2),O=T(E);bt(O,5,()=>r(u),j=>j.key,(j,U,W)=>{{let Y=ne(()=>(r(U),M(()=>r(U)?.placeholders)));b$(j,{single:!0,get key(){return r(U),M(()=>r(U).key)},get title(){return r(U),M(()=>r(U).label)},get placeholders(){return r(Y)},get config(){return r(U).config},set config(J){r(U).config=J,ma(()=>r(u))},$$legacy:!0})}});var A=g(E,4),q=T(A);T$(q,{get collection(){return c()},set collection(j){c(j)},$$legacy:!0});var L=g(A,2);pt(jg(L,{$$legacy:!0}),j=>y(d,j),()=>r(d)),re("click",w,()=>r(d)?.show(c().id)),p(n,f),Ve()}var WC=x("<div><!></div>");function hs(n,e){Ue(e,!1);const t=qt();let i=te(e,"index",8),a=te(e,"list",28,()=>[]),s=te(e,"group",8,"default"),o=te(e,"disabled",8,!1),l=te(e,"dragHandleClass",8,""),c=P(!1),u=P(!1);function d(b,m){if(!(!b||o())){if(l()&&!b.target.classList.contains(l())){y(u,!1),y(c,!1),b.preventDefault();return}y(c,!0),b.dataTransfer.effectAllowed="move",b.dataTransfer.dropEffect="move",b.dataTransfer.setData("text/plain",JSON.stringify({index:m,group:s()})),t("drag",b)}}function f(b,m){if(y(u,!1),y(c,!1),!b||o())return;b.dataTransfer.dropEffect="move";let k={};try{k=JSON.parse(b.dataTransfer.getData("text/plain"))}catch{}if(k.group!=s())return;const S=k.index<<0;S<m?(a().splice(m+1,0,a()[S]),a().splice(S,1)):(a().splice(m,0,a()[S]),a().splice(S+1,1)),a(a()),t("sort",{oldIndex:S,newIndex:m,list:a()})}Be();var h=WC();let v;var _=T(h);Zt(_,e,"default",{get dragging(){return r(c)},get dragover(){return r(u)}},null),V(()=>{H(h,"draggable",!o()),v=Re(h,1,"draggable svelte-1d7vg8v",null,v,{dragging:r(c),dragover:r(u)})}),re("dragover",h,Ct(()=>{y(u,!0)})),re("dragleave",h,Ct(()=>{y(u,!1)})),re("dragend",h,()=>{y(u,!1),y(c,!1)}),re("dragstart",h,b=>d(b,i())),re("drop",h,b=>f(b,i())),p(n,h),Ve()}var YC=x('<input type="checkbox"/> <label>Unique</label>',1),KC=x('<textarea disabled rows="7" placeholder="Loading..."></textarea>'),JC=x('<button type="button"> </button>'),ZC=x('<div class="inline-flex gap-10"><span class="txt txt-hint">Presets</span> <!></div>'),GC=x("<!> <!> <!>",1),XC=x("<h4> </h4>"),QC=x('<button type="button" class="btn btn-sm btn-circle btn-hint btn-transparent m-r-auto" aria-label="Delete"><i class="ri-delete-bin-7-line"></i></button>'),eE=x('<!> <button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button"><span class="txt">Set index</span></button>',1);function tE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["show","hide","collection"]);Ue(e,!1);const a=P(),s=P(),o=P(),l=qt();let c=te(e,"collection",8),u=P(),d=P(""),f=P(""),h=P(""),v=P(),_=P(!1);function b(C,w){return y(h,R.isEmpty(w)?"":w),y(d,C||k()),y(f,r(d)),r(u)?.show()}function m(){return r(u)?.hide()}function k(){const C=R.parseIndex("");return C.tableName=c()?.name||"",R.buildIndex(C)}function S(){l("remove",r(d)),m()}function $(){r(o).length&&(l("submit",{old:r(d),new:r(f)}),m())}function D(C){const w=R.clone(r(s)),E=C.toLowerCase(),O=w.columns.findIndex(A=>A.name.toLowerCase()==E);O>=0?w.columns.splice(O,1):R.pushUnique(w.columns,{name:C}),y(f,R.buildIndex(w))}un(async()=>{y(_,!0);try{y(v,(await Ut(async()=>{const{default:C}=await import("./CodeEditor-Dnzy5TIO.js");return{default:C}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(C){console.warn(C)}y(_,!1)}),ie(()=>N(c()),()=>{y(a,c()?.fields?.filter(C=>!C.toDelete&&C.name!="id")?.map(C=>C.name)||[])}),ie(()=>r(f),()=>{y(s,R.parseIndex(r(f)))}),ie(()=>r(s),()=>{y(o,r(s).columns?.map(C=>C.name.toLowerCase())||[])}),dt();var I={show:b,hide:m};return Be(),pt(pn(n,tn({popup:!0},()=>i,{$$events:{hide(C){lt.call(this,e,C)},show(C){lt.call(this,e,C)}},children:(C,w)=>{var E=GC(),O=F(E);De(O,{class:"form-field form-field-toggle m-b-sm",children:Ee,$$slots:{default:(j,U)=>{const W=ne(()=>U.uniqueId);var Y=YC(),J=F(Y),z=g(J,2);V(()=>{H(J,"id",r(W)),Yr(J,(r(s),M(()=>r(s).unique))),H(z,"for",r(W))}),re("change",J,X=>{ft(s,r(s).unique=X.target.checked),ft(s,r(s).tableName=r(s).tableName||c()?.name),y(f,R.buildIndex(r(s)))}),p(j,Y)}}});var A=g(O,2);{let j=ne(()=>`indexes.${r(h)||""}`);De(A,{class:"form-field required m-b-sm",get name(){return r(j)},children:Ee,$$slots:{default:(U,W)=>{const Y=ne(()=>W.uniqueId);var J=et(),z=F(J);{var X=ce=>{var le=KC();p(ce,le)},oe=ce=>{var le=et(),me=F(le);{let _e=ne(()=>(N(c()),M(()=>`eg. CREATE INDEX idx_test on ${c()?.name} (created)`)));yi(me,()=>r(v),(pe,Te)=>{Te(pe,{get id(){return r(Y)},get placeholder(){return r(_e)},language:"sql-create-index",minHeight:"85",get value(){return r(f)},set value(Se){y(f,Se)},$$legacy:!0})})}p(ce,le)};G(z,ce=>{r(_)?ce(X):ce(oe,!1)})}p(U,J)}}})}var q=g(A,2);{var L=j=>{var U=ZC(),W=g(T(U),2);bt(W,1,()=>r(a),Mt,(Y,J)=>{var z=JC();let X;var oe=T(z);V(ce=>{X=Re(z,1,"label link-primary",null,X,ce),$e(oe,r(J))},[()=>({"label-info":r(o).includes(r(J).toLowerCase())})]),re("click",z,()=>D(r(J))),p(Y,z)}),p(j,U)};G(q,j=>{r(a),M(()=>r(a).length>0)&&j(L)})}p(C,E)},$$slots:{default:!0,header:(C,w)=>{var E=XC(),O=T(E);V(()=>$e(O,`${r(d)?"Update":"Create"} index`)),p(C,E)},footer:(C,w)=>{var E=eE(),O=F(E);{var A=U=>{var W=QC();Ge(W,(Y,J)=>ht?.(Y,J),()=>({text:"Delete",position:"top"})),Nt(()=>re("click",W,()=>S())),p(U,W)};G(O,U=>{r(d)!=""&&U(A)})}var q=g(O,2),L=g(q,2);let j;V(()=>j=Re(L,1,"btn",null,j,{"btn-disabled":r(o).length<=0})),re("click",q,()=>m()),re("click",L,()=>$()),p(C,E)}},$$legacy:!0})),C=>y(u,C),()=>r(u)),_t(e,"show",b),_t(e,"hide",m),Ve(I)}var nE=x('<i class="ri-error-warning-fill txt-danger"></i>'),iE=x("<strong>Unique:</strong>"),rE=x('<button type="button"><!> <span class="txt"> </span></button>'),aE=x('<div class="section-title"> <!></div> <div class="indexes-list svelte-175w4t2"><!> <button type="button" class="btn btn-xs btn-transparent btn-pill btn-outline"><span class="txt">+</span> <span class="txt">New index</span></button></div> <!>',1);function sE(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At();let s=te(e,"collection",12),o=P();function l(k,S){for(let $=0;$<s().indexes.length;$++)if(s().indexes[$]==k){s(s().indexes[$]=S,!0),Zn("indexes."+$);return}s().indexes.push(S),s(s().indexes=s().indexes,!0)}Be();var c=aE(),u=F(c),d=T(u),f=g(d);{var h=k=>{var S=nE();Ge(S,($,D)=>ht?.($,D),()=>t()?.indexes.message),Et(3,S,()=>jn,()=>({duration:150})),p(k,S)};G(f,k=>{t(),M(()=>t()?.indexes?.message)&&k(h)})}var v=g(u,2),_=T(v);bt(_,1,()=>(N(s()),M(()=>s()?.indexes||[])),Mt,(k,S,$)=>{const D=ne(()=>(N(R),r(S),M(()=>R.parseIndex(r(S)))));var I=rE(),C=T(I);{var w=A=>{var q=iE();p(A,q)};G(C,A=>{N(r(D)),M(()=>r(D).unique)&&A(w)})}var E=g(C,2),O=T(E);Ge(I,(A,q)=>ht?.(A,q),()=>t().indexes?.[$]?.message||""),Nt(()=>re("click",I,()=>r(o)?.show(r(S),$))),V(A=>{Re(I,1,`label link-primary ${t(),M(()=>t().indexes?.[$]?.message?"label-danger":"")??""}`,"svelte-175w4t2"),$e(O,A)},[()=>(N(r(D)),M(()=>r(D).columns?.map(A=>A.name).join(", ")))]),p(k,I)});var b=g(_,2),m=g(v,2);pt(tE(m,{get collection(){return s()},set collection(k){s(k)},$$events:{remove:k=>{for(let S=0;S<s().indexes.length;S++)if(s().indexes[S]==k.detail){s().indexes.splice(S,1),Zn("indexes."+S);break}s(s().indexes=s().indexes,!0)},submit:k=>{t().indexes?.message&&Zn("indexes"),l(k.detail.old,k.detail.new)}},$$legacy:!0}),k=>y(o,k),()=>r(o)),V(()=>$e(d,`Unique constraints and indexes (${N(s()),M(()=>s()?.indexes?.length||0)??""}) `)),re("click",b,()=>r(o)?.show()),p(n,c),Ve(),a()}var oE=x('<button type="button" role="menuitem" class="dropdown-item svelte-167hycg"><i aria-hidden="true"></i> <span class="txt"> </span></button>'),lE=x('<div tabindex="0" role="button"><i class="ri-add-line" aria-hidden="true"></i> <div class="txt">New field</div> <!></div>');function cE(n,e){Ue(e,!1);let t=te(e,"class",8,"");const i=qt(),a=[{label:"Plain text",value:"text",icon:R.getFieldTypeIcon("text")},{label:"Rich editor",value:"editor",icon:R.getFieldTypeIcon("editor")},{label:"Number",value:"number",icon:R.getFieldTypeIcon("number")},{label:"Bool",value:"bool",icon:R.getFieldTypeIcon("bool")},{label:"Email",value:"email",icon:R.getFieldTypeIcon("email")},{label:"URL",value:"url",icon:R.getFieldTypeIcon("url")},{label:"Datetime",value:"date",icon:R.getFieldTypeIcon("date")},{label:"Autodate",value:"autodate",icon:R.getFieldTypeIcon("autodate")},{label:"Select",value:"select",icon:R.getFieldTypeIcon("select")},{label:"File",value:"file",icon:R.getFieldTypeIcon("file")},{label:"Relation",value:"relation",icon:R.getFieldTypeIcon("relation")},{label:"JSON",value:"json",icon:R.getFieldTypeIcon("json")},{label:"Geo Point",value:"geoPoint",icon:R.getFieldTypeIcon("geoPoint")}];function s(c){i("select",c)}Be();var o=lE(),l=g(T(o),4);Jn(l,{class:"dropdown field-types-dropdown",children:(c,u)=>{var d=et(),f=F(d);bt(f,1,()=>a,Mt,(h,v)=>{var _=oE(),b=T(_),m=g(b,2),k=T(m);V(()=>{Re(b,1,`icon ${r(v),M(()=>r(v).icon)??""}`,"svelte-167hycg"),$e(k,(r(v),M(()=>r(v).label)))}),re("click",_,()=>s(r(v).value)),p(h,_)}),p(c,d)},$$slots:{default:!0}}),V(()=>Re(o,1,`field-types-btn ${t()??""}`,"svelte-167hycg")),p(n,o),Ve()}let zc=[];var uE=x('<div class="drag-handle-wrapper" aria-label="Sort"><span class="drag-handle"></span></div>'),dE=x('<span class="label label-success"> </span>'),fE=x('<span class="label label-danger">Hidden</span>'),hE=x('<div class="field-labels"><!> <!></div>  <div><i></i></div> <input type="text" required spellcheck="false" placeholder="Field name" title="System field"/>',1),vE=x('<span class="separator"></span>'),pE=x('<button type="button" class="btn btn-sm btn-circle btn-success btn-transparent options-trigger" aria-label="Restore"><i class="ri-restart-line"></i></button>'),mE=x('<button type="button"><i class="ri-settings-3-line"></i></button>'),gE=x('<input type="checkbox"/> <label><span class="txt"> </span> <i class="ri-information-line link-hint"></i></label>',1),bE=x('<input type="checkbox"/> <label><span class="txt">Hidden</span> <i class="ri-information-line link-hint"></i></label>',1),yE=x('<input type="checkbox"/> <label><span class="txt">Presentable</span> <i></i></label>',1),_E=x('<button type="button" class="dropdown-item" role="menuitem"><span class="txt">Remove</span></button>'),xE=x('<button type="button" class="dropdown-item" role="menuitem"><span class="txt">Duplicate</span></button> <!>',1),wE=x('<div class="m-l-auto txt-right"><div class="inline-flex flex-gap-sm flex-nowrap"><div tabindex="0" role="button" title="More field options" class="btn btn-circle btn-sm btn-transparent"><i class="ri-more-line" aria-hidden="true"></i> <!></div></div></div>'),kE=x('<div class="schema-field-options"><div class="hidden-empty m-b-sm"><!></div> <div class="schema-field-options-footer"><!> <!> <!> <!> <!></div></div>'),SE=x('<div><div class="schema-field-header"><!> <!> <!> <!></div> <!></div>');function _i(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At(),s=P(),o=P(),l=P(),c=P(),u="f_"+R.randomString(8),d=qt(),f={bool:"Nonfalsey",number:"Nonzero"},h=["password","tokenKey","id","autodate"],v=["password","tokenKey","id","email"],_=["password","tokenKey"];let b=te(e,"key",8,""),m=te(e,"field",28,()=>R.initSchemaField()),k=te(e,"draggable",8,!0),S=te(e,"collection",24,()=>({})),$=P(),D=P(!1);function I(){m().id?m(m()._toDelete=!0,!0):(A(),d("remove"))}function C(){m(m()._toDelete=!1,!0),nn({})}function w(){m()._toDelete||(A(),d("duplicate"))}function E(pe){return R.slugify(pe)}function O(){y(D,!0),L()}function A(){y(D,!1)}function q(){r(D)?A():O()}function L(){for(let pe of zc)pe.id!=u&&pe.collapse()}un(()=>(zc.push({id:u,collapse:A}),m().onMountSelect&&(m(m().onMountSelect=!1,!0),r($)?.select()),()=>{R.removeByKey(zc,"id",u)})),ie(()=>N(S()),()=>{y(s,S()?.type=="auth")}),ie(()=>N(m()),()=>{m()._toDelete&&m()._originalName&&m().name!==m()._originalName&&m(m().name=m()._originalName,!0)}),ie(()=>N(m()),()=>{!m()._originalName&&m().name&&m(m()._originalName=m().name,!0)}),ie(()=>N(m()),()=>{typeof m()._toDelete>"u"&&m(m()._toDelete=!1,!0)}),ie(()=>N(m()),()=>{m().required&&m(m().nullable=!1,!0)}),ie(()=>N(m()),()=>{y(o,!m()._toDelete)}),ie(()=>(t(),N(b())),()=>{y(l,!R.isEmpty(R.getNestedVal(t(),`fields.${b()}`)))}),ie(()=>N(m()),()=>{y(c,f[m()?.type]||"Nonempty")}),dt(),Be();var j=SE();let U;var W=T(j),Y=T(W);{var J=pe=>{var Te=uE();H(Te,"draggable",!0),p(pe,Te)};G(Y,pe=>{r(o)&&k()&&pe(J)})}var z=g(Y,2);{let pe=ne(()=>r(o)?"":"disabled");De(z,{get class(){return`form-field required m-0 ${r(pe)??""}`},get name(){return`fields.${b()??""}.name`},inlineError:!0,children:(Te,Se)=>{var he=hE(),ue=F(he),ke=T(ue);{var we=Ce=>{var Ie=dE(),ze=T(Ie);V(()=>$e(ze,r(c))),p(Ce,Ie)};G(ke,Ce=>{N(m()),M(()=>m().required)&&Ce(we)})}var ae=g(ke,2);{var xe=Ce=>{var Ie=fE();p(Ce,Ie)};G(ae,Ce=>{N(m()),M(()=>m().hidden)&&Ce(xe)})}var se=g(ue,2);let ge;var ee=T(se);Ge(se,(Ce,Ie)=>ht?.(Ce,Ie),()=>m().type+(m().system?" (system)":"")),Nt(()=>re("click",se,()=>r($)?.focus()));var ve=g(se,2);pt(ve,Ce=>y($,Ce),()=>r($)),V(Ce=>{ge=Re(se,1,"form-field-addon prefix field-type-icon",null,ge,{"txt-disabled":!r(o)||m().system}),Re(ee,1,Ce),ve.disabled=(r(o),N(m()),M(()=>!r(o)||m().system)),zn(ve,(N(m()),M(()=>m().name)))},[()=>$n((N(R),N(m()),M(()=>R.getFieldTypeIcon(m().type))))]),re("input",ve,Ce=>{const Ie=m().name;m(m().name=E(Ce.target.value),!0),Ce.target.value=m().name,d("rename",{oldName:Ie,newName:m().name})}),p(Te,he)},$$slots:{default:!0}})}var X=g(z,2);Zt(X,e,"default",{get interactive(){return r(o)},get hasErrors(){return r(l)}},pe=>{var Te=vE();p(pe,Te)});var oe=g(X,2);{var ce=pe=>{var Te=pE();Ge(Te,(Se,he)=>ht?.(Se,he),()=>"Restore"),Nt(()=>re("click",Te,C)),p(pe,Te)},le=pe=>{var Te=et(),Se=F(Te);{var he=ue=>{var ke=mE();let we;V(()=>{H(ke,"aria-label",`Toggle ${N(m()),M(()=>m().name)??""} field options`),we=Re(ke,1,`btn btn-sm btn-circle options-trigger ${r(D)?"btn-secondary":"btn-transparent"}`,null,we,{"btn-hint":!r(D)&&!r(l),"btn-danger":r(l)}),H(ke,"aria-expanded",r(D))}),re("click",ke,q),p(ue,ke)};G(Se,ue=>{r(o)&&ue(he)},!0)}p(pe,Te)};G(oe,pe=>{N(m()),M(()=>m()._toDelete)?pe(ce):pe(le,!1)})}var me=g(W,2);{var _e=pe=>{var Te=kE(),Se=T(Te),he=T(Se);Zt(he,e,"options",{get interactive(){return r(o)},get hasErrors(){return r(l)}},null);var ue=g(Se,2),ke=T(ue);{var we=Ie=>{De(Ie,{class:"form-field form-field-toggle",name:"requried",children:Ee,$$slots:{default:(ze,qe)=>{const je=ne(()=>qe.uniqueId);var rt=gE(),be=F(rt),Le=g(be,2),Ke=T(Le),st=T(Ke),it=g(Ke,2);Ge(it,(He,Je)=>ht?.(He,Je),()=>({text:`Requires the field value NOT to be ${R.zeroDefaultStr(m())}.`})),V(()=>{H(be,"id",r(je)),H(Le,"for",r(je)),$e(st,r(c))}),Xt(be,()=>m().required,He=>m(m().required=He,!0)),p(ze,rt)}}})};G(ke,Ie=>{N(m()),r(s),M(()=>!m().primaryKey&&m().type!="autodate"&&(!r(s)||!h.includes(m().name)))&&Ie(we)})}var ae=g(ke,2);{var xe=Ie=>{De(Ie,{class:"form-field form-field-toggle",name:"hidden",children:Ee,$$slots:{default:(ze,qe)=>{const je=ne(()=>qe.uniqueId);var rt=bE(),be=F(rt),Le=g(be,2),Ke=g(T(Le),2);Ge(Ke,(st,it)=>ht?.(st,it),()=>({text:"Hide from the JSON API response and filters."})),V(()=>{H(be,"id",r(je)),H(Le,"for",r(je))}),Xt(be,()=>m().hidden,st=>m(m().hidden=st,!0)),re("change",be,st=>{st.target.checked&&m(m().presentable=!1,!0)}),p(ze,rt)}}})};G(ae,Ie=>{N(m()),r(s),M(()=>!m().primaryKey&&(!r(s)||!v.includes(m().name)))&&Ie(xe)})}var se=g(ae,2);{var ge=Ie=>{De(Ie,{class:"form-field form-field-toggle m-0",name:"presentable",children:Ee,$$slots:{default:(ze,qe)=>{const je=ne(()=>qe.uniqueId);var rt=yE(),be=F(rt),Le=g(be,2),Ke=g(T(Le),2);Ge(Ke,(st,it)=>ht?.(st,it),()=>({text:"Whether the field should be preferred in the Superuser UI relation listings (default to auto)."})),V(()=>{H(be,"id",r(je)),be.disabled=(N(m()),M(()=>m().hidden)),H(Le,"for",r(je)),Re(Ke,1,`ri-information-line ${N(m()),M(()=>m().hidden?"txt-disabled":"link-hint")??""}`)}),Xt(be,()=>m().presentable,st=>m(m().presentable=st,!0)),p(ze,rt)}}})};G(se,Ie=>{r(s),N(m()),M(()=>!r(s)||!_.includes(m().name))&&Ie(ge)})}var ee=g(se,2);Zt(ee,e,"optionsFooter",{get interactive(){return r(o)},get hasErrors(){return r(l)}},null);var ve=g(ee,2);{var Ce=Ie=>{var ze=wE(),qe=T(ze),je=T(qe),rt=g(T(je),2);Jn(rt,{class:"dropdown dropdown-sm dropdown-upside dropdown-right dropdown-nowrap no-min-width",children:(be,Le)=>{var Ke=xE(),st=F(Ke),it=g(st,2);{var He=Je=>{var Fe=_E();re("click",Fe,Ct(I)),p(Je,Fe)};G(it,Je=>{N(m()),M(()=>!m().system)&&Je(He)})}re("click",st,Ct(w)),p(be,Ke)},$$slots:{default:!0}}),p(Ie,ze)};G(ve,Ie=>{N(m()),M(()=>!m()._toDelete&&!m().primaryKey)&&Ie(Ce)})}Et(3,Te,()=>vn,()=>({delay:10,duration:150})),p(pe,Te)};G(me,pe=>{r(o)&&r(D)&&pe(_e)})}V(()=>U=Re(j,1,"schema-field",null,U,{required:m().required,expanded:r(o)&&r(D),deleted:m()._toDelete})),Et(3,j,()=>vn,()=>({duration:150})),p(n,j),Ve(),a()}var TE=x("<div><!></div>"),$E=x('<div class="separator"></div> <!> <div class="separator"></div>',1);function IE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);const a=1,s=2,o=3,l=[{label:"Create",value:a},{label:"Update",value:s},{label:"Create/Update",value:o}];let c=te(e,"field",12),u=te(e,"key",8,""),d=P(f());function f(){return c().onCreate&&c().onUpdate?o:c().onUpdate?s:a}function h(v){switch(v){case a:c(c().onCreate=!0,!0),c(c().onUpdate=!1,!0);break;case s:c(c().onCreate=!1,!0),c(c().onUpdate=!0,!0);break;case o:c(c().onCreate=!0,!0),c(c().onUpdate=!0,!0);break}}ie(()=>r(d),()=>{h(r(d))}),dt(),Be(),_i(n,tn({get key(){return u()}},()=>i,{get field(){return c()},set field(v){c(v)},$$events:{rename(v){lt.call(this,e,v)},remove(v){lt.call(this,e,v)},duplicate(v){lt.call(this,e,v)}},children:Ee,$$slots:{default:(v,_)=>{const b=ne(()=>_.interactive);var m=$E(),k=g(F(m),2);{let S=ne(()=>r(b)?"":"readonly");De(k,{get class(){return`form-field form-field-single-multiple-select form-field-autodate-select ${r(S)??""}`},inlineError:!0,children:Ee,$$slots:{default:($,D)=>{const I=ne(()=>D.uniqueId);var C=TE(),w=T(C);{let E=ne(()=>!r(b));On(w,{get id(){return r(I)},get items(){return l},get disabled(){return N(c()),M(()=>c().system)},get readonly(){return r(E)},get keyOfSelected(){return r(d)},set keyOfSelected(O){y(d,O)},$$legacy:!0})}Ge(C,(E,O)=>ht?.(E,O),()=>({text:"Auto set on:",position:"top"})),p($,C)}}})}p(v,m)}},$$legacy:!0})),Ve()}function CE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);let a=te(e,"field",12),s=te(e,"key",8,"");_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){lt.call(this,e,o)},remove(o){lt.call(this,e,o)},duplicate(o){lt.call(this,e,o)}},$$legacy:!0}))}var jc=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ns={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},vo={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ii=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},Ii=function(n){return n===!0?1:0};function kv(n,e){var t;return function(){var i=this,a=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(i,a)},e)}}var Uc=function(n){return n instanceof Array?n:[n]};function Hn(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function Yt(n,e,t){var i=window.document.createElement(n);return e=e||"",t=t||"",i.className=e,t!==void 0&&(i.textContent=t),i}function tl(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Ug(n,e){if(e(n))return n;if(n.parentNode)return Ug(n.parentNode,e)}function nl(n,e){var t=Yt("div","numInputWrapper"),i=Yt("input","numInput "+n),a=Yt("span","arrowUp"),s=Yt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),e!==void 0)for(var o in e)i.setAttribute(o,e[o]);return t.appendChild(i),t.appendChild(a),t.appendChild(s),t}function hi(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var Vc=function(){},Ol=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},EE={D:Vc,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Ii(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var i=parseInt(e),a=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+t.firstDayOfWeek),a},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:Vc,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:Vc,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},ha={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},eo={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[eo.w(n,e,t)]},F:function(n,e,t){return Ol(eo.n(n,e,t)-1,!1,e)},G:function(n,e,t){return ii(eo.h(n,e,t))},H:function(n){return ii(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Ii(n.getHours()>11)]},M:function(n,e){return Ol(n.getMonth(),!0,e)},S:function(n){return ii(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return ii(n.getFullYear(),4)},d:function(n){return ii(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ii(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return ii(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},Vg=function(n){var e=n.config,t=e===void 0?ns:e,i=n.l10n,a=i===void 0?vo:i,s=n.isMobile,o=s===void 0?!1:s;return function(l,c,u){var d=u||a;return t.formatDate!==void 0&&!o?t.formatDate(l,c,d):c.split("").map(function(f,h,v){return eo[f]&&v[h-1]!=="\\"?eo[f](l,d,t):f!=="\\"?f:""}).join("")}},Nu=function(n){var e=n.config,t=e===void 0?ns:e,i=n.l10n,a=i===void 0?vo:i;return function(s,o,l,c){if(!(s!==0&&!s)){var u=c||a,d,f=s;if(s instanceof Date)d=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)d=new Date(s);else if(typeof s=="string"){var h=o||(t||ns).dateFormat,v=String(s).trim();if(v==="today")d=new Date,l=!0;else if(t&&t.parseDate)d=t.parseDate(s,h);else if(/Z$/.test(v)||/GMT$/.test(v))d=new Date(s);else{for(var _=void 0,b=[],m=0,k=0,S="";m<h.length;m++){var $=h[m],D=$==="\\",I=h[m-1]==="\\"||D;if(ha[$]&&!I){S+=ha[$];var C=new RegExp(S).exec(s);C&&(_=!0)&&b[$!=="Y"?"push":"unshift"]({fn:EE[$],val:C[++k]})}else D||(S+=".")}d=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),b.forEach(function(w){var E=w.fn,O=w.val;return d=E(d,O,u)||d}),d=_?d:void 0}}if(!(d instanceof Date&&!isNaN(d.getTime()))){t.errorHandler(new Error("Invalid date provided: "+f));return}return l===!0&&d.setHours(0,0,0,0),d}}};function vi(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var OE=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},Bc=function(n,e,t){return n*3600+e*60+t},DE=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},PE={DAY:864e5};function Hc(n){var e=n.defaultHour,t=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var a=n.minDate.getHours(),s=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<a&&(e=a),e===a&&t<s&&(t=s),e===a&&t===s&&i<o&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var l=n.maxDate.getHours(),c=n.maxDate.getMinutes();e=Math.min(e,l),e===l&&(t=Math.min(c,t)),e===l&&t===c&&(i=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(l){l&&Object.keys(l).forEach(function(c){return n[c]=l[c]})},a=0,s=e;a<s.length;a++){var o=s[a];i(o)}return n});var Rn=function(){return Rn=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Rn.apply(this,arguments)},Sv=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),a=0,e=0;e<t;e++)for(var s=arguments[e],o=0,l=s.length;o<l;o++,a++)i[a]=s[o];return i},ME=300;function AE(n,e){var t={config:Rn(Rn({},ns),bn.defaultConfig),l10n:vo};t.parseDate=Nu({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=b,t._setHoursFromDate=h,t._positionCalendar=Ie,t.changeMonth=ce,t.changeYear=Se,t.clear=le,t.close=me,t.onMouseOver=ae,t._createElement=Yt,t.createDay=C,t.destroy=_e,t.isEnabled=he,t.jumpToDate=S,t.updateValue=gt,t.open=se,t.redraw=je,t.set=Ke,t.setDate=it,t.toggle=Ze;function i(){t.utils={getDaysInMonth:function(B,Z){return B===void 0&&(B=t.currentMonth),Z===void 0&&(Z=t.currentYear),B===1&&(Z%4===0&&Z%100!==0||Z%400===0)?29:t.l10n.daysInMonth[B]}}}function a(){t.element=t.input=n,t.isOpen=!1,ee(),Ce(),Fe(),Je(),i(),t.isMobile||I(),k(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&h(t.config.noCalendar?t.latestSelectedDateObj:void 0),gt(!1)),l();var B=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&B&&Ie(),Xe("onReady")}function s(){var B;return((B=t.calendarContainer)===null||B===void 0?void 0:B.getRootNode()).activeElement||document.activeElement}function o(B){return B.bind(t)}function l(){var B=t.config;B.weekNumbers===!1&&B.showMonths===1||B.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var Z=(t.days.offsetWidth+1)*B.showMonths;t.daysContainer.style.width=Z+"px",t.calendarContainer.style.width=Z+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function c(B){if(t.selectedDates.length===0){var Z=t.config.minDate===void 0||vi(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),de=Hc(t.config);Z.setHours(de.hours,de.minutes,de.seconds,Z.getMilliseconds()),t.selectedDates=[Z],t.latestSelectedDateObj=Z}B!==void 0&&B.type!=="blur"&&Oe(B);var ye=t._input.value;f(),gt(),t._input.value!==ye&&t._debouncedChange()}function u(B,Z){return B%12+12*Ii(Z===t.l10n.amPM[1])}function d(B){switch(B%24){case 0:case 12:return 12;default:return B%12}}function f(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var B=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,Z=(parseInt(t.minuteElement.value,10)||0)%60,de=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(B=u(B,t.amPM.textContent));var ye=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&vi(t.latestSelectedDateObj,t.config.minDate,!0)===0,Ye=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&vi(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var ot=Bc(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Tt=Bc(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),at=Bc(B,Z,de);if(at>Tt&&at<ot){var wt=DE(ot);B=wt[0],Z=wt[1],de=wt[2]}}else{if(Ye){var ut=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;B=Math.min(B,ut.getHours()),B===ut.getHours()&&(Z=Math.min(Z,ut.getMinutes())),Z===ut.getMinutes()&&(de=Math.min(de,ut.getSeconds()))}if(ye){var St=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;B=Math.max(B,St.getHours()),B===St.getHours()&&Z<St.getMinutes()&&(Z=St.getMinutes()),Z===St.getMinutes()&&(de=Math.max(de,St.getSeconds()))}}v(B,Z,de)}}function h(B){var Z=B||t.latestSelectedDateObj;Z&&Z instanceof Date&&v(Z.getHours(),Z.getMinutes(),Z.getSeconds())}function v(B,Z,de){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(B%24,Z,de||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=ii(t.config.time_24hr?B:(12+B)%12+12*Ii(B%12===0)),t.minuteElement.value=ii(Z),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Ii(B>=12)]),t.secondElement!==void 0&&(t.secondElement.value=ii(de)))}function _(B){var Z=hi(B),de=parseInt(Z.value)+(B.delta||0);(de/1e3>1||B.key==="Enter"&&!/[^\d]/.test(de.toString()))&&Se(de)}function b(B,Z,de,ye){if(Z instanceof Array)return Z.forEach(function(Ye){return b(B,Ye,de,ye)});if(B instanceof Array)return B.forEach(function(Ye){return b(Ye,Z,de,ye)});B.addEventListener(Z,de,ye),t._handlers.push({remove:function(){return B.removeEventListener(Z,de,ye)}})}function m(){Xe("onChange")}function k(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(de){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+de+"]"),function(ye){return b(ye,"click",t[de])})}),t.isMobile){Ne();return}var B=kv(xe,50);if(t._debouncedChange=kv(m,ME),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&b(t.daysContainer,"mouseover",function(de){t.config.mode==="range"&&ae(hi(de))}),b(t._input,"keydown",we),t.calendarContainer!==void 0&&b(t.calendarContainer,"keydown",we),!t.config.inline&&!t.config.static&&b(window,"resize",B),window.ontouchstart!==void 0?b(window.document,"touchstart",Te):b(window.document,"mousedown",Te),b(window.document,"focus",Te,{capture:!0}),t.config.clickOpens===!0&&(b(t._input,"focus",t.open),b(t._input,"click",t.open)),t.daysContainer!==void 0&&(b(t.monthNav,"click",nt),b(t.monthNav,["keyup","increment"],_),b(t.daysContainer,"click",be)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var Z=function(de){return hi(de).select()};b(t.timeContainer,["increment"],c),b(t.timeContainer,"blur",c,{capture:!0}),b(t.timeContainer,"click",$),b([t.hourElement,t.minuteElement],["focus","click"],Z),t.secondElement!==void 0&&b(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&b(t.amPM,"click",function(de){c(de)})}t.config.allowInput&&b(t._input,"blur",ke)}function S(B,Z){var de=B!==void 0?t.parseDate(B):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),ye=t.currentYear,Ye=t.currentMonth;try{de!==void 0&&(t.currentYear=de.getFullYear(),t.currentMonth=de.getMonth())}catch(ot){ot.message="Invalid date supplied: "+de,t.config.errorHandler(ot)}Z&&t.currentYear!==ye&&(Xe("onYearChange"),j()),Z&&(t.currentYear!==ye||t.currentMonth!==Ye)&&Xe("onMonthChange"),t.redraw()}function $(B){var Z=hi(B);~Z.className.indexOf("arrow")&&D(B,Z.classList.contains("arrowUp")?1:-1)}function D(B,Z,de){var ye=B&&hi(B),Ye=de||ye&&ye.parentNode&&ye.parentNode.firstChild,ot=vt("increment");ot.delta=Z,Ye&&Ye.dispatchEvent(ot)}function I(){var B=window.document.createDocumentFragment();if(t.calendarContainer=Yt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(B.appendChild(Y()),t.innerContainer=Yt("div","flatpickr-innerContainer"),t.config.weekNumbers){var Z=oe(),de=Z.weekWrapper,ye=Z.weekNumbers;t.innerContainer.appendChild(de),t.weekNumbers=ye,t.weekWrapper=de}t.rContainer=Yt("div","flatpickr-rContainer"),t.rContainer.appendChild(z()),t.daysContainer||(t.daysContainer=Yt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),L(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),B.appendChild(t.innerContainer)}t.config.enableTime&&B.appendChild(J()),Hn(t.calendarContainer,"rangeMode",t.config.mode==="range"),Hn(t.calendarContainer,"animate",t.config.animate===!0),Hn(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(B);var Ye=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!Ye&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var ot=Yt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(ot,t.element),ot.appendChild(t.element),t.altInput&&ot.appendChild(t.altInput),ot.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function C(B,Z,de,ye){var Ye=he(Z,!0),ot=Yt("span",B,Z.getDate().toString());return ot.dateObj=Z,ot.$i=ye,ot.setAttribute("aria-label",t.formatDate(Z,t.config.ariaDateFormat)),B.indexOf("hidden")===-1&&vi(Z,t.now)===0&&(t.todayDateElem=ot,ot.classList.add("today"),ot.setAttribute("aria-current","date")),Ye?(ot.tabIndex=-1,tt(Z)&&(ot.classList.add("selected"),t.selectedDateElem=ot,t.config.mode==="range"&&(Hn(ot,"startRange",t.selectedDates[0]&&vi(Z,t.selectedDates[0],!0)===0),Hn(ot,"endRange",t.selectedDates[1]&&vi(Z,t.selectedDates[1],!0)===0),B==="nextMonthDay"&&ot.classList.add("inRange")))):ot.classList.add("flatpickr-disabled"),t.config.mode==="range"&&We(Z)&&!tt(Z)&&ot.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&B!=="prevMonthDay"&&ye%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(Z)+"</span>"),Xe("onDayCreate",ot),ot}function w(B){B.focus(),t.config.mode==="range"&&ae(B)}function E(B){for(var Z=B>0?0:t.config.showMonths-1,de=B>0?t.config.showMonths:-1,ye=Z;ye!=de;ye+=B)for(var Ye=t.daysContainer.children[ye],ot=B>0?0:Ye.children.length-1,Tt=B>0?Ye.children.length:-1,at=ot;at!=Tt;at+=B){var wt=Ye.children[at];if(wt.className.indexOf("hidden")===-1&&he(wt.dateObj))return wt}}function O(B,Z){for(var de=B.className.indexOf("Month")===-1?B.dateObj.getMonth():t.currentMonth,ye=Z>0?t.config.showMonths:-1,Ye=Z>0?1:-1,ot=de-t.currentMonth;ot!=ye;ot+=Ye)for(var Tt=t.daysContainer.children[ot],at=de-t.currentMonth===ot?B.$i+Z:Z<0?Tt.children.length-1:0,wt=Tt.children.length,ut=at;ut>=0&&ut<wt&&ut!=(Z>0?wt:-1);ut+=Ye){var St=Tt.children[ut];if(St.className.indexOf("hidden")===-1&&he(St.dateObj)&&Math.abs(B.$i-ut)>=Math.abs(Z))return w(St)}t.changeMonth(Ye),A(E(Ye),0)}function A(B,Z){var de=s(),ye=ue(de||document.body),Ye=B!==void 0?B:ye?de:t.selectedDateElem!==void 0&&ue(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&ue(t.todayDateElem)?t.todayDateElem:E(Z>0?1:-1);Ye===void 0?t._input.focus():ye?O(Ye,Z):w(Ye)}function q(B,Z){for(var de=(new Date(B,Z,1).getDay()-t.l10n.firstDayOfWeek+7)%7,ye=t.utils.getDaysInMonth((Z-1+12)%12,B),Ye=t.utils.getDaysInMonth(Z,B),ot=window.document.createDocumentFragment(),Tt=t.config.showMonths>1,at=Tt?"prevMonthDay hidden":"prevMonthDay",wt=Tt?"nextMonthDay hidden":"nextMonthDay",ut=ye+1-de,St=0;ut<=ye;ut++,St++)ot.appendChild(C("flatpickr-day "+at,new Date(B,Z-1,ut),ut,St));for(ut=1;ut<=Ye;ut++,St++)ot.appendChild(C("flatpickr-day",new Date(B,Z,ut),ut,St));for(var Rt=Ye+1;Rt<=42-de&&(t.config.showMonths===1||St%7!==0);Rt++,St++)ot.appendChild(C("flatpickr-day "+wt,new Date(B,Z+1,Rt%Ye),Rt,St));var _n=Yt("div","dayContainer");return _n.appendChild(ot),_n}function L(){if(t.daysContainer!==void 0){tl(t.daysContainer),t.weekNumbers&&tl(t.weekNumbers);for(var B=document.createDocumentFragment(),Z=0;Z<t.config.showMonths;Z++){var de=new Date(t.currentYear,t.currentMonth,1);de.setMonth(t.currentMonth+Z),B.appendChild(q(de.getFullYear(),de.getMonth()))}t.daysContainer.appendChild(B),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&ae()}}function j(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var B=function(ye){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&ye<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&ye>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var Z=0;Z<12;Z++)if(B(Z)){var de=Yt("option","flatpickr-monthDropdown-month");de.value=new Date(t.currentYear,Z).getMonth().toString(),de.textContent=Ol(Z,t.config.shorthandCurrentMonth,t.l10n),de.tabIndex=-1,t.currentMonth===Z&&(de.selected=!0),t.monthsDropdownContainer.appendChild(de)}}}function U(){var B=Yt("div","flatpickr-month"),Z=window.document.createDocumentFragment(),de;t.config.showMonths>1||t.config.monthSelectorType==="static"?de=Yt("span","cur-month"):(t.monthsDropdownContainer=Yt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),b(t.monthsDropdownContainer,"change",function(Tt){var at=hi(Tt),wt=parseInt(at.value,10);t.changeMonth(wt-t.currentMonth),Xe("onMonthChange")}),j(),de=t.monthsDropdownContainer);var ye=nl("cur-year",{tabindex:"-1"}),Ye=ye.getElementsByTagName("input")[0];Ye.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&Ye.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(Ye.setAttribute("max",t.config.maxDate.getFullYear().toString()),Ye.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var ot=Yt("div","flatpickr-current-month");return ot.appendChild(de),ot.appendChild(ye),Z.appendChild(ot),B.appendChild(Z),{container:B,yearElement:Ye,monthElement:de}}function W(){tl(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var B=t.config.showMonths;B--;){var Z=U();t.yearElements.push(Z.yearElement),t.monthElements.push(Z.monthElement),t.monthNav.appendChild(Z.container)}t.monthNav.appendChild(t.nextMonthNav)}function Y(){return t.monthNav=Yt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Yt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Yt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,W(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(B){t.__hidePrevMonthArrow!==B&&(Hn(t.prevMonthNav,"flatpickr-disabled",B),t.__hidePrevMonthArrow=B)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(B){t.__hideNextMonthArrow!==B&&(Hn(t.nextMonthNav,"flatpickr-disabled",B),t.__hideNextMonthArrow=B)}}),t.currentYearElement=t.yearElements[0],Qe(),t.monthNav}function J(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var B=Hc(t.config);t.timeContainer=Yt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var Z=Yt("span","flatpickr-time-separator",":"),de=nl("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=de.getElementsByTagName("input")[0];var ye=nl("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=ye.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=ii(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?B.hours:d(B.hours)),t.minuteElement.value=ii(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():B.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(de),t.timeContainer.appendChild(Z),t.timeContainer.appendChild(ye),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var Ye=nl("flatpickr-second");t.secondElement=Ye.getElementsByTagName("input")[0],t.secondElement.value=ii(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():B.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Yt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(Ye)}return t.config.time_24hr||(t.amPM=Yt("span","flatpickr-am-pm",t.l10n.amPM[Ii((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function z(){t.weekdayContainer?tl(t.weekdayContainer):t.weekdayContainer=Yt("div","flatpickr-weekdays");for(var B=t.config.showMonths;B--;){var Z=Yt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(Z)}return X(),t.weekdayContainer}function X(){if(t.weekdayContainer){var B=t.l10n.firstDayOfWeek,Z=Sv(t.l10n.weekdays.shorthand);B>0&&B<Z.length&&(Z=Sv(Z.splice(B,Z.length),Z.splice(0,B)));for(var de=t.config.showMonths;de--;)t.weekdayContainer.children[de].innerHTML=`
      <span class='flatpickr-weekday'>
        `+Z.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function oe(){t.calendarContainer.classList.add("hasWeeks");var B=Yt("div","flatpickr-weekwrapper");B.appendChild(Yt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var Z=Yt("div","flatpickr-weeks");return B.appendChild(Z),{weekWrapper:B,weekNumbers:Z}}function ce(B,Z){Z===void 0&&(Z=!0);var de=Z?B:B-t.currentMonth;de<0&&t._hidePrevMonthArrow===!0||de>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=de,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Xe("onYearChange"),j()),L(),Xe("onMonthChange"),Qe())}function le(B,Z){if(B===void 0&&(B=!0),Z===void 0&&(Z=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,Z===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var de=Hc(t.config),ye=de.hours,Ye=de.minutes,ot=de.seconds;v(ye,Ye,ot)}t.redraw(),B&&Xe("onChange")}function me(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Xe("onClose")}function _e(){t.config!==void 0&&Xe("onDestroy");for(var B=t._handlers.length;B--;)t._handlers[B].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var Z=t.calendarContainer.parentNode;if(Z.lastChild&&Z.removeChild(Z.lastChild),Z.parentNode){for(;Z.firstChild;)Z.parentNode.insertBefore(Z.firstChild,Z);Z.parentNode.removeChild(Z)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(de){try{delete t[de]}catch{}})}function pe(B){return t.calendarContainer.contains(B)}function Te(B){if(t.isOpen&&!t.config.inline){var Z=hi(B),de=pe(Z),ye=Z===t.input||Z===t.altInput||t.element.contains(Z)||B.path&&B.path.indexOf&&(~B.path.indexOf(t.input)||~B.path.indexOf(t.altInput)),Ye=!ye&&!de&&!pe(B.relatedTarget),ot=!t.config.ignoredFocusElements.some(function(Tt){return Tt.contains(Z)});Ye&&ot&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&c(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function Se(B){if(!(!B||t.config.minDate&&B<t.config.minDate.getFullYear()||t.config.maxDate&&B>t.config.maxDate.getFullYear())){var Z=B,de=t.currentYear!==Z;t.currentYear=Z||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),de&&(t.redraw(),Xe("onYearChange"),j())}}function he(B,Z){var de;Z===void 0&&(Z=!0);var ye=t.parseDate(B,void 0,Z);if(t.config.minDate&&ye&&vi(ye,t.config.minDate,Z!==void 0?Z:!t.minDateHasTime)<0||t.config.maxDate&&ye&&vi(ye,t.config.maxDate,Z!==void 0?Z:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(ye===void 0)return!1;for(var Ye=!!t.config.enable,ot=(de=t.config.enable)!==null&&de!==void 0?de:t.config.disable,Tt=0,at=void 0;Tt<ot.length;Tt++){if(at=ot[Tt],typeof at=="function"&&at(ye))return Ye;if(at instanceof Date&&ye!==void 0&&at.getTime()===ye.getTime())return Ye;if(typeof at=="string"){var wt=t.parseDate(at,void 0,!0);return wt&&wt.getTime()===ye.getTime()?Ye:!Ye}else if(typeof at=="object"&&ye!==void 0&&at.from&&at.to&&ye.getTime()>=at.from.getTime()&&ye.getTime()<=at.to.getTime())return Ye}return!Ye}function ue(B){return t.daysContainer!==void 0?B.className.indexOf("hidden")===-1&&B.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(B):!1}function ke(B){var Z=B.target===t._input,de=t._input.value.trimEnd()!==mt();Z&&de&&!(B.relatedTarget&&pe(B.relatedTarget))&&t.setDate(t._input.value,!0,B.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function we(B){var Z=hi(B),de=t.config.wrap?n.contains(Z):Z===t._input,ye=t.config.allowInput,Ye=t.isOpen&&(!ye||!de),ot=t.config.inline&&de&&!ye;if(B.keyCode===13&&de){if(ye)return t.setDate(t._input.value,!0,Z===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),Z.blur();t.open()}else if(pe(Z)||Ye||ot){var Tt=!!t.timeContainer&&t.timeContainer.contains(Z);switch(B.keyCode){case 13:Tt?(B.preventDefault(),c(),rt()):be(B);break;case 27:B.preventDefault(),rt();break;case 8:case 46:de&&!t.config.allowInput&&(B.preventDefault(),t.clear());break;case 37:case 39:if(!Tt&&!de){B.preventDefault();var at=s();if(t.daysContainer!==void 0&&(ye===!1||at&&ue(at))){var wt=B.keyCode===39?1:-1;B.ctrlKey?(B.stopPropagation(),ce(wt),A(E(1),0)):A(void 0,wt)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:B.preventDefault();var ut=B.keyCode===40?1:-1;t.daysContainer&&Z.$i!==void 0||Z===t.input||Z===t.altInput?B.ctrlKey?(B.stopPropagation(),Se(t.currentYear-ut),A(E(1),0)):Tt||A(void 0,ut*7):Z===t.currentYearElement?Se(t.currentYear-ut):t.config.enableTime&&(!Tt&&t.hourElement&&t.hourElement.focus(),c(B),t._debouncedChange());break;case 9:if(Tt){var St=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(dn){return dn}),Rt=St.indexOf(Z);if(Rt!==-1){var _n=St[Rt+(B.shiftKey?-1:1)];B.preventDefault(),(_n||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(Z)&&B.shiftKey&&(B.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&Z===t.amPM)switch(B.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],f(),gt();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],f(),gt();break}(de||pe(Z))&&Xe("onKeyDown",B)}function ae(B,Z){if(Z===void 0&&(Z="flatpickr-day"),!(t.selectedDates.length!==1||B&&(!B.classList.contains(Z)||B.classList.contains("flatpickr-disabled")))){for(var de=B?B.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),ye=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),Ye=Math.min(de,t.selectedDates[0].getTime()),ot=Math.max(de,t.selectedDates[0].getTime()),Tt=!1,at=0,wt=0,ut=Ye;ut<ot;ut+=PE.DAY)he(new Date(ut),!0)||(Tt=Tt||ut>Ye&&ut<ot,ut<ye&&(!at||ut>at)?at=ut:ut>ye&&(!wt||ut<wt)&&(wt=ut));var St=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+Z));St.forEach(function(Rt){var _n=Rt.dateObj,dn=_n.getTime(),mn=at>0&&dn<at||wt>0&&dn>wt;if(mn){Rt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(xn){Rt.classList.remove(xn)});return}else if(Tt&&!mn)return;["startRange","inRange","endRange","notAllowed"].forEach(function(xn){Rt.classList.remove(xn)}),B!==void 0&&(B.classList.add(de<=t.selectedDates[0].getTime()?"startRange":"endRange"),ye<de&&dn===ye?Rt.classList.add("startRange"):ye>de&&dn===ye&&Rt.classList.add("endRange"),dn>=at&&(wt===0||dn<=wt)&&OE(dn,ye,de)&&Rt.classList.add("inRange"))})}}function xe(){t.isOpen&&!t.config.static&&!t.config.inline&&Ie()}function se(B,Z){if(Z===void 0&&(Z=t._positionElement),t.isMobile===!0){if(B){B.preventDefault();var de=hi(B);de&&de.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Xe("onOpen");return}else if(t._input.disabled||t.config.inline)return;var ye=t.isOpen;t.isOpen=!0,ye||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Xe("onOpen"),Ie(Z)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(B===void 0||!t.timeContainer.contains(B.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function ge(B){return function(Z){var de=t.config["_"+B+"Date"]=t.parseDate(Z,t.config.dateFormat),ye=t.config["_"+(B==="min"?"max":"min")+"Date"];de!==void 0&&(t[B==="min"?"minDateHasTime":"maxDateHasTime"]=de.getHours()>0||de.getMinutes()>0||de.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(Ye){return he(Ye)}),!t.selectedDates.length&&B==="min"&&h(de),gt()),t.daysContainer&&(je(),de!==void 0?t.currentYearElement[B]=de.getFullYear().toString():t.currentYearElement.removeAttribute(B),t.currentYearElement.disabled=!!ye&&de!==void 0&&ye.getFullYear()===de.getFullYear())}}function ee(){var B=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Z=Rn(Rn({},JSON.parse(JSON.stringify(n.dataset||{}))),e),de={};t.config.parseDate=Z.parseDate,t.config.formatDate=Z.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(St){t.config._enable=He(St)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(St){t.config._disable=He(St)}});var ye=Z.mode==="time";if(!Z.dateFormat&&(Z.enableTime||ye)){var Ye=bn.defaultConfig.dateFormat||ns.dateFormat;de.dateFormat=Z.noCalendar||ye?"H:i"+(Z.enableSeconds?":S":""):Ye+" H:i"+(Z.enableSeconds?":S":"")}if(Z.altInput&&(Z.enableTime||ye)&&!Z.altFormat){var ot=bn.defaultConfig.altFormat||ns.altFormat;de.altFormat=Z.noCalendar||ye?"h:i"+(Z.enableSeconds?":S K":" K"):ot+(" h:i"+(Z.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:ge("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:ge("max")});var Tt=function(St){return function(Rt){t.config[St==="min"?"_minTime":"_maxTime"]=t.parseDate(Rt,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Tt("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Tt("max")}),Z.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,de,Z);for(var at=0;at<B.length;at++)t.config[B[at]]=t.config[B[at]]===!0||t.config[B[at]]==="true";jc.filter(function(St){return t.config[St]!==void 0}).forEach(function(St){t.config[St]=Uc(t.config[St]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var at=0;at<t.config.plugins.length;at++){var wt=t.config.plugins[at](t)||{};for(var ut in wt)jc.indexOf(ut)>-1?t.config[ut]=Uc(wt[ut]).map(o).concat(t.config[ut]):typeof Z[ut]>"u"&&(t.config[ut]=wt[ut])}Z.altInputClass||(t.config.altInputClass=ve().className+" "+t.config.altInputClass),Xe("onParseConfig")}function ve(){return t.config.wrap?n.querySelector("[data-input]"):n}function Ce(){typeof t.config.locale!="object"&&typeof bn.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Rn(Rn({},bn.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?bn.l10ns[t.config.locale]:void 0),ha.D="("+t.l10n.weekdays.shorthand.join("|")+")",ha.l="("+t.l10n.weekdays.longhand.join("|")+")",ha.M="("+t.l10n.months.shorthand.join("|")+")",ha.F="("+t.l10n.months.longhand.join("|")+")",ha.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var B=Rn(Rn({},e),JSON.parse(JSON.stringify(n.dataset||{})));B.time_24hr===void 0&&bn.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=Vg(t),t.parseDate=Nu({config:t.config,l10n:t.l10n})}function Ie(B){if(typeof t.config.position=="function")return void t.config.position(t,B);if(t.calendarContainer!==void 0){Xe("onPreCalendarPosition");var Z=B||t._positionElement,de=Array.prototype.reduce.call(t.calendarContainer.children,(function(Qn,Gi){return Qn+Gi.offsetHeight}),0),ye=t.calendarContainer.offsetWidth,Ye=t.config.position.split(" "),ot=Ye[0],Tt=Ye.length>1?Ye[1]:null,at=Z.getBoundingClientRect(),wt=window.innerHeight-at.bottom,ut=ot==="above"||ot!=="below"&&wt<de&&at.top>de,St=window.pageYOffset+at.top+(ut?-de-2:Z.offsetHeight+2);if(Hn(t.calendarContainer,"arrowTop",!ut),Hn(t.calendarContainer,"arrowBottom",ut),!t.config.inline){var Rt=window.pageXOffset+at.left,_n=!1,dn=!1;Tt==="center"?(Rt-=(ye-at.width)/2,_n=!0):Tt==="right"&&(Rt-=ye-at.width,dn=!0),Hn(t.calendarContainer,"arrowLeft",!_n&&!dn),Hn(t.calendarContainer,"arrowCenter",_n),Hn(t.calendarContainer,"arrowRight",dn);var mn=window.document.body.offsetWidth-(window.pageXOffset+at.right),xn=Rt+ye>window.document.body.offsetWidth,Zi=mn+ye>window.document.body.offsetWidth;if(Hn(t.calendarContainer,"rightMost",xn),!t.config.static)if(t.calendarContainer.style.top=St+"px",!xn)t.calendarContainer.style.left=Rt+"px",t.calendarContainer.style.right="auto";else if(!Zi)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=mn+"px";else{var an=ze();if(an===void 0)return;var kn=window.document.body.offsetWidth,Cn=Math.max(0,kn/2-ye/2),An=".flatpickr-calendar.centerMost:before",Xn=".flatpickr-calendar.centerMost:after",wi=an.cssRules.length,Li="{left:"+at.left+"px;right:auto;}";Hn(t.calendarContainer,"rightMost",!1),Hn(t.calendarContainer,"centerMost",!0),an.insertRule(An+","+Xn+Li,wi),t.calendarContainer.style.left=Cn+"px",t.calendarContainer.style.right="auto"}}}}function ze(){for(var B=null,Z=0;Z<document.styleSheets.length;Z++){var de=document.styleSheets[Z];if(de.cssRules){try{de.cssRules}catch{continue}B=de;break}}return B??qe()}function qe(){var B=document.createElement("style");return document.head.appendChild(B),B.sheet}function je(){t.config.noCalendar||t.isMobile||(j(),Qe(),L())}function rt(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function be(B){B.preventDefault(),B.stopPropagation();var Z=function(St){return St.classList&&St.classList.contains("flatpickr-day")&&!St.classList.contains("flatpickr-disabled")&&!St.classList.contains("notAllowed")},de=Ug(hi(B),Z);if(de!==void 0){var ye=de,Ye=t.latestSelectedDateObj=new Date(ye.dateObj.getTime()),ot=(Ye.getMonth()<t.currentMonth||Ye.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=ye,t.config.mode==="single")t.selectedDates=[Ye];else if(t.config.mode==="multiple"){var Tt=tt(Ye);Tt?t.selectedDates.splice(parseInt(Tt),1):t.selectedDates.push(Ye)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=Ye,t.selectedDates.push(Ye),vi(Ye,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(St,Rt){return St.getTime()-Rt.getTime()}));if(f(),ot){var at=t.currentYear!==Ye.getFullYear();t.currentYear=Ye.getFullYear(),t.currentMonth=Ye.getMonth(),at&&(Xe("onYearChange"),j()),Xe("onMonthChange")}if(Qe(),L(),gt(),!ot&&t.config.mode!=="range"&&t.config.showMonths===1?w(ye):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var wt=t.config.mode==="single"&&!t.config.enableTime,ut=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(wt||ut)&&rt()}m()}}var Le={locale:[Ce,X],showMonths:[W,l,z],minDate:[S],maxDate:[S],positionElement:[Me],clickOpens:[function(){t.config.clickOpens===!0?(b(t._input,"focus",t.open),b(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function Ke(B,Z){if(B!==null&&typeof B=="object"){Object.assign(t.config,B);for(var de in B)Le[de]!==void 0&&Le[de].forEach(function(ye){return ye()})}else t.config[B]=Z,Le[B]!==void 0?Le[B].forEach(function(ye){return ye()}):jc.indexOf(B)>-1&&(t.config[B]=Uc(Z));t.redraw(),gt(!0)}function st(B,Z){var de=[];if(B instanceof Array)de=B.map(function(ye){return t.parseDate(ye,Z)});else if(B instanceof Date||typeof B=="number")de=[t.parseDate(B,Z)];else if(typeof B=="string")switch(t.config.mode){case"single":case"time":de=[t.parseDate(B,Z)];break;case"multiple":de=B.split(t.config.conjunction).map(function(ye){return t.parseDate(ye,Z)});break;case"range":de=B.split(t.l10n.rangeSeparator).map(function(ye){return t.parseDate(ye,Z)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(B)));t.selectedDates=t.config.allowInvalidPreload?de:de.filter(function(ye){return ye instanceof Date&&he(ye,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(ye,Ye){return ye.getTime()-Ye.getTime()})}function it(B,Z,de){if(Z===void 0&&(Z=!1),de===void 0&&(de=t.config.dateFormat),B!==0&&!B||B instanceof Array&&B.length===0)return t.clear(Z);st(B,de),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),S(void 0,Z),h(),t.selectedDates.length===0&&t.clear(!1),gt(Z),Z&&Xe("onChange")}function He(B){return B.slice().map(function(Z){return typeof Z=="string"||typeof Z=="number"||Z instanceof Date?t.parseDate(Z,void 0,!0):Z&&typeof Z=="object"&&Z.from&&Z.to?{from:t.parseDate(Z.from,void 0),to:t.parseDate(Z.to,void 0)}:Z}).filter(function(Z){return Z})}function Je(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var B=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);B&&st(B,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Fe(){if(t.input=ve(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Yt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Me()}function Me(){t._positionElement=t.config.positionElement||t._input}function Ne(){var B=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Yt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=B,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=B==="datetime-local"?"Y-m-d\\TH:i:S":B==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}b(t.mobileInput,"change",function(Z){t.setDate(hi(Z).value,!1,t.mobileFormatStr),Xe("onChange"),Xe("onClose")})}function Ze(B){if(t.isOpen===!0)return t.close();t.open(B)}function Xe(B,Z){if(t.config!==void 0){var de=t.config[B];if(de!==void 0&&de.length>0)for(var ye=0;de[ye]&&ye<de.length;ye++)de[ye](t.selectedDates,t.input.value,t,Z);B==="onChange"&&(t.input.dispatchEvent(vt("change")),t.input.dispatchEvent(vt("input")))}}function vt(B){var Z=document.createEvent("Event");return Z.initEvent(B,!0,!0),Z}function tt(B){for(var Z=0;Z<t.selectedDates.length;Z++){var de=t.selectedDates[Z];if(de instanceof Date&&vi(de,B)===0)return""+Z}return!1}function We(B){return t.config.mode!=="range"||t.selectedDates.length<2?!1:vi(B,t.selectedDates[0])>=0&&vi(B,t.selectedDates[1])<=0}function Qe(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(B,Z){var de=new Date(t.currentYear,t.currentMonth,1);de.setMonth(t.currentMonth+Z),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[Z].textContent=Ol(de.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=de.getMonth().toString(),B.value=de.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function mt(B){var Z=B||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(de){return t.formatDate(de,Z)}).filter(function(de,ye,Ye){return t.config.mode!=="range"||t.config.enableTime||Ye.indexOf(de)===ye}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function gt(B){B===void 0&&(B=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=mt(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=mt(t.config.altFormat)),B!==!1&&Xe("onValueUpdate")}function nt(B){var Z=hi(B),de=t.prevMonthNav.contains(Z),ye=t.nextMonthNav.contains(Z);de||ye?ce(de?-1:1):t.yearElements.indexOf(Z)>=0?Z.select():Z.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):Z.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function Oe(B){B.preventDefault();var Z=B.type==="keydown",de=hi(B),ye=de;t.amPM!==void 0&&de===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Ii(t.amPM.textContent===t.l10n.amPM[0])]);var Ye=parseFloat(ye.getAttribute("min")),ot=parseFloat(ye.getAttribute("max")),Tt=parseFloat(ye.getAttribute("step")),at=parseInt(ye.value,10),wt=B.delta||(Z?B.which===38?1:-1:0),ut=at+Tt*wt;if(typeof ye.value<"u"&&ye.value.length===2){var St=ye===t.hourElement,Rt=ye===t.minuteElement;ut<Ye?(ut=ot+ut+Ii(!St)+(Ii(St)&&Ii(!t.amPM)),Rt&&D(void 0,-1,t.hourElement)):ut>ot&&(ut=ye===t.hourElement?ut-ot-Ii(!t.amPM):Ye,Rt&&D(void 0,1,t.hourElement)),t.amPM&&St&&(Tt===1?ut+at===23:Math.abs(ut-at)>Tt)&&(t.amPM.textContent=t.l10n.amPM[Ii(t.amPM.textContent===t.l10n.amPM[0])]),ye.value=ii(ut)}}return a(),t}function is(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),i=[],a=0;a<t.length;a++){var s=t[a];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=AE(s,e||{}),i.push(s._flatpickr)}catch(o){console.error(o)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return is(this,n)},HTMLElement.prototype.flatpickr=function(n){return is([this],n)});var bn=function(n,e){return typeof n=="string"?is(window.document.querySelectorAll(n),e):n instanceof Node?is([n],e):is(n,e)};bn.defaultConfig={};bn.l10ns={en:Rn({},vo),default:Rn({},vo)};bn.localize=function(n){bn.l10ns.default=Rn(Rn({},bn.l10ns.default),n)};bn.setDefaults=function(n){bn.defaultConfig=Rn(Rn({},bn.defaultConfig),n)};bn.parseDate=Nu({});bn.formatDate=Vg({});bn.compareDates=vi;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return is(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=bn);var LE=x("<input/>");function Ru(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","formattedValue","element","dateFormat","options","input","flatpickr"]);Ue(e,!1);const a=new Set(["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"]);let s=te(e,"value",12,void 0),o=te(e,"formattedValue",12,""),l=te(e,"element",8,void 0),c=te(e,"dateFormat",8,void 0),u=te(e,"options",24,()=>({})),d=P(!1),f=te(e,"input",12,void 0),h=te(e,"flatpickr",12,void 0);un(()=>{const I=l()??f(),C=_(u());return C.onReady.push((w,E,O)=>{s()===void 0&&b(w,E,O),Tn().then(()=>{y(d,!0)})}),h(bn(I,Object.assign(C,l()?{wrap:!0}:{}))),()=>{h().destroy()}});const v=qt();function _(I={}){I=Object.assign({},I);for(const C of a){const w=(E,O,A)=>{v(m(C),[E,O,A])};C in I?(Array.isArray(I[C])||(I[C]=[I[C]]),I[C].push(w)):I[C]=[w]}return I.onChange&&!I.onChange.includes(b)&&I.onChange.push(b),I}function b(I,C,w){const E=k(w,I);!S(s(),E)&&(s()||E)&&s(E),o(C)}function m(I){return I.charAt(2).toLowerCase()+I.substring(3)}function k(I,C){return(I?.config?.mode??"single")==="single"?C[0]:C}function S(I,C){return!!(I==C||I instanceof Date&&C instanceof Date&&I.valueOf()===C.valueOf()||Array.isArray(I)&&Array.isArray(C)&&I.length===C.length&&I.every((w,E)=>w===C[E]))}ie(()=>(N(h()),r(d),N(s()),N(c())),()=>{h()&&r(d)&&(S(s(),k(h(),h().selectedDates))||h().setDate(s(),!0,c()))}),ie(()=>(N(h()),r(d),N(u())),()=>{if(h()&&r(d))for(const[I,C]of Object.entries(_(u())))h().set(I,C)}),dt(),Be();var $=et(),D=F($);Zt(D,e,"default",{},I=>{var C=LE();ss(C,()=>({...i}),void 0,void 0,void 0,void 0,!0),pt(C,w=>f(w),()=>f()),p(I,C)}),p(n,$),Ve()}var NE=x("<label>Min date (UTC)</label> <!>",1),RE=x("<label>Max date (UTC)</label> <!>",1),FE=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function qE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=te(e,"field",12),s=te(e,"key",8,""),o=P(a()?.min),l=P(a()?.max);function c(u,d){u.detail&&u.detail.length==3&&a(a()[d]=u.detail[1],!0)}ie(()=>(r(o),N(a())),()=>{r(o)!=a()?.min&&y(o,a()?.min)}),ie(()=>(r(l),N(a())),()=>{r(l)!=a()?.max&&y(l,a()?.max)}),dt(),Be(),_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(u){a(u)},$$events:{rename(u){lt.call(this,e,u)},remove(u){lt.call(this,e,u)},duplicate(u){lt.call(this,e,u)}},$$slots:{options:(u,d)=>{var f=FE(),h=T(f),v=T(h);De(v,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ee,$$slots:{default:(m,k)=>{const S=ne(()=>k.uniqueId);var $=NE(),D=F($),I=g(D,2);{let C=ne(()=>(N(R),M(()=>R.defaultFlatpickrOptions())));Ru(I,{get id(){return r(S)},get options(){return r(C)},get value(){return r(o)},set value(w){y(o,w)},get formattedValue(){return a().min},set formattedValue(w){a(a().min=w,!0)},$$events:{close:w=>c(w,"min")},$$legacy:!0})}V(()=>H(D,"for",r(S))),p(m,$)}}});var _=g(h,2),b=T(_);De(b,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ee,$$slots:{default:(m,k)=>{const S=ne(()=>k.uniqueId);var $=RE(),D=F($),I=g(D,2);{let C=ne(()=>(N(R),M(()=>R.defaultFlatpickrOptions())));Ru(I,{get id(){return r(S)},get options(){return r(C)},get value(){return r(l)},set value(w){y(l,w)},get formattedValue(){return a().max},set formattedValue(w){a(a().max=w,!0)},$$events:{close:w=>c(w,"max")},$$legacy:!0})}V(()=>H(D,"for",r(S))),p(m,$)}}}),p(u,f)}},$$legacy:!0})),Ve()}var zE=x('<label>Max size <small>(bytes)</small></label> <input type="number" step="1" min="0" placeholder="Default to max ~5MB"/>',1),jE=x('<input type="checkbox"/> <label><span class="txt">Strip urls domain</span> <i class="ri-information-line link-hint"></i></label>',1),UE=x("<!> <!>",1);function VE(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=te(e,"field",12),s=te(e,"key",8,"");Be(),_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){lt.call(this,e,o)},remove(o){lt.call(this,e,o)},duplicate(o){lt.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=UE(),u=F(c);De(u,{class:"form-field m-b-sm",get name(){return`fields.${s()??""}.maxSize`},children:Ee,$$slots:{default:(f,h)=>{const v=ne(()=>h.uniqueId);var _=zE(),b=F(_),m=g(b,2);H(m,"max",M(()=>Number.MAX_SAFE_INTEGER)),V(()=>{H(b,"for",r(v)),H(m,"id",r(v)),zn(m,(N(a()),M(()=>a().maxSize||"")))}),re("input",m,k=>a(a().maxSize=parseInt(k.target.value,10),!0)),p(f,_)}}});var d=g(u,2);De(d,{class:"form-field form-field-toggle",get name(){return`fields.${s()??""}.convertURLs`},children:Ee,$$slots:{default:(f,h)=>{const v=ne(()=>h.uniqueId);var _=jE(),b=F(_),m=g(b,2),k=g(T(m),2);Ge(k,(S,$)=>ht?.(S,$),()=>({text:"This could help making the editor content more portable between environments since there will be no local base url to replace."})),V(()=>{H(b,"id",r(v)),H(m,"for",r(v))}),Xt(b,()=>a().convertURLs,S=>a(a().convertURLs=S,!0)),p(f,_)}}}),p(o,c)}},$$legacy:!0})),Ve()}var BE=x('<label><span class="txt">Except domains</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block">Use comma as separator.</div>',1),HE=x('<label><span class="txt">Only domains</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block">Use comma as separator.</div>',1),WE=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function Bg(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=te(e,"field",12),s=te(e,"key",8,"");Be(),_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){lt.call(this,e,o)},remove(o){lt.call(this,e,o)},duplicate(o){lt.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=WE(),u=T(c),d=T(u);De(d,{class:"form-field",get name(){return`fields.${s()??""}.exceptDomains`},children:Ee,$$slots:{default:(v,_)=>{const b=ne(()=>_.uniqueId);var m=BE(),k=F(m),S=g(T(k),2);Ge(S,(D,I)=>ht?.(D,I),()=>({text:`List of domains that are NOT allowed. 
 This field is disabled if "Only domains" is set.`,position:"top"}));var $=g(k,2);{let D=ne(()=>(N(R),N(a()),M(()=>!R.isEmpty(a().onlyDomains))));ho($,{get id(){return r(b)},get disabled(){return r(D)},get value(){return a().exceptDomains},set value(I){a(a().exceptDomains=I,!0)},$$legacy:!0})}V(()=>H(k,"for",r(b))),p(v,m)}}});var f=g(u,2),h=T(f);De(h,{class:"form-field",get name(){return`fields.${s()??""}.onlyDomains`},children:Ee,$$slots:{default:(v,_)=>{const b=ne(()=>_.uniqueId);var m=HE(),k=F(m),S=g(T(k),2);Ge(S,(D,I)=>ht?.(D,I),()=>({text:`List of domains that are ONLY allowed. 
 This field is disabled if "Except domains" is set.`,position:"top"}));var $=g(k,2);{let D=ne(()=>(N(R),N(a()),M(()=>!R.isEmpty(a().exceptDomains))));ho($,{get id(){return`${r(b)??""}.onlyDomains`},get disabled(){return r(D)},get value(){return a().onlyDomains},set value(I){a(a().onlyDomains=I,!0)},$$legacy:!0})}V(()=>H(k,"for",`${r(b)??""}.onlyDomains`)),p(v,m)}}}),p(o,c)}},$$legacy:!0})),Ve()}var YE=x('<span class="txt"> </span> <small class="txt-hint"> </small>',1);function Tv(n,e){Ue(e,!1);let t=te(e,"item",24,()=>({}));Be();var i=YE(),a=F(i),s=T(a),o=g(a,2),l=T(o);V(()=>{$e(s,(N(t()),M(()=>t().ext||"N/A"))),$e(l,(N(t()),M(()=>t().mimeType)))}),p(n,i),Ve()}const KE=[{ext:"",mimeType:"application/octet-stream"},{ext:".xpm",mimeType:"image/x-xpixmap"},{ext:".7z",mimeType:"application/x-7z-compressed"},{ext:".zip",mimeType:"application/zip"},{ext:".xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{ext:".docx",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{ext:".pptx",mimeType:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{ext:".epub",mimeType:"application/epub+zip"},{ext:".apk",mimeType:"application/vnd.android.package-archive"},{ext:".jar",mimeType:"application/jar"},{ext:".odt",mimeType:"application/vnd.oasis.opendocument.text"},{ext:".ott",mimeType:"application/vnd.oasis.opendocument.text-template"},{ext:".ods",mimeType:"application/vnd.oasis.opendocument.spreadsheet"},{ext:".ots",mimeType:"application/vnd.oasis.opendocument.spreadsheet-template"},{ext:".odp",mimeType:"application/vnd.oasis.opendocument.presentation"},{ext:".otp",mimeType:"application/vnd.oasis.opendocument.presentation-template"},{ext:".odg",mimeType:"application/vnd.oasis.opendocument.graphics"},{ext:".otg",mimeType:"application/vnd.oasis.opendocument.graphics-template"},{ext:".odf",mimeType:"application/vnd.oasis.opendocument.formula"},{ext:".odc",mimeType:"application/vnd.oasis.opendocument.chart"},{ext:".sxc",mimeType:"application/vnd.sun.xml.calc"},{ext:".pdf",mimeType:"application/pdf"},{ext:".fdf",mimeType:"application/vnd.fdf"},{ext:"",mimeType:"application/x-ole-storage"},{ext:".msi",mimeType:"application/x-ms-installer"},{ext:".aaf",mimeType:"application/octet-stream"},{ext:".msg",mimeType:"application/vnd.ms-outlook"},{ext:".xls",mimeType:"application/vnd.ms-excel"},{ext:".pub",mimeType:"application/vnd.ms-publisher"},{ext:".ppt",mimeType:"application/vnd.ms-powerpoint"},{ext:".doc",mimeType:"application/msword"},{ext:".ps",mimeType:"application/postscript"},{ext:".psd",mimeType:"image/vnd.adobe.photoshop"},{ext:".p7s",mimeType:"application/pkcs7-signature"},{ext:".ogg",mimeType:"application/ogg"},{ext:".oga",mimeType:"audio/ogg"},{ext:".ogv",mimeType:"video/ogg"},{ext:".png",mimeType:"image/png"},{ext:".png",mimeType:"image/vnd.mozilla.apng"},{ext:".jpg",mimeType:"image/jpeg"},{ext:".jxl",mimeType:"image/jxl"},{ext:".jp2",mimeType:"image/jp2"},{ext:".jpf",mimeType:"image/jpx"},{ext:".jpm",mimeType:"image/jpm"},{ext:".jxs",mimeType:"image/jxs"},{ext:".gif",mimeType:"image/gif"},{ext:".webp",mimeType:"image/webp"},{ext:".exe",mimeType:"application/vnd.microsoft.portable-executable"},{ext:"",mimeType:"application/x-elf"},{ext:"",mimeType:"application/x-object"},{ext:"",mimeType:"application/x-executable"},{ext:".so",mimeType:"application/x-sharedlib"},{ext:"",mimeType:"application/x-coredump"},{ext:".a",mimeType:"application/x-archive"},{ext:".deb",mimeType:"application/vnd.debian.binary-package"},{ext:".tar",mimeType:"application/x-tar"},{ext:".xar",mimeType:"application/x-xar"},{ext:".bz2",mimeType:"application/x-bzip2"},{ext:".fits",mimeType:"application/fits"},{ext:".tiff",mimeType:"image/tiff"},{ext:".bmp",mimeType:"image/bmp"},{ext:".ico",mimeType:"image/x-icon"},{ext:".mp3",mimeType:"audio/mpeg"},{ext:".flac",mimeType:"audio/flac"},{ext:".midi",mimeType:"audio/midi"},{ext:".ape",mimeType:"audio/ape"},{ext:".mpc",mimeType:"audio/musepack"},{ext:".amr",mimeType:"audio/amr"},{ext:".wav",mimeType:"audio/wav"},{ext:".aiff",mimeType:"audio/aiff"},{ext:".au",mimeType:"audio/basic"},{ext:".mpeg",mimeType:"video/mpeg"},{ext:".mov",mimeType:"video/quicktime"},{ext:".mp4",mimeType:"video/mp4"},{ext:".avif",mimeType:"image/avif"},{ext:".3gp",mimeType:"video/3gpp"},{ext:".3g2",mimeType:"video/3gpp2"},{ext:".mp4",mimeType:"audio/mp4"},{ext:".mqv",mimeType:"video/quicktime"},{ext:".m4a",mimeType:"audio/x-m4a"},{ext:".m4v",mimeType:"video/x-m4v"},{ext:".heic",mimeType:"image/heic"},{ext:".heic",mimeType:"image/heic-sequence"},{ext:".heif",mimeType:"image/heif"},{ext:".heif",mimeType:"image/heif-sequence"},{ext:".mj2",mimeType:"video/mj2"},{ext:".dvb",mimeType:"video/vnd.dvb.file"},{ext:".webm",mimeType:"video/webm"},{ext:".avi",mimeType:"video/x-msvideo"},{ext:".flv",mimeType:"video/x-flv"},{ext:".mkv",mimeType:"video/x-matroska"},{ext:".asf",mimeType:"video/x-ms-asf"},{ext:".aac",mimeType:"audio/aac"},{ext:".voc",mimeType:"audio/x-unknown"},{ext:".m3u",mimeType:"application/vnd.apple.mpegurl"},{ext:".rmvb",mimeType:"application/vnd.rn-realmedia-vbr"},{ext:".gz",mimeType:"application/gzip"},{ext:".class",mimeType:"application/x-java-applet"},{ext:".swf",mimeType:"application/x-shockwave-flash"},{ext:".crx",mimeType:"application/x-chrome-extension"},{ext:".ttf",mimeType:"font/ttf"},{ext:".woff",mimeType:"font/woff"},{ext:".woff2",mimeType:"font/woff2"},{ext:".otf",mimeType:"font/otf"},{ext:".ttc",mimeType:"font/collection"},{ext:".eot",mimeType:"application/vnd.ms-fontobject"},{ext:".wasm",mimeType:"application/wasm"},{ext:".shx",mimeType:"application/vnd.shx"},{ext:".shp",mimeType:"application/vnd.shp"},{ext:".dbf",mimeType:"application/x-dbf"},{ext:".dcm",mimeType:"application/dicom"},{ext:".rar",mimeType:"application/x-rar-compressed"},{ext:".djvu",mimeType:"image/vnd.djvu"},{ext:".mobi",mimeType:"application/x-mobipocket-ebook"},{ext:".lit",mimeType:"application/x-ms-reader"},{ext:".bpg",mimeType:"image/bpg"},{ext:".cbor",mimeType:"application/cbor"},{ext:".sqlite",mimeType:"application/vnd.sqlite3"},{ext:".dwg",mimeType:"image/vnd.dwg"},{ext:".nes",mimeType:"application/vnd.nintendo.snes.rom"},{ext:".lnk",mimeType:"application/x-ms-shortcut"},{ext:".macho",mimeType:"application/x-mach-binary"},{ext:".qcp",mimeType:"audio/qcelp"},{ext:".icns",mimeType:"image/x-icns"},{ext:".hdr",mimeType:"image/vnd.radiance"},{ext:".mrc",mimeType:"application/marc"},{ext:".mdb",mimeType:"application/x-msaccess"},{ext:".accdb",mimeType:"application/x-msaccess"},{ext:".zst",mimeType:"application/zstd"},{ext:".cab",mimeType:"application/vnd.ms-cab-compressed"},{ext:".rpm",mimeType:"application/x-rpm"},{ext:".xz",mimeType:"application/x-xz"},{ext:".lz",mimeType:"application/lzip"},{ext:".torrent",mimeType:"application/x-bittorrent"},{ext:".cpio",mimeType:"application/x-cpio"},{ext:"",mimeType:"application/tzif"},{ext:".xcf",mimeType:"image/x-xcf"},{ext:".pat",mimeType:"image/x-gimp-pat"},{ext:".gbr",mimeType:"image/x-gimp-gbr"},{ext:".glb",mimeType:"model/gltf-binary"},{ext:".cab",mimeType:"application/x-installshield"},{ext:".jxr",mimeType:"image/jxr"},{ext:".parquet",mimeType:"application/vnd.apache.parquet"},{ext:".txt",mimeType:"text/plain"},{ext:".html",mimeType:"text/html"},{ext:".svg",mimeType:"image/svg+xml"},{ext:".xml",mimeType:"text/xml"},{ext:".rss",mimeType:"application/rss+xml"},{ext:".atom",mimeType:"application/atom+xml"},{ext:".x3d",mimeType:"model/x3d+xml"},{ext:".kml",mimeType:"application/vnd.google-earth.kml+xml"},{ext:".xlf",mimeType:"application/x-xliff+xml"},{ext:".dae",mimeType:"model/vnd.collada+xml"},{ext:".gml",mimeType:"application/gml+xml"},{ext:".gpx",mimeType:"application/gpx+xml"},{ext:".tcx",mimeType:"application/vnd.garmin.tcx+xml"},{ext:".amf",mimeType:"application/x-amf"},{ext:".3mf",mimeType:"application/vnd.ms-package.3dmanufacturing-3dmodel+xml"},{ext:".xfdf",mimeType:"application/vnd.adobe.xfdf"},{ext:".owl",mimeType:"application/owl+xml"},{ext:".php",mimeType:"text/x-php"},{ext:".js",mimeType:"text/javascript"},{ext:".lua",mimeType:"text/x-lua"},{ext:".pl",mimeType:"text/x-perl"},{ext:".py",mimeType:"text/x-python"},{ext:".json",mimeType:"application/json"},{ext:".geojson",mimeType:"application/geo+json"},{ext:".har",mimeType:"application/json"},{ext:".ndjson",mimeType:"application/x-ndjson"},{ext:".rtf",mimeType:"text/rtf"},{ext:".srt",mimeType:"application/x-subrip"},{ext:".tcl",mimeType:"text/x-tcl"},{ext:".csv",mimeType:"text/csv"},{ext:".tsv",mimeType:"text/tab-separated-values"},{ext:".vcf",mimeType:"text/vcard"},{ext:".ics",mimeType:"text/calendar"},{ext:".warc",mimeType:"application/warc"},{ext:".vtt",mimeType:"text/vtt"}];var JE=x('<div class="separator"></div> <!> <div class="separator"></div>',1),ZE=x('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Images (jpg, png, svg, gif, webp)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Documents (pdf, doc/docx, xls/xlsx)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Videos (mp4, avi, mov, 3gp)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Archives (zip, 7zip, rar)</span></button>',1),GE=x('<label><span class="txt">Allowed mime types</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block"><div tabindex="0" role="button" class="inline-flex flex-gap-0"><span class="txt link-primary">Choose presets</span> <i class="ri-arrow-drop-down-fill" aria-hidden="true"></i> <!></div></div>',1),XE=x('<ul class="m-0"><li><strong>WxH</strong> (e.g. 100x50) - crop to WxH viewbox (from center)</li> <li><strong>WxHt</strong> (e.g. 100x50t) - crop to WxH viewbox (from top)</li> <li><strong>WxHb</strong> (e.g. 100x50b) - crop to WxH viewbox (from bottom)</li> <li><strong>WxHf</strong> (e.g. 100x50f) - fit inside a WxH viewbox (without cropping)</li> <li><strong>0xH</strong> (e.g. 0x50) - resize to H height preserving the aspect ratio</li> <li><strong>Wx0</strong> (e.g. 100x0) - resize to W width preserving the aspect ratio</li></ul>'),QE=x('<label><span class="txt">Thumb sizes</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block"><span class="txt">Use comma as separator.</span> <button type="button" class="inline-flex flex-gap-0"><span class="txt link-primary">Supported formats</span> <i class="ri-arrow-drop-down-fill" aria-hidden="true"></i> <!></button></div>',1),eO=x('<label>Max file size</label> <input type="number" step="1" min="0" placeholder="Default to max ~5MB"/> <div class="help-block">Must be in bytes.</div>',1),tO=x('<label>Max select</label> <input type="number" step="1" min="2" required placeholder="Default to single"/>',1),nO=x('<div class="col-sm-3"><!></div>'),iO=x('<input type="checkbox"/> <label><span class="txt">Protected</span></label> <small class="txt-hint">it will require View API rule permissions and file token to be accessible <a class="toggle-info" target="_blank" rel="noopener">(Learn more)</a></small>',1),rO=x('<div class="grid grid-sm"><div class="col-sm-12"><!></div> <div><!></div> <div><!></div> <!> <!></div>');function aO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=te(e,"field",12),s=te(e,"key",8,"");const o=[{label:"Single",value:!0},{label:"Multiple",value:!1}];let l=P(KE.slice()),c=P(a().maxSelect<=1),u=P(r(c));function d(){a(a().maxSelect=1,!0),a(a().thumbs=[],!0),a(a().mimeTypes=[],!0),y(c,!0),y(u,r(c))}function f(){if(R.isEmpty(a().mimeTypes))return;const h=[];for(const v of a().mimeTypes)r(l).find(_=>_.mimeType===v)||h.push({mimeType:v});h.length&&y(l,r(l).concat(h))}ie(()=>N(a()),()=>{typeof a().maxSelect>"u"?d():f()}),ie(()=>(r(u),r(c)),()=>{r(u)!=r(c)&&(y(u,r(c)),r(c)?a(a().maxSelect=1,!0):a(a().maxSelect=99,!0))}),dt(),Be(),_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(h){a(h)},$$events:{rename(h){lt.call(this,e,h)},remove(h){lt.call(this,e,h)},duplicate(h){lt.call(this,e,h)}},children:Ee,$$slots:{default:(h,v)=>{const _=ne(()=>v.interactive);var b=JE(),m=g(F(b),2);{let k=ne(()=>r(_)?"":"readonly");De(m,{get class(){return`form-field form-field-single-multiple-select ${r(k)??""}`},inlineError:!0,children:Ee,$$slots:{default:(S,$)=>{const D=ne(()=>$.uniqueId);{let I=ne(()=>!r(_));On(S,{get id(){return r(D)},get items(){return o},get readonly(){return r(I)},get keyOfSelected(){return r(c)},set keyOfSelected(C){y(c,C)},$$legacy:!0})}}}})}p(h,b)},options:(h,v)=>{var _=rO(),b=T(_),m=T(b);De(m,{class:"form-field",get name(){return`fields.${s()??""}.mimeTypes`},children:Ee,$$slots:{default:(E,O)=>{const A=ne(()=>O.uniqueId);var q=GE(),L=F(q),j=g(T(L),2);Ge(j,(z,X)=>ht?.(z,X),()=>({text:`Allow files ONLY with the listed mime types. 
 Leave empty for no restriction.`,position:"top"}));var U=g(L,2);On(U,{get id(){return r(A)},multiple:!0,searchable:!0,closable:!1,selectionKey:"mimeType",selectPlaceholder:"No restriction",get items(){return r(l)},get labelComponent(){return Tv},get optionComponent(){return Tv},get keyOfSelected(){return a().mimeTypes},set keyOfSelected(z){a(a().mimeTypes=z,!0)},$$legacy:!0});var W=g(U,2),Y=T(W),J=g(T(Y),4);Jn(J,{class:"dropdown dropdown-sm dropdown-nowrap dropdown-left",children:(z,X)=>{var oe=ZE(),ce=F(oe),le=g(ce,2),me=g(le,2),_e=g(me,2);re("click",ce,()=>{a(a().mimeTypes=["image/jpeg","image/png","image/svg+xml","image/gif","image/webp"],!0)}),re("click",le,()=>{a(a().mimeTypes=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],!0)}),re("click",me,()=>{a(a().mimeTypes=["video/mp4","video/x-ms-wmv","video/quicktime","video/3gpp"],!0)}),re("click",_e,()=>{a(a().mimeTypes=["application/zip","application/x-7z-compressed","application/x-rar-compressed"],!0)}),p(z,oe)},$$slots:{default:!0}}),V(()=>H(L,"for",r(A))),p(E,q)}}});var k=g(b,2),S=T(k);De(S,{class:"form-field",get name(){return`fields.${s()??""}.thumbs`},children:Ee,$$slots:{default:(E,O)=>{const A=ne(()=>O.uniqueId);var q=QE(),L=F(q),j=g(T(L),2);Ge(j,(z,X)=>ht?.(z,X),()=>({text:"List of additional thumb sizes for image files, along with the default thumb size of 100x100. The thumbs are generated lazily on first access.",position:"top"}));var U=g(L,2);ho(U,{get id(){return r(A)},placeholder:"e.g. 50x50, 480x720",get value(){return a().thumbs},set value(z){a(a().thumbs=z,!0)},$$legacy:!0});var W=g(U,2),Y=g(T(W),2),J=g(T(Y),4);Jn(J,{class:"dropdown dropdown-sm dropdown-center dropdown-nowrap p-r-10",children:(z,X)=>{var oe=XE();p(z,oe)},$$slots:{default:!0}}),V(()=>H(L,"for",r(A))),p(E,q)}}});var $=g(k,2),D=T($);De(D,{class:"form-field",get name(){return`fields.${s()??""}.maxSize`},children:Ee,$$slots:{default:(E,O)=>{const A=ne(()=>O.uniqueId);var q=eO(),L=F(q),j=g(L,2);H(j,"max",M(()=>Number.MAX_SAFE_INTEGER)),V(()=>{H(L,"for",r(A)),H(j,"id",r(A)),zn(j,(N(a()),M(()=>a().maxSize||"")))}),re("input",j,U=>a(a().maxSize=parseInt(U.target.value,10),!0)),p(E,q)}}});var I=g($,2);{var C=E=>{var O=nO(),A=T(O);De(A,{class:"form-field",get name(){return`fields.${s()??""}.maxSelect`},children:Ee,$$slots:{default:(q,L)=>{const j=ne(()=>L.uniqueId);var U=tO(),W=F(U),Y=g(W,2);H(Y,"max",M(()=>Number.MAX_SAFE_INTEGER)),V(()=>{H(W,"for",r(j)),H(Y,"id",r(j))}),xt(Y,()=>a().maxSelect,J=>a(a().maxSelect=J,!0)),p(q,U)}}}),p(E,O)};G(I,E=>{r(c)||E(C)})}var w=g(I,2);De(w,{class:"form-field form-field-toggle",get name(){return`fields.${s()??""}.protected`},children:Ee,$$slots:{default:(E,O)=>{const A=ne(()=>O.uniqueId);var q=iO(),L=F(q),j=g(L,2),U=g(j,2),W=g(T(U));V(()=>{H(L,"id",r(A)),H(j,"for",r(A)),H(W,"href",M(()=>"https://pocketbase.io/docs/files-handling#protected-files"))}),Xt(L,()=>a().protected,Y=>a(a().protected=Y,!0)),p(E,q)}}}),V(()=>{Re(k,1,$n(r(c)?"col-sm-8":"col-sm-6")),Re($,1,$n(r(c)?"col-sm-4":"col-sm-3"))}),p(h,_)}},$$legacy:!0})),Ve()}var sO=x('<label>Max size <small>(bytes)</small></label> <input type="number" step="1" min="0" placeholder="Default to max ~1MB"/>',1),oO=x('<i class="ri-arrow-up-s-line txt-sm"></i>'),lO=x('<i class="ri-arrow-down-s-line txt-sm"></i>'),cO=x(`<div class="block"><div class="alert alert-warning m-b-0 m-t-10"><div class="content">In order to support seamlessly both <code>application/json</code> and <code>multipart/form-data</code> requests, the following normalization rules are applied if the <code>json</code> field
                        is a <strong>plain string</strong>: <ul><li>"true" is converted to the json <code>true</code></li> <li>"false" is converted to the json <code>false</code></li> <li>"null" is converted to the json <code>null</code></li> <li>"[1,2,3]" is converted to the json <code>[1,2,3]</code></li> <li> <code></code></li> <li>numeric strings are converted to json number</li> <li>double quoted strings are left as they are (aka. without normalizations)</li> <li>any other string (empty string too) is double quoted</li></ul> Alternatively, if you want to avoid the string value normalizations, you can wrap your
                        data inside an object, eg.<code></code></div></div></div>`),uO=x('<!> <button type="button"><strong class="txt">String value normalizations</strong> <!></button> <!>',1);function dO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=te(e,"field",12),s=te(e,"key",8,""),o=P(!1);Be(),_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(l){a(l)},$$events:{rename(l){lt.call(this,e,l)},remove(l){lt.call(this,e,l)},duplicate(l){lt.call(this,e,l)}},$$slots:{options:(l,c)=>{var u=uO(),d=F(u);De(d,{class:"form-field m-b-sm",get name(){return`fields.${s()??""}.maxSize`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=sO(),I=F(D),C=g(I,2);H(C,"max",M(()=>Number.MAX_SAFE_INTEGER)),V(()=>{H(I,"for",r($)),H(C,"id",r($)),zn(C,(N(a()),M(()=>a().maxSize||"")))}),re("input",C,w=>a(a().maxSize=parseInt(w.target.value,10),!0)),p(k,D)}}});var f=g(d,2),h=g(T(f),2);{var v=k=>{var S=oO();p(k,S)},_=k=>{var S=lO();p(k,S)};G(h,k=>{r(o)?k(v):k(_,!1)})}var b=g(f,2);{var m=k=>{var S=cO(),$=T(S),D=T($),I=g(T(D),9),C=g(T(I),8),w=T(C);w.nodeValue='"{"a":1,"b":2}" is converted to the json ';var E=g(w);E.textContent='{"a":1,"b":2}';var O=g(I,2);O.textContent='{"data": anything}',Et(3,S,()=>vn,()=>({duration:150})),p(k,S)};G(b,k=>{r(o)&&k(m)})}V(()=>Re(f,1,`btn btn-sm ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),re("click",f,()=>{y(o,!r(o))}),p(l,u)}},$$legacy:!0})),Ve()}var fO=x('<label>Min</label> <input type="number"/>',1),hO=x('<label>Max</label> <input type="number"/>',1),vO=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>'),pO=x('<input type="checkbox"/> <label><span class="txt">No decimals</span> <i class="ri-information-line link-hint"></i></label>',1);function mO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=te(e,"field",12),s=te(e,"key",8,"");Be(),_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){lt.call(this,e,o)},remove(o){lt.call(this,e,o)},duplicate(o){lt.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=vO(),u=T(c),d=T(u);De(d,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ee,$$slots:{default:(v,_)=>{const b=ne(()=>_.uniqueId);var m=fO(),k=F(m),S=g(k,2);V(()=>{H(k,"for",r(b)),H(S,"id",r(b))}),xt(S,()=>a().min,$=>a(a().min=$,!0)),p(v,m)}}});var f=g(u,2),h=T(f);De(h,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ee,$$slots:{default:(v,_)=>{const b=ne(()=>_.uniqueId);var m=hO(),k=F(m),S=g(k,2);V(()=>{H(k,"for",r(b)),H(S,"id",r(b)),H(S,"min",(N(a()),M(()=>a().min)))}),xt(S,()=>a().max,$=>a(a().max=$,!0)),p(v,m)}}}),p(o,c)},optionsFooter:(o,l)=>{De(o,{class:"form-field form-field-toggle",get name(){return`fields.${s()??""}.onlyInt`},children:Ee,$$slots:{default:(c,u)=>{const d=ne(()=>u.uniqueId);var f=pO(),h=F(f),v=g(h,2),_=g(T(v),2);Ge(_,(b,m)=>ht?.(b,m),()=>({text:"Existing decimal numbers will not be affected."})),V(()=>{H(h,"id",r(d)),H(v,"for",r(d))}),Xt(h,()=>a().onlyInt,b=>a(a().onlyInt=b,!0)),p(c,f)}}})}},$$legacy:!0})),Ve()}var gO=x('<label>Min length</label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),bO=x('<label>Max length</label> <input type="number" step="1" placeholder="Up to 71 chars" max="71"/>',1),yO=x('<label>Bcrypt cost</label> <input type="number" placeholder="Default to 10" step="1" min="6" max="31"/>',1),_O=x('<label>Validation pattern</label> <input type="text" placeholder="ex. ^\\w+$"/>',1),xO=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function wO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=te(e,"field",12),s=te(e,"key",8,"");function o(){a(a().cost=11,!0)}ie(()=>N(a()),()=>{R.isEmpty(a().id)&&o()}),dt(),Be(),_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(l){a(l)},$$events:{rename(l){lt.call(this,e,l)},remove(l){lt.call(this,e,l)},duplicate(l){lt.call(this,e,l)}},$$slots:{options:(l,c)=>{var u=xO(),d=T(u),f=T(d);De(f,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ee,$$slots:{default:(S,$)=>{const D=ne(()=>$.uniqueId);var I=gO(),C=F(I),w=g(C,2);V(()=>{H(C,"for",r(D)),H(w,"id",r(D)),zn(w,(N(a()),M(()=>a().min||"")))}),re("input",w,E=>a(a().min=E.target.value<<0,!0)),p(S,I)}}});var h=g(d,2),v=T(h);De(v,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ee,$$slots:{default:(S,$)=>{const D=ne(()=>$.uniqueId);var I=bO(),C=F(I),w=g(C,2);V(()=>{H(C,"for",r(D)),H(w,"id",r(D)),H(w,"min",(N(a()),M(()=>a().min||0))),zn(w,(N(a()),M(()=>a().max||"")))}),re("input",w,E=>a(a().max=E.target.value<<0,!0)),p(S,I)}}});var _=g(h,2),b=T(_);De(b,{class:"form-field",get name(){return`fields.${s()??""}.cost`},children:Ee,$$slots:{default:(S,$)=>{const D=ne(()=>$.uniqueId);var I=yO(),C=F(I),w=g(C,2);V(()=>{H(C,"for",r(D)),H(w,"id",r(D)),zn(w,(N(a()),M(()=>a().cost||"")))}),re("input",w,E=>a(a().cost=E.target.value<<0,!0)),p(S,I)}}});var m=g(_,2),k=T(m);De(k,{class:"form-field",get name(){return`fields.${s()??""}.pattern`},children:Ee,$$slots:{default:(S,$)=>{const D=ne(()=>$.uniqueId);var I=_O(),C=F(I),w=g(C,2);V(()=>{H(C,"for",r(D)),H(w,"id",r(D))}),xt(w,()=>a().pattern,E=>a(a().pattern=E,!0)),p(S,I)}}}),p(l,u)}},$$legacy:!0})),Ve()}var kO=x('<hr/> <button type="button" class="btn btn-transparent btn-block btn-sm"><i class="ri-add-line"></i> <span class="txt">New collection</span></button>',1),SO=x('<!> <div class="separator"></div>',1),TO=x('<label><span class="txt">Allowed collections (optional, multi)</span> <i class="ri-information-line link-hint"></i></label> <!>',1),$O=x('<!> <div class="separator"></div>',1),IO=x('<div class="separator"></div> <!> <!> <div class="separator"></div>',1),CO=x('<label>Min select</label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),EO=x('<label>Max select</label> <input type="number" step="1" placeholder="Default to single"/>',1),OO=x('<div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div>',1),DO=x('<label><span class="txt">Cascade delete</span> <i class="ri-information-line link-hint"></i></label> <!>',1),PO=x('<div class="grid grid-sm"><!> <div class="col-sm-12"><!></div></div>'),MO=x("<!> <!>",1);function AO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);const a=()=>It(Gn,"$collections",s),[s,o]=At(),l=P(),c=P(),u=P();let d=te(e,"field",12),f=te(e,"key",8,"");const h=[{label:"Single",value:!0},{label:"Multiple",value:!1}],v=[{label:"False",value:!1},{label:"True",value:!0}];let _=P(null),b=P(d().maxSelect<=1),m=P(r(b));function k(){d(d().maxSelect=1,!0),d(d().collectionId=null,!0),d(d().collectionIds=[],!0),d(d().cascadeDelete=!1,!0),y(b,!0),y(m,r(b))}ie(()=>a(),()=>{y(l,a().filter(I=>!I.system&&I.type!="view"))}),ie(()=>N(d()),()=>{typeof d().maxSelect>"u"&&k()}),ie(()=>(r(m),r(b)),()=>{r(m)!=r(b)&&(y(m,r(b)),r(b)?(d(d().minSelect=0,!0),d(d().maxSelect=1,!0)):d(d().maxSelect=999,!0))}),ie(()=>(a(),N(d())),()=>{y(c,a().find(I=>I.id==d().collectionId)||null)}),ie(()=>N(d()),()=>{y(u,Array.isArray(d().collectionIds)&&d().collectionIds.length>0)}),dt(),Be();var S=MO(),$=F(S);_i($,tn({get key(){return f()}},()=>i,{get field(){return d()},set field(I){d(I)},$$events:{rename(I){lt.call(this,e,I)},remove(I){lt.call(this,e,I)},duplicate(I){lt.call(this,e,I)}},children:Ee,$$slots:{default:(I,C)=>{const w=ne(()=>C.interactive);var E=IO(),O=g(F(E),2);{var A=j=>{var U=SO(),W=F(U);{let Y=ne(()=>r(w)?"":"readonly");De(W,{get class(){return`form-field required ${r(Y)??""}`},inlineError:!0,get name(){return`fields.${f()??""}.collectionId`},children:Ee,$$slots:{default:(J,z)=>{const X=ne(()=>z.uniqueId);{let oe=ne(()=>(r(l),M(()=>r(l).length>5))),ce=ne(()=>(N(r(w)),N(d()),M(()=>!r(w)||d().id)));On(J,{get id(){return r(X)},get searchable(){return r(oe)},selectPlaceholder:"Select collection *",noOptionsText:"No collections found",selectionKey:"id",get items(){return r(l)},get readonly(){return r(ce)},get keyOfSelected(){return d().collectionId},set keyOfSelected(le){d(d().collectionId=le,!0)},$$slots:{afterOptions:(le,me)=>{var _e=kO(),pe=g(F(_e),2);re("click",pe,()=>r(_)?.show()),p(le,_e)}},$$legacy:!0})}}}})}p(j,U)},q=j=>{var U=$O(),W=F(U);De(W,{class:"form-field",get name(){return`fields.${f()??""}.collectionIds`},children:Ee,$$slots:{default:(Y,J)=>{const z=ne(()=>J.uniqueId);var X=TO(),oe=F(X),ce=g(T(oe),2);Ge(ce,(me,_e)=>ht?.(me,_e),()=>({text:"If set, the relation can point to records from multiple collections. Values are stored as '<collectionId>:<id>'.",position:"top"}));var le=g(oe,2);{let me=ne(()=>(r(l),M(()=>r(l).length>5))),_e=ne(()=>(N(r(w)),N(d()),M(()=>!r(w)||d().id)));On(le,{get id(){return r(z)},multiple:!0,get searchable(){return r(me)},selectPlaceholder:"Select allowed collections",noOptionsText:"No collections found",selectionKey:"id",get items(){return r(l)},get readonly(){return r(_e)},get keyOfSelected(){return d().collectionIds},set keyOfSelected(pe){d(d().collectionIds=pe,!0)},$$legacy:!0})}V(()=>H(oe,"for",r(z))),p(Y,X)}}}),p(j,U)};G(O,j=>{r(b)?j(A):j(q,!1)})}var L=g(O,2);{let j=ne(()=>r(w)?"":"readonly");De(L,{get class(){return`form-field form-field-single-multiple-select ${r(j)??""}`},inlineError:!0,children:Ee,$$slots:{default:(U,W)=>{const Y=ne(()=>W.uniqueId);{let J=ne(()=>!r(w));On(U,{get id(){return r(Y)},get items(){return h},get readonly(){return r(J)},get keyOfSelected(){return r(b)},set keyOfSelected(z){y(b,z)},$$legacy:!0})}}}})}p(I,E)},options:(I,C)=>{var w=PO(),E=T(w);{var O=L=>{var j=OO(),U=F(j),W=T(U);De(W,{class:"form-field",get name(){return`fields.${f()??""}.minSelect`},children:Ee,$$slots:{default:(z,X)=>{const oe=ne(()=>X.uniqueId);var ce=CO(),le=F(ce),me=g(le,2);V(()=>{H(le,"for",r(oe)),H(me,"id",r(oe)),zn(me,(N(d()),M(()=>d().minSelect||"")))}),re("input",me,_e=>d(d().minSelect=_e.target.value<<0,!0)),p(z,ce)}}});var Y=g(U,2),J=T(Y);De(J,{class:"form-field",get name(){return`fields.${f()??""}.maxSelect`},children:Ee,$$slots:{default:(z,X)=>{const oe=ne(()=>X.uniqueId);var ce=EO(),le=F(ce),me=g(le,2);V(()=>{H(le,"for",r(oe)),H(me,"id",r(oe)),H(me,"min",(N(d()),M(()=>d().minSelect||1)))}),xt(me,()=>d().maxSelect,_e=>d(d().maxSelect=_e,!0)),p(z,ce)}}}),p(L,j)};G(E,L=>{r(b)||L(O)})}var A=g(E,2),q=T(A);De(q,{class:"form-field",get name(){return`fields.${f()??""}.cascadeDelete`},children:Ee,$$slots:{default:(L,j)=>{const U=ne(()=>j.uniqueId);var W=DO(),Y=F(W),J=g(T(Y),2);Ge(J,(X,oe)=>ht?.(X,oe),()=>({text:[`Whether on ${r(c)?.name||"relation"} record deletion to delete also the current corresponding collection record(s).`,r(b)?null:`For "Multiple" relation fields the cascade delete is triggered only when all ${r(c)?.name||"relation"} ids are removed from the corresponding record.`].filter(Boolean).join(`

`),position:"top"}));var z=g(Y,2);On(z,{get id(){return r(U)},get items(){return v},get keyOfSelected(){return d().cascadeDelete},set keyOfSelected(X){d(d().cascadeDelete=X,!0)},$$legacy:!0}),V(()=>H(Y,"for",r(U))),p(L,W)}}}),p(I,w)}},$$legacy:!0}));var D=g($,2);pt(Ld(D,{$$events:{save:I=>{I?.detail?.collection?.id&&I.detail.collection.type!="view"&&d(d().collectionId=I.detail.collection.id,!0)}},$$legacy:!0}),I=>y(_,I),()=>r(_)),p(n,S),Ve(),o()}var LO=x('<div class="dropdown-item plain svelte-g7evcz"><span class="txt"> </span> <div class="flex-fill"></div> <button type="button" class="btn btn-circle btn-transparent btn-hint btn-xs" title="Remove"><i class="ri-close-line" aria-hidden="true"></i></button></div>'),NO=x('<div class="block"><!> <div class="new-item-form svelte-g7evcz"><div class="form-field form-field-sm m-0"><div class="input-group"><input type="text" class="new-item-input svelte-g7evcz"/> <div class="form-field-addon suffix"><button type="button" title="Add new"><i class="ri-add-line" aria-hidden="true"></i></button></div></div></div></div></div>'),RO=x('<div class="block"><input readonly="" type="text" class="formatted-value-input svelte-g7evcz"/> <!></div>');function FO(n,e){Ue(e,!1);const t=P();let i=te(e,"id",8,null),a=te(e,"items",28,()=>[]),s=te(e,"disabled",8,!1),o=te(e,"emptyPlaceholder",8,"Add items"),l=te(e,"newPlaceholder",8,"e.g. optionA"),c=P(),u=P("");function d(m){a(a()||[]),R.removeByValue(a(),m),a().length||r(c)?.focus()}function f(m){const k=m.trim();k.length&&(a(a()||[]),R.pushUnique(a(),k),y(u,""))}ie(()=>N(a()),()=>{y(t,a().join(" â¢ "))}),dt(),Be();var h=RO(),v=T(h),_=g(v,2);{var b=m=>{Jn(m,{class:"dropdown dropdown-block options-dropdown dropdown-left m-t-0 p-0",$$events:{hide:()=>y(u,"")},children:(k,S)=>{var $=NO(),D=T($);bt(D,3,a,L=>L,(L,j,U)=>{{let W=ne(()=>"options_"+i());hs(L,{get index(){return r(U)},get group(){return r(W)},get list(){return a()},set list(Y){a(Y)},children:(Y,J)=>{var z=LO(),X=T(z),oe=T(X),ce=g(X,4);V(()=>$e(oe,r(j))),re("click",ce,fn(()=>d(r(j)))),p(Y,z)},$$slots:{default:!0},$$legacy:!0})}});var I=g(D,2),C=T(I),w=T(C),E=T(w);Wi(E,!0),pt(E,L=>y(c,L),()=>r(c));var O=g(E,2),A=T(O);let q;V(()=>{H(E,"placeholder",l()),q=Re(A,1,"btn btn-transparent btn-xs btn-circle new-item-btn svelte-g7evcz",null,q,{"btn-disabled":!r(u).length})}),xt(E,()=>r(u),L=>y(u,L)),re("keydown",E,L=>{L.code==="Enter"&&(L.preventDefault(),f(L.target.value))}),re("click",A,()=>f(r(u))),re("dragover",$,fn(function(L){lt.call(this,e,L)})),re("dragleave",$,fn(function(L){lt.call(this,e,L)})),re("dragend",$,fn(function(L){lt.call(this,e,L)})),re("dragstart",$,fn(function(L){lt.call(this,e,L)})),re("drop",$,fn(function(L){lt.call(this,e,L)})),p(k,$)},$$slots:{default:!0}})};G(_,m=>{s()||m(b)})}V(()=>{H(v,"id",i()),v.disabled=s(),H(v,"placeholder",o()),zn(v,r(t)),H(v,"title",r(t))}),p(n,h),Ve()}var qO=x('<div class="separator"></div> <!> <div class="separator"></div> <!> <div class="separator"></div>',1),zO=x('<label>Max select</label> <input type="number" step="1" min="2" placeholder="Default to single"/>',1);function jO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=te(e,"field",12),s=te(e,"key",8,"");const o=[{label:"Single",value:!0},{label:"Multiple",value:!1}];let l=P(a().maxSelect<=1),c=P(r(l));function u(){a(a().maxSelect=1,!0),a(a().values=[],!0),y(l,!0),y(c,r(l))}ie(()=>N(a()),()=>{typeof a().maxSelect>"u"&&u()}),ie(()=>(r(c),r(l),N(a())),()=>{r(c)!=r(l)&&(y(c,r(l)),r(l)?a(a().maxSelect=1,!0):a(a().maxSelect=a().values?.length||2,!0))}),dt(),Be(),_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(d){a(d)},$$events:{rename(d){lt.call(this,e,d)},remove(d){lt.call(this,e,d)},duplicate(d){lt.call(this,e,d)}},children:Ee,$$slots:{default:(d,f)=>{const h=ne(()=>f.interactive);var v=qO(),_=g(F(v),2);{let m=ne(()=>r(h)?"":"readonly");De(_,{get class(){return`form-field required ${r(m)??""}`},inlineError:!0,get name(){return`fields.${s()??""}.values`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);FO(k,{get id(){return r($)},emptyPlaceholder:"Add choices *",get items(){return a().values},set items(D){a(a().values=D,!0)},$$legacy:!0})}}})}var b=g(_,4);{let m=ne(()=>r(h)?"":"readonly");De(b,{get class(){return`form-field form-field-single-multiple-select ${r(m)??""}`},inlineError:!0,children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);{let D=ne(()=>!r(h));On(k,{get id(){return r($)},get items(){return o},get readonly(){return r(D)},get keyOfSelected(){return r(l)},set keyOfSelected(I){y(l,I)},$$legacy:!0})}}}})}p(d,v)},options:(d,f)=>{var h=et(),v=F(h);{var _=b=>{De(b,{class:"form-field",get name(){return`fields.${s()??""}.maxSelect`},children:Ee,$$slots:{default:(m,k)=>{const S=ne(()=>k.uniqueId);var $=zO(),D=F($),I=g(D,2);V(()=>{H(D,"for",r(S)),H(I,"id",r(S)),H(I,"max",(N(a()),M(()=>a().values.length)))}),xt(I,()=>a().maxSelect,C=>a(a().maxSelect=C,!0)),p(m,$)}}})};G(v,b=>{r(l)||b(_)})}p(d,h)}},$$legacy:!0})),Ve()}var UO=x('<label><span class="txt">Min length</span> <i class="ri-information-line link-hint"></i></label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),VO=x('<label><span class="txt">Max length</span> <i class="ri-information-line link-hint"></i></label> <input type="number" step="1" placeholder="Default to max 5000 characters"/>',1),BO=x('<i class="ri-information-line link-hint"></i>'),HO=x('<label><span class="txt">Validation pattern</span> <!></label> <input type="text"/> <div class="help-block"><p>Ex. <code></code></p></div>',1),WO=x('<label><span class="txt">Autogenerate pattern</span> <i class="ri-information-line link-hint"></i></label> <input type="text"/> <div class="help-block"><p>Ex. <code></code></p></div>',1),YO=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function KO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);Ue(e,!1);let a=te(e,"field",12),s=te(e,"key",8,"");Be(),_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){lt.call(this,e,o)},remove(o){lt.call(this,e,o)},duplicate(o){lt.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=YO(),u=T(c),d=T(u);De(d,{class:"form-field",get name(){return`fields.${s()??""}.min`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=UO(),I=F(D),C=g(T(I),2);Ge(C,(E,O)=>ht?.(E,O),()=>"Clear the field or set it to 0 for no limit.");var w=g(I,2);H(w,"max",M(()=>Number.MAX_SAFE_INTEGER)),V(()=>{H(I,"for",r($)),H(w,"id",r($)),zn(w,(N(a()),M(()=>a().min||"")))}),re("input",w,E=>a(a().min=parseInt(E.target.value,10),!0)),p(k,D)}}});var f=g(u,2),h=T(f);De(h,{class:"form-field",get name(){return`fields.${s()??""}.max`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=VO(),I=F(D),C=g(T(I),2);Ge(C,(E,O)=>ht?.(E,O),()=>"Clear the field or set it to 0 to fallback to the default limit.");var w=g(I,2);H(w,"max",M(()=>Number.MAX_SAFE_INTEGER)),V(()=>{H(I,"for",r($)),H(w,"id",r($)),H(w,"min",(N(a()),M(()=>a().min||0))),zn(w,(N(a()),M(()=>a().max||"")))}),re("input",w,E=>a(a().max=parseInt(E.target.value,10),!0)),p(k,D)}}});var v=g(f,2),_=T(v);De(_,{class:"form-field",get name(){return`fields.${s()??""}.pattern`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=HO(),I=F(D),C=g(T(I),2);{var w=L=>{var j=BO();Ge(j,(U,W)=>ht?.(U,W),()=>"All record ids have forbidden characters and unique case-insensitive (ASCII) validations in addition to the user defined regex pattern."),p(L,j)};G(C,L=>{N(a()),M(()=>a().primaryKey)&&L(w)})}var E=g(I,2),O=g(E,2),A=T(O),q=g(T(A));q.textContent="^[a-z0-9]+$",V(()=>{H(I,"for",r($)),H(E,"id",r($))}),xt(E,()=>a().pattern,L=>a(a().pattern=L,!0)),p(k,D)}}});var b=g(v,2),m=T(b);De(m,{class:"form-field",get name(){return`fields.${s()??""}.autogeneratePattern`},children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=WO(),I=F(D),C=g(T(I),2);Ge(C,(q,L)=>ht?.(q,L),()=>"Set and autogenerate text matching the pattern on missing record create value.");var w=g(I,2),E=g(w,2),O=T(E),A=g(T(O));A.textContent="[a-z0-9]{30}",V(()=>{H(I,"for",r($)),H(w,"id",r($))}),xt(w,()=>a().autogeneratePattern,q=>a(a().autogeneratePattern=q,!0)),p(k,D)}}}),p(o,c)}},$$legacy:!0})),Ve()}function JO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);let a=te(e,"field",12),s=te(e,"key",8,"");Bg(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){lt.call(this,e,o)},remove(o){lt.call(this,e,o)},duplicate(o){lt.call(this,e,o)}},$$legacy:!0}))}function ZO(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["field","key"]);let a=te(e,"field",12),s=te(e,"key",8,"");_i(n,tn({get key(){return s()}},()=>i,{get field(){return a()},set field(o){a(o)},$$events:{rename(o){lt.call(this,e,o)},remove(o){lt.call(this,e,o)},duplicate(o){lt.call(this,e,o)}},$$legacy:!0}))}var GO=x("<div></div> <!> <hr/> <!>",1);function XO(n,e){Ue(e,!1);const t=()=>It(Yl,"$scaffolds",i),[i,a]=At(),s=P();let o=te(e,"collection",12),l=P();const c={text:KO,number:mO,bool:CE,email:Bg,url:JO,editor:VE,date:qE,select:jO,json:dO,file:aO,relation:AO,password:wO,autodate:IE,geoPoint:ZO};function u(w){o().fields[w]&&(o().fields.splice(w,1),o(o().fields=o().fields,!0))}function d(w){const E=o().fields[w];if(!E)return;E.onMountSelect=!1;const O=structuredClone(E);O.id="",O.system=!1,O.name=h(O.name+"_copy"),O.onMountSelect=!0,o().fields.splice(w+1,0,O),o(o().fields=o().fields,!0)}function f(w="text"){const E=R.initSchemaField({name:h(),type:w});E.onMountSelect=!0;const O=o().fields.findLastIndex(A=>A.type!="autodate");E.type!="autodate"&&O>=0?o().fields.splice(O+1,0,E):o().fields.push(E),o(o().fields=o().fields,!0)}function h(w="field"){let E=w,O=2,A=w.match(/\d+$/)?.[0]||"",q=A?w.substring(0,w.length-A.length):w;for(;v(E);)E=q+((A<<0)+O),O++;return E}function v(w){return!!o()?.fields?.find(E=>E.name.toLowerCase()===w.toLowerCase())}function _(w){return r(s).findIndex(E=>E===w)}function b(w,E){!o()?.fields?.length||w===E||!E||o()?.fields?.find(O=>O.name==w&&!O._toDelete)||o(o().indexes=o().indexes.map(O=>R.replaceIndexColumn(O,w,E)),!0)}function m(){const w=structuredClone(t()[o().type]),E=o().fields||[],O=E.filter(A=>!A.system);o(o().fields=w.fields,!0);for(const A of E){if(!A.system)continue;const q=o().fields.findIndex(L=>L.name==A.name);q<0||o(o().fields[q]=Object.assign(o().fields[q],A),!0)}for(const A of O)o().fields.push(A);if(o(o().indexes=o().indexes||[],!0),o().indexes.length){const A=t()[r(l)]?.indexes||[];e:for(let q=o().indexes.length-1;q>=0;q--){const L=R.parseIndex(o().indexes[q]),j=L.indexName.toLowerCase();for(const U of A){const W=R.parseIndex(U).indexName.toLowerCase();if(j==W){o().indexes.splice(q,1);continue e}}for(const U of L.columns)if(!v(U.name)){o().indexes.splice(q,1);continue e}}}R.mergeUnique(o().indexes,w.indexes)}function k(w,E){if(w===E||!E)return;let O=o().passwordAuth?.identityFields||[];for(let A=0;A<O.length;A++)O[A]==w&&(O[A]=E)}function S(w,E){b(w,E),k(w,E)}ie(()=>(N(o()),r(l)),()=>{!o().id&&r(l)!=o().type&&(m(),y(l,o().type))}),ie(()=>N(o()),()=>{typeof o().fields>"u"&&o(o().fields=[],!0)}),ie(()=>N(o()),()=>{y(s,o().fields.filter(w=>!w._toDelete))}),dt(),Be();var $=GO(),D=F($);bt(D,7,()=>(N(o()),M(()=>o().fields)),w=>w,(w,E,O)=>{hs(w,{get index(){return r(O)},get disabled(){return(N(o()),M(()=>o().fields))[r(O)],M(()=>(N(o()),M(()=>o().fields))[r(O)]._toDelete)},dragHandleClass:"drag-handle-wrapper",get list(){return o().fields},set list(A){o(o().fields=A,!0)},$$events:{drag:A=>{if(!A.detail)return;const q=A.detail.target;q.style.opacity=0,setTimeout(()=>{q?.style?.removeProperty("opacity")},0),A.detail.dataTransfer.setDragImage(q,0,0)},sort:()=>{nn({})}},children:(A,q)=>{var L=et(),j=F(L);{let U=ne(()=>((N(o()),M(()=>o().fields))[r(O)],M(()=>_((N(o()),M(()=>o().fields))[r(O)]))));yi(j,()=>c[(N(o()),M(()=>o().fields))[r(O)].type],(W,Y)=>{Y(W,{get key(){return r(U)},get collection(){return o()},get field(){return(N(o()),M(()=>o().fields))[r(O)]},set field(J){(N(o()),M(()=>o().fields))[r(O)]=J,ma(()=>o())},$$events:{remove:()=>u(r(O)),duplicate:()=>d(r(O)),rename:J=>S(J.detail.oldName,J.detail.newName)},$$legacy:!0})})}p(A,L)},$$slots:{default:!0},$$legacy:!0})});var I=g(D,2);cE(I,{class:"btn btn-block btn-outline",$$events:{select:w=>f(w.detail)}});var C=g(I,4);sE(C,{get collection(){return o()},set collection(w){o(w)},$$legacy:!0}),V(()=>Re(D,1,`schema-fields total-${N(o()),M(()=>o().fields.length)??""}`)),p(n,$),Ve(),a()}var QO=x('<textarea disabled rows="7" placeholder="Loading..."></textarea>'),eD=x("<p> </p>"),tD=x('<div class="help-block help-block-error"><div class="content"></div></div>'),nD=x(`<label><span class="txt">Select query</span></label> <!> <div class="help-block"><ul><li>Wildcard columns (<code>*</code>) are not supported.</li> <li>The query must have a unique <code>id</code> column. <br/> If your query doesn't have a suitable one, you can use the universal <code>(ROW_NUMBER() OVER()) as id</code>.</li> <li>Expressions must be aliased with a valid formatted field name, e.g. <code>MAX(balance) as maxBalance</code>.</li> <li>Combined/multi-spaced expressions must be wrapped in parenthesis, e.g. <code>(MAX(balance) + 1) as maxBalance</code>.</li></ul></div> <!>`,1);function iD(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At();let s=te(e,"collection",12),o=P(),l=P(!1),c=P([]);function u(d){y(c,[]);const f=R.getNestedVal(d,"fields",null);if(R.isEmpty(f))return;if(f?.message){r(c).push(f?.message);return}const h=R.extractColumnsFromQuery(s()?.viewQuery);R.removeByValue(h,"id"),R.removeByValue(h,"created"),R.removeByValue(h,"updated");for(let v in f)for(let _ in f[v]){const b=f[v][_].message,m=h[v]||v;r(c).push(R.sentenize(m+": "+b))}}un(async()=>{y(l,!0);try{y(o,(await Ut(async()=>{const{default:d}=await import("./CodeEditor-Dnzy5TIO.js");return{default:d}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(d){console.warn(d)}y(l,!1)}),ie(()=>t(),()=>{u(t())}),dt(),Be();{let d=ne(()=>(r(c),M(()=>r(c).length?"error":"")));De(n,{get class(){return`form-field required ${r(d)??""}`},name:"viewQuery",children:Ee,$$slots:{default:(f,h)=>{const v=ne(()=>h.uniqueId);var _=nD(),b=F(_),m=g(b,2);{var k=I=>{var C=QO();p(I,C)},S=I=>{var C=et(),w=F(C);yi(w,()=>r(o),(E,O)=>{O(E,{get id(){return r(v)},placeholder:"eg. SELECT id, name from posts",language:"sql-select",minHeight:"150",get value(){return s().viewQuery},set value(A){s(s().viewQuery=A,!0)},$$events:{change:()=>{r(c).length&&Zn("fields")}},$$legacy:!0})}),p(I,C)};G(m,I=>{r(l)?I(k):I(S,!1)})}var $=g(m,4);{var D=I=>{var C=tD(),w=T(C);bt(w,5,()=>r(c),Mt,(E,O)=>{var A=eD(),q=T(A);V(()=>$e(q,r(O))),p(E,A)}),p(I,C)};G($,I=>{r(c),M(()=>r(c).length)&&I(D)})}V(()=>H(b,"for",r(v))),p(f,_)}}})}Ve(),a()}var rD=x("<code> </code>"),aD=x('<div><div class="alert alert-warning m-0"><div class="content"><p class="m-b-0">The following record fields are available:</p> <div class="inline-flex flex-gap-5"></div> <hr class="m-t-10 m-b-5"/> <p class="m-b-0">The request fields could be accessed with the special <em>@request</em> filter:</p> <div class="inline-flex flex-gap-5"><code>@request.headers.*</code> <code>@request.query.*</code> <code>@request.body.*</code> <code>@request.auth.*</code></div> <hr class="m-t-10 m-b-5"/> <p class="m-b-0">You could also add constraints and query other collections using the <em>@collection</em> filter:</p> <div class="inline-flex flex-gap-5"><code>@collection.ANY_COLLECTION_NAME.*</code></div> <hr class="m-t-10 m-b-5"/> <p>Example rule: <br/> <code>@request.auth.id != "" && created > "2022-01-01 00:00:00"</code></p></div></div></div>'),sD=x('<i class="ri-information-line link-hint"></i>'),oD=x('<i class="ri-information-line link-hint"></i>'),lD=x("<!> <!> <!>",1),cD=x('<i class="ri-arrow-up-s-line txt-sm"></i>'),uD=x('<i class="ri-arrow-down-s-line txt-sm"></i>'),dD=x(`<p>This rule is executed every time before authentication allowing you to restrict who
                        can authenticate.</p> <p>For example, to allow only verified users you can set it to <code>verified = true</code>.</p> <p>Leave it empty to allow anyone with an account to authenticate.</p> <p>To disable authentication entirely you can change it to "Set superusers only".</p>`,1),fD=x(`<p>This rule is executed in addition to the <code>create</code> and <code>update</code> API
                        rules.</p> <p>It enables superuser-like permissions to allow fully managing the auth record(s), eg.
                        changing the password without requiring to enter the old one, directly updating the
                        verified state or email, etc.</p>`,1),hD=x('<div class="block"><!> <!></div>'),vD=x('<hr/> <button type="button"><strong class="txt">Additional auth collection rules</strong> <!></button> <!>',1),pD=x('<div class="block m-b-sm handle"><div class="flex txt-sm txt-hint m-b-5"><p>All rules follow the <a target="_blank" rel="noopener noreferrer">PocketBase filter syntax and operators</a>.</p> <button type="button" class="expand-handle txt-sm txt-bold txt-nowrap link-hint"> </button></div> <!></div> <!> <!> <!> <!>',1);function mD(n,e){Ue(e,!1);const t=P(),i=P();let a=te(e,"collection",12),s=P(!1),o=P(a().manageRule!==null||a().authRule!=="");ie(()=>N(a()),()=>{y(t,R.getAllCollectionIdentifiers(a()))}),ie(()=>N(a()),()=>{y(i,a().fields?.filter(C=>C.hidden).map(C=>C.name))}),dt(),Be();var l=pD(),c=F(l),u=T(c),d=T(u),f=g(T(d)),h=g(d,2),v=T(h),_=g(u,2);{var b=C=>{var w=aD(),E=T(w),O=T(E),A=g(T(O),2);bt(A,5,()=>r(t),Mt,(q,L)=>{var j=et(),U=F(j);{var W=Y=>{var J=rD(),z=T(J);V(()=>$e(z,r(L))),p(Y,J)};G(U,Y=>{r(i),r(L),M(()=>!r(i).includes(r(L)))&&Y(W)})}p(q,j)}),Et(3,w,()=>vn,()=>({duration:150})),p(C,w)};G(_,C=>{r(s)&&C(b)})}var m=g(c,2);Fr(m,{label:"List/Search rule",formKey:"listRule",get collection(){return a()},get rule(){return a().listRule},set rule(C){a(a().listRule=C,!0)},$$legacy:!0});var k=g(m,2);Fr(k,{label:"View rule",formKey:"viewRule",get collection(){return a()},get rule(){return a().viewRule},set rule(C){a(a().viewRule=C,!0)},$$legacy:!0});var S=g(k,2);{var $=C=>{var w=lD(),E=F(w);Fr(E,{label:"Create rule",formKey:"createRule",get collection(){return a()},get rule(){return a().createRule},set rule(q){a(a().createRule=q,!0)},$$slots:{afterLabel:(q,L)=>{const j=ne(()=>L.isSuperuserOnly);var U=et(),W=F(U);{var Y=J=>{var z=sD();Ge(z,(X,oe)=>ht?.(X,oe),()=>({text:"The main record fields hold the values that are going to be inserted in the database.",position:"top"})),p(J,z)};G(W,J=>{r(j)||J(Y)})}p(q,U)}},$$legacy:!0});var O=g(E,2);Fr(O,{label:"Update rule",formKey:"updateRule",get collection(){return a()},get rule(){return a().updateRule},set rule(q){a(a().updateRule=q,!0)},$$slots:{afterLabel:(q,L)=>{const j=ne(()=>L.isSuperuserOnly);var U=et(),W=F(U);{var Y=J=>{var z=oD();Ge(z,(X,oe)=>ht?.(X,oe),()=>({text:`The main record fields represent the old/existing record field values.
To target the newly submitted ones you can use @request.body.*`,position:"top"})),p(J,z)};G(W,J=>{r(j)||J(Y)})}p(q,U)}},$$legacy:!0});var A=g(O,2);Fr(A,{label:"Delete rule",formKey:"deleteRule",get collection(){return a()},get rule(){return a().deleteRule},set rule(q){a(a().deleteRule=q,!0)},$$legacy:!0}),p(C,w)};G(S,C=>{N(a()),M(()=>a()?.type!=="view")&&C($)})}var D=g(S,2);{var I=C=>{var w=vD(),E=g(F(w),2),O=g(T(E),2);{var A=U=>{var W=cD();p(U,W)},q=U=>{var W=uD();p(U,W)};G(O,U=>{r(o)?U(A):U(q,!1)})}var L=g(E,2);{var j=U=>{var W=hD(),Y=T(W);Fr(Y,{label:"Authentication rule",formKey:"authRule",placeholder:"",get collection(){return a()},get rule(){return a().authRule},set rule(z){a(a().authRule=z,!0)},children:(z,X)=>{var oe=dD();p(z,oe)},$$slots:{default:!0},$$legacy:!0});var J=g(Y,2);{let z=ne(()=>(N(a()),M(()=>a().manageRule!==null)));Fr(J,{label:"Manage rule",formKey:"manageRule",placeholder:"",get required(){return r(z)},get collection(){return a()},get rule(){return a().manageRule},set rule(X){a(a().manageRule=X,!0)},children:(X,oe)=>{var ce=fD();p(X,ce)},$$slots:{default:!0},$$legacy:!0})}Et(3,W,()=>vn,()=>({duration:150})),p(U,W)};G(L,U=>{r(o)&&U(j)})}V(()=>Re(E,1,`btn btn-sm m-b-sm ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),re("click",E,()=>{y(o,!r(o))}),p(C,w)};G(D,C=>{N(a()),M(()=>a()?.type==="auth")&&C(I)})}V(()=>{H(f,"href",M(()=>"https://pocketbase.io/docs/api-rules-and-filters")),$e(v,r(s)?"Hide available fields":"Show available fields")}),re("click",h,()=>y(s,!r(s))),p(n,l),Ve()}var gD=x("<p>All data associated with the removed fields will be permanently deleted!</p>"),bD=x(`<div class="alert alert-warning"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content txt-bold"><p>If any of the collection changes is part of another collection rule, filter or view query,
                    you'll have to update it manually!</p> <!></div></div>`),yD=x('<li class="svelte-b715vp"><div class="inline-flex">Renamed collection <strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div></li>'),_D=x('<li class="svelte-b715vp">Multiple to single value conversion of field <strong> </strong> <em class="txt-sm">(will keep only the last array item)</em></li>'),xD=x('<li class="svelte-b715vp"><div class="inline-flex">Renamed field <strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div></li>'),wD=x('<li class="txt-danger svelte-b715vp">Removed field <span class="txt-bold"> </span></li>'),kD=x("<!> <!> <!>",1),SD=x('<li class="svelte-b715vp">Changed API rule <code class="txt-sm"> </code>: <br/> <small class="txt-mono txt-hint"><strong>Old</strong>: <span class="txt-preline"> </span></small> <br/> <small class="txt-mono txt-success"><strong>New</strong>: <span class="txt-preline"> </span></small></li>'),TD=x(`<li class="svelte-b715vp">Changed <code> </code> host <div class="inline-flex m-l-5"><strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div> <br/> <em class="txt-hint">If the old and new OIDC configuration is not for the same provider consider deleting
                        all old <code class="txt-sm">_externalAuths</code> records associated to the current
                        collection and provider, otherwise it may result in account linking errors. <a target="_blank">Review existing <code class="txt-sm">_externalAuths</code> records <i class="ri-external-link-line txt-sm"></i></a>.</em></li>`),$D=x('<h6>Changes:</h6> <ul class="changes-list svelte-b715vp"><!> <!> <!> <!></ul>',1),ID=x("<!> <!>",1),CD=x("<h4>Confirm collection changes</h4>"),ED=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button" class="btn btn-expanded"><span class="txt">Confirm</span></button>',1);function OD(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=P(),o=P(),l=P(),c=P(),u=qt();let d=P(),f=P(),h=P(),v,_=P([]),b=P([]);async function m(O,A,q=!0){y(f,O),y(h,A),v=q,await D(),w(),await Tn(),r(t)||r(s).length||r(o).length||r(l).length||r(_).length||r(b).length?r(d)?.show():S()}function k(){r(d)?.hide()}function S(){k(),u("confirm",v)}const $=["oidc","oidc2","oidc3"];async function D(){y(_,[]);for(let O of $){let A=r(f)?.oauth2?.providers?.find(U=>U.name==O),q=r(h)?.oauth2?.providers?.find(U=>U.name==O);if(!A||!q)continue;let L=new URL(A.authURL).host,j=new URL(q.authURL).host;L!=j&&await I(O)&&r(_).push({name:O,oldHost:L,newHost:j})}}async function I(O){try{return await Ae.collection("_externalAuths").getFirstListItem(Ae.filter("collectionRef={:collectionId} && provider={:provider}",{collectionId:r(h)?.id,provider:O})),!0}catch{}return!1}function C(O){return`#/collections?collection=_externalAuths&filter=collectionRef%3D%22${r(h)?.id}%22+%26%26+provider%3D%22${O}%22`}function w(){if(y(b,[]),window.location.protocol!="https:")return;const O=["listRule","viewRule"];r(i)||O.push("createRule","updateRule","deleteRule"),r(a)&&O.push("manageRule","authRule");let A,q;for(let L of O)A=r(f)?.[L],q=r(h)?.[L],A!==q&&r(b).push({prop:L,oldRule:A,newRule:q})}ie(()=>(r(f),r(h)),()=>{y(t,r(f)?.name!=r(h)?.name)}),ie(()=>r(h),()=>{y(i,r(h)?.type==="view")}),ie(()=>r(h),()=>{y(a,r(h)?.type==="auth")}),ie(()=>(r(i),r(h)),()=>{y(s,!r(i)&&r(h)?.fields?.filter(O=>O.id&&!O._toDelete&&O._originalName!=O.name)||[])}),ie(()=>(r(i),r(h)),()=>{y(o,!r(i)&&r(h)?.fields?.filter(O=>O.id&&O._toDelete)||[])}),ie(()=>(r(h),r(f)),()=>{y(l,r(h)?.fields?.filter(O=>{const A=r(f)?.fields?.find(q=>q.id==O.id);return A?A.maxSelect>1&&O.maxSelect<=1:!1})||[])}),ie(()=>(r(i),r(t),r(b)),()=>{y(c,!r(i)||r(t)||r(b).length)}),dt();var E={show:m,hide:k};return Be(),pt(pn(n,{class:"confirm-changes-panel",popup:!0,$$events:{hide(O){lt.call(this,e,O)},show(O){lt.call(this,e,O)}},children:(O,A)=>{var q=ID(),L=F(q);{var j=Y=>{var J=bD(),z=g(T(J),2),X=g(T(z),2);{var oe=ce=>{var le=gD();p(ce,le)};G(X,ce=>{r(o),M(()=>r(o).length)&&ce(oe)})}p(Y,J)};G(L,Y=>{r(t),r(o),r(s),M(()=>r(t)||r(o).length||r(s).length)&&Y(j)})}var U=g(L,2);{var W=Y=>{var J=$D(),z=g(F(J),2),X=T(z);{var oe=pe=>{var Te=yD(),Se=T(Te),he=g(T(Se)),ue=T(he),ke=g(he,4),we=T(ke);V(()=>{$e(ue,(r(f),M(()=>r(f)?.name))),$e(we,(r(h),M(()=>r(h)?.name)))}),p(pe,Te)};G(X,pe=>{r(t)&&pe(oe)})}var ce=g(X,2);{var le=pe=>{var Te=kD(),Se=F(Te);bt(Se,1,()=>r(l),Mt,(ke,we)=>{var ae=_D(),xe=g(T(ae)),se=T(xe);V(()=>$e(se,(r(we),M(()=>r(we).name)))),p(ke,ae)});var he=g(Se,2);bt(he,1,()=>r(s),Mt,(ke,we)=>{var ae=xD(),xe=T(ae),se=g(T(xe)),ge=T(se),ee=g(se,4),ve=T(ee);V(()=>{$e(ge,(r(we),M(()=>r(we)._originalName))),$e(ve,(r(we),M(()=>r(we).name)))}),p(ke,ae)});var ue=g(he,2);bt(ue,1,()=>r(o),Mt,(ke,we)=>{var ae=wD(),xe=g(T(ae)),se=T(xe);V(()=>$e(se,(r(we),M(()=>r(we).name)))),p(ke,ae)}),p(pe,Te)};G(ce,pe=>{r(i)||pe(le)})}var me=g(ce,2);bt(me,1,()=>r(b),Mt,(pe,Te)=>{var Se=SD(),he=g(T(Se)),ue=T(he),ke=g(he,4),we=g(T(ke),2),ae=T(we),xe=g(ke,4),se=g(T(xe),2),ge=T(se);V(()=>{$e(ue,(r(Te),M(()=>r(Te).prop))),$e(ae,(r(Te),M(()=>r(Te).oldRule===null?"null (superusers only)":r(Te).oldRule||'""'))),$e(ge,(r(Te),M(()=>r(Te).newRule===null?"null (superusers only)":r(Te).newRule||'""')))}),p(pe,Se)});var _e=g(me,2);bt(_e,1,()=>r(_),Mt,(pe,Te)=>{var Se=TD(),he=g(T(Se)),ue=T(he),ke=g(he,2),we=T(ke),ae=T(we),xe=g(we,4),se=T(xe),ge=g(ke,4),ee=g(T(ge),3);V(ve=>{$e(ue,(r(Te),M(()=>r(Te).name))),$e(ae,(r(Te),M(()=>r(Te).oldHost))),$e(se,(r(Te),M(()=>r(Te).newHost))),H(ee,"href",ve)},[()=>(r(Te),M(()=>C(r(Te).name)))]),p(pe,Se)}),p(Y,J)};G(U,Y=>{r(c)&&Y(W)})}p(O,q)},$$slots:{default:!0,header:(O,A)=>{var q=CD();p(O,q)},footer:(O,A)=>{var q=ED(),L=F(q);Wi(L,!0);var j=g(L,2);re("click",L,()=>k()),re("click",j,()=>S()),p(O,q)}},$$legacy:!0}),O=>y(d,O),()=>r(d)),_t(e,"show",m),_t(e,"hide",k),Ve(E)}var DD=x('<div class="tab-item active"><!></div>'),PD=x("<div><!></div>"),MD=x('<div class="tabs-content svelte-f500a1"><div><!></div> <!> <!></div>'),AD=x('<button type="button" class="dropdown-item" role="menuitem"><i class="ri-file-copy-line" aria-hidden="true"></i> <span class="txt">Duplicate</span></button> <hr/>',1),LD=x('<button type="button" class="dropdown-item txt-danger" role="menuitem"><i class="ri-eraser-line" aria-hidden="true"></i> <span class="txt">Truncate</span></button>'),ND=x('<button type="button" class="dropdown-item txt-danger" role="menuitem"><i class="ri-delete-bin-7-line" aria-hidden="true"></i> <span class="txt">Delete</span></button>'),RD=x('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-braces-line" aria-hidden="true"></i> <span class="txt">Copy raw JSON</span></button> <!> <!> <!>',1),FD=x('<div class="flex-fill"></div> <div tabindex="0" role="button" aria-label="More collection options" class="btn btn-sm btn-circle btn-transparent flex-gap-0"><i class="ri-more-line" aria-hidden="true"></i> <!></div>',1),qD=x('<button type="button" role="menuitem"><i aria-hidden="true"></i> <span class="txt"> </span></button>'),zD=x('<i class="ri-arrow-down-s-fill" aria-hidden="true"></i> <!>',1),jD=x('<div class="help-block">System collection</div>'),UD=x('<label>Name</label> <input type="text" required spellcheck="false"/> <div class="form-field-addon"><div aria-label="View types"><span aria-hidden="true"></span> <span class="txt"> </span> <!></div></div> <!>',1),VD=x('<i class="ri-error-warning-fill txt-danger"></i>'),BD=x('<i class="ri-error-warning-fill txt-danger"></i>'),HD=x('<button type="button"><span class="txt">API Rules</span> <!></button>'),WD=x('<i class="ri-error-warning-fill txt-danger"></i>'),YD=x('<button type="button"><span class="txt">Options</span> <!></button>'),KD=x('<h4 class="upsert-panel-title svelte-f500a1"> </h4> <!> <form class="block"><!> <input type="submit" class="hidden" tabindex="-1"/></form> <div class="tabs-header stretched"><button type="button"><span class="txt"> </span> <!></button> <!> <!></div>',1),JD=x('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Save and continue</span></button>'),ZD=x('<button type="button" class="btn p-l-5 p-r-5 flex-gap-0"><i class="ri-arrow-down-s-line" aria-hidden="true"></i> <!></button>'),GD=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <div class="btns-group no-gap"><button type="button" title="Save and close"><span class="txt"> </span></button> <!></div>',1),XD=x("<!> <!>",1);function Ld(n,e){Ue(e,!1);const t=()=>It(Yl,"$scaffolds",a),i=()=>It(Bn,"$errors",a),[a,s]=At(),o=P(),l=P(),c=P(),u=P(),d=P(),f=P(),h="schema",v="api_rules",_="options",b="base",m="auth",k="view",S=P({});ft(S,r(S)[b]="Base"),ft(S,r(S)[k]="View"),ft(S,r(S)[m]="Auth");const $=qt();let D=P(),I=P(),C=P(null),w=P({}),E=P(!1),O=P(!1),A=P(!1),q=P(h),L=P(pe(r(w))),j=P(""),U=P([]);function W(ee){y(q,ee)}function Y(ee){return X(ee),y(A,!0),y(O,!1),y(E,!1),W(h),r(D)?.show()}function J(){return r(D)?.hide()}function z(){y(A,!1),J()}async function X(ee){nn({}),typeof ee<"u"?(y(C,ee),y(w,structuredClone(ee))):(y(C,null),y(w,structuredClone(t().base)),r(w).fields.push({type:"autodate",name:"created",onCreate:!0}),r(w).fields.push({type:"autodate",name:"updated",onCreate:!0,onUpdate:!0})),ft(w,r(w).fields=r(w).fields||[]),ft(w,r(w)._originalName=r(w).name||""),await Tn(),y(L,pe(r(w)))}async function oe(ee=!0){if(!r(O)){y(O,!0);try{r(w).id?await r(I)?.show(r(C),r(w),ee):await ce(ee)}catch{}y(O,!1)}}async function ce(ee=!0){if(r(E))return;y(E,!0);const ve=le(),Ce=!r(w).id;try{let Ie;Ce?Ie=await Ae.collections.create(ve):Ie=await Ae.collections.update(r(w).id,ve),Ks(),O1(Ie),ee?(y(A,!1),J()):X(Ie),hn(r(w).id?"Successfully updated collection.":"Successfully created collection."),$("save",{isNew:Ce,collection:Ie}),Ce&&(Kn(Ki,Ie),await P1())}catch(Ie){Ae.error(Ie)}y(E,!1)}function le(){const ee=Object.assign({},r(w));ee.fields=ee.fields.slice(0);for(let ve=ee.fields.length-1;ve>=0;ve--)ee.fields[ve]._toDelete&&ee.fields.splice(ve,1);return ee}function me(){r(C)?.id&&qn(`Do you really want to delete all "${r(C).name}" records, including their cascade delete references and files?`,()=>Ae.collections.truncate(r(C).id).then(()=>{z(),hn(`Successfully truncated collection "${r(C).name}".`),$("truncate")}).catch(ee=>{Ae.error(ee)}))}function _e(){r(C)?.id&&qn(`Do you really want to delete collection "${r(C).name}" and all its records?`,()=>Ae.collections.delete(r(C).id).then(()=>{z(),hn(`Successfully deleted collection "${r(C).name}".`),$("delete",r(C)),D1(r(C))}).catch(ee=>{Ae.error(ee)}))}function pe(ee){return JSON.stringify(ee)}function Te(ee){ft(w,r(w).type=ee),y(w,Object.assign(structuredClone(t()[ee]),r(w))),Zn("fields")}function Se(){r(d)?qn("You have unsaved changes. Do you really want to discard them?",()=>{he()}):he()}async function he(){const ee=r(C)?structuredClone(r(C)):null;if(ee){if(ee.id="",ee.created="",ee.updated="",ee.name+="_duplicate",!R.isEmpty(ee.fields))for(const ve of ee.fields)ve.id="";if(!R.isEmpty(ee.indexes))for(let ve=0;ve<ee.indexes.length;ve++){const Ce=R.parseIndex(ee.indexes[ve]);Ce.indexName="idx_"+R.randomString(10),Ce.tableName=ee.name,ee.indexes[ve]=R.buildIndex(Ce)}}Y(ee),await Tn(),y(L,"")}function ue(ee,ve=[]){if(R.isEmpty(ee))return!1;const Ce=Object.keys(ee);for(let Ie of Ce)if(!ve.includes(Ie))return!0;return!1}function ke(){R.copyToClipboard(JSON.stringify(r(C),null,2)),ls("The collection JSON was copied to your clipboard!",3e3)}ie(()=>t(),()=>{y(U,Object.keys(t().base||{}))}),ie(()=>r(w),()=>{y(o,r(w).type===m)}),ie(()=>r(w),()=>{y(l,r(w).type===k)}),ie(()=>(i(),R),()=>{i().fields||i().viewQuery||i().indexes?y(j,R.getNestedVal(i(),"fields.message")||"Has errors"):y(j,"")}),ie(()=>r(w),()=>{y(c,!!r(w).id&&r(w).system)}),ie(()=>r(w),()=>{y(u,!!r(w).id&&r(w).system&&r(w).name=="_superusers")}),ie(()=>(r(L),r(w)),()=>{y(d,r(L)!=pe(r(w)))}),ie(()=>(r(w),r(d)),()=>{y(f,!r(w).id||r(d))}),ie(()=>(r(q),r(w)),()=>{r(q)===_&&r(w).type!=="auth"&&W(h)}),ie(()=>r(w),()=>{r(w).type==="view"&&(ft(w,r(w).createRule=null),ft(w,r(w).updateRule=null),ft(w,r(w).deleteRule=null),ft(w,r(w).indexes=[]))}),ie(()=>(r(w),r(C),R),()=>{r(w).name&&r(C)?.name!=r(w).name&&r(w).indexes.length>0&&ft(w,r(w).indexes=r(w).indexes?.map(ee=>R.replaceIndexTableName(ee,r(w).name)))}),dt();var we={changeTab:W,show:Y,hide:J,forceHide:z};Be();var ae=XD(),xe=F(ae);{let ee=ne(()=>!r(E));pt(pn(xe,{class:"overlay-panel-lg colored-header collection-panel",escClose:!1,get overlayClose(){return r(ee)},beforeHide:()=>r(d)&&r(A)?(qn("You have unsaved changes. Do you really want to close the panel?",()=>{y(A,!1),J()}),!1):!0,$$events:{hide(ve){lt.call(this,e,ve)},show(ve){lt.call(this,e,ve)}},children:(ve,Ce)=>{var Ie=MD(),ze=T(Ie);let qe;var je=T(ze);{var rt=He=>{iD(He,{get collection(){return r(w)},set collection(Je){y(w,Je)},$$legacy:!0})},be=He=>{XO(He,{get collection(){return r(w)},set collection(Je){y(w,Je)},$$legacy:!0})};G(je,He=>{r(l)?He(rt):He(be,!1)})}var Le=g(ze,2);{var Ke=He=>{var Je=DD(),Fe=T(Je);mD(Fe,{get collection(){return r(w)},set collection(Me){y(w,Me)},$$legacy:!0}),p(He,Je)};G(Le,He=>{!r(u)&&r(q)===v&&He(Ke)})}var st=g(Le,2);{var it=He=>{var Je=PD();let Fe;var Me=T(Je);HC(Me,{get collection(){return r(w)},set collection(Ne){y(w,Ne)},$$legacy:!0}),V(()=>Fe=Re(Je,1,"tab-item",null,Fe,{active:r(q)===_})),p(He,Je)};G(st,He=>{r(o)&&He(it)})}V(()=>qe=Re(ze,1,"tab-item",null,qe,{active:r(q)===h})),p(ve,Ie)},$$slots:{default:!0,header:(ve,Ce)=>{var Ie=KD(),ze=F(Ie),qe=T(ze),je=g(ze,2);{var rt=tt=>{var We=FD(),Qe=g(F(We),2),mt=g(T(Qe),2);Jn(mt,{class:"dropdown dropdown-right dropdown-nowrap",children:(gt,nt)=>{var Oe=RD(),B=F(Oe),Z=g(B,2);{var de=at=>{var wt=AD(),ut=F(wt);re("click",ut,()=>Se()),p(at,wt)};G(Z,at=>{r(w),M(()=>!r(w).system)&&at(de)})}var ye=g(Z,2);{var Ye=at=>{var wt=LD();re("click",wt,()=>me()),p(at,wt)};G(ye,at=>{r(l)||at(Ye)})}var ot=g(ye,2);{var Tt=at=>{var wt=ND();re("click",wt,Ct(fn(()=>_e()))),p(at,wt)};G(ot,at=>{r(w),M(()=>!r(w).system)&&at(Tt)})}re("click",B,()=>ke()),p(gt,Oe)},$$slots:{default:!0}}),p(tt,We)};G(je,tt=>{r(w),r(l),M(()=>!!r(w).id&&(!r(w).system||!r(l)))&&tt(rt)})}var be=g(je,2),Le=T(be);De(Le,{class:"form-field collection-field-name required m-b-0",name:"name",children:Ee,$$slots:{default:(tt,We)=>{const Qe=ne(()=>We.uniqueId);var mt=UD(),gt=F(mt),nt=g(gt,2);Wi(nt,(r(w),M(()=>!r(w).id)));let Oe;var B=g(nt,2),Z=T(B);let de;var ye=g(T(Z),2),Ye=T(ye),ot=g(ye,2);{var Tt=ut=>{var St=zD(),Rt=g(F(St),2);Jn(Rt,{class:"dropdown dropdown-right dropdown-nowrap m-t-5",children:(_n,dn)=>{var mn=et(),xn=F(mn);bt(xn,1,()=>(r(S),M(()=>Object.entries(r(S)))),Mt,(Zi,an)=>{var kn=xa(()=>Ga(r(an),2));let Cn=()=>r(kn)[0],An=()=>r(kn)[1];var Xn=qD();let wi;var Li=T(Xn),Qn=g(Li,2),Gi=T(Qn);V(Ts=>{wi=Re(Xn,1,"dropdown-item closable",null,wi,{selected:Cn()==r(w).type}),Re(Li,1,Ts,"svelte-f500a1"),$e(Gi,`${An()??""} collection`)},[()=>$n((N(R),Cn(),M(()=>R.getCollectionTypeIcon(Cn()))))]),re("click",Xn,()=>Te(Cn())),p(Zi,Xn)}),p(_n,mn)},$$slots:{default:!0}}),p(ut,St)};G(ot,ut=>{r(w),M(()=>!r(w).id)&&ut(Tt)})}var at=g(B,2);{var wt=ut=>{var St=jD();p(ut,St)};G(at,ut=>{r(w),M(()=>r(w).system)&&ut(wt)})}V(()=>{H(gt,"for",r(Qe)),H(nt,"id",r(Qe)),nt.disabled=r(c),H(nt,"placeholder",r(o)?'eg. "users"':'eg. "posts"'),zn(nt,(r(w),M(()=>r(w).name))),Oe=Re(nt,1,"",null,Oe,{"txt-bold":r(w).system}),H(Z,"tabindex",(r(w),M(()=>r(w).id?-1:0))),H(Z,"role",(r(w),M(()=>r(w).id?"":"button"))),de=Re(Z,1,`btn btn-sm p-r-10 p-l-10 ${r(w),M(()=>r(w).id?"btn-transparent":"btn-outline")??""}`,null,de,{"btn-disabled":!!r(w).id}),$e(Ye,`Type: ${r(S),r(w),M(()=>r(S)[r(w).type]||"N/A")??""}`)}),re("input",nt,ut=>{ft(w,r(w).name=R.slugify(ut.target.value)),ut.target.value=r(w).name}),p(tt,mt)}}});var Ke=g(be,2),st=T(Ke);let it;var He=T(st),Je=T(He),Fe=g(He,2);{var Me=tt=>{var We=VD();Ge(We,(Qe,mt)=>ht?.(Qe,mt),()=>r(j)),Et(3,We,()=>jn,()=>({duration:150,start:.7})),p(tt,We)};G(Fe,tt=>{N(R),r(j),M(()=>!R.isEmpty(r(j)))&&tt(Me)})}var Ne=g(st,2);{var Ze=tt=>{var We=HD();let Qe;var mt=g(T(We),2);{var gt=nt=>{var Oe=BD();Ge(Oe,(B,Z)=>ht?.(B,Z),()=>"Has errors"),Et(3,Oe,()=>jn,()=>({duration:150,start:.7})),p(nt,Oe)};G(mt,nt=>{N(R),i(),M(()=>!R.isEmpty(i()?.listRule)||!R.isEmpty(i()?.viewRule)||!R.isEmpty(i()?.createRule)||!R.isEmpty(i()?.updateRule)||!R.isEmpty(i()?.deleteRule)||!R.isEmpty(i()?.authRule)||!R.isEmpty(i()?.manageRule))&&nt(gt)})}V(()=>Qe=Re(We,1,"tab-item",null,Qe,{active:r(q)===v})),re("click",We,()=>W(v)),p(tt,We)};G(Ne,tt=>{r(u)||tt(Ze)})}var Xe=g(Ne,2);{var vt=tt=>{var We=YD();let Qe;var mt=g(T(We),2);{var gt=nt=>{var Oe=WD();Ge(Oe,(B,Z)=>ht?.(B,Z),()=>"Has errors"),Et(3,Oe,()=>jn,()=>({duration:150,start:.7})),p(nt,Oe)};G(mt,nt=>{i(),r(U),M(()=>i()&&ue(i(),r(U).concat(["manageRule","authRule"])))&&nt(gt)})}V(()=>Qe=Re(We,1,"tab-item",null,Qe,{active:r(q)===_})),re("click",We,()=>W(_)),p(tt,We)};G(Xe,tt=>{r(o)&&tt(vt)})}V(()=>{$e(qe,(r(w),M(()=>r(w).id?"Edit collection":"New collection"))),it=Re(st,1,"tab-item",null,it,{active:r(q)===h}),$e(Je,r(l)?"Query":"Fields")}),re("submit",be,Ct(()=>{r(f)&&oe()})),re("click",st,()=>W(h)),p(ve,Ie)},footer:(ve,Ce)=>{var Ie=GD(),ze=F(Ie),qe=g(ze,2),je=T(qe);let rt;var be=T(je),Le=T(be),Ke=g(je,2);{var st=it=>{var He=ZD(),Je=g(T(He),2);Jn(Je,{class:"dropdown dropdown-upside dropdown-right dropdown-nowrap m-b-5",children:(Fe,Me)=>{var Ne=JD();re("click",Ne,()=>oe(!1)),p(Fe,Ne)},$$slots:{default:!0}}),V(()=>He.disabled=!r(f)||r(E)||r(O)),p(it,He)};G(Ke,it=>{r(w),M(()=>r(w).id)&&it(st)})}V(()=>{ze.disabled=r(E),rt=Re(je,1,"btn",null,rt,{"btn-expanded":!r(w).id,"btn-expanded-sm":!!r(w).id,"btn-loading":r(E)||r(O)}),je.disabled=!r(f)||r(E)||r(O),$e(Le,(r(w),M(()=>r(w).id?"Save changes":"Create")))}),re("click",ze,()=>J()),re("click",je,()=>oe()),p(ve,Ie)}},$$legacy:!0}),ve=>y(D,ve),()=>r(D))}var se=g(xe,2);pt(OD(se,{$$events:{confirm:ee=>ce(ee.detail)},$$legacy:!0}),ee=>y(I,ee),()=>r(I)),p(n,ae),_t(e,"changeTab",W),_t(e,"show",Y),_t(e,"hide",J),_t(e,"forceHide",z);var ge=Ve(we);return s(),ge}var QD=x("<span></span>");function eP(n,e){Ue(e,!1);const t=qt();let i=te(e,"tolerance",8,0),a=P(),s=0,o=0,l=0,c=0,u=P(!1);function d(b){b.stopPropagation(),s=b.clientX,o=b.clientY,l=b.clientX-r(a).offsetLeft,c=b.clientY-r(a).offsetTop,document.addEventListener("touchmove",h),document.addEventListener("mousemove",h),document.addEventListener("touchend",f),document.addEventListener("mouseup",f)}function f(b){r(u)&&(b.preventDefault(),y(u,!1),r(a).classList.remove("no-pointer-events"),t("dragstop",{event:b,elem:r(a)})),document.removeEventListener("touchmove",h),document.removeEventListener("mousemove",h),document.removeEventListener("touchend",f),document.removeEventListener("mouseup",f)}function h(b){let m=b.clientX-s,k=b.clientY-o,S=b.clientX-l,$=b.clientY-c;!r(u)&&Math.abs(S-r(a).offsetLeft)<i()&&Math.abs($-r(a).offsetTop)<i()||(b.preventDefault(),r(u)||(y(u,!0),r(a).classList.add("no-pointer-events"),t("dragstart",{event:b,elem:r(a)})),t("dragging",{event:b,elem:r(a),diffX:m,diffY:k}))}Be();var v=QD();let _;pt(v,b=>y(a,b),()=>r(a)),V(()=>_=Re(v,1,"dragline svelte-19mgcl6",null,_,{dragging:r(u)})),re("mousedown",v,b=>{b.button==0&&d(b)}),re("touchstart",v,d),p(n,v),Ve()}var tP=x("<aside><!></aside> <!>",1);function Hg(n,e){Ue(e,!1);const t="@superuserSidebarWidth";let i=te(e,"class",8,""),a=P(),s=P(),o=P(localStorage.getItem(t)||null);ie(()=>(r(o),r(a)),()=>{r(o)&&r(a)&&(ft(a,r(a).style.width=r(o)),localStorage.setItem(t,r(o)))}),dt(),Be();var l=tP(),c=F(l),u=T(c);Zt(u,e,"default",{},null),pt(c,f=>y(a,f),()=>r(a));var d=g(c,2);eP(d,{$$events:{dragstart:()=>{y(s,r(a).offsetWidth)},dragging:f=>{y(o,r(s)+f.detail.diffX+"px")},dragstop:()=>{R.triggerResize()}}}),V(()=>Re(c,1,`page-sidebar ${i()??""}`)),p(n,l),Ve()}var nP=x('<i class="ri-alert-line txt-sm link-hint" aria-hidden="true"></i>'),iP=x('<i class="ri-unpin-line svelte-1ew7kcp"></i>'),rP=x('<i class="ri-pushpin-line m-l-auto svelte-1ew7kcp"></i>'),aP=x('<a><i aria-hidden="true"></i> <span class="txt"> </span> <!>  <span class="btn btn-xs btn-circle btn-hint btn-transparent btn-pin-collection m-l-auto svelte-1ew7kcp" aria-hidden="true"><!></span></a>');function Wc(n,e){Ue(e,!1);const t=()=>It(Ki,"$activeCollection",i),[i,a]=At(),s=P();let o=te(e,"collection",8),l=te(e,"pinnedIds",12);function c(D){l().includes(D.id)?R.removeByValue(l(),D.id):l().push(D.id),l(l())}ie(()=>(N(l()),N(o())),()=>{y(s,l().includes(o().id))}),dt(),Be();var u=aP();let d;var f=T(u),h=g(f,2),v=T(h),_=g(h,2);{var b=D=>{var I=nP();Ge(I,(C,w)=>ht?.(C,w),()=>"OAuth2 auth is enabled but the collection doesn't have any registered providers"),p(D,I)};G(_,D=>{N(o()),M(()=>o().type=="auth"&&o().oauth2?.enabled&&!o().oauth2.providers?.length)&&D(b)})}var m=g(_,2);H(m,"aria-label","Pin collection");var k=T(m);{var S=D=>{var I=iP();p(D,I)},$=D=>{var I=rP();p(D,I)};G(k,D=>{r(s)?D(S):D($,!1)})}Ge(m,(D,I)=>ht?.(D,I),()=>({position:"right",text:(r(s)?"Unpin":"Pin")+" collection"})),Nt(()=>re("click",m,Ct(fn(()=>c(o()))))),Ge(u,D=>ni?.(D)),V(D=>{H(u,"href",`/collections?collection=${N(o()),M(()=>o().id)??""}`),d=Re(u,1,"sidebar-list-item svelte-1ew7kcp",null,d,{active:t()?.id===o().id}),H(u,"title",(N(o()),M(()=>o().name))),Re(f,1,D,"svelte-1ew7kcp"),$e(v,(N(o()),M(()=>o().name)))},[()=>$n((N(R),N(o()),M(()=>R.getCollectionTypeIcon(o().type))))]),p(n,u),Ve(),a()}var sP=x('<div class="sidebar-title">Pinned</div> <!>',1),oP=x('<div class="sidebar-title">Others</div>'),lP=x("<!> <!>",1),cP=x('<i aria-hidden="true"></i>'),uP=x('<button type="button"><span class="txt">System</span> <!></button> <!>',1),dP=x('<p class="txt-hint m-t-10 m-b-10 txt-center">No collections found.</p>'),fP=x('<footer class="sidebar-footer"><button type="button" class="btn btn-block btn-outline"><i class="ri-add-line"></i> <span class="txt">New collection</span></button></footer>'),hP=x('<header class="sidebar-header"><div><div class="form-field-addon"><button type="button" aria-label="Clear search"><i class="ri-close-line"></i></button></div> <input type="text" placeholder="Search collections..." name="collections-search"/></div></header> <hr class="m-t-5 m-b-xs"/> <div><!> <!> <!> <!></div> <!>',1),vP=x("<!> <!>",1);function pP(n,e){Ue(e,!1);const t=()=>It(Gn,"$collections",o),i=()=>It(Ki,"$activeCollection",o),a=()=>It(so,"$isCollectionsLoading",o),s=()=>It(So,"$hideControls",o),[o,l]=At(),c=P(),u=P(),d=P(),f=P(),h=P(),v=P(),_="@pinnedCollections";let b=P(),m=P(""),k=P([]),S=P(!1),$=P();I();function D(){setTimeout(()=>{const A=document.querySelector(".collection-sidebar .sidebar-list-item.active");A&&A?.scrollIntoView({block:"nearest"})},0)}function I(){y(k,[]);try{const A=localStorage.getItem(_);A&&y(k,JSON.parse(A)||[])}catch{}}function C(){y(k,r(k).filter(A=>!!t().find(q=>q.id==A)))}ie(()=>t(),()=>{t()&&(C(),D())}),ie(()=>r(m),()=>{y(c,r(m).replace(/\s+/g,"").toLowerCase())}),ie(()=>r(m),()=>{y(u,r(m)!=="")}),ie(()=>r(k),()=>{r(k)&&localStorage.setItem(_,JSON.stringify(r(k)))}),ie(()=>(t(),r(m),r(c)),()=>{y(d,t().filter(A=>A.id==r(m)||A.name?.replace(/\s+/g,"")?.toLowerCase()?.includes(r(c))))}),ie(()=>(r(d),r(k)),()=>{y(f,r(d).filter(A=>r(k).includes(A.id)))}),ie(()=>(r(d),r(k)),()=>{y(h,r(d).filter(A=>!A.system&&!r(k).includes(A.id)))}),ie(()=>(r(d),r(k)),()=>{y(v,r(d).filter(A=>A.system&&!r(k).includes(A.id)))}),ie(()=>(i(),r($),r(f)),()=>{i()?.id&&r($)!=i().id&&(y($,i().id),i().system&&!r(f).find(A=>A.id==i().id)?y(S,!0):y(S,!1))}),dt(),Be();var w=vP(),E=F(w);Hg(E,{class:"collection-sidebar",children:(A,q)=>{var L=hP(),j=F(L),U=T(j);let W;var Y=T(U),J=T(Y);let z;var X=g(Y,2),oe=g(j,4);let ce;var le=T(oe);{var me=ae=>{var xe=sP(),se=g(F(xe),2);bt(se,1,()=>r(f),ge=>ge.id,(ge,ee)=>{Wc(ge,{get collection(){return r(ee)},get pinnedIds(){return r(k)},set pinnedIds(ve){y(k,ve)},$$legacy:!0})}),p(ae,xe)};G(le,ae=>{r(f),M(()=>r(f).length)&&ae(me)})}var _e=g(le,2);{var pe=ae=>{var xe=lP(),se=F(xe);{var ge=ve=>{var Ce=oP();p(ve,Ce)};G(se,ve=>{r(f),M(()=>r(f).length)&&ve(ge)})}var ee=g(se,2);bt(ee,1,()=>r(h),ve=>ve.id,(ve,Ce)=>{Wc(ve,{get collection(){return r(Ce)},get pinnedIds(){return r(k)},set pinnedIds(Ie){y(k,Ie)},$$legacy:!0})}),p(ae,xe)};G(_e,ae=>{r(h),M(()=>r(h).length)&&ae(pe)})}var Te=g(_e,2);{var Se=ae=>{var xe=uP(),se=F(xe);let ge;var ee=g(T(se),2);{var ve=ze=>{var qe=cP();V(()=>Re(qe,1,`ri-arrow-${r(S)?"up":"down"}-s-line`)),p(ze,qe)};G(ee,ze=>{r(c),M(()=>!r(c).length)&&ze(ve)})}var Ce=g(se,2);{var Ie=ze=>{var qe=et(),je=F(qe);bt(je,1,()=>r(v),rt=>rt.id,(rt,be)=>{Wc(rt,{get collection(){return r(be)},get pinnedIds(){return r(k)},set pinnedIds(Le){y(k,Le)},$$legacy:!0})}),p(ze,qe)};G(Ce,ze=>{r(S),r(c),M(()=>r(S)||r(c).length)&&ze(Ie)})}V(()=>{ge=Re(se,1,"sidebar-title m-b-xs",null,ge,{"link-hint":!r(c).length}),H(se,"aria-label",r(S)?"Expand system collections":"Collapse system collections"),H(se,"aria-expanded",(r(S),r(c),M(()=>r(S)||r(c).length))),se.disabled=(r(c),M(()=>r(c).length))}),re("click",se,()=>{r(c).length||y(S,!r(S))}),p(ae,xe)};G(Te,ae=>{r(v),M(()=>r(v).length)&&ae(Se)})}var he=g(Te,2);{var ue=ae=>{var xe=dP();p(ae,xe)};G(he,ae=>{r(c),r(d),M(()=>r(c).length&&!r(d).length)&&ae(ue)})}var ke=g(oe,2);{var we=ae=>{var xe=fP(),se=T(xe);re("click",se,()=>r(b)?.show()),p(ae,xe)};G(ke,ae=>{s()||ae(we)})}V(()=>{W=Re(U,1,"form-field search",null,W,{active:r(u)}),z=Re(J,1,"btn btn-xs btn-transparent btn-circle btn-clear",null,z,{hidden:!r(u)}),ce=Re(oe,1,"sidebar-content",null,ce,{fade:a(),"sidebar-content-compact":r(d).length>20})}),re("click",J,()=>y(m,"")),xt(X,()=>r(m),ae=>y(m,ae)),p(A,L)},$$slots:{default:!0}});var O=g(E,2);pt(Ld(O,{$$legacy:!0}),A=>y(b,A),()=>r(b)),p(n,w),Ve(),l()}var mP=x('<div class="datetime svelte-7gfk5e"><div class="date"> </div> <div class="time svelte-7gfk5e"> </div></div>'),gP=x('<span class="txt txt-hint">N/A</span>');function bP(n,e){Ue(e,!1);const t=P(),i=P();let a=te(e,"date",8,"");const s={get text(){return R.formatToLocalDate(a())+" Local"}};ie(()=>N(a()),()=>{y(t,a()?a().substring(0,10):null)}),ie(()=>N(a()),()=>{y(i,a()?a().substring(10,19):null)}),dt(),Be();var o=et(),l=F(o);{var c=d=>{var f=mP(),h=T(f),v=T(h),_=g(h,2),b=T(_);Ge(f,(m,k)=>ht?.(m,k),()=>s),V(()=>{$e(v,r(t)),$e(b,`${r(i)??""} UTC`)}),p(d,f)},u=d=>{var f=gP();p(d,f)};G(l,d=>{a()?d(c):d(u,!1)})}p(n,o),Ve()}var yP=x("<img/>"),_P=x("<object>Cannot preview the file.</object>"),xP=x('<button type="button" class="overlay-close" aria-label="Close"><i class="ri-close-line"></i></button>'),wP=x('<button type="button" class="link-hint txt-ellipsis inline-flex"> <i class="ri-external-link-line"></i></button> <div class="flex-fill"></div> <button type="button" class="btn btn-transparent">Close</button>',1);function kP(n,e){Ue(e,!1);const t=P(),i=P(),a=P();let s=P(),o=P(""),l;async function c(v){l=v,l&&(y(o,await d()),r(s)?.show())}function u(){return r(s)?.hide()}async function d(){return typeof l=="function"?await l():await l}async function f(){try{y(o,await d()),window.open(r(o),"_blank","noreferrer,noopener")}catch(v){v.isAbort||console.warn("openInNewTab file token failure:",v)}}ie(()=>r(o),()=>{y(t,r(o).indexOf("?"))}),ie(()=>(r(o),r(t)),()=>{y(i,r(o).substring(r(o).lastIndexOf("/")+1,r(t)>0?r(t):void 0))}),ie(()=>r(i),()=>{y(a,R.getFileType(r(i)))}),dt();var h={show:c,hide:u};return Be(),pt(pn(n,{get class(){return`preview preview-${r(a)??""}`},btnClose:!1,popup:!0,$$events:{show(v){lt.call(this,e,v)},hide(v){lt.call(this,e,v)}},children:(v,_)=>{var b=et(),m=F(b);{var k=S=>{var $=et(),D=F($);{var I=w=>{var E=yP();V(()=>{H(E,"src",r(o)),H(E,"alt",`Preview ${r(i)??""}`)}),p(w,E)},C=w=>{var E=_P();V(()=>{H(E,"title",r(i)),H(E,"data",r(o))}),p(w,E)};G(D,w=>{r(a)==="image"?w(I):w(C,!1)})}p(S,$)};G(m,S=>{r(s),M(()=>r(s)?.isActive())&&S(k)})}p(v,b)},$$slots:{default:!0,header:(v,_)=>{var b=xP();re("click",b,Ct(u)),p(v,b)},footer:(v,_)=>{var b=wP(),m=F(b),k=T(m),S=g(m,4);V(()=>{H(m,"title",r(i)),$e(k,`${r(i)??""} `)}),re("auxclick",m,f),re("click",m,f),re("click",S,u),p(v,b)}},$$legacy:!0}),v=>y(s,v),()=>r(s)),_t(e,"show",c),_t(e,"hide",u),Ve(h)}var SP=x("<div></div>"),TP=x('<img loading="lazy"/>'),$P=x('<i class="ri-video-line"></i>'),IP=x('<i class="ri-file-3-line"></i>'),CP=x('<button type="button"><!></button>'),EP=x("<!> <!>",1);function Nd(n,e){Ue(e,!1);const t=P(),i=P();let a=te(e,"record",8,null),s=te(e,"filename",8,""),o=te(e,"size",8,""),l=P(),c=P(""),u=P(""),d=P(!0);f();async function f(){y(d,!0);try{y(u,await Ae.getSuperuserFileToken(a().collectionId))}catch($){console.warn("File token failure:",$)}y(d,!1)}function h(){y(c,"")}ie(()=>N(s()),()=>{y(t,R.getFileType(s()))}),ie(()=>(r(t),N(s())),()=>{y(i,["image","audio","video"].includes(r(t))||s().endsWith(".pdf"))}),ie(()=>(r(d),N(a()),N(s()),r(u)),()=>{y(c,r(d)?"":Ae.files.getURL(a(),s(),{thumb:"100x100",token:r(u)}))}),dt(),Be();var v=EP(),_=F(v);{var b=$=>{var D=SP();V(()=>Re(D,1,`thumb ${o()?`thumb-${o()}`:""}`)),p($,D)},m=$=>{var D=CP();H(D,"draggable",!1);var I=T(D);{var C=E=>{var O=TP();H(O,"draggable",!1),V(()=>{H(O,"src",r(c)),H(O,"alt",s()),H(O,"title",`Preview ${s()??""}`)}),re("error",O,h),p(E,O)},w=E=>{var O=et(),A=F(O);{var q=j=>{var U=$P();p(j,U)},L=j=>{var U=IP();p(j,U)};G(A,j=>{r(t)==="video"||r(t)==="audio"?j(q):j(L,!1)},!0)}p(E,O)};G(I,E=>{r(t)==="image"?E(C):E(w,!1)})}V(()=>{Re(D,1,`handle thumb ${o()?`thumb-${o()}`:""}`),H(D,"title",(r(i)?"Preview":"Download")+" "+s())}),re("click",D,fn(async()=>{if(r(i))try{r(l)?.show(async()=>(y(u,await Ae.getSuperuserFileToken(a().collectionId)),Ae.files.getURL(a(),s(),{token:r(u)})))}catch(E){E.isAbort||console.warn("Preview file token failure:",E)}})),p($,D)};G(_,$=>{r(d)?$(b):$(m,!1)})}var k=g(_,2);{var S=$=>{pt(kP($,{$$legacy:!0}),D=>y(l,D),()=>r(l))};G(k,$=>{r(i)&&$(S)})}p(n,v),Ve()}var OP=x('<div class="txt"> </div>');function Wg(n,e){Ue(e,!1);let t=te(e,"value",24,()=>({}));Be();var i=OP(),a=T(i);V(()=>$e(a,`${N(t()),M(()=>t()?.lon)??""}, ${N(t()),M(()=>t()?.lat)??""}`)),p(n,i),Ve()}var DP=x('<span class="delimiter">â¢</span>'),PP=x('<span class="expand-start"></span>'),MP=x('<span class="delimiter">|</span>'),AP=x("<!> <!>",1),LP=x('<span class="delimiter">|</span> <small class="delimiter txt-hint"> </small>',1),NP=x('<span class="expand-end"></span>'),RP=x("<!> <!> <!> <!>",1),FP=x('<span class="txt"> </span>'),qP=x("<!> <!>",1),zP=x('<span class="txt"> </span>'),jP=x("<!> <!>",1);function Yg(n,e){Ue(e,!1);const t=()=>It(Gn,"$collections",i),[i,a]=At(),s=P();let o=te(e,"record",8),l=P([]),c=P([]);function u(){const v=r(s)?.fields||[];if(y(l,v.filter(_=>!_.hidden&&_.presentable&&_.type=="file")),y(c,v.filter(_=>!_.hidden&&_.presentable&&_.type!="file")),!r(l).length&&!r(c).length){const _=v.find(b=>!b.hidden&&b.type=="file"&&b.maxSelect==1&&b.mimeTypes?.find(m=>m.startsWith("image/")));_&&r(l).push(_)}}ie(()=>(t(),N(o())),()=>{y(s,t()?.find(v=>v.id==o()?.collectionId))}),ie(()=>r(s),()=>{r(s)&&u()}),dt(),Be();var d=jP(),f=F(d);bt(f,1,()=>r(l),Mt,(v,_)=>{const b=ne(()=>(N(R),N(o()),r(_),M(()=>R.toArray(o()[r(_).name]).slice(0,5))));var m=et(),k=F(m);bt(k,1,()=>r(b),Mt,(S,$)=>{var D=et(),I=F(D);{var C=w=>{Nd(w,{get record(){return o()},get filename(){return r($)},size:"xs"})};G(I,w=>{N(R),r($),M(()=>!R.isEmpty(r($)))&&w(C)})}p(S,D)}),p(v,m)});var h=g(f,2);bt(h,1,()=>r(c),Mt,(v,_,b)=>{var m=qP(),k=F(m);{var S=C=>{var w=DP();p(C,w)};G(k,C=>{b>0&&C(S)})}var $=g(k,2);{var D=C=>{const w=ne(()=>(N(o()),r(_),M(()=>Array.isArray(o().expand?.[r(_).name])))),E=ne(()=>(N(R),N(o()),r(_),M(()=>R.toArray(o().expand?.[r(_).name]))));var O=RP(),A=F(O);{var q=J=>{var z=PP();z.textContent="[",p(J,z)};G(A,J=>{r(w)&&J(q)})}var L=g(A,2);bt(L,1,()=>(N(r(E)),M(()=>r(E).slice(0,2))),Mt,(J,z,X)=>{var oe=AP(),ce=F(oe);{var le=_e=>{var pe=MP();p(_e,pe)};G(ce,_e=>{X>0&&_e(le)})}var me=g(ce,2);Yg(me,{get record(){return r(z)}}),p(J,oe)});var j=g(L,2);{var U=J=>{var z=LP(),X=g(F(z),2),oe=T(X);V(()=>$e(oe,`(${N(r(E)),M(()=>r(E).length-2)??""} more)`)),p(J,z)};G(j,J=>{N(r(E)),M(()=>r(E).length>2)&&J(U)})}var W=g(j,2);{var Y=J=>{var z=NP();z.textContent="]",p(J,z)};G(W,J=>{r(w)&&J(Y)})}p(C,O)},I=C=>{var w=et(),E=F(w);{var O=q=>{Wg(q,{get value(){return N(o()),r(_),M(()=>o()[r(_).name])}})},A=q=>{var L=FP(),j=T(L);V(U=>$e(j,U),[()=>(N(R),N(o()),r(_),M(()=>R.truncate(R.displayValue(o(),[r(_).name]),70)))]),p(q,L)};G(E,q=>{r(_),M(()=>r(_).type=="geoPoint")?q(O):q(A,!1)},!0)}p(C,w)};G($,C=>{r(_),N(o()),M(()=>r(_).type=="relation"&&o().expand?.[r(_).name])?C(D):C(I,!1)})}p(v,m)},v=>{var _=zP(),b=T(_);V(m=>$e(b,m),[()=>(N(R),N(o()),M(()=>R.truncate(R.displayValue(o(),[]),70)))]),p(v,_)}),p(n,d),Ve(),a()}var UP=x('<div class="record-info-excerpt"><div class="info-content"><!></div> <a target="_blank" aria-label="View record" class="record-link link-hint" rel="noopener noreferrer"><i class="ri-external-link-line txt-sm"></i></a></div>');function Dl(n,e){Ue(e,!1);let t=te(e,"record",8);function i(c,...u){const d=Object.assign({},c);for(let f of u)delete d[f];return d}Be();var a=UP(),s=T(a),o=T(s);Yg(o,{get record(){return t()}});var l=g(s,2);Ge(l,(c,u)=>ht?.(c,u),()=>({text:`Open relation record in new tab:
`+R.truncate(JSON.stringify(R.truncateObject(i(t(),"expand")),null,2),800,!0),class:"code",position:"left"})),Nt(()=>re("click",l,fn(function(c){lt.call(this,e,c)}))),Nt(()=>re("keydown",l,fn(function(c){lt.call(this,e,c)}))),V(()=>H(l,"href",`#/collections?collection=${N(t()),M(()=>t().collectionId)??""}&recordId=${N(t()),M(()=>t().id)??""}`)),p(n,a),Ve()}var VP=x('<span class="label label-warning">You</span>'),BP=x('<div class="label"><!> <div class="txt txt-ellipsis"> </div></div> <!>',1),HP=x('<span class="txt txt-ellipsis"> </span>'),WP=x('<span class="txt"> </span> <!>',1),YP=x('<span class="txt-hint">N/A</span>'),KP=x("<span> </span>"),JP=x('<span class="txt"> </span>'),ZP=x('<a class="txt-ellipsis" target="_blank" rel="noopener noreferrer"> </a>'),GP=x('<span class="txt"> </span>'),XP=x('<span class="label"> </span>'),QP=x('<div class="inline-flex"></div>'),eM=x('<span class="label"><!></span>'),tM=x('<span class="label"> </span>'),nM=x("<div><!> <!></div>"),iM=x("<div><!> <!></div>"),rM=x('<div class="label"><!></div>'),aM=x('<span class="txt txt-ellipsis"> </span>'),sM=x('<div class="block txt-break fallback-block svelte-1b73nbl"> </div>');function Fu(n,e){Ue(e,!1);const t=()=>It(Hl,"$superuser",i),[i,a]=At(),s=P();let o=te(e,"record",8),l=te(e,"field",8),c=te(e,"short",8,!1);ie(()=>(N(o()),N(l())),()=>{y(s,o()?.[l().name])}),dt(),Be();var u=et(),d=F(u);{var f=v=>{var _=BP(),b=F(_),m=T(b);ar(m,{get value(){return r(s)}});var k=g(m,2),S=T(k),$=g(b,2);{var D=I=>{var C=VP();p(I,C)};G($,I=>{N(o()),t(),M(()=>o().collectionName=="_superusers"&&o().id==t().id)&&I(D)})}V(()=>$e(S,r(s))),p(v,_)},h=v=>{var _=et(),b=F(_);{var m=S=>{const $=ne(()=>(N(R),r(s),M(()=>R.trimQuotedValue(JSON.stringify(r(s)))||'""')));var D=et(),I=F(D);{var C=E=>{var O=HP(),A=T(O);V(q=>$e(A,q),[()=>(N(R),N(r($)),M(()=>R.truncate(r($))))]),p(E,O)},w=E=>{var O=WP(),A=F(O),q=T(A),L=g(A,2);{var j=U=>{{let W=ne(()=>(r(s),M(()=>JSON.stringify(r(s),null,2))));ar(U,{get value(){return r(W)}})}};G(L,U=>{N(r($)),M(()=>r($).length>500)&&U(j)})}V(U=>$e(q,U),[()=>(N(R),N(r($)),M(()=>R.truncate(r($),500,!0)))]),p(E,O)};G(I,E=>{c()?E(C):E(w,!1)})}p(S,D)},k=S=>{var $=et(),D=F($);{var I=w=>{var E=YP();p(w,E)},C=w=>{var E=et(),O=F(E);{var A=L=>{var j=KP();let U;var W=T(j);V(()=>{U=Re(j,1,"label",null,U,{"label-success":!!r(s)}),$e(W,r(s)?"True":"False")}),p(L,j)},q=L=>{var j=et(),U=F(j);{var W=J=>{var z=JP(),X=T(z);V(()=>$e(X,r(s))),p(J,z)},Y=J=>{var z=et(),X=F(z);{var oe=le=>{var me=ZP(),_e=T(me);Ge(me,(pe,Te)=>ht?.(pe,Te),()=>"Open in new tab"),Nt(()=>re("click",me,fn(function(pe){lt.call(this,e,pe)}))),V(pe=>{H(me,"href",r(s)),$e(_e,pe)},[()=>(N(R),r(s),M(()=>R.truncate(r(s))))]),p(le,me)},ce=le=>{var me=et(),_e=F(me);{var pe=Se=>{var he=et(),ue=F(he);{var ke=ae=>{var xe=GP(),se=T(xe);V(ge=>$e(se,ge),[()=>(N(R),r(s),M(()=>R.truncate(R.plainText(r(s)),195)))]),p(ae,xe)},we=ae=>{ld(ae,{cssClass:"tinymce-preview",conf:{branding:!1,promotion:!1,menubar:!1,statusbar:!1,min_height:30,height:59,max_height:500,autoresize_bottom_margin:5,resize:!1,content_style:"body { font-size: 14px }",toolbar:"",plugins:["autoresize"],skin:"pocketbase"},get value(){return r(s)},disabled:!0})};G(ue,ae=>{c()?ae(ke):ae(we,!1)})}p(Se,he)},Te=Se=>{var he=et(),ue=F(he);{var ke=ae=>{bP(ae,{get date(){return r(s)}})},we=ae=>{var xe=et(),se=F(xe);{var ge=ve=>{var Ce=QP();bt(Ce,7,()=>(N(R),r(s),M(()=>R.toArray(r(s)))),(Ie,ze)=>ze+Ie,(Ie,ze)=>{var qe=XP(),je=T(qe);V(()=>$e(je,r(ze))),p(Ie,qe)}),p(ve,Ce)},ee=ve=>{var Ce=et(),Ie=F(Ce);{var ze=je=>{const rt=ne(()=>(N(R),r(s),M(()=>R.toArray(r(s))))),be=ne(()=>(N(R),N(o()),N(l()),M(()=>R.toArray(o()?.expand?.[l().name])))),Le=ne(()=>c()?20:500);var Ke=nM();let st;var it=T(Ke);{var He=Ne=>{var Ze=et(),Xe=F(Ze);bt(Xe,3,()=>(N(r(be)),N(r(Le)),M(()=>r(be).slice(0,r(Le)))),(vt,tt)=>tt+vt,(vt,tt)=>{var We=eM(),Qe=T(We);Dl(Qe,{get record(){return r(tt)}}),p(vt,We)}),p(Ne,Ze)},Je=Ne=>{var Ze=et(),Xe=F(Ze);bt(Xe,1,()=>(N(r(rt)),N(r(Le)),M(()=>r(rt).slice(0,r(Le)))),Mt,(vt,tt)=>{var We=tM(),Qe=T(We);V(()=>$e(Qe,r(tt))),p(vt,We)}),p(Ne,Ze)};G(it,Ne=>{N(r(be)),M(()=>r(be).length)?Ne(He):Ne(Je,!1)})}var Fe=g(it,2);{var Me=Ne=>{var Ze=Oa("...");p(Ne,Ze)};G(Fe,Ne=>{N(r(rt)),N(r(Le)),M(()=>r(rt).length>r(Le))&&Ne(Me)})}V(()=>st=Re(Ke,1,"rel-values svelte-1b73nbl",null,st,{"inline-flex":c(),vertical:!c()})),p(je,Ke)},qe=je=>{var rt=et(),be=F(rt);{var Le=st=>{const it=ne(()=>(N(R),r(s),M(()=>R.toArray(r(s))))),He=ne(()=>c()?10:500);var Je=iM();let Fe;var Me=T(Je);bt(Me,3,()=>(N(r(it)),N(r(He)),M(()=>r(it).slice(0,r(He)))),(Xe,vt)=>vt+Xe,(Xe,vt)=>{Nd(Xe,{get record(){return o()},get filename(){return r(vt)},size:"sm"})});var Ne=g(Me,2);{var Ze=Xe=>{var vt=Oa("...");p(Xe,vt)};G(Ne,Xe=>{N(r(it)),N(r(He)),M(()=>r(it).length>r(He))&&Xe(Ze)})}V(()=>Fe=Re(Je,1,"inline-flex",null,Fe,{multiple:l().maxSelect!=1})),p(st,Je)},Ke=st=>{var it=et(),He=F(it);{var Je=Me=>{var Ne=rM(),Ze=T(Ne);Wg(Ze,{get value(){return r(s)}}),p(Me,Ne)},Fe=Me=>{var Ne=et(),Ze=F(Ne);{var Xe=tt=>{var We=aM(),Qe=T(We);V((mt,gt)=>{H(We,"title",mt),$e(Qe,gt)},[()=>(N(R),r(s),M(()=>R.truncate(r(s)))),()=>(N(R),r(s),M(()=>R.truncate(r(s))))]),p(tt,We)},vt=tt=>{var We=sM(),Qe=T(We);V(()=>$e(Qe,r(s))),p(tt,We)};G(Ze,tt=>{c()?tt(Xe):tt(vt,!1)},!0)}p(Me,Ne)};G(He,Me=>{N(l()),M(()=>l().type==="geoPoint")?Me(Je):Me(Fe,!1)},!0)}p(st,it)};G(be,st=>{N(l()),M(()=>l().type==="file")?st(Le):st(Ke,!1)},!0)}p(je,rt)};G(Ie,je=>{N(l()),M(()=>l().type==="relation")?je(ze):je(qe,!1)},!0)}p(ve,Ce)};G(se,ve=>{N(l()),M(()=>l().type==="select")?ve(ge):ve(ee,!1)},!0)}p(ae,xe)};G(ue,ae=>{N(l()),M(()=>l().type==="date"||l().type==="autodate")?ae(ke):ae(we,!1)},!0)}p(Se,he)};G(_e,Se=>{N(l()),M(()=>l().type==="editor")?Se(pe):Se(Te,!1)},!0)}p(le,me)};G(X,le=>{N(l()),M(()=>l().type==="url")?le(oe):le(ce,!1)},!0)}p(J,z)};G(U,J=>{N(l()),M(()=>l().type==="number")?J(W):J(Y,!1)},!0)}p(L,j)};G(O,L=>{N(l()),M(()=>l().type==="bool")?L(A):L(q,!1)},!0)}p(w,E)};G(D,w=>{N(R),r(s),M(()=>R.isEmpty(r(s)))?w(I):w(C,!1)},!0)}p(S,$)};G(b,S=>{N(l()),M(()=>l().type==="json")?S(m):S(k,!1)},!0)}p(v,_)};G(d,v=>{N(l()),M(()=>l().primaryKey)?v(f):v(h,!1)})}p(n,u),Ve(),a()}var oM=x('<tr><td class="min-width txt-hint txt-bold"> </td><td class="col-field svelte-1r0ghd8"><!></td></tr>'),lM=x("<table><tbody></tbody></table>"),cM=x("<h4><strong> </strong> record preview</h4>"),uM=x('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button>');function dM(n,e){Ue(e,!1);const t=P();let i=te(e,"collection",8),a=P(),s=P({}),o=P(!1);function l(h){return u(h),r(a)?.show()}function c(){return y(o,!1),r(a)?.hide()}async function u(h){y(s,{}),y(o,!0),y(s,await d(h)||{}),y(o,!1)}async function d(h){if(h&&typeof h=="string"){try{return await Ae.collection(i().id).getOne(h)}catch(v){v.isAbort||(c(),console.warn("resolveModel:",v),dr(`Unable to load record with id "${h}"`))}return null}return h}ie(()=>N(i()),()=>{y(t,!!i()?.fields?.find(h=>h.type==="editor"))}),dt();var f={show:l,hide:c};Be();{let h=ne(()=>r(t)?"overlay-panel-xl":"overlay-panel-lg");pt(pn(n,{get class(){return`record-preview-panel ${r(h)??""}`},$$events:{hide(v){lt.call(this,e,v)},show(v){lt.call(this,e,v)}},children:(v,_)=>{var b=lM();let m;var k=T(b);bt(k,5,()=>(N(i()),M(()=>i()?.fields)),Mt,(S,$)=>{var D=oM(),I=T(D),C=T(I),w=g(I),E=T(w);Fu(E,{get field(){return r($)},get record(){return r(s)}}),V(()=>$e(C,(r($),M(()=>r($).name)))),p(S,D)}),V(()=>m=Re(b,1,"table-border preview-table",null,m,{"table-loading":r(o)})),p(v,b)},$$slots:{default:!0,header:(v,_)=>{var b=cM(),m=T(b),k=T(m);V(()=>$e(k,(N(i()),M(()=>i()?.name)))),p(v,b)},footer:(v,_)=>{var b=uM();re("click",b,()=>c()),p(v,b)}},$$legacy:!0}),v=>y(a,v),()=>r(a))}return _t(e,"show",l),_t(e,"hide",c),Ve(f)}var fM=x('<i class="ri-calendar-event-line txt-disabled"></i>');function hM(n,e){Ue(e,!1);const t=()=>It(Gn,"$collections",i),[i,a]=At(),s=P(),o="yyyy-MM-dd HH:mm:ss.SSS";let l=te(e,"record",8),c=P([]);function u(){y(c,[]);const f=r(s).fields||[];for(let h of f)h.type=="autodate"&&r(c).push(h.name+": "+R.formatToLocalDate(l()[h.name],o)+" Local")}ie(()=>(N(l()),t()),()=>{y(s,l()&&t().find(f=>f.id==l().collectionId))}),ie(()=>N(l()),()=>{l()&&u()}),dt(),Be();var d=fM();Ge(d,(f,h)=>ht?.(f,h),()=>({text:r(c).join(`
`),position:"left"})),p(n,d),Ve(),a()}var vM=x('<div class="block txt-center"><span class="loader"></span></div>'),pM=x('<div class="list-item"><figure class="provider-logo"><img alt="Provider logo"/></figure> <span class="txt"> </span> <div class="txt-hint"> </div> <button type="button" class="btn btn-transparent link-hint btn-circle btn-sm m-l-auto" aria-label="Unlink"><i class="ri-close-line"></i></button></div>'),mM=x('<div class="list"></div>'),gM=x('<h6 class="txt-hint txt-center m-t-sm m-b-sm">No linked OAuth2 providers.</h6>');function bM(n,e){Ue(e,!1);const t=qt();let i=te(e,"record",8),a=P([]),s=P(!1);function o(_){return Ad.find(b=>b.key==_)||{}}function l(_){return o(_)?.title||R.sentenize(_,!1)}async function c(){if(!i()?.id){y(a,[]),y(s,!1);return}y(s,!0);try{y(a,await Ae.collection("_externalAuths").getFullList({filter:Ae.filter("collectionRef = {:collectionId} && recordRef = {:recordId}",{collectionId:i().collectionId,recordId:i().id})}))}catch(_){Ae.error(_)}y(s,!1)}function u(_){!i()?.id||!_||qn(`Do you really want to unlink the ${l(_.provider)} provider?`,()=>Ae.collection("_externalAuths").delete(_.id).then(()=>{hn(`Successfully unlinked the ${l(_.provider)} provider.`),t("unlink",_.provider),c()}).catch(b=>{Ae.error(b)}))}c(),Be();var d=et(),f=F(d);{var h=_=>{var b=vM();p(_,b)},v=_=>{var b=et(),m=F(b);{var k=$=>{var D=mM();bt(D,5,()=>r(a),Mt,(I,C)=>{var w=pM(),E=T(w),O=T(E),A=g(E,2),q=T(A),L=g(A,2),j=T(L),U=g(L,2);V((W,Y)=>{H(O,"src",`${M(()=>"./")??""}images/oauth2/${W??""}`),$e(q,Y),$e(j,`ID: ${r(C),M(()=>r(C).providerId)??""}`)},[()=>(r(C),M(()=>o(r(C).provider)?.logo)),()=>(r(C),M(()=>l(r(C).provider)))]),re("click",U,()=>u(r(C))),p(I,w)}),p($,D)},S=$=>{var D=gM();p($,D)};G(m,$=>{N(i()),r(a),M(()=>i()?.id&&r(a).length)?$(k):$(S,!1)},!0)}p(_,b)};G(f,_=>{r(s)?_(h):_(v,!1)})}p(n,d),Ve()}var yM=x('<div class="flex flex-gap-5 p-5"><span class="secret svelte-1k2bs8d"> </span> <!>  <i class="ri-refresh-line txt-sm link-hint" aria-label="Refresh"></i></div>'),_M=x('<button tabindex="-1" type="button" aria-label="Generate"><i class="ri-sparkling-line" aria-hidden="true"></i> <!></button>');function xM(n,e){Ue(e,!1);const t=qt();let i=te(e,"class",8,"btn-sm btn-hint btn-transparent"),a=te(e,"length",8,32),s=P(""),o=P(),l=P(!1);async function c(){if(y(s,R.randomSecret(a())),t("generate",r(s)),await Tn(),r(o)){let f=document.createRange();f.selectNode(r(o)),window.getSelection().removeAllRanges(),window.getSelection().addRange(f)}}Be();var u=_M(),d=g(T(u),2);Jn(d,{class:"dropdown dropdown-upside dropdown-center dropdown-nowrap",get active(){return r(l)},set active(f){y(l,f)},$$events:{show:c},children:(f,h)=>{var v=yM(),_=T(v),b=T(_);pt(_,S=>y(o,S),()=>r(o));var m=g(_,2);ar(m,{get value(){return r(s)}});var k=g(m,2);Ge(k,(S,$)=>ht?.(S,$),()=>"Refresh"),Nt(()=>re("click",k,c)),V(()=>$e(b,r(s))),p(f,v)},$$slots:{default:!0},$$legacy:!0}),Ge(u,(f,h)=>ht?.(f,h),()=>r(l)?"":"Generate"),V(()=>Re(u,1,`btn btn-circle ${i()??""}`,"svelte-1k2bs8d")),p(n,u),Ve()}var wM=x('<div class="form-field-addon email-visibility-addon svelte-nwd1ws"><button type="button"><span class="txt"> </span></button></div>'),kM=x('<label><i></i> <span class="txt">email</span></label> <!> <input type="email" autocomplete="off" class="svelte-nwd1ws"/>',1),SM=x('<input type="checkbox"/> <label>Change password</label>',1),TM=x('<label><i class="ri-lock-line"></i> <span class="txt">Password</span></label> <input type="password" autocomplete="new-password" required/> <div class="form-field-addon"><!></div>',1),$M=x('<label><i class="ri-lock-line"></i> <span class="txt">Password confirm</span></label> <input type="password" autocomplete="new-password" required/>',1),IM=x('<div class="block"><div><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div></div>'),CM=x('<input type="checkbox"/> <label>Verified</label>',1),EM=x('<div class="col-lg-12"><!></div>'),OM=x('<div class="grid m-b-base"><div class="col-lg-12"><!></div> <div class="col-lg-12"><!> <!></div> <!></div>');function DM(n,e){Ue(e,!1);const t=P(),i=P(),a=P();let s=te(e,"record",12),o=te(e,"collection",8),l=te(e,"isNew",24,()=>!s()?.id),c=P(!1);ie(()=>N(o()),()=>{y(t,o()?.name=="_superusers")}),ie(()=>N(o()),()=>{y(i,o()?.fields?.find($=>$.name=="email")||{})}),ie(()=>N(o()),()=>{y(a,o()?.fields?.find($=>$.name=="password")||{})}),ie(()=>(r(c),Zn),()=>{r(c)||(s(s().password=void 0,!0),s(s().passwordConfirm=void 0,!0),Zn("password"),Zn("passwordConfirm"))}),dt(),Be();var u=OM(),d=T(u),f=T(d);{let $=ne(()=>(r(i),M(()=>r(i)?.required?"required":"")));De(f,{get class(){return`form-field ${r($)??""}`},name:"email",children:Ee,$$slots:{default:(D,I)=>{const C=ne(()=>I.uniqueId);var w=kM(),E=F(w),O=T(E),A=g(E,2);{var q=j=>{var U=wM(),W=T(U),Y=T(W),J=T(Y);Ge(W,(z,X)=>ht?.(z,X),()=>({text:"Make email public or private",position:"top-right"})),Nt(()=>re("click",W,Ct(()=>s(s().emailVisibility=!s().emailVisibility,!0)))),V(()=>{Re(W,1,`btn btn-sm btn-transparent ${N(s()),M(()=>s().emailVisibility?"btn-success":"btn-hint")??""}`),$e(J,`Public: ${N(s()),M(()=>s().emailVisibility?"On":"Off")??""}`)}),p(j,U)};G(A,j=>{r(t)||j(q)})}var L=g(A,2);Wi(L,l()),V(j=>{H(E,"for",r(C)),Re(O,1,j),H(L,"id",r(C)),L.required=(r(i),M(()=>r(i).required))},[()=>$n((N(R),M(()=>R.getFieldTypeIcon("email"))))]),xt(L,()=>s().email,j=>s(s().email=j,!0)),p(D,w)}}})}var h=g(d,2),v=T(h);{var _=$=>{De($,{class:"form-field form-field-toggle",name:"verified",children:Ee,$$slots:{default:(D,I)=>{const C=ne(()=>I.uniqueId);var w=SM(),E=F(w),O=g(E,2);V(()=>{H(E,"id",r(C)),H(O,"for",r(C))}),Xt(E,()=>r(c),A=>y(c,A)),p(D,w)}}})};G(v,$=>{l()||$(_)})}var b=g(v,2);{var m=$=>{var D=IM(),I=T(D);let C;var w=T(I),E=T(w);De(E,{class:"form-field required",name:"password",children:Ee,$$slots:{default:(q,L)=>{const j=ne(()=>L.uniqueId);var U=TM(),W=F(U),Y=g(W,2),J=g(Y,2),z=T(J);{let X=ne(()=>(r(a),M(()=>Math.max(15,r(a).min||0))));xM(z,{get length(){return r(X)}})}V(()=>{H(W,"for",r(j)),H(Y,"id",r(j))}),xt(Y,()=>s().password,X=>s(s().password=X,!0)),p(q,U)}}});var O=g(w,2),A=T(O);De(A,{class:"form-field required",name:"passwordConfirm",children:Ee,$$slots:{default:(q,L)=>{const j=ne(()=>L.uniqueId);var U=$M(),W=F(U),Y=g(W,2);V(()=>{H(W,"for",r(j)),H(Y,"id",r(j))}),xt(Y,()=>s().passwordConfirm,J=>s(s().passwordConfirm=J,!0)),p(q,U)}}}),V(()=>C=Re(I,1,"grid",null,C,{"p-t-xs":r(c)})),Et(3,D,()=>vn,()=>({duration:150})),p($,D)};G(b,$=>{(l()||r(c))&&$(m)})}var k=g(h,2);{var S=$=>{var D=EM(),I=T(D);De(I,{class:"form-field form-field-toggle",name:"verified",children:Ee,$$slots:{default:(C,w)=>{const E=ne(()=>w.uniqueId);var O=CM(),A=F(O),q=g(A,2);V(()=>{H(A,"id",r(E)),H(q,"for",r(E))}),Xt(A,()=>s().verified,L=>s(s().verified=L,!0)),re("change",A,Ct(L=>{l()||qn("Do you really want to manually change the verified account state?",()=>{},()=>{s(s().verified=!L.target.checked,!0)})})),p(C,O)}}}),p($,D)};G(k,$=>{r(t)||$(S)})}p(n,u),Ve()}var PM=x("<i></i>"),MM=x("<i></i>"),AM=x('<small class="label label-sm label-danger">Hidden</small>'),LM=x('<label><!> <span class="txt"> </span> <!> <!></label>');function xi(n,e){Ue(e,!1);let t=te(e,"uniqueId",8),i=te(e,"field",8),a=te(e,"icon",8,!0);Be();var s=LM(),o=T(s);{var l=v=>{var _=et(),b=F(_);{var m=S=>{var $=PM();V(D=>Re($,1,D),[()=>$n((N(R),M(()=>R.getFieldTypeIcon("primary"))))]),p(S,$)},k=S=>{var $=MM();V(D=>Re($,1,D),[()=>$n((N(R),N(i()),M(()=>R.getFieldTypeIcon(i().type))))]),p(S,$)};G(b,S=>{N(i()),M(()=>i().primaryKey)?S(m):S(k,!1)})}p(v,_)};G(o,v=>{a()&&v(l)})}var c=g(o,2),u=T(c),d=g(c,2);{var f=v=>{var _=AM();p(v,_)};G(d,v=>{N(i()),M(()=>i().hidden)&&v(f)})}var h=g(d,2);Zt(h,e,"default",{},null),V(()=>{H(s,"for",t()),$e(u,(N(i()),M(()=>i().name)))}),p(n,s),Ve()}var NM=x('<input type="checkbox"/> <!>',1);function RM(n,e){Ue(e,!1);let t=te(e,"field",8),i=te(e,"value",12,!1);Be();{let a=ne(()=>(N(t()),M(()=>t().required?"required":"")));De(n,{get class(){return`form-field form-field-toggle ${r(a)??""}`},get name(){return N(t()),M(()=>t().name)},children:Ee,$$slots:{default:(s,o)=>{const l=ne(()=>o.uniqueId);var c=NM(),u=F(c),d=g(u,2);xi(d,{get uniqueId(){return r(l)},get field(){return t()},icon:!1}),V(()=>H(u,"id",r(l))),Xt(u,i),p(s,c)}}})}Ve()}var FM=x('<div class="form-field-addon"><button type="button" class="link-hint clear-btn svelte-k8k05f" aria-label="Clear"><i class="ri-close-line"></i></button></div>'),qM=x("<!> <!> <!>",1);function zM(n,e){Ue(e,!1);let t=te(e,"field",8),i=te(e,"value",12,void 0),a=P(i());function s(l){l.detail&&l.detail.length==3&&i(l.detail[1])}function o(){i("")}ie(()=>N(i()),()=>{i()&&i().length>19&&i(i().substring(0,19))}),ie(()=>(r(a),N(i())),()=>{r(a)!=i()&&y(a,i())}),dt(),Be();{let l=ne(()=>(N(t()),M(()=>t().required?"required":"")));De(n,{get class(){return`form-field ${r(l)??""}`},get name(){return N(t()),M(()=>t().name)},children:Ee,$$slots:{default:(c,u)=>{const d=ne(()=>u.uniqueId);var f=qM(),h=F(f);xi(h,{get uniqueId(){return r(d)},get field(){return t()}});var v=g(h,2);{var _=m=>{var k=FM(),S=T(k);Ge(S,($,D)=>ht?.($,D),()=>"Clear"),Nt(()=>re("click",S,()=>o())),p(m,k)};G(v,m=>{N(i()),N(t()),M(()=>i()&&!t().required)&&m(_)})}var b=g(v,2);{let m=ne(()=>(N(R),M(()=>R.defaultFlatpickrOptions())));Ru(b,{get id(){return r(d)},get options(){return r(m)},get value(){return r(a)},set value(k){y(a,k)},get formattedValue(){return i()},set formattedValue(k){i(k)},$$events:{close:s},$$legacy:!0})}p(c,f)}}})}Ve()}var jM=x(`<h6 class="txt-center txt-hint">You currently don't have any collection with <code>file</code> field.</h6>`),UM=x('<button type="button"> </button>'),VM=x('<img loading="lazy"/>'),BM=x('<i class="ri-file-3-line"></i>'),HM=x('<button type="button"><!></button>'),WM=x('<button type="button" class="btn btn-hint btn-sm"><span class="txt">Clear filter</span></button>'),YM=x('<div class="inline-flex"><span class="txt txt-hint">No records with images found.</span> <!></div>'),KM=x('<div class="block txt-center"><span class="loader loader-sm active"></span></div>'),JM=x("<!> <!>",1),ZM=x('<div class="file-picker"><aside class="file-picker-sidebar"></aside> <div class="file-picker-content"><div class="flex m-b-base flex-gap-10"><!> <button type="button" class="btn btn-pill btn-transparent btn-hint p-l-xs p-r-xs"><div class="txt">New record</div></button></div> <!></div></div>'),GM=x("<h4> </h4>"),XM=x('<button type="button" class="btn btn-transparent m-r-auto"><span class="txt">Cancel</span></button> <!> <button type="button" class="btn btn-expanded"><span class="txt"> </span></button>',1),QM=x("<!> <!>",1);function eA(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["show","hide","title","submitText","fileTypes"]);Ue(e,!1);const a=()=>It(Gn,"$collections",s),[s,o]=At(),l=P(),c=P(),u=P(),d=P(),f=qt(),h="file_picker_"+R.randomString(5),v=50;let _=te(e,"title",8,"Select a file"),b=te(e,"submitText",8,"Insert"),m=te(e,"fileTypes",24,()=>["image","document","video","audio","file"]),k=P(),S=P(),$=P(""),D=P([]),I=1,C=P(0),w=P(!1),E=P([]),O=P([]),A=P([]),q=P({}),L=P({}),j=P("");function U(){return z(!0),r(k)?.show()}function W(){return r(k)?.hide()}function Y(){y(D,[]),y(L,{}),y(j,"")}function J(){y($,"")}async function z(he=!1){if(r(q)?.id){y(w,!0),he&&Y();try{const ue=he?1:I+1,ke=R.getAllCollectionIdentifiers(r(q));let we=R.normalizeSearchFilter(r($),ke)||"";we&&(we+=" && "),we+="("+r(O).map(se=>`${se.name}:length>0`).join("||")+")";let ae="";r(q).type!="view"&&(ae="-@rowid");const xe=await Ae.collection(r(q).id).getList(ue,v,{filter:we,sort:ae,fields:R.getExcerptCollectionFieldsList(r(q)),skipTotal:1,requestKey:h+"loadImagePicker"});y(D,R.filterDuplicatesByKey(r(D).concat(xe.items))),I=xe.page,y(C,xe.items.length),y(w,!1)}catch(ue){ue.isAbort||(Ae.error(ue),y(w,!1))}}}function X(){let he=["100x100"];if(r(L)?.record?.id){for(const ue of r(O))if(R.toArray(r(L).record[ue.name]).includes(r(L).name)){he=he.concat(R.toArray(ue.thumbs));break}}y(A,[{label:"Original size",value:""}]);for(const ue of he)r(A).push({label:`${ue} thumb`,value:ue});r(j)&&!he.includes(r(j))&&y(j,"")}function oe(he){let ue=[];for(const ke of r(O)){const we=R.toArray(he[ke.name]);for(const ae of we)m().includes(R.getFileType(ae))&&ue.push(ae)}return ue}function ce(he,ue){y(L,{record:he,name:ue})}function le(){r(d)&&(f("submit",Object.assign({size:r(j)},r(L))),W())}ie(()=>(a(),R),()=>{y(E,a().filter(he=>he.type!=="view"&&!!R.toArray(he.fields).find(ue=>ue.type==="file"&&!ue.protected&&(!ue.mimeTypes?.length||!!ue.mimeTypes?.find(ke=>ke.startsWith("image/"))))))}),ie(()=>(r(q),r(E)),()=>{!r(q)?.id&&r(E).length>0&&y(q,r(E)[0])}),ie(()=>r(q),()=>{y(O,r(q)?.fields?.filter(he=>he.type==="file"&&!he.protected))}),ie(()=>r(q),()=>{r(q)?.id&&(J(),X())}),ie(()=>r(L),()=>{r(L)?.name&&X()}),ie(()=>(r($),r(q),r(k)),()=>{typeof r($)<"u"&&r(q)?.id&&r(k)?.isActive()&&z(!0)}),ie(()=>r(L),()=>{y(l,(he,ue)=>r(L)?.name==ue&&r(L)?.record?.id==he.id)}),ie(()=>r(D),()=>{y(c,r(D).find(he=>oe(he).length>0))}),ie(()=>(r(w),r(C)),()=>{y(u,!r(w)&&r(C)==v)}),ie(()=>(r(w),r(L)),()=>{y(d,!r(w)&&!!r(L)?.name)}),dt();var me={show:U,hide:W};Be();var _e=QM(),pe=F(_e);pt(pn(pe,tn({popup:!0,class:"file-picker-popup"},()=>i,{$$events:{hide(he){lt.call(this,e,he)},show(he){lt.call(this,e,he)}},children:(he,ue)=>{var ke=et(),we=F(ke);{var ae=se=>{var ge=jM();p(se,ge)},xe=se=>{var ge=ZM(),ee=T(ge);bt(ee,5,()=>r(E),je=>je.id,(je,rt)=>{var be=UM();let Le;var Ke=T(be);V(()=>{Le=Re(be,1,"sidebar-item",null,Le,{active:r(q)?.id==r(rt).id}),$e(Ke,(r(rt),M(()=>r(rt).name)))}),re("click",be,Ct(()=>{y(q,r(rt))})),p(je,be)});var ve=g(ee,2),Ce=T(ve),Ie=T(Ce);Jl(Ie,{get value(){return r($)},placeholder:"Record search term or filter...",get autocompleteCollection(){return r(q)},$$events:{submit:je=>y($,je.detail)}});var ze=g(Ie,2),qe=g(Ce,2);md(qe,{class:"files-list",vThreshold:100,$$events:{vScrollEnd:()=>{r(u)&&z()}},children:(je,rt)=>{var be=JM(),Le=F(be);{var Ke=Je=>{var Fe=et(),Me=F(Fe);bt(Me,1,()=>r(D),Ne=>Ne.id,(Ne,Ze)=>{const Xe=ne(()=>(r(Ze),M(()=>oe(r(Ze)))));var vt=et(),tt=F(vt);bt(tt,1,()=>r(Xe),Mt,(We,Qe)=>{var mt=HM(),gt=xa(()=>ce(r(Ze),r(Qe)));let nt;var Oe=T(mt);{var B=de=>{var ye=VM();V(Ye=>{H(ye,"src",Ye),H(ye,"alt",r(Qe))},[()=>(N(Ae),r(Ze),r(Qe),M(()=>Ae.files.getURL(r(Ze),r(Qe),{thumb:"100x100"})))]),p(de,ye)},Z=de=>{var ye=BM();p(de,ye)};G(Oe,de=>{N(R),r(Qe),M(()=>R.hasImageExtension(r(Qe)))?de(B):de(Z,!1)})}Ge(mt,(de,ye)=>ht?.(de,ye),()=>r(Qe)+`
(record: `+r(Ze).id+")"),Nt(()=>re("click",mt,Ct(function(...de){r(gt)?.apply(this,de)}))),V(de=>nt=Re(mt,1,"thumb handle",null,nt,de),[()=>({"thumb-warning":r(l)(r(Ze),r(Qe))})]),p(We,mt)}),p(Ne,vt)}),p(Je,Fe)},st=Je=>{var Fe=et(),Me=F(Fe);{var Ne=Ze=>{var Xe=YM(),vt=g(T(Xe),2);{var tt=We=>{var Qe=WM();re("click",Qe,Ct(J)),p(We,Qe)};G(vt,We=>{r($),M(()=>r($)?.length)&&We(tt)})}p(Ze,Xe)};G(Me,Ze=>{r(w)||Ze(Ne)},!0)}p(Je,Fe)};G(Le,Je=>{r(c)?Je(Ke):Je(st,!1)})}var it=g(Le,2);{var He=Je=>{var Fe=KM();p(Je,Fe)};G(it,Je=>{r(w)&&Je(He)})}p(je,be)},$$slots:{default:!0}}),re("click",ze,()=>r(S)?.show()),p(se,ge)};G(we,se=>{r(E),M(()=>!r(E).length)?se(ae):se(xe,!1)})}p(he,ke)},$$slots:{default:!0,header:(he,ue)=>{var ke=GM(),we=T(ke);V(()=>$e(we,_())),p(he,ke)},footer:(he,ue)=>{var ke=XM(),we=F(ke),ae=g(we,2);{var xe=ve=>{De(ve,{class:"form-field file-picker-size-select",children:Ee,$$slots:{default:(Ce,Ie)=>{const ze=ne(()=>Ie.uniqueId);{let qe=ne(()=>!r(d));On(Ce,{upside:!0,get id(){return r(ze)},get items(){return r(A)},get disabled(){return r(qe)},selectPlaceholder:"Select size",get keyOfSelected(){return r(j)},set keyOfSelected(je){y(j,je)},$$legacy:!0})}}}})};G(ae,ve=>{N(R),r(L),M(()=>R.hasImageExtension(r(L)?.name))&&ve(xe)})}var se=g(ae,2),ge=T(se),ee=T(ge);V(()=>{we.disabled=r(w),se.disabled=!r(d),$e(ee,b())}),re("click",we,W),re("click",se,le),p(he,ke)}},$$legacy:!0})),he=>y(k,he),()=>r(k));var Te=g(pe,2);pt(Rd(Te,{get collection(){return r(q)},$$events:{save:he=>{R.removeByKey(r(D),"id",he.detail.record.id),r(D).unshift(he.detail.record),y(D,r(D));const ue=oe(he.detail.record);ue.length>0&&ce(he.detail.record,ue[0])},delete:he=>{r(L)?.record?.id==he.detail.id&&y(L,{}),R.removeByKey(r(D),"id",he.detail.id),y(D,r(D))}},$$legacy:!0}),he=>y(S,he),()=>r(S)),p(n,_e),_t(e,"show",U),_t(e,"hide",W);var Se=Ve(me);return o(),Se}var tA=x('<div class="tinymce-wrapper"></div>'),nA=x("<!> <!>",1),iA=x("<!> <!>",1);function rA(n,e){Ue(e,!1);const t=P();let i=te(e,"field",8),a=te(e,"value",12,""),s=P(),o=P(),l=P(!1),c=null;un(async()=>(typeof a()>"u"&&a(""),c=setTimeout(()=>{y(l,!0)},100),()=>{clearTimeout(c)})),ie(()=>N(i()),()=>{y(t,Object.assign(R.defaultEditorOptions(),{convert_urls:i().convertURLs,relative_urls:!1}))}),ie(()=>N(a()),()=>{typeof a()>"u"&&a("")}),dt(),Be();var u=iA(),d=F(u);{let h=ne(()=>(N(i()),M(()=>i().required?"required":"")));De(d,{get class(){return`form-field form-field-editor ${r(h)??""}`},get name(){return N(i()),M(()=>i().name)},children:Ee,$$slots:{default:(v,_)=>{const b=ne(()=>_.uniqueId);var m=nA(),k=F(m);xi(k,{get uniqueId(){return r(b)},get field(){return i()}});var S=g(k,2);{var $=I=>{ld(I,{get id(){return r(b)},get conf(){return r(t)},get value(){return a()},set value(C){a(C)},$$events:{init:C=>{y(o,C.detail.editor),r(o).on("collections_file_picker",()=>{r(s)?.show()})}},$$legacy:!0})},D=I=>{var C=tA();p(I,C)};G(S,I=>{r(l)?I($):I(D,!1)})}p(v,m)}}})}var f=g(d,2);pt(eA(f,{title:"Select an image",fileTypes:["image"],$$events:{submit:h=>{r(o)?.execCommand("InsertImage",!1,Ae.files.getURL(h.detail.record,h.detail.name,{thumb:h.detail.size}))}},$$legacy:!0}),h=>y(s,h),()=>r(s)),p(n,u),Ve()}var aA=x('<!> <input type="email"/>',1);function sA(n,e){Ue(e,!1);let t=te(e,"field",8),i=te(e,"value",12,void 0);Be();{let a=ne(()=>(N(t()),M(()=>t().required?"required":"")));De(n,{get class(){return`form-field ${r(a)??""}`},get name(){return N(t()),M(()=>t().name)},children:Ee,$$slots:{default:(s,o)=>{const l=ne(()=>o.uniqueId);var c=aA(),u=F(c);xi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=g(u,2);V(()=>{H(d,"id",r(l)),d.required=(N(t()),M(()=>t().required))}),xt(d,i),p(s,c)}}})}Ve()}var oA=x("<img/>"),lA=x('<i class="ri-file-line"></i>');function cA(n,e){Ue(e,!1);const t=P();let i=te(e,"file",8),a=te(e,"size",8,50);function s(){R.hasImageExtension(i()?.name)?R.generateThumb(i(),a(),a()).then(d=>{y(t,d)}).catch(d=>{y(t,""),console.warn("Unable to generate thumb: ",d)}):y(t,"")}ie(()=>N(i()),()=>{typeof i()<"u"&&s()}),ie(()=>{},()=>{y(t,"")}),dt(),Be();var o=et(),l=F(o);{var c=d=>{var f=oA();H(f,"draggable",!1),V(()=>{H(f,"src",r(t)),H(f,"width",a()),H(f,"height",a()),H(f,"alt",(N(i()),M(()=>i().name)))}),p(d,f)},u=d=>{var f=lA();V(()=>H(f,"alt",(N(i()),M(()=>i().name)))),p(d,f)};G(l,d=>{r(t)?d(c):d(u,!1)})}p(n,o),Ve()}var uA=x('<button type="button" class="btn btn-sm btn-danger btn-transparent"><span class="txt">Restore</span></button>'),dA=x('<button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove" aria-label="Remove"><i class="ri-close-line"></i></button>'),fA=x('<div><div><!></div> <div class="content"><button type="button" title="Download"> </button></div> <div class="actions"><!></div></div>'),hA=x('<div><figure class="thumb"><!></figure> <div class="filename m-r-auto"><small class="label label-success m-r-5">New</small> <span class="txt"> </span></div> <button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove" aria-label="Remove"><i class="ri-close-line"></i></button></div>'),vA=x('<!> <div class="list"><!> <!> <div class="list-item list-item-btn"><input type="file" class="hidden"/> <button type="button" class="btn btn-transparent btn-sm btn-block"><i class="ri-upload-cloud-line"></i> <span class="txt">Upload new file</span></button></div></div>',1),pA=x('<div class="block"><!></div>');function mA(n,e){Ue(e,!1);const t=P(),i=P(),a=P();let s=te(e,"record",8),o=te(e,"field",8),l=te(e,"value",12,""),c=te(e,"uploadedFiles",28,()=>[]),u=te(e,"deletedFileNames",28,()=>[]),d=P(),f=P(),h=P(!1);function v(I){R.removeByValue(u(),I),u(u())}function _(I){R.pushUnique(u(),I),u(u())}function b(I){R.isEmpty(c()[I])||c().splice(I,1),c(c())}function m(){r(f)?.dispatchEvent(new CustomEvent("change",{detail:{value:l(),uploadedFiles:c(),deletedFileNames:u()},bubbles:!0}))}function k(I){I.preventDefault(),y(h,!1);const C=I.dataTransfer?.files||[];if(!(r(a)||!C.length)){for(const w of C){const E=r(i).length+c().length-u().length;if(o().maxSelect<=E)break;c().push(w)}c(c())}}async function S(I){try{let C=await Ae.getSuperuserFileToken(s().collectionId),w=Ae.files.getURL(s(),I,{token:C});window.open(w,"_blank","noreferrer, noopener")}catch(C){console.warn("openInNewTab file token failure:",C)}}ie(()=>(N(c()),R),()=>{Array.isArray(c())||c(R.toArray(c()))}),ie(()=>(N(u()),R),()=>{Array.isArray(u())||u(R.toArray(u()))}),ie(()=>N(o()),()=>{y(t,o().maxSelect>1)}),ie(()=>(N(l()),r(t)),()=>{R.isEmpty(l())&&l(r(t)?[]:"")}),ie(()=>N(l()),()=>{y(i,R.toArray(l()))}),ie(()=>(r(i),N(c()),N(o()),N(u())),()=>{y(a,(r(i).length||c().length)&&o().maxSelect<=r(i).length+c().length-u().length)}),ie(()=>(N(c()),N(u())),()=>{(c()!==-1||u()!==-1)&&m()}),dt(),Be();var $=pA(),D=T($);{let I=ne(()=>(N(o()),M(()=>o().required?"required":""))),C=ne(()=>r(h)?"dragover":"");De(D,{get class(){return`
            form-field form-field-list form-field-file
            ${r(I)??""}
            ${r(C)??""}
        `},get name(){return N(o()),M(()=>o().name)},children:Ee,$$slots:{default:(w,E)=>{const O=ne(()=>E.uniqueId);var A=vA(),q=F(A);xi(q,{get uniqueId(){return r(O)},get field(){return o()}});var L=g(q,2),j=T(L);bt(j,3,()=>r(i),z=>z+s().id,(z,X,oe)=>{const ce=ne(()=>(N(u()),r(X),M(()=>u().includes(r(X)))));{let le=ne(()=>(N(o()),M(()=>o().name+"_uploaded"))),me=ne(()=>!r(t));hs(z,{get group(){return r(le)},get index(){return r(oe)},get disabled(){return r(me)},get list(){return l()},set list(_e){l(_e)},children:Ee,$$slots:{default:(_e,pe)=>{const Te=ne(()=>pe.dragging),Se=ne(()=>pe.dragover);var he=fA();let ue;var ke=T(he);let we;var ae=T(ke);Nd(ae,{get record(){return s()},get filename(){return r(X)}});var xe=g(ke,2),se=T(xe);H(se,"draggable",!1);var ge=T(se),ee=g(xe,2),ve=T(ee);{var Ce=ze=>{var qe=uA();re("click",qe,()=>v(r(X))),p(ze,qe)},Ie=ze=>{var qe=dA();Ge(qe,(je,rt)=>ht?.(je,rt),()=>"Remove file"),Nt(()=>re("click",qe,()=>_(r(X)))),p(ze,qe)};G(ve,ze=>{r(ce)?ze(Ce):ze(Ie,!1)})}V(()=>{ue=Re(he,1,"list-item",null,ue,{dragging:r(Te),dragover:r(Se)}),we=Re(ke,1,"",null,we,{fade:r(ce)}),Re(se,1,`txt-ellipsis ${r(ce)?"txt-strikethrough link-hint":"link-primary"}`),$e(ge,r(X))}),re("auxclick",se,()=>S(r(X))),re("click",se,()=>S(r(X))),p(_e,he)}},$$legacy:!0})}});var U=g(j,2);bt(U,3,c,(z,X)=>z.name+X,(z,X,oe)=>{{let ce=ne(()=>(N(o()),M(()=>o().name+"_new"))),le=ne(()=>!r(t));hs(z,{get group(){return r(ce)},get index(){return r(oe)},get disabled(){return r(le)},get list(){return c()},set list(me){c(me)},children:Ee,$$slots:{default:(me,_e)=>{const pe=ne(()=>_e.dragging),Te=ne(()=>_e.dragover);var Se=hA();let he;var ue=T(Se),ke=T(ue);cA(ke,{get file(){return r(X)}});var we=g(ue,2),ae=g(T(we),2),xe=T(ae),se=g(we,2);Ge(se,(ge,ee)=>ht?.(ge,ee),()=>"Remove file"),Nt(()=>re("click",se,()=>b(r(oe)))),V(()=>{he=Re(Se,1,"list-item",null,he,{dragging:r(pe),dragover:r(Te)}),H(we,"title",(r(X),M(()=>r(X).name))),$e(xe,(r(X),M(()=>r(X).name)))}),p(me,Se)}},$$legacy:!0})}});var W=g(U,2),Y=T(W);pt(Y,z=>y(d,z),()=>r(d));var J=g(Y,2);pt(L,z=>y(f,z),()=>r(f)),V(z=>{H(Y,"accept",z),Y.multiple=r(t),J.disabled=r(a)},[()=>(N(o()),M(()=>o().mimeTypes?.join(",")||null))]),re("change",Y,()=>{for(let z of r(d).files)c().push(z);c(c()),ft(d,r(d).value=null)}),re("click",J,()=>r(d)?.click()),p(w,A)}}})}re("dragover",$,Ct(()=>{y(h,!0)})),re("dragleave",$,()=>{y(h,!1)}),re("drop",$,k),p(n,$),Ve()}var gA=x('<i class="ri-checkbox-circle-fill txt-success"></i>'),bA=x('<i class="ri-error-warning-fill txt-danger"></i>'),yA=x('<span class="json-state svelte-nmcohl"><!></span>'),_A=x('<input type="text" class="txt-mono" value="Loading..." disabled/>'),xA=x("<!> <!>",1);function wA(n,e){Ue(e,!1);const t=P();let i=te(e,"field",8),a=te(e,"value",12,void 0),s=P(),o=P(l(a()));function l(u){return typeof u=="string"&&c(u)?u:JSON.stringify(typeof u>"u"?null:u,null,2)}function c(u){try{return JSON.parse(u===""?null:u),!0}catch{}return!1}un(async()=>{try{y(s,(await Ut(async()=>{const{default:u}=await import("./CodeEditor-Dnzy5TIO.js");return{default:u}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(u){console.warn(u)}}),ie(()=>(N(a()),r(o)),()=>{a()!==r(o)?.trim()&&(y(o,l(a())),a(r(o)))}),ie(()=>r(o),()=>{y(t,c(r(o)))}),dt(),Be();{let u=ne(()=>(N(i()),M(()=>i().required?"required":"")));De(n,{get class(){return`form-field ${r(u)??""}`},get name(){return N(i()),M(()=>i().name)},children:Ee,$$slots:{default:(d,f)=>{const h=ne(()=>f.uniqueId);var v=xA(),_=F(v);xi(_,{get uniqueId(){return r(h)},get field(){return i()},children:(S,$)=>{var D=yA(),I=T(D);{var C=E=>{var O=gA();p(E,O)},w=E=>{var O=bA();p(E,O)};G(I,E=>{r(t)?E(C):E(w,!1)})}Ge(D,(E,O)=>ht?.(E,O),()=>({position:"left",text:r(t)?"Valid JSON":"Invalid JSON"})),p(S,D)},$$slots:{default:!0}});var b=g(_,2);{var m=S=>{var $=et(),D=F($);yi(D,()=>r(s),(I,C)=>{C(I,{get id(){return r(h)},maxHeight:"500",language:"json",get value(){return r(o)},$$events:{change:w=>{y(o,w.detail),a(r(o).trim())}}})}),p(S,$)},k=S=>{var $=_A();p(S,$)};G(b,S=>{r(s)?S(m):S(k,!1)})}p(d,v)}}})}Ve()}var kA=x('<!> <input type="number" step="any"/>',1);function SA(n,e){Ue(e,!1);let t=te(e,"field",8),i=te(e,"value",12,void 0);Be();{let a=ne(()=>(N(t()),M(()=>t().required?"required":"")));De(n,{get class(){return`form-field ${r(a)??""}`},get name(){return N(t()),M(()=>t().name)},children:Ee,$$slots:{default:(s,o)=>{const l=ne(()=>o.uniqueId);var c=kA(),u=F(c);xi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=g(u,2);V(()=>{H(d,"id",r(l)),d.required=(N(t()),M(()=>t().required)),H(d,"min",(N(t()),M(()=>t().min))),H(d,"max",(N(t()),M(()=>t().max)))}),xt(d,i),p(s,c)}}})}Ve()}var TA=x('<!> <input type="password" autocomplete="new-password"/>',1);function $A(n,e){Ue(e,!1);let t=te(e,"field",8),i=te(e,"value",12,void 0);Be();{let a=ne(()=>(N(t()),M(()=>t().required?"required":"")));De(n,{get class(){return`form-field ${r(a)??""}`},get name(){return N(t()),M(()=>t().name)},children:Ee,$$slots:{default:(s,o)=>{const l=ne(()=>o.uniqueId);var c=TA(),u=F(c);xi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=g(u,2);V(()=>{H(d,"id",r(l)),d.required=(N(t()),M(()=>t().required))}),xt(d,i),p(s,c)}}})}Ve()}function $v(n){return typeof n=="function"?{threshold:100,callback:n}:n||{}}function IA(n,e){e=$v(e),e?.callback&&e.callback();function t(i){if(!e?.callback)return;i.target.scrollHeight-i.target.clientHeight-i.target.scrollTop<=e.threshold&&e.callback()}return n.addEventListener("scroll",t),n.addEventListener("resize",t),{update(i){e=$v(i)},destroy(){n.removeEventListener("scroll",t),n.removeEventListener("resize",t)}}}var CA=x("<option> </option>"),EA=x('<div class="form-field"><label>Collection</label> <select class="input"></select></div>'),OA=x('<button type="button" class="btn btn-pill btn-transparent btn-hint p-l-xs p-r-xs"><div class="txt">New record</div></button>'),DA=x('<i class="ri-checkbox-circle-fill txt-success"></i>'),PA=x('<i class="ri-checkbox-blank-circle-line txt-disabled"></i>'),MA=x('<span class="loader loader-xs active"></span>'),AA=x('<div class="actions nonintrusive"><button type="button" class="btn btn-sm btn-circle btn-transparent btn-hint m-l-auto" aria-label="Remove"><i class="ri-pencil-line"></i></button></div>'),LA=x('<div tabindex="0"><!> <div class="content"><!></div> <!></div>'),NA=x('<button type="button" class="btn btn-hint btn-sm"><span class="txt">Clear filters</span></button>'),RA=x('<div class="list-item"><span class="txt txt-hint">No records found.</span> <!></div>'),FA=x('<div class="list-item"><div class="block txt-center"><span class="loader loader-sm active"></span></div></div>'),qA=x('<span class="loader loader-xs active"></span>'),zA=x('<span><!> <button type="button" title="Remove" class="btn btn-circle btn-transparent btn-hint btn-xs"><i class="ri-close-line"></i></button></span>'),jA=x('<div class="selected-list svelte-pzpxt1"></div>'),UA=x('<p class="txt-hint">No selected records.</p>'),VA=x('<div class="flex m-b-base flex-gap-10"><!> <!> <!></div> <div class="list picker-list m-b-base svelte-pzpxt1"><!> <!></div> <h5 class="section-title">Selected <!></h5> <!>',1),BA=x("<h4>Select <strong> </strong> records</h4>"),HA=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button" class="btn"><span class="txt">Set selection</span></button>',1),WA=x("<!> <!>",1);function YA(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["show","hide","value","field"]);Ue(e,!1);const a=()=>It(Gn,"$collections",s),[s,o]=At(),l=P(),c=P(),u=P(),d=P(),f=P(),h=P(),v=P(),_=P(),b=P(),m=P(),k=qt(),S="picker_"+R.randomString(5),$=50;let D=te(e,"value",8),I=te(e,"field",8),C=P(),w=P(),E=P(""),O=P([]),A=P([]),q=P(1),L=P(0),j=P(!1),U=P(!1),W=P({}),Y=P();function J(){return y(E,""),y(O,[]),y(A,[]),r(u)&&!r(Y)&&r(d)?.length&&y(Y,r(d)[0].id),oe(),ce(!0),r(C)?.show()}function z(){return r(C)?.hide()}function X(){let ae=[];const xe=r(f)?.fields?.filter(se=>!se.hidden&&se.presentable&&se.type=="relation");for(const se of xe)ae=ae.concat(R.getExpandPresentableRelFields(se,a(),2));return ae.join(",")}async function oe(){const ae=R.toArray(D());if(!ae.length)return;y(U,!0);let xe=[];if(r(u)){const se={};for(const ee of ae){const ve=""+ee,Ce=ve.indexOf(":");if(Ce>0&&Ce<ve.length-1){const Ie=ve.slice(0,Ce),ze=ve.slice(Ce+1);se[Ie]=se[Ie]||[],se[Ie].push(ze)}}const ge=[];for(const ee in se){const ve=se[ee].slice();for(;ve.length>0;){const Ce=[];for(const Ie of ve.splice(0,$))Ce.push(`id="${Ie}"`);ge.push(Ae.collection(ee).getFullList({batch:$,filter:Ce.join("||"),fields:"*:excerpt(200)",expand:X(),requestKey:null}))}}try{await Promise.all(ge).then(ee=>{xe=xe.concat(...ee)});for(const ee of xe)ee.collectionId||(ee.collectionId=r(f)?.id||r(Y));y(A,[]);for(const ee of ae){const ve=(""+ee).indexOf(":"),Ce=ve>0?(""+ee).slice(ve+1):""+ee,Ie=R.findByKey(xe,"id",Ce);Ie&&r(A).push(Ie)}r(E).trim()||y(O,R.filterDuplicatesByKey(r(A).concat(r(O)))),y(U,!1)}catch(ee){ee.isAbort||(Ae.error(ee),y(U,!1))}}else{if(!r(c)){y(U,!1);return}const se=ae.slice(),ge=[];for(;se.length>0;){const ee=[];for(const ve of se.splice(0,$))ee.push(`id="${ve}"`);ge.push(Ae.collection(r(c)).getFullList({batch:$,filter:ee.join("||"),fields:"*:excerpt(200)",expand:X(),requestKey:null}))}try{await Promise.all(ge).then(ee=>{xe=xe.concat(...ee)}),y(A,[]);for(const ee of ae){const ve=R.findByKey(xe,"id",ee);ve&&r(A).push(ve)}r(E).trim()||y(O,R.filterDuplicatesByKey(r(A).concat(r(O)))),y(U,!1)}catch(ee){ee.isAbort||(Ae.error(ee),y(U,!1))}}}async function ce(ae=!1){if(!(!r(Y)&&!r(c))&&!(r(j)&&!ae)){y(j,!0),ae&&(r(E).trim()?y(O,[]):y(O,R.toArray(r(A)).slice()));try{const xe=ae?1:r(q)+1,se=R.getAllCollectionIdentifiers(r(f));let ge="";r(h)||(ge="-@rowid");const ee=r(Y)||r(c),ve=await Ae.collection(ee).getList(xe,$,{filter:R.normalizeSearchFilter(r(E),se),sort:ge,fields:R.getExcerptCollectionFieldsList(r(f)),skipTotal:1,expand:X(),requestKey:S+"loadList"});y(O,R.filterDuplicatesByKey(r(O).concat(ve.items))),y(q,ve.page),y(L,ve.items.length),y(j,!1)}catch(xe){xe.isAbort||(Ae.error(xe),y(j,!1))}}}async function le(ae){if(ae?.id){ft(W,r(W)[ae.id]=!0);try{const xe=r(Y)||r(c),se=await Ae.collection(xe).getOne(ae.id,{fields:"*:excerpt(200)",expand:X(),requestKey:S+"reload"+ae.id});R.pushOrReplaceByKey(r(A),se),R.pushOrReplaceByKey(r(O),se),y(A,r(A)),y(O,r(O)),ft(W,r(W)[ae.id]=!1)}catch(xe){xe.isAbort||(Ae.error(xe),ft(W,r(W)[ae.id]=!1))}}}function me(ae){r(l)==1?y(A,[ae]):r(b)&&(R.pushOrReplaceByKey(r(A),ae),y(A,r(A)))}function _e(ae){R.removeByKey(r(A),"id",ae.id),y(A,r(A))}function pe(ae){r(m)(ae)?_e(ae):me(ae)}function Te(){k("save",r(A)),z()}ie(()=>N(I()),()=>{y(l,I()?.maxSelect||1)}),ie(()=>N(I()),()=>{y(c,I()?.collectionId)}),ie(()=>N(I()),()=>{y(u,Array.isArray(I()?.collectionIds)&&I().collectionIds.length>0)}),ie(()=>(r(u),a(),N(I()),r(c)),()=>{y(d,r(u)?a().filter(ae=>I().collectionIds.includes(ae.id)):a().filter(ae=>ae.id==r(c)))}),ie(()=>(r(u),r(Y),r(d),r(c)),()=>{r(u)?!r(Y)&&r(d)?.length&&y(Y,r(d)[0].id):r(Y)!==r(c)&&y(Y,r(c))}),ie(()=>(a(),r(Y)),()=>{y(f,a().find(ae=>ae.id==r(Y))||null)}),ie(()=>(r(E),r(C)),()=>{typeof r(E)<"u"&&r(C)?.isActive()&&ce(!0)}),ie(()=>r(f),()=>{y(h,r(f)?.type==="view")}),ie(()=>(r(j),r(U)),()=>{y(v,r(j)||r(U))}),ie(()=>r(L),()=>{y(_,r(L)==$)}),ie(()=>(r(l),r(A)),()=>{y(b,r(l)>r(A).length)}),ie(()=>r(A),()=>{y(m,function(ae){return R.findByKey(r(A),"id",ae.id)})}),dt();var Se={show:J,hide:z};Be();var he=WA(),ue=F(he);pt(pn(ue,tn({popup:!0,class:"overlay-panel-xl"},()=>i,{$$events:{hide(ae){lt.call(this,e,ae)},show(ae){lt.call(this,e,ae)}},children:(ae,xe)=>{var se=VA(),ge=F(se),ee=T(ge);{var ve=Fe=>{var Me=EA(),Ne=T(Me),Ze=g(Ne,2);V(()=>{r(Y),ma(()=>{r(O),r(q),r(d)})}),bt(Ze,5,()=>r(d),Mt,(Xe,vt)=>{var tt=CA(),We=T(tt),Qe={};V(()=>{$e(We,(r(vt),M(()=>r(vt).name))),Qe!==(Qe=(r(vt),M(()=>r(vt).id)))&&(tt.value=(tt.__value=(r(vt),M(()=>r(vt).id)))??"")}),p(Xe,tt)}),V(()=>{H(Ne,"for",S+"_collection"),H(Ze,"id",S+"_collection")}),Ey(Ze,()=>r(Y),Xe=>y(Y,Xe)),re("change",Ze,()=>{y(O,[]),y(q,1),ce(!0)}),p(Fe,Me)};G(ee,Fe=>{r(u)&&Fe(ve)})}var Ce=g(ee,2);Jl(Ce,{get value(){return r(E)},get autocompleteCollection(){return r(f)},$$events:{submit:Fe=>y(E,Fe.detail)}});var Ie=g(Ce,2);{var ze=Fe=>{var Me=OA();re("click",Me,()=>r(w)?.show()),p(Fe,Me)};G(Ie,Fe=>{r(h)||Fe(ze)})}var qe=g(ge,2),je=T(qe);bt(je,1,()=>r(O),Fe=>Fe.id,(Fe,Me,Ne,Ze)=>{const Xe=ne(()=>(r(m),r(Me),M(()=>r(m)(r(Me)))));var vt=LA();let tt;var We=T(vt);{var Qe=ye=>{var Ye=DA();p(ye,Ye)},mt=ye=>{var Ye=PA();p(ye,Ye)};G(We,ye=>{r(Xe)?ye(Qe):ye(mt,!1)})}var gt=g(We,2),nt=T(gt);{var Oe=ye=>{var Ye=MA();p(ye,Ye)},B=ye=>{Dl(ye,{get record(){return r(Me)}})};G(nt,ye=>{r(W),r(Me),M(()=>r(W)[r(Me).id])?ye(Oe):ye(B,!1)})}var Z=g(gt,2);{var de=ye=>{var Ye=AA(),ot=T(Ye);Ge(ot,(Tt,at)=>ht?.(Tt,at),()=>"Edit"),Nt(()=>re("keydown",ot,fn(function(Tt){lt.call(this,e,Tt)}))),Nt(()=>re("click",ot,fn(()=>r(w)?.show(r(Me).id)))),p(ye,Ye)};G(Z,ye=>{r(h)||ye(de)})}V(()=>tt=Re(vt,1,"list-item handle",null,tt,{selected:r(Xe),disabled:r(W)[r(Me).id]||!r(Xe)&&r(l)>1&&!r(b)})),re("click",vt,()=>pe(r(Me))),re("keydown",vt,ye=>{(ye.code==="Enter"||ye.code==="Space")&&(ye.preventDefault(),ye.stopPropagation(),pe(r(Me)))}),p(Fe,vt)},Fe=>{var Me=et(),Ne=F(Me);{var Ze=Xe=>{var vt=RA(),tt=g(T(vt),2);{var We=Qe=>{var mt=NA();re("click",mt,()=>y(E,"")),p(Qe,mt)};G(tt,Qe=>{r(E),M(()=>r(E)?.length)&&Qe(We)})}p(Xe,vt)};G(Ne,Xe=>{r(v)||Xe(Ze)})}p(Fe,Me)});var rt=g(je,2);{var be=Fe=>{var Me=FA();p(Fe,Me)};G(rt,Fe=>{r(v)&&Fe(be)})}Ge(qe,(Fe,Me)=>IA?.(Fe,Me),()=>()=>{r(_)&&!r(j)&&ce()});var Le=g(qe,2),Ke=g(T(Le));{var st=Fe=>{var Me=Oa();V(()=>$e(Me,`(${r(A),M(()=>r(A).length)??""} of MAX ${r(l)??""})`)),p(Fe,Me)};G(Ke,Fe=>{r(l)>1&&Fe(st)})}var it=g(Le,2);{var He=Fe=>{var Me=jA();bt(Me,5,()=>r(A),Mt,(Ne,Ze,Xe)=>{hs(Ne,{index:Xe,get list(){return r(A)},set list(vt){y(A,vt)},children:Ee,$$slots:{default:(vt,tt)=>{const We=ne(()=>tt.dragging),Qe=ne(()=>tt.dragover);var mt=zA();let gt;var nt=T(mt);{var Oe=de=>{var ye=qA();p(de,ye)},B=de=>{Dl(de,{get record(){return r(Ze)}})};G(nt,de=>{r(W),r(Ze),M(()=>r(W)[r(Ze).id])?de(Oe):de(B,!1)})}var Z=g(nt,2);V(()=>gt=Re(mt,1,"label",null,gt,{"label-danger":r(We),"label-warning":r(Qe)})),re("click",Z,()=>_e(r(Ze))),p(vt,mt)}},$$legacy:!0})}),p(Fe,Me)},Je=Fe=>{var Me=UA();p(Fe,Me)};G(it,Fe=>{r(A),M(()=>r(A).length)?Fe(He):Fe(Je,!1)})}p(ae,se)},$$slots:{default:!0,header:(ae,xe)=>{var se=BA(),ge=g(T(se)),ee=T(ge);V(()=>$e(ee,(r(f),M(()=>r(f)?.name||"")))),p(ae,se)},footer:(ae,xe)=>{var se=HA(),ge=F(se),ee=g(ge,2);re("click",ge,()=>z()),re("click",ee,()=>Te()),p(ae,se)}},$$legacy:!0})),ae=>y(C,ae),()=>r(C));var ke=g(ue,2);pt(Rd(ke,{get collection(){return r(f)},$$events:{save:ae=>{R.removeByKey(r(O),"id",ae.detail.record.id),r(O).unshift(ae.detail.record),y(O,r(O)),me(ae.detail.record),le(ae.detail.record)},delete:ae=>{R.removeByKey(r(O),"id",ae.detail.id),y(O,r(O)),_e(ae.detail)}},$$legacy:!0}),ae=>y(w,ae),()=>r(w)),p(n,he),_t(e,"show",J),_t(e,"hide",z);var we=Ve(Se);return o(),we}var KA=x('<i class="ri-error-warning-line link-hint m-l-auto flex-order-10"></i>'),JA=x('<div><div class="content"><!></div> <div class="actions"><button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove" aria-label="Remove"><i class="ri-close-line"></i></button></div></div>'),ZA=x('<div class="list-item"><div class="skeleton-loader"></div></div>'),GA=x('<!> <div class="list"><div class="relations-list svelte-1j19dhz"></div> <div class="list-item list-item-btn"><button type="button" class="btn btn-transparent btn-sm btn-block"><i class="ri-magic-line"></i> <span class="txt">Open picker</span></button></div></div>',1),XA=x("<!> <!>",1);function QA(n,e){Ue(e,!1);const t=()=>It(Gn,"$collections",i),[i,a]=At(),s=P(),o=P(),l=100;let c=te(e,"field",8),u=te(e,"value",12),d=te(e,"picker",12),f=P(),h=P([]),v=P(!1),_=P(),b=P([]);function m(){if(r(v))return!1;const w=R.toArray(u());return y(h,r(h).filter(E=>{const O=E.id,A=E?.collectionId?`${E.collectionId}:${E.id}`:null;return w.includes(O)||A&&w.includes(A)})),w.length!=r(h).length}async function k(){const w=R.toArray(u());if(y(h,[]),y(b,[]),!c()?.collectionId&&!r(o)||!w.length){y(v,!1);return}y(v,!0);function E(L){let j=[];const U=t().find(W=>W.id==L)?.fields?.filter(W=>!W.hidden&&W.presentable&&W.type=="relation");for(const W of U||[])j=j.concat(R.getExpandPresentableRelFields(W,t(),2));return j.join(",")}const O={},A=[];for(const L of w){const j=(""+L).indexOf(":");if(j>0&&j<(""+L).length-1){const U=(""+L).slice(0,j),W=(""+L).slice(j+1);O[U]=O[U]||[],O[U].push(W)}else A.push(L)}A.length&&c().collectionId&&(O[c().collectionId]=(O[c().collectionId]||[]).concat(A));const q=[];for(const L in O){const j=O[L].slice();for(;j.length>0;){const U=[];for(const W of j.splice(0,l))U.push(`id="${W}"`);q.push(Ae.collection(L).getFullList(l,{filter:U.join("||"),fields:"*:excerpt(200)",expand:E(L),requestKey:null}))}}try{let L=[];await Promise.all(q).then(j=>{L=L.concat(...j)});for(const j of w){const U=(""+j).indexOf(":"),W=U>0?(""+j).slice(U+1):""+j,Y=R.findByKey(L,"id",W);Y?r(h).push(Y):r(b).push(j)}y(h,r(h)),$()}catch(L){Ae.error(L)}y(v,!1)}function S(w){R.removeByKey(r(h),"id",w.id),y(h,r(h)),$()}function $(){const w=r(o)||r(h).some(E=>!!E?.collectionId&&(!c()?.collectionId||E.collectionId!==c().collectionId));if(r(s))u(r(h).map(E=>w?`${E.collectionId}:${E.id}`:E.id));else{const E=r(h)[0];u(E?w?`${E.collectionId}:${E.id}`:E.id:"")}}yo(()=>{clearTimeout(r(_))}),ie(()=>N(c()),()=>{y(s,c().maxSelect>1)}),ie(()=>N(c()),()=>{y(o,Array.isArray(c().collectionIds)&&c().collectionIds.length>0)}),ie(()=>(N(u()),r(f)),()=>{typeof u()<"u"&&r(f)?.changed()}),ie(()=>(r(h),N(u()),r(_)),()=>{m(r(h),u())&&(y(v,!0),clearTimeout(r(_)),y(_,setTimeout(k,0)))}),dt(),Be();var D=XA(),I=F(D);{let w=ne(()=>(N(c()),M(()=>c().required?"required":"")));pt(De(I,{get class(){return`form-field form-field-list ${r(w)??""}`},get name(){return N(c()),M(()=>c().name)},children:Ee,$$slots:{default:(E,O)=>{const A=ne(()=>O.uniqueId);var q=GA(),L=F(q);xi(L,{get uniqueId(){return r(A)},get field(){return c()},children:(J,z)=>{var X=et(),oe=F(X);{var ce=le=>{var me=KA();Ge(me,(_e,pe)=>ht?.(_e,pe),()=>({position:"left",text:"The following relation ids were removed from the list because they are missing or invalid: "+r(b).join(", ")})),p(le,me)};G(oe,le=>{r(b),M(()=>r(b).length)&&le(ce)})}p(J,X)},$$slots:{default:!0}});var j=g(L,2),U=T(j);bt(U,7,()=>r(h),J=>J.id,(J,z,X)=>{{let oe=ne(()=>(N(c()),M(()=>c().name+"_relation"))),ce=ne(()=>!r(s));hs(J,{get group(){return r(oe)},get index(){return r(X)},get disabled(){return r(ce)},get list(){return r(h)},set list(le){y(h,le)},$$events:{sort:()=>{$()}},children:Ee,$$slots:{default:(le,me)=>{const _e=ne(()=>me.dragging),pe=ne(()=>me.dragover);var Te=JA();let Se;var he=T(Te),ue=T(he);Dl(ue,{get record(){return r(z)}});var ke=g(he,2),we=T(ke);Ge(we,(ae,xe)=>ht?.(ae,xe),()=>"Remove"),Nt(()=>re("click",we,()=>S(r(z)))),V(()=>Se=Re(Te,1,"list-item",null,Se,{dragging:r(_e),dragover:r(pe)})),p(le,Te)}},$$legacy:!0})}},J=>{var z=et(),X=F(z);{var oe=ce=>{var le=et(),me=F(le);bt(me,1,()=>(N(R),N(u()),M(()=>R.toArray(u()).slice(0,10))),Mt,(_e,pe)=>{var Te=ZA();p(_e,Te)}),p(ce,le)};G(X,ce=>{r(v)&&ce(oe)})}p(J,z)});var W=g(U,2),Y=T(W);re("click",Y,()=>d()?.show()),p(E,q)}},$$legacy:!0}),E=>y(f,E),()=>r(f))}var C=g(I,2);pt(YA(C,{get value(){return u()},get field(){return c()},$$events:{save:w=>{y(h,w.detail||[]),$()}},$$legacy:!0}),w=>d(w),()=>d()),p(n,D),Ve(),a()}var eL=x('<div class="help-block"> </div>'),tL=x("<!> <!> <!>",1);function nL(n,e){Ue(e,!1);const t=P(),i=P();let a=te(e,"field",8),s=te(e,"value",12,void 0);ie(()=>N(a()),()=>{y(t,a().maxSelect>1)}),ie(()=>(N(s()),r(t)),()=>{typeof s()>"u"&&s(r(t)?[]:"")}),ie(()=>N(a()),()=>{y(i,a().maxSelect||a().values.length)}),ie(()=>(r(t),N(s()),N(a()),r(i)),()=>{r(t)&&Array.isArray(s())&&(s(s().filter(o=>a().values.includes(o))),s().length>r(i)&&s(s().slice(s().length-r(i))))}),dt(),Be();{let o=ne(()=>(N(a()),M(()=>a().required?"required":"")));De(n,{get class(){return`form-field ${r(o)??""}`},get name(){return N(a()),M(()=>a().name)},children:Ee,$$slots:{default:(l,c)=>{const u=ne(()=>c.uniqueId);var d=tL(),f=F(d);xi(f,{get uniqueId(){return r(u)},get field(){return a()}});var h=g(f,2);{let b=ne(()=>(N(a()),r(t),M(()=>!a().required||r(t)))),m=ne(()=>(r(t),N(s()),N(a()),M(()=>!r(t)||s()?.length>=a().maxSelect))),k=ne(()=>(N(a()),M(()=>a().values?.length>5)));Za(h,{get id(){return r(u)},get toggle(){return r(b)},get multiple(){return r(t)},get closable(){return r(m)},get items(){return N(a()),M(()=>a().values)},get searchable(){return r(k)},get selected(){return s()},set selected(S){s(S)},$$legacy:!0})}var v=g(h,2);{var _=b=>{var m=eL(),k=T(m);V(()=>$e(k,`Select up to ${r(i)??""} items.`)),p(b,m)};G(v,b=>{r(t)&&b(_)})}p(l,d)}}})}Ve()}var iL=x("<textarea></textarea>");function rL(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","maxHeight"]);Ue(e,!1);let a=te(e,"value",12,""),s=te(e,"maxHeight",8,200),o=P(),l;function c(){clearTimeout(l),l=setTimeout(()=>{r(o)&&(ft(o,r(o).style.height=""),ft(o,r(o).style.height=Math.min(r(o).scrollHeight,s())+"px"))},0)}function u(f){if(f?.code==="Enter"&&!f?.shiftKey&&!f?.isComposing){f.preventDefault();const h=r(o).closest("form");h?.requestSubmit&&h.requestSubmit()}}un(()=>(c(),()=>clearTimeout(l))),ie(()=>N(a()),()=>{typeof a()!==void 0&&c()}),dt(),Be();var d=iL();ss(d,()=>({...i}),void 0,void 0,void 0,"svelte-1jv9ixr"),pt(d,f=>y(o,f),()=>r(o)),xt(d,a),re("keydown",d,u),p(n,d),Ve()}var aL=x("<!> <!>",1);function sL(n,e){Ue(e,!1);const t=P(),i=P();let a=te(e,"original",8),s=te(e,"field",8),o=te(e,"value",12,void 0);ie(()=>(N(s()),N(a())),()=>{y(t,!R.isEmpty(s().autogeneratePattern)&&!a()?.id)}),ie(()=>(N(s()),r(t)),()=>{y(i,s().required&&!r(t))}),dt(),Be();{let l=ne(()=>r(i)?"required":"");De(n,{get class(){return`form-field ${r(l)??""}`},get name(){return N(s()),M(()=>s().name)},children:Ee,$$slots:{default:(c,u)=>{const d=ne(()=>u.uniqueId);var f=aL(),h=F(f);xi(h,{get uniqueId(){return r(d)},get field(){return s()}});var v=g(h,2);{let _=ne(()=>r(t)?"Leave empty to autogenerate...":"");rL(v,{get id(){return r(d)},get required(){return r(i)},get placeholder(){return r(_)},get value(){return o()},set value(b){o(b)},$$legacy:!0})}p(c,f)}}})}Ve()}var oL=x('<!> <input type="url"/>',1);function lL(n,e){Ue(e,!1);let t=te(e,"field",8),i=te(e,"value",12,void 0);Be();{let a=ne(()=>(N(t()),M(()=>t().required?"required":"")));De(n,{get class(){return`form-field ${r(a)??""}`},get name(){return N(t()),M(()=>t().name)},children:Ee,$$slots:{default:(s,o)=>{const l=ne(()=>o.uniqueId);var c=oL(),u=F(c);xi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=g(u,2);V(()=>{H(d,"id",r(l)),d.required=(N(t()),M(()=>t().required))}),xt(d,i),p(s,c)}}})}Ve()}var cL=x('<label>Longitude:</label> <input type="number" placeholder="0" step="any" min="-180" max="180"/>',1),uL=x('<label>Latitude:</label> <input type="number" placeholder="0" step="any" min="-90" max="90"/>',1),dL=x('<div class="block txt-center p-base"><span class="loader loader-sm"></span></div>'),fL=x('<div class="block" style="height:200px"><!></div>'),hL=x('<!> <div class="list"><div class="list-item svelte-mcf0v6"><!> <span class="separator svelte-mcf0v6"></span> <!> <span class="separator svelte-mcf0v6"></span> <button type="button" aria-label="Toggle map"><i class="ri-map-2-line"></i></button></div> <!></div>',1);function vL(n,e){Ue(e,!1);let t=te(e,"field",8),i=te(e,"value",12,void 0),a=P(),s=P(!1),o=P(!1);function l(){i().lat>90&&i(i().lat=90,!0),i().lat<-90&&i(i().lat=-90,!0),i().lon>180&&i(i().lon=180,!0),i().lon<-180&&i(i().lon=-180,!0)}function c(){r(o)?d():u()}function u(){f(),y(o,!0)}function d(){y(o,!1)}async function f(){r(a)||r(s)||(y(s,!0),y(a,(await Ut(async()=>{const{default:h}=await import("./Leaflet-DFtAmbtI.js");return{default:h}},__vite__mapDeps([14,15]),import.meta.url)).default),y(s,!1))}ie(()=>N(i()),()=>{typeof i()>"u"&&i({lat:0,lon:0})}),ie(()=>N(i()),()=>{i()&&l()}),dt(),Be();{let h=ne(()=>(N(t()),M(()=>t().required?"required":"")));De(n,{get class(){return`form-field form-field-list ${r(h)??""}`},get name(){return N(t()),M(()=>t().name)},children:Ee,$$slots:{default:(v,_)=>{const b=ne(()=>_.uniqueId);var m=hL(),k=F(m);xi(k,{get uniqueId(){return r(b)},get field(){return t()}});var S=g(k,2),$=T(S),D=T($);De(D,{class:"form-field form-field-inline m-0",children:Ee,$$slots:{default:(O,A)=>{const q=ne(()=>A.uniqueId);var L=cL(),j=F(L),U=g(j,2);V(()=>{H(j,"for",r(q)),H(U,"id",r(q)),U.required=(N(t()),M(()=>t().required))}),xt(U,()=>i().lon,W=>i(i().lon=W,!0)),p(O,L)}}});var I=g(D,4);De(I,{class:"form-field form-field-inline m-0",children:Ee,$$slots:{default:(O,A)=>{const q=ne(()=>A.uniqueId);var L=uL(),j=F(L),U=g(j,2);V(()=>{H(j,"for",r(q)),H(U,"id",r(q)),U.required=(N(t()),M(()=>t().required))}),xt(U,()=>i().lat,W=>i(i().lat=W,!0)),p(O,L)}}});var C=g(I,4);Ge(C,(O,A)=>ht?.(O,A),()=>"Toggle map"),Nt(()=>re("click",C,c));var w=g($,2);{var E=O=>{var A=fL(),q=T(A);{var L=U=>{var W=dL();p(U,W)},j=U=>{var W=et(),Y=F(W);yi(Y,()=>r(a),(J,z)=>{z(J,{height:200,get point(){return i()},set point(X){i(X)},$$legacy:!0})}),p(U,W)};G(q,U=>{r(s)?U(L):U(j,!1)})}Et(3,A,()=>vn,()=>({duration:150})),p(O,A)};G(w,O=>{r(o)&&O(E)})}V(()=>Re(C,1,`btn btn-circle btn-sm btn-circle ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),p(v,m)}}})}Ve()}var pL=x('<button><div class="txt"> </div></button>'),mL=x('<div><!> <div class="txt-right"><em class="txt-sm txt-hint"><a target="_blank" rel="noopener noreferrer"> </a></em></div></div>'),gL=x('<div><div class="tabs-header compact combined left svelte-tipgli"></div> <div class="tabs-content"></div></div>');function bL(n,e){Ue(e,!1);const t=P(),i="pb_sdk_preference";let a=te(e,"class",8,"m-b-sm"),s=te(e,"js",8,""),o=te(e,"dart",8,""),l=P(localStorage.getItem(i)||"javascript");ie(()=>r(l),()=>{r(l)&&localStorage.setItem(i,r(l))}),ie(()=>(N(s()),N(o())),()=>{y(t,[{title:"JavaScript",language:"javascript",content:s(),url:"https://github.com/pocketbase/js-sdk"},{title:"Dart",language:"dart",content:o(),url:"https://github.com/pocketbase/dart-sdk"}])}),dt(),Be();var c=gL(),u=T(c);bt(u,5,()=>r(t),f=>f.language,(f,h)=>{var v=pL();let _;var b=T(v),m=T(b);V(()=>{_=Re(v,1,"tab-item svelte-tipgli",null,_,{active:r(l)===r(h).language}),$e(m,(r(h),M(()=>r(h).title)))}),re("click",v,()=>y(l,r(h).language)),p(f,v)});var d=g(u,2);bt(d,5,()=>r(t),f=>f.language,(f,h)=>{var v=mL();let _;var b=T(v);Lu(b,{get language(){return r(h),M(()=>r(h).language)},get content(){return r(h),M(()=>r(h).content)}});var m=g(b,2),k=T(m),S=T(k),$=T(S);V(()=>{_=Re(v,1,"tab-item",null,_,{active:r(l)===r(h).language}),H(S,"href",(r(h),M(()=>r(h).url))),$e($,`${r(h),M(()=>r(h).title)??""} SDK`)}),p(f,v)}),V(()=>Re(c,1,`tabs sdk-tabs ${a()??""}`,"svelte-tipgli")),p(n,c),Ve()}var yL=x('<div class="alert alert-success"><div class="content txt-bold"><span class="txt token-holder svelte-1wdz2fq"> </span> <!></div></div> <!>',1),_L=x('<label>Token duration (in seconds)</label> <input type="number" min="0" step="1"/>',1),xL=x('<form><div class="content"><p>Generate a nonrenewable auth token for <strong> </strong></p></div> <!></form>'),wL=x('<div class="clearfix"></div> <!>',1),kL=x("<h4>Impersonate auth token</h4>"),SL=x('<button type="button" class="btn btn-secondary btn-expanded"><span class="txt">Generate a new one</span></button>'),TL=x('<button type="submit"><span class="txt">Generate token</span></button>'),$L=x('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button> <!>',1);function IL(n,e){Ue(e,!1);const t=P(),i=qt(),a="impersonate_"+R.randomString(5);let s=te(e,"collection",8),o=te(e,"record",8),l=P(),c=P(0),u=P(!1),d=P();function f(){o()&&(_(),r(l)?.show())}function h(){r(l)?.hide(),_()}async function v(){if(!(r(u)||!s()||!o())){y(u,!0);try{y(d,await Ae.collection(s().name).impersonate(o().id,r(c))),i("submit",r(d))}catch(m){Ae.error(m)}y(u,!1)}}function _(){y(c,0),y(d,void 0)}ie(()=>r(d),()=>{y(t,R.getApiExampleUrl(r(d)?.baseURL))}),dt();var b={show:f,hide:h};Be();{let m=ne(()=>!r(u));pt(pn(n,{overlayClose:!1,get escClose(){return r(m)},beforeHide:()=>!r(u),popup:!0,$$events:{show(k){lt.call(this,e,k)},hide(k){lt.call(this,e,k)}},children:(k,S)=>{var $=wL(),D=g(F($),2);{var I=w=>{var E=yL(),O=F(E),A=T(O),q=T(A),L=T(q),j=g(q,2);ar(j,{get value(){return r(d),M(()=>r(d).authStore.token)}});var U=g(O,2);{let W=ne(()=>`
                import PocketBase from 'pocketbase';

                const token = "...";

                const pb = new PocketBase('${r(t)}');

                pb.authStore.save(token, null);
            `),Y=ne(()=>`
                import 'package:pocketbase/pocketbase.dart';

                final token = "...";

                final pb = PocketBase('${r(t)}');

                pb.authStore.save(token, null);
            `);bL(U,{class:"m-b-0",get js(){return r(W)},get dart(){return r(Y)}})}V(()=>$e(L,(r(d),M(()=>r(d).authStore.token)))),p(w,E)},C=w=>{var E=xL(),O=T(E),A=T(O),q=g(T(A)),L=T(q),j=g(O,2);De(j,{class:"form-field m-b-xs m-t-sm",name:"duration",children:Ee,$$slots:{default:(U,W)=>{const Y=ne(()=>W.uniqueId);var J=_L(),z=F(J),X=g(z,2);V(()=>{H(z,"for",r(Y)),H(X,"id",r(Y)),H(X,"placeholder",`Default to the collection setting (${N(s()),M(()=>s()?.authToken?.duration||0)??""}s)`),zn(X,r(c)||"")}),re("input",X,oe=>y(c,oe.target.value<<0)),p(U,J)}}}),V(U=>{H(E,"id",a),$e(L,`${U??""}:`)},[()=>(N(R),N(o()),M(()=>R.displayValue(o())))]),re("submit",E,Ct(v)),p(w,E)};G(D,w=>{r(d),M(()=>r(d)?.authStore?.token)?w(I):w(C,!1)})}p(k,$)},$$slots:{default:!0,header:(k,S)=>{var $=kL();p(k,$)},footer:(k,S)=>{var $=$L(),D=F($),I=g(D,2);{var C=E=>{var O=SL();V(()=>O.disabled=r(u)),re("click",O,()=>_()),p(E,O)},w=E=>{var O=TL();let A;V(()=>{H(O,"form",a),A=Re(O,1,"btn btn-expanded",null,A,{"btn-loading":r(u)}),O.disabled=r(u)}),re("click",O,()=>v()),p(E,O)};G(I,E=>{r(d),M(()=>r(d)?.authStore?.token)?E(C):E(w,!1)})}V(()=>D.disabled=r(u)),re("click",D,h),p(k,$)}},$$legacy:!0}),k=>y(l,k),()=>r(l))}return _t(e,"show",f),_t(e,"hide",h),Ve(b)}var CL=x('<div class="block"><div class="alert alert-info m-0"><div class="icon"><i class="ri-information-line"></i></div> <div class="flex flex-gap-xs">The record has previous unsaved changes. <button type="button" class="btn btn-sm btn-secondary">Restore draft</button></div> <button type="button" class="close" aria-label="Discard draft"><i class="ri-close-line"></i></button></div> <div class="clearfix p-b-base"></div></div>'),EL=x('<div class="form-field-addon"><!></div>'),OL=x('<label><i></i> <span class="txt">id</span> <span class="flex-fill"></span></label> <!> <input type="text"/>',1),DL=x("<hr/>"),PL=x("<!> <!>",1),ML=x("<div><!></div>"),AL=x('<div class="tabs-content no-animations"><form><!> <!> <!> <!></form> <!></div>'),LL=x('<span class="loader loader-sm"></span> <h4 class="panel-title txt-hint svelte-pvxyrt">Loading...</h4>',1),NL=x('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-mail-check-line" aria-hidden="true"></i> <span class="txt">Send verification email</span></button>'),RL=x('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-mail-lock-line" aria-hidden="true"></i> <span class="txt">Send password reset email</span></button>'),FL=x('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-id-card-line" aria-hidden="true"></i> <span class="txt">Impersonate</span></button>'),qL=x('<!> <!> <!> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-braces-line" aria-hidden="true"></i> <span class="txt">Copy raw JSON</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-file-copy-line" aria-hidden="true"></i> <span class="txt">Duplicate</span></button> <hr/> <button type="button" class="dropdown-item txt-danger closable" role="menuitem"><i class="ri-delete-bin-7-line" aria-hidden="true"></i> <span class="txt">Delete</span></button>',1),zL=x('<div class="flex-fill"></div> <div tabindex="0" role="button" aria-label="More record options" class="btn btn-sm btn-circle btn-transparent flex-gap-0"><i class="ri-more-line" aria-hidden="true"></i> <!></div>',1),jL=x('<h4 class="panel-title svelte-pvxyrt"> <strong> </strong> record</h4> <!>',1),UL=x('<div class="tabs-header stretched"><button type="button">Account</button> <button type="button">Authorized providers</button></div>'),VL=x("<!> <!>",1),BL=x('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Save and continue</span></button>'),HL=x('<button type="button" class="btn p-l-5 p-r-5 flex-gap-0"><i class="ri-arrow-down-s-line" aria-hidden="true"></i> <!></button>'),WL=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <div class="btns-group no-gap"><button type="submit" title="Save and close"><span class="txt"> </span></button> <!></div>',1),YL=x("<!> <!>",1);function Rd(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=P(),o=P(),l=P(),c=P(),u=P(),d=qt(),f="record_"+R.randomString(5),h="form",v="providers";let _=te(e,"collection",8),b=P(),m=P(),k=P({}),S=P({}),$=P(null),D=P(!1),I=P(!1),C=P({}),w=P({}),E=P(JSON.stringify(r(k))),O=P(r(E)),A=P(h),q=P(!0),L=P(!0),j=P(_()),U=P([]);const W=["id"],Y=W.concat("email","emailVisibility","verified","tokenKey","password");function J(be){return le(be),y(I,!0),y(A,h),r(b)?.show()}function z(){return r(b)?.hide()}function X(){y(I,!1),z()}function oe(){y(j,_()),r(b)?.isActive()&&(Te(JSON.stringify(r(S))),X())}async function ce(be){if(!be)return null;let Le=typeof be=="string"?be:be?.id;if(Le)try{return await Ae.collection(_().id).getOne(Le)}catch(Ke){Ke.isAbort||(X(),console.warn("resolveModel:",Ke),dr(`Unable to load record with id "${Le}"`))}return typeof be=="object"?be:null}async function le(be){y(L,!0),nn({}),y(C,{}),y(w,{}),y(k,typeof be=="string"?{id:be,collectionId:_()?.id,collectionName:_()?.name}:be||{}),y(S,structuredClone(r(k))),y(k,await ce(be)||{}),y(S,structuredClone(r(k))),await Tn(),y($,pe()),!r($)||he(r(S),r($))?y($,null):(delete r($).password,delete r($).passwordConfirm),y(E,JSON.stringify(r(S))),y(L,!1)}async function me(be){nn({}),y(k,be||{}),y(C,{}),y(w,{});const Le=_()?.fields?.filter(Ke=>Ke.type!="file")?.map(Ke=>Ke.name)||[];for(let Ke in be)Le.includes(Ke)||ft(S,r(S)[Ke]=be[Ke]);await Tn(),y(E,JSON.stringify(r(S))),ue()}function _e(){return"record_draft_"+(_()?.id||"")+"_"+(r(k)?.id||"")}function pe(be){try{const Le=window.localStorage.getItem(_e());if(Le)return JSON.parse(Le)}catch{}return be}function Te(be){try{window.localStorage.setItem(_e(),be)}catch(Le){console.warn("updateDraft failure:",Le),window.localStorage.removeItem(_e())}}function Se(){r($)&&(y(S,r($)),y($,null))}function he(be,Le){const Ke=structuredClone(be||{}),st=structuredClone(Le||{}),it=_()?.fields?.filter(Je=>Je.type==="file");for(let Je of it)delete Ke[Je.name],delete st[Je.name];const He=["expand","password","passwordConfirm"];for(let Je of He)delete Ke[Je],delete st[Je];return JSON.stringify(Ke)==JSON.stringify(st)}function ue(){y($,null),window.localStorage.removeItem(_e())}async function ke(be=!0){if(!(r(D)||!r(c)||!_()?.id)){y(D,!0);try{const Le=ae();let Ke;if(r(q)?Ke=await Ae.collection(_().id).create(Le):Ke=await Ae.collection(_().id).update(r(S).id,Le),hn(r(q)?"Successfully created record.":"Successfully updated record."),ue(),r(i)&&r(S)?.id==Ae.authStore.record?.id&&Le.get("password"))return Ae.logout();be?X():me(Ke),d("save",{isNew:r(q),record:Ke})}catch(Le){Ae.error(Le)}y(D,!1)}}function we(){r(k)?.id&&qn("Do you really want to delete the selected record?",()=>Ae.collection(r(k).collectionId).delete(r(k).id).then(()=>{X(),hn("Successfully deleted record."),d("delete",r(k))}).catch(be=>{Ae.error(be)}))}function ae(){const be=structuredClone(r(S)||{}),Le=new FormData,Ke={},st={};for(const it of _()?.fields||[])it.type=="autodate"||r(t)&&it.type=="password"||(Ke[it.name]=!0,it.type=="json"&&(st[it.name]=!0));r(t)&&be.password&&(Ke.password=!0),r(t)&&be.passwordConfirm&&(Ke.passwordConfirm=!0);for(const it in be)if(Ke[it]){if(typeof be[it]>"u"&&(be[it]=null),st[it]&&be[it]!=="")try{JSON.parse(be[it])}catch(He){const Je={};throw Je[it]={code:"invalid_json",message:He.toString()},new si({status:400,response:{data:Je}})}R.addValueToFormData(Le,it,be[it])}for(const it in r(C)){const He=R.toArray(r(C)[it]);for(const Je of He)Le.append(it+"+",Je)}for(const it in r(w)){const He=R.toArray(r(w)[it]);for(const Je of He)Le.append(it+"-",Je)}return Le}function xe(){!_()?.id||!r(k)?.email||qn(`Do you really want to sent verification email to ${r(k).email}?`,()=>Ae.collection(_().id).requestVerification(r(k).email).then(()=>{hn(`Successfully sent verification email to ${r(k).email}.`)}).catch(be=>{Ae.error(be)}))}function se(){!_()?.id||!r(k)?.email||qn(`Do you really want to sent password reset email to ${r(k).email}?`,()=>Ae.collection(_().id).requestPasswordReset(r(k).email).then(()=>{hn(`Successfully sent password reset email to ${r(k).email}.`)}).catch(be=>{Ae.error(be)}))}function ge(){r(l)?qn("You have unsaved changes. Do you really want to discard them?",()=>{ee()}):ee()}async function ee(){let be=r(k)?structuredClone(r(k)):null;if(be){const Le=["file","autodate"],Ke=_()?.fields||[];for(const st of Ke)Le.includes(st.type)&&delete be[st.name];be.id=""}ue(),J(be),await Tn(),y(E,"")}function ve(be){(be.ctrlKey||be.metaKey)&&be.code=="KeyS"&&(be.preventDefault(),be.stopPropagation(),ke(!1))}function Ce(){R.copyToClipboard(JSON.stringify(r(k),null,2)),ls("The record JSON was copied to your clipboard!",3e3)}ie(()=>N(_()),()=>{y(t,_()?.type==="auth")}),ie(()=>N(_()),()=>{y(i,_()?.name==="_superusers")}),ie(()=>N(_()),()=>{y(a,!!_()?.fields?.find(be=>be.type==="editor"))}),ie(()=>N(_()),()=>{y(s,_()?.fields?.find(be=>be.name==="id"))}),ie(()=>(r(C),r(w)),()=>{y(o,R.hasNonEmptyProps(r(C))||R.hasNonEmptyProps(r(w)))}),ie(()=>r(S),()=>{y(O,JSON.stringify(r(S)))}),ie(()=>(r(o),r(E),r(O)),()=>{y(l,r(o)||r(E)!=r(O))}),ie(()=>r(k),()=>{y(q,!r(k)||!r(k).id)}),ie(()=>(r(L),r(q),r(l)),()=>{y(c,!r(L)&&(r(q)||r(l)))}),ie(()=>(r(L),r(O)),()=>{r(L)||Te(r(O))}),ie(()=>(N(_()),r(j)),()=>{_()&&r(j)?.id!=_()?.id&&oe()}),ie(()=>r(t),()=>{y(u,r(t)?Y:W)}),ie(()=>(N(_()),r(u)),()=>{y(U,_()?.fields?.filter(be=>!r(u).includes(be.name)&&be.type!="autodate")||[])}),dt();var Ie={show:J,hide:z};Be();var ze=YL(),qe=F(ze);{let be=ne(()=>r(a)?"overlay-panel-xl":"overlay-panel-lg"),Le=ne(()=>r(t)&&!r(i)&&!r(q)?"colored-header":""),Ke=ne(()=>!r(L)),st=ne(()=>!r(L)),it=ne(()=>!r(L));pt(pn(qe,{get class(){return`
        record-panel
        ${r(be)??""}
        ${r(Le)??""}
    `},get btnClose(){return r(Ke)},get escClose(){return r(st)},get overlayClose(){return r(it)},beforeHide:()=>r(l)&&r(I)?(qn("You have unsaved changes. Do you really want to close the panel?",()=>{X()}),!1):(nn({}),ue(),!0),$$events:{hide(He){lt.call(this,e,He)},show(He){lt.call(this,e,He)}},children:(He,Je)=>{var Fe=AL(),Me=T(Fe);let Ne;var Ze=T(Me);{var Xe=nt=>{var Oe=CL(),B=T(Oe),Z=g(T(B),2),de=g(T(Z)),ye=g(Z,2);Ge(ye,(Ye,ot)=>ht?.(Ye,ot),()=>"Discard draft"),Nt(()=>re("click",ye,Ct(()=>ue()))),re("click",de,()=>Se()),Et(2,Oe,()=>vn,()=>({duration:150})),p(nt,Oe)};G(Ze,nt=>{!r(l)&&r($)&&!r(L)&&nt(Xe)})}var vt=g(Ze,2);{let nt=ne(()=>r(q)?"":"readonly");De(vt,{get class(){return`form-field ${r(nt)??""}`},name:"id",children:Ee,$$slots:{default:(Oe,B)=>{const Z=ne(()=>B.uniqueId);var de=OL(),ye=F(de),Ye=T(ye),ot=g(ye,2);{var Tt=wt=>{var ut=EL(),St=T(ut);hM(St,{get record(){return r(S)}}),p(wt,ut)};G(ot,wt=>{r(q)||wt(Tt)})}var at=g(ot,2);V((wt,ut)=>{H(ye,"for",r(Z)),Re(Ye,1,wt,"svelte-pvxyrt"),H(at,"id",r(Z)),H(at,"placeholder",ut),H(at,"minlength",(r(s),M(()=>r(s)?.min||null))),H(at,"maxlength",(r(s),M(()=>r(s)?.max||null))),at.readOnly=!r(q)},[()=>$n((N(R),M(()=>R.getFieldTypeIcon("primary")))),()=>(r(L),N(R),r(s),M(()=>!r(L)&&!R.isEmpty(r(s)?.autogeneratePattern)?"Leave empty to auto generate...":""))]),xt(at,()=>r(S).id,wt=>ft(S,r(S).id=wt)),p(Oe,de)}}})}var tt=g(vt,2);{var We=nt=>{var Oe=PL(),B=F(Oe);DM(B,{get isNew(){return r(q)},get collection(){return _()},get record(){return r(S)},set record(ye){y(S,ye)},$$legacy:!0});var Z=g(B,2);{var de=ye=>{var Ye=DL();p(ye,Ye)};G(Z,ye=>{r(U),M(()=>r(U).length)&&ye(de)})}p(nt,Oe)};G(tt,nt=>{r(t)&&nt(We)})}var Qe=g(tt,2);bt(Qe,1,()=>r(U),nt=>nt.name,(nt,Oe)=>{var B=et(),Z=F(B);{var de=Ye=>{sL(Ye,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(ot){ft(S,r(S)[r(Oe).name]=ot)},$$legacy:!0})},ye=Ye=>{var ot=et(),Tt=F(ot);{var at=ut=>{SA(ut,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(St){ft(S,r(S)[r(Oe).name]=St)},$$legacy:!0})},wt=ut=>{var St=et(),Rt=F(St);{var _n=mn=>{RM(mn,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(xn){ft(S,r(S)[r(Oe).name]=xn)},$$legacy:!0})},dn=mn=>{var xn=et(),Zi=F(xn);{var an=Cn=>{sA(Cn,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(An){ft(S,r(S)[r(Oe).name]=An)},$$legacy:!0})},kn=Cn=>{var An=et(),Xn=F(An);{var wi=Qn=>{lL(Qn,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(Gi){ft(S,r(S)[r(Oe).name]=Gi)},$$legacy:!0})},Li=Qn=>{var Gi=et(),Ts=F(Gi);{var Fa=ci=>{rA(ci,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(ui){ft(S,r(S)[r(Oe).name]=ui)},$$legacy:!0})},ei=ci=>{var ui=et(),Ni=F(ui);{var ia=Ln=>{zM(Ln,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(ra){ft(S,r(S)[r(Oe).name]=ra)},$$legacy:!0})},ki=Ln=>{var ra=et(),Eo=F(ra);{var qa=Ri=>{nL(Ri,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(Mr){ft(S,r(S)[r(Oe).name]=Mr)},$$legacy:!0})},di=Ri=>{var Mr=et(),$s=F(Mr);{var Is=Fi=>{wA(Fi,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(fi){ft(S,r(S)[r(Oe).name]=fi)},$$legacy:!0})},Cs=Fi=>{var fi=et(),nc=F(fi);{var Oo=hr=>{mA(hr,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(Xi){ft(S,r(S)[r(Oe).name]=Xi)},get uploadedFiles(){return r(C)[r(Oe).name]},set uploadedFiles(Xi){ft(C,r(C)[r(Oe).name]=Xi)},get deletedFileNames(){return r(w)[r(Oe).name]},set deletedFileNames(Xi){ft(w,r(w)[r(Oe).name]=Xi)},$$legacy:!0})},Es=hr=>{var Xi=et(),ic=F(Xi);{var K=fe=>{QA(fe,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(Pe){ft(S,r(S)[r(Oe).name]=Pe)},$$legacy:!0})},Q=fe=>{var Pe=et(),ct=F(Pe);{var kt=Qt=>{$A(Qt,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(sn){ft(S,r(S)[r(Oe).name]=sn)},$$legacy:!0})},Lt=Qt=>{var sn=et(),En=F(sn);{var Si=rc=>{vL(rc,{get field(){return r(Oe)},get original(){return r(k)},get record(){return r(S)},get value(){return r(S)[r(Oe).name]},set value(Jg){ft(S,r(S)[r(Oe).name]=Jg)},$$legacy:!0})};G(En,rc=>{r(Oe),M(()=>r(Oe).type==="geoPoint")&&rc(Si)},!0)}p(Qt,sn)};G(ct,Qt=>{r(Oe),M(()=>r(Oe).type==="password")?Qt(kt):Qt(Lt,!1)},!0)}p(fe,Pe)};G(ic,fe=>{r(Oe),M(()=>r(Oe).type==="relation")?fe(K):fe(Q,!1)},!0)}p(hr,Xi)};G(nc,hr=>{r(Oe),M(()=>r(Oe).type==="file")?hr(Oo):hr(Es,!1)},!0)}p(Fi,fi)};G($s,Fi=>{r(Oe),M(()=>r(Oe).type==="json")?Fi(Is):Fi(Cs,!1)},!0)}p(Ri,Mr)};G(Eo,Ri=>{r(Oe),M(()=>r(Oe).type==="select")?Ri(qa):Ri(di,!1)},!0)}p(Ln,ra)};G(Ni,Ln=>{r(Oe),M(()=>r(Oe).type==="date")?Ln(ia):Ln(ki,!1)},!0)}p(ci,ui)};G(Ts,ci=>{r(Oe),M(()=>r(Oe).type==="editor")?ci(Fa):ci(ei,!1)},!0)}p(Qn,Gi)};G(Xn,Qn=>{r(Oe),M(()=>r(Oe).type==="url")?Qn(wi):Qn(Li,!1)},!0)}p(Cn,An)};G(Zi,Cn=>{r(Oe),M(()=>r(Oe).type==="email")?Cn(an):Cn(kn,!1)},!0)}p(mn,xn)};G(Rt,mn=>{r(Oe),M(()=>r(Oe).type==="bool")?mn(_n):mn(dn,!1)},!0)}p(ut,St)};G(Tt,ut=>{r(Oe),M(()=>r(Oe).type==="number")?ut(at):ut(wt,!1)},!0)}p(Ye,ot)};G(Z,Ye=>{r(Oe),M(()=>r(Oe).type==="text")?Ye(de):Ye(ye,!1)})}p(nt,B)});var mt=g(Me,2);{var gt=nt=>{var Oe=ML();let B;var Z=T(Oe);bM(Z,{get record(){return r(S)}}),V(()=>B=Re(Oe,1,"tab-item",null,B,{active:r(A)===v})),p(nt,Oe)};G(mt,nt=>{r(t)&&!r(i)&&!r(q)&&nt(gt)})}V(()=>{H(Me,"id",f),Ne=Re(Me,1,"tab-item",null,Ne,{"no-pointer-events":r(L),active:r(A)===h})}),re("submit",Me,Ct(ke)),re("keydown",Me,ve),p(He,Fe)},$$slots:{default:!0,header:(He,Je)=>{var Fe=VL(),Me=F(Fe);{var Ne=tt=>{var We=LL();p(tt,We)},Ze=tt=>{var We=jL(),Qe=F(We),mt=T(Qe),gt=g(mt),nt=T(gt),Oe=g(Qe,2);{var B=Z=>{var de=zL(),ye=g(F(de),2),Ye=g(T(ye),2);Jn(Ye,{class:"dropdown dropdown-right dropdown-nowrap",children:(ot,Tt)=>{var at=qL(),wt=F(at);{var ut=an=>{var kn=NL();re("click",kn,()=>xe()),p(an,kn)};G(wt,an=>{r(t),r(k),M(()=>r(t)&&!r(k).verified&&r(k).email)&&an(ut)})}var St=g(wt,2);{var Rt=an=>{var kn=RL();re("click",kn,()=>se()),p(an,kn)};G(St,an=>{r(t),r(k),M(()=>r(t)&&r(k).email)&&an(Rt)})}var _n=g(St,2);{var dn=an=>{var kn=FL();re("click",kn,()=>r(m)?.show()),p(an,kn)};G(_n,an=>{r(t)&&an(dn)})}var mn=g(_n,2),xn=g(mn,2),Zi=g(xn,4);re("click",mn,()=>Ce()),re("click",xn,()=>ge()),re("click",Zi,Ct(fn(()=>we()))),p(ot,at)},$$slots:{default:!0}}),p(Z,de)};G(Oe,Z=>{r(q)||Z(B)})}V(()=>{$e(mt,`${r(q)?"New":"Edit"} `),$e(nt,(N(_()),M(()=>_()?.name)))}),p(tt,We)};G(Me,tt=>{r(L)?tt(Ne):tt(Ze,!1)})}var Xe=g(Me,2);{var vt=tt=>{var We=UL(),Qe=T(We);let mt;var gt=g(Qe,2);let nt;V(()=>{mt=Re(Qe,1,"tab-item",null,mt,{active:r(A)===h}),nt=Re(gt,1,"tab-item",null,nt,{active:r(A)===v})}),re("click",Qe,()=>y(A,h)),re("click",gt,()=>y(A,v)),p(tt,We)};G(Xe,tt=>{r(t)&&!r(i)&&!r(q)&&tt(vt)})}p(He,Fe)},footer:(He,Je)=>{var Fe=WL(),Me=F(Fe),Ne=g(Me,2),Ze=T(Ne);let Xe;var vt=T(Ze),tt=T(vt),We=g(Ze,2);{var Qe=mt=>{var gt=HL(),nt=g(T(gt),2);Jn(nt,{class:"dropdown dropdown-upside dropdown-right dropdown-nowrap m-b-5",children:(Oe,B)=>{var Z=BL();re("click",Z,()=>ke(!1)),p(Oe,Z)},$$slots:{default:!0}}),V(()=>gt.disabled=!r(c)||r(D)),p(mt,gt)};G(We,mt=>{r(q)||mt(Qe)})}V(()=>{Me.disabled=r(D)||r(L),H(Ze,"form",f),Xe=Re(Ze,1,"btn",null,Xe,{"btn-expanded":r(q),"btn-expanded-sm":!r(q),"btn-loading":r(D)||r(L)}),Ze.disabled=!r(c)||r(D),$e(tt,r(q)?"Create":"Save changes")}),re("click",Me,()=>z()),p(He,Fe)}},$$legacy:!0}),He=>y(b,He),()=>r(b))}var je=g(qe,2);{var rt=be=>{pt(IL(be,{get record(){return r(S)},get collection(){return _()},$$legacy:!0}),Le=>y(m,Le),()=>r(m))};G(je,be=>{r(t)&&be(rt)})}return p(n,ze),_t(e,"show",J),_t(e,"hide",z),Ve(Ie)}var KL=x('<div><span class="txt">Total found:</span> <span class="txt"> </span></div>');function JL(n,e){Ue(e,!1);const t=qt();let i=te(e,"collection",8),a=te(e,"filter",8,""),s=te(e,"totalCount",12,0),o=te(e,"class",8,void 0),l=P(!1);async function c(){if(i()?.id){y(l,!0),s(0);try{const v=R.getAllCollectionIdentifiers(i()),_=await Ae.collection(i().id).getList(1,1,{filter:R.normalizeSearchFilter(a(),v),fields:"id",requestKey:"records_count"});s(_.totalItems),t("count",s()),y(l,!1)}catch(v){v?.isAbort||(y(l,!1),console.warn(v))}}}ie(()=>(N(i()),N(a())),()=>{i()?.id&&a()!==-1&&c()}),dt();var u={reload:c};Be();var d=KL(),f=g(T(d),2),h=T(f);return V(()=>{Re(d,1,`inline-flex flex-gap-5 records-counter ${o()??""}`),$e(h,r(l)?"...":s())}),p(n,d),_t(e,"reload",c),Ve(u)}var ZL=x('<span class="loader loader-sm"></span>'),GL=x('<div class="form-field"><input type="checkbox" id="checkbox_0"/> <label for="checkbox_0"></label></div>'),XL=x('<th class="bulk-select-col min-width"><!></th>'),QL=x("<i></i>"),eN=x("<i></i>"),tN=x('<div class="col-header-content"><!> <span class="txt"> </span></div>'),nN=x('<button type="button" aria-label="Toggle columns" class="btn btn-sm btn-transparent p-0"><i class="ri-more-line"></i></button>'),iN=x('<td class="bulk-select-col min-width"><div class="form-field"><input type="checkbox"/> <label></label></div></td>'),rN=x('<div class="relation-cell svelte-14l6jun"><!></div>'),aN=x("<td><!></td>"),sN=x('<tr tabindex="0" class="row-handle"><!><!><td class="col-type-action min-width"><i class="ri-arrow-right-line"></i></td></tr>'),oN=x('<tr><td colspan="99" class="p-xs"><span class="skeleton-loader m-0"></span></td></tr>'),lN=x('<button type="button" class="btn btn-hint btn-expanded m-t-sm"><span class="txt">Clear filters</span></button>'),cN=x('<button type="button" class="btn btn-secondary btn-expanded m-t-sm"><i class="ri-add-line"></i> <span class="txt">New record</span></button>'),uN=x('<tr><td colspan="99" class="txt-center txt-hint p-xs"><h6>No records found.</h6> <!></td></tr>'),dN=x('<tr><td colspan="99" class="txt-center"><button><span class="txt">Load more</span></button></td></tr>'),fN=x('<table><thead><tr><!><!><th class="col-type-action min-width"><!></th></tr></thead><tbody><!><!></tbody></table>'),hN=x('<input type="checkbox"/> <label> </label>',1),vN=x('<div class="txt-hint txt-sm p-5 m-b-5">Toggle columns</div> <!>',1),pN=x('<div class="bulkbar"><div class="txt">Selected <strong> </strong> </div> <button type="button"><span class="txt">Reset</span></button> <div class="flex-fill"></div> <button type="button"><span class="txt">Delete selected</span></button></div>'),mN=x("<!> <!>",1);function gN(n,e){Ue(e,!1);const t=()=>It(so,"$isCollectionsLoading",a),i=()=>It(Gn,"$collections",a),[a,s]=At(),o=P(),l=P(),c=P(),u=P(),d=P(),f=P(),h=P(),v=P(),_=P(),b=qt(),m=/^([\+\-])?(\w+)$/,k=40;let S=te(e,"collection",8),$=te(e,"sort",12,""),D=te(e,"filter",12,""),I=P(),C=P([]),w=P(1),E=P(0),O=P({}),A=P(!0),q=P(!1),L=0,j=P(),U=P([]),W=P([]),Y=P("");const J=["verified","emailVisibility"];function z(){S()?.id&&(r(U).length?localStorage.setItem(r(Y),JSON.stringify(r(U))):localStorage.removeItem(r(Y)))}function X(){if(y(U,[]),!!S()?.id)try{const ee=localStorage.getItem(r(Y));ee&&y(U,JSON.parse(ee)||[])}catch{}}function oe(ee){return!!r(C).find(ve=>ve.id==ee)}async function ce(){const ee=r(w);for(let ve=1;ve<=ee;ve++)(ve===1||r(h))&&await le(ve,!1)}async function le(ee=1,ve=!0){if(!S()?.id)return;y(A,!0);let Ce=$();const Ie=Ce.match(m),ze=Ie?r(d).find(be=>be.name===Ie[2]):null;if(Ie&&ze){const be=i()?.find(Ke=>Ke.id==ze.collectionId)?.fields?.filter(Ke=>Ke.presentable)?.map(Ke=>Ke.name)||[],Le=[];for(const Ke of be)Le.push((Ie[1]||"")+Ie[2]+"."+Ke);Le.length>0&&(Ce=Le.join(","))}const qe=R.getAllCollectionIdentifiers(S()),je=r(u).map(be=>be.name+":excerpt(200)").concat(r(d).map(be=>"expand."+be.name+".*:excerpt(200)"));je.length&&je.unshift("*");let rt=[];for(const be of r(d)){const Le=R.getExpandPresentableRelFields(be,i(),2);Le?.length&&(rt=rt.concat(Le)),R.pushUnique(rt,be.name)}return Ae.collection(S().id).getList(ee,k,{sort:Ce,skipTotal:1,filter:R.normalizeSearchFilter(D(),qe),expand:rt.join(","),fields:je.join(","),requestKey:"records_list"}).then(async be=>{if(ee<=1&&me(),y(A,!1),y(w,be.page),y(E,be.items.length),b("load",r(C).concat(be.items)),r(u).length)for(let Le of be.items)Le._partial=!0;if(ve){const Le=++L;for(;be.items?.length&&L==Le;){const Ke=be.items.splice(0,20);for(let st of Ke)R.pushOrReplaceByKey(r(C),st);y(C,r(C)),await R.yieldToMain()}}else{for(let Le of be.items)R.pushOrReplaceByKey(r(C),Le);y(C,r(C))}}).catch(be=>{be?.isAbort||(y(A,!1),console.warn(be),me(),Ae.error(be,!D()||be?.status!=400))})}function me(){r(I)?.resetVerticalScroll(),y(C,[]),y(w,1),y(E,0),y(O,{})}function _e(){r(_)?pe():Te()}function pe(){y(O,{})}function Te(){for(const ee of r(C))ft(O,r(O)[ee.id]=ee);y(O,r(O))}function Se(ee){r(O)[ee.id]?delete r(O)[ee.id]:ft(O,r(O)[ee.id]=ee),y(O,r(O))}function he(){const ee=`Do you really want to delete the selected ${r(v)===1?"record":"records"}?`;qn(ee,ue)}async function ue(){if(r(q)||!r(v)||!S()?.id)return;let ee=[];for(const ve of Object.keys(r(O)))ee.push(Ae.collection(S().id).delete(ve));return y(q,!0),Promise.all(ee).then(()=>{hn(`Successfully deleted the selected ${r(v)===1?"record":"records"}.`),b("delete",r(O)),pe()}).catch(ve=>{Ae.error(ve)}).finally(()=>(y(q,!1),ce()))}ie(()=>N(S()),()=>{S()?.id&&(y(Y,S().id+"@hiddenColumns"),X(),me())}),ie(()=>N(S()),()=>{y(o,S()?.type==="view")}),ie(()=>N(S()),()=>{y(l,S()?.type==="auth"&&S().name==="_superusers")}),ie(()=>(N(S()),r(l)),()=>{y(c,(S()?.fields||[]).filter(ee=>!ee.hidden&&(!r(l)||!J.includes(ee.name))))}),ie(()=>r(c),()=>{y(u,r(c).filter(ee=>ee.type==="editor"))}),ie(()=>r(c),()=>{y(d,r(c).filter(ee=>ee.type==="relation"))}),ie(()=>(r(c),r(U)),()=>{y(f,r(c).filter(ee=>!r(U).includes(ee.id)))}),ie(()=>(t(),N(S()),N($()),N(D())),()=>{!t()&&S()?.id&&$()!==-1&&D()!==-1&&le(1)}),ie(()=>r(E),()=>{y(h,r(E)>=k)}),ie(()=>r(O),()=>{y(v,Object.keys(r(O)).length)}),ie(()=>(r(C),r(v)),()=>{y(_,r(C).length&&r(v)===r(C).length)}),ie(()=>r(U),()=>{r(U)!==-1&&z()}),ie(()=>r(c),()=>{y(W,r(c).filter(ee=>!ee.primaryKey).map(ee=>({id:ee.id,name:ee.name})))}),dt();var ke={hasRecord:oe,reloadLoadedPages:ce,load:le};Be();var we=mN(),ae=F(we);pt(md(ae,{class:"table-wrapper",children:(ee,ve)=>{var Ce=fN();let Ie;var ze=T(Ce),qe=T(ze),je=T(qe);{var rt=Me=>{var Ne=XL(),Ze=T(Ne);{var Xe=tt=>{var We=ZL();p(tt,We)},vt=tt=>{var We=GL(),Qe=T(We);V(()=>{Qe.disabled=(r(C),M(()=>!r(C).length)),Yr(Qe,r(_))}),re("change",Qe,()=>_e()),p(tt,We)};G(Ze,tt=>{r(A)?tt(Xe):tt(vt,!1)})}p(Me,Ne)};G(je,Me=>{r(o)||Me(rt)})}var be=g(je);bt(be,1,()=>r(f),Me=>Me.id,(Me,Ne)=>{ol(Me,{get class(){return`col-type-${r(Ne),M(()=>r(Ne).type)??""} col-field-${r(Ne),M(()=>r(Ne).name)??""}`},get name(){return r(Ne),M(()=>r(Ne).name)},get sort(){return $()},set sort(Ze){$(Ze)},children:(Ze,Xe)=>{var vt=tN(),tt=T(vt);{var We=nt=>{var Oe=QL();V(B=>Re(Oe,1,B,"svelte-14l6jun"),[()=>$n((N(R),M(()=>R.getFieldTypeIcon("primary"))))]),p(nt,Oe)},Qe=nt=>{var Oe=eN();V(B=>Re(Oe,1,B,"svelte-14l6jun"),[()=>$n((N(R),r(Ne),M(()=>R.getFieldTypeIcon(r(Ne).type))))]),p(nt,Oe)};G(tt,nt=>{r(Ne),M(()=>r(Ne).primaryKey)?nt(We):nt(Qe,!1)})}var mt=g(tt,2),gt=T(mt);V(()=>$e(gt,(r(Ne),M(()=>r(Ne).name)))),p(Ze,vt)},$$slots:{default:!0},$$legacy:!0})});var Le=g(be),Ke=T(Le);{var st=Me=>{var Ne=nN();pt(Ne,Ze=>y(j,Ze),()=>r(j)),p(Me,Ne)};G(Ke,Me=>{r(W),M(()=>r(W).length)&&Me(st)})}var it=g(ze),He=T(it);bt(He,1,()=>r(C),Me=>r(o)?Me:Me.id,(Me,Ne)=>{var Ze=sN(),Xe=T(Ze);{var vt=We=>{var Qe=iN(),mt=T(Qe),gt=T(mt),nt=g(gt,2);V(()=>{H(gt,"id",`checkbox_${r(Ne),M(()=>r(Ne).id)??""}`),Yr(gt,(r(O),r(Ne),M(()=>r(O)[r(Ne).id]))),H(nt,"for",`checkbox_${r(Ne),M(()=>r(Ne).id)??""}`)}),re("change",gt,()=>Se(r(Ne))),re("click",mt,fn(function(Oe){lt.call(this,e,Oe)})),p(We,Qe)};G(Xe,We=>{r(o)||We(vt)})}var tt=g(Xe);bt(tt,1,()=>r(f),We=>We.id,(We,Qe)=>{var mt=aN(),gt=T(mt);{var nt=B=>{var Z=rN(),de=T(Z);Fu(de,{get record(){return r(Ne)},get field(){return r(Qe)}}),p(B,Z)},Oe=B=>{Fu(B,{short:!0,get record(){return r(Ne)},get field(){return r(Qe)}})};G(gt,B=>{r(Qe),M(()=>r(Qe).type==="relation")?B(nt):B(Oe,!1)})}V(()=>Re(mt,1,`col-type-${r(Qe),M(()=>r(Qe).type)??""} col-field-${r(Qe),M(()=>r(Qe).name)??""}`,"svelte-14l6jun")),p(We,mt)}),re("click",Ze,()=>b("select",r(Ne))),re("keydown",Ze,We=>{We.code==="Enter"&&(We.preventDefault(),b("select",r(Ne)))}),p(Me,Ze)},Me=>{var Ne=et(),Ze=F(Ne);{var Xe=tt=>{var We=oN();p(tt,We)},vt=tt=>{var We=uN(),Qe=T(We),mt=g(T(Qe),2);{var gt=Oe=>{var B=lN();re("click",B,()=>D("")),p(Oe,B)},nt=Oe=>{var B=et(),Z=F(B);{var de=ye=>{var Ye=cN();re("click",Ye,()=>b("new")),p(ye,Ye)};G(Z,ye=>{r(o)||ye(de)},!0)}p(Oe,B)};G(mt,Oe=>{N(D()),M(()=>D()?.length)?Oe(gt):Oe(nt,!1)})}p(tt,We)};G(Ze,tt=>{r(A)?tt(Xe):tt(vt,!1)})}p(Me,Ne)});var Je=g(He);{var Fe=Me=>{var Ne=dN(),Ze=T(Ne),Xe=T(Ze);let vt;V(()=>{vt=Re(Xe,1,"btn btn-expanded-lg btn-secondary btn-horizontal-sticky",null,vt,{"btn-loading":r(A)}),Xe.disabled=r(A)}),re("click",Xe,Ct(()=>le(r(w)+1))),p(Me,Ne)};G(Je,Me=>{r(C),r(h),M(()=>r(C).length&&r(h))&&Me(Fe)})}V(()=>Ie=Re(Ce,1,"table",null,Ie,{"table-loading":r(A)})),p(ee,Ce)},$$slots:{default:!0,before:(ee,ve)=>{var Ce=et(),Ie=F(Ce);{var ze=qe=>{Jn(qe,{class:"dropdown dropdown-right dropdown-nowrap columns-dropdown",get trigger(){return r(j)},children:(je,rt)=>{var be=vN(),Le=g(F(be),2);bt(Le,1,()=>r(W),Ke=>Ke.id+Ke.name,(Ke,st)=>{De(Ke,{class:"form-field form-field-sm form-field-toggle m-0 p-5",children:Ee,$$slots:{default:(it,He)=>{const Je=ne(()=>He.uniqueId);var Fe=hN(),Me=F(Fe),Ne=g(Me,2),Ze=T(Ne);V(Xe=>{H(Me,"id",r(Je)),Yr(Me,Xe),H(Ne,"for",r(Je)),$e(Ze,(r(st),M(()=>r(st).name)))},[()=>(r(U),r(st),M(()=>!r(U).includes(r(st).id)))]),re("change",Me,Xe=>{Xe.target.checked?R.removeByValue(r(U),r(st).id):R.pushUnique(r(U),r(st).id),y(U,r(U))}),p(it,Fe)}}})}),p(je,be)},$$slots:{default:!0}})};G(Ie,qe=>{r(j)&&qe(ze)})}p(ee,Ce)}},$$legacy:!0}),ee=>y(I,ee),()=>r(I));var xe=g(ae,2);{var se=ee=>{var ve=pN(),Ce=T(ve),Ie=g(T(Ce)),ze=T(Ie),qe=g(Ie),je=g(Ce,2);let rt;var be=g(je,4);let Le;V(()=>{$e(ze,r(v)),$e(qe,` ${r(v)===1?"record":"records"}`),rt=Re(je,1,"btn btn-xs btn-transparent btn-outline p-l-5 p-r-5",null,rt,{"btn-disabled":r(q)}),Le=Re(be,1,"btn btn-sm btn-transparent btn-danger",null,Le,{"btn-loading":r(q),"btn-disabled":r(q)})}),re("click",je,()=>pe()),re("click",be,()=>he()),Et(3,ve,()=>Xr,()=>({duration:150,y:5})),p(ee,ve)};G(xe,ee=>{r(v)&&ee(se)})}p(n,we),_t(e,"hasRecord",oe),_t(e,"reloadLoadedPages",ce),_t(e,"load",le);var ge=Ve(ke);return s(),ge}var bN=x('<div class="placeholder-section m-b-base"><span class="loader loader-lg"></span> <h1>Loading collections...</h1></div>'),yN=x(`<h1 class="m-b-10">You don't have any collections yet.</h1>`),_N=x('<h1 class="m-b-10">Create your first collection to add records!</h1> <button type="button" class="btn btn-expanded-lg btn-lg"><i class="ri-add-line"></i> <span class="txt">Create new collection</span></button>',1),xN=x('<div class="placeholder-section m-b-base"><div class="icon"><i class="ri-database-2-line"></i></div> <!></div>'),wN=x('<button type="button" aria-label="Edit collection" class="btn btn-transparent btn-circle"><i class="ri-settings-4-line"></i></button>'),kN=x('<button type="button" class="btn btn-expanded"><i class="ri-add-line"></i> <span class="txt">New record</span></button>'),SN=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Collections</div> <div class="breadcrumb-item"> </div></nav> <div class="inline-flex gap-5"><!> <!></div> <div class="btns-group"><button type="button" class="btn btn-outline"><i class="ri-code-s-slash-line"></i> <span class="txt">API Preview</span></button> <!></div></header> <!> <div class="clearfix m-b-sm"></div> <!>',1),TN=x("<!> <!>",1),$N=x("<!> <!> <!> <!> <!>",1);function IN(n,e){Ue(e,!1);const t=()=>It(pd,"$querystring",l),i=()=>It(Ki,"$activeCollection",l),a=()=>It(so,"$isCollectionsLoading",l),s=()=>It(Gn,"$collections",l),o=()=>It(So,"$hideControls",l),[l,c]=At(),u=P(),d=P(),f=new URLSearchParams(t());let h=P(),v=P(),_=P(),b=P(),m=P(),k=P(),S=P(f.get("filter")||""),$=P(f.get("sort")||"-@rowid"),D=P(f.get("collection")||i()?.id),I=P(0);hd(r(D));async function C(z){await Tn(),i()?.type==="view"?r(b).show(z):r(_)?.show(z)}function w(){y(D,i()?.id),y(S,""),y($,"-@rowid"),E(),O({recordId:null}),r(h)?.forceHide(),r(v)?.hide()}async function E(){if(!r($))return;const z=R.getAllCollectionIdentifiers(i()),X=r($).split(",").map(oe=>oe.startsWith("+")||oe.startsWith("-")?oe.substring(1):oe);X.filter(oe=>z.includes(oe)).length!=X.length&&(i()?.type!="view"?y($,"-@rowid"):z.includes("created")?y($,"-created"):y($,""))}function O(z={}){const X=Object.assign({collection:i()?.id||"",filter:r(S),sort:r($)},z);R.replaceHashQueryParams(X)}ie(()=>t(),()=>{y(u,new URLSearchParams(t()))}),ie(()=>r(u),()=>{y(d,r(u).get("collection"))}),ie(()=>(a(),r(d),r(D),i(),qf),()=>{!a()&&r(d)&&r(d)!=r(D)&&r(d)!=i()?.id&&r(d)!=i()?.name&&qf(r(d))}),ie(()=>(i(),r(D)),()=>{i()?.id&&r(D)!=i().id&&r(D)!=i().name&&w()}),ie(()=>i(),()=>{i()?.id&&E()}),ie(()=>a(),()=>{!a()&&f.get("recordId")&&C(f.get("recordId"))}),ie(()=>(a(),r($),r(S),i()),()=>{!a()&&(r($)||r(S)||i()?.id)&&O()}),ie(()=>i(),()=>{Kn(In,i()?.name||"Collections")}),dt(),Be();var A=$N(),q=F(A);{var L=z=>{Ai(z,{center:!0,children:(X,oe)=>{var ce=bN();p(X,ce)},$$slots:{default:!0}})},j=z=>{var X=et(),oe=F(X);{var ce=me=>{Ai(me,{center:!0,children:(_e,pe)=>{var Te=xN(),Se=g(T(Te),2);{var he=ke=>{var we=yN();p(ke,we)},ue=ke=>{var we=_N(),ae=g(F(we),2);re("click",ae,()=>r(h)?.show()),p(ke,we)};G(Se,ke=>{o()?ke(he):ke(ue,!1)})}p(_e,Te)},$$slots:{default:!0}})},le=me=>{var _e=TN(),pe=F(_e);pP(pe,{});var Te=g(pe,2);Ai(Te,{class:"flex-content",children:(Se,he)=>{var ue=SN(),ke=F(ue),we=T(ke),ae=g(T(we),2),xe=T(ae),se=g(we,2),ge=T(se);{var ee=be=>{var Le=wN();Ge(Le,(Ke,st)=>ht?.(Ke,st),()=>({text:"Edit collection",position:"right"})),Nt(()=>re("click",Le,()=>r(h)?.show(i()))),p(be,Le)};G(ge,be=>{o()||be(ee)})}var ve=g(ge,2);Zl(ve,{$$events:{refresh:()=>{r(m)?.load(),r(k)?.reload()}}});var Ce=g(se,2),Ie=T(Ce),ze=g(Ie,2);{var qe=be=>{var Le=kN();re("click",Le,()=>r(_)?.show()),p(be,Le)};G(ze,be=>{i(),M(()=>i().type!=="view")&&be(qe)})}var je=g(ke,2);Jl(je,{get value(){return r(S)},get autocompleteCollection(){return i()},$$events:{submit:be=>y(S,be.detail)}});var rt=g(je,4);pt(gN(rt,{get collection(){return i()},get filter(){return r(S)},set filter(be){y(S,be)},get sort(){return r($)},set sort(be){y($,be)},$$events:{select:be=>{O({recordId:be.detail.id});let Le=be.detail._partial?be.detail.id:be.detail;i().type==="view"?r(b)?.show(Le):r(_)?.show(Le)},delete:()=>{r(k)?.reload()},new:()=>r(_)?.show()},$$legacy:!0}),be=>y(m,be),()=>r(m)),V(()=>$e(xe,(i(),M(()=>i().name)))),re("click",Ie,()=>r(v)?.show(i())),p(Se,ue)},$$slots:{default:!0,footer:(Se,he)=>{pt(JL(Se,{class:"m-r-auto txt-sm txt-hint",get collection(){return i()},get filter(){return r(S)},get totalCount(){return r(I)},set totalCount(ue){y(I,ue)},$$legacy:!0}),ue=>y(k,ue),()=>r(k))}}}),p(me,_e)};G(oe,me=>{s(),M(()=>!s().length)?me(ce):me(le,!1)},!0)}p(z,X)};G(q,z=>{a(),s(),M(()=>a()&&!s().length)?z(L):z(j,!1)})}var U=g(q,2);pt(Ld(U,{$$events:{truncate:()=>{r(m)?.load(),r(k)?.reload()}},$$legacy:!0}),z=>y(h,z),()=>r(h));var W=g(U,2);pt(a$(W,{$$legacy:!0}),z=>y(v,z),()=>r(v));var Y=g(W,2);pt(Rd(Y,{get collection(){return i()},$$events:{hide:()=>{O({recordId:null})},save:z=>{r(S)?r(k)?.reload():z.detail.isNew&&wr(I),r(m)?.reloadLoadedPages()},delete:z=>{(!r(S)||r(m)?.hasRecord(z.detail.id))&&wr(I,-1),r(m)?.reloadLoadedPages()}},$$legacy:!0}),z=>y(_,z),()=>r(_));var J=g(Y,2);pt(dM(J,{get collection(){return i()},$$events:{hide:()=>{O({recordId:null})}},$$legacy:!0}),z=>y(b,z),()=>r(b)),p(n,A),Ve(),c()}var CN=x('<div class="sidebar-title"><span class="txt">Sync</span></div> <a href="/settings/export-collections" class="sidebar-list-item"><i class="ri-uninstall-line" aria-hidden="true"></i> <span class="txt">Export collections</span></a> <a href="/settings/import-collections" class="sidebar-list-item"><i class="ri-install-line" aria-hidden="true"></i> <span class="txt">Import collections</span></a>',1),EN=x('<div class="sidebar-content"><div class="sidebar-title">System</div> <a href="/settings" class="sidebar-list-item"><i class="ri-home-gear-line" aria-hidden="true"></i> <span class="txt">Application</span></a> <a href="/settings/mail" class="sidebar-list-item"><i class="ri-send-plane-2-line" aria-hidden="true"></i> <span class="txt">Mail settings</span></a> <a href="/settings/storage" class="sidebar-list-item"><i class="ri-archive-drawer-line" aria-hidden="true"></i> <span class="txt">Files storage</span></a> <a href="/settings/backups" class="sidebar-list-item"><i class="ri-archive-line" aria-hidden="true"></i> <span class="txt">Backups</span></a> <a href="/settings/crons" class="sidebar-list-item"><i class="ri-time-line" aria-hidden="true"></i> <span class="txt">Crons</span></a> <!></div>');function Ra(n){const e=()=>It(So,"$hideControls",t),[t,i]=At();Hg(n,{class:"settings-sidebar",children:(a,s)=>{var o=EN(),l=g(T(o),2);Ge(l,(_,b)=>nr?.(_,b),()=>({path:"/settings"})),Ge(l,_=>ni?.(_));var c=g(l,2);Ge(c,(_,b)=>nr?.(_,b),()=>({path:"/settings/mail/?.*"})),Ge(c,_=>ni?.(_));var u=g(c,2);Ge(u,(_,b)=>nr?.(_,b),()=>({path:"/settings/storage/?.*"})),Ge(u,_=>ni?.(_));var d=g(u,2);Ge(d,(_,b)=>nr?.(_,b),()=>({path:"/settings/backups/?.*"})),Ge(d,_=>ni?.(_));var f=g(d,2);Ge(f,(_,b)=>nr?.(_,b),()=>({path:"/settings/crons/?.*"})),Ge(f,_=>ni?.(_));var h=g(f,2);{var v=_=>{var b=CN(),m=g(F(b),2);Ge(m,(S,$)=>nr?.(S,$),()=>({path:"/settings/export-collections/?.*"})),Ge(m,S=>ni?.(S));var k=g(m,2);Ge(k,(S,$)=>nr?.(S,$),()=>({path:"/settings/import-collections/?.*"})),Ge(k,S=>ni?.(S)),p(_,b)};G(h,_=>{e()||_(v)})}p(a,o)},$$slots:{default:!0}}),i()}var ON=x('<input type="checkbox"/> <label>Enable <small class="txt-hint">(experimental)</small></label>',1),DN=x('<label><span class="txt">Max requests in a batch</span> <i class="ri-information-line link-hint"></i></label> <input type="number" min="0" step="1"/>',1),PN=x('<label><span class="txt">Max processing time (in seconds)</span></label> <input type="number" min="0" step="1"/>',1),MN=x('<label>Max body size (in bytes)</label> <input type="number" min="0" step="1" placeholder="Default to 128MB"/>',1),AN=x('<!> <div class="grid"><div class="col-lg-4"><!></div> <div class="col-lg-4"><!></div> <div class="col-lg-4"><!></div></div>',1),LN=x('<span class="label label-success">Enabled</span>'),NN=x('<span class="label">Disabled</span>'),RN=x('<i class="ri-error-warning-fill txt-danger"></i>'),FN=x('<div class="inline-flex"><i class="ri-archive-stack-line"></i> <span class="txt">Batch API</span></div> <div class="flex-fill"></div> <!> <!>',1);function qN(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At(),s=P(),o=P();let l=te(e,"formSettings",12);ie(()=>t(),()=>{y(s,!R.isEmpty(t()?.batch))}),ie(()=>N(l()),()=>{y(o,!!l().batch?.enabled)}),dt(),Be(),Pr(n,{single:!0,children:(c,u)=>{var d=AN(),f=F(d);De(f,{class:"form-field form-field-toggle m-b-sm",name:"batch.enabled",children:Ee,$$slots:{default:($,D)=>{const I=ne(()=>D.uniqueId);var C=ON(),w=F(C),E=g(w,2);V(()=>{H(w,"id",r(I)),H(E,"for",r(I))}),Xt(w,()=>l().batch.enabled,O=>l(l().batch.enabled=O,!0)),p($,C)}}});var h=g(f,2),v=T(h),_=T(v);{let $=ne(()=>r(o)?"required":"");De(_,{get class(){return`form-field ${r($)??""}`},name:"batch.maxRequests",children:Ee,$$slots:{default:(D,I)=>{const C=ne(()=>I.uniqueId);var w=DN(),E=F(w),O=g(T(E),2);Ge(O,(q,L)=>ht?.(q,L),()=>({text:"Rate limiting (if enabled) also applies for the batch create/update/upsert/delete requests.",position:"right"}));var A=g(E,2);V(()=>{H(E,"for",r(C)),H(A,"id",r(C)),A.required=r(o)}),xt(A,()=>l().batch.maxRequests,q=>l(l().batch.maxRequests=q,!0)),p(D,w)}}})}var b=g(v,2),m=T(b);{let $=ne(()=>r(o)?"required":"");De(m,{get class(){return`form-field ${r($)??""}`},name:"batch.timeout",children:Ee,$$slots:{default:(D,I)=>{const C=ne(()=>I.uniqueId);var w=PN(),E=F(w),O=g(E,2);V(()=>{H(E,"for",r(C)),H(O,"id",r(C)),O.required=r(o)}),xt(O,()=>l().batch.timeout,A=>l(l().batch.timeout=A,!0)),p(D,w)}}})}var k=g(b,2),S=T(k);De(S,{class:"form-field",name:"batch.maxBodySize",children:Ee,$$slots:{default:($,D)=>{const I=ne(()=>D.uniqueId);var C=MN(),w=F(C),E=g(w,2);V(()=>{H(w,"for",r(I)),H(E,"id",r(I)),zn(E,(N(l()),M(()=>l().batch.maxBodySize||"")))}),re("input",E,O=>l(l().batch.maxBodySize=O.target.value<<0,!0)),p($,C)}}}),p(c,d)},$$slots:{default:!0,header:(c,u)=>{var d=FN(),f=g(F(d),4);{var h=m=>{var k=LN();p(m,k)},v=m=>{var k=NN();p(m,k)};G(f,m=>{r(o)?m(h):m(v,!1)})}var _=g(f,2);{var b=m=>{var k=RN();Ge(k,(S,$)=>ht?.(S,$),()=>({text:"Has errors",position:"left"})),Et(3,k,()=>jn,()=>({duration:150,start:.7})),p(m,k)};G(_,m=>{r(s)&&m(b)})}p(c,d)}}}),Ve(),a()}var zN=x('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),jN=x('<label>Trusted IP proxy headers</label> <!> <div class="form-field-addon"><button type="button">Clear</button></div> <div class="help-block"><p>Comma separated list of headers such as: <!></p></div>',1),UN=x('<label><span class="txt">IP priority selection</span> <i class="ri-information-line link-hint"></i></label> <!>',1),VN=x(`<div class="alert alert-info m-b-sm"><div class="content"><div class="inline-flex flex-gap-5"><span>Resolved user IP:</span> <strong> </strong> <i class="ri-information-line txt-sm link-hint"></i></div> <br/> <div class="inline-flex flex-gap-5"><span>Detected proxy header:</span> <strong> </strong></div></div></div> <div class="content m-b-sm"><p>When PocketBase is deployed on platforms like Fly or it is accessible through proxies such as
            NGINX, requests from different users will originate from the same IP address (the IP of the proxy
            connecting to your PocketBase app).</p> <p>In this case to retrieve the actual user IP (used for rate limiting, logging, etc.) you need to
            properly configure your proxy and list below the trusted headers that PocketBase could use to
            extract the user IP.</p> <p class="txt-bold">When using such proxy, to avoid spoofing it is recommended to:</p> <ul class="m-t-0 txt-bold"><li>use headers that are controlled only by the proxy and cannot be manually set by the users</li> <li>make sure that the PocketBase server can be accessed only through the proxy</li></ul> <p>You can clear the headers field if PocketBase is not deployed behind a proxy.</p></div> <div class="grid grid-sm"><div class="col-lg-9"><!></div> <div class="col-lg-3"><!></div></div>`,1),BN=x('<i class="ri-alert-line txt-sm txt-warning"></i>'),HN=x('<i class="ri-alert-line txt-sm txt-hint"></i>'),WN=x('<span class="label label-success">Enabled</span>'),YN=x('<span class="label">Disabled</span>'),KN=x('<i class="ri-error-warning-fill txt-danger"></i>'),JN=x('<div class="inline-flex"><i class="ri-route-line"></i> <span class="txt">User IP proxy headers</span> <!></div> <div class="flex-fill"></div> <!> <!>',1);function ZN(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",i),[i,a]=At(),s=P(),o=P(),l=P(),c=P(),u=P(),d=["X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP"];let f=te(e,"formSettings",12),h=te(e,"healthData",8),v=P("");function _(m){f(f().trustedProxy.headers=[m],!0)}const b=[{label:"Use leftmost IP",value:!0},{label:"Use rightmost IP",value:!1}];ie(()=>N(f()),()=>{y(s,JSON.stringify(f()))}),ie(()=>(r(v),r(s)),()=>{r(v)!=r(s)&&y(v,r(s))}),ie(()=>(r(v),r(s)),()=>{y(o,r(v)!=r(s))}),ie(()=>t(),()=>{y(l,!R.isEmpty(t()?.trustedProxy))}),ie(()=>N(f()),()=>{y(c,!R.isEmpty(f().trustedProxy.headers))}),ie(()=>N(h()),()=>{y(u,h().possibleProxyHeader?[h().possibleProxyHeader].concat(d.filter(m=>m!=h().possibleProxyHeader)):d)}),dt(),Be(),Pr(n,{single:!0,children:(m,k)=>{var S=VN(),$=F(S),D=T($),I=T(D),C=g(T(I),2),w=T(C),E=g(C,2);Ge(E,(J,z)=>ht?.(J,z),()=>`Must show your actual IP.
If not, set the correct proxy header.`);var O=g(I,4),A=g(T(O),2),q=T(A),L=g($,4),j=T(L),U=T(j);De(U,{class:"form-field m-b-0",name:"trustedProxy.headers",children:Ee,$$slots:{default:(J,z)=>{const X=ne(()=>z.uniqueId);var oe=jN(),ce=F(oe),le=g(ce,2);ho(le,{get id(){return r(X)},placeholder:"Leave empty to disable",get value(){return f().trustedProxy.headers},set value(ue){f(f().trustedProxy.headers=ue,!0)},$$legacy:!0});var me=g(le,2),_e=T(me);let pe;var Te=g(me,2),Se=T(Te),he=g(T(Se));bt(he,1,()=>r(u),Mt,(ue,ke)=>{var we=zN(),ae=F(we),xe=T(ae);V(()=>$e(xe,r(ke))),re("click",ae,()=>_(r(ke))),p(ue,we)}),V(ue=>{H(ce,"for",r(X)),pe=Re(_e,1,"btn btn-sm btn-hint btn-transparent btn-clear",null,pe,ue)},[()=>({hidden:R.isEmpty(f().trustedProxy.headers)})]),re("click",_e,()=>f(f().trustedProxy.headers=[],!0)),p(J,oe)}}});var W=g(j,2),Y=T(W);De(Y,{class:"form-field m-0",name:"trustedProxy.useLeftmostIP",children:Ee,$$slots:{default:(J,z)=>{const X=ne(()=>z.uniqueId);var oe=UN(),ce=F(oe),le=g(T(ce),2);Ge(le,(_e,pe)=>ht?.(_e,pe),()=>({text:"This is in case the proxy returns more than 1 IP as header value. The rightmost IP is usually considered to be the more trustworthy but this could vary depending on the proxy.",position:"right"}));var me=g(ce,2);On(me,{get items(){return b},get keyOfSelected(){return f().trustedProxy.useLeftmostIP},set keyOfSelected(_e){f(f().trustedProxy.useLeftmostIP=_e,!0)},$$legacy:!0}),V(()=>H(ce,"for",r(X))),p(J,oe)}}}),V(()=>{$e(w,(N(h()),M(()=>h().realIP||"N/A"))),$e(q,(N(h()),M(()=>h().possibleProxyHeader||"N/A")))}),p(m,S)},$$slots:{default:!0,header:(m,k)=>{var S=JN(),$=F(S),D=g(T($),4);{var I=L=>{var j=BN();Ge(j,(U,W)=>ht?.(U,W),()=>`Detected proxy header.
It is recommend to list it as trusted.`),p(L,j)},C=L=>{var j=et(),U=F(j);{var W=Y=>{var J=HN();Ge(J,(z,X)=>ht?.(z,X),()=>"The configured proxy header doesn't match with the detected one."),p(Y,J)};G(U,Y=>{r(c),r(o),N(f()),N(h()),M(()=>r(c)&&!r(o)&&!f().trustedProxy.headers.includes(h().possibleProxyHeader))&&Y(W)},!0)}p(L,j)};G(D,L=>{r(c),N(h()),M(()=>!r(c)&&h().possibleProxyHeader)?L(I):L(C,!1)})}var w=g($,4);{var E=L=>{var j=WN();p(L,j)},O=L=>{var j=YN();p(L,j)};G(w,L=>{r(c)?L(E):L(O,!1)})}var A=g(w,2);{var q=L=>{var j=KN();Ge(j,(U,W)=>ht?.(U,W),()=>({text:"Has errors",position:"left"})),Et(3,j,()=>jn,()=>({duration:150,start:.7})),p(L,j)};G(A,L=>{r(l)&&L(q)})}p(m,S)}}}),Ve(),a()}var GN=x("<option> </option>"),XN=x("<input/> <datalist></datalist>",1);function QN(n,e){const t=Ot(e,["children","$$slots","$$events","$$legacy"]),i=Ot(t,["value","options"]);Ue(e,!1);let a=te(e,"value",12,""),s=te(e,"options",24,()=>[]);const o="list_"+R.randomString(5);Be();var l=XN(),c=F(l);ss(c,()=>({type:(N(i),M(()=>i.type||"text")),list:o,value:a(),...i}),void 0,void 0,void 0,void 0,!0);var u=g(c,2);bt(u,5,s,Mt,(d,f)=>{var h=GN(),v=T(h),_={};V(()=>{$e(v,(r(f),M(()=>r(f).label||""))),_!==(_=(r(f),M(()=>r(f).value)))&&(h.value=(h.__value=(r(f),M(()=>r(f).value)))??"")}),p(d,h)}),V(()=>H(u,"id",o)),re("input",c,d=>{a(d.target.value)}),p(n,l),Ve()}var eR=x('<input type="checkbox"/> <label>Enable <small class="txt-hint">(experimental)</small></label>',1),tR=x('<input type="number" required placeholder="Max requests*" min="1" step="1"/>'),nR=x('<input type="number" required placeholder="Interval*" min="1" step="1"/>'),iR=x('<tr class="rate-limit-row"><td class="col-label"><!></td><td class="col-requests"><!></td><td class="col-duration"><!></td><td class="col-audience"><!></td><td class="col-action"><button type="button" title="Remove rule" aria-label="Remove rule" class="btn btn-xs btn-circle btn-hint btn-transparent"><i class="ri-close-line"></i></button></td></tr>'),rR=x('<table class="rate-limit-table"><thead><tr><th class="col-label">Rate limit label</th><th class="col-requests">Max requests<br/><small>(per IP)</small></th><th class="col-duration">Interval<br/><small>(in seconds)</small></th><th class="col-audience">Targeted users</th><th></th></tr></thead><tbody></tbody></table>'),aR=x('<!> <!> <div class="flex m-t-sm"><button type="button"><i class="ri-add-line"></i> <span class="txt">Add rate limit rule</span></button> <button type="button" class="txt-nowrap txt-sm link-hint"><em>Learn more about the rate limit rules</em></button></div>',1),sR=x('<i class="ri-error-warning-fill txt-danger"></i>'),oR=x('<span class="label label-success">Enabled</span>'),lR=x('<span class="label">Disabled</span>'),cR=x('<div class="inline-flex"><i class="ri-pulse-fill"></i> <span class="txt">Rate limiting</span></div> <div class="flex-fill"></div> <!> <!>',1),uR=x('<em class="txt-hint"> </em>'),dR=x('<li class="m-0"> <!></li>'),fR=x(`<p>The rate limit rules are resolved in the following order (stops on the first match):</p> <ol><li>exact tag (e.g. <code>users:create</code>)</li> <li>wildcard tag (e.g. <code>*:create</code>)</li> <li>METHOD + exact path (e.g. <code>POST /a/b</code>)</li> <li>METHOD + prefix path (e.g. <code>POST /a/b<strong>/</strong></code>)</li> <li>exact path (e.g. <code>/a/b</code>)</li> <li>prefix path (e.g. <code>/a/b<strong>/</strong></code>)</li></ol> <p>In case of multiple rules with the same label but different target user audience (e.g. "guest" vs
        "auth"), only the matching audience rule is taken in consideration.</p> <hr class="m-t-xs m-b-xs"/> <p>The rate limit label could be in one of the following formats:</p> <ul><li class="m-b-sm"><code>[METHOD ]/my/path</code> - full exact route match ( <strong>must be without trailing slash</strong>; "METHOD" is optional). <br/> For example: <ul class="m-0"><li class="m-0"><code>/hello</code> - matches <code>GET /hello</code>, <code>POST /hello</code>, etc.</li> <li class="m-0"><code>POST /hello</code> - matches only <code>POST /hello</code></li></ul></li> <li class="m-b-sm"><code>[METHOD ]/my/prefix<strong>/</strong></code> - path prefix ( <strong>must end with trailing slash;</strong> "METHOD" is optional). For example: <ul class="m-0"><li class="m-0"><code>/hello/</code> - matches <code>GET /hello</code>, <code>POST /hello/a/b/c</code>, etc.</li> <li class="m-0"><code>POST /hello/</code> - matches <code>POST /hello</code>, <code>POST /hello/a/b/c</code>, etc.</li></ul></li> <li><code>collectionName:predefinedTag</code> - targets a specific action of a single collection. To
            apply the rule for all collections you can use the <code>*</code> wildcard. For example: <code>posts:create</code>, <code>users:listAuthMethods</code>, <code>*:auth</code>. <br/> The predifined collection tags are (<em>there should be autocomplete once you start typing</em>): <ul></ul></li></ul>`,1),hR=x('<h4 class="center txt-break">Rate limit label format</h4>'),vR=x('<button type="button" class="btn btn-transparent">Close</button>'),pR=x("<!> <!>",1);function mR(n,e){Ue(e,!1);const t=()=>It(Bn,"$errors",a),i=()=>It(Gn,"$collections",a),[a,s]=At(),o=P();let l=te(e,"formSettings",12);const c=[{value:"",label:"All"},{value:"@guest",label:"Guest only"},{value:"@auth",label:"Auth only"}],u=[{value:"*:list"},{value:"*:view"},{value:"*:create"},{value:"*:update"},{value:"*:delete"},{value:"*:file",description:"targets the files download endpoint"},{value:"*:listAuthMethods"},{value:"*:authRefresh"},{value:"*:auth",description:"targets all auth methods"},{value:"*:authWithPassword"},{value:"*:authWithOAuth2"},{value:"*:authWithOTP"},{value:"*:requestOTP"},{value:"*:requestPasswordReset"},{value:"*:confirmPasswordReset"},{value:"*:requestVerification"},{value:"*:confirmVerification"},{value:"*:requestEmailChange"},{value:"*:confirmEmailChange"}];let d=P(u),f=P();h();async function h(){await hd(),y(d,[]);for(let S of i())S.system||(r(d).push({value:S.name+":list"}),r(d).push({value:S.name+":view"}),S.type!="view"&&(r(d).push({value:S.name+":create"}),r(d).push({value:S.name+":update"}),r(d).push({value:S.name+":delete"})),S.type=="auth"&&(r(d).push({value:S.name+":listAuthMethods"}),r(d).push({value:S.name+":authRefresh"}),r(d).push({value:S.name+":auth"}),r(d).push({value:S.name+":authWithPassword"}),r(d).push({value:S.name+":authWithOAuth2"}),r(d).push({value:S.name+":authWithOTP"}),r(d).push({value:S.name+":requestOTP"}),r(d).push({value:S.name+":requestPasswordReset"}),r(d).push({value:S.name+":confirmPasswordReset"}),r(d).push({value:S.name+":requestVerification"}),r(d).push({value:S.name+":confirmVerification"}),r(d).push({value:S.name+":requestEmailChange"}),r(d).push({value:S.name+":confirmEmailChange"})),S.fields.find($=>$.type=="file")&&r(d).push({value:S.name+":file"}));y(d,r(d).concat(u))}function v(){nn({}),Array.isArray(l().rateLimits.rules)||l(l().rateLimits.rules=[],!0),l().rateLimits.rules.push({label:"",maxRequests:300,duration:10,audience:""}),l(l().rateLimits.rules=l().rateLimits.rules,!0),l().rateLimits.rules.length==1&&l(l().rateLimits.enabled=!0,!0)}function _(S){nn({}),l().rateLimits.rules.splice(S,1),l(l().rateLimits.rules=l().rateLimits.rules,!0),l().rateLimits.rules.length||l(l().rateLimits.enabled=!1,!0)}ie(()=>t(),()=>{y(o,!R.isEmpty(t()?.rateLimits))}),dt(),Be();var b=pR(),m=F(b);Pr(m,{single:!0,children:(S,$)=>{var D=aR(),I=F(D);De(I,{class:"form-field form-field-toggle m-b-xs",name:"rateLimits.enabled",children:Ee,$$slots:{default:(L,j)=>{const U=ne(()=>j.uniqueId);var W=eR(),Y=F(W),J=g(Y,2);V(()=>{H(Y,"id",r(U)),H(J,"for",r(U))}),Xt(Y,()=>l().rateLimits.enabled,z=>l(l().rateLimits.enabled=z,!0)),p(L,W)}}});var C=g(I,2);{var w=L=>{var j=rR(),U=g(T(j));bt(U,5,()=>(N(l()),M(()=>l().rateLimits.rules||[])),Mt,(W,Y,J)=>{var z=iR(),X=T(z),oe=T(X);De(oe,{class:"form-field",name:"rateLimits.rules."+J+".label",inlineError:!0,children:(ue,ke)=>{QN(ue,{required:!0,placeholder:"tag (users:create) or path (/api/)",get options(){return r(d)},get value(){return r(Y).label},set value(we){r(Y).label=we,ma(()=>l())},$$legacy:!0})},$$slots:{default:!0}});var ce=g(X),le=T(ce);De(le,{class:"form-field",name:"rateLimits.rules."+J+".maxRequests",inlineError:!0,children:(ue,ke)=>{var we=tR();xt(we,()=>r(Y).maxRequests,ae=>(r(Y).maxRequests=ae,ma(()=>l()))),p(ue,we)},$$slots:{default:!0}});var me=g(ce),_e=T(me);De(_e,{class:"form-field",name:"rateLimits.rules."+J+".duration",inlineError:!0,children:(ue,ke)=>{var we=nR();xt(we,()=>r(Y).duration,ae=>(r(Y).duration=ae,ma(()=>l()))),p(ue,we)},$$slots:{default:!0}});var pe=g(me),Te=T(pe);De(Te,{class:"form-field",name:"rateLimits.rules."+J+".audience",inlineError:!0,children:(ue,ke)=>{On(ue,{get items(){return c},get keyOfSelected(){return r(Y).audience},set keyOfSelected(we){r(Y).audience=we,ma(()=>l())},$$events:{change:()=>{Zn("rateLimits.rules."+J)}},$$legacy:!0})},$$slots:{default:!0}});var Se=g(pe),he=T(Se);re("click",he,()=>_(J)),p(W,z)}),p(L,j)};G(C,L=>{N(R),N(l()),M(()=>!R.isEmpty(l().rateLimits.rules))&&L(w)})}var E=g(C,2),O=T(E);let A;var q=g(O,2);V(()=>A=Re(O,1,"btn btn-sm btn-secondary m-r-auto",null,A,{"btn-danger":t()?.rateLimits?.rules?.message})),re("click",O,()=>v()),re("click",q,()=>r(f)?.show()),p(S,D)},$$slots:{default:!0,header:(S,$)=>{var D=cR(),I=g(F(D),4);{var C=A=>{var q=sR();Ge(q,(L,j)=>ht?.(L,j),()=>({text:"Has errors",position:"left"})),Et(3,q,()=>jn,()=>({duration:150,start:.7})),p(A,q)};G(I,A=>{r(o)&&A(C)})}var w=g(I,2);{var E=A=>{var q=oR();p(A,q)},O=A=>{var q=lR();p(A,q)};G(w,A=>{N(l()),M(()=>l().rateLimits.enabled)?A(E):A(O,!1)})}p(S,D)}}});var k=g(m,2);pt(pn(k,{children:(S,$)=>{var D=fR(),I=g(F(D),10),C=g(T(I),4),w=g(T(C),14);bt(w,5,()=>u,Mt,(E,O)=>{var A=dR(),q=T(A),L=g(q);{var j=U=>{var W=uR(),Y=T(W);V(()=>$e(Y,`(${r(O),M(()=>r(O).description)??""})`)),p(U,W)};G(L,U=>{r(O),M(()=>r(O).description)&&U(j)})}V(U=>$e(q,`${U??""} `),[()=>(r(O),M(()=>r(O).value.replace("*:",":")))]),p(E,A)}),p(S,D)},$$slots:{default:!0,header:(S,$)=>{var D=hR();p(S,D)},footer:(S,$)=>{var D=vR();re("click",D,()=>r(f)?.hide()),p(S,D)}},$$legacy:!0}),S=>y(f,S),()=>r(f)),p(n,b),Ve(),s()}var gR=x('<div class="loader"></div>'),bR=x('<label>Application name</label> <input type="text" required/>',1),yR=x('<label>Application URL</label> <input type="text" required/>',1),_R=x('<input type="checkbox"/> <label><span class="txt">Hide collection create and edit controls</span> <i class="ri-information-line link-hint"></i></label>',1),xR=x('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Cancel</span></button>'),wR=x('<div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"><div class="accordions"><!> <!> <!></div></div> <div class="col-lg-12"><!></div></div> <div class="flex m-t-base"><div class="flex-fill"></div> <!> <button type="submit"><span class="txt">Save changes</span></button></div>',1),kR=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item">Application</div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><!></form></div>',1),SR=x("<!> <!>",1);function TR(n,e){Ue(e,!1);const[t,i]=At(),a=P();Kn(In,"Application settings");let s=P({}),o=P({}),l=P(!1),c=P(!1),u=P(""),d=P({});h();async function f(){try{y(d,(await Ae.health.check()||{})?.data||{})}catch(D){console.warn("Health check failed:",D)}}async function h(){y(l,!0);try{const D=await Ae.settings.getAll()||{};_(D),await f()}catch(D){Ae.error(D)}y(l,!1)}async function v(){if(!(r(c)||!r(a))){y(c,!0),ft(o,r(o).rateLimits.rules=m(r(o).rateLimits.rules));try{const D=await Ae.settings.update(R.filterRedactedProps(r(o)));_(D),await f(),nn({}),hn("Successfully saved application settings.")}catch(D){Ae.error(D)}y(c,!1)}}function _(D={}){Kn(mu,D?.meta?.appName),Kn(So,!!D?.meta?.hideControls),y(o,{meta:D?.meta||{},batch:D.batch||{},trustedProxy:D.trustedProxy||{headers:[]},rateLimits:D.rateLimits||{rules:[]}}),m(r(o).rateLimits.rules),y(s,JSON.parse(JSON.stringify(r(o))))}function b(){y(o,JSON.parse(JSON.stringify(r(s)||{})))}function m(D){if(!D)return;let I=[{},{}];return D.sort((C,w)=>{I[0].length=C.label.length,I[0].isTag=C.label.includes(":")||!C.label.includes("/"),I[0].isWildcardTag=I[0].isTag&&C.label.startsWith("*"),I[0].isExactTag=I[0].isTag&&!I[0].isWildcardTag,I[0].isPrefix=!I[0].isTag&&C.label.endsWith("/"),I[0].hasMethod=!I[0].isTag&&C.label.includes(" /"),I[1].length=w.label.length,I[1].isTag=w.label.includes(":")||!w.label.includes("/"),I[1].isWildcardTag=I[1].isTag&&w.label.startsWith("*"),I[1].isExactTag=I[1].isTag&&!I[1].isWildcardTag,I[1].isPrefix=!I[1].isTag&&w.label.endsWith("/"),I[1].hasMethod=!I[1].isTag&&w.label.includes(" /");for(let E of I)E.priority=0,E.isTag?(E.priority+=1e3,E.isExactTag?E.priority+=10:E.priority+=5):(E.hasMethod&&(E.priority+=10),E.isPrefix||(E.priority+=5));return I[0].isPrefix&&I[1].isPrefix&&(I[0].hasMethod&&I[1].hasMethod||!I[0].hasMethod&&!I[1].hasMethod)&&(I[0].length>I[1].length?I[0].priority+=1:I[0].length<I[1].length&&(I[1].priority+=1)),I[0].priority>I[1].priority?-1:I[0].priority<I[1].priority?1:0}),D}ie(()=>r(s),()=>{y(u,JSON.stringify(r(s)))}),ie(()=>(r(u),r(o)),()=>{y(a,r(u)!=JSON.stringify(r(o)))}),dt(),Be();var k=SR(),S=F(k);Ra(S);var $=g(S,2);Ai($,{children:(D,I)=>{var C=kR(),w=g(F(C),2),E=T(w),O=T(E);{var A=L=>{var j=gR();p(L,j)},q=L=>{var j=wR(),U=F(j),W=T(U),Y=T(W);De(Y,{class:"form-field required",name:"meta.appName",children:Ee,$$slots:{default:(we,ae)=>{const xe=ne(()=>ae.uniqueId);var se=bR(),ge=F(se),ee=g(ge,2);V(()=>{H(ge,"for",r(xe)),H(ee,"id",r(xe))}),xt(ee,()=>r(o).meta.appName,ve=>ft(o,r(o).meta.appName=ve)),p(we,se)}}});var J=g(W,2),z=T(J);De(z,{class:"form-field required",name:"meta.appURL",children:Ee,$$slots:{default:(we,ae)=>{const xe=ne(()=>ae.uniqueId);var se=yR(),ge=F(se),ee=g(ge,2);V(()=>{H(ge,"for",r(xe)),H(ee,"id",r(xe))}),xt(ee,()=>r(o).meta.appURL,ve=>ft(o,r(o).meta.appURL=ve)),p(we,se)}}});var X=g(J,2),oe=T(X),ce=T(oe);ZN(ce,{get healthData(){return r(d)},get formSettings(){return r(o)},set formSettings(we){y(o,we)},$$legacy:!0});var le=g(ce,2);mR(le,{get formSettings(){return r(o)},set formSettings(we){y(o,we)},$$legacy:!0});var me=g(le,2);qN(me,{get formSettings(){return r(o)},set formSettings(we){y(o,we)},$$legacy:!0});var _e=g(X,2),pe=T(_e);De(pe,{class:"form-field form-field-toggle m-0",name:"meta.hideControls",children:Ee,$$slots:{default:(we,ae)=>{const xe=ne(()=>ae.uniqueId);var se=_R(),ge=F(se),ee=g(ge,2),ve=g(T(ee),2);Ge(ve,(Ce,Ie)=>ht?.(Ce,Ie),()=>({text:"This could prevent making accidental schema changes when in production environment.",position:"right"})),V(()=>{H(ge,"id",r(xe)),H(ee,"for",r(xe))}),Xt(ge,()=>r(o).meta.hideControls,Ce=>ft(o,r(o).meta.hideControls=Ce)),p(we,se)}}});var Te=g(U,2),Se=g(T(Te),2);{var he=we=>{var ae=xR();V(()=>ae.disabled=r(c)),re("click",ae,()=>b()),p(we,ae)};G(Se,we=>{r(a)&&we(he)})}var ue=g(Se,2);let ke;V(()=>{ke=Re(ue,1,"btn btn-expanded",null,ke,{"btn-loading":r(c)}),ue.disabled=!r(a)||r(c)}),re("click",ue,()=>v()),p(L,j)};G(O,L=>{r(l)?L(A):L(q,!1)})}re("submit",E,Ct(v)),p(D,C)},$$slots:{default:!0}}),p(n,k),Ve(),i()}var $R=x('<label>Backup name</label> <input type="text" pattern="^[a-z0-9_-]+\\.zip$"/> <em class="help-block">Must be in the format [a-z0-9_-].zip</em>',1),IR=x(`<div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content"><p>Please note that during the backup other concurrent write requests may fail since the
                database will be temporary "locked" (this usually happens only during the ZIP generation).</p> <p class="txt-bold">If you are using S3 storage for the collections file upload, you'll have to backup them
                separately since they are not locally stored and will not be included in the final backup!</p></div></div> <form autocomplete="off"><!></form>`,1),CR=x('<h4 class="center txt-break">Initialize new backup</h4>'),ER=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Start backup</span></button>',1);function OR(n,e){Ue(e,!1);const t=qt(),i="backup_create_"+R.randomString(5);let a=P(),s=P(""),o=P(!1),l;function c(h){nn({}),y(o,!1),y(s,h||""),r(a)?.show()}function u(){return r(a)?.hide()}async function d(){if(!r(o)){y(o,!0),clearTimeout(l),l=setTimeout(()=>{u()},1500);try{await Ae.backups.create(r(s),{$cancelKey:i}),y(o,!1),u(),t("submit"),hn("Successfully generated new backup.")}catch(h){h.isAbort||Ae.error(h)}clearTimeout(l),y(o,!1)}}yo(()=>{clearTimeout(l)});var f={show:c,hide:u};return Be(),pt(pn(n,{class:"backup-create-panel",beforeOpen:()=>r(o)?(ls("A backup has already been started, please wait."),!1):!0,beforeHide:()=>(r(o)&&ls("The backup was started but may take a while to complete. You can come back later.",4500),!0),popup:!0,$$events:{show(h){lt.call(this,e,h)},hide(h){lt.call(this,e,h)}},children:(h,v)=>{var _=IR(),b=g(F(_),2),m=T(b);De(m,{class:"form-field m-0",name:"name",children:Ee,$$slots:{default:(k,S)=>{const $=ne(()=>S.uniqueId);var D=$R(),I=F(D),C=g(I,2);H(C,"placeholder","Leave empty to autogenerate"),V(()=>{H(I,"for",r($)),H(C,"id",r($))}),xt(C,()=>r(s),w=>y(s,w)),p(k,D)}}}),V(()=>H(b,"id",i)),re("submit",b,Ct(d)),p(h,_)},$$slots:{default:!0,header:(h,v)=>{var _=CR();p(h,_)},footer:(h,v)=>{var _=ER(),b=F(_),m=g(b,2);let k;V(()=>{b.disabled=r(o),H(m,"form",i),k=Re(m,1,"btn btn-expanded",null,k,{"btn-loading":r(o)}),m.disabled=r(o)}),re("click",b,u),p(h,_)}},$$legacy:!0}),h=>y(a,h),()=>r(a)),_t(e,"show",c),_t(e,"hide",u),Ve(f)}var DR=x('<label>Backup name</label> <input type="text" required/>',1),PR=x(`<div class="alert alert-danger"><div class="icon"><i class="ri-alert-line"></i></div> <div class="content"><p class="txt-bold">Please proceed with caution and use it only with trusted backups!</p> <p>Backup restore is experimental and works only on UNIX based systems.</p> <p>The restore operation will attempt to replace your existing <code>pb_data</code> with the one from
                the backup and will restart the application process.</p> <p>This means that on success all of your data (including app settings, users, superusers, etc.)
                will be replaced with the ones from the backup.</p> <p>Nothing will happen if the backup is invalid (ex. missing <code>data.db</code> file).</p> <p>Below is an oversimplified version of the restore flow:</p> <ol><li>Replaces the current <code>pb_data</code> with the content from the backup</li> <li>Triggers app restart</li> <li>Applies all migrations that are missing in the restored <code>pb_data</code></li> <li>Initializes the app server as usual</li></ol></div></div> <div class="content m-b-xs">Type the backup name <div class="label"><span class="txt"> </span> <!></div> to confirm:</div> <form autocomplete="off"><!></form>`,1),MR=x('<h4 class="popup-title txt-ellipsis svelte-1w0b49c">Restore <strong> </strong></h4>'),AR=x('<button type="button" class="btn btn-transparent">Cancel</button> <button type="submit"><span class="txt">Restore backup</span></button>',1);function LR(n,e){Ue(e,!1);const t=P(),i="backup_restore_"+R.randomString(5);let a=P(),s=P(""),o=P(""),l=P(!1),c=null;function u(v){nn({}),y(o,""),y(s,v),y(l,!1),r(a)?.show()}function d(){return r(a)?.hide()}async function f(){if(!(!r(t)||r(l))){clearTimeout(c),y(l,!0);try{await Ae.backups.restore(r(s)),c=setTimeout(()=>{window.location.reload()},2e3)}catch(v){clearTimeout(c),v?.isAbort||(y(l,!1),dr(v.response?.message||v.message))}}}yo(()=>{clearTimeout(c)}),ie(()=>(r(o),r(s)),()=>{y(t,r(o)!=""&&r(s)==r(o))}),dt();var h={show:u,hide:d};Be();{let v=ne(()=>!r(l)),_=ne(()=>!r(l));pt(pn(n,{class:"backup-restore-panel",get overlayClose(){return r(v)},get escClose(){return r(_)},beforeHide:()=>!r(l),popup:!0,$$events:{show(b){lt.call(this,e,b)},hide(b){lt.call(this,e,b)}},children:(b,m)=>{var k=PR(),S=g(F(k),2),$=g(T(S)),D=T($),I=T(D),C=g(D,2);ar(C,{get value(){return r(s)}});var w=g(S,2),E=T(w);De(E,{class:"form-field required m-0",name:"name",children:Ee,$$slots:{default:(O,A)=>{const q=ne(()=>A.uniqueId);var L=DR(),j=F(L),U=g(j,2);V(()=>{H(j,"for",r(q)),H(U,"id",r(q))}),xt(U,()=>r(o),W=>y(o,W)),p(O,L)}}}),V(()=>{$e(I,r(s)),H(w,"id",i)}),re("submit",w,Ct(f)),p(b,k)},$$slots:{default:!0,header:(b,m)=>{var k=MR(),S=g(T(k)),$=T(S);V(()=>$e($,r(s))),p(b,k)},footer:(b,m)=>{var k=AR(),S=F(k),$=g(S,2);let D;V(()=>{S.disabled=r(l),H($,"form",i),D=Re($,1,"btn btn-expanded",null,D,{"btn-loading":r(l)}),$.disabled=!r(t)||r(l)}),re("click",S,d),p(b,k)}},$$legacy:!0}),b=>y(a,b),()=>r(a))}return _t(e,"show",u),_t(e,"hide",d),Ve(h)}var NR=x('<div class="list-item list-item-loader svelte-vt8muj"><span class="skeleton-loader"></span></div>'),RR=x('<div class="list-item svelte-vt8muj"><i class="ri-folder-zip-line"></i> <div class="content"><span class="name backup-name svelte-vt8muj"> </span> <span class="size txt-hint txt-nowrap"> </span></div> <div class="actions nonintrusive"><button type="button" aria-label="Download"><i class="ri-download-line"></i></button> <button type="button" class="btn btn-sm btn-circle btn-hint btn-transparent" aria-label="Restore"><i class="ri-restart-line"></i></button> <button type="button" aria-label="Delete"><i class="ri-delete-bin-7-line"></i></button></div></div>'),FR=x('<div class="list-item list-item-placeholder svelte-vt8muj"><span class="txt">No backups yet.</span></div>'),qR=x('<i class="ri-play-circle-line"></i> <span class="txt">Initialize new backup</span>',1),zR=x('<span class="loader loader-sm"></span> <span class="txt">Backup/restore operation is in process</span>',1),jR=x('<div class="list list-compact"><div class="list-content svelte-vt8muj"><!></div> <div class="list-item list-item-btn"><button type="button" class="btn btn-block btn-transparent"><!></button></div></div> <!> <!>',1);function UR(n,e){Ue(e,!1);let t=P(),i=P(),a=P([]),s=P(!1),o=P({}),l=P({}),c=P(!0);u(),v();async function u(){y(s,!0);try{y(a,await Ae.backups.getFullList()),r(a).sort((L,j)=>L.modified<j.modified?1:L.modified>j.modified?-1:0),y(s,!1)}catch(L){L.isAbort||(Ae.error(L),y(s,!1))}}async function d(L){if(!r(o)[L]){ft(o,r(o)[L]=!0);try{const j=await Ae.getSuperuserFileToken();R.download(Ae.backups.getDownloadURL(j,L))}catch(j){j.isAbort||Ae.error(j)}delete r(o)[L],y(o,r(o))}}function f(L){qn(`Do you really want to delete ${L}?`,()=>h(L))}async function h(L){if(!r(l)[L]){ft(l,r(l)[L]=!0);try{await Ae.backups.delete(L),u(),hn(`Successfully deleted ${L}.`)}catch(j){j.isAbort||Ae.error(j)}delete r(l)[L],y(l,r(l))}}async function v(){try{const L=await Ae.health.check({$autoCancel:!1}),j=r(c);y(c,L?.data?.canBackup||!1),j!=r(c)&&r(c)&&u()}catch{}}un(()=>{let L=setInterval(()=>{v()},3e3);return()=>{clearInterval(L)}});var _={loadBackups:u};Be();var b=jR(),m=F(b),k=T(m),S=T(k);{var $=L=>{var j=et(),U=F(j);bt(U,1,()=>Array(r(a).length||1),Mt,(W,Y)=>{var J=NR();p(W,J)}),p(L,j)},D=L=>{var j=et(),U=F(j);bt(U,1,()=>r(a),W=>W.key,(W,Y)=>{var J=RR(),z=g(T(J),2),X=T(z),oe=T(X),ce=g(X,2),le=T(ce),me=g(z,2),_e=T(me);let pe;Ge(_e,(ue,ke)=>ht?.(ue,ke),()=>"Download"),Nt(()=>re("click",_e,Ct(()=>d(r(Y).key))));var Te=g(_e,2);Ge(Te,(ue,ke)=>ht?.(ue,ke),()=>"Restore"),Nt(()=>re("click",Te,Ct(()=>r(i).show(r(Y).key))));var Se=g(Te,2);let he;Ge(Se,(ue,ke)=>ht?.(ue,ke),()=>"Delete"),Nt(()=>re("click",Se,Ct(()=>f(r(Y).key)))),V(ue=>{H(X,"title",r(Y).key),$e(oe,r(Y).key),$e(le,`(${ue??""})`),pe=Re(_e,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,pe,{"btn-loading":r(o)[r(Y).key]}),_e.disabled=r(l)[r(Y).key]||r(o)[r(Y).key],Te.disabled=r(l)[r(Y).key],he=Re(Se,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,he,{"btn-loading":r(l)[r(Y).key]}),Se.disabled=r(l)[r(Y).key]},[()=>R.formattedFileSize(r(Y).size)]),Et(3,J,()=>vn,()=>({duration:150})),p(W,J)},W=>{var Y=FR();p(W,Y)}),p(L,j)};G(S,L=>{r(s)?L($):L(D,!1)})}var I=g(k,2),C=T(I),w=T(C);{var E=L=>{var j=qR();p(L,j)},O=L=>{var j=zR();p(L,j)};G(w,L=>{r(c)?L(E):L(O,!1)})}var A=g(m,2);pt(OR(A,{$$events:{submit:()=>{u()}},$$legacy:!0}),L=>y(t,L),()=>r(t));var q=g(A,2);return pt(LR(q,{$$legacy:!0}),L=>y(i,L),()=>r(i)),V(()=>C.disabled=r(s)||!r(c)),re("click",C,()=>r(t)?.show()),p(n,b),_t(e,"loadBackups",u),Ve(_)}var VR=x('<input type="checkbox" required/> <label> </label>',1),BR=x('<label>Endpoint</label> <input type="text" required/>',1),HR=x('<label>Bucket</label> <input type="text" required/>',1),WR=x('<label>Region</label> <input type="text" required/>',1),YR=x('<label>Access key</label> <input type="text" required/>',1),KR=x("<label>Secret</label> <!>",1),JR=x('<input type="checkbox"/> <label><span class="txt">Force path-style addressing</span> <i class="ri-information-line link-hint"></i></label>',1),ZR=x('<div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"><!></div> <div class="col-lg-12"></div></div>'),GR=x("<!> <!> <!>",1);function Kg(n,e){Ue(e,!1);const t="s3_test_request";let i=te(e,"originalConfig",24,()=>({})),a=te(e,"config",28,()=>({})),s=te(e,"configKey",8,"s3"),o=te(e,"toggleLabel",8,"Enable S3"),l=te(e,"testFilesystem",8,"storage"),c=te(e,"testError",12,null),u=te(e,"isTesting",12,!1),d=null,f=null,h=P(!1);function v(){y(h,!!i()?.accessKey)}function _(I){u(!0),clearTimeout(f),f=setTimeout(()=>{b()},I)}async function b(){if(c(null),!a().enabled)return u(!1),c();Ae.cancelRequest(t),clearTimeout(d),d=setTimeout(()=>{Ae.cancelRequest(t),c(new Error("S3 test connection timeout.")),u(!1)},3e4),u(!0);let I;try{await Ae.settings.testS3(l(),{$cancelKey:t})}catch(C){I=C}return I?.isAbort||(c(I),u(!1),clearTimeout(d)),c()}un(()=>()=>{clearTimeout(d),clearTimeout(f)}),ie(()=>N(i()),()=>{i()?.enabled&&(v(),_(100))}),ie(()=>(N(a()),N(s())),()=>{a().enabled||Zn(s())}),dt(),Be();var m=GR(),k=F(m);De(k,{class:"form-field form-field-toggle",children:Ee,$$slots:{default:(I,C)=>{const w=ne(()=>C.uniqueId);var E=VR(),O=F(E),A=g(O,2),q=T(A);V(()=>{H(O,"id",r(w)),H(A,"for",r(w)),$e(q,o())}),Xt(O,()=>a().enabled,L=>a(a().enabled=L,!0)),p(I,E)}}});var S=g(k,2);Zt(S,e,"default",{get isTesting(){return u()},get testError(){return c()},get enabled(){return N(a()),M(()=>a().enabled)}},null);var $=g(S,2);{var D=I=>{var C=ZR(),w=T(C),E=T(w);De(E,{class:"form-field required",get name(){return`${s()??""}.endpoint`},children:Ee,$$slots:{default:(X,oe)=>{const ce=ne(()=>oe.uniqueId);var le=BR(),me=F(le),_e=g(me,2);V(()=>{H(me,"for",r(ce)),H(_e,"id",r(ce))}),xt(_e,()=>a().endpoint,pe=>a(a().endpoint=pe,!0)),p(X,le)}}});var O=g(w,2),A=T(O);De(A,{class:"form-field required",get name(){return`${s()??""}.bucket`},children:Ee,$$slots:{default:(X,oe)=>{const ce=ne(()=>oe.uniqueId);var le=HR(),me=F(le),_e=g(me,2);V(()=>{H(me,"for",r(ce)),H(_e,"id",r(ce))}),xt(_e,()=>a().bucket,pe=>a(a().bucket=pe,!0)),p(X,le)}}});var q=g(O,2),L=T(q);De(L,{class:"form-field required",get name(){return`${s()??""}.region`},children:Ee,$$slots:{default:(X,oe)=>{const ce=ne(()=>oe.uniqueId);var le=WR(),me=F(le),_e=g(me,2);V(()=>{H(me,"for",r(ce)),H(_e,"id",r(ce))}),xt(_e,()=>a().region,pe=>a(a().region=pe,!0)),p(X,le)}}});var j=g(q,2),U=T(j);De(U,{class:"form-field required",get name(){return`${s()??""}.accessKey`},children:Ee,$$slots:{default:(X,oe)=>{const ce=ne(()=>oe.uniqueId);var le=YR(),me=F(le),_e=g(me,2);V(()=>{H(me,"for",r(ce)),H(_e,"id",r(ce))}),xt(_e,()=>a().accessKey,pe=>a(a().accessKey=pe,!0)),p(X,le)}}});var W=g(j,2),Y=T(W);De(Y,{class:"form-field required",get name(){return`${s()??""}.secret`},children:Ee,$$slots:{default:(X,oe)=>{const ce=ne(()=>oe.uniqueId);var le=KR(),me=F(le),_e=g(me,2);Md(_e,{required:!0,get id(){return r(ce)},get mask(){return r(h)},set mask(pe){y(h,pe)},get value(){return a().secret},set value(pe){a(a().secret=pe,!0)},$$legacy:!0}),V(()=>H(me,"for",r(ce))),p(X,le)}}});var J=g(W,2),z=T(J);De(z,{class:"form-field",get name(){return`${s()??""}.forcePathStyle`},children:Ee,$$slots:{default:(X,oe)=>{const ce=ne(()=>oe.uniqueId);var le=JR(),me=F(le),_e=g(me,2),pe=g(T(_e),2);Ge(pe,(Te,Se)=>ht?.(Te,Se),()=>({text:'Forces the request to use path-style addressing, eg. "https://s3.amazonaws.com/BUCKET/KEY" instead of the default "https://BUCKET.s3.amazonaws.com/KEY".',position:"top"})),V(()=>{H(me,"id",r(ce)),H(_e,"for",r(ce))}),Xt(me,()=>a().forcePathStyle,Te=>a(a().forcePathStyle=Te,!0)),p(X,le)}}}),Et(3,C,()=>vn,()=>({duration:150})),p(I,C)};G($,I=>{N(a()),M(()=>a().enabled)&&I(D)})}p(n,m),Ve()}var XR=x('<button type="button" aria-label="Upload backup"><i class="ri-upload-cloud-line"></i></button> <input type="file" accept="application/zip" class="hidden"/>',1);function QR(n,e){Ue(e,!1);const t=qt(),i="upload_backup";let a=te(e,"class",8,""),s=P(),o=P(!1);function l(){r(s)&&ft(s,r(s).value="")}function c(_){_&&qn(`Note that we don't perform validations for the uploaded backup files. Proceed with caution and only if you trust the source.

Do you really want to upload "${_.name}"?`,()=>{u(_)},()=>{l()})}async function u(_){if(r(o)||!_)return;y(o,!0);const b=new FormData;b.set("file",_);try{await Ae.backups.upload(b,{requestKey:i}),y(o,!1),t("success"),hn("Successfully uploaded a new backup.")}catch(m){m.isAbort||(y(o,!1),m.response?.data?.file?.message?dr(m.response.data.file.message):Ae.error(m))}l()}yo(()=>{Ae.cancelRequest(i)}),Be();var d=XR(),f=F(d);let h;Ge(f,(_,b)=>ht?.(_,b),()=>"Upload backup"),Nt(()=>re("click",f,()=>r(s)?.click()));var v=g(f,2);pt(v,_=>y(s,_),()=>r(s)),V(()=>h=Re(f,1,`btn btn-circle btn-transparent ${a()??""}`,null,h,{"btn-loading":r(o),"btn-disabled":r(o)})),re("change",v,_=>{c(_?.target?.files?.[0])}),p(n,d),Ve()}var eF=x('<i class="ri-arrow-up-s-line"></i>'),tF=x('<i class="ri-arrow-down-s-line"></i>'),nF=x('<input type="checkbox"/> <label>Enable auto backups</label>',1),iF=x('<button type="button" class="dropdown-item closable"><span class="txt">Every day at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every sunday at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every Mon and Wed at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every first day of the month at 00:00h</span></button>',1),rF=x('<label>Cron expression</label> <input required type="text" class="txt-lg txt-mono" placeholder="* * * * *"/> <div class="form-field-addon"><button type="button" class="btn btn-sm btn-outline p-r-0"><span class="txt">Presets</span> <i class="ri-arrow-drop-down-fill"></i> <!></button></div> <div class="help-block"><p>Supports numeric list, steps, ranges or <span class="link-primary">macros</span>. <br/> The timezone is in UTC.</p></div>',1),aF=x('<label>Max @auto backups to keep</label> <input type="number" min="1"/>',1),sF=x('<div class="block"><div class="grid p-t-base p-b-sm"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div></div></div>'),oF=x('<span class="loader loader-sm"></span>'),lF=x('<div class="label label-sm label-warning entrance-right"><i class="ri-error-warning-line txt-warning"></i> <span class="txt">Failed to establish S3 connection</span></div>'),cF=x('<div class="label label-sm label-success entrance-right"><i class="ri-checkbox-circle-line txt-success"></i> <span class="txt">S3 connected successfully</span></div>'),uF=x('<button type="button" class="btn btn-hint btn-transparent"><span class="txt">Reset</span></button>'),dF=x('<form class="block" autocomplete="off"><!> <!> <div class="clearfix m-b-base"></div> <!> <div class="flex"><div class="flex-fill"></div> <!> <!> <button type="submit"><span class="txt">Save changes</span></button></div></form>'),fF=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel" autocomplete="off"><div class="flex m-b-sm flex-gap-10"><span class="txt-xl">Backup and restore your PocketBase data</span> <!> <!></div> <!> <hr/> <button type="button"><span class="txt">Backups options</span> <!></button> <!></div></div>',1),hF=x("<!> <!>",1);function vF(n,e){Ue(e,!1);const t=()=>It(In,"$pageTitle",i),[i,a]=At(),s=P();Kn(In,"Backups");let o=P(),l=P({}),c=P({}),u=P(!1),d=P(!1),f=P(""),h=P(!1),v=P(!1),_=P(!1),b=P(null);m();async function m(){y(u,!0);try{const E=await Ae.settings.getAll()||{};S(E)}catch(E){Ae.error(E)}y(u,!1)}async function k(){if(!(r(d)||!r(s))){y(d,!0);try{const E=await Ae.settings.update(R.filterRedactedProps(r(c)));nn({}),await D(),S(E),hn("Successfully saved application settings.")}catch(E){Ae.error(E)}y(d,!1)}}function S(E={}){y(c,{backups:E?.backups||{}}),y(h,r(c).backups.cron!=""),y(l,JSON.parse(JSON.stringify(r(c))))}function $(){y(c,JSON.parse(JSON.stringify(r(l)||{backups:{}}))),y(h,r(c).backups.cron!="")}async function D(){return r(o)?.loadBackups()}ie(()=>r(l),()=>{y(f,JSON.stringify(r(l)))}),ie(()=>(r(f),r(c)),()=>{y(s,r(f)!=JSON.stringify(r(c)))}),ie(()=>(r(h),r(c),Zn),()=>{!r(h)&&r(c)?.backups?.cron&&(Zn("backups.cron"),ft(c,r(c).backups.cron=""))}),dt(),Be();var I=hF(),C=F(I);Ra(C);var w=g(C,2);Ai(w,{children:(E,O)=>{var A=fF(),q=F(A),L=T(q),j=g(T(L),2),U=T(j),W=g(q,2),Y=T(W),J=T(Y),z=g(T(J),2);Zl(z,{class:"btn-sm",tooltip:"Refresh",$$events:{refresh:D}});var X=g(z,2);QR(X,{class:"btn-sm",$$events:{success:D}});var oe=g(J,2);pt(UR(oe,{$$legacy:!0}),he=>y(o,he),()=>r(o));var ce=g(oe,4);let le;var me=g(T(ce),2);{var _e=he=>{var ue=eF();p(he,ue)},pe=he=>{var ue=tF();p(he,ue)};G(me,he=>{r(v)?he(_e):he(pe,!1)})}var Te=g(ce,2);{var Se=he=>{var ue=dF(),ke=T(ue);De(ke,{class:"form-field form-field-toggle m-t-base m-b-0",children:Ee,$$slots:{default:(qe,je)=>{const rt=ne(()=>je.uniqueId);var be=nF(),Le=F(be),Ke=g(Le,2);V(()=>{H(Le,"id",r(rt)),H(Ke,"for",r(rt))}),Xt(Le,()=>r(h),st=>y(h,st)),p(qe,be)}}});var we=g(ke,2);{var ae=qe=>{var je=sF(),rt=T(je),be=T(rt),Le=T(be);De(Le,{class:"form-field required",name:"backups.cron",children:Ee,$$slots:{default:(it,He)=>{const Je=ne(()=>He.uniqueId);var Fe=rF(),Me=F(Fe),Ne=g(Me,2);Wi(Ne,(r(l),M(()=>!r(l)?.backups?.cron)));var Ze=g(Ne,2),Xe=T(Ze),vt=g(T(Xe),4);Jn(vt,{class:"dropdown dropdown-nowrap dropdown-right",children:(mt,gt)=>{var nt=iF(),Oe=F(nt),B=g(Oe,2),Z=g(B,2),de=g(Z,2);re("click",Oe,()=>{ft(c,r(c).backups.cron="0 0 * * *")}),re("click",B,()=>{ft(c,r(c).backups.cron="0 0 * * 0")}),re("click",Z,()=>{ft(c,r(c).backups.cron="0 0 * * 1,3")}),re("click",de,()=>{ft(c,r(c).backups.cron="0 0 1 * *")}),p(mt,nt)},$$slots:{default:!0}});var tt=g(Ze,2),We=T(tt),Qe=g(T(We));Ge(Qe,(mt,gt)=>ht?.(mt,gt),()=>`@yearly
@annually
@monthly
@weekly
@daily
@midnight
@hourly`),V(()=>{H(Me,"for",r(Je)),H(Ne,"id",r(Je))}),xt(Ne,()=>r(c).backups.cron,mt=>ft(c,r(c).backups.cron=mt)),p(it,Fe)}}});var Ke=g(be,2),st=T(Ke);De(st,{class:"form-field required",name:"backups.cronMaxKeep",children:Ee,$$slots:{default:(it,He)=>{const Je=ne(()=>He.uniqueId);var Fe=aF(),Me=F(Fe),Ne=g(Me,2);V(()=>{H(Me,"for",r(Je)),H(Ne,"id",r(Je))}),xt(Ne,()=>r(c).backups.cronMaxKeep,Ze=>ft(c,r(c).backups.cronMaxKeep=Ze)),p(it,Fe)}}}),Et(3,je,()=>vn,()=>({duration:150})),p(qe,je)};G(we,qe=>{r(h)&&qe(ae)})}var xe=g(we,4);{let qe=ne(()=>(r(l),M(()=>r(l).backups?.s3)));Kg(xe,{toggleLabel:"Store backups in S3 storage",testFilesystem:"backups",configKey:"backups.s3",get originalConfig(){return r(qe)},get config(){return r(c).backups.s3},set config(je){ft(c,r(c).backups.s3=je)},get isTesting(){return r(_)},set isTesting(je){y(_,je)},get testError(){return r(b)},set testError(je){y(b,je)},$$legacy:!0})}var se=g(xe,2),ge=g(T(se),2);{var ee=qe=>{var je=et(),rt=F(je);{var be=Ke=>{var st=oF();p(Ke,st)},Le=Ke=>{var st=et(),it=F(st);{var He=Fe=>{var Me=lF();Ge(Me,(Ne,Ze)=>ht?.(Ne,Ze),()=>r(b).data?.message),p(Fe,Me)},Je=Fe=>{var Me=cF();p(Fe,Me)};G(it,Fe=>{r(b)?Fe(He):Fe(Je,!1)},!0)}p(Ke,st)};G(rt,Ke=>{r(_)?Ke(be):Ke(Le,!1)})}p(qe,je)};G(ge,qe=>{r(c),r(s),r(d),M(()=>r(c).backups?.s3?.enabled&&!r(s)&&!r(d))&&qe(ee)})}var ve=g(ge,2);{var Ce=qe=>{var je=uF();V(()=>je.disabled=!r(s)||r(d)),re("click",je,()=>$()),p(qe,je)};G(ve,qe=>{r(s)&&qe(Ce)})}var Ie=g(ve,2);let ze;V(()=>{ze=Re(Ie,1,"btn btn-expanded",null,ze,{"btn-loading":r(d)}),Ie.disabled=!r(s)||r(d)}),re("click",Ie,()=>k()),re("submit",ue,Ct(k)),Et(3,ue,()=>vn,()=>({duration:150})),p(he,ue)};G(Te,he=>{r(v)&&!r(u)&&he(Se)})}V(()=>{$e(U,t()),le=Re(ce,1,"btn btn-secondary",null,le,{"btn-loading":r(u)}),ce.disabled=r(u)}),re("click",ce,()=>y(v,!r(v))),re("submit",Y,Ct(k)),p(E,A)},$$slots:{default:!0}}),p(n,I),Ve(),a()}var pF=x('<div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div>',1),mF=x('<div class="list-item"><div class="content"><span class="txt"> </span></div> <span class="txt-hint txt-nowrap txt-mono cron-expr m-r-xs"> </span> <div class="actions"><button type="button" aria-label="Run"><i class="ri-play-large-line"></i></button></div></div>'),gF=x('<div class="list-item list-item-placeholder"><span class="txt">No app crons found.</span></div>'),bF=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel" autocomplete="off"><div class="flex m-b-sm flex-gap-10"><span class="txt-xl">Registered app cron jobs</span> <!></div> <div class="list list-compact"><div class="list-content"><!></div></div> <p class="txt-hint m-t-xs">App cron jobs can be registered only programmatically with <a target="_blank" rel="noopener noreferrer">Go</a> or <a target="_blank" rel="noopener noreferrer">JavaScript</a>.</p></div></div>',1),yF=x("<!> <!>",1);function _F(n,e){Ue(e,!1);const t=()=>It(In,"$pageTitle",i),[i,a]=At();Kn(In,"Crons");let s=P([]),o=P(!1),l=P({});c();async function c(){y(o,!0);try{y(s,await Ae.crons.getFullList()),y(o,!1)}catch(v){v.isAbort||(Ae.error(v),y(o,!1))}}async function u(v){ft(l,r(l)[v]=!0);try{await Ae.crons.run(v),hn(`Successfully triggered ${v}.`),ft(l,r(l)[v]=!1)}catch(_){_.isAbort||(Ae.error(_),ft(l,r(l)[v]=!1))}}Be();var d=yF(),f=F(d);Ra(f);var h=g(f,2);Ai(h,{children:(v,_)=>{var b=bF(),m=F(b),k=T(m),S=g(T(k),2),$=T(S),D=g(m,2),I=T(D),C=T(I),w=g(T(C),2);Zl(w,{class:"btn-sm",tooltip:"Refresh",$$events:{refresh:c}});var E=g(C,2),O=T(E),A=T(O);{var q=Y=>{var J=pF();p(Y,J)},L=Y=>{var J=et(),z=F(J);bt(z,1,()=>r(s),X=>X.id,(X,oe)=>{var ce=mF(),le=T(ce),me=T(le),_e=T(me),pe=g(le,2),Te=T(pe),Se=g(pe,2),he=T(Se);let ue;Ge(he,(ke,we)=>ht?.(ke,we),()=>"Run"),Nt(()=>re("click",he,Ct(()=>u(r(oe).id)))),V(()=>{$e(_e,r(oe).id),$e(Te,r(oe).expression),ue=Re(he,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,ue,{"btn-loading":r(l)[r(oe).id]}),he.disabled=r(l)[r(oe).id]}),p(X,ce)},X=>{var oe=gF();p(X,oe)}),p(Y,J)};G(A,Y=>{r(o)?Y(q):Y(L,!1)})}var j=g(E,2),U=g(T(j)),W=g(U,2);V(()=>{$e($,t()),H(U,"href","https://pocketbase.io/docs/go-jobs-scheduling/"),H(W,"href","https://pocketbase.io/docs/js-jobs-scheduling/")}),p(v,b)},$$slots:{default:!0}}),p(n,d),Ve(),a()}var xF=x('<div class="loader"></div>'),wF=x('<input type="checkbox"/> <label>Select all</label>',1),kF=x('<input type="checkbox"/> <label> </label>',1),SF=x('<div class="list-item list-item-collection"><!></div>'),TF=x(`<div class="content txt-xl m-b-base"><p>Below you'll find your current collections configuration that you could import in
                        another PocketBase environment.</p></div> <div class="export-panel"><div class="export-list"><div class="list-item list-item-section"><!></div> <!></div>  <div tabindex="0" class="export-preview"><button type="button" class="btn btn-sm btn-transparent fade copy-schema"><span class="txt">Copy</span></button> <pre class="code-wrapper"> </pre></div></div> <div class="flex m-t-base"><div class="flex-fill"></div> <button type="button" class="btn btn-expanded"><i class="ri-download-line"></i> <span class="txt">Download as JSON</span></button></div>`,1),$F=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel"><!></div></div>',1),IF=x("<!> <!>",1);function CF(n,e){Ue(e,!1);const t=()=>It(In,"$pageTitle",i),[i,a]=At(),s=P(),o=P(),l=P();Kn(In,"Export collections");const c="export_"+R.randomString(5);let u=P(),d=P([]),f=P({}),h=P(!1);v();async function v(){y(h,!0);try{y(d,await Ae.collections.getFullList({batch:100,$cancelKey:c})),y(d,R.sortCollections(r(d)));for(let w of r(d))delete w.created,delete w.updated,delete w.oauth2?.providers;S()}catch(w){Ae.error(w)}y(h,!1)}function _(){R.downloadJson(Object.values(r(f)),"pb_schema")}function b(){R.copyToClipboard(r(s)),ls("The configuration was copied to your clipboard!",3e3)}function m(){r(l)?k():S()}function k(){y(f,{})}function S(){y(f,{});for(const w of r(d))ft(f,r(f)[w.id]=w)}function $(w){r(f)[w.id]?delete r(f)[w.id]:ft(f,r(f)[w.id]=w),y(f,r(f))}ie(()=>r(f),()=>{y(s,JSON.stringify(Object.values(r(f)),null,4))}),ie(()=>r(f),()=>{y(o,Object.keys(r(f)).length)}),ie(()=>(r(d),r(o)),()=>{y(l,r(d).length&&r(o)===r(d).length)}),dt(),Be();var D=IF(),I=F(D);Ra(I);var C=g(I,2);Ai(C,{children:(w,E)=>{var O=$F(),A=F(O),q=T(A),L=g(T(q),2),j=T(L),U=g(A,2),W=T(U),Y=T(W);{var J=X=>{var oe=xF();p(X,oe)},z=X=>{var oe=TF(),ce=g(F(oe),2),le=T(ce),me=T(le),_e=T(me);De(_e,{class:"form-field",children:Ee,$$slots:{default:(ae,xe)=>{const se=ne(()=>xe.uniqueId);var ge=wF(),ee=F(ge),ve=g(ee,2);V(()=>{H(ee,"id",r(se)),ee.disabled=(r(d),M(()=>!r(d).length)),Yr(ee,r(l)),H(ve,"for",r(se))}),re("change",ee,()=>m()),p(ae,ge)}}});var pe=g(me,2);bt(pe,1,()=>r(d),ae=>ae.id,(ae,xe)=>{var se=SF(),ge=T(se);De(ge,{class:"form-field",children:Ee,$$slots:{default:(ee,ve)=>{const Ce=ne(()=>ve.uniqueId);var Ie=kF(),ze=F(Ie),qe=g(ze,2),je=T(qe);V(()=>{H(ze,"id",r(Ce)),Yr(ze,(r(f),r(xe),M(()=>r(f)[r(xe).id]))),H(qe,"for",r(Ce)),H(qe,"title",(r(xe),M(()=>r(xe).name))),$e(je,(r(xe),M(()=>r(xe).name)))}),re("change",ze,()=>$(r(xe))),p(ee,Ie)}}}),p(ae,se)});var Te=g(le,2),Se=T(Te),he=g(Se,2),ue=T(he);pt(Te,ae=>y(u,ae),()=>r(u));var ke=g(ce,2),we=g(T(ke),2);V(()=>{Se.disabled=!r(o),$e(ue,r(s)),we.disabled=!r(o)}),re("click",Se,()=>b()),re("keydown",Te,ae=>{if(ae.ctrlKey&&ae.code==="KeyA"){ae.preventDefault();const xe=window.getSelection(),se=document.createRange();se.selectNodeContents(r(u)),xe.removeAllRanges(),xe.addRange(se)}}),re("click",we,()=>_()),p(X,oe)};G(Y,X=>{r(h)?X(J):X(z,!1)})}V(()=>$e(j,t())),p(w,O)},$$slots:{default:!0}}),p(n,D),Ve(),a()}var EF=x('<span class="label label-success">Added</span> <strong> </strong>',1),OF=x('<span class="label label-danger">Deleted</span> <strong> </strong>',1),DF=x('<span class="label label-warning">Changed</span>'),PF=x('<strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i>',1),MF=x('<div class="inline-flex fleg-gap-5"><!> <!> <strong class="txt"> </strong></div>'),AF=x('<tr><td class="min-width svelte-tt2158"><span> </span></td><td><pre class="txt diff-value svelte-tt2158"> </pre></td><td><pre class="txt diff-value svelte-tt2158"> </pre></td></tr>'),LF=x('<tr class="txt-primary svelte-tt2158"><td class="min-width field-key-col svelte-tt2158"> </td><td class="changed-old-col svelte-tt2158"><pre class="txt"> </pre></td><td class="changed-none-col svelte-tt2158"></td></tr>'),NF=x('<tr class="svelte-tt2158"><th class="min-width svelte-tt2158" colspan="3"><span class="txt"> </span> <span class="label label-danger m-l-5 svelte-tt2158">Deleted - <small>All stored data related to <strong> </strong> will be deleted!</small></span></th></tr> <!>',1),RF=x('<span class="label label-warning m-l-5 svelte-tt2158">Changed</span>'),FF=x('<tr><td class="min-width field-key-col svelte-tt2158"> </td><td><pre class="txt"> </pre></td><td><pre class="txt"> </pre></td></tr>'),qF=x('<tr class="svelte-tt2158"><th class="min-width svelte-tt2158" colspan="3"><span class="txt"> </span> <!></th></tr> <!>',1),zF=x('<tr class="txt-primary svelte-tt2158"><td class="min-width field-key-col svelte-tt2158"> </td><td class="changed-none-col svelte-tt2158"></td><td class="changed-new-col svelte-tt2158"><pre class="txt"> </pre></td></tr>'),jF=x('<tr class="svelte-tt2158"><th class="min-width svelte-tt2158" colspan="3"><span class="txt"> </span> <span class="label label-success m-l-5 svelte-tt2158">Added</span></th></tr> <!>',1),UF=x('<div class="section-title"><!></div> <table class="table collections-diff-table m-b-base svelte-tt2158"><thead class="svelte-tt2158"><tr class="svelte-tt2158"><th class="svelte-tt2158">Props</th><th width="10%" class="svelte-tt2158">Old</th><th width="10%" class="svelte-tt2158">New</th></tr></thead><tbody><!><!><!><!></tbody></table>',1);function VF(n,e){Ue(e,!1);const t=P(),i=P(),a=P(),s=P();let o=te(e,"collectionA",24,()=>({})),l=te(e,"collectionB",24,()=>({})),c=te(e,"deleteMissing",8,!1),u=P([]),d=P([]),f=P([]),h=P([]),v=P([]);function _(){y(d,Array.isArray(l()?.fields)?l()?.fields.concat():[]),c()||y(d,r(d).concat(r(u).filter(U=>!r(d).find(W=>U.id==W.id))))}function b(U,W){U=U||[];for(let Y of U)if(Y.id==W)return Y;return null}function m(U,W){return U===W?!1:JSON.stringify(U)!==JSON.stringify(W)}function k(U){return typeof U>"u"?"":R.isObject(U)?JSON.stringify(U,null,4):U}ie(()=>N(l()),()=>{y(t,!l()?.id&&!l()?.name)}),ie(()=>(r(t),N(o())),()=>{y(i,!r(t)&&!o()?.id)}),ie(()=>N(o()),()=>{y(u,Array.isArray(o()?.fields)?o()?.fields.concat():[])}),ie(()=>(N(o()),N(l()),N(c())),()=>{(typeof o()?.fields<"u"||typeof l()?.fields<"u"||typeof c()<"u")&&_()}),ie(()=>(r(u),r(d)),()=>{y(f,r(u).filter(U=>!r(d).find(W=>U.id==W.id)))}),ie(()=>(r(d),r(u)),()=>{y(h,r(d).filter(U=>r(u).find(W=>W.id==U.id)))}),ie(()=>(r(d),r(u)),()=>{y(v,r(d).filter(U=>!r(u).find(W=>W.id==U.id)))}),ie(()=>(N(o()),N(l()),N(c())),()=>{y(a,R.hasCollectionChanges(o(),l(),c()))}),ie(()=>(N(o()),N(l())),()=>{y(s,R.mergeUnique(Object.keys(o()||{}),Object.keys(l()||{})).filter(U=>!["fields","created","updated"].includes(U)))}),dt(),Be();var S=UF(),$=F(S),D=T($);{var I=U=>{var W=EF(),Y=g(F(W),2),J=T(Y);V(()=>$e(J,(N(l()),M(()=>l()?.name)))),p(U,W)},C=U=>{var W=et(),Y=F(W);{var J=X=>{var oe=OF(),ce=g(F(oe),2),le=T(ce);V(()=>$e(le,(N(o()),M(()=>o()?.name)))),p(X,oe)},z=X=>{var oe=MF(),ce=T(oe);{var le=Se=>{var he=DF();p(Se,he)};G(ce,Se=>{r(a)&&Se(le)})}var me=g(ce,2);{var _e=Se=>{var he=PF(),ue=F(he),ke=T(ue);V(()=>$e(ke,(N(o()),M(()=>o().name)))),p(Se,he)};G(me,Se=>{N(o()),N(l()),M(()=>o().name!==l().name)&&Se(_e)})}var pe=g(me,2),Te=T(pe);V(()=>$e(Te,(N(l()),M(()=>l().name)))),p(X,oe)};G(Y,X=>{N(l()),M(()=>!l()?.id)?X(J):X(z,!1)},!0)}p(U,W)};G(D,U=>{N(o()),M(()=>!o()?.id)?U(I):U(C,!1)})}var w=g($,2),E=g(T(w)),O=T(E);bt(O,1,()=>r(s),Mt,(U,W)=>{var Y=AF();let J;var z=T(Y),X=T(z),oe=T(X),ce=g(z);let le;var me=T(ce),_e=T(me),pe=g(ce);let Te;var Se=T(pe),he=T(Se);V((ue,ke,we,ae,xe)=>{J=Re(Y,1,"svelte-tt2158",null,J,ue),$e(oe,r(W)),le=Re(ce,1,"svelte-tt2158",null,le,ke),$e(_e,we),Te=Re(pe,1,"svelte-tt2158",null,Te,ae),$e(he,xe)},[()=>({"txt-primary":m(o()?.[r(W)],l()?.[r(W)])}),()=>({"changed-old-col":!r(i)&&m(o()?.[r(W)],l()?.[r(W)]),"changed-none-col":r(i)}),()=>(N(o()),r(W),M(()=>k(o()?.[r(W)]))),()=>({"changed-new-col":!r(t)&&m(o()?.[r(W)],l()?.[r(W)]),"changed-none-col":r(t)}),()=>(N(l()),r(W),M(()=>k(l()?.[r(W)])))]),p(U,Y)});var A=g(O);{var q=U=>{var W=et(),Y=F(W);bt(Y,1,()=>r(f),Mt,(J,z)=>{var X=NF(),oe=F(X),ce=T(oe),le=T(ce),me=T(le),_e=g(le,2),pe=g(T(_e)),Te=g(T(pe)),Se=T(Te),he=g(oe,2);bt(he,1,()=>(r(z),M(()=>Object.entries(r(z)))),Mt,(ue,ke)=>{var we=xa(()=>Ga(r(ke),2));let ae=()=>r(we)[0],xe=()=>r(we)[1];var se=LF(),ge=T(se),ee=T(ge),ve=g(ge),Ce=T(ve),Ie=T(Ce);V(ze=>{$e(ee,ae()),$e(Ie,ze)},[()=>(xe(),M(()=>k(xe())))]),p(ue,se)}),V(()=>{$e(me,`field: ${r(z),M(()=>r(z).name)??""}`),$e(Se,(r(z),M(()=>r(z).name)))}),p(J,X)}),p(U,W)};G(A,U=>{(c()||r(t))&&U(q)})}var L=g(A);bt(L,1,()=>r(h),Mt,(U,W)=>{var Y=qF(),J=F(Y),z=T(J),X=T(z),oe=T(X),ce=g(X,2);{var le=_e=>{var pe=RF();p(_e,pe)};G(ce,_e=>{r(u),r(W),r(d),M(()=>m(b(r(u),r(W).id),b(r(d),r(W).id)))&&_e(le)})}var me=g(J,2);bt(me,1,()=>(r(W),M(()=>Object.entries(r(W)))),Mt,(_e,pe)=>{var Te=xa(()=>Ga(r(pe),2));let Se=()=>r(Te)[0],he=()=>r(Te)[1];var ue=FF();let ke;var we=T(ue),ae=T(we),xe=g(we);let se;var ge=T(xe),ee=T(ge),ve=g(xe);let Ce;var Ie=T(ve),ze=T(Ie);V((qe,je,rt,be,Le)=>{ke=Re(ue,1,"svelte-tt2158",null,ke,qe),$e(ae,Se()),se=Re(xe,1,"svelte-tt2158",null,se,je),$e(ee,rt),Ce=Re(ve,1,"svelte-tt2158",null,Ce,be),$e(ze,Le)},[()=>({"txt-primary":m(b(r(u),r(W).id)?.[Se()],he())}),()=>({"changed-old-col":m(b(r(u),r(W).id)?.[Se()],he())}),()=>(r(u),r(W),Se(),M(()=>k(b(r(u),r(W).id)?.[Se()]))),()=>({"changed-new-col":m(b(r(u),r(W).id)?.[Se()],he())}),()=>(he(),M(()=>k(he())))]),p(_e,ue)}),V(()=>$e(oe,`field: ${r(W),M(()=>r(W).name)??""}`)),p(U,Y)});var j=g(L);bt(j,1,()=>r(v),Mt,(U,W)=>{var Y=jF(),J=F(Y),z=T(J),X=T(z),oe=T(X),ce=g(J,2);bt(ce,1,()=>(r(W),M(()=>Object.entries(r(W)))),Mt,(le,me)=>{var _e=xa(()=>Ga(r(me),2));let pe=()=>r(_e)[0],Te=()=>r(_e)[1];var Se=zF(),he=T(Se),ue=T(he),ke=g(he,2),we=T(ke),ae=T(we);V(xe=>{$e(ue,pe()),$e(ae,xe)},[()=>(Te(),M(()=>k(Te())))]),p(le,Se)}),V(()=>$e(oe,`field: ${r(W),M(()=>r(W).name)??""}`)),p(U,Y)}),p(n,S),Ve()}var BF=x('<h4 class="center txt-break">Side-by-side diff</h4>'),HF=x('<button type="button" class="btn btn-transparent">Close</button> <button type="button"><span class="txt">Confirm and import</span></button>',1);function WF(n,e){Ue(e,!1);const t=qt();let i=P(),a=P([]),s=P([]),o=P([]),l=P(!1),c=P(!1);function u(b,m,k=!1){y(a,b),y(s,m),y(l,k),r(i)?.show()}function d(){return r(i)?.hide()}function f(){y(o,[]);for(const b of r(a)){const m=R.findByKey(r(s),"id",b.id)||null;(r(l)&&!m?.id||m?.id&&R.hasCollectionChanges(b,m,r(l)))&&r(o).push({old:b,new:m})}for(const b of r(s)){const m=R.findByKey(r(a),"id",b.id)||null;m?.id||r(o).push({old:m,new:b})}}function h(){const b=[];if(r(l))for(const m of r(a)){const k=R.findByKey(r(s),"id",m.id);if(!k)b.push(m.name+".*");else{const S=Array.isArray(m.fields)?m.fields:[];for(const $ of S)R.findByKey(k.fields,"id",$.id)||b.push(`${m.name}.${$.name} (${$.id})`)}}b.length?qn(`Do you really want to delete the following collection fields and their related records data:
- ${b.join(`
- `)}`,()=>{v()}):v()}async function v(){if(!r(c)){y(c,!0);try{await Ae.collections.import(r(s),r(l)),hn("Successfully imported collections configuration."),t("submit")}catch(b){Ae.error(b)}y(c,!1),d()}}ie(()=>(r(a),r(s)),()=>{Array.isArray(r(a))&&Array.isArray(r(s))&&f()}),dt();var _={show:u,hide:d};Be();{let b=ne(()=>!r(c));pt(pn(n,{class:"full-width-popup import-popup",overlayClose:!1,get escClose(){return r(b)},beforeHide:()=>!r(c),popup:!0,$$events:{show(m){lt.call(this,e,m)},hide(m){lt.call(this,e,m)}},children:(m,k)=>{var S=et(),$=F(S);bt($,1,()=>r(o),Mt,(D,I)=>{VF(D,{get collectionA(){return r(I),M(()=>r(I).old)},get collectionB(){return r(I),M(()=>r(I).new)},get deleteMissing(){return r(l)}})}),p(m,S)},$$slots:{default:!0,header:(m,k)=>{var S=BF();p(m,S)},footer:(m,k)=>{var S=HF(),$=F(S),D=g($,2);let I;V(()=>{$.disabled=r(c),I=Re(D,1,"btn btn-expanded",null,I,{"btn-loading":r(c)}),D.disabled=r(c)}),re("click",$,d),re("click",D,()=>h()),p(m,S)}},$$legacy:!0}),m=>y(i,m),()=>r(i))}return _t(e,"show",u),_t(e,"hide",d),Ve(_)}var YF=x('<div class="loader"></div>'),KF=x('<div class="help-block help-block-error">Invalid collections configuration.</div>'),JF=x('<label class="p-b-10">Collections</label> <textarea class="code" spellcheck="false" rows="15" required></textarea> <!>',1),ZF=x('<input type="checkbox"/> <label>Merge with the existing collections</label>',1),GF=x('<div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content"><string>Your collections configuration is already up-to-date!</string></div></div>'),XF=x('<small class="txt-hint"> </small>'),QF=x('<div class="list-item"><span class="label label-danger list-label svelte-1s34amf">Deleted</span> <div class="inline-flex flex-gap-5"><strong> </strong> <!></div></div>'),eq=x('<strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i>',1),tq=x('<small class="txt-hint"> </small>'),nq=x('<div class="list-item"><span class="label label-warning list-label svelte-1s34amf">Changed</span> <div class="inline-flex flex-gap-5"><!> <strong> </strong> <!></div></div>'),iq=x('<small class="txt-hint"> </small>'),rq=x('<div class="list-item"><span class="label label-success list-label svelte-1s34amf">Added</span> <div class="inline-flex flex-gap-5"><strong> </strong> <!></div></div>'),aq=x('<h5 class="section-title">Detected changes</h5> <div class="list"><!> <!> <!></div>',1),sq=x(`<div class="alert alert-warning m-t-base"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content"><string>Some of the imported collections share the same name and/or fields but are
                                imported with different IDs. You can replace them in the import if you want
                                to.</string></div> <button type="button" class="btn btn-warning btn-sm btn-outline"><span class="txt">Replace with original ids</span></button></div>`),oq=x('<button type="button" class="btn btn-transparent link-hint"><span class="txt">Clear</span></button>'),lq=x('<input type="file" class="hidden" accept=".json"/> <div class="content txt-xl m-b-base"><p>Paste below the collections configuration you want to import or <button><span class="txt">Load from JSON file</span></button></p></div> <!> <!> <!> <!> <!> <!> <div class="flex m-t-base"><!> <div class="flex-fill"></div> <button type="button" class="btn btn-expanded btn-warning m-l-auto"><span class="txt">Review</span></button></div>',1),cq=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel"><!></div></div>',1),uq=x("<!> <!> <!>",1);function dq(n,e){Ue(e,!1);const t=()=>It(In,"$pageTitle",i),[i,a]=At(),s=P(),o=P(),l=P(),c=P(),u=P(),d=P();Kn(In,"Import collections");let f=P(),h=P(),v=P(""),_=P(!1),b=P([]),m=P([]),k=P(!0),S=P([]),$=P(!1),D=P(!1);I();async function I(){y($,!0);try{y(m,await Ae.collections.getFullList(200));for(let Y of r(m))delete Y.created,delete Y.updated,delete Y.oauth2?.providers}catch(Y){Ae.error(Y)}y($,!1)}function C(){if(y(S,[]),!!r(s))for(let Y of r(b)){const J=R.findByKey(r(m),"id",Y.id);!J?.id||!R.hasCollectionChanges(J,Y,r(k))||r(S).push({new:Y,old:J})}}function w(){y(b,[]);try{y(b,JSON.parse(r(v)))}catch{}Array.isArray(r(b))?y(b,R.filterDuplicatesByKey(r(b))):y(b,[]);for(let Y of r(b))delete Y.created,delete Y.updated,Y.fields=R.filterDuplicatesByKey(Y.fields)}function E(){for(let Y of r(b)){const J=R.findByKey(r(m),"name",Y.name)||R.findByKey(r(m),"id",Y.id);if(!J)continue;const z=Y.id,X=J.id;Y.id=X;const oe=Array.isArray(J.fields)?J.fields:[],ce=Array.isArray(Y.fields)?Y.fields:[];for(const le of ce){const me=R.findByKey(oe,"name",le.name);me&&me.id&&(le.id=me.id)}for(let le of r(b))if(Array.isArray(le.fields))for(let me of le.fields)me.collectionId&&me.collectionId===z&&(me.collectionId=X);for(let le=0;le<Y.indexes?.length;le++)Y.indexes[le]=Y.indexes[le].replace(/create\s+(?:unique\s+)?\s*index\s*(?:if\s+not\s+exists\s+)?(\S*)\s+on/gim,me=>me.replace(z,X))}y(v,JSON.stringify(r(b),null,4))}function O(Y){y(_,!0);const J=new FileReader;J.onload=async z=>{y(_,!1),ft(f,r(f).value=""),y(v,z.target.result),await Tn(),r(b).length||(dr("Invalid collections configuration."),A())},J.onerror=z=>{console.warn(z),dr("Failed to load the imported JSON."),y(_,!1),ft(f,r(f).value="")},J.readAsText(Y)}function A(){y(v,""),ft(f,r(f).value=""),nn({})}function q(){const Y=r(D)?R.filterDuplicatesByKey(r(m).concat(r(b))):r(b);r(h)?.show(r(m),Y,r(k))}ie(()=>(r(v),r(D)),()=>{typeof r(v)<"u"&&r(D)!==null&&w(r(v))}),ie(()=>(r(v),r(b)),()=>{y(s,!!r(v)&&r(b).length&&r(b).length===r(b).filter(Y=>!!Y.id&&!!Y.name).length)}),ie(()=>(r(m),r(s),r(D),r(k),r(b)),()=>{y(o,r(m).filter(Y=>r(s)&&!r(D)&&r(k)&&!R.findByKey(r(b),"id",Y.id)))}),ie(()=>(r(b),r(s),r(m)),()=>{y(l,r(b).filter(Y=>r(s)&&!R.findByKey(r(m),"id",Y.id)))}),ie(()=>(r(b),r(k)),()=>{(typeof r(b)<"u"||typeof r(k)<"u")&&C()}),ie(()=>(r(v),r(o),r(l),r(S)),()=>{y(c,!!r(v)&&(r(o).length||r(l).length||r(S).length))}),ie(()=>(r($),r(s),r(c)),()=>{y(u,!r($)&&r(s)&&r(c))}),ie(()=>(r(b),r(m)),()=>{y(d,r(b).filter(Y=>{let J=R.findByKey(r(m),"name",Y.name)||R.findByKey(r(m),"id",Y.id);if(!J)return!1;if(J.id!=Y.id)return!0;const z=Array.isArray(J.fields)?J.fields:[],X=Array.isArray(Y.fields)?Y.fields:[];for(const oe of X){if(R.findByKey(z,"id",oe.id))continue;const le=R.findByKey(z,"name",oe.name);if(le&&oe.id!=le.id)return!0}return!1}))}),dt(),Be();var L=uq(),j=F(L);Ra(j);var U=g(j,2);Ai(U,{children:(Y,J)=>{var z=cq(),X=F(z),oe=T(X),ce=g(T(oe),2),le=T(ce),me=g(X,2),_e=T(me),pe=T(_e);{var Te=he=>{var ue=YF();p(he,ue)},Se=he=>{var ue=lq(),ke=F(ue);pt(ke,He=>y(f,He),()=>r(f));var we=g(ke,2),ae=T(we),xe=g(T(ae));let se;var ge=g(we,2);{let He=ne(()=>r(s)?"":"field-error");De(ge,{get class(){return`form-field ${r(He)??""}`},name:"collections",children:Ee,$$slots:{default:(Je,Fe)=>{const Me=ne(()=>Fe.uniqueId);var Ne=JF(),Ze=F(Ne),Xe=g(Ze,2),vt=g(Xe,2);{var tt=We=>{var Qe=KF();p(We,Qe)};G(vt,We=>{r(v)&&!r(s)&&We(tt)})}V(()=>{H(Ze,"for",r(Me)),H(Xe,"id",r(Me))}),xt(Xe,()=>r(v),We=>y(v,We)),p(Je,Ne)}}})}var ee=g(ge,2);{var ve=He=>{De(He,{class:"form-field form-field-toggle",children:Ee,$$slots:{default:(Je,Fe)=>{const Me=ne(()=>Fe.uniqueId);var Ne=ZF(),Ze=F(Ne),Xe=g(Ze,2);V(()=>{H(Ze,"id",r(Me)),Ze.disabled=!r(s),H(Xe,"for",r(Me))}),Xt(Ze,()=>r(D),vt=>y(D,vt)),p(Je,Ne)}}})};G(ee,He=>{r(b),M(()=>r(b).length)&&He(ve)})}var Ce=g(ee,2);G(Ce,He=>{});var Ie=g(Ce,2);{var ze=He=>{var Je=GF();p(He,Je)};G(Ie,He=>{r(s),r(b),r(c),M(()=>r(s)&&r(b).length&&!r(c))&&He(ze)})}var qe=g(Ie,2);{var je=He=>{var Je=aq(),Fe=g(F(Je),2),Me=T(Fe);{var Ne=We=>{var Qe=et(),mt=F(Qe);bt(mt,1,()=>r(o),gt=>gt.id,(gt,nt)=>{var Oe=QF(),B=g(T(Oe),2),Z=T(B),de=T(Z),ye=g(Z,2);{var Ye=ot=>{var Tt=XF(),at=T(Tt);V(()=>$e(at,(r(nt),M(()=>r(nt).id)))),p(ot,Tt)};G(ye,ot=>{r(nt),M(()=>r(nt).id)&&ot(Ye)})}V(()=>$e(de,(r(nt),M(()=>r(nt).name)))),p(gt,Oe)}),p(We,Qe)};G(Me,We=>{r(o),M(()=>r(o).length)&&We(Ne)})}var Ze=g(Me,2);{var Xe=We=>{var Qe=et(),mt=F(Qe);bt(mt,1,()=>r(S),gt=>gt.old.id+gt.new.id,(gt,nt)=>{var Oe=nq(),B=g(T(Oe),2),Z=T(B);{var de=at=>{var wt=eq(),ut=F(wt),St=T(ut);V(()=>$e(St,(r(nt),M(()=>r(nt).old.name)))),p(at,wt)};G(Z,at=>{r(nt),M(()=>r(nt).old.name!==r(nt).new.name)&&at(de)})}var ye=g(Z,2),Ye=T(ye),ot=g(ye,2);{var Tt=at=>{var wt=tq(),ut=T(wt);V(()=>$e(ut,(r(nt),M(()=>r(nt).new.id)))),p(at,wt)};G(ot,at=>{r(nt),M(()=>r(nt).new.id)&&at(Tt)})}V(()=>$e(Ye,(r(nt),M(()=>r(nt).new.name)))),p(gt,Oe)}),p(We,Qe)};G(Ze,We=>{r(S),M(()=>r(S).length)&&We(Xe)})}var vt=g(Ze,2);{var tt=We=>{var Qe=et(),mt=F(Qe);bt(mt,1,()=>r(l),gt=>gt.id,(gt,nt)=>{var Oe=rq(),B=g(T(Oe),2),Z=T(B),de=T(Z),ye=g(Z,2);{var Ye=ot=>{var Tt=iq(),at=T(Tt);V(()=>$e(at,(r(nt),M(()=>r(nt).id)))),p(ot,Tt)};G(ye,ot=>{r(nt),M(()=>r(nt).id)&&ot(Ye)})}V(()=>$e(de,(r(nt),M(()=>r(nt).name)))),p(gt,Oe)}),p(We,Qe)};G(vt,We=>{r(l),M(()=>r(l).length)&&We(tt)})}p(He,Je)};G(qe,He=>{r(s),r(b),r(c),M(()=>r(s)&&r(b).length&&r(c))&&He(je)})}var rt=g(qe,2);{var be=He=>{var Je=sq(),Fe=g(T(Je),4);re("click",Fe,()=>E()),p(He,Je)};G(rt,He=>{r(d),M(()=>r(d).length)&&He(be)})}var Le=g(rt,2),Ke=T(Le);{var st=He=>{var Je=oq();re("click",Je,()=>A()),p(He,Je)};G(Ke,He=>{r(v)&&He(st)})}var it=g(Ke,4);V(()=>{se=Re(xe,1,"btn btn-outline btn-sm m-l-5",null,se,{"btn-loading":r(_)}),it.disabled=!r(u)}),re("change",ke,()=>{r(f).files.length&&O(r(f).files[0])}),re("click",xe,()=>{r(f).click()}),re("click",it,q),p(he,ue)};G(pe,he=>{r($)?he(Te):he(Se,!1)})}V(()=>$e(le,t())),p(Y,z)},$$slots:{default:!0}});var W=g(U,2);pt(WF(W,{$$events:{submit:()=>{A(),I()}},$$legacy:!0}),Y=>y(h,Y),()=>r(h)),p(n,L),Ve(),a()}var fq=x('<div class="loader"></div>'),hq=x('<label>Sender name</label> <input type="text" required/>',1),vq=x('<label>Sender address</label> <input type="email" required/>',1),pq=x('<input type="checkbox" required/> <label><span class="txt">Use SMTP mail server <strong>(recommended)</strong></span> <i class="ri-information-line link-hint"></i></label>',1),mq=x('<label>SMTP server host</label> <input type="text" required/>',1),gq=x('<label>Port</label> <input type="number" required/>',1),bq=x('<label>Username</label> <input type="text"/>',1),yq=x("<label>Password</label> <!>",1),_q=x('<span class="txt">Hide more options</span> <i class="ri-arrow-up-s-line"></i>',1),xq=x('<span class="txt">Show more options</span> <i class="ri-arrow-down-s-line"></i>',1),wq=x("<label>TLS encryption</label> <!>",1),kq=x("<label>AUTH method</label> <!>",1),Sq=x('<label><span class="txt">EHLO/HELO domain</span> <i class="ri-information-line link-hint"></i></label> <input type="text" placeholder="Default to localhost"/>',1),Tq=x('<div class="grid"><div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"></div></div>'),$q=x('<div><div class="grid"><div class="col-lg-4"><!></div> <div class="col-lg-2"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div></div> <button type="button" class="btn btn-sm btn-secondary m-t-sm m-b-sm"><!></button> <!></div>'),Iq=x('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Save changes</span></button>',1),Cq=x('<button type="button" class="btn btn-expanded btn-outline"><i class="ri-mail-check-line"></i> <span class="txt">Send test email</span></button>'),Eq=x('<div class="grid m-b-base"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div></div> <!> <!> <div class="flex"><div class="flex-fill"></div> <!></div>',1),Oq=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><div class="content txt-xl m-b-base"><p>Configure common settings for sending emails.</p></div> <!></form></div>',1),Dq=x("<!> <!> <!>",1);function Pq(n,e){Ue(e,!1);const t=()=>It(In,"$pageTitle",i),[i,a]=At(),s=P(),o=P(),l=[{label:"Auto (StartTLS)",value:!1},{label:"Always",value:!0}],c=[{label:"PLAIN (default)",value:"PLAIN"},{label:"LOGIN",value:"LOGIN"}];Kn(In,"Mail settings");let u=P(),d=P({}),f=P({}),h=P(!1),v=P(!1),_=P(!1),b=P(!1);m();async function m(){y(h,!0);try{const E=await Ae.settings.getAll()||{};S(E)}catch(E){Ae.error(E)}y(h,!1)}async function k(){if(!(r(v)||!r(o))){y(v,!0);try{const E=await Ae.settings.update(R.filterRedactedProps(r(f)));S(E),nn({}),hn("Successfully saved mail settings.")}catch(E){Ae.error(E)}y(v,!1)}}function S(E={}){y(f,{meta:E?.meta||{},smtp:E?.smtp||{}}),r(f).smtp.authMethod||ft(f,r(f).smtp.authMethod=c[0].value),y(d,JSON.parse(JSON.stringify(r(f)))),y(_,!!r(f).smtp.username)}function $(){y(f,JSON.parse(JSON.stringify(r(d)||{})))}ie(()=>r(d),()=>{y(s,JSON.stringify(r(d)))}),ie(()=>(r(s),r(f)),()=>{y(o,r(s)!=JSON.stringify(r(f)))}),dt(),Be();var D=Dq(),I=F(D);Ra(I);var C=g(I,2);Ai(C,{children:(E,O)=>{var A=Oq(),q=F(A),L=T(q),j=g(T(L),2),U=T(j),W=g(q,2),Y=T(W),J=g(T(Y),2);{var z=oe=>{var ce=fq();p(oe,ce)},X=oe=>{var ce=Eq(),le=F(ce),me=T(le),_e=T(me);De(_e,{class:"form-field required",name:"meta.senderName",children:Ee,$$slots:{default:(se,ge)=>{const ee=ne(()=>ge.uniqueId);var ve=hq(),Ce=F(ve),Ie=g(Ce,2);V(()=>{H(Ce,"for",r(ee)),H(Ie,"id",r(ee))}),xt(Ie,()=>r(f).meta.senderName,ze=>ft(f,r(f).meta.senderName=ze)),p(se,ve)}}});var pe=g(me,2),Te=T(pe);De(Te,{class:"form-field required",name:"meta.senderAddress",children:Ee,$$slots:{default:(se,ge)=>{const ee=ne(()=>ge.uniqueId);var ve=vq(),Ce=F(ve),Ie=g(Ce,2);V(()=>{H(Ce,"for",r(ee)),H(Ie,"id",r(ee))}),xt(Ie,()=>r(f).meta.senderAddress,ze=>ft(f,r(f).meta.senderAddress=ze)),p(se,ve)}}});var Se=g(le,2);De(Se,{class:"form-field form-field-toggle m-b-sm",children:Ee,$$slots:{default:(se,ge)=>{const ee=ne(()=>ge.uniqueId);var ve=pq(),Ce=F(ve),Ie=g(Ce,2),ze=g(T(Ie),2);Ge(ze,(qe,je)=>ht?.(qe,je),()=>({text:'By default PocketBase uses the unix "sendmail" command for sending emails. For better emails deliverability it is recommended to use a SMTP mail server.',position:"top"})),V(()=>{H(Ce,"id",r(ee)),H(Ie,"for",r(ee))}),Xt(Ce,()=>r(f).smtp.enabled,qe=>ft(f,r(f).smtp.enabled=qe)),p(se,ve)}}});var he=g(Se,2);{var ue=se=>{var ge=$q(),ee=T(ge),ve=T(ee),Ce=T(ve);De(Ce,{class:"form-field required",name:"smtp.host",children:Ee,$$slots:{default:(Fe,Me)=>{const Ne=ne(()=>Me.uniqueId);var Ze=mq(),Xe=F(Ze),vt=g(Xe,2);V(()=>{H(Xe,"for",r(Ne)),H(vt,"id",r(Ne))}),xt(vt,()=>r(f).smtp.host,tt=>ft(f,r(f).smtp.host=tt)),p(Fe,Ze)}}});var Ie=g(ve,2),ze=T(Ie);De(ze,{class:"form-field required",name:"smtp.port",children:Ee,$$slots:{default:(Fe,Me)=>{const Ne=ne(()=>Me.uniqueId);var Ze=gq(),Xe=F(Ze),vt=g(Xe,2);V(()=>{H(Xe,"for",r(Ne)),H(vt,"id",r(Ne))}),xt(vt,()=>r(f).smtp.port,tt=>ft(f,r(f).smtp.port=tt)),p(Fe,Ze)}}});var qe=g(Ie,2),je=T(qe);De(je,{class:"form-field",name:"smtp.username",children:Ee,$$slots:{default:(Fe,Me)=>{const Ne=ne(()=>Me.uniqueId);var Ze=bq(),Xe=F(Ze),vt=g(Xe,2);V(()=>{H(Xe,"for",r(Ne)),H(vt,"id",r(Ne))}),xt(vt,()=>r(f).smtp.username,tt=>ft(f,r(f).smtp.username=tt)),p(Fe,Ze)}}});var rt=g(qe,2),be=T(rt);De(be,{class:"form-field",name:"smtp.password",children:Ee,$$slots:{default:(Fe,Me)=>{const Ne=ne(()=>Me.uniqueId);var Ze=yq(),Xe=F(Ze),vt=g(Xe,2);Md(vt,{get id(){return r(Ne)},get mask(){return r(_)},set mask(tt){y(_,tt)},get value(){return r(f).smtp.password},set value(tt){ft(f,r(f).smtp.password=tt)},$$legacy:!0}),V(()=>H(Xe,"for",r(Ne))),p(Fe,Ze)}}});var Le=g(ee,2),Ke=T(Le);{var st=Fe=>{var Me=_q();p(Fe,Me)},it=Fe=>{var Me=xq();p(Fe,Me)};G(Ke,Fe=>{r(b)?Fe(st):Fe(it,!1)})}var He=g(Le,2);{var Je=Fe=>{var Me=Tq(),Ne=T(Me),Ze=T(Ne);De(Ze,{class:"form-field",name:"smtp.tls",children:Ee,$$slots:{default:(Qe,mt)=>{const gt=ne(()=>mt.uniqueId);var nt=wq(),Oe=F(nt),B=g(Oe,2);On(B,{get id(){return r(gt)},get items(){return l},get keyOfSelected(){return r(f).smtp.tls},set keyOfSelected(Z){ft(f,r(f).smtp.tls=Z)},$$legacy:!0}),V(()=>H(Oe,"for",r(gt))),p(Qe,nt)}}});var Xe=g(Ne,2),vt=T(Xe);De(vt,{class:"form-field",name:"smtp.authMethod",children:Ee,$$slots:{default:(Qe,mt)=>{const gt=ne(()=>mt.uniqueId);var nt=kq(),Oe=F(nt),B=g(Oe,2);On(B,{get id(){return r(gt)},get items(){return c},get keyOfSelected(){return r(f).smtp.authMethod},set keyOfSelected(Z){ft(f,r(f).smtp.authMethod=Z)},$$legacy:!0}),V(()=>H(Oe,"for",r(gt))),p(Qe,nt)}}});var tt=g(Xe,2),We=T(tt);De(We,{class:"form-field",name:"smtp.localName",children:Ee,$$slots:{default:(Qe,mt)=>{const gt=ne(()=>mt.uniqueId);var nt=Sq(),Oe=F(nt),B=g(T(Oe),2);Ge(B,(de,ye)=>ht?.(de,ye),()=>({text:"Some SMTP servers, such as the Gmail SMTP-relay, requires a proper domain name in the inital EHLO/HELO exchange and will reject attempts to use localhost.",position:"top"}));var Z=g(Oe,2);V(()=>{H(Oe,"for",r(gt)),H(Z,"id",r(gt))}),xt(Z,()=>r(f).smtp.localName,de=>ft(f,r(f).smtp.localName=de)),p(Qe,nt)}}}),Et(3,Me,()=>vn,()=>({duration:150})),p(Fe,Me)};G(He,Fe=>{r(b)&&Fe(Je)})}re("click",Le,Ct(()=>{y(b,!r(b))})),Et(3,ge,()=>vn,()=>({duration:150})),p(se,ge)};G(he,se=>{r(f),M(()=>r(f).smtp.enabled)&&se(ue)})}var ke=g(he,2),we=g(T(ke),2);{var ae=se=>{var ge=Iq(),ee=F(ge),ve=g(ee,2);let Ce;V(()=>{ee.disabled=r(v),Ce=Re(ve,1,"btn btn-expanded",null,Ce,{"btn-loading":r(v)}),ve.disabled=!r(o)||r(v)}),re("click",ee,()=>$()),re("click",ve,()=>k()),p(se,ge)},xe=se=>{var ge=Cq();re("click",ge,()=>r(u)?.show()),p(se,ge)};G(we,se=>{r(o)?se(ae):se(xe,!1)})}p(oe,ce)};G(J,oe=>{r(h)?oe(z):oe(X,!1)})}V(()=>$e(U,t())),re("submit",Y,Ct(()=>k())),p(E,A)},$$slots:{default:!0}});var w=g(C,2);pt(jg(w,{$$legacy:!0}),E=>y(u,E),()=>r(u)),p(n,D),Ve(),a()}var Mq=x('<div class="loader"></div>'),Aq=x(`<div><div class="alert alert-warning m-0"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content">If you have existing uploaded files, you'll have to migrate them manually
                                    from the <strong> </strong> to the <strong> </strong>. <br/> There are numerous command line tools that can help you, such as: <a href="https://github.com/rclone/rclone" target="_blank" rel="noopener noreferrer" class="txt-bold">rclone</a>, <a href="https://github.com/peak/s5cmd" target="_blank" rel="noopener noreferrer" class="txt-bold">s5cmd</a>, etc.</div></div> <div class="clearfix m-t-base"></div></div>`),Lq=x('<span class="loader loader-sm"></span>'),Nq=x('<div class="label label-sm label-warning entrance-right"><i class="ri-error-warning-line txt-warning"></i> <span class="txt">Failed to establish S3 connection</span></div>'),Rq=x('<div class="label label-sm label-success entrance-right"><i class="ri-checkbox-circle-line txt-success"></i> <span class="txt">S3 connected successfully</span></div>'),Fq=x('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Reset</span></button>'),qq=x('<!> <div class="flex"><div class="flex-fill"></div> <!> <!> <button type="submit"><span class="txt">Save changes</span></button></div>',1),zq=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><div class="content txt-xl m-b-base"><p>By default PocketBase uses the local file system to store uploaded files.</p> <p>If you have limited disk space, you could optionally connect to an S3 compatible storage.</p></div> <!></form></div>',1),jq=x("<!> <!>",1);function Uq(n,e){Ue(e,!1);const t=()=>It(In,"$pageTitle",i),[i,a]=At(),s=P(),o=P();Kn(In,"Files storage");const l="s3_test_request";let c=P({}),u=P({}),d=P(!1),f=P(!1),h=P(!1),v=P(null);_();async function _(){y(d,!0);try{const I=await Ae.settings.getAll()||{};m(I)}catch(I){Ae.error(I)}y(d,!1)}async function b(){if(!(r(f)||!r(o))){y(f,!0);try{Ae.cancelRequest(l);const I=await Ae.settings.update(R.filterRedactedProps(r(u)));nn({}),await m(I),Ks(),hn("Successfully saved storage settings.")}catch(I){Ae.error(I)}y(f,!1)}}async function m(I={}){y(u,{s3:I?.s3||{}}),y(c,JSON.parse(JSON.stringify(r(u))))}async function k(){y(u,JSON.parse(JSON.stringify(r(c)||{})))}ie(()=>r(c),()=>{y(s,JSON.stringify(r(c)))}),ie(()=>(r(s),r(u)),()=>{y(o,r(s)!=JSON.stringify(r(u)))}),dt(),Be();var S=jq(),$=F(S);Ra($);var D=g($,2);Ai(D,{children:(I,C)=>{var w=zq(),E=F(w),O=T(E),A=g(T(O),2),q=T(A),L=g(E,2),j=T(L),U=g(T(j),2);{var W=J=>{var z=Mq();p(J,z)},Y=J=>{var z=qq(),X=F(z);Kg(X,{toggleLabel:"Use S3 storage",get originalConfig(){return r(c),M(()=>r(c).s3)},get config(){return r(u).s3},set config(Se){ft(u,r(u).s3=Se)},get isTesting(){return r(h)},set isTesting(Se){y(h,Se)},get testError(){return r(v)},set testError(Se){y(v,Se)},children:(Se,he)=>{var ue=et(),ke=F(ue);{var we=ae=>{var xe=Aq(),se=T(xe),ge=g(T(se),2),ee=g(T(ge)),ve=T(ee),Ce=g(ee,2),Ie=T(Ce);V(()=>{$e(ve,(r(c),M(()=>r(c).s3?.enabled?"S3 storage":"local file system"))),$e(Ie,(r(u),M(()=>r(u).s3.enabled?"S3 storage":"local file system")))}),Et(3,xe,()=>vn,()=>({duration:150})),p(ae,xe)};G(ke,ae=>{r(c),r(u),M(()=>r(c).s3?.enabled!=r(u).s3.enabled)&&ae(we)})}p(Se,ue)},$$slots:{default:!0},$$legacy:!0});var oe=g(X,2),ce=g(T(oe),2);{var le=Se=>{var he=et(),ue=F(he);{var ke=ae=>{var xe=Lq();p(ae,xe)},we=ae=>{var xe=et(),se=F(xe);{var ge=ve=>{var Ce=Nq();Ge(Ce,(Ie,ze)=>ht?.(Ie,ze),()=>r(v).data?.message),p(ve,Ce)},ee=ve=>{var Ce=Rq();p(ve,Ce)};G(se,ve=>{r(v)?ve(ge):ve(ee,!1)},!0)}p(ae,xe)};G(ue,ae=>{r(h)?ae(ke):ae(we,!1)})}p(Se,he)};G(ce,Se=>{r(u),r(o),r(f),M(()=>r(u).s3?.enabled&&!r(o)&&!r(f))&&Se(le)})}var me=g(ce,2);{var _e=Se=>{var he=Fq();V(()=>he.disabled=r(f)),re("click",he,()=>k()),p(Se,he)};G(me,Se=>{r(o)&&Se(_e)})}var pe=g(me,2);let Te;V(()=>{Te=Re(pe,1,"btn btn-expanded",null,Te,{"btn-loading":r(f)}),pe.disabled=!r(o)||r(f)}),re("click",pe,()=>b()),p(J,z)};G(U,J=>{r(d)?J(W):J(Y,!1)})}V(()=>$e(q,t())),re("submit",j,Ct(()=>b())),p(I,w)},$$slots:{default:!0}}),p(n,S),Ve(),a()}var Vq=x('<div class="block txt-center m-b-lg"><figure class="logo"><img alt="PocketBase logo" width="40" height="40"/> <span class="txt">Pocket<strong>Base</strong></span></figure></div> <div class="clearfix"></div>',1),Bq=x('<div class="wrapper wrapper-sm m-b-xl panel-wrapper svelte-nce1p0"><!> <!></div>');function Hq(n,e){Ue(e,!1);let t=te(e,"nobranding",8,!1);Be(),Ai(n,{class:"full-page",center:!0,children:(i,a)=>{var s=Bq(),o=T(s);{var l=u=>{var d=Vq(),f=F(d),h=T(f),v=T(h);V(()=>H(v,"src",`${M(()=>"./")??""}images/logo.svg`)),p(u,d)};G(o,u=>{t()||u(l)})}var c=g(o,2);Zt(c,e,"default",{},null),p(i,s)},$$slots:{default:!0}}),Ve()}var Wq=x('<div class="block txt-center"><span class="loader"></span></div>'),Yq=x("<label> </label> <input required/>",1),Kq=x('<label>Password</label> <input type="password" required/> <div class="help-block"><a href="/request-password-reset" class="link-hint">Forgotten password?</a></div>',1),Jq=x('<form class="block"><!> <!> <button type="submit"><span class="txt"> </span> <i class="ri-arrow-right-line"></i></button></form>'),Zq=x('<label>Email</label> <input type="email" required/>',1),Gq=x('<form class="block"><!> <button type="submit"><i class="ri-mail-send-line"></i> <span class="txt">Send OTP</span></button></form>'),Xq=x(`<div class="content txt-center m-b-sm"><p>Check your <strong> </strong> inbox and enter in the input below the received
                        One-time password (OTP).</p></div>`),Qq=x('<label>Id</label> <input type="text" required/>',1),e3=x('<label>One-time password</label> <input type="password" required/>',1),t3=x('<!> <form class="block"><!> <!> <button type="submit"><span class="txt">Login</span> <i class="ri-arrow-right-line"></i></button></form> <div class="content txt-center m-t-sm"><button type="button" class="link-hint">Request another OTP</button></div>',1),n3=x('<div class="content txt-center m-b-base"><h4>Superuser login <!></h4></div> <!>',1);function i3(n,e){Ue(e,!1);const t=()=>It(pd,"$querystring",i),[i,a]=At(),s=new URLSearchParams(t());let o=P(s.get("demoEmail")||""),l=P(s.get("demoPassword")||""),c=P({}),u=P(1),d=P(1),f=P(!1),h=P(!1),v=P(!1),_=P(!1),b=P(""),m=P(""),k=P(""),S=P(""),$=P("");D();async function D(){if(!r(_)){y(_,!0);try{y(c,await Ae.collection("_superusers").listAuthMethods())}catch(E){Ae.error(E)}y(_,!1)}}async function I(){if(!r(f)){y(f,!0);try{await Ae.collection("_superusers").authWithPassword(r(o),r(l)),Ks(),nn({}),cs("/")}catch(E){E.status==401?(y(b,E.response.mfaId),r(c)?.password?.identityFields?.length==1&&r(c).password.identityFields[0]=="email"?(y(S,r(o)),await C()):/^[^@\s]+@[^@\s]+$/.test(r(o))&&y(S,r(o))):E.status!=400?Ae.error(E):dr("Invalid login credentials.")}y(f,!1)}}async function C(){if(!r(h)){y(h,!0);try{const E=await Ae.collection("_superusers").requestOTP(r(S));y(m,E.otpId),y(k,r(m)),Ks(),nn({})}catch(E){E.status==429&&y(m,r(k)),Ae.error(E)}y(h,!1)}}async function w(){if(!r(v)){y(v,!0);try{await Ae.collection("_superusers").authWithOTP(r(m)||r(k),r($),{mfaId:r(b)}),Ks(),nn({}),cs("/")}catch(E){Ae.error(E)}y(v,!1)}}ie(()=>(r(d),r(u),r(c),r(b),r(m)),()=>{y(d,1),y(u,1),r(c)?.mfa?.enabled&&wr(d),r(c)?.otp?.enabled&&wr(d),r(b)!=""&&wr(u),r(m)!=""&&wr(u)}),dt(),Be(),Hq(n,{children:(E,O)=>{var A=n3(),q=F(A),L=T(q),j=g(T(L));{var U=z=>{var X=Oa();V(()=>$e(X,`(${r(u)??""}/${r(d)??""})`)),p(z,X)};G(j,z=>{r(d)>1&&z(U)})}var W=g(q,2);{var Y=z=>{var X=Wq();p(z,X)},J=z=>{var X=et(),oe=F(X);{var ce=me=>{var _e=Jq(),pe=T(_e);De(pe,{class:"form-field required",name:"identity",children:Ee,$$slots:{default:(we,ae)=>{const xe=ne(()=>ae.uniqueId);var se=Yq(),ge=F(se),ee=T(ge),ve=g(ge,2);Wi(ve,!0),V(Ce=>{H(ge,"for",r(xe)),$e(ee,Ce),H(ve,"id",r(xe)),H(ve,"type",(r(c),M(()=>r(c).password.identityFields.length==1&&r(c).password.identityFields[0]=="email"?"email":"text"))),zn(ve,r(o))},[()=>(N(R),r(c),M(()=>R.sentenize(r(c).password.identityFields.join(" or "),!1)))]),re("input",ve,Ce=>{y(o,Ce.target.value)}),p(we,se)}}});var Te=g(pe,2);De(Te,{class:"form-field required",name:"password",children:Ee,$$slots:{default:(we,ae)=>{const xe=ne(()=>ae.uniqueId);var se=Kq(),ge=F(se),ee=g(ge,2),ve=g(ee,2),Ce=T(ve);Ge(Ce,Ie=>ni?.(Ie)),V(()=>{H(ge,"for",r(xe)),H(ee,"id",r(xe))}),xt(ee,()=>r(l),Ie=>y(l,Ie)),p(we,se)}}});var Se=g(Te,2);let he;var ue=T(Se),ke=T(ue);V(()=>{he=Re(Se,1,"btn btn-lg btn-block btn-next",null,he,{"btn-disabled":r(f),"btn-loading":r(f)}),$e(ke,r(d)>1?"Next":"Login")}),re("submit",_e,Ct(I)),p(me,_e)},le=me=>{var _e=et(),pe=F(_e);{var Te=Se=>{var he=et(),ue=F(he);{var ke=ae=>{var xe=Gq(),se=T(xe);De(se,{class:"form-field required",name:"email",children:Ee,$$slots:{default:(ve,Ce)=>{const Ie=ne(()=>Ce.uniqueId);var ze=Zq(),qe=F(ze),je=g(qe,2);V(()=>{H(qe,"for",r(Ie)),H(je,"id",r(Ie))}),xt(je,()=>r(S),rt=>y(S,rt)),p(ve,ze)}}});var ge=g(se,2);let ee;V(()=>ee=Re(ge,1,"btn btn-lg btn-block btn-next",null,ee,{"btn-disabled":r(h),"btn-loading":r(h)})),re("submit",xe,Ct(C)),p(ae,xe)},we=ae=>{var xe=t3(),se=F(xe);{var ge=rt=>{var be=Xq(),Le=T(be),Ke=g(T(Le)),st=T(Ke);V(()=>$e(st,r(S))),p(rt,be)};G(se,rt=>{r(S)&&rt(ge)})}var ee=g(se,2),ve=T(ee);De(ve,{class:"form-field required",name:"otpId",children:Ee,$$slots:{default:(rt,be)=>{const Le=ne(()=>be.uniqueId);var Ke=Qq(),st=F(Ke),it=g(st,2);V(()=>{H(st,"for",r(Le)),H(it,"id",r(Le)),zn(it,r(m)),H(it,"placeholder",r(k))}),re("change",it,He=>{y(m,He.target.value||r(k)),He.target.value=r(m)}),p(rt,Ke)}}});var Ce=g(ve,2);De(Ce,{class:"form-field required",name:"password",children:Ee,$$slots:{default:(rt,be)=>{const Le=ne(()=>be.uniqueId);var Ke=e3(),st=F(Ke),it=g(st,2);Wi(it,!0),V(()=>{H(st,"for",r(Le)),H(it,"id",r(Le))}),xt(it,()=>r($),He=>y($,He)),p(rt,Ke)}}});var Ie=g(Ce,2);let ze;var qe=g(ee,2),je=T(qe);V(()=>{ze=Re(Ie,1,"btn btn-lg btn-block btn-next",null,ze,{"btn-disabled":r(v),"btn-loading":r(v)}),je.disabled=r(v)}),re("submit",ee,Ct(w)),re("click",je,()=>{y(m,"")}),p(ae,xe)};G(ue,ae=>{r(m)?ae(we,!1):ae(ke)})}p(Se,he)};G(pe,Se=>{r(c),M(()=>r(c).otp.enabled)&&Se(Te)},!0)}p(me,_e)};G(oe,me=>{r(c),r(b),M(()=>r(c).password.enabled&&!r(b))?me(ce):me(le,!1)},!0)}p(z,X)};G(W,z=>{r(_)?z(Y):z(J,!1)})}p(E,A)},$$slots:{default:!0}}),Ve(),a()}function on(n){if(!n)throw Error("Parameter args is required");if(!n.component==!n.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(n.component&&(n.asyncComponent=()=>Promise.resolve(n.component)),typeof n.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(n.conditions){Array.isArray(n.conditions)||(n.conditions=[n.conditions]);for(let t=0;t<n.conditions.length;t++)if(!n.conditions[t]||typeof n.conditions[t]!="function")throw Error("Invalid parameter conditions["+t+"]")}return n.loadingComponent&&(n.asyncComponent.loading=n.loadingComponent,n.asyncComponent.loadingParams=n.loadingParams||void 0),{component:n.asyncComponent,userData:n.userData,conditions:n.conditions&&n.conditions.length?n.conditions:void 0,props:n.props&&Object.keys(n.props).length?n.props:{},_sveltesparouter:!0}}const r3={"/pbinstal/:token":on({asyncComponent:()=>Ut(()=>import("./PageInstaller-DyJa1fJB.js"),[],import.meta.url),conditions:[n=>n.params.token&&!Wl(n.params.token)],userData:{showAppSidebar:!1}}),"/login":on({component:i3,conditions:[n=>!Ae.authStore.isValid],userData:{showAppSidebar:!1}}),"/request-password-reset":on({asyncComponent:()=>Ut(()=>import("./PageSuperuserRequestPasswordReset-B31GQQY9.js"),[],import.meta.url),conditions:[n=>!Ae.authStore.isValid],userData:{showAppSidebar:!1}}),"/confirm-password-reset/:token":on({asyncComponent:()=>Ut(()=>import("./PageSuperuserConfirmPasswordReset-DouEgjOU.js"),[],import.meta.url),conditions:[n=>!Ae.authStore.isValid],userData:{showAppSidebar:!1}}),"/collections":on({component:IN,conditions:[n=>Ae.authStore.isValid],userData:{showAppSidebar:!0}}),"/logs":on({component:XT,conditions:[n=>Ae.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings":on({component:TR,conditions:[n=>Ae.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/mail":on({component:Pq,conditions:[n=>Ae.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/storage":on({component:Uq,conditions:[n=>Ae.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/export-collections":on({component:CF,conditions:[n=>Ae.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/import-collections":on({component:dq,conditions:[n=>Ae.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/backups":on({component:vF,conditions:[n=>Ae.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/crons":on({component:_F,conditions:[n=>Ae.authStore.isValid],userData:{showAppSidebar:!0}}),"/users/confirm-password-reset/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmPasswordReset-TsKYO91d.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-password-reset/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmPasswordReset-TsKYO91d.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/users/confirm-verification/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmVerification-DZkdBAiu.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-verification/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmVerification-DZkdBAiu.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/users/confirm-email-change/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmEmailChange-CHtm6s1I.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-email-change/:token":on({asyncComponent:()=>Ut(()=>import("./PageRecordConfirmEmailChange-CHtm6s1I.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/oauth2-redirect-success":on({asyncComponent:()=>Ut(()=>import("./PageOAuth2RedirectSuccess-DVB_Csav.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/oauth2-redirect-failure":on({asyncComponent:()=>Ut(()=>import("./PageOAuth2RedirectFailure-BpEi3wYK.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"*":on({component:q1,userData:{showAppSidebar:!1}})};var a3=x('<link rel="shortcut icon" type="image/png"/>'),s3=x('<div class="txt-ellipsis current-superuser svelte-1n46o8q"> </div> <hr/> <a href="/collections?collection=_superusers" class="dropdown-item closable" role="menuitem"><i class="ri-shield-user-line" aria-hidden="true"></i> <span class="txt">Manage superusers</span></a> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-logout-circle-line" aria-hidden="true"></i> <span class="txt">Logout</span></button>',1),o3=x('<i class="ri-sun-line" aria-hidden="true"></i>'),l3=x('<i class="ri-moon-line" aria-hidden="true"></i>'),c3=x('<aside class="app-sidebar"><a href="/" class="logo logo-sm"><img alt="PocketBase logo" width="40" height="40"/></a> <nav class="main-menu"><a href="/collections" class="menu-item" aria-label="Collections"><i class="ri-database-2-line"></i></a> <a href="/logs" class="menu-item" aria-label="Logs"><i class="ri-line-chart-line"></i></a> <a href="/settings" class="menu-item" aria-label="Settings"><i class="ri-tools-line"></i></a></nav> <div tabindex="0" role="button" aria-label="Logged superuser menu" class="thumb thumb-circle link-hint"><span class="initials"> </span> <!></div> <button class="btn btn-transparent btn-sm m-t-10" title="Toggle dark theme"><!></button></aside>'),u3=x('<div class="tinymce-preloader hidden"><!></div>'),d3=x('<div class="app-layout"><!> <div class="app-body"><!> <!></div></div> <!> <!>',1);function f3(n,e){Ue(e,!1);const t=()=>It(Hl,"$superuser",s),i=()=>It(In,"$pageTitle",s),a=()=>It(mu,"$appName",s),[s,o]=At();let l,c=P(!1);const u="pb_ui_theme";let d=P(!1);function f(j){y(d,!!j);try{const U=document.documentElement;r(d)?U.classList.add("dark"):U.classList.remove("dark")}catch{}}function h(){const j=window.localStorage?.getItem(u);if(j==="dark"||j==="light"){f(j==="dark");return}const U=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;f(U)}function v(){f(!r(d)),window.localStorage?.setItem(u,r(d)?"dark":"light")}let _=P(!1);function b(j){j?.detail?.location!==l&&(y(c,!!j?.detail?.userData?.showAppSidebar),l=j?.detail?.location,Kn(In,""),nn({}),Im())}function m(){cs("/")}async function k(){if(t()?.id)try{const j=await Ae.settings.getAll({$cancelKey:"initialAppSettings"});Kn(mu,j?.meta?.appName||""),Kn(So,!!j?.meta?.hideControls)}catch(j){j?.isAbort||console.warn("Failed to load app settings.",j)}}un(()=>{h()});function S(){Ae.logout()}ie(()=>t(),()=>{t()?.id&&k()}),dt(),Be();var $=d3();ky("1n46o8q",j=>{var U=et(),W=F(U);{var Y=J=>{var z=a3();V(()=>H(z,"href",`${M(()=>"./")??""}images/favicon/favicon_prod.png`)),p(J,z)};G(W,J=>{M(()=>window.location.protocol=="https:")&&J(Y)})}Kb(J=>{qb.title=J??""},[()=>(N(R),i(),a(),M(()=>R.joinNonEmpty([i(),a(),"PocketBase"]," - ",!1)))]),p(j,U)});var D=F($),I=T(D);{var C=j=>{var U=c3(),W=T(U),Y=T(W);Ge(W,ue=>ni?.(ue));var J=g(W,2),z=T(J);Ge(z,ue=>ni?.(ue)),Ge(z,(ue,ke)=>nr?.(ue,ke),()=>({path:"/collections/?.*",className:"current-route"})),Ge(z,(ue,ke)=>ht?.(ue,ke),()=>({text:"Collections",position:"right"}));var X=g(z,2);Ge(X,ue=>ni?.(ue)),Ge(X,(ue,ke)=>nr?.(ue,ke),()=>({path:"/logs/?.*",className:"current-route"})),Ge(X,(ue,ke)=>ht?.(ue,ke),()=>({text:"Logs",position:"right"}));var oe=g(X,2);Ge(oe,ue=>ni?.(ue)),Ge(oe,(ue,ke)=>nr?.(ue,ke),()=>({path:"/settings/?.*",className:"current-route"})),Ge(oe,(ue,ke)=>ht?.(ue,ke),()=>({text:"Settings",position:"right"}));var ce=g(J,2),le=T(ce),me=T(le),_e=g(le,2);Jn(_e,{class:"dropdown dropdown-nowrap dropdown-upside dropdown-left",children:(ue,ke)=>{var we=s3(),ae=F(we),xe=T(ae),se=g(ae,4);Ge(se,ee=>ni?.(ee));var ge=g(se,2);V(()=>{H(ae,"title",(t(),M(()=>t().email))),$e(xe,(t(),M(()=>t().email)))}),re("click",ge,S),p(ue,we)},$$slots:{default:!0}});var pe=g(ce,2),Te=T(pe);{var Se=ue=>{var ke=o3();p(ue,ke)},he=ue=>{var ke=l3();p(ue,ke)};G(Te,ue=>{r(d)?ue(Se):ue(he,!1)})}V(ue=>{H(Y,"src",`${M(()=>"./")??""}images/logo.svg`),H(ce,"title",(t(),M(()=>t().email))),$e(me,ue),H(pe,"aria-pressed",r(d))},[()=>(N(R),t(),M(()=>R.getInitials(t().email)))]),re("click",pe,v),p(j,U)};G(I,j=>{t(),r(c),M(()=>t()?.id&&r(c))&&j(C)})}var w=g(I,2),E=T(w);L1(E,{get routes(){return r3},$$events:{routeLoading:b,conditionsFailed:m}});var O=g(E,2);u1(O,{});var A=g(D,2);Jx(A,{});var q=g(A,2);{var L=j=>{var U=u3(),W=T(U);{let Y=ne(()=>(N(R),M(()=>R.defaultEditorOptions())));ld(W,{get conf(){return r(Y)},$$events:{init:()=>{y(_,!0)}}})}p(j,U)};G(q,j=>{r(c)&&!r(_)&&j(L)})}p(n,$),Ve(),o()}new f3({target:document.getElementById("app")});export{Lu as $,qn as A,ls as B,ft as C,H as D,ne as E,Hq as F,Re as G,G as H,Ge as I,Wi as J,ni as K,$e as L,N as M,hn as N,R as O,et as P,To as Q,Wl as R,Kn as S,un as T,At as U,In as V,qt as W,_t as X,It as Y,Gn as Z,bL as _,te as a,bt as a0,Mt as a1,M as a2,Oa as a3,yi as a4,Cy as a5,IS as a6,v3 as a7,ht as a8,Nt as a9,Ae as b,dr as c,r as d,dt as e,x as f,ts as g,F as h,Be as i,g as j,T as k,ie as l,P as m,De as n,Ee as o,Ue as p,pt as q,cs as r,y as s,Tn as t,V as u,xt as v,p as w,re as x,Ct as y,Ve as z};
