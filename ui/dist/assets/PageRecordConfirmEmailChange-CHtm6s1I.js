import{p as R,a as S,l as W,M as Y,e as A,i as B,F as K,P as N,h as m,H as T,d as a,m as v,w as o,f as _,j as t,x as D,k as b,n as U,o as V,J as X,u as k,v as Z,y as aa,z as ea,s as l,Q as sa,g as ta,b as ra,O as na,L as oa,D as H,E as la,G as ia}from"./index-BMgSTU82.js";var ca=_('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Successfully changed the user email address.</p> <p>You can now sign in with your new email address.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),da=_('to <strong class="txt-nowrap"> </strong>',1),ua=_('<label>Password</label> <input type="password" required/>',1),fa=_('<form><div class="content txt-center m-b-base"><h5>Type your password to confirm changing your email address <!></h5></div> <!> <button type="submit"><span class="txt">Confirm new email</span></button></form>');function ma(J,x){R(x,!1);const g=v();let i=S(x,"params",8),h=v(""),r=v(!1),C=v(!1);async function L(){if(a(r))return;l(r,!0);const w=new sa("../");try{const c=ta(i()?.token);await w.collection(c.collectionId).confirmEmailChange(i()?.token,a(h)),l(C,!0)}catch(c){ra.error(c)}l(r,!1)}W(()=>Y(i()),()=>{l(g,na.getJWTPayload(i()?.token).newEmail||"")}),A(),B(),K(J,{nobranding:!0,children:(w,c)=>{var P=N(),$=m(P);{var j=e=>{var s=ca(),d=t(m(s),2);D("click",d,()=>window.close()),o(e,s)},z=e=>{var s=fa(),d=b(s),G=b(d),M=t(b(G));{var O=n=>{var u=da(),f=t(m(u)),p=b(f);k(()=>oa(p,a(g))),o(n,u)};T(M,n=>{a(g)&&n(O)})}var q=t(d,2);U(q,{class:"form-field required",name:"password",children:V,$$slots:{default:(n,u)=>{const f=la(()=>u.uniqueId);var p=ua(),I=m(p),y=t(I,2);X(y,!0),k(()=>{H(I,"for",a(f)),H(y,"id",a(f))}),Z(y,()=>a(h),Q=>l(h,Q)),o(n,p)}}});var E=t(q,2);let F;k(()=>{F=ia(E,1,"btn btn-lg btn-block",null,F,{"btn-loading":a(r)}),E.disabled=a(r)}),D("submit",s,aa(L)),o(e,s)};T($,e=>{a(C)?e(j):e(z,!1)})}o(w,P)},$$slots:{default:!0}}),ea()}export{ma as default};
