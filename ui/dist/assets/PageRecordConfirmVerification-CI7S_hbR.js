import{p as Q,a as S,d as s,m as u,s as a,Q as P,g as y,l as A,R,M as B,e as D,i as J,F as K,P as L,h as _,H as I,w as i,f as d,j as w,x as m,z as N,u as O,b as U,G as W}from"./index-Bek02XaP.js";var X=d('<div class="txt-center"><div class="loader loader-lg"><em>Please wait...</em></div></div>'),Y=d('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Successfully verified email address.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),Z=d('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Please check your email for the new verification link.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),$=d('<button type="button"><span class="txt">Resend</span></button>'),ee=d('<button type="button" class="btn btn-transparent btn-block">Close</button>'),te=d('<div class="alert alert-danger"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content txt-bold"><p>Invalid or expired verification token.</p></div></div> <!>',1);function se(V,h){Q(h,!1);const x=u();let n=S(h,"params",8),k=u(!1),p=u(!1),g=u(!1),v=u(!1);F();async function F(){if(s(p))return;a(p,!0);const c=new P("../");try{const f=y(n()?.token);await c.collection(f.collectionId).confirmVerification(n()?.token),a(k,!0)}catch{a(k,!1)}a(p,!1)}async function T(){const c=y(n()?.token);if(s(v)||!c.collectionId||!c.email)return;a(v,!0);const f=new P("../");try{const l=y(n()?.token);await f.collection(l.collectionId).requestVerification(l.email),a(g,!0)}catch(l){U.error(l),a(g,!1)}a(v,!1)}A(()=>(B(n()),R),()=>{a(x,n()?.token&&R(n().token))}),D(),J(),K(V,{nobranding:!0,children:(c,f)=>{var l=L(),j=_(l);{var q=e=>{var t=X();i(e,t)},z=e=>{var t=Y(),b=w(_(t),2);m("click",b,()=>window.close()),i(e,t)},E=e=>{var t=Z(),b=w(_(t),2);m("click",b,()=>window.close()),i(e,t)},G=e=>{var t=te(),b=w(_(t),2);{var H=r=>{var o=$();let C;O(()=>{C=W(o,1,"btn btn-transparent btn-block",null,C,{"btn-loading":s(v)}),o.disabled=s(v)}),m("click",o,T),i(r,o)},M=r=>{var o=ee();m("click",o,()=>window.close()),i(r,o)};I(b,r=>{s(x)?r(H):r(M,!1)})}i(e,t)};I(j,e=>{s(p)?e(q):s(k)?e(z,1):s(g)?e(E,2):e(G,!1)})}i(c,l)},$$slots:{default:!0}}),N()}export{se as default};
