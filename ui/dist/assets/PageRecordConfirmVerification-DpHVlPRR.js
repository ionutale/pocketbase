import{p as O,a as U,d as a,m,s as e,Q as q,g as R,l as W,R as z,M as X,e as Y,i as Z,F as $,P as I,h as v,H as y,w as t,f,z as ee,j as V,x as w,u as te,b as ae,G as se}from"./index-D0ntNp7m.js";var ne=f('<div class="txt-center"><div class="loader loader-lg"><em>Please wait...</em></div></div>'),le=f('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Successfully verified email address.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),oe=f('<div class="alert alert-success"><div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Please check your email for the new verification link.</p></div></div> <button type="button" class="btn btn-transparent btn-block">Close</button>',1),ie=f('<button type="button"><span class="txt">Resend</span></button>'),re=f('<button type="button" class="btn btn-transparent btn-block">Close</button>'),ce=f('<div class="alert alert-danger"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content txt-bold"><p>Invalid or expired verification token.</p></div></div> <!>',1);function ve(E,F){O(F,!1);const T=m();let s=U(F,"params",8),h=m(!1),k=m(!1),x=m(!1),b=m(!1);G();async function G(){if(a(k))return;e(k,!0);const o=new q("../");try{const u=R(s()?.token);await o.collection(u.collectionId).confirmVerification(s()?.token),e(h,!0)}catch{e(h,!1)}e(k,!1)}async function H(){const o=R(s()?.token);if(a(b)||!o.collectionId||!o.email)return;e(b,!0);const u=new q("../");try{const n=R(s()?.token);await u.collection(n.collectionId).requestVerification(n.email),e(x,!0)}catch(n){ae.error(n),e(x,!1)}e(b,!1)}W(()=>(X(s()),z),()=>{e(T,s()?.token&&z(s().token))}),Y(),Z(),$(E,{nobranding:!0,children:(o,u)=>{var n=I(),M=v(n);{var Q=i=>{var g=ne();t(i,g)},S=i=>{var g=I(),A=v(g);{var B=r=>{var p=le(),C=V(v(p),2);w("click",C,()=>window.close()),t(r,p)},D=r=>{var p=I(),C=v(p);{var J=c=>{var _=oe(),P=V(v(_),2);w("click",P,()=>window.close()),t(c,_)},K=c=>{var _=ce(),P=V(v(_),2);{var L=d=>{var l=ie();let j;te(()=>{j=se(l,1,"btn btn-transparent btn-block",null,j,{"btn-loading":a(b)}),l.disabled=a(b)}),w("click",l,H),t(d,l)},N=d=>{var l=re();w("click",l,()=>window.close()),t(d,l)};y(P,d=>{a(T)?d(L):d(N,!1)})}t(c,_)};y(C,c=>{a(x)?c(J):c(K,!1)},!0)}t(r,p)};y(A,r=>{a(h)?r(B):r(D,!1)},!0)}t(i,g)};y(M,i=>{a(k)?i(Q):i(S,!1)})}t(o,n)},$$slots:{default:!0}}),ee()}export{ve as default};
