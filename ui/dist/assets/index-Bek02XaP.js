const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FilterAutocompleteInput-DaWy_bqh.js","./index-c-5CXhij.js","./ListApiDocs-D7f_9Wpo.js","./FieldsQueryParam-D_NcjopN.js","./ListApiDocs-g_Ubu-fN.css","./ViewApiDocs-CRvyHNgc.js","./CreateApiDocs-CxJi3rzZ.js","./UpdateApiDocs-Xg0NBQdn.js","./AuthMethodsDocs-5JRyrLZW.js","./AuthWithPasswordDocs-eY-KrkHK.js","./AuthWithOAuth2Docs-B0j_25O8.js","./AuthWithOtpDocs-mLaStqgN.js","./AuthRefreshDocs-wFd7ThUy.js","./CodeEditor-UHXdE3Dc.js","./Leaflet-BiDYDjW6.js","./Leaflet-C-JzZQCi.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const Bc=!1;var co=Array.isArray,hb=Array.prototype.indexOf,ia=Array.prototype.includes,Cl=Array.from,Lv=Object.defineProperty,Sr=Object.getOwnPropertyDescriptor,Nv=Object.getOwnPropertyDescriptors,vb=Object.prototype,pb=Array.prototype,zu=Object.getPrototypeOf,Hd=Object.isExtensible;function Bs(n){return typeof n=="function"}const ai=()=>{};function mb(n){return typeof n?.then=="function"}function gb(n){return n()}function cl(n){for(var e=0;e<n.length;e++)n[e]()}function Rv(){var n,e,t=new Promise((i,s)=>{n=i,e=s});return{promise:t,resolve:n,reject:e}}function Zs(n,e){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const t=[];for(const i of n)if(t.push(i),t.length===e)break;return t}const Pn=2,ha=4,uo=8,ju=1<<24,cr=16,Yi=32,Es=64,Hc=128,Ii=512,kn=1024,Mn=2048,Oi=4096,vi=8192,Tr=16384,Zr=32768,Gr=65536,Wd=1<<17,Uu=1<<18,Os=1<<19,Fv=1<<20,xr=1<<25,Ts=65536,Wc=1<<21,Vu=1<<22,Br=1<<23,rr=Symbol("$state"),qv=Symbol("legacy props"),bb=Symbol(""),vs=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},Bu=!!globalThis.document?.contentType&&globalThis.document.contentType.includes("xml");function Ie(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function El(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function yb(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function _b(n,e,t){throw new Error("https://svelte.dev/e/each_key_duplicate")}function xb(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function wb(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function kb(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Sb(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Tb(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function $b(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ib(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Cb(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Eb(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ob(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Db=1,Pb=2,zv=4,Mb=8,Ab=16,Lb=1,Nb=2,jv=4,Rb=8,Fb=16,qb=1,zb=2,jb=4,Ub=1,Vb=2,wn=Symbol(),Uv="http://www.w3.org/1999/xhtml",Bb="http://www.w3.org/2000/svg",Hb="http://www.w3.org/1998/Math/MathML",Wb="@attach";function Yb(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Kb(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Vv(n){return n===this.v}function Hu(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Bv(n){return!Hu(n,this.v)}let va=!1,Jb=!1;function Zb(){va=!0}let Xt=null;function ra(n){Xt=n}function Re(n,e=!1,t){Xt={p:Xt,i:!1,c:null,e:null,s:n,x:null,l:va&&!e?{s:null,u:null,$:[]}:null}}function Fe(n){var e=Xt,t=e.e;if(t!==null){e.e=null;for(var i of t)vp(i)}return n!==void 0&&(e.x=n),e.i=!0,Xt=e.p,n??{}}function Ds(){return!va||Xt!==null&&Xt.l===null}let ps=[];function Hv(){var n=ps;ps=[],cl(n)}function li(n){if(ps.length===0&&!Gs){var e=ps;queueMicrotask(()=>{e===ps&&Hv()})}ps.push(n)}function Gb(){for(;ps.length>0;)Hv()}function Wv(n){var e=jt;if(e===null)return Vt.f|=Br,n;if((e.f&Zr)===0&&(e.f&ha)===0)throw n;jr(n,e)}function jr(n,e){for(;e!==null;){if((e.f&Hc)!==0){if((e.f&Zr)===0)throw n;try{e.b.error(n);return}catch(t){n=t}}e=e.parent}throw n}const Xb=-7169;function dn(n,e){n.f=n.f&Xb|e}function Wu(n){(n.f&Ii)!==0||n.deps===null?dn(n,kn):dn(n,Oi)}function Yv(n){if(n!==null)for(const e of n)(e.f&Pn)===0||(e.f&Ts)===0||(e.f^=Ts,Yv(e.deps))}function Kv(n,e,t){(n.f&Mn)!==0?e.add(n):(n.f&Oi)!==0&&t.add(n),Yv(n.deps),dn(n,kn)}const Io=new Set;let Yt=null,ul=null,Ri=null,ei=[],Ol=null,Yc=!1,Gs=!1;class $r{current=new Map;previous=new Map;#t=new Set;#o=new Set;#e=0;#s=0;#n=null;#a=new Set;#i=new Set;#r=new Map;is_fork=!1;#l=!1;#u(){return this.is_fork||this.#s>0}skip_effect(e){this.#r.has(e)||this.#r.set(e,{d:[],m:[]})}unskip_effect(e){var t=this.#r.get(e);if(t){this.#r.delete(e);for(var i of t.d)dn(i,Mn),Fi(i);for(i of t.m)dn(i,Oi),Fi(i)}}process(e){ei=[],this.apply();var t=[],i=[];for(const s of e)this.#c(s,t,i);if(this.#u()){this.#d(i),this.#d(t);for(const[s,a]of this.#r)Qv(s,a)}else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#h(),ul=this,Yt=null,Yd(i),Yd(t),ul=null,this.#n?.resolve()}Ri=null}#c(e,t,i){e.f^=kn;for(var s=e.first;s!==null;){var a=s.f,o=(a&(Yi|Es))!==0,l=o&&(a&kn)!==0,c=l||(a&vi)!==0||this.#r.has(s);if(!c&&s.fn!==null){o?s.f^=kn:(a&ha)!==0?t.push(s):ga(s)&&((a&cr)!==0&&this.#i.add(s),$s(s));var u=s.first;if(u!==null){s=u;continue}}for(;s!==null;){var d=s.next;if(d!==null){s=d;break}s=s.parent}}}#d(e){for(var t=0;t<e.length;t+=1)Kv(e[t],this.#a,this.#i)}capture(e,t){t!==wn&&!this.previous.has(e)&&this.previous.set(e,t),(e.f&Br)===0&&(this.current.set(e,e.v),Ri?.set(e,e.v))}activate(){Yt=this,this.apply()}deactivate(){Yt===this&&(Yt=null,Ri=null)}flush(){if(this.activate(),ei.length>0){if(Zv(),Yt!==null&&Yt!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#o)e(this);this.#o.clear()}#h(){if(Io.size>1){this.previous.clear();var e=Ri,t=!0;for(const s of Io){if(s===this){t=!1;continue}const a=[];for(const[l,c]of this.current){if(s.current.has(l))if(t&&c!==s.current.get(l))s.current.set(l,c);else continue;a.push(l)}if(a.length===0)continue;const o=[...s.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var i=ei;ei=[];const l=new Set,c=new Map;for(const u of a)Gv(u,o,l,c);if(ei.length>0){Yt=s,s.apply();for(const u of ei)s.#c(u,[],[]);s.deactivate()}ei=i}}Yt=null,Ri=e}Io.delete(this)}increment(e){this.#e+=1,e&&(this.#s+=1)}decrement(e){this.#e-=1,e&&(this.#s-=1),!this.#l&&(this.#l=!0,li(()=>{this.#l=!1,this.#u()?ei.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#a)this.#i.delete(e),dn(e,Mn),Fi(e);for(const e of this.#i)dn(e,Oi),Fi(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#o.add(e)}settled(){return(this.#n??=Rv()).promise}static ensure(){if(Yt===null){const e=Yt=new $r;Io.add(Yt),Gs||li(()=>{Yt===e&&e.flush()})}return Yt}apply(){}}function Jv(n){var e=Gs;Gs=!0;try{for(var t;;){if(Gb(),ei.length===0&&(Yt?.flush(),ei.length===0))return Ol=null,t;Zv()}}finally{Gs=e}}function Zv(){Yc=!0;var n=null;try{for(var e=0;ei.length>0;){var t=$r.ensure();if(e++>1e3){var i,s;Qb()}t.process(ei),Hr.clear()}}finally{ei=[],Yc=!1,Ol=null}}function Qb(){try{Sb()}catch(n){jr(n,Ol)}}let br=null;function Yd(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var i=n[t++];if((i.f&(Tr|vi))===0&&ga(i)&&(br=new Set,$s(i),i.deps===null&&i.first===null&&i.nodes===null&&i.teardown===null&&i.ac===null&&bp(i),br?.size>0)){Hr.clear();for(const s of br){if((s.f&(Tr|vi))!==0)continue;const a=[s];let o=s.parent;for(;o!==null;)br.has(o)&&(br.delete(o),a.push(o)),o=o.parent;for(let l=a.length-1;l>=0;l--){const c=a[l];(c.f&(Tr|vi))===0&&$s(c)}}br.clear()}}br=null}}function Gv(n,e,t,i){if(!t.has(n)&&(t.add(n),n.reactions!==null))for(const s of n.reactions){const a=s.f;(a&Pn)!==0?Gv(s,e,t,i):(a&(Vu|cr))!==0&&(a&Mn)===0&&Xv(s,e,i)&&(dn(s,Mn),Fi(s))}}function Xv(n,e,t){const i=t.get(n);if(i!==void 0)return i;if(n.deps!==null)for(const s of n.deps){if(ia.call(e,s))return!0;if((s.f&Pn)!==0&&Xv(s,e,t))return t.set(s,!0),!0}return t.set(n,!1),!1}function Fi(n){var e=Ol=n,t=e.b;if(t?.is_pending&&(n.f&(ha|uo|ju))!==0&&(n.f&Zr)===0){t.defer_effect(n);return}for(;e.parent!==null;){e=e.parent;var i=e.f;if(Yc&&e===jt&&(i&cr)!==0&&(i&Uu)===0&&(i&Zr)!==0)return;if((i&(Es|Yi))!==0){if((i&kn)===0)return;e.f^=kn}}ei.push(e)}function Qv(n,e){if(!((n.f&Yi)!==0&&(n.f&kn)!==0)){(n.f&Mn)!==0?e.d.push(n):(n.f&Oi)!==0&&e.m.push(n),dn(n,kn);for(var t=n.first;t!==null;)Qv(t,e),t=t.next}}function ey(n){let e=0,t=Vi(0),i;return()=>{Ju()&&(r(t),rs(()=>(e===0&&(i=A(()=>n(()=>Ua(t)))),e+=1,()=>{li(()=>{e-=1,e===0&&(i?.(),i=void 0,Ua(t))})})))}}var ty=Gr|Os;function ny(n,e,t,i){new iy(n,e,t,i)}class iy{parent;is_pending=!1;transform_error;#t;#o=null;#e;#s;#n;#a=null;#i=null;#r=null;#l=null;#u=0;#c=0;#d=!1;#h=new Set;#v=new Set;#f=null;#y=ey(()=>(this.#f=Vi(this.#u),()=>{this.#f=null}));constructor(e,t,i,s){this.#t=e,this.#e=t,this.#s=a=>{var o=jt;o.b=this,o.f|=Hc,i(a)},this.parent=jt.b,this.transform_error=s??this.parent?.transform_error??(a=>a),this.#n=Ps(()=>{this.#g()},ty)}#_(){try{this.#a=ni(()=>this.#s(this.#t))}catch(e){this.error(e)}}#x(e){const t=this.#e.failed;t&&(this.#r=ni(()=>{t(this.#t,()=>e,()=>()=>{})}))}#w(){const e=this.#e.pending;e&&(this.is_pending=!0,this.#i=ni(()=>e(this.#t)),li(()=>{var t=this.#l=document.createDocumentFragment(),i=ar();t.append(i),this.#a=this.#m(()=>($r.ensure(),ni(()=>this.#s(i)))),this.#c===0&&(this.#t.before(t),this.#l=null,xs(this.#i,()=>{this.#i=null}),this.#p())}))}#g(){try{if(this.is_pending=this.has_pending_snippet(),this.#c=0,this.#u=0,this.#a=ni(()=>{this.#s(this.#t)}),this.#c>0){var e=this.#l=document.createDocumentFragment();xp(this.#a,e);const t=this.#e.pending;this.#i=ni(()=>t(this.#t))}else this.#p()}catch(t){this.error(t)}}#p(){this.is_pending=!1;for(const e of this.#h)dn(e,Mn),Fi(e);for(const e of this.#v)dn(e,Oi),Fi(e);this.#h.clear(),this.#v.clear()}defer_effect(e){Kv(e,this.#h,this.#v)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#m(e){var t=jt,i=Vt,s=Xt;Pi(this.#n),Di(this.#n),ra(this.#n.ctx);try{return e()}catch(a){return Wv(a),null}finally{Pi(t),Di(i),ra(s)}}#b(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(e);return}this.#c+=e,this.#c===0&&(this.#p(),this.#i&&xs(this.#i,()=>{this.#i=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(e){this.#b(e),this.#u+=e,!(!this.#f||this.#d)&&(this.#d=!0,li(()=>{this.#d=!1,this.#f&&sr(this.#f,this.#u)}))}get_effect_pending(){return this.#y(),r(this.#f)}error(e){var t=this.#e.onerror;let i=this.#e.failed;if(!t&&!i)throw e;this.#a&&(Dn(this.#a),this.#a=null),this.#i&&(Dn(this.#i),this.#i=null),this.#r&&(Dn(this.#r),this.#r=null);var s=!1,a=!1;const o=()=>{if(s){Kb();return}s=!0,a&&Ob(),this.#r!==null&&xs(this.#r,()=>{this.#r=null}),this.#m(()=>{$r.ensure(),this.#g()})},l=c=>{try{a=!0,t?.(c,o),a=!1}catch(u){jr(u,this.#n&&this.#n.parent)}i&&(this.#r=this.#m(()=>{$r.ensure();try{return ni(()=>{var u=jt;u.b=this,u.f|=Hc,i(this.#t,()=>c,()=>o)})}catch(u){return jr(u,this.#n.parent),null}}))};li(()=>{var c;try{c=this.transform_error(e)}catch(u){jr(u,this.#n&&this.#n.parent);return}c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(l,u=>jr(u,this.#n&&this.#n.parent)):l(c)})}}function Yu(n,e,t,i){const s=Ds()?fo:ne;var a=n.filter(f=>!f.settled);if(t.length===0&&a.length===0){i(e.map(s));return}var o=jt,l=ep(),c=a.length===1?a[0].promise:a.length>1?Promise.all(a.map(f=>f.promise)):null;function u(f){l();try{i(f)}catch(h){(o.f&Tr)===0&&jr(h,o)}dl()}if(t.length===0){c.then(()=>u(e.map(s)));return}function d(){l(),Promise.all(t.map(f=>ry(f))).then(f=>u([...e.map(s),...f])).catch(f=>jr(f,o))}c?c.then(d):d()}function ep(){var n=jt,e=Vt,t=Xt,i=Yt;return function(a=!0){Pi(n),Di(e),ra(t),a&&i?.activate()}}function dl(n=!0){Pi(null),Di(null),ra(null),n&&Yt?.deactivate()}function tp(){var n=jt.b,e=Yt,t=n.is_rendered();return n.update_pending_count(1),e.increment(t),()=>{n.update_pending_count(-1),e.decrement(t)}}function fo(n){var e=Pn|Mn,t=Vt!==null&&(Vt.f&Pn)!==0?Vt:null;return jt!==null&&(jt.f|=Os),{ctx:Xt,deps:null,effects:null,equals:Vv,f:e,fn:n,reactions:null,rv:0,v:wn,wv:0,parent:t??jt,ac:null}}function ry(n,e,t){jt===null&&yb();var s=void 0,a=Vi(wn),o=!Vt,l=new Map;return py(()=>{var c=Rv();s=c.promise;try{Promise.resolve(n()).then(c.resolve,c.reject).finally(dl)}catch(h){c.reject(h),dl()}var u=Yt;if(o){var d=tp();l.get(u)?.reject(vs),l.delete(u),l.set(u,c)}const f=(h,v=void 0)=>{if(u.activate(),v)v!==vs&&(a.f|=Br,sr(a,v));else{(a.f&Br)!==0&&(a.f^=Br),sr(a,h);for(const[_,p]of l){if(l.delete(_),_===u)break;p.reject(vs)}}d&&d()};c.promise.then(f,h=>f(null,h||"unknown"))}),ma(()=>{for(const c of l.values())c.reject(vs)}),new Promise(c=>{function u(d){function f(){d===s?c(a):u(s)}d.then(f,f)}u(s)})}function rn(n){const e=fo(n);return wp(e),e}function ne(n){const e=fo(n);return e.equals=Bv,e}function sy(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Dn(e[t])}}function ay(n){for(var e=n.parent;e!==null;){if((e.f&Pn)===0)return(e.f&Tr)===0?e:null;e=e.parent}return null}function Ku(n){var e,t=jt;Pi(ay(n));try{n.f&=~Ts,sy(n),e=$p(n)}finally{Pi(t)}return e}function np(n){var e=Ku(n);if(!n.equals(e)&&(n.wv=Sp(),(!Yt?.is_fork||n.deps===null)&&(n.v=e,n.deps===null))){dn(n,kn);return}Xr||(Ri!==null?(Ju()||Yt?.is_fork)&&Ri.set(n,e):Wu(n))}function oy(n){if(n.effects!==null)for(const e of n.effects)(e.teardown||e.ac)&&(e.teardown?.(),e.ac?.abort(vs),e.teardown=ai,e.ac=null,Xa(e,0),Zu(e))}function ip(n){if(n.effects!==null)for(const e of n.effects)e.teardown&&$s(e)}let Kc=new Set;const Hr=new Map;let rp=!1;function Vi(n,e){var t={f:0,v:n,reactions:null,equals:Vv,rv:0,wv:0};return t}function Ar(n,e){const t=Vi(n);return wp(t),t}function M(n,e=!1,t=!0){const i=Vi(n);return e||(i.equals=Bv),va&&t&&Xt!==null&&Xt.l!==null&&(Xt.l.s??=[]).push(i),i}function ot(n,e){return y(n,A(()=>r(n))),e}function y(n,e,t=!1){Vt!==null&&(!qi||(Vt.f&Wd)!==0)&&Ds()&&(Vt.f&(Pn|cr|Vu|Wd))!==0&&(Ci===null||!ia.call(Ci,n))&&Eb();let i=t?Ws(e):e;return sr(n,i)}function sr(n,e){if(!n.equals(e)){var t=n.v;Xr?Hr.set(n,e):Hr.set(n,t),n.v=e;var i=$r.ensure();if(i.capture(n,t),(n.f&Pn)!==0){const s=n;(n.f&Mn)!==0&&Ku(s),Wu(s)}n.wv=Sp(),sp(n,Mn),Ds()&&jt!==null&&(jt.f&kn)!==0&&(jt.f&(Yi|Es))===0&&(Si===null?yy([n]):Si.push(n)),!i.is_fork&&Kc.size>0&&!rp&&ly()}return e}function ly(){rp=!1;for(const n of Kc)(n.f&kn)!==0&&dn(n,Oi),ga(n)&&$s(n);Kc.clear()}function wr(n,e=1){var t=r(n),i=e===1?t++:t--;return y(n,t),i}function Ua(n){y(n,n.v+1)}function sp(n,e){var t=n.reactions;if(t!==null)for(var i=Ds(),s=t.length,a=0;a<s;a++){var o=t[a],l=o.f;if(!(!i&&o===jt)){var c=(l&Mn)===0;if(c&&dn(o,e),(l&Pn)!==0){var u=o;Ri?.delete(u),(l&Ts)===0&&(l&Ii&&(o.f|=Ts),sp(u,Oi))}else c&&((l&cr)!==0&&br!==null&&br.add(o),Fi(o))}}}function Ws(n){if(typeof n!="object"||n===null||rr in n)return n;const e=zu(n);if(e!==vb&&e!==pb)return n;var t=new Map,i=co(n),s=Ar(0),a=ws,o=l=>{if(ws===a)return l();var c=Vt,u=ws;Di(null),Gd(a);var d=l();return Di(c),Gd(u),d};return i&&t.set("length",Ar(n.length)),new Proxy(n,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ib();var d=t.get(c);return d===void 0?o(()=>{var f=Ar(u.value);return t.set(c,f),f}):y(d,u.value,!0),!0},deleteProperty(l,c){var u=t.get(c);if(u===void 0){if(c in l){const d=o(()=>Ar(wn));t.set(c,d),Ua(s)}}else y(u,wn),Ua(s);return!0},get(l,c,u){if(c===rr)return n;var d=t.get(c),f=c in l;if(d===void 0&&(!f||Sr(l,c)?.writable)&&(d=o(()=>{var v=Ws(f?l[c]:wn),_=Ar(v);return _}),t.set(c,d)),d!==void 0){var h=r(d);return h===wn?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=t.get(c);d&&(u.value=r(d))}else if(u===void 0){var f=t.get(c),h=f?.v;if(f!==void 0&&h!==wn)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===rr)return!0;var u=t.get(c),d=u!==void 0&&u.v!==wn||Reflect.has(l,c);if(u!==void 0||jt!==null&&(!d||Sr(l,c)?.writable)){u===void 0&&(u=o(()=>{var h=d?Ws(l[c]):wn,v=Ar(h);return v}),t.set(c,u));var f=r(u);if(f===wn)return!1}return d},set(l,c,u,d){var f=t.get(c),h=c in l;if(i&&c==="length")for(var v=u;v<f.v;v+=1){var _=t.get(v+"");_!==void 0?y(_,wn):v in l&&(_=o(()=>Ar(wn)),t.set(v+"",_))}if(f===void 0)(!h||Sr(l,c)?.writable)&&(f=o(()=>Ar(void 0)),y(f,Ws(u)),t.set(c,f));else{h=f.v!==wn;var p=o(()=>Ws(u));y(f,p)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m?.set&&m.set.call(d,u),!h){if(i&&typeof c=="string"){var w=t.get("length"),k=Number(c);Number.isInteger(k)&&k>=w.v&&y(w,k+1)}Ua(s)}return!0},ownKeys(l){r(s);var c=Reflect.ownKeys(l).filter(f=>{var h=t.get(f);return h===void 0||h.v!==wn});for(var[u,d]of t)d.v!==wn&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Cb()}})}function Kd(n){try{if(n!==null&&typeof n=="object"&&rr in n)return n[rr]}catch{}return n}function ap(n,e){return Object.is(Kd(n),Kd(e))}var kr,op,lp,cp,up;function cy(){if(kr===void 0){kr=window,op=document,lp=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;cp=Sr(e,"firstChild").get,up=Sr(e,"nextSibling").get,Hd(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Hd(t)&&(t.__t=void 0)}}function ar(n=""){return document.createTextNode(n)}function _s(n){return cp.call(n)}function ho(n){return up.call(n)}function S(n,e){return _s(n)}function V(n,e=!1){{var t=_s(n);return t instanceof Comment&&t.data===""?ho(t):t}}function g(n,e=1,t=!1){let i=n;for(;e--;)i=ho(i);return i}function uy(n){n.textContent=""}function dp(){return!1}function fp(n,e,t){return document.createElementNS(e??Uv,n,void 0)}function Bi(n,e){if(e){const t=document.body;n.autofocus=!0,li(()=>{document.activeElement===t&&n.focus()})}}let Jd=!1;function dy(){Jd||(Jd=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const e of n.target.elements)e.__on_r?.()})},{capture:!0}))}function pa(n){var e=Vt,t=jt;Di(null),Pi(null);try{return n()}finally{Di(e),Pi(t)}}function Dl(n,e,t,i=t){n.addEventListener(e,()=>pa(t));const s=n.__on_r;s?n.__on_r=()=>{s(),i(!0)}:n.__on_r=()=>i(!0),dy()}function hp(n){jt===null&&(Vt===null&&kb(),wb()),Xr&&xb()}function fy(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Mi(n,e,t){var i=jt;i!==null&&(i.f&vi)!==0&&(n|=vi);var s={ctx:Xt,deps:null,nodes:null,f:n|Mn|Ii,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{$s(s)}catch(l){throw Dn(s),l}else e!==null&&Fi(s);var a=s;if(t&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&Os)===0&&(a=a.first,(n&cr)!==0&&(n&Gr)!==0&&a!==null&&(a.f|=Gr)),a!==null&&(a.parent=i,i!==null&&fy(a,i),Vt!==null&&(Vt.f&Pn)!==0&&(n&Es)===0)){var o=Vt;(o.effects??=[]).push(a)}return s}function Ju(){return Vt!==null&&!qi}function ma(n){const e=Mi(uo,null,!1);return dn(e,kn),e.teardown=n,e}function Jc(n){hp();var e=jt.f,t=!Vt&&(e&Yi)!==0&&(e&Zr)===0;if(t){var i=Xt;(i.e??=[]).push(n)}else return vp(n)}function vp(n){return Mi(ha|Fv,n,!1)}function hy(n){return hp(),Mi(uo|Fv,n,!0)}function vy(n){$r.ensure();const e=Mi(Es|Os,n,!0);return(t={})=>new Promise(i=>{t.outro?xs(e,()=>{Dn(e),i(void 0)}):(Dn(e),i(void 0))})}function Ft(n){return Mi(ha,n,!1)}function re(n,e){var t=Xt,i={effect:null,ran:!1,deps:n};t.l.$.push(i),i.effect=rs(()=>{n(),!i.ran&&(i.ran=!0,A(e))})}function lt(){var n=Xt;rs(()=>{for(var e of n.l.$){e.deps();var t=e.effect;(t.f&kn)!==0&&t.deps!==null&&dn(t,Oi),ga(t)&&$s(t),e.ran=!1}})}function py(n){return Mi(Vu|Os,n,!0)}function rs(n,e=0){return Mi(uo|e,n,!0)}function j(n,e=[],t=[],i=[]){Yu(i,e,t,s=>{Mi(uo,()=>n(...s.map(r)),!0)})}function my(n,e=[],t=[],i=[]){if(t.length>0||i.length>0)var s=tp();Yu(i,e,t,a=>{Mi(ha,()=>n(...a.map(r)),!1),s&&s()})}function Ps(n,e=0){var t=Mi(cr|e,n,!0);return t}function pp(n,e=0){var t=Mi(ju|e,n,!0);return t}function ni(n){return Mi(Yi|Os,n,!0)}function mp(n){var e=n.teardown;if(e!==null){const t=Xr,i=Vt;Zd(!0),Di(null);try{e.call(null)}finally{Zd(t),Di(i)}}}function Zu(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const s=t.ac;s!==null&&pa(()=>{s.abort(vs)});var i=t.next;(t.f&Es)!==0?t.parent=null:Dn(t,e),t=i}}function gy(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&Yi)===0&&Dn(e),e=t}}function Dn(n,e=!0){var t=!1;(e||(n.f&Uu)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(gp(n.nodes.start,n.nodes.end),t=!0),Zu(n,e&&!t),Xa(n,0),dn(n,Tr);var i=n.nodes&&n.nodes.t;if(i!==null)for(const a of i)a.stop();mp(n);var s=n.parent;s!==null&&s.first!==null&&bp(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function gp(n,e){for(;n!==null;){var t=n===e?null:ho(n);n.remove(),n=t}}function bp(n){var e=n.parent,t=n.prev,i=n.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===n&&(e.first=i),e.last===n&&(e.last=t))}function xs(n,e,t=!0){var i=[];yp(n,i,!0);var s=()=>{t&&Dn(n),e&&e()},a=i.length;if(a>0){var o=()=>--a||s();for(var l of i)l.out(o)}else s()}function yp(n,e,t){if((n.f&vi)===0){n.f^=vi;var i=n.nodes&&n.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&e.push(l);for(var s=n.first;s!==null;){var a=s.next,o=(s.f&Gr)!==0||(s.f&Yi)!==0&&(n.f&cr)!==0;yp(s,e,o?t:!1),s=a}}}function Gu(n){_p(n,!0)}function _p(n,e){if((n.f&vi)!==0){n.f^=vi,(n.f&kn)===0&&(dn(n,Mn),Fi(n));for(var t=n.first;t!==null;){var i=t.next,s=(t.f&Gr)!==0||(t.f&Yi)!==0;_p(t,s?e:!1),t=i}var a=n.nodes&&n.nodes.t;if(a!==null)for(const o of a)(o.is_global||e)&&o.in()}}function xp(n,e){if(n.nodes)for(var t=n.nodes.start,i=n.nodes.end;t!==null;){var s=t===i?null:ho(t);e.append(t),t=s}}let Hs=null;function by(n){var e=Hs;try{if(Hs=new Set,A(n),e!==null)for(var t of Hs)e.add(t);return Hs}finally{Hs=e}}function Ys(n){for(var e of by(n))sr(e,e.v)}let Qo=!1,Xr=!1;function Zd(n){Xr=n}let Vt=null,qi=!1;function Di(n){Vt=n}let jt=null;function Pi(n){jt=n}let Ci=null;function wp(n){Vt!==null&&(Ci===null?Ci=[n]:Ci.push(n))}let ti=null,hi=0,Si=null;function yy(n){Si=n}let kp=1,ms=0,ws=ms;function Gd(n){ws=n}function Sp(){return++kp}function ga(n){var e=n.f;if((e&Mn)!==0)return!0;if(e&Pn&&(n.f&=~Ts),(e&Oi)!==0){for(var t=n.deps,i=t.length,s=0;s<i;s++){var a=t[s];if(ga(a)&&np(a),a.wv>n.wv)return!0}(e&Ii)!==0&&Ri===null&&dn(n,kn)}return!1}function Tp(n,e,t=!0){var i=n.reactions;if(i!==null&&!(Ci!==null&&ia.call(Ci,n)))for(var s=0;s<i.length;s++){var a=i[s];(a.f&Pn)!==0?Tp(a,e,!1):e===a&&(t?dn(a,Mn):(a.f&kn)!==0&&dn(a,Oi),Fi(a))}}function $p(n){var e=ti,t=hi,i=Si,s=Vt,a=Ci,o=Xt,l=qi,c=ws,u=n.f;ti=null,hi=0,Si=null,Vt=(u&(Yi|Es))===0?n:null,Ci=null,ra(n.ctx),qi=!1,ws=++ms,n.ac!==null&&(pa(()=>{n.ac.abort(vs)}),n.ac=null);try{n.f|=Wc;var d=n.fn,f=d();n.f|=Zr;var h=n.deps,v=Yt?.is_fork;if(ti!==null){var _;if(v||Xa(n,hi),h!==null&&hi>0)for(h.length=hi+ti.length,_=0;_<ti.length;_++)h[hi+_]=ti[_];else n.deps=h=ti;if(Ju()&&(n.f&Ii)!==0)for(_=hi;_<h.length;_++)(h[_].reactions??=[]).push(n)}else!v&&h!==null&&hi<h.length&&(Xa(n,hi),h.length=hi);if(Ds()&&Si!==null&&!qi&&h!==null&&(n.f&(Pn|Oi|Mn))===0)for(_=0;_<Si.length;_++)Tp(Si[_],n);if(s!==null&&s!==n){if(ms++,s.deps!==null)for(let p=0;p<t;p+=1)s.deps[p].rv=ms;if(e!==null)for(const p of e)p.rv=ms;Si!==null&&(i===null?i=Si:i.push(...Si))}return(n.f&Br)!==0&&(n.f^=Br),f}catch(p){return Wv(p)}finally{n.f^=Wc,ti=e,hi=t,Si=i,Vt=s,Ci=a,ra(o),qi=l,ws=c}}function _y(n,e){let t=e.reactions;if(t!==null){var i=hb.call(t,n);if(i!==-1){var s=t.length-1;s===0?t=e.reactions=null:(t[i]=t[s],t.pop())}}if(t===null&&(e.f&Pn)!==0&&(ti===null||!ia.call(ti,e))){var a=e;(a.f&Ii)!==0&&(a.f^=Ii,a.f&=~Ts),Wu(a),oy(a),Xa(a,0)}}function Xa(n,e){var t=n.deps;if(t!==null)for(var i=e;i<t.length;i++)_y(n,t[i])}function $s(n){var e=n.f;if((e&Tr)===0){dn(n,kn);var t=jt,i=Qo;jt=n,Qo=!0;try{(e&(cr|ju))!==0?gy(n):Zu(n),mp(n);var s=$p(n);n.teardown=typeof s=="function"?s:null,n.wv=kp;var a;Bc&&Jb&&(n.f&Mn)!==0&&n.deps}finally{Qo=i,jt=t}}}async function $n(){await Promise.resolve(),Jv()}function r(n){var e=n.f,t=(e&Pn)!==0;if(Hs?.add(n),Vt!==null&&!qi){var i=jt!==null&&(jt.f&Tr)!==0;if(!i&&(Ci===null||!ia.call(Ci,n))){var s=Vt.deps;if((Vt.f&Wc)!==0)n.rv<ms&&(n.rv=ms,ti===null&&s!==null&&s[hi]===n?hi++:ti===null?ti=[n]:ti.push(n));else{(Vt.deps??=[]).push(n);var a=n.reactions;a===null?n.reactions=[Vt]:ia.call(a,Vt)||a.push(Vt)}}}if(Xr&&Hr.has(n))return Hr.get(n);if(t){var o=n;if(Xr){var l=o.v;return((o.f&kn)===0&&o.reactions!==null||Cp(o))&&(l=Ku(o)),Hr.set(o,l),l}var c=(o.f&Ii)===0&&!qi&&Vt!==null&&(Qo||(Vt.f&Ii)!==0),u=(o.f&Zr)===0;ga(o)&&(c&&(o.f|=Ii),np(o)),c&&!u&&(ip(o),Ip(o))}if(Ri?.has(n))return Ri.get(n);if((n.f&Br)!==0)throw n.v;return n.v}function Ip(n){if(n.f|=Ii,n.deps!==null)for(const e of n.deps)(e.reactions??=[]).push(n),(e.f&Pn)!==0&&(e.f&Ii)===0&&(ip(e),Ip(e))}function Cp(n){if(n.v===wn)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(Hr.has(e)||(e.f&Pn)!==0&&Cp(e))return!0;return!1}function A(n){var e=qi;try{return qi=!0,n()}finally{qi=e}}function L(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(rr in n)Zc(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&rr in t&&Zc(t)}}}function Zc(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let i in n)try{Zc(n[i],e)}catch{}const t=zu(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=Nv(t);for(let s in i){const a=i[s].get;if(a)try{a.call(n)}catch{}}}}}function xy(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const wy=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ky(n){return wy.includes(n)}const Sy={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Ty(n){return n=n.toLowerCase(),Sy[n]??n}const $y=["touchstart","touchmove"];function Iy(n){return $y.includes(n)}const Aa=Symbol("events"),Ep=new Set,Gc=new Set;function Op(n,e,t,i={}){function s(a){if(i.capture||Xc.call(e,a),!a.cancelBubble)return pa(()=>t?.call(this,a))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?li(()=>{e.addEventListener(n,s,i)}):e.addEventListener(n,s,i),s}function ie(n,e,t,i,s){var a={capture:i,passive:s},o=Op(n,e,t,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ma(()=>{e.removeEventListener(n,o,a)})}function Cy(n,e,t){(e[Aa]??={})[n]=t}function Ey(n){for(var e=0;e<n.length;e++)Ep.add(n[e]);for(var t of Gc)t(n)}let Xd=null;function Xc(n){var e=this,t=e.ownerDocument,i=n.type,s=n.composedPath?.()||[],a=s[0]||n.target;Xd=n;var o=0,l=Xd===n&&n[Aa];if(l){var c=s.indexOf(l);if(c!==-1&&(e===document||e===window)){n[Aa]=e;return}var u=s.indexOf(e);if(u===-1)return;c<=u&&(o=c)}if(a=s[o]||n.target,a!==e){Lv(n,"currentTarget",{configurable:!0,get(){return a||t}});var d=Vt,f=jt;Di(null),Pi(null);try{for(var h,v=[];a!==null;){var _=a.assignedSlot||a.parentNode||a.host||null;try{var p=a[Aa]?.[i];p!=null&&(!a.disabled||n.target===a)&&p.call(a,n)}catch(m){h?v.push(m):h=m}if(n.cancelBubble||_===e||_===null)break;a=_}if(h){for(let m of v)queueMicrotask(()=>{throw m});throw h}}finally{n[Aa]=e,delete n.currentTarget,Di(d),Pi(f)}}}const Oy=globalThis?.window?.trustedTypes&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:n=>n});function Dy(n){return Oy?.createHTML(n)??n}function Py(n){var e=fp("template");return e.innerHTML=Dy(n.replaceAll("<!>","<!---->")),e.content}function Qa(n,e){var t=jt;t.nodes===null&&(t.nodes={start:n,end:e,a:null,t:null})}function x(n,e){var t=(e&Ub)!==0,i=(e&Vb)!==0,s,a=!n.startsWith("<!>");return()=>{s===void 0&&(s=Py(a?n:"<!>"+n),t||(s=_s(s)));var o=i||lp?document.importNode(s,!0):s.cloneNode(!0);if(t){var l=_s(o),c=o.lastChild;Qa(l,c)}else Qa(o,o);return o}}function Is(n=""){{var e=ar(n+"");return Qa(e,e),e}}function kt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=ar();return n.append(e,t),Qa(e,t),n}function b(n,e){n!==null&&n.before(e)}let Qc=!0;function Se(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??=n.nodeValue)&&(n.__t=t,n.nodeValue=t+"")}function My(n,e){return Ay(n,e)}const Co=new Map;function Ay(n,{target:e,anchor:t,props:i={},events:s,context:a,intro:o=!0,transformError:l}){cy();var c=void 0,u=vy(()=>{var d=t??e.appendChild(ar());ny(d,{pending:()=>{}},v=>{Re({});var _=Xt;a&&(_.c=a),s&&(i.$$events=s),Qc=o,c=n(v,i)||{},Qc=!0,Fe()},l);var f=new Set,h=v=>{for(var _=0;_<v.length;_++){var p=v[_];if(!f.has(p)){f.add(p);var m=Iy(p);for(const $ of[e,document]){var w=Co.get($);w===void 0&&(w=new Map,Co.set($,w));var k=w.get(p);k===void 0?($.addEventListener(p,Xc,{passive:m}),w.set(p,1)):w.set(p,k+1)}}}};return h(Cl(Ep)),Gc.add(h),()=>{for(var v of f)for(const m of[e,document]){var _=Co.get(m),p=_.get(v);--p==0?(m.removeEventListener(v,Xc),_.delete(v),_.size===0&&Co.delete(m)):_.set(v,p)}Gc.delete(h),d!==t&&d.parentNode?.removeChild(d)}});return Ly.set(c,u),c}let Ly=new WeakMap;class Pl{anchor;#t=new Map;#o=new Map;#e=new Map;#s=new Set;#n=!0;constructor(e,t=!0){this.anchor=e,this.#n=t}#a=()=>{var e=Yt;if(this.#t.has(e)){var t=this.#t.get(e),i=this.#o.get(t);if(i)Gu(i),this.#s.delete(t);else{var s=this.#e.get(t);s&&(this.#o.set(t,s.effect),this.#e.delete(t),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),i=s.effect)}for(const[a,o]of this.#t){if(this.#t.delete(a),a===e)break;const l=this.#e.get(o);l&&(Dn(l.effect),this.#e.delete(o))}for(const[a,o]of this.#o){if(a===t||this.#s.has(a))continue;const l=()=>{if(Array.from(this.#t.values()).includes(a)){var u=document.createDocumentFragment();xp(o,u),u.append(ar()),this.#e.set(a,{effect:o,fragment:u})}else Dn(o);this.#s.delete(a),this.#o.delete(a)};this.#n||!i?(this.#s.add(a),xs(o,l,!1)):l()}}};#i=e=>{this.#t.delete(e);const t=Array.from(this.#t.values());for(const[i,s]of this.#e)t.includes(i)||(Dn(s.effect),this.#e.delete(i))};ensure(e,t){var i=Yt,s=dp();if(t&&!this.#o.has(e)&&!this.#e.has(e))if(s){var a=document.createDocumentFragment(),o=ar();a.append(o),this.#e.set(e,{effect:ni(()=>t(o)),fragment:a})}else this.#o.set(e,ni(()=>t(this.anchor)));if(this.#t.set(i,e),s){for(const[l,c]of this.#o)l===e?i.unskip_effect(c):i.skip_effect(c);for(const[l,c]of this.#e)l===e?i.unskip_effect(c.effect):i.skip_effect(c.effect);i.oncommit(this.#a),i.ondiscard(this.#i)}else this.#a()}}const Ny=0,ic=1;function Ry(n,e,t,i,s){var a=Ds(),o=wn,l=a?Vi(o):M(o,!1,!1),c=a?Vi(o):M(o,!1,!1),u=new Pl(n);Ps(()=>{var d=e(),f=!1;if(mb(d)){var h=ep(),v=!1;const _=p=>{if(!f){v=!0,h(!1),$r.ensure();try{p()}finally{dl(!1),Gs||Jv()}}};d.then(p=>{_(()=>{sr(l,p),u.ensure(ic,i&&(m=>i(m,l)))})},p=>{_(()=>{if(sr(c,p),u.ensure(ic,s&&(m=>s(m,c))),!s)throw c.v})}),li(()=>{v||_(()=>{u.ensure(Ny,t)})})}else sr(l,d),u.ensure(ic,i&&(_=>i(_,l)));return()=>{f=!0}})}function te(n,e,t=!1){var i=new Pl(n),s=t?Gr:0;function a(o,l){i.ensure(o,l)}Ps(()=>{var o=!1;e((l,c=0)=>{o=!0,a(c,l)}),o||a(!1,null)},s)}const Fy=Symbol("NaN");function Qd(n,e,t){var i=new Pl(n),s=!Ds();Ps(()=>{var a=e();a!==a&&(a=Fy),s&&a!==null&&typeof a=="object"&&(a={}),i.ensure(a,t)})}function At(n,e){return e}function qy(n,e,t){for(var i=[],s=e.length,a,o=e.length,l=0;l<s;l++){let f=e[l];xs(f,()=>{if(a){if(a.pending.delete(f),a.done.add(f),a.pending.size===0){var h=n.outrogroups;eu(Cl(a.done)),h.delete(a),h.size===0&&(n.outrogroups=null)}}else o-=1},!1)}if(o===0){var c=i.length===0&&t!==null;if(c){var u=t,d=u.parentNode;uy(d),d.append(u),n.items.clear()}eu(e,!c)}else a={pending:new Set(e),done:new Set},(n.outrogroups??=new Set).add(a)}function eu(n,e=!0){for(var t=0;t<n.length;t++)Dn(n[t],e)}var ef;function ht(n,e,t,i,s,a=null){var o=n,l=new Map,c=(e&zv)!==0;if(c){var u=n;o=u.appendChild(ar())}var d=null,f=ne(()=>{var w=t();return co(w)?w:w==null?[]:Cl(w)}),h,v=!0;function _(){m.fallback=d,zy(m,h,o,e,i),d!==null&&(h.length===0?(d.f&xr)===0?Gu(d):(d.f^=xr,La(d,null,o)):xs(d,()=>{d=null}))}var p=Ps(()=>{h=r(f);for(var w=h.length,k=new Set,$=Yt,D=dp(),I=0;I<w;I+=1){var E=h[I],T=i(E,I),C=v?null:l.get(T);C?(C.v&&sr(C.v,E),C.i&&sr(C.i,I),D&&$.unskip_effect(C.e)):(C=jy(l,v?o:ef??=ar(),E,T,I,s,e,t),v||(C.e.f|=xr),l.set(T,C)),k.add(T)}if(w===0&&a&&!d&&(v?d=ni(()=>a(o)):(d=ni(()=>a(ef??=ar())),d.f|=xr)),w>k.size&&_b(),!v)if(D){for(const[O,P]of l)k.has(O)||$.skip_effect(P.e);$.oncommit(_),$.ondiscard(()=>{})}else _();r(f)}),m={effect:p,items:l,outrogroups:null,fallback:d};v=!1}function Ta(n){for(;n!==null&&(n.f&Yi)===0;)n=n.next;return n}function zy(n,e,t,i,s){var a=(i&Mb)!==0,o=e.length,l=n.items,c=Ta(n.effect.first),u,d=null,f,h=[],v=[],_,p,m,w;if(a)for(w=0;w<o;w+=1)_=e[w],p=s(_,w),m=l.get(p).e,(m.f&xr)===0&&(m.nodes?.a?.measure(),(f??=new Set).add(m));for(w=0;w<o;w+=1){if(_=e[w],p=s(_,w),m=l.get(p).e,n.outrogroups!==null)for(const P of n.outrogroups)P.pending.delete(m),P.done.delete(m);if((m.f&xr)!==0)if(m.f^=xr,m===c)La(m,null,t);else{var k=d?d.next:c;m===n.effect.last&&(n.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Lr(n,d,m),Lr(n,m,k),La(m,k,t),d=m,h=[],v=[],c=Ta(d.next);continue}if((m.f&vi)!==0&&(Gu(m),a&&(m.nodes?.a?.unfix(),(f??=new Set).delete(m))),m!==c){if(u!==void 0&&u.has(m)){if(h.length<v.length){var $=v[0],D;d=$.prev;var I=h[0],E=h[h.length-1];for(D=0;D<h.length;D+=1)La(h[D],$,t);for(D=0;D<v.length;D+=1)u.delete(v[D]);Lr(n,I.prev,E.next),Lr(n,d,I),Lr(n,E,$),c=$,d=E,w-=1,h=[],v=[]}else u.delete(m),La(m,c,t),Lr(n,m.prev,m.next),Lr(n,m,d===null?n.effect.first:d.next),Lr(n,d,m),d=m;continue}for(h=[],v=[];c!==null&&c!==m;)(u??=new Set).add(c),v.push(c),c=Ta(c.next);if(c===null)continue}(m.f&xr)===0&&h.push(m),d=m,c=Ta(m.next)}if(n.outrogroups!==null){for(const P of n.outrogroups)P.pending.size===0&&(eu(Cl(P.done)),n.outrogroups?.delete(P));n.outrogroups.size===0&&(n.outrogroups=null)}if(c!==null||u!==void 0){var T=[];if(u!==void 0)for(m of u)(m.f&vi)===0&&T.push(m);for(;c!==null;)(c.f&vi)===0&&c!==n.fallback&&T.push(c),c=Ta(c.next);var C=T.length;if(C>0){var O=(i&zv)!==0&&o===0?t:null;if(a){for(w=0;w<C;w+=1)T[w].nodes?.a?.measure();for(w=0;w<C;w+=1)T[w].nodes?.a?.fix()}qy(n,T,O)}}a&&li(()=>{if(f!==void 0)for(m of f)m.nodes?.a?.apply()})}function jy(n,e,t,i,s,a,o,l){var c=(o&Db)!==0?(o&Ab)===0?M(t,!1,!1):Vi(t):null,u=(o&Pb)!==0?Vi(s):null;return{v:c,i:u,e:ni(()=>(a(e,c??t,u??s,l),()=>{n.delete(i)}))}}function La(n,e,t){if(n.nodes)for(var i=n.nodes.start,s=n.nodes.end,a=e&&(e.f&xr)===0?e.nodes.start:t;i!==null;){var o=ho(i);if(a.before(i),i===s)return;i=o}}function Lr(n,e,t){e===null?n.effect.first=t:e.next=t,t===null?n.effect.last=e:t.prev=e}function Uy(n,e,t=!1,i=!1,s=!1){var a=n,o="";j(()=>{var l=jt;if(o!==(o=e()??"")&&(l.nodes!==null&&(gp(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var c=t?Bb:i?Hb:void 0,u=fp(t?"svg":i?"math":"template",c);u.innerHTML=o;var d=t||i?u:u.content;if(Qa(_s(d),d.lastChild),t||i)for(;_s(d);)a.before(_s(d));else a.before(d)}})}function Qt(n,e,t,i,s){var a=e.$$slots?.[t],o=!1;a===!0&&(a=e[t==="default"?"children":t],o=!0),a===void 0?s!==null&&s(n):a(n,o?()=>i:i)}function mi(n,e,t){var i=new Pl(n);Ps(()=>{var s=e()??null;i.ensure(s,s&&(a=>t(a,s)))},Gr)}const Vy=()=>performance.now(),_r={tick:n=>requestAnimationFrame(n),now:()=>Vy(),tasks:new Set};function Dp(){const n=_r.now();_r.tasks.forEach(e=>{e.c(n)||(_r.tasks.delete(e),e.f())}),_r.tasks.size!==0&&_r.tick(Dp)}function By(n){let e;return _r.tasks.size===0&&_r.tick(Dp),{promise:new Promise(t=>{_r.tasks.add(e={c:n,f:t})}),abort(){_r.tasks.delete(e)}}}function fl(n,e){pa(()=>{n.dispatchEvent(new CustomEvent(e))})}function Hy(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function tf(n){const e={},t=n.split(";");for(const i of t){const[s,a]=i.split(":");if(!s||a===void 0)break;const o=Hy(s.trim());e[o]=a.trim()}return e}const Wy=n=>n;function Yy(n,e,t){var i=jt,s=i.nodes,a,o,l,c=null;s.a??={element:n,measure(){a=this.element.getBoundingClientRect()},apply(){if(l?.abort(),o=this.element.getBoundingClientRect(),a.left!==o.left||a.right!==o.right||a.top!==o.top||a.bottom!==o.bottom){const u=e()(this.element,{from:a,to:o},t?.());l=hl(this.element,u,void 0,1,()=>{l?.abort(),l=void 0})}},fix(){if(!n.getAnimations().length){var{position:u,width:d,height:f}=getComputedStyle(n);if(u!=="absolute"&&u!=="fixed"){var h=n.style;c={position:h.position,width:h.width,height:h.height,transform:h.transform},h.position="absolute",h.width=d,h.height=f;var v=n.getBoundingClientRect();if(a.left!==v.left||a.top!==v.top){var _=`translate(${a.left-v.left}px, ${a.top-v.top}px)`;h.transform=h.transform?`${h.transform} ${_}`:_}}}},unfix(){if(c){var u=n.style;u.position=c.position,u.width=c.width,u.height=c.height,u.transform=c.transform}}},s.a.element=n}function Ot(n,e,t,i){var s=(n&qb)!==0,a=(n&zb)!==0,o=s&&a,l=(n&jb)!==0,c=o?"both":s?"in":"out",u,d=e.inert,f=e.style.overflow,h,v;function _(){return pa(()=>u??=t()(e,i?.()??{},{direction:c}))}var p={is_global:l,in(){if(e.inert=d,!s){v?.abort(),v?.reset?.();return}a||h?.abort(),h=hl(e,_(),v,1,()=>{fl(e,"introend"),h?.abort(),h=u=void 0,e.style.overflow=f})},out($){if(!a){$?.(),u=void 0;return}e.inert=!0,v=hl(e,_(),h,0,()=>{fl(e,"outroend"),$?.()})},stop:()=>{h?.abort(),v?.abort()}},m=jt;if((m.nodes.t??=[]).push(p),s&&Qc){var w=l;if(!w){for(var k=m.parent;k&&(k.f&Gr)!==0;)for(;(k=k.parent)&&(k.f&cr)===0;);w=!k||(k.f&Zr)!==0}w&&Ft(()=>{A(()=>p.in())})}}function hl(n,e,t,i,s){var a=i===1;if(Bs(e)){var o,l=!1;return li(()=>{if(!l){var m=e({direction:a?"in":"out"});o=hl(n,m,t,i,s)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t?.deactivate(),!e?.duration&&!e?.delay)return fl(n,a?"introstart":"outrostart"),s(),{abort:ai,deactivate:ai,reset:ai,t:()=>i};const{delay:c=0,css:u,tick:d,easing:f=Wy}=e;var h=[];if(a&&t===void 0&&(d&&d(0,1),u)){var v=tf(u(0,1));h.push(v,v)}var _=()=>1-i,p=n.animate(h,{duration:c,fill:"forwards"});return p.onfinish=()=>{p.cancel(),fl(n,a?"introstart":"outrostart");var m=t?.t()??1-i;t?.abort();var w=i-m,k=e.duration*Math.abs(w),$=[];if(k>0){var D=!1;if(u)for(var I=Math.ceil(k/16.666666666666668),E=0;E<=I;E+=1){var T=m+w*f(E/I),C=tf(u(T,1-T));$.push(C),D||=C.overflow==="hidden"}D&&(n.style.overflow="hidden"),_=()=>{var O=p.currentTime;return m+w*f(O/k)},d&&By(()=>{if(p.playState!=="running")return!1;var O=_();return d(O,1-O),!0})}p=n.animate($,{duration:k,fill:"forwards"}),p.onfinish=()=>{_=()=>i,d?.(i,1-i),s()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=ai)},deactivate:()=>{s=ai},reset:()=>{i===0&&d?.(1,0)},t:()=>_()}}function Ky(n,e){var t;t=document.head.appendChild(ar()),Ps(()=>e(t),Uu|Os)}function We(n,e,t){Ft(()=>{var i=A(()=>e(n,t?.())||{});if(t&&i?.update){var s=!1,a={};rs(()=>{var o=t();L(o),s&&Hu(a,o)&&(a=o,i.update(o))}),s=!0}if(i?.destroy)return()=>i.destroy()})}function Jy(n,e){var t=void 0,i;pp(()=>{t!==(t=e())&&(i&&(Dn(i),i=null),t&&(i=ni(()=>{Ft(()=>t(n))})))})}function Pp(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Pp(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Zy(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Pp(n))&&(i&&(i+=" "),i+=e);return i}function In(n){return typeof n=="object"?Zy(n):n??""}const nf=[...` 	
\r\fÂ \v\uFEFF`];function Gy(n,e,t){var i=n==null?"":""+n;if(e&&(i=i?i+" "+e:e),t){for(var s of Object.keys(t))if(t[s])i=i?i+" "+s:s;else if(i.length)for(var a=s.length,o=0;(o=i.indexOf(s,o))>=0;){var l=o+a;(o===0||nf.includes(i[o-1]))&&(l===i.length||nf.includes(i[l]))?i=(o===0?"":i.substring(0,o))+i.substring(l+1):o=l}}return i===""?null:i}function rf(n,e=!1){var t=e?" !important;":";",i="";for(var s of Object.keys(n)){var a=n[s];a!=null&&a!==""&&(i+=" "+s+": "+a+t)}return i}function rc(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function Xy(n,e){if(e){var t="",i,s;if(Array.isArray(e)?(i=e[0],s=e[1]):i=e,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,o=0,l=!1,c=[];i&&c.push(...Object.keys(i).map(rc)),s&&c.push(...Object.keys(s).map(rc));var u=0,d=-1;const p=n.length;for(var f=0;f<p;f++){var h=n[f];if(l?h==="/"&&n[f-1]==="*"&&(l=!1):a?a===h&&(a=!1):h==="/"&&n[f+1]==="*"?l=!0:h==='"'||h==="'"?a=h:h==="("?o++:h===")"&&o--,!l&&a===!1&&o===0){if(h===":"&&d===-1)d=f;else if(h===";"||f===p-1){if(d!==-1){var v=rc(n.substring(u,d).trim());if(!c.includes(v)){h!==";"&&f++;var _=n.substring(u,f).trim();t+=" "+_+";"}}u=f+1,d=-1}}}}return i&&(t+=rf(i)),s&&(t+=rf(s,!0)),t=t.trim(),t===""?null:t}return n==null?null:String(n)}function Me(n,e,t,i,s,a){var o=n.__className;if(o!==t||o===void 0){var l=Gy(t,i,a);l==null?n.removeAttribute("class"):e?n.className=l:n.setAttribute("class",l),n.__className=t}else if(a&&s!==a)for(var c in a){var u=!!a[c];(s==null||u!==!!s[c])&&n.classList.toggle(c,u)}return a}function sc(n,e={},t,i){for(var s in t){var a=t[s];e[s]!==a&&(t[s]==null?n.style.removeProperty(s):n.style.setProperty(s,a,i))}}function Qy(n,e,t,i){var s=n.__style;if(s!==e){var a=Xy(e,i);a==null?n.removeAttribute("style"):n.style.cssText=a,n.__style=e}else i&&(Array.isArray(i)?(sc(n,t?.[0],i[0]),sc(n,t?.[1],i[1],"important")):sc(n,t,i));return i}function vl(n,e,t=!1){if(n.multiple){if(e==null)return;if(!co(e))return Yb();for(var i of n.options)i.selected=e.includes(Va(i));return}for(i of n.options){var s=Va(i);if(ap(s,e)){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function Mp(n){var e=new MutationObserver(()=>{vl(n,n.__value)});e.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ma(()=>{e.disconnect()})}function e_(n,e,t=e){var i=new WeakSet,s=!0;Dl(n,"change",a=>{var o=a?"[selected]":":checked",l;if(n.multiple)l=[].map.call(n.querySelectorAll(o),Va);else{var c=n.querySelector(o)??n.querySelector("option:not([disabled])");l=c&&Va(c)}t(l),Yt!==null&&i.add(Yt)}),Ft(()=>{var a=e();if(n===document.activeElement){var o=ul??Yt;if(i.has(o))return}if(vl(n,a,s),s&&a===void 0){var l=n.querySelector(":checked");l!==null&&(a=Va(l),t(a))}n.__value=a,s=!1}),Mp(n)}function Va(n){return"__value"in n?n.__value:n.value}const $a=Symbol("class"),Ia=Symbol("style"),Ap=Symbol("is custom element"),Lp=Symbol("is html"),t_=Bu?"option":"OPTION",n_=Bu?"select":"SELECT",i_=Bu?"progress":"PROGRESS";function qn(n,e){var t=Ml(n);t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!==i_)||(n.value=e??"")}function Wr(n,e){var t=Ml(n);t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function r_(n,e){e?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function W(n,e,t,i){var s=Ml(n);s[e]!==(s[e]=t)&&(e==="loading"&&(n[bb]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Np(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function s_(n,e,t,i,s=!1,a=!1){var o=Ml(n),l=o[Ap],c=!o[Lp],u=e||{},d=n.nodeName===t_;for(var f in e)f in t||(t[f]=null);t.class?t.class=In(t.class):(i||t[$a])&&(t.class=null),t[Ia]&&(t.style??=null);var h=Np(n);for(const $ in t){let D=t[$];if(d&&$==="value"&&D==null){n.value=n.__value="",u[$]=D;continue}if($==="class"){var v=n.namespaceURI==="http://www.w3.org/1999/xhtml";Me(n,v,D,i,e?.[$a],t[$a]),u[$]=D,u[$a]=t[$a];continue}if($==="style"){Qy(n,D,e?.[Ia],t[Ia]),u[$]=D,u[Ia]=t[Ia];continue}var _=u[$];if(!(D===_&&!(D===void 0&&n.hasAttribute($)))){u[$]=D;var p=$[0]+$[1];if(p!=="$$")if(p==="on"){const I={},E="$$"+$;let T=$.slice(2);var m=ky(T);if(xy(T)&&(T=T.slice(0,-7),I.capture=!0),!m&&_){if(D!=null)continue;n.removeEventListener(T,u[E],I),u[E]=null}if(m)Cy(T,n,D),Ey([T]);else if(D!=null){let C=function(O){u[$].call(this,O)};u[E]=Op(T,n,C,I)}}else if($==="style")W(n,$,D);else if($==="autofocus")Bi(n,!!D);else if(!l&&($==="__value"||$==="value"&&D!=null))n.value=n.__value=D;else if($==="selected"&&d)r_(n,D);else{var w=$;c||(w=Ty(w));var k=w==="defaultValue"||w==="defaultChecked";if(D==null&&!l&&!k)if(o[$]=null,w==="value"||w==="checked"){let I=n;const E=e===void 0;if(w==="value"){let T=I.defaultValue;I.removeAttribute(w),I.defaultValue=T,I.value=I.__value=E?T:null}else{let T=I.defaultChecked;I.removeAttribute(w),I.defaultChecked=T,I.checked=E?T:!1}}else n.removeAttribute($);else k||h.includes(w)&&(l||typeof D!="string")?(n[w]=D,w in o&&(o[w]=wn)):typeof D!="function"&&W(n,w,D)}}}return u}function sa(n,e,t=[],i=[],s=[],a,o=!1,l=!1){Yu(s,t,i,c=>{var u=void 0,d={},f=n.nodeName===n_,h=!1;if(pp(()=>{var _=e(...c.map(r)),p=s_(n,u,_,a,o,l);h&&f&&"value"in _&&vl(n,_.value);for(let w of Object.getOwnPropertySymbols(d))_[w]||Dn(d[w]);for(let w of Object.getOwnPropertySymbols(_)){var m=_[w];w.description===Wb&&(!u||m!==u[w])&&(d[w]&&Dn(d[w]),d[w]=ni(()=>Jy(n,()=>m))),p[w]=m}u=p}),f){var v=n;Ft(()=>{vl(v,u.value,!0),Mp(v)})}h=!0})}function Ml(n){return n.__attributes??={[Ap]:n.nodeName.includes("-"),[Lp]:n.namespaceURI===Uv}}var sf=new Map;function Np(n){var e=n.getAttribute("is")||n.nodeName,t=sf.get(e);if(t)return t;sf.set(e,t=[]);for(var i,s=n,a=Element.prototype;a!==s;){i=Nv(s);for(var o in i)i[o].set&&t.push(o);s=zu(s)}return t}function xt(n,e,t=e){var i=new WeakSet;Dl(n,"input",async s=>{var a=s?n.defaultValue:n.value;if(a=oc(n)?lc(a):a,t(a),Yt!==null&&i.add(Yt),await $n(),a!==(a=e())){var o=n.selectionStart,l=n.selectionEnd,c=n.value.length;if(n.value=a??"",l!==null){var u=n.value.length;o===l&&l===c&&u>c?(n.selectionStart=u,n.selectionEnd=u):(n.selectionStart=o,n.selectionEnd=Math.min(l,u))}}}),A(e)==null&&n.value&&(t(oc(n)?lc(n.value):n.value),Yt!==null&&i.add(Yt)),rs(()=>{var s=e();if(n===document.activeElement){var a=ul??Yt;if(i.has(a))return}oc(n)&&s===lc(n.value)||n.type==="date"&&!s&&!n.value||s!==n.value&&(n.value=s??"")})}const ac=new Set;function a_(n,e,t,i,s=i){var a=t.getAttribute("type")==="checkbox",o=n;if(e!==null)for(var l of e)o=o[l]??=[];o.push(t),Dl(t,"change",()=>{var c=t.__value;a&&(c=o_(o,c,t.checked)),s(c)},()=>s(a?[]:null)),rs(()=>{var c=i();a?(c=c||[],t.checked=c.includes(t.__value)):t.checked=ap(t.__value,c)}),ma(()=>{var c=o.indexOf(t);c!==-1&&o.splice(c,1)}),ac.has(o)||(ac.add(o),li(()=>{o.sort((c,u)=>c.compareDocumentPosition(u)===4?-1:1),ac.delete(o)})),li(()=>{})}function en(n,e,t=e){Dl(n,"change",i=>{var s=i?n.defaultChecked:n.checked;t(s)}),A(e)==null&&t(n.checked),rs(()=>{var i=e();n.checked=!!i})}function o_(n,e,t){for(var i=new Set,s=0;s<n.length;s+=1)n[s].checked&&i.add(n[s].__value);return t||i.delete(e),Array.from(i)}function oc(n){var e=n.type;return e==="number"||e==="range"}function lc(n){return n===""?null:+n}function yt(n,e,t){var i=Sr(n,e);i&&i.set&&(n[e]=t,ma(()=>{n[e]=null}))}function af(n,e){return n===e||n?.[rr]===e}function ft(n={},e,t,i){return Ft(()=>{var s,a;return rs(()=>{s=a,a=[],A(()=>{n!==t(...a)&&(e(n,...a),s&&af(t(...s),n)&&e(null,...s))})}),()=>{li(()=>{a&&af(t(...a),n)&&e(null,...a)})}}),n}function hn(n){return function(...e){var t=e[0];return t.stopPropagation(),n?.apply(this,e)}}function Et(n){return function(...e){var t=e[0];return t.preventDefault(),n?.apply(this,e)}}function ze(n=!1){const e=Xt,t=e.l.u;if(!t)return;let i=()=>L(e.s);if(n){let s=0,a={};const o=fo(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==a[u]&&(a[u]=c[u],l=!0);return l&&s++,s});i=()=>r(o)}t.b.length&&hy(()=>{of(e,i),cl(t.b)}),Jc(()=>{const s=A(()=>t.m.map(gb));return()=>{for(const a of s)typeof a=="function"&&a()}}),t.a.length&&Jc(()=>{of(e,i),cl(t.a)})}function of(n,e){if(n.l.s)for(const t of n.l.s)r(t);e()}function H4(n){var e=Vi(0);return function(){return arguments.length===1?(y(e,r(e)+1),arguments[0]):(r(e),n())}}function Qe(n,e){var t=n.$$events?.[e.type],i=co(t)?t.slice():t==null?[]:[t];for(var s of i)s.call(this,e)}function Xu(n,e,t){if(n==null)return e(void 0),t&&t(void 0),ai;const i=A(()=>n.subscribe(e,t));return i.unsubscribe?()=>i.unsubscribe():i}const qs=[];function Rp(n,e){return{subscribe:ci(n,e).subscribe}}function ci(n,e=ai){let t=null;const i=new Set;function s(l){if(Hu(n,l)&&(n=l,t)){const c=!qs.length;for(const u of i)u[1](),qs.push(u,n);if(c){for(let u=0;u<qs.length;u+=2)qs[u][0](qs[u+1]);qs.length=0}}}function a(l){s(l(n))}function o(l,c=ai){const u=[l,c];return i.add(u),i.size===1&&(t=e(s,a)||ai),l(n),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:s,update:a,subscribe:o}}function Fp(n,e,t){const i=!Array.isArray(n),s=i?[n]:n;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=e.length<2;return Rp(t,(o,l)=>{let c=!1;const u=[];let d=0,f=ai;const h=()=>{if(d)return;f();const _=e(i?u[0]:u,o,l);a?o(_):f=typeof _=="function"?_:ai},v=s.map((_,p)=>Xu(_,m=>{u[p]=m,d&=~(1<<p),c&&h()},()=>{d|=1<<p}));return c=!0,h(),function(){cl(v),f(),c=!1}})}function Qu(n){let e;return Xu(n,t=>e=t)(),e}let Eo=!1,tu=Symbol();function Ct(n,e,t){const i=t[e]??={store:null,source:M(void 0),unsubscribe:ai};if(i.store!==n&&!(tu in t))if(i.unsubscribe(),i.store=n??null,n==null)i.source.v=void 0,i.unsubscribe=ai;else{var s=!0;i.unsubscribe=Xu(n,a=>{s?i.source.v=a:y(i.source,a)}),s=!1}return n&&tu in t?Qu(n):r(i.source)}function Kn(n,e){return n.set(e),e}function Nt(){const n={};function e(){ma(()=>{for(var t in n)n[t].unsubscribe();Lv(n,tu,{enumerable:!1,value:!0})})}return[n,e]}function l_(n){var e=Eo;try{return Eo=!1,[n(),Eo]}finally{Eo=e}}const c_={get(n,e){if(!n.exclude.includes(e))return r(n.version),e in n.special?n.special[e]():n.props[e]},set(n,e,t){if(!(e in n.special)){var i=jt;try{Pi(n.parent_effect),n.special[e]=ee({get[e](){return n.props[e]}},e,jv)}finally{Pi(i)}}return n.special[e](t),wr(n.version),!0},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},deleteProperty(n,e){return n.exclude.includes(e)||(n.exclude.push(e),wr(n.version)),!0},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function Dt(n,e){return new Proxy({props:n,exclude:e,special:{},version:Vi(0),parent_effect:jt},c_)}const u_={get(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(Bs(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i)return i[e]}},set(n,e,t){let i=n.props.length;for(;i--;){let s=n.props[i];Bs(s)&&(s=s());const a=Sr(s,e);if(a&&a.set)return a.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(Bs(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i){const s=Sr(i,e);return s&&!s.configurable&&(s.configurable=!0),s}}},has(n,e){if(e===rr||e===qv)return!1;for(let t of n.props)if(Bs(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props)if(Bs(t)&&(t=t()),!!t){for(const i in t)e.includes(i)||e.push(i);for(const i of Object.getOwnPropertySymbols(t))e.includes(i)||e.push(i)}return e}};function nn(...n){return new Proxy({props:n},u_)}function ee(n,e,t,i){var s=!va||(t&Nb)!==0,a=(t&Rb)!==0,o=(t&Fb)!==0,l=i,c=!0,u=()=>(c&&(c=!1,l=o?A(i):i),l),d;if(a){var f=rr in n||qv in n;d=Sr(n,e)?.set??(f&&e in n?$=>n[e]=$:void 0)}var h,v=!1;a?[h,v]=l_(()=>n[e]):h=n[e],h===void 0&&i!==void 0&&(h=u(),d&&(s&&$b(),d(h)));var _;if(s?_=()=>{var $=n[e];return $===void 0?u():(c=!0,$)}:_=()=>{var $=n[e];return $!==void 0&&(l=void 0),$===void 0?l:$},s&&(t&jv)===0)return _;if(d){var p=n.$$legacy;return(function($,D){return arguments.length>0?((!s||!D||p||v)&&d(D?_():$),$):_()})}var m=!1,w=((t&Lb)!==0?fo:ne)(()=>(m=!1,_()));a&&r(w);var k=jt;return(function($,D){if(arguments.length>0){const I=D?r(w):s&&a?Ws($):$;return y(w,I),m=!0,l!==void 0&&(l=I),$}return Xr&&m||(k.f&Tr)!==0?w.v:r(w)})}function fn(n){Xt===null&&El(),va&&Xt.l!==null?qp(Xt).m.push(n):Jc(()=>{const e=A(n);if(typeof e=="function")return e})}function vo(n){Xt===null&&El(),fn(()=>()=>A(n))}function d_(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function Ut(){const n=Xt;return n===null&&El(),(e,t,i)=>{const s=n.s.$$events?.[e];if(s){const a=co(s)?s.slice():[s],o=d_(e,t,i);for(const l of a)l.call(n.x,o);return!o.defaultPrevented}return!0}}function f_(n){Xt===null&&El(),Xt.l===null&&Tb(),qp(Xt).a.push(n)}function qp(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}const h_="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(h_);Zb();class Ms extends Error{}class v_ extends Ms{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class p_ extends Ms{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class m_ extends Ms{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Ks extends Ms{}class zp extends Ms{constructor(e){super(`Invalid unit ${e}`)}}class An extends Ms{}class Nr extends Ms{constructor(){super("Zone is an abstract class")}}const bt="numeric",Hi="short",pi="long",pl={year:bt,month:bt,day:bt},jp={year:bt,month:Hi,day:bt},g_={year:bt,month:Hi,day:bt,weekday:Hi},Up={year:bt,month:pi,day:bt},Vp={year:bt,month:pi,day:bt,weekday:pi},Bp={hour:bt,minute:bt},Hp={hour:bt,minute:bt,second:bt},Wp={hour:bt,minute:bt,second:bt,timeZoneName:Hi},Yp={hour:bt,minute:bt,second:bt,timeZoneName:pi},Kp={hour:bt,minute:bt,hourCycle:"h23"},Jp={hour:bt,minute:bt,second:bt,hourCycle:"h23"},Zp={hour:bt,minute:bt,second:bt,hourCycle:"h23",timeZoneName:Hi},Gp={hour:bt,minute:bt,second:bt,hourCycle:"h23",timeZoneName:pi},Xp={year:bt,month:bt,day:bt,hour:bt,minute:bt},Qp={year:bt,month:bt,day:bt,hour:bt,minute:bt,second:bt},em={year:bt,month:Hi,day:bt,hour:bt,minute:bt},tm={year:bt,month:Hi,day:bt,hour:bt,minute:bt,second:bt},b_={year:bt,month:Hi,day:bt,weekday:Hi,hour:bt,minute:bt},nm={year:bt,month:pi,day:bt,hour:bt,minute:bt,timeZoneName:Hi},im={year:bt,month:pi,day:bt,hour:bt,minute:bt,second:bt,timeZoneName:Hi},rm={year:bt,month:pi,day:bt,weekday:pi,hour:bt,minute:bt,timeZoneName:pi},sm={year:bt,month:pi,day:bt,weekday:pi,hour:bt,minute:bt,second:bt,timeZoneName:pi};class po{get type(){throw new Nr}get name(){throw new Nr}get ianaName(){return this.name}get isUniversal(){throw new Nr}offsetName(e,t){throw new Nr}formatOffset(e,t){throw new Nr}offset(e){throw new Nr}equals(e){throw new Nr}get isValid(){throw new Nr}}let cc=null;class Al extends po{static get instance(){return cc===null&&(cc=new Al),cc}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return mm(e,t,i)}formatOffset(e,t){return Ba(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const nu=new Map;function y_(n){let e=nu.get(n);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),nu.set(n,e)),e}const __={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function x_(n,e){const t=n.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,s,a,o,l,c,u,d]=i;return[o,s,a,l,c,u,d]}function w_(n,e){const t=n.formatToParts(e),i=[];for(let s=0;s<t.length;s++){const{type:a,value:o}=t[s],l=__[a];a==="era"?i[l]=o:Pt(l)||(i[l]=parseInt(o,10))}return i}const uc=new Map;class Ir extends po{static create(e){let t=uc.get(e);return t===void 0&&uc.set(e,t=new Ir(e)),t}static resetCache(){uc.clear(),nu.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ir.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return mm(e,t,i,this.name)}formatOffset(e,t){return Ba(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const i=y_(this.name);let[s,a,o,l,c,u,d]=i.formatToParts?w_(i,t):x_(i,t);l==="BC"&&(s=-Math.abs(s)+1);const h=Nl({year:s,month:a,day:o,hour:c===24?0:c,minute:u,second:d,millisecond:0});let v=+t;const _=v%1e3;return v-=_>=0?_:1e3+_,(h-v)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let lf={};function k_(n,e={}){const t=JSON.stringify([n,e]);let i=lf[t];return i||(i=new Intl.ListFormat(n,e),lf[t]=i),i}const iu=new Map;function ru(n,e={}){const t=JSON.stringify([n,e]);let i=iu.get(t);return i===void 0&&(i=new Intl.DateTimeFormat(n,e),iu.set(t,i)),i}const su=new Map;function S_(n,e={}){const t=JSON.stringify([n,e]);let i=su.get(t);return i===void 0&&(i=new Intl.NumberFormat(n,e),su.set(t,i)),i}const au=new Map;function T_(n,e={}){const{base:t,...i}=e,s=JSON.stringify([n,i]);let a=au.get(s);return a===void 0&&(a=new Intl.RelativeTimeFormat(n,e),au.set(s,a)),a}let Na=null;function $_(){return Na||(Na=new Intl.DateTimeFormat().resolvedOptions().locale,Na)}const ou=new Map;function am(n){let e=ou.get(n);return e===void 0&&(e=new Intl.DateTimeFormat(n).resolvedOptions(),ou.set(n,e)),e}const lu=new Map;function I_(n){let e=lu.get(n);if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...om,...e}),lu.set(n,e)}return e}function C_(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let i,s;try{i=ru(n).resolvedOptions(),s=n}catch{const c=n.substring(0,t);i=ru(c).resolvedOptions(),s=c}const{numberingSystem:a,calendar:o}=i;return[s,a,o]}}function E_(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function O_(n){const e=[];for(let t=1;t<=12;t++){const i=$t.utc(2009,t,1);e.push(n(i))}return e}function D_(n){const e=[];for(let t=1;t<=7;t++){const i=$t.utc(2016,11,13+t);e.push(n(i))}return e}function Oo(n,e,t,i){const s=n.listingMode();return s==="error"?null:s==="en"?t(e):i(e)}function P_(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||am(n.locale).numberingSystem==="latn"}class M_{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:a,...o}=i;if(!t||Object.keys(o).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=S_(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):rd(e,3);return bn(t,this.padTo)}}}class A_{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Ir.create(l).valid?(s=l,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const a={...this.opts};a.timeZone=a.timeZone||s,this.dtf=ru(t,a)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class L_{constructor(e,t,i){this.opts={style:"long",...i},!t&&vm()&&(this.rtf=T_(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):ix(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const om={firstDay:1,minimalDays:4,weekend:[6,7]};class Gt{static fromOpts(e){return Gt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,s,a=!1){const o=e||un.defaultLocale,l=o||(a?"en-US":$_()),c=t||un.defaultNumberingSystem,u=i||un.defaultOutputCalendar,d=uu(s)||un.defaultWeekSettings;return new Gt(l,c,u,d,o)}static resetCache(){Na=null,iu.clear(),su.clear(),au.clear(),ou.clear(),lu.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:s}={}){return Gt.create(e,t,i,s)}constructor(e,t,i,s,a){const[o,l,c]=C_(e);this.locale=o,this.numberingSystem=t||l||null,this.outputCalendar=i||c||null,this.weekSettings=s,this.intl=E_(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=P_(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Gt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,uu(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Oo(this,e,ym,()=>{const i=this.intl==="ja"||this.intl.startsWith("ja-");t&=!i;const s=t?{month:e,day:"numeric"}:{month:e},a=t?"format":"standalone";if(!this.monthsCache[a][e]){const o=i?l=>this.dtFormatter(l,s).format():l=>this.extract(l,s,"month");this.monthsCache[a][e]=O_(o)}return this.monthsCache[a][e]})}weekdays(e,t=!1){return Oo(this,e,wm,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=D_(a=>this.extract(a,i,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return Oo(this,void 0,()=>km,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[$t.utc(2016,11,13,9),$t.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Oo(this,e,Sm,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[$t.utc(-40,1,1),$t.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const s=this.dtFormatter(e,t),a=s.formatToParts(),o=a.find(l=>l.type.toLowerCase()===i);return o?o.value:null}numberFormatter(e={}){return new M_(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new A_(e,this.intl,t)}relFormatter(e={}){return new L_(this.intl,this.isEnglish(),e)}listFormatter(e={}){return k_(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||am(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:pm()?I_(this.locale):om}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let dc=null;class Yn extends po{static get utcInstance(){return dc===null&&(dc=new Yn(0)),dc}static instance(e){return e===0?Yn.utcInstance:new Yn(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Yn(Rl(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ba(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ba(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Ba(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class N_ extends po{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function zr(n,e){if(Pt(n)||n===null)return e;if(n instanceof po)return n;if(U_(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Al.instance:t==="utc"||t==="gmt"?Yn.utcInstance:Yn.parseSpecifier(t)||Ir.create(n)}else return Yr(n)?Yn.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new N_(n)}const ed={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼]",gujr:"[à«¦-à«¯]",hanidec:"[ã|ä¸|äº|ä¸|å|äº|å­|ä¸|å«|ä¹]",khmr:"[á -á©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»]",limb:"[á¥-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ]",mymr:"[á-á]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹]",tibt:"[à¼ -à¼©]",latn:"\\d"},cf={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},R_=ed.hanidec.replace(/[\[|\]]/g,"").split("");function F_(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);if(n[t].search(ed.hanidec)!==-1)e+=R_.indexOf(n[t]);else for(const s in cf){const[a,o]=cf[s];i>=a&&i<=o&&(e+=i-a)}}return parseInt(e,10)}else return e}const cu=new Map;function q_(){cu.clear()}function Li({numberingSystem:n},e=""){const t=n||"latn";let i=cu.get(t);i===void 0&&(i=new Map,cu.set(t,i));let s=i.get(e);return s===void 0&&(s=new RegExp(`${ed[t]}${e}`),i.set(e,s)),s}let uf=()=>Date.now(),df="system",ff=null,hf=null,vf=null,pf=60,mf,gf=null;class un{static get now(){return uf}static set now(e){uf=e}static set defaultZone(e){df=e}static get defaultZone(){return zr(df,Al.instance)}static get defaultLocale(){return ff}static set defaultLocale(e){ff=e}static get defaultNumberingSystem(){return hf}static set defaultNumberingSystem(e){hf=e}static get defaultOutputCalendar(){return vf}static set defaultOutputCalendar(e){vf=e}static get defaultWeekSettings(){return gf}static set defaultWeekSettings(e){gf=uu(e)}static get twoDigitCutoffYear(){return pf}static set twoDigitCutoffYear(e){pf=e%100}static get throwOnInvalid(){return mf}static set throwOnInvalid(e){mf=e}static resetCaches(){Gt.resetCache(),Ir.resetCache(),$t.resetCache(),q_()}}class zi{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const lm=[0,31,59,90,120,151,181,212,243,273,304,334],cm=[0,31,60,91,121,152,182,213,244,274,305,335];function Ti(n,e){return new zi("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function td(n,e,t){const i=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function um(n,e,t){return t+(mo(n)?cm:lm)[e-1]}function dm(n,e){const t=mo(n)?cm:lm,i=t.findIndex(a=>a<e),s=e-t[i];return{month:i+1,day:s}}function nd(n,e){return(n-e+7)%7+1}function ml(n,e=4,t=1){const{year:i,month:s,day:a}=n,o=um(i,s,a),l=nd(td(i,s,a),t);let c=Math.floor((o-l+14-e)/7),u;return c<1?(u=i-1,c=eo(u,e,t)):c>eo(i,e,t)?(u=i+1,c=1):u=i,{weekYear:u,weekNumber:c,weekday:l,...Fl(n)}}function bf(n,e=4,t=1){const{weekYear:i,weekNumber:s,weekday:a}=n,o=nd(td(i,1,e),t),l=Xs(i);let c=s*7+a-o-7+e,u;c<1?(u=i-1,c+=Xs(u)):c>l?(u=i+1,c-=Xs(i)):u=i;const{month:d,day:f}=dm(u,c);return{year:u,month:d,day:f,...Fl(n)}}function fc(n){const{year:e,month:t,day:i}=n,s=um(e,t,i);return{year:e,ordinal:s,...Fl(n)}}function yf(n){const{year:e,ordinal:t}=n,{month:i,day:s}=dm(e,t);return{year:e,month:i,day:s,...Fl(n)}}function _f(n,e){if(!Pt(n.localWeekday)||!Pt(n.localWeekNumber)||!Pt(n.localWeekYear)){if(!Pt(n.weekday)||!Pt(n.weekNumber)||!Pt(n.weekYear))throw new Ks("Cannot mix locale-based week fields with ISO-based week fields");return Pt(n.localWeekday)||(n.weekday=n.localWeekday),Pt(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),Pt(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function z_(n,e=4,t=1){const i=Ll(n.weekYear),s=$i(n.weekNumber,1,eo(n.weekYear,e,t)),a=$i(n.weekday,1,7);return i?s?a?!1:Ti("weekday",n.weekday):Ti("week",n.weekNumber):Ti("weekYear",n.weekYear)}function j_(n){const e=Ll(n.year),t=$i(n.ordinal,1,Xs(n.year));return e?t?!1:Ti("ordinal",n.ordinal):Ti("year",n.year)}function fm(n){const e=Ll(n.year),t=$i(n.month,1,12),i=$i(n.day,1,gl(n.year,n.month));return e?t?i?!1:Ti("day",n.day):Ti("month",n.month):Ti("year",n.year)}function hm(n){const{hour:e,minute:t,second:i,millisecond:s}=n,a=$i(e,0,23)||e===24&&t===0&&i===0&&s===0,o=$i(t,0,59),l=$i(i,0,59),c=$i(s,0,999);return a?o?l?c?!1:Ti("millisecond",s):Ti("second",i):Ti("minute",t):Ti("hour",e)}function Pt(n){return typeof n>"u"}function Yr(n){return typeof n=="number"}function Ll(n){return typeof n=="number"&&n%1===0}function U_(n){return typeof n=="string"}function V_(n){return Object.prototype.toString.call(n)==="[object Date]"}function vm(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function pm(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function B_(n){return Array.isArray(n)?n:[n]}function xf(n,e,t){if(n.length!==0)return n.reduce((i,s)=>{const a=[e(s),s];return i&&t(i[0],a[0])===i[0]?i:a},null)[1]}function H_(n,e){return e.reduce((t,i)=>(t[i]=n[i],t),{})}function aa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function uu(n){if(n==null)return null;if(typeof n!="object")throw new An("Week settings must be an object");if(!$i(n.firstDay,1,7)||!$i(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!$i(e,1,7)))throw new An("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function $i(n,e,t){return Ll(n)&&n>=e&&n<=t}function W_(n,e){return n-e*Math.floor(n/e)}function bn(n,e=2){const t=n<0;let i;return t?i="-"+(""+-n).padStart(e,"0"):i=(""+n).padStart(e,"0"),i}function qr(n){if(!(Pt(n)||n===null||n===""))return parseInt(n,10)}function ss(n){if(!(Pt(n)||n===null||n===""))return parseFloat(n)}function id(n){if(!(Pt(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function rd(n,e,t="round"){const i=10**e;switch(t){case"expand":return n>0?Math.ceil(n*i)/i:Math.floor(n*i)/i;case"trunc":return Math.trunc(n*i)/i;case"round":return Math.round(n*i)/i;case"floor":return Math.floor(n*i)/i;case"ceil":return Math.ceil(n*i)/i;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function mo(n){return n%4===0&&(n%100!==0||n%400===0)}function Xs(n){return mo(n)?366:365}function gl(n,e){const t=W_(e-1,12)+1,i=n+(e-t)/12;return t===2?mo(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Nl(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function wf(n,e,t){return-nd(td(n,1,e),t)+e-1}function eo(n,e=4,t=1){const i=wf(n,e,t),s=wf(n+1,e,t);return(Xs(n)-i+s)/7}function du(n){return n>99?n:n>un.twoDigitCutoffYear?1900+n:2e3+n}function mm(n,e,t,i=null){const s=new Date(n),a={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(a.timeZone=i);const o={timeZoneName:e,...a},l=new Intl.DateTimeFormat(t,o).formatToParts(s).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function Rl(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,s=t<0||Object.is(t,-0)?-i:i;return t*60+s}function gm(n){const e=Number(n);if(typeof n=="boolean"||n===""||!Number.isFinite(e))throw new An(`Invalid unit value ${n}`);return e}function bl(n,e){const t={};for(const i in n)if(aa(n,i)){const s=n[i];if(s==null)continue;t[e(i)]=gm(s)}return t}function Ba(n,e){const t=Math.trunc(Math.abs(n/60)),i=Math.trunc(Math.abs(n%60)),s=n>=0?"+":"-";switch(e){case"short":return`${s}${bn(t,2)}:${bn(i,2)}`;case"narrow":return`${s}${t}${i>0?`:${i}`:""}`;case"techie":return`${s}${bn(t,2)}${bn(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Fl(n){return H_(n,["hour","minute","second","millisecond"])}const Y_=["January","February","March","April","May","June","July","August","September","October","November","December"],bm=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],K_=["J","F","M","A","M","J","J","A","S","O","N","D"];function ym(n){switch(n){case"narrow":return[...K_];case"short":return[...bm];case"long":return[...Y_];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const _m=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],xm=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],J_=["M","T","W","T","F","S","S"];function wm(n){switch(n){case"narrow":return[...J_];case"short":return[...xm];case"long":return[..._m];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const km=["AM","PM"],Z_=["Before Christ","Anno Domini"],G_=["BC","AD"],X_=["B","A"];function Sm(n){switch(n){case"narrow":return[...X_];case"short":return[...G_];case"long":return[...Z_];default:return null}}function Q_(n){return km[n.hour<12?0:1]}function ex(n,e){return wm(e)[n.weekday-1]}function tx(n,e){return ym(e)[n.month-1]}function nx(n,e){return Sm(e)[n.year<0?0:1]}function ix(n,e,t="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},a=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&a){const f=n==="days";switch(e){case 1:return f?"tomorrow":`next ${s[n][0]}`;case-1:return f?"yesterday":`last ${s[n][0]}`;case 0:return f?"today":`this ${s[n][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,u=s[n],d=i?c?u[1]:u[2]||u[1]:c?s[n][0]:n;return o?`${l} ${d} ago`:`in ${l} ${d}`}function kf(n,e){let t="";for(const i of n)i.literal?t+=i.val:t+=e(i.val);return t}const rx={D:pl,DD:jp,DDD:Up,DDDD:Vp,t:Bp,tt:Hp,ttt:Wp,tttt:Yp,T:Kp,TT:Jp,TTT:Zp,TTTT:Gp,f:Xp,ff:em,fff:nm,ffff:rm,F:Qp,FF:tm,FFF:im,FFFF:sm};class Nn{static create(e,t={}){return new Nn(e,t)}static parseFormat(e){let t=null,i="",s=!1;const a=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?((i.length>0||s)&&a.push({literal:s||/^\s+$/.test(i),val:i===""?"'":i}),t=null,i="",s=!s):s||l===t?i+=l:(i.length>0&&a.push({literal:/^\s+$/.test(i),val:i}),i=l,t=l)}return i.length>0&&a.push({literal:s||/^\s+$/.test(i),val:i}),a}static macroTokenToFormatOpts(e){return rx[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,i=void 0){if(this.opts.forceSimple)return bn(e,t);const s={...this.opts};return t>0&&(s.padTo=t),i&&(s.signDisplay=i),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",a=(v,_)=>this.loc.extract(e,v,_),o=v=>e.isOffsetFixed&&e.offset===0&&v.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,v.format):"",l=()=>i?Q_(e):a({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(v,_)=>i?tx(e,v):a(_?{month:v}:{month:v,day:"numeric"},"month"),u=(v,_)=>i?ex(e,v):a(_?{weekday:v}:{weekday:v,month:"long",day:"numeric"},"weekday"),d=v=>{const _=Nn.macroTokenToFormatOpts(v);return _?this.formatWithSystemDefault(e,_):v},f=v=>i?nx(e,v):a({era:v},"era"),h=v=>{switch(v){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return s?a({day:"numeric"},"day"):this.num(e.day);case"dd":return s?a({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return s?a({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?a({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return s?a({month:"numeric"},"month"):this.num(e.month);case"MM":return s?a({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return s?a({year:"numeric"},"year"):this.num(e.year);case"yy":return s?a({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?a({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?a({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(v)}};return kf(Nn.parseFormat(t),h)}formatDurationFromString(e,t){const i=this.opts.signMode==="negativeLargestOnly"?-1:1,s=d=>{switch(d[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},a=(d,f)=>h=>{const v=s(h);if(v){const _=f.isNegativeDuration&&v!==f.largestUnit?i:1;let p;return this.opts.signMode==="negativeLargestOnly"&&v!==f.largestUnit?p="never":this.opts.signMode==="all"?p="always":p="auto",this.num(d.get(v)*_,h.length,p)}else return h},o=Nn.parseFormat(t),l=o.reduce((d,{literal:f,val:h})=>f?d:d.concat(h),[]),c=e.shiftTo(...l.map(s).filter(d=>d)),u={isNegativeDuration:c<0,largestUnit:Object.keys(c.values)[0]};return kf(o,a(c,u))}}const Tm=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ba(...n){const e=n.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function ya(...n){return e=>n.reduce(([t,i,s],a)=>{const[o,l,c]=a(e,s);return[{...t,...o},l||i,c]},[{},null,1]).slice(0,2)}function _a(n,...e){if(n==null)return[null,null];for(const[t,i]of e){const s=t.exec(n);if(s)return i(s)}return[null,null]}function $m(...n){return(e,t)=>{const i={};let s;for(s=0;s<n.length;s++)i[n[s]]=qr(e[t+s]);return[i,null,t+s]}}const Im=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,sx=`(?:${Im.source}?(?:\\[(${Tm.source})\\])?)?`,sd=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Cm=RegExp(`${sd.source}${sx}`),ad=RegExp(`(?:[Tt]${Cm.source})?`),ax=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ox=/(\d{4})-?W(\d\d)(?:-?(\d))?/,lx=/(\d{4})-?(\d{3})/,cx=$m("weekYear","weekNumber","weekDay"),ux=$m("year","ordinal"),dx=/(\d{4})-(\d\d)-(\d\d)/,Em=RegExp(`${sd.source} ?(?:${Im.source}|(${Tm.source}))?`),fx=RegExp(`(?: ${Em.source})?`);function Qs(n,e,t){const i=n[e];return Pt(i)?t:qr(i)}function hx(n,e){return[{year:Qs(n,e),month:Qs(n,e+1,1),day:Qs(n,e+2,1)},null,e+3]}function xa(n,e){return[{hours:Qs(n,e,0),minutes:Qs(n,e+1,0),seconds:Qs(n,e+2,0),milliseconds:id(n[e+3])},null,e+4]}function go(n,e){const t=!n[e]&&!n[e+1],i=Rl(n[e+1],n[e+2]),s=t?null:Yn.instance(i);return[{},s,e+3]}function bo(n,e){const t=n[e]?Ir.create(n[e]):null;return[{},t,e+1]}const vx=RegExp(`^T?${sd.source}$`),px=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function mx(n){const[e,t,i,s,a,o,l,c,u]=n,d=e[0]==="-",f=c&&c[0]==="-",h=(v,_=!1)=>v!==void 0&&(_||v&&d)?-v:v;return[{years:h(ss(t)),months:h(ss(i)),weeks:h(ss(s)),days:h(ss(a)),hours:h(ss(o)),minutes:h(ss(l)),seconds:h(ss(c),c==="-0"),milliseconds:h(id(u),f)}]}const gx={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function od(n,e,t,i,s,a,o){const l={year:e.length===2?du(qr(e)):qr(e),month:bm.indexOf(t)+1,day:qr(i),hour:qr(s),minute:qr(a)};return o&&(l.second=qr(o)),n&&(l.weekday=n.length>3?_m.indexOf(n)+1:xm.indexOf(n)+1),l}const bx=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function yx(n){const[,e,t,i,s,a,o,l,c,u,d,f]=n,h=od(e,s,i,t,a,o,l);let v;return c?v=gx[c]:u?v=0:v=Rl(d,f),[h,new Yn(v)]}function _x(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const xx=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,wx=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,kx=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Sf(n){const[,e,t,i,s,a,o,l]=n;return[od(e,s,i,t,a,o,l),Yn.utcInstance]}function Sx(n){const[,e,t,i,s,a,o,l]=n;return[od(e,l,t,i,s,a,o),Yn.utcInstance]}const Tx=ba(ax,ad),$x=ba(ox,ad),Ix=ba(lx,ad),Cx=ba(Cm),Om=ya(hx,xa,go,bo),Ex=ya(cx,xa,go,bo),Ox=ya(ux,xa,go,bo),Dx=ya(xa,go,bo);function Px(n){return _a(n,[Tx,Om],[$x,Ex],[Ix,Ox],[Cx,Dx])}function Mx(n){return _a(_x(n),[bx,yx])}function Ax(n){return _a(n,[xx,Sf],[wx,Sf],[kx,Sx])}function Lx(n){return _a(n,[px,mx])}const Nx=ya(xa);function Rx(n){return _a(n,[vx,Nx])}const Fx=ba(dx,fx),qx=ba(Em),zx=ya(xa,go,bo);function jx(n){return _a(n,[Fx,Om],[qx,zx])}const Tf="Invalid Duration",Dm={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Ux={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Dm},xi=146097/400,zs=146097/4800,Vx={years:{quarters:4,months:12,weeks:xi/7,days:xi,hours:xi*24,minutes:xi*24*60,seconds:xi*24*60*60,milliseconds:xi*24*60*60*1e3},quarters:{months:3,weeks:xi/28,days:xi/4,hours:xi*24/4,minutes:xi*24*60/4,seconds:xi*24*60*60/4,milliseconds:xi*24*60*60*1e3/4},months:{weeks:zs/7,days:zs,hours:zs*24,minutes:zs*24*60,seconds:zs*24*60*60,milliseconds:zs*24*60*60*1e3},...Dm},gs=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Bx=gs.slice(0).reverse();function vr(n,e,t=!1){const i={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new Ht(i)}function Pm(n,e){let t=e.milliseconds??0;for(const i of Bx.slice(1))e[i]&&(t+=e[i]*n[i].milliseconds);return t}function $f(n,e){const t=Pm(n,e)<0?-1:1;gs.reduceRight((i,s)=>{if(Pt(e[s]))return i;if(i){const a=e[i]*t,o=n[s][i],l=Math.floor(a/o);e[s]+=l*t,e[i]-=l*o*t}return s},null),gs.reduce((i,s)=>{if(Pt(e[s]))return i;if(i){const a=e[i]%1;e[i]-=a,e[s]+=a*n[i][s]}return s},null)}function If(n){const e={};for(const[t,i]of Object.entries(n))i!==0&&(e[t]=i);return e}class Ht{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?Vx:Ux;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Gt.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return Ht.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new An(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ht({values:bl(e,Ht.normalizeUnit),loc:Gt.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Yr(e))return Ht.fromMillis(e);if(Ht.isDuration(e))return e;if(typeof e=="object")return Ht.fromObject(e);throw new An(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=Lx(e);return i?Ht.fromObject(i,t):Ht.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=Rx(e);return i?Ht.fromObject(i,t):Ht.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new An("need to specify a reason the Duration is invalid");const i=e instanceof zi?e:new zi(e,t);if(un.throwOnInvalid)throw new m_(i);return new Ht({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new zp(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Nn.create(this.loc,i).formatDurationFromString(this,e):Tf}toHuman(e={}){if(!this.isValid)return Tf;const t=e.showZeros!==!1,i=gs.map(s=>{const a=this.values[s];return Pt(a)||a===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(a)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=rd(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},$t.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Pm(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Ht.fromDurationLike(e),i={};for(const s of gs)(aa(t.values,s)||aa(this.values,s))&&(i[s]=t.get(s)+this.get(s));return vr(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=Ht.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=gm(e(this.values[i],i));return vr(this,{values:t},!0)}get(e){return this[Ht.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...bl(e,Ht.normalizeUnit)};return vr(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:s,conversionAccuracy:i};return vr(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return $f(this.matrix,e),vr(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=If(this.normalize().shiftToAll().toObject());return vr(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Ht.normalizeUnit(o));const t={},i={},s=this.toObject();let a;for(const o of gs)if(e.indexOf(o)>=0){a=o;let l=0;for(const u in i)l+=this.matrix[u][o]*i[u],i[u]=0;Yr(s[o])&&(l+=s[o]);const c=Math.trunc(l);t[o]=c,i[o]=(l*1e3-c*1e3)/1e3}else Yr(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(t[a]+=o===a?i[o]:i[o]/this.matrix[a][o]);return $f(this.matrix,t),vr(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return vr(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=If(this.values);return vr(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of gs)if(!t(this.values[i],e.values[i]))return!1;return!0}}const js="Invalid Interval";function Hx(n,e){return!n||!n.isValid?cn.invalid("missing or invalid start"):!e||!e.isValid?cn.invalid("missing or invalid end"):e<n?cn.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class cn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new An("need to specify a reason the Interval is invalid");const i=e instanceof zi?e:new zi(e,t);if(un.throwOnInvalid)throw new p_(i);return new cn({invalid:i})}static fromDateTimes(e,t){const i=Ca(e),s=Ca(t),a=Hx(i,s);return a??new cn({start:i,end:s})}static after(e,t){const i=Ht.fromDurationLike(t),s=Ca(e);return cn.fromDateTimes(s,s.plus(i))}static before(e,t){const i=Ht.fromDurationLike(t),s=Ca(e);return cn.fromDateTimes(s.minus(i),s)}static fromISO(e,t){const[i,s]=(e||"").split("/",2);if(i&&s){let a,o;try{a=$t.fromISO(i,t),o=a.isValid}catch{o=!1}let l,c;try{l=$t.fromISO(s,t),c=l.isValid}catch{c=!1}if(o&&c)return cn.fromDateTimes(a,l);if(o){const u=Ht.fromISO(s,t);if(u.isValid)return cn.after(a,u)}else if(c){const u=Ht.fromISO(i,t);if(u.isValid)return cn.before(l,u)}}return cn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let s;return t?.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(e,t),Math.floor(s.diff(i,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?cn.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Ca).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),i=[];let{s}=this,a=0;for(;s<this.e;){const o=t[a]||this.e,l=+o>+this.e?this.e:o;i.push(cn.fromDateTimes(s,l)),s=l,a+=1}return i}splitBy(e){const t=Ht.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,s=1,a;const o=[];for(;i<this.e;){const l=this.start.plus(t.mapUnits(c=>c*s));a=+l>+this.e?this.e:l,o.push(cn.fromDateTimes(i,a)),i=a,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:cn.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return cn.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((s,a)=>s.s-a.s).reduce(([s,a],o)=>a?a.overlaps(o)||a.abutsStart(o)?[s,a.union(o)]:[s.concat([a]),o]:[s,o],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const s=[],a=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...a),l=o.sort((c,u)=>c.time-u.time);for(const c of l)i+=c.type==="s"?1:-1,i===1?t=c.time:(t&&+t!=+c.time&&s.push(cn.fromDateTimes(t,c.time)),t=null);return cn.merge(s)}difference(...e){return cn.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â ${this.e.toISO()})`:js}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=pl,t={}){return this.isValid?Nn.create(this.s.loc.clone(t),e).formatInterval(this):js}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:js}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:js}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:js}toFormat(e,{separator:t=" â "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:js}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Ht.invalid(this.invalidReason)}mapEndpoints(e){return cn.fromDateTimes(e(this.s),e(this.e))}}class Do{static hasDST(e=un.defaultZone){const t=$t.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Ir.isValidZone(e)}static normalizeZone(e){return zr(e,un.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Gt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Gt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Gt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null,outputCalendar:a="gregory"}={}){return(s||Gt.create(t,i,a)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null,outputCalendar:a="gregory"}={}){return(s||Gt.create(t,i,a)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Gt.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Gt.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Gt.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Gt.create(t,null,"gregory").eras(e)}static features(){return{relative:vm(),localeWeek:pm()}}}function Cf(n,e){const t=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(n);return Math.floor(Ht.fromMillis(i).as("days"))}function Wx(n,e,t){const i=[["years",(c,u)=>u.year-c.year],["quarters",(c,u)=>u.quarter-c.quarter+(u.year-c.year)*4],["months",(c,u)=>u.month-c.month+(u.year-c.year)*12],["weeks",(c,u)=>{const d=Cf(c,u);return(d-d%7)/7}],["days",Cf]],s={},a=n;let o,l;for(const[c,u]of i)t.indexOf(c)>=0&&(o=c,s[c]=u(n,e),l=a.plus(s),l>e?(s[c]--,n=a.plus(s),n>e&&(l=n,s[c]--,n=a.plus(s))):n=l);return[n,s,l,o]}function Yx(n,e,t,i){let[s,a,o,l]=Wx(n,e,t);const c=e-s,u=t.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);u.length===0&&(o<e&&(o=s.plus({[l]:1})),o!==s&&(a[l]=(a[l]||0)+c/(o-s)));const d=Ht.fromObject(a,i);return u.length>0?Ht.fromMillis(c,i).shiftTo(...u).plus(d):d}const Kx="missing Intl.DateTimeFormat.formatToParts support";function Kt(n,e=t=>t){return{regex:n,deser:([t])=>e(F_(t))}}const Jx="Â ",Mm=`[ ${Jx}]`,Am=new RegExp(Mm,"g");function Zx(n){return n.replace(/\./g,"\\.?").replace(Am,Mm)}function Ef(n){return n.replace(/\./g,"").replace(Am," ").toLowerCase()}function Ni(n,e){return n===null?null:{regex:RegExp(n.map(Zx).join("|")),deser:([t])=>n.findIndex(i=>Ef(t)===Ef(i))+e}}function Of(n,e){return{regex:n,deser:([,t,i])=>Rl(t,i),groups:e}}function Po(n){return{regex:n,deser:([e])=>e}}function Gx(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Xx(n,e){const t=Li(e),i=Li(e,"{2}"),s=Li(e,"{3}"),a=Li(e,"{4}"),o=Li(e,"{6}"),l=Li(e,"{1,2}"),c=Li(e,"{1,3}"),u=Li(e,"{1,6}"),d=Li(e,"{1,9}"),f=Li(e,"{2,4}"),h=Li(e,"{4,6}"),v=m=>({regex:RegExp(Gx(m.val)),deser:([w])=>w,literal:!0}),p=(m=>{if(n.literal)return v(m);switch(m.val){case"G":return Ni(e.eras("short"),0);case"GG":return Ni(e.eras("long"),0);case"y":return Kt(u);case"yy":return Kt(f,du);case"yyyy":return Kt(a);case"yyyyy":return Kt(h);case"yyyyyy":return Kt(o);case"M":return Kt(l);case"MM":return Kt(i);case"MMM":return Ni(e.months("short",!0),1);case"MMMM":return Ni(e.months("long",!0),1);case"L":return Kt(l);case"LL":return Kt(i);case"LLL":return Ni(e.months("short",!1),1);case"LLLL":return Ni(e.months("long",!1),1);case"d":return Kt(l);case"dd":return Kt(i);case"o":return Kt(c);case"ooo":return Kt(s);case"HH":return Kt(i);case"H":return Kt(l);case"hh":return Kt(i);case"h":return Kt(l);case"mm":return Kt(i);case"m":return Kt(l);case"q":return Kt(l);case"qq":return Kt(i);case"s":return Kt(l);case"ss":return Kt(i);case"S":return Kt(c);case"SSS":return Kt(s);case"u":return Po(d);case"uu":return Po(l);case"uuu":return Kt(t);case"a":return Ni(e.meridiems(),0);case"kkkk":return Kt(a);case"kk":return Kt(f,du);case"W":return Kt(l);case"WW":return Kt(i);case"E":case"c":return Kt(t);case"EEE":return Ni(e.weekdays("short",!1),1);case"EEEE":return Ni(e.weekdays("long",!1),1);case"ccc":return Ni(e.weekdays("short",!0),1);case"cccc":return Ni(e.weekdays("long",!0),1);case"Z":case"ZZ":return Of(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return Of(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return Po(/[a-z_+-/]{1,256}?/i);case" ":return Po(/[^\S\n\r]/);default:return v(m)}})(n)||{invalidReason:Kx};return p.token=n,p}const Qx={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function e1(n,e,t){const{type:i,value:s}=n;if(i==="literal"){const c=/^\s+$/.test(s);return{literal:!c,val:c?" ":s}}const a=e[i];let o=i;i==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let l=Qx[o];if(typeof l=="object"&&(l=l[a]),l)return{literal:!1,val:l}}function t1(n){return[`^${n.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,n]}function n1(n,e,t){const i=n.match(e);if(i){const s={};let a=1;for(const o in t)if(aa(t,o)){const l=t[o],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(s[l.token.val[0]]=l.deser(i.slice(a,a+c))),a+=c}return[i,s]}else return[i,{}]}function i1(n){const e=a=>{switch(a){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return Pt(n.z)||(t=Ir.create(n.z)),Pt(n.Z)||(t||(t=new Yn(n.Z)),i=n.Z),Pt(n.q)||(n.M=(n.q-1)*3+1),Pt(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),Pt(n.u)||(n.S=id(n.u)),[Object.keys(n).reduce((a,o)=>{const l=e(o);return l&&(a[l]=n[o]),a},{}),t,i]}let hc=null;function r1(){return hc||(hc=$t.fromMillis(1555555555555)),hc}function s1(n,e){if(n.literal)return n;const t=Nn.macroTokenToFormatOpts(n.val),i=Fm(t,e);return i==null||i.includes(void 0)?n:i}function Lm(n,e){return Array.prototype.concat(...n.map(t=>s1(t,e)))}class Nm{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=Lm(Nn.parseFormat(t),e),this.units=this.tokens.map(i=>Xx(i,e)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,s]=t1(this.units);this.regex=RegExp(i,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[t,i]=n1(e,this.regex,this.handlers),[s,a,o]=i?i1(i):[null,null,void 0];if(aa(i,"a")&&aa(i,"H"))throw new Ks("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:i,result:s,zone:a,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Rm(n,e,t){return new Nm(n,t).explainFromTokens(e)}function a1(n,e,t){const{result:i,zone:s,specificOffset:a,invalidReason:o}=Rm(n,e,t);return[i,s,a,o]}function Fm(n,e){if(!n)return null;const i=Nn.create(e,n).dtFormatter(r1()),s=i.formatToParts(),a=i.resolvedOptions();return s.map(o=>e1(o,n,a))}const vc="Invalid DateTime",Df=864e13;function Ra(n){return new zi("unsupported zone",`the zone "${n.name}" is not supported`)}function pc(n){return n.weekData===null&&(n.weekData=ml(n.c)),n.weekData}function mc(n){return n.localWeekData===null&&(n.localWeekData=ml(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function as(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new $t({...t,...e,old:t})}function qm(n,e,t){let i=n-e*60*1e3;const s=t.offset(i);if(e===s)return[i,e];i-=(s-e)*60*1e3;const a=t.offset(i);return s===a?[i,s]:[n-Math.min(s,a)*60*1e3,Math.max(s,a)]}function Mo(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function el(n,e,t){return qm(Nl(n),e,t)}function Pf(n,e){const t=n.o,i=n.c.year+Math.trunc(e.years),s=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,a={...n.c,year:i,month:s,day:Math.min(n.c.day,gl(i,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Ht.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=Nl(a);let[c,u]=qm(l,t,n.zone);return o!==0&&(c+=o,u=n.zone.offset(c)),{ts:c,o:u}}function Us(n,e,t,i,s,a){const{setZone:o,zone:l}=t;if(n&&Object.keys(n).length!==0||e){const c=e||l,u=$t.fromObject(n,{...t,zone:c,specificOffset:a});return o?u:u.setZone(l)}else return $t.invalid(new zi("unparsable",`the input "${s}" can't be parsed as ${i}`))}function Ao(n,e,t=!0){return n.isValid?Nn.create(Gt.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function gc(n,e,t){const i=n.c.year>9999||n.c.year<0;let s="";if(i&&n.c.year>=0&&(s+="+"),s+=bn(n.c.year,i?6:4),t==="year")return s;if(e){if(s+="-",s+=bn(n.c.month),t==="month")return s;s+="-"}else if(s+=bn(n.c.month),t==="month")return s;return s+=bn(n.c.day),s}function Mf(n,e,t,i,s,a,o){let l=!t||n.c.millisecond!==0||n.c.second!==0,c="";switch(o){case"day":case"month":case"year":break;default:if(c+=bn(n.c.hour),o==="hour")break;if(e){if(c+=":",c+=bn(n.c.minute),o==="minute")break;l&&(c+=":",c+=bn(n.c.second))}else{if(c+=bn(n.c.minute),o==="minute")break;l&&(c+=bn(n.c.second))}if(o==="second")break;l&&(!i||n.c.millisecond!==0)&&(c+=".",c+=bn(n.c.millisecond,3))}return s&&(n.isOffsetFixed&&n.offset===0&&!a?c+="Z":n.o<0?(c+="-",c+=bn(Math.trunc(-n.o/60)),c+=":",c+=bn(Math.trunc(-n.o%60))):(c+="+",c+=bn(Math.trunc(n.o/60)),c+=":",c+=bn(Math.trunc(n.o%60)))),a&&(c+="["+n.zone.ianaName+"]"),c}const zm={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},o1={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},l1={ordinal:1,hour:0,minute:0,second:0,millisecond:0},tl=["year","month","day","hour","minute","second","millisecond"],c1=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],u1=["year","ordinal","hour","minute","second","millisecond"];function nl(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new zp(n);return e}function Af(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return nl(n)}}function d1(n){if(Fa===void 0&&(Fa=un.now()),n.type!=="iana")return n.offset(Fa);const e=n.name;let t=fu.get(e);return t===void 0&&(t=n.offset(Fa),fu.set(e,t)),t}function Lf(n,e){const t=zr(e.zone,un.defaultZone);if(!t.isValid)return $t.invalid(Ra(t));const i=Gt.fromObject(e);let s,a;if(Pt(n.year))s=un.now();else{for(const c of tl)Pt(n[c])&&(n[c]=zm[c]);const o=fm(n)||hm(n);if(o)return $t.invalid(o);const l=d1(t);[s,a]=el(n,l,t)}return new $t({ts:s,zone:t,loc:i,o:a})}function Nf(n,e,t){const i=Pt(t.round)?!0:t.round,s=Pt(t.rounding)?"trunc":t.rounding,a=(l,c)=>(l=rd(l,i||t.calendary?0:2,t.calendary?"round":s),e.loc.clone(t).relFormatter(t).format(l,c)),o=l=>t.calendary?e.hasSame(n,l)?0:e.startOf(l).diff(n.startOf(l),l).get(l):e.diff(n,l).get(l);if(t.unit)return a(o(t.unit),t.unit);for(const l of t.units){const c=o(l);if(Math.abs(c)>=1)return a(c,l)}return a(n>e?-0:0,t.units[t.units.length-1])}function Rf(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let Fa;const fu=new Map;class $t{constructor(e){const t=e.zone||un.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new zi("invalid input"):null)||(t.isValid?null:Ra(t));this.ts=Pt(e.ts)?un.now():e.ts;let s=null,a=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[s,a]=[e.old.c,e.old.o];else{const l=Yr(e.o)&&!e.old?e.o:t.offset(this.ts);s=Mo(this.ts,l),i=Number.isNaN(s.year)?new zi("invalid input"):null,s=i?null:s,a=i?null:l}this._zone=t,this.loc=e.loc||Gt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=a,this.isLuxonDateTime=!0}static now(){return new $t({})}static local(){const[e,t]=Rf(arguments),[i,s,a,o,l,c,u]=t;return Lf({year:i,month:s,day:a,hour:o,minute:l,second:c,millisecond:u},e)}static utc(){const[e,t]=Rf(arguments),[i,s,a,o,l,c,u]=t;return e.zone=Yn.utcInstance,Lf({year:i,month:s,day:a,hour:o,minute:l,second:c,millisecond:u},e)}static fromJSDate(e,t={}){const i=V_(e)?e.valueOf():NaN;if(Number.isNaN(i))return $t.invalid("invalid input");const s=zr(t.zone,un.defaultZone);return s.isValid?new $t({ts:i,zone:s,loc:Gt.fromObject(t)}):$t.invalid(Ra(s))}static fromMillis(e,t={}){if(Yr(e))return e<-Df||e>Df?$t.invalid("Timestamp out of range"):new $t({ts:e,zone:zr(t.zone,un.defaultZone),loc:Gt.fromObject(t)});throw new An(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Yr(e))return new $t({ts:e*1e3,zone:zr(t.zone,un.defaultZone),loc:Gt.fromObject(t)});throw new An("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=zr(t.zone,un.defaultZone);if(!i.isValid)return $t.invalid(Ra(i));const s=Gt.fromObject(t),a=bl(e,Af),{minDaysInFirstWeek:o,startOfWeek:l}=_f(a,s),c=un.now(),u=Pt(t.specificOffset)?i.offset(c):t.specificOffset,d=!Pt(a.ordinal),f=!Pt(a.year),h=!Pt(a.month)||!Pt(a.day),v=f||h,_=a.weekYear||a.weekNumber;if((v||d)&&_)throw new Ks("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&d)throw new Ks("Can't mix ordinal dates with month/day");const p=_||a.weekday&&!v;let m,w,k=Mo(c,u);p?(m=c1,w=o1,k=ml(k,o,l)):d?(m=u1,w=l1,k=fc(k)):(m=tl,w=zm);let $=!1;for(const P of m){const N=a[P];Pt(N)?$?a[P]=w[P]:a[P]=k[P]:$=!0}const D=p?z_(a,o,l):d?j_(a):fm(a),I=D||hm(a);if(I)return $t.invalid(I);const E=p?bf(a,o,l):d?yf(a):a,[T,C]=el(E,u,i),O=new $t({ts:T,zone:i,o:C,loc:s});return a.weekday&&v&&e.weekday!==O.weekday?$t.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of ${O.toISO()}`):O.isValid?O:$t.invalid(O.invalid)}static fromISO(e,t={}){const[i,s]=Px(e);return Us(i,s,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,s]=Mx(e);return Us(i,s,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,s]=Ax(e);return Us(i,s,t,"HTTP",t)}static fromFormat(e,t,i={}){if(Pt(e)||Pt(t))throw new An("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:a=null}=i,o=Gt.fromOpts({locale:s,numberingSystem:a,defaultToEN:!0}),[l,c,u,d]=a1(o,e,t);return d?$t.invalid(d):Us(l,c,i,`format ${t}`,e,u)}static fromString(e,t,i={}){return $t.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,s]=jx(e);return Us(i,s,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new An("need to specify a reason the DateTime is invalid");const i=e instanceof zi?e:new zi(e,t);if(un.throwOnInvalid)throw new v_(i);return new $t({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=Fm(e,Gt.fromObject(t));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(e,t={}){return Lm(Nn.parseFormat(e),Gt.fromObject(t)).map(s=>s.val).join("")}static resetCache(){Fa=void 0,fu.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?pc(this).weekYear:NaN}get weekNumber(){return this.isValid?pc(this).weekNumber:NaN}get weekday(){return this.isValid?pc(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?mc(this).weekday:NaN}get localWeekNumber(){return this.isValid?mc(this).weekNumber:NaN}get localWeekYear(){return this.isValid?mc(this).weekYear:NaN}get ordinal(){return this.isValid?fc(this.c).ordinal:NaN}get monthShort(){return this.isValid?Do.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Do.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Do.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Do.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=Nl(this.c),s=this.zone.offset(i-e),a=this.zone.offset(i+e),o=this.zone.offset(i-s*t),l=this.zone.offset(i-a*t);if(o===l)return[this];const c=i-o*t,u=i-l*t,d=Mo(c,o),f=Mo(u,l);return d.hour===f.hour&&d.minute===f.minute&&d.second===f.second&&d.millisecond===f.millisecond?[as(this,{ts:c}),as(this,{ts:u})]:[this]}get isInLeapYear(){return mo(this.year)}get daysInMonth(){return gl(this.year,this.month)}get daysInYear(){return this.isValid?Xs(this.year):NaN}get weeksInWeekYear(){return this.isValid?eo(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?eo(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:s}=Nn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:s}}toUTC(e=0,t={}){return this.setZone(Yn.instance(e),t)}toLocal(){return this.setZone(un.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=zr(e,un.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(t||i){const a=e.offset(this.ts),o=this.toObject();[s]=el(o,a,e)}return as(this,{ts:s,zone:e})}else return $t.invalid(Ra(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const s=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return as(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=bl(e,Af),{minDaysInFirstWeek:i,startOfWeek:s}=_f(t,this.loc),a=!Pt(t.weekYear)||!Pt(t.weekNumber)||!Pt(t.weekday),o=!Pt(t.ordinal),l=!Pt(t.year),c=!Pt(t.month)||!Pt(t.day),u=l||c,d=t.weekYear||t.weekNumber;if((u||o)&&d)throw new Ks("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Ks("Can't mix ordinal dates with month/day");let f;a?f=bf({...ml(this.c,i,s),...t},i,s):Pt(t.ordinal)?(f={...this.toObject(),...t},Pt(t.day)&&(f.day=Math.min(gl(f.year,f.month),f.day))):f=yf({...fc(this.c),...t});const[h,v]=el(f,this.o,this.zone);return as(this,{ts:h,o:v})}plus(e){if(!this.isValid)return this;const t=Ht.fromDurationLike(e);return as(this,Pf(this,t))}minus(e){if(!this.isValid)return this;const t=Ht.fromDurationLike(e).negate();return as(this,Pf(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},s=Ht.normalizeUnit(e);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(t){const a=this.loc.getStartOfWeek(),{weekday:o}=this;o<a&&(i.weekNumber=this.weekNumber-1),i.weekday=a}else i.weekday=1;if(s==="quarters"){const a=Math.ceil(this.month/3);i.month=(a-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Nn.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):vc}toLocaleString(e=pl,t={}){return this.isValid?Nn.create(this.loc.clone(t),e).formatDateTime(this):vc}toLocaleParts(e={}){return this.isValid?Nn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:a=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=nl(o);const l=e==="extended";let c=gc(this,l,o);return tl.indexOf(o)>=3&&(c+="T"),c+=Mf(this,l,t,i,s,a,o),c}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?gc(this,e==="extended",nl(t)):null}toISOWeekDate(){return Ao(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:a=!1,format:o="extended",precision:l="milliseconds"}={}){return this.isValid?(l=nl(l),(s&&tl.indexOf(l)>=3?"T":"")+Mf(this,o==="extended",t,e,i,a,l)):null}toRFC2822(){return Ao(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ao(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?gc(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(t||e)&&(i&&(s+=" "),t?s+="z":e&&(s+="ZZ")),Ao(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():vc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return Ht.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},a=B_(t).map(Ht.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,c=o?e:this,u=Yx(l,c,a,s);return o?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff($t.now(),e,t)}until(e){return this.isValid?cn.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const s=e.valueOf(),a=this.setZone(e.zone,{keepLocalTime:!0});return a.startOf(t,i)<=s&&s<=a.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||$t.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],a=e.unit;return Array.isArray(e.unit)&&(s=e.unit,a=void 0),Nf(t,this.plus(i),{...e,numeric:"always",units:s,unit:a})}toRelativeCalendar(e={}){return this.isValid?Nf(e.base||$t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every($t.isDateTime))throw new An("min requires all arguments be DateTimes");return xf(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every($t.isDateTime))throw new An("max requires all arguments be DateTimes");return xf(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:s=null,numberingSystem:a=null}=i,o=Gt.fromOpts({locale:s,numberingSystem:a,defaultToEN:!0});return Rm(o,e,t)}static fromStringExplain(e,t,i={}){return $t.fromFormatExplain(e,t,i)}static buildFormatParser(e,t={}){const{locale:i=null,numberingSystem:s=null}=t,a=Gt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return new Nm(a,e)}static fromFormatParser(e,t,i={}){if(Pt(e)||Pt(t))throw new An("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:a=null}=i,o=Gt.fromOpts({locale:s,numberingSystem:a,defaultToEN:!0});if(!o.equals(t.locale))throw new An(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:l,zone:c,specificOffset:u,invalidReason:d}=t.explainFromTokens(e);return d?$t.invalid(d):Us(l,c,i,`format ${t.format}`,e,u)}static get DATE_SHORT(){return pl}static get DATE_MED(){return jp}static get DATE_MED_WITH_WEEKDAY(){return g_}static get DATE_FULL(){return Up}static get DATE_HUGE(){return Vp}static get TIME_SIMPLE(){return Bp}static get TIME_WITH_SECONDS(){return Hp}static get TIME_WITH_SHORT_OFFSET(){return Wp}static get TIME_WITH_LONG_OFFSET(){return Yp}static get TIME_24_SIMPLE(){return Kp}static get TIME_24_WITH_SECONDS(){return Jp}static get TIME_24_WITH_SHORT_OFFSET(){return Zp}static get TIME_24_WITH_LONG_OFFSET(){return Gp}static get DATETIME_SHORT(){return Xp}static get DATETIME_SHORT_WITH_SECONDS(){return Qp}static get DATETIME_MED(){return em}static get DATETIME_MED_WITH_SECONDS(){return tm}static get DATETIME_MED_WITH_WEEKDAY(){return b_}static get DATETIME_FULL(){return nm}static get DATETIME_FULL_WITH_SECONDS(){return im}static get DATETIME_HUGE(){return rm}static get DATETIME_HUGE_WITH_SECONDS(){return sm}}function Ca(n){if($t.isDateTime(n))return n;if(n&&n.valueOf&&Yr(n.valueOf()))return $t.fromJSDate(n);if(n&&typeof n=="object")return $t.fromObject(n);throw new An(`Unknown datetime argument: ${n}, of type ${typeof n}`)}const f1=[".jpg",".jpeg",".png",".svg",".gif",".jfif",".webp",".avif"],h1=[".mp4",".avi",".mov",".3gp",".wmv"],v1=[".aa",".aac",".m4v",".mp3",".ogg",".oga",".mogg",".amr"],p1=[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".odp",".odt",".ods",".txt"],m1=["relation","file","select"],g1=["text","email","url","editor"],jm=[{level:-4,label:"DEBUG",class:""},{level:0,label:"INFO",class:"label-success"},{level:4,label:"WARN",class:"label-warning"},{level:8,label:"ERROR",class:"label-danger"}];class F{static isObject(e){return e!==null&&typeof e=="object"&&e.constructor===Object}static clone(e){return typeof structuredClone<"u"?structuredClone(e):JSON.parse(JSON.stringify(e))}static zeroValue(e){switch(typeof e){case"string":return"";case"number":return 0;case"boolean":return!1;case"object":return e===null?null:Array.isArray(e)?[]:{};case"undefined":return;default:return null}}static isEmpty(e){return e===""||e===null||typeof e>"u"||Array.isArray(e)&&e.length===0||F.isObject(e)&&Object.keys(e).length===0}static isInput(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return t==="input"||t==="select"||t==="textarea"||e?.isContentEditable}static isFocusable(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return F.isInput(e)||t==="button"||t==="a"||t==="details"||e?.tabIndex>=0}static hasNonEmptyProps(e){for(let t in e)if(!F.isEmpty(e[t]))return!0;return!1}static toArray(e,t=!1){return Array.isArray(e)?e.slice():(t||!F.isEmpty(e))&&typeof e<"u"?[e]:[]}static inArray(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t)return!0;return!1}static removeByValue(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t){e.splice(i,1);break}}static pushUnique(e,t){F.inArray(e,t)||e.push(t)}static mergeUnique(e,t){for(let i of t)F.pushUnique(e,i);return e}static findByKey(e,t,i){e=Array.isArray(e)?e:[];for(let s in e)if(e[s][t]==i)return e[s];return null}static groupByKey(e,t){e=Array.isArray(e)?e:[];const i={};for(let s in e)i[e[s][t]]=i[e[s][t]]||[],i[e[s][t]].push(e[s]);return i}static removeByKey(e,t,i){for(let s in e)if(e[s][t]==i){e.splice(s,1);break}}static pushOrReplaceByKey(e,t,i="id"){for(let s=e.length-1;s>=0;s--)if(e[s][i]==t[i]){e[s]=t;return}e.push(t)}static filterDuplicatesByKey(e,t="id"){e=Array.isArray(e)?e:[];const i={};for(const s of e)i[s[t]]=s;return Object.values(i)}static filterRedactedProps(e,t="******"){const i=JSON.parse(JSON.stringify(e||{}));for(let s in i)typeof i[s]=="object"&&i[s]!==null?i[s]=F.filterRedactedProps(i[s],t):i[s]===t&&delete i[s];return i}static getNestedVal(e,t,i=null,s="."){let a=e||{},o=(t||"").split(s);for(const l of o){if(!F.isObject(a)&&!Array.isArray(a)||typeof a[l]>"u")return i;a=a[l]}return a}static setByPath(e,t,i,s="."){if(e===null||typeof e!="object"){console.warn("setByPath: data not an object or array.");return}let a=e,o=t.split(s),l=o.pop();for(const c of o)(!F.isObject(a)&&!Array.isArray(a)||!F.isObject(a[c])&&!Array.isArray(a[c]))&&(a[c]={}),a=a[c];a[l]=i}static deleteByPath(e,t,i="."){let s=e||{},a=(t||"").split(i),o=a.pop();for(const l of a)(!F.isObject(s)&&!Array.isArray(s)||!F.isObject(s[l])&&!Array.isArray(s[l]))&&(s[l]={}),s=s[l];Array.isArray(s)?s.splice(o,1):F.isObject(s)&&delete s[o],a.length>0&&(Array.isArray(s)&&!s.length||F.isObject(s)&&!Object.keys(s).length)&&(Array.isArray(e)&&e.length>0||F.isObject(e)&&Object.keys(e).length>0)&&F.deleteByPath(e,a.join(i),i)}static randomString(e=10){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<e;s++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}static randomSecret(e=15){if(typeof crypto>"u")return F.randomString(e);const t=new Uint8Array(e);crypto.getRandomValues(t);const i="-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let s="";for(let a=0;a<e;a++)s+=i.charAt(t[a]%i.length);return s}static sentenize(e,t=!0){if(typeof e!="string")return"";if(e=e.trim().split("_").join(" "),e==="")return e;if(e=e[0].toUpperCase()+e.substring(1),t){let i=e[e.length-1];i!=="."&&i!=="?"&&i!=="!"&&(e+=".")}return e}static trimQuotedValue(e){return typeof e=="string"&&(e[0]=='"'||e[0]=="'"||e[0]=="`")&&e[0]==e[e.length-1]?e.slice(1,-1):e}static plainText(e){return e?(new DOMParser().parseFromString(e,"text/html").body.innerText||"").trim():""}static truncate(e,t=150,i=!0){return e=""+e,e.length<=t?e:e.substring(0,t)+(i?"...":"")}static truncateObject(e){const t={};for(let i in e){let s=e[i];typeof s=="string"&&(s=F.truncate(s,150,!0)),t[i]=s}return t}static slugify(e,t="_",i=[".","=","-"]){if(e==="")return"";const s={a:/Ð°|Ã |Ã¡|Ã¥|Ã¢/gi,b:/Ð±/gi,c:/Ñ|Ã§/gi,d:/Ð´/gi,e:/Ðµ|Ã¨|Ã©|Ãª|áº½|Ã«/gi,f:/Ñ/gi,g:/Ð³/gi,h:/Ñ/gi,i:/Ð¹|Ð¸|Ã¬|Ã­|Ã®/gi,j:/Ð¶/gi,k:/Ðº/gi,l:/Ð»/gi,m:/Ð¼/gi,n:/Ð½|Ã±/gi,o:/Ð¾|Ã²|Ã³|Ã´|Ã¸/gi,p:/Ð¿/gi,q:/Ñ/gi,r:/Ñ/gi,s:/Ñ/gi,t:/Ñ/gi,u:/Ñ|Ã¹|Ãº|Å¯|Ã»/gi,v:/Ð²/gi,w:/Ð²/gi,x:/Ñ/gi,y:/Ñ/gi,z:/Ð·/gi,ae:/Ã¤|Ã¦/gi,oe:/Ã¶/gi,ue:/Ã¼/gi,Ae:/Ã/gi,Ue:/Ã/gi,Oe:/Ã/gi,ss:/Ã/gi,and:/&/gi};for(let a in s)e=e.replace(s[a],a);return e.replace(new RegExp("["+i.join("")+"]","g")," ").replace(/[^\w\ ]/gi,"").replace(/\s+/g,t)}static escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}static splitNonEmpty(e,t=","){const i=[],s=(e||"").replaceAll("\\"+t,"{_PB_ESCAPED_}").split(t).map(a=>a.replaceAll("{_PB_ESCAPED_}",t));for(let a of s)a=a.trim(),F.isEmpty(a)||i.push(a);return i}static joinNonEmpty(e,t=", ",i=!0){e=e||[];const s=[],a=t.length>1?t.trim():t;for(let o of e)o=typeof o=="string"?o.trim():"",!F.isEmpty(o)&&(i&&(o=o.replaceAll(a,"\\"+a)),s.push(o));return s.join(t)}static getInitials(e){if(e=(e||"").split("@")[0].trim(),e.length<=2)return e.toUpperCase();const t=e.split(/[\.\_\-\ ]/);return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e[0].toUpperCase()}static formattedFileSize(e){const t=e?Math.floor(Math.log(e)/Math.log(1024)):0;return(e/Math.pow(1024,t)).toFixed(2)*1+" "+["B","KB","MB","GB","TB"][t]}static getDateTime(e){if(typeof e=="string"){const t={19:"yyyy-MM-dd HH:mm:ss",23:"yyyy-MM-dd HH:mm:ss.SSS",20:"yyyy-MM-dd HH:mm:ss'Z'",24:"yyyy-MM-dd HH:mm:ss.SSS'Z'"},i=t[e.length]||t[19];return $t.fromFormat(e,i,{zone:"UTC"})}return typeof e=="number"?$t.fromMillis(e):$t.fromJSDate(e)}static formatToUTCDate(e,t="yyyy-MM-dd HH:mm:ss"){return F.getDateTime(e).toUTC().toFormat(t)}static formatToLocalDate(e,t="yyyy-MM-dd HH:mm:ss"){return F.getDateTime(e).toLocal().toFormat(t)}static async copyToClipboard(e){if(typeof e=="object")try{e=JSON.stringify(e,null,2)}catch{}if(e=""+e,!(!e.length||!window?.navigator?.clipboard))return window.navigator.clipboard.writeText(e).catch(t=>{console.warn("Failed to copy.",t)})}static download(e,t){const i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("download",t),i.setAttribute("target","_blank"),i.click(),i.remove()}static downloadJson(e,t){t=t.endsWith(".json")?t:t+".json";const i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=window.URL.createObjectURL(i);F.download(s,t)}static getJWTPayload(e){const t=(e||"").split(".")[1]||"";if(t==="")return{};try{const i=decodeURIComponent(atob(t));return JSON.parse(i)||{}}catch(i){console.warn("Failed to parse JWT payload data.",i)}return{}}static hasImageExtension(e){return e=e||"",!!f1.find(t=>e.toLowerCase().endsWith(t))}static hasVideoExtension(e){return e=e||"",!!h1.find(t=>e.toLowerCase().endsWith(t))}static hasAudioExtension(e){return e=e||"",!!v1.find(t=>e.toLowerCase().endsWith(t))}static hasDocumentExtension(e){return e=e||"",!!p1.find(t=>e.toLowerCase().endsWith(t))}static getFileType(e){return F.hasImageExtension(e)?"image":F.hasDocumentExtension(e)?"document":F.hasVideoExtension(e)?"video":F.hasAudioExtension(e)?"audio":"file"}static generateThumb(e,t=100,i=100){return new Promise(s=>{let a=new FileReader;a.onload=function(o){let l=new Image;l.onload=function(){let c=document.createElement("canvas"),u=c.getContext("2d"),d=l.width,f=l.height;return c.width=t,c.height=i,u.drawImage(l,d>f?(d-f)/2:0,0,d>f?f:d,d>f?f:d,0,0,t,i),s(c.toDataURL(e.type))},l.src=o.target.result},a.readAsDataURL(e)})}static addValueToFormData(e,t,i){if(!(typeof i>"u"))if(F.isEmpty(i))e.append(t,"");else if(Array.isArray(i))for(const s of i)F.addValueToFormData(e,t,s);else i instanceof File?e.append(t,i):i instanceof Date?e.append(t,i.toISOString()):F.isObject(i)?e.append(t,JSON.stringify(i)):e.append(t,""+i)}static dummyCollectionRecord(e){return Object.assign({collectionId:e?.id,collectionName:e?.name},F.dummyCollectionSchemaData(e))}static dummyCollectionSchemaData(e,t=!1){const i=e?.fields||[],s={};for(const a of i){if(a.hidden||t&&a.primaryKey&&a.autogeneratePattern||t&&a.type==="autodate")continue;let o=null;if(a.type==="number")o=123;else if(a.type==="date"||a.type==="autodate")o="2022-01-01 10:00:00.123Z";else if(a.type=="bool")o=!0;else if(a.type=="email")o="test@example.com";else if(a.type=="url")o="https://example.com";else if(a.type=="json")o="JSON";else if(a.type=="file"){if(t)continue;o="filename.jpg",a.maxSelect!=1&&(o=[o])}else if(a.type=="select")o=a?.values?.[0],a?.maxSelect!=1&&(o=[o]);else if(a.type=="relation"){const c=Array.isArray(a?.collectionIds)&&a.collectionIds.length>0?"collectionId:RELATION_RECORD_ID":"RELATION_RECORD_ID";o=c,a?.maxSelect!=1&&(o=[c])}else a.type=="geoPoint"?o={lon:0,lat:0}:o="test";s[a.name]=o}return s}static getCollectionTypeIcon(e){switch(e?.toLowerCase()){case"auth":return"ri-group-line";case"view":return"ri-table-line";default:return"ri-folder-2-line"}}static getFieldTypeIcon(e){switch(e){case"primary":return"ri-key-line";case"text":return"ri-text";case"number":return"ri-hashtag";case"date":return"ri-calendar-line";case"bool":return"ri-toggle-line";case"email":return"ri-mail-line";case"url":return"ri-link";case"editor":return"ri-edit-2-line";case"select":return"ri-list-check";case"json":return"ri-braces-line";case"file":return"ri-image-line";case"relation":return"ri-mind-map";case"password":return"ri-lock-password-line";case"autodate":return"ri-calendar-check-line";case"geoPoint":return"ri-map-pin-2-line";default:return"ri-star-s-line"}}static getFieldValueType(e){switch(e?.type){case"bool":return"Boolean";case"number":return"Number";case"geoPoint":return"Object";case"file":return"File";case"select":case"relation":return e?.maxSelect==1?"String":"Array<String>";default:return"String"}}static zeroDefaultStr(e){return e?.type==="number"?"0":e?.type==="bool"?"false":e?.type==="geoPoint"?'{"lon":0,"lat":0}':e?.type==="json"?'null, "", [], {}':["select","relation","file"].includes(e?.type)&&e?.maxSelect!=1?"[]":'""'}static getApiExampleUrl(e){return(window.location.href.substring(0,window.location.href.indexOf("/_"))||e||"/").replace("//localhost","//127.0.0.1")}static hasCollectionChanges(e,t,i=!1){if(e=e||{},t=t||{},e.id!=t.id)return!0;for(let u in e)if(u!=="fields"&&JSON.stringify(e[u])!==JSON.stringify(t[u]))return!0;const s=Array.isArray(e.fields)?e.fields:[],a=Array.isArray(t.fields)?t.fields:[],o=s.filter(u=>u?.id&&!F.findByKey(a,"id",u.id)),l=a.filter(u=>u?.id&&!F.findByKey(s,"id",u.id)),c=a.filter(u=>{const d=F.isObject(u)&&F.findByKey(s,"id",u.id);if(!d)return!1;for(let f in d)if(JSON.stringify(u[f])!=JSON.stringify(d[f]))return!0;return!1});return!!(l.length||c.length||i&&o.length)}static sortCollections(e=[]){const t=[],i=[],s=[];for(const o of e)o.type==="auth"?t.push(o):o.type==="base"?i.push(o):s.push(o);function a(o,l){return o.name>l.name?1:o.name<l.name?-1:0}return[].concat(t.sort(a),i.sort(a),s.sort(a))}static getExpandPresentableRelFields(e,t,i=2){let s=[];const a=t.find(o=>o.id==e.collectionId);if(!a)return s;for(const o of a.fields){if(!o.presentable||o.type!="relation"||i<=0)continue;const l=F.getExpandPresentableRelFields(o,t,i-1);for(const c of l)s.push(e.name+"."+c)}return s.length||s.push(e.name),s}static yieldToMain(){return new Promise(e=>{setTimeout(e,0)})}static defaultFlatpickrOptions(){return{dateFormat:"Y-m-d H:i:S",disableMobile:!0,allowInput:!0,enableTime:!0,enableSeconds:!0,time_24hr:!0,locale:{firstDayOfWeek:1}}}static defaultEditorOptions(){const e=["DIV","P","A","EM","B","STRONG","H1","H2","H3","H4","H5","H6","TABLE","TR","TD","TH","TBODY","THEAD","TFOOT","BR","HR","Q","SUP","SUB","DEL","IMG","OL","UL","LI","CODE"];function t(s){let a=s.parentNode;for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}function i(s){if(s){for(const a of s.children)i(a);e.includes(s.tagName)?(s.removeAttribute("style"),s.removeAttribute("class")):t(s)}}return{branding:!1,promotion:!1,menubar:!1,min_height:270,height:270,max_height:700,autoresize_bottom_margin:30,convert_unsafe_embeds:!0,skin:"pocketbase",content_style:"body { font-size: 14px }",plugins:["autoresize","autolink","lists","link","image","searchreplace","fullscreen","media","table","code","codesample","directionality"],codesample_global_prismjs:!0,codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"CSS",value:"css"},{text:"SQL",value:"sql"},{text:"JavaScript",value:"javascript"},{text:"Go",value:"go"},{text:"Dart",value:"dart"},{text:"Zig",value:"zig"},{text:"Rust",value:"rust"},{text:"Lua",value:"lua"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"Markdown",value:"markdown"},{text:"Swift",value:"swift"},{text:"Kotlin",value:"kotlin"},{text:"Elixir",value:"elixir"},{text:"Scala",value:"scala"},{text:"Julia",value:"julia"},{text:"Haskell",value:"haskell"}],toolbar:"styles | alignleft aligncenter alignright | bold italic forecolor backcolor | bullist numlist | link image_picker table codesample direction | code fullscreen",paste_postprocess:(s,a)=>{i(a.node)},file_picker_types:"image",file_picker_callback:(s,a,o)=>{const l=document.createElement("input");l.setAttribute("type","file"),l.setAttribute("accept","image/*"),l.addEventListener("change",c=>{const u=c.target.files[0],d=new FileReader;d.addEventListener("load",()=>{if(!tinymce)return;const f="blobid"+new Date().getTime(),h=tinymce.activeEditor.editorUpload.blobCache,v=d.result.split(",")[1],_=h.create(f,u,v);h.add(_),s(_.blobUri(),{title:u.name})}),d.readAsDataURL(u)}),l.click()},setup:s=>{s.on("keydown",o=>{(o.ctrlKey||o.metaKey)&&o.code=="KeyS"&&s.formElement&&(o.preventDefault(),o.stopPropagation(),s.formElement.dispatchEvent(new KeyboardEvent("keydown",o)))});const a="tinymce_last_direction";s.on("init",()=>{const o=window?.localStorage?.getItem(a);!s.isDirty()&&s.getContent()==""&&o=="rtl"&&s.execCommand("mceDirectionRTL")}),s.ui.registry.addMenuButton("direction",{icon:"visualchars",fetch:o=>{o([{type:"menuitem",text:"LTR content",icon:"ltr",onAction:()=>{window?.localStorage?.setItem(a,"ltr"),s.execCommand("mceDirectionLTR")}},{type:"menuitem",text:"RTL content",icon:"rtl",onAction:()=>{window?.localStorage?.setItem(a,"rtl"),s.execCommand("mceDirectionRTL")}}])}}),s.ui.registry.addMenuButton("image_picker",{icon:"image",fetch:o=>{o([{type:"menuitem",text:"From collection",icon:"gallery",onAction:()=>{s.dispatch("collections_file_picker",{})}},{type:"menuitem",text:"Inline",icon:"browse",onAction:()=>{s.execCommand("mceImage")}}])}})}}}static displayValue(e,t,i="N/A"){e=e||{},t=t||[];let s=[];for(const o of t){let l=e[o];typeof l>"u"||(l=F.stringifyValue(l,i),s.push(l))}if(s.length>0)return s.join(", ");const a=["title","name","slug","email","username","nickname","label","heading","message","key","identifier","id"];for(const o of a){let l=F.stringifyValue(e[o],"");if(l)return l}return i}static stringifyValue(e,t="N/A",i=150){if(F.isEmpty(e))return t;if(typeof e=="number")return""+e;if(typeof e=="boolean")return e?"True":"False";if(typeof e=="string")return e=e.indexOf("<")>=0?F.plainText(e):e,F.truncate(e,i)||t;if(Array.isArray(e)&&typeof e[0]!="object")return F.truncate(e.join(","),i);if(typeof e=="object")try{return F.truncate(JSON.stringify(e),i)||t}catch{return t}return e}static extractColumnsFromQuery(e){const t="__GROUP__";e=(e||"").replace(/\([\s\S]+?\)/gm,t).replace(/[\t\r\n]|(?:\s\s)+/g," ");const s=e.match(/select\s+([\s\S]+)\s+from/)?.[1]?.split(",")||[],a=[];for(let o of s){const l=o.trim().split(" ").pop();l!=""&&l!=t&&a.push(l.replace(/[\'\"\`\[\]\s]/g,""))}return a}static getAllCollectionIdentifiers(e,t=""){if(!e)return[];let i=[t+"id"];if(e.type==="view")for(let a of F.extractColumnsFromQuery(e.viewQuery))F.pushUnique(i,t+a);const s=e.fields||[];for(const a of s)a.type=="geoPoint"?(F.pushUnique(i,t+a.name+".lon"),F.pushUnique(i,t+a.name+".lat")):F.pushUnique(i,t+a.name);return i}static getExcerptCollectionFieldsList(e,t=200){let i=["*"];const s=e?.fields||[];for(const a of s)a.primaryKey||a.type=="relation"||i.push(`${a.name}:excerpt(${t})`);return i.join(",")}static getCollectionAutocompleteKeys(e,t,i="",s=0){let a=e.find(l=>l.name==t||l.id==t);if(!a||s>=4)return[];a.fields=a.fields||[];let o=F.getAllCollectionIdentifiers(a,i);for(const l of a.fields){const c=i+l.name;if(l.type=="relation"&&l.collectionId){const u=F.getCollectionAutocompleteKeys(e,l.collectionId,c+".",s+1);u.length&&(o=o.concat(u))}l.maxSelect!=1&&m1.includes(l.type)?(o.push(c+":each"),o.push(c+":length")):g1.includes(l.type)&&o.push(c+":lower")}for(const l of e){l.fields=l.fields||[];for(const c of l.fields)if(c.type=="relation"&&c.collectionId==a.id){const u=i+l.name+"_via_"+c.name,d=F.getCollectionAutocompleteKeys(e,l.id,u+".",s+2);d.length&&(o=o.concat(d))}}return o}static getCollectionJoinAutocompleteKeys(e){const t=[];let i,s;for(const a of e)if(!a.system){i="@collection."+a.name+".",s=F.getCollectionAutocompleteKeys(e,a.name,i);for(const o of s)t.push(o)}return t}static getRequestAutocompleteKeys(e,t){const i=[];i.push("@request.context"),i.push("@request.method"),i.push("@request.query."),i.push("@request.body."),i.push("@request.headers."),i.push("@request.auth.collectionId"),i.push("@request.auth.collectionName");const s=e.filter(a=>a.type==="auth");for(const a of s){if(a.system)continue;const o=F.getCollectionAutocompleteKeys(e,a.id,"@request.auth.");for(const l of o)F.pushUnique(i,l)}if(t){const a=F.getCollectionAutocompleteKeys(e,t,"@request.body.");for(const o of a){i.push(o);const l=o.split(".");l.length===3&&l[2].indexOf(":")===-1&&(i.push(o+":changed"),i.push(o+":isset"))}}return i}static parseIndex(e){const t={unique:!1,optional:!1,schemaName:"",indexName:"",tableName:"",columns:[],where:""},s=/create\s+(unique\s+)?\s*index\s*(if\s+not\s+exists\s+)?(\S*)\s+on\s+(\S*)\s*\(([\s\S]*)\)(?:\s*where\s+([\s\S]*))?/gmi.exec((e||"").trim());if(s?.length!=7)return t;const a=/^[\"\'\`\[\{}]|[\"\'\`\]\}]$/gm;t.unique=s[1]?.trim().toLowerCase()==="unique",t.optional=!F.isEmpty(s[2]?.trim());const o=(s[3]||"").split(".");o.length==2?(t.schemaName=o[0].replace(a,""),t.indexName=o[1].replace(a,"")):(t.schemaName="",t.indexName=o[0].replace(a,"")),t.tableName=(s[4]||"").replace(a,"");const l=(s[5]||"").replace(/,(?=[^\(]*\))/gmi,"{PB_TEMP}").split(",");for(let c of l){c=c.trim().replaceAll("{PB_TEMP}",",");const d=/^([\s\S]+?)(?:\s+collate\s+([\w]+))?(?:\s+(asc|desc))?$/gmi.exec(c);if(d?.length!=4)continue;const f=d[1]?.trim()?.replace(a,"");f&&t.columns.push({name:f,collate:d[2]||"",sort:d[3]?.toUpperCase()||""})}return t.where=s[6]||"",t}static buildIndex(e){let t="CREATE ";e.unique&&(t+="UNIQUE "),t+="INDEX ",e.optional&&(t+="IF NOT EXISTS "),e.schemaName&&(t+=`\`${e.schemaName}\`.`),t+=`\`${e.indexName||"idx_"+F.randomString(10)}\` `,t+=`ON \`${e.tableName}\` (`;const i=e.columns.filter(s=>!!s?.name);return i.length>1&&(t+=`
  `),t+=i.map(s=>{let a="";return s.name.includes("(")||s.name.includes(" ")?a+=s.name:a+="`"+s.name+"`",s.collate&&(a+=" COLLATE "+s.collate),s.sort&&(a+=" "+s.sort.toUpperCase()),a}).join(`,
  `),i.length>1&&(t+=`
`),t+=")",e.where&&(t+=` WHERE ${e.where}`),t}static replaceIndexTableName(e,t){const i=F.parseIndex(e);return i.tableName=t,F.buildIndex(i)}static replaceIndexColumn(e,t,i){if(t===i)return e;const s=F.parseIndex(e);let a=!1;for(let o of s.columns)o.name===t&&(o.name=i,a=!0);return a?F.buildIndex(s):e}static normalizeSearchFilter(e,t){if(e=(e||"").trim(),!e||!t.length)return e;const i=["=","!=","~","!~",">",">=","<","<="];for(const s of i)if(e.includes(s))return e;return e=isNaN(e)&&e!="true"&&e!="false"?`"${e.replace(/^[\"\'\`]|[\"\'\`]$/gm,"")}"`:e,t.map(s=>`${s}~${e}`).join("||")}static normalizeLogsFilter(e,t=[]){return F.normalizeSearchFilter(e,["level","message","data"].concat(t))}static initSchemaField(e){return Object.assign({id:"",name:"",type:"text",system:!1,hidden:!1,required:!1},e)}static triggerResize(){window.dispatchEvent(new Event("resize"))}static getHashQueryParams(){let e="";const t=window.location.hash.indexOf("?");return t>-1&&(e=window.location.hash.substring(t+1)),Object.fromEntries(new URLSearchParams(e))}static replaceHashQueryParams(e){e=e||{};let t="",i=window.location.hash;const s=i.indexOf("?");s>-1&&(t=i.substring(s+1),i=i.substring(0,s));const a=new URLSearchParams(t);for(let c in e){const u=e[c];u===null?a.delete(c):a.set(c,u)}t=a.toString(),t!=""&&(i+="?"+t);let o=window.location.href;const l=o.indexOf("#");l>-1&&(o=o.substring(0,l)),window.location.replace(o+i)}}let hu,os;const vu="app-tooltip";function Ff(n){return typeof n=="string"?{text:n,position:"bottom",hideOnClick:null}:n||{}}function Kr(){return os=os||document.querySelector("."+vu),os||(os=document.createElement("div"),os.classList.add(vu),document.body.appendChild(os)),os}function Um(n,e){let t=Kr();if(!t.classList.contains("active")||!e?.text){pu();return}t.textContent=e.text,t.className=vu+" active",e.class&&t.classList.add(e.class),e.position&&t.classList.add(e.position),t.style.top="0px",t.style.left="0px";let i=t.offsetHeight,s=t.offsetWidth,a=n.getBoundingClientRect(),o=0,l=0,c=5;e.position=="left"?(o=a.top+a.height/2-i/2,l=a.left-s-c):e.position=="right"?(o=a.top+a.height/2-i/2,l=a.right+c):e.position=="top"?(o=a.top-i-c,l=a.left+a.width/2-s/2):e.position=="top-left"?(o=a.top-i-c,l=a.left):e.position=="top-right"?(o=a.top-i-c,l=a.right-s):e.position=="bottom-left"?(o=a.top+a.height+c,l=a.left):e.position=="bottom-right"?(o=a.top+a.height+c,l=a.right-s):(o=a.top+a.height+c,l=a.left+a.width/2-s/2),l+s>document.documentElement.clientWidth&&(l=document.documentElement.clientWidth-s),l=l>=0?l:0,o+i>document.documentElement.clientHeight&&(o=document.documentElement.clientHeight-i),o=o>=0?o:0,t.style.top=o+"px",t.style.left=l+"px"}function pu(){clearTimeout(hu),Kr().classList.remove("active"),Kr().activeNode=void 0}function b1(n,e){Kr().activeNode=n,clearTimeout(hu),hu=setTimeout(()=>{Kr().classList.add("active"),Um(n,e)},isNaN(e.delay)?0:e.delay)}function ct(n,e){let t=Ff(e);function i(){b1(n,t)}function s(){pu()}return n.addEventListener("mouseenter",i),n.addEventListener("mouseleave",s),n.addEventListener("blur",s),(t.hideOnClick===!0||t.hideOnClick===null&&F.isFocusable(n))&&n.addEventListener("click",s),Kr(),{update(a){t=Ff(a),Kr()?.activeNode?.contains(n)&&Um(n,t)},destroy(){Kr()?.activeNode?.contains(n)&&pu(),n.removeEventListener("mouseenter",i),n.removeEventListener("mouseleave",s),n.removeEventListener("blur",s),n.removeEventListener("click",s)}}}const y1=n=>n;function ld(n){const e=n-1;return e*e*e+1}function qf(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}function mu(n,{delay:e=0,duration:t=400,easing:i=y1}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:a=>`opacity: ${a*s}`}}function Qr(n,{delay:e=0,duration:t=400,easing:i=ld,x:s=0,y:a=0,opacity:o=0}={}){const l=getComputedStyle(n),c=+l.opacity,u=l.transform==="none"?"":l.transform,d=c*(1-o),[f,h]=qf(s),[v,_]=qf(a);return{delay:e,duration:t,easing:i,css:(p,m)=>`
			transform: ${u} translate(${(1-p)*f}${h}, ${(1-p)*v}${_});
			opacity: ${c-d*m}`}}function pn(n,{delay:e=0,duration:t=400,easing:i=ld,axis:s="y"}={}){const a=getComputedStyle(n),o=+a.opacity,l=s==="y"?"height":"width",c=parseFloat(a[l]),u=s==="y"?["top","bottom"]:["left","right"],d=u.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),f=parseFloat(a[`padding${d[0]}`]),h=parseFloat(a[`padding${d[1]}`]),v=parseFloat(a[`margin${d[0]}`]),_=parseFloat(a[`margin${d[1]}`]),p=parseFloat(a[`border${d[0]}Width`]),m=parseFloat(a[`border${d[1]}Width`]);return{delay:e,duration:t,easing:i,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*o};${l}: ${w*c}px;padding-${u[0]}: ${w*f}px;padding-${u[1]}: ${w*h}px;margin-${u[0]}: ${w*v}px;margin-${u[1]}: ${w*_}px;border-${u[0]}-width: ${w*p}px;border-${u[1]}-width: ${w*m}px;min-${l}: 0`}}function zn(n,{delay:e=0,duration:t=400,easing:i=ld,start:s=0,opacity:a=0}={}){const o=getComputedStyle(n),l=+o.opacity,c=o.transform==="none"?"":o.transform,u=1-s,d=l*(1-a);return{delay:e,duration:t,easing:i,css:(f,h)=>`
			transform: ${c} scale(${1-u*h});
			opacity: ${l-d*h}
		`}}let ls,bc=[];function zf(){return ls=ls||document.querySelector(".overlays"),ls||(ls=document.createElement("div"),ls.classList.add("overlays"),document.body.appendChild(ls)),ls}var _1=x('<button type="button" aria-label="Close" class="overlay-close"><i class="ri-close-line" aria-hidden="true"></i></button>'),x1=x('<button type="button" aria-label="Close" class="btn btn-sm btn-circle btn-transparent btn-close m-l-auto"><i class="ri-close-line txt-lg" aria-hidden="true"></i></button>'),w1=x('<div><div class="overlay"></div> <div><div class="overlay-panel-section panel-header"><!> <!> <!></div> <div class="overlay-panel-section panel-content"><!></div> <div class="overlay-panel-section panel-footer"><!></div></div></div>'),k1=x('<div class="overlay-panel-wrapper" tabindex="-1"><!></div>');function mn(n,e){Re(e,!1);let t=ee(e,"class",8,""),i=ee(e,"active",12,!1),s=ee(e,"popup",8,!1),a=ee(e,"overlayClose",8,!0),o=ee(e,"btnClose",8,!0),l=ee(e,"escClose",8,!0),c=ee(e,"beforeOpen",8,void 0),u=ee(e,"beforeHide",8,void 0);const d=Ut(),f="op_"+F.randomString(10);let h=M(),v=M(),_,p=150,m,w=M(""),k=M(i());function $(){typeof c()=="function"&&c()()===!1||i(!0)}function D(){typeof u()=="function"&&u()()===!1||i(!1)}function I(){return i()}async function E(U){y(k,U),U?(_=document.activeElement,d("show"),r(h)?.focus()):(clearTimeout(m),d("hide"),_?.focus()),await $n(),T()}function T(){r(h)&&(i()?ot(h,r(h).style.zIndex=P()):ot(h,r(h).style=""))}function C(){F.pushUnique(bc,f),document.body.classList.add("overlay-active")}function O(){F.removeByValue(bc,f),bc.length||document.body.classList.remove("overlay-active")}function P(){return 1e3+zf().querySelectorAll(".overlay-panel-container.active").length}function N(U){i()&&l()&&U.code=="Escape"&&!F.isInput(U.target)&&r(h)&&r(h).style.zIndex==P()&&(U.preventDefault(),D())}function R(U){i()&&q(r(v))}function q(U,J){J&&y(w,""),!(!U||m)&&(m=setTimeout(()=>{if(clearTimeout(m),m=null,!U)return;if(U.scrollHeight-U.offsetHeight>0)y(w,"scrollable");else{y(w,"");return}U.scrollTop==0?y(w,r(w)+" scroll-top-reached"):U.scrollTop+U.offsetHeight==U.scrollHeight&&y(w,r(w)+" scroll-bottom-reached")},100))}fn(()=>{zf().appendChild(r(h));let U=r(h);return()=>{clearTimeout(m),O(),U?.remove()}}),re(()=>(r(k),L(i())),()=>{r(k)!=i()&&E(i())}),re(()=>r(v),()=>{q(r(v),!0)}),re(()=>r(h),()=>{r(h)&&T()}),re(()=>L(i()),()=>{i()?C():O()}),lt();var B={show:$,hide:D,isActive:I};ze();var Y=k1();ie("resize",kr,R),ie("keydown",kr,N);var z=S(Y);{var K=U=>{var J=w1();let se;var le=S(J),ce=g(le,2);let ve;var be=S(ce),he=S(be);{var xe=oe=>{var me=_1();Ot(3,me,()=>mu,()=>({duration:p})),ie("click",me,Et(D)),b(oe,me)};te(he,oe=>{o()&&!s()&&oe(xe)})}var Te=g(he,2);Qt(Te,e,"header",{},null);var pe=g(Te,2);{var ue=oe=>{var me=x1();ie("click",me,Et(D)),b(oe,me)};te(pe,oe=>{o()&&s()&&oe(ue)})}var we=g(be,2),ke=S(we);Qt(ke,e,"default",{},null),ft(we,oe=>y(v,oe),()=>r(v));var ae=g(we,2),_e=S(ae);Qt(_e,e,"footer",{},null),j(()=>{se=Me(J,1,"overlay-panel-container",null,se,{padded:s(),active:i()}),ve=Me(ce,1,`overlay-panel ${t()??""} ${r(w)??""}`,null,ve,{popup:s()})}),ie("click",le,Et(()=>a()?D():!0)),Ot(3,le,()=>mu,()=>({duration:p,opacity:0})),ie("scroll",we,oe=>q(oe.target)),Ot(1,ce,()=>Qr,()=>s()?{duration:p,y:-10}:{duration:p,x:50}),Ot(2,ce,()=>Qr,()=>s()?{duration:p,y:10}:{duration:p,x:50}),b(U,J)};te(z,U=>{i()&&U(K)})}return ft(Y,U=>y(h,U),()=>r(h)),b(n,Y),yt(e,"show",$),yt(e,"hide",D),yt(e,"isActive",I),Fe(B)}const cd=ci({});function Rn(n,e,t){cd.set({text:n,yesCallback:e,noCallback:t})}function Vm(){cd.set({})}var S1=x('<h4 class="block center txt-break" slot="header"> </h4>'),T1=x('<button type="button" class="btn btn-transparent btn-expanded-sm"><span class="txt">No</span></button> <button type="button"><span class="txt">Yes</span></button>',1);function $1(n,e){Re(e,!1);const t=()=>Ct(cd,"$confirmation",i),[i,s]=Nt();let a=M(),o=M(!1),l=M(!1);re(()=>(t(),r(a)),()=>{t()?.text&&(y(l,!1),r(a)?.show())}),lt(),ze();{let c=ne(()=>!r(o)),u=ne(()=>!r(o));ft(mn(n,{class:"confirm-popup hide-content overlay-panel-sm",get overlayClose(){return r(c)},get escClose(){return r(u)},btnClose:!1,popup:!0,$$events:{hide:async()=>{!r(l)&&t()?.noCallback&&t().noCallback(),await $n(),y(l,!1),Vm()}},$$slots:{header:(d,f)=>{var h=S1(),v=S(h);j(()=>Se(v,(t(),A(()=>t()?.text)))),b(d,h)},footer:(d,f)=>{var h=T1(),v=V(h);Bi(v,!0);var _=g(v,2);let p;j(()=>{v.disabled=r(o),p=Me(_,1,"btn btn-danger btn-expanded",null,p,{"btn-loading":r(o)}),_.disabled=r(o)}),ie("click",v,()=>{y(l,!1),r(a)?.hide()}),ie("click",_,async()=>{t()?.yesCallback&&(y(o,!0),await Promise.resolve(t().yesCallback()),y(o,!1)),y(l,!0),r(a)?.hide()}),b(d,h)}},$$legacy:!0}),d=>y(a,d),()=>r(a))}Fe(),s()}function I1(){let n={listeners:[],scriptLoaded:!1,injected:!1};function e(i,s,a){n.injected=!0;const o=i.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.src=s,o.onload=()=>{a()},i.head&&i.head.appendChild(o)}function t(i,s,a){n.scriptLoaded?a():(n.listeners.push(a),n.injected||e(i,s,()=>{n.listeners.forEach(o=>o()),n.scriptLoaded=!0}))}return{load:t}}let C1=I1();var E1=x("<div></div>"),O1=x('<textarea style="visibility: hidden"></textarea>'),D1=x("<div><!></div>");function ud(n,e){Re(e,!1);let t=ee(e,"id",24,()=>"tinymce_svelte"+F.randomString(7)),i=ee(e,"inline",8,void 0),s=ee(e,"disabled",8,!1),a=ee(e,"scriptSrc",24,()=>"./libs/tinymce/tinymce.min.js"),o=ee(e,"conf",24,()=>({})),l=ee(e,"modelEvents",8,"change input undo redo"),c=ee(e,"value",12,""),u=ee(e,"text",12,""),d=ee(e,"cssClass",8,"tinymce-wrapper");const f=["Activate","AddUndo","BeforeAddUndo","BeforeExecCommand","BeforeGetContent","BeforeRenderUI","BeforeSetContent","BeforePaste","Blur","Change","ClearUndos","Click","ContextMenu","Copy","Cut","Dblclick","Deactivate","Dirty","Drag","DragDrop","DragEnd","DragGesture","DragOver","Drop","ExecCommand","Focus","FocusIn","FocusOut","GetContent","Hide","Init","KeyDown","KeyPress","KeyUp","LoadContent","MouseDown","MouseEnter","MouseLeave","MouseMove","MouseOut","MouseOver","MouseUp","NodeChange","ObjectResizeStart","ObjectResized","ObjectSelected","Paste","PostProcess","PostRender","PreProcess","ProgressState","Redo","Remove","Reset","ResizeEditor","SaveContent","SelectionChange","SetAttrib","SetContent","Show","Submit","Undo","VisualAid"],h=(O,P)=>{f.forEach(N=>{O.on(N,R=>{P(N.toLowerCase(),{eventName:N,event:R,editor:O})})})};let v=M(),_=M(),p=M(),m=M(c()),w=M(s());const k=Ut();function $(){return window&&window.tinymce?window.tinymce:null}function D(){const O={...o(),target:r(_),inline:i()!==void 0?i():o().inline!==void 0?o().inline:!1,readonly:s(),setup:P=>{y(p,P),P.on("init",()=>{P.setContent(c()),P.on(l(),()=>{y(m,P.getContent()),r(m)!==c()&&(c(r(m)),u(P.getContent({format:"text"})))})}),h(P,k),typeof o().setup=="function"&&o().setup(P)}};ot(_,r(_).style.visibility=""),$().init(O)}fn(()=>($()!==null?D():C1.load(r(v).ownerDocument,a(),()=>{r(v)&&D()}),()=>{try{r(p)&&(r(p).dom?.unbind(document),$()?.remove(r(p)))}catch{}})),re(()=>(r(p),r(m),L(c()),L(s()),r(w)),()=>{try{r(p)&&r(m)!==c()&&(r(p).setContent(c()),u(r(p).getContent({format:"text"}))),r(p)&&s()!==r(w)&&(y(w,s()),typeof r(p).mode?.set=="function"?r(p).mode.set(s()?"readonly":"design"):r(p).setMode(s()?"readonly":"design"))}catch(O){console.warn("TinyMCE reactive error:",O)}}),lt(),ze();var I=D1(),E=S(I);{var T=O=>{var P=E1();ft(P,N=>y(_,N),()=>r(_)),j(()=>W(P,"id",t())),b(O,P)},C=O=>{var P=O1();ft(P,N=>y(_,N),()=>r(_)),j(()=>W(P,"id",t())),b(O,P)};te(E,O=>{i()?O(T):O(C,!1)})}ft(I,O=>y(v,O),()=>r(v)),j(()=>Me(I,1,In(d()))),b(n,I),Fe()}function P1(n){const e=n-1;return e*e*e+1}function M1(n,{from:e,to:t},i={}){var{delay:s=0,duration:a=E=>Math.sqrt(E)*120,easing:o=P1}=i,l=getComputedStyle(n),c=l.transform==="none"?"":l.transform,[u,d]=l.transformOrigin.split(" ").map(parseFloat);u/=n.clientWidth,d/=n.clientHeight;var f=A1(n),h=n.clientWidth/t.width/f,v=n.clientHeight/t.height/f,_=e.left+e.width*u,p=e.top+e.height*d,m=t.left+t.width*u,w=t.top+t.height*d,k=(_-m)*h,$=(p-w)*v,D=e.width/t.width,I=e.height/t.height;return{delay:s,duration:typeof a=="function"?a(Math.sqrt(k*k+$*$)):a,easing:o,css:(E,T)=>{var C=T*k,O=T*$,P=E+T*D,N=E+T*I;return`transform: ${c} translate(${C}px, ${O}px) scale(${P}, ${N});`}}}function A1(n){if("currentCSSZoom"in n)return n.currentCSSZoom;for(var e=n,t=1;e!==null;)t*=+getComputedStyle(e).zoom,e=e.parentElement;return t}const ql=ci([]);function oa(n,e=4e3){return dd(n,"info",e)}function vn(n,e=3e3){return dd(n,"success",e)}function lr(n,e=4500){return dd(n,"error",e)}function dd(n,e,t){t=t||4e3;const i={message:n,type:e,duration:t,timeout:setTimeout(()=>{Bm(i)},t)};ql.update(s=>(fd(s,i.message),F.pushOrReplaceByKey(s,i,"message"),s))}function Bm(n){ql.update(e=>(fd(e,n),e))}function Ha(){ql.update(n=>{for(let e of n)fd(n,e);return[]})}function fd(n,e){let t;typeof e=="string"?t=F.findByKey(n,"message",e):t=e,t&&(clearTimeout(t.timeout),F.removeByKey(n,"message",t.message))}var L1=x('<i class="ri-information-line"></i>'),N1=x('<i class="ri-checkbox-circle-line"></i>'),R1=x('<i class="ri-error-warning-line"></i>'),F1=x('<i class="ri-alert-line"></i>'),q1=x('<div><div class="icon"><!></div> <div class="content"> </div> <button type="button" class="close" aria-label="Close"><i class="ri-close-line"></i></button></div>'),z1=x('<div class="toasts-wrapper"></div>');function j1(n,e){Re(e,!1);const t=()=>Ct(ql,"$toasts",i),[i,s]=Nt();ze();var a=z1();ht(a,13,t,o=>o.message,(o,l)=>{var c=q1();let u;var d=S(c),f=S(d);{var h=$=>{var D=L1();b($,D)},v=$=>{var D=N1();b($,D)},_=$=>{var D=R1();b($,D)},p=$=>{var D=F1();b($,D)};te(f,$=>{r(l).type==="info"?$(h):r(l).type==="success"?$(v,1):r(l).type==="warning"?$(_,2):$(p,!1)})}var m=g(d,2),w=S(m),k=g(m,2);j(()=>{u=Me(c,1,"alert txt-break",null,u,{"alert-info":r(l).type=="info","alert-success":r(l).type=="success","alert-danger":r(l).type=="error","alert-warning":r(l).type=="warning"}),Se(w,r(l).message)}),ie("click",k,Et(()=>Bm(r(l)))),Ot(1,c,()=>pn,()=>({duration:150})),Ot(2,c,()=>mu,()=>({duration:150})),Yy(c,()=>M1,()=>({duration:150})),b(o,c)}),b(n,a),Fe(),s()}var U1=x("<div><!></div>"),V1=x('<div class="toggler-container" tabindex="-1" role="menu"><!></div>');function Jn(n,e){Re(e,!1);let t=ee(e,"trigger",8,void 0),i=ee(e,"active",12,!1),s=ee(e,"escClose",8,!0),a=ee(e,"autoScroll",8,!0),o=ee(e,"closableClass",8,"closable"),l=ee(e,"class",8,""),c=M(),u=M(),d=M(),f,h,v=!1;const _=Ut();function p(U=0){i()&&(clearTimeout(h),h=setTimeout(m,U))}function m(){i()&&(i(!1),v=!1,clearTimeout(f),clearTimeout(h))}function w(){clearTimeout(h),clearTimeout(f),!i()&&(i(!0),r(d)?.contains(r(c))||r(c)?.focus(),f=setTimeout(()=>{a()&&(r(u)?.scrollIntoViewIfNeeded?r(u)?.scrollIntoViewIfNeeded():r(u)?.scrollIntoView&&r(u)?.scrollIntoView({behavior:"smooth",block:"nearest"}))},180))}function k(){i()?m():w()}function $(U){return!r(c)||U.classList.contains(o())||r(c).contains(U)&&U.closest&&U.closest("."+o())}function D(U){I(),r(c)?.addEventListener("click",E),r(c)?.addEventListener("keydown",T),y(d,U||r(c)?.parentNode),r(d)?.addEventListener("click",C),r(d)?.addEventListener("keydown",O)}function I(){clearTimeout(f),clearTimeout(h),r(c)?.removeEventListener("click",E),r(c)?.removeEventListener("keydown",T),r(d)?.removeEventListener("click",C),r(d)?.removeEventListener("keydown",O)}function E(U){U.stopPropagation(),$(U.target)&&m()}function T(U){(U.code==="Enter"||U.code==="Space")&&(U.stopPropagation(),$(U.target)&&p(150))}function C(U){U.preventDefault(),U.stopPropagation(),k()}function O(U){(U.code==="Enter"||U.code==="Space")&&(U.preventDefault(),U.stopPropagation(),k())}function P(U){i()&&!r(d)?.contains(U.target)&&!r(c)?.contains(U.target)&&k()}function N(U){i()&&s()&&U.code==="Escape"&&(U.preventDefault(),m())}function R(U){i()&&(v=!r(c)?.contains(U.target))}function q(U){i()&&v&&!r(c)?.contains(U.target)&&!r(d)?.contains(U.target)&&!U.target?.closest(".flatpickr-calendar")&&m()}fn(()=>(D(),()=>I())),re(()=>(r(c),L(t())),()=>{r(c)&&D(t())}),re(()=>(L(i()),r(d)),()=>{i()?(r(d)?.classList?.add("active"),r(d)?.setAttribute("aria-expanded",!0),_("show")):(r(d)?.classList?.remove("active"),r(d)?.setAttribute("aria-expanded",!1),_("hide"))}),lt();var B={hideWithDelay:p,hide:m,show:w,toggle:k};ze();var Y=V1();ie("click",kr,q),ie("mousedown",kr,R),ie("keydown",kr,N),ie("focusin",kr,P);var z=S(Y);{var K=U=>{var J=U1();let se;var le=S(J);Qt(le,e,"default",{},null),ft(J,ce=>y(u,ce),()=>r(u)),j(()=>se=Me(J,1,In(l()),null,se,{active:i()})),Ot(3,J,()=>Qr,()=>({duration:150,y:3})),b(U,J)};te(z,U=>{i()&&U(K)})}return ft(Y,U=>y(c,U),()=>r(c)),b(n,Y),yt(e,"hideWithDelay",p),yt(e,"hide",m),yt(e,"show",w),yt(e,"toggle",k),Fe(B)}const Cn=ci(""),gu=ci(""),yo=ci(!1),Vn=ci({});function sn(n){Vn.set(n||{})}function Zn(n){Vn.update(e=>(F.deleteByPath(e,n),e))}const zl=ci({});function jf(n){zl.set(n||{})}class Fn extends Error{constructor(e){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,Fn.prototype),e!==null&&typeof e=="object"&&(this.originalError=e.originalError,this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort||e.name==="AbortError"||e.message==="Aborted",e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof Fn||(this.originalError=e),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was aborted (most likely autocancelled; you can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation).":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong."),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}}const Lo=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function B1(n,e){const t={};if(typeof n!="string")return t;const i=Object.assign({},{}).decode||H1;let s=0;for(;s<n.length;){const a=n.indexOf("=",s);if(a===-1)break;let o=n.indexOf(";",s);if(o===-1)o=n.length;else if(o<a){s=n.lastIndexOf(";",a-1)+1;continue}const l=n.slice(s,a).trim();if(t[l]===void 0){let c=n.slice(a+1,o).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[l]=i(c)}catch{t[l]=c}}s=o+1}return t}function Uf(n,e,t){const i=Object.assign({},t||{}),s=i.encode||W1;if(!Lo.test(n))throw new TypeError("argument name is invalid");const a=s(e);if(a&&!Lo.test(a))throw new TypeError("argument val is invalid");let o=n+"="+a;if(i.maxAge!=null){const l=i.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(l)}if(i.domain){if(!Lo.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain="+i.domain}if(i.path){if(!Lo.test(i.path))throw new TypeError("option path is invalid");o+="; Path="+i.path}if(i.expires){if(!(function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date})(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function H1(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function W1(n){return encodeURIComponent(n)}const Y1=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let Hm;function ea(n){if(n)try{const e=decodeURIComponent(Hm(n.split(".")[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(e)||{}}catch{}return{}}function jl(n,e=0){let t=ea(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}Hm=typeof atob!="function"||Y1?n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,i,s=0,a=0,o="";i=e.charAt(a++);~i&&(t=s%4?64*t+i:i,s++%4)?o+=String.fromCharCode(255&t>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o}:atob;const Vf="pb_auth";class hd{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!jl(this.token)}get isSuperuser(){let e=ea(this.token);return e.type=="auth"&&(this.record?.collectionName=="_superusers"||!this.record?.collectionName&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),ea(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Vf){const i=B1(e||"")[t]||"";let s={};try{s=JSON.parse(i),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.record||s.model||null)}exportToCookie(e,t=Vf){const i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},s=ea(this.token);i.expires=s?.exp?new Date(1e3*s.exp):new Date("1970-01-01"),e=Object.assign({},i,e);const a={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let o=Uf(t,JSON.stringify(a),e);const l=typeof Blob<"u"?new Blob([o]).size:o.length;if(a.record&&l>4096){a.record={id:a.record?.id,email:a.record?.email};const c=["collectionId","collectionName","verified"];for(const u in this.record)c.includes(u)&&(a.record[u]=this.record[u]);o=Uf(t,JSON.stringify(a),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==e)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class Wm extends hd{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&window?.localStorage){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&window?.localStorage){let i=t;typeof t!="string"&&(i=JSON.stringify(t)),window.localStorage.setItem(e,i)}else this.storageFallback[e]=t}_storageRemove(e){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",(e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)}))}}class Cr{constructor(e){this.client=e}}class K1 extends Cr{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then((()=>!0))}async testEmail(e,t,i,s){return s=Object.assign({method:"POST",body:{email:t,template:i,collection:e}},s),this.client.send("/api/settings/test/email",s).then((()=>!0))}async generateAppleClientSecret(e,t,i,s,a,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:i,privateKey:s,duration:a}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}const J1=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function vd(n){if(n){n.query=n.query||{};for(let e in n)J1.includes(e)||(n.query[e]=n[e],delete n[e])}}function pd(n){const e=[];for(const t in n){const i=encodeURIComponent(t),s=Array.isArray(n[t])?n[t]:[n[t]];for(let a of s)a=Z1(a),a!==null&&e.push(i+"="+a)}return e.join("&")}function Z1(n){return n==null?null:n instanceof Date?encodeURIComponent(n.toISOString().replace("T"," ")):encodeURIComponent(typeof n=="object"?JSON.stringify(n):n)}class Ym extends Cr{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,i){if(!e)throw new Error("topic must be set.");let s=e;if(i){vd(i=Object.assign({},i));const o="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));s+=(s.includes("?")?"&":"?")+o}const a=function(o){const l=o;let c;try{c=JSON.parse(l?.data)}catch{}t(c||{})};return this.subscriptions[s]||(this.subscriptions[s]=[]),this.subscriptions[s].push(a),this.isConnected?this.subscriptions[s].length===1?await this.submitSubscriptions():this.eventSource?.addEventListener(s,a):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,a)}async unsubscribe(e){let t=!1;if(e){const i=this.getSubscriptionsByTopic(e);for(let s in i)if(this.hasSubscriptionListeners(s)){for(let a of this.subscriptions[s])this.eventSource?.removeEventListener(s,a);delete this.subscriptions[s],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let t=!1;for(let i in this.subscriptions)if((i+"?").startsWith(e)){t=!0;for(let s of this.subscriptions[i])this.eventSource?.removeEventListener(i,s);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){let i=!1;const s=this.getSubscriptionsByTopic(e);for(let a in s){if(!Array.isArray(this.subscriptions[a])||!this.subscriptions[a].length)continue;let o=!1;for(let l=this.subscriptions[a].length-1;l>=0;l--)this.subscriptions[a][l]===t&&(o=!0,delete this.subscriptions[a][l],this.subscriptions[a].splice(l,1),this.eventSource?.removeEventListener(a,t));o&&(this.subscriptions[a].length||delete this.subscriptions[a],i||this.hasSubscriptionListeners(a)||(i=!0))}this.hasSubscriptionListeners()?i&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let t in this.subscriptions)if(this.subscriptions[t]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch((e=>{if(!e?.isAbort)throw e}))}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let i in this.subscriptions)(i+"?").startsWith(e)&&(t[i]=this.subscriptions[i]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise(((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()}))}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout((()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))}),this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",(e=>{const t=e;this.clientId=t?.lastEventId,this.submitSubscriptions().then((async()=>{let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,await this.submitSubscriptions()})).then((()=>{for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const i=this.getSubscriptionsByTopic("PB_CONNECT");for(let s in i)for(let a of i[s])a(e)})).catch((i=>{this.clientId="",this.connectErrorHandler(i)}))}))}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new Fn(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout((()=>{this.initConnect()}),t)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let t of this.pendingConnects)t.resolve();this.pendingConnects=[]}}}class Km extends Cr{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let i=1e3;return(t=Object.assign({},e,t)).batch&&(i=t.batch,delete t.batch),this._getFullList(i,t)}async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send(this.baseCrudPath,i).then((s=>(s.items=s.items?.map((a=>this.decode(a)))||[],s)))}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then((i=>{if(!i?.items?.length)throw new Fn({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]}))}async getOne(e,t){if(!e)throw new Fn({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then((i=>this.decode(i)))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then((i=>this.decode(i)))}async update(e,t,i){return i=Object.assign({method:"PATCH",body:t},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),i).then((s=>this.decode(s)))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then((()=>!0))}_getFullList(e=1e3,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let i=[],s=async a=>this.getList(a,e||1e3,t).then((o=>{const l=o.items;return i=i.concat(l),l.length==o.perPage?s(a+1):i}));return s(1)}}function Rr(n,e,t,i){const s=i!==void 0;return s||t!==void 0?s?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,i),e):Object.assign(e,t):e}function yc(n){n._resetAutoRefresh?.()}class G1 extends Km{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,t,i){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,i)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const i=Object.assign({},e,t);return super.getFullList(i)}async getList(e=1,t=30,i){return super.getList(e,t,i)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,i){return super.update(e,t,i).then((s=>{if(this.client.authStore.record?.id===s?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let a=Object.assign({},this.client.authStore.record.expand),o=Object.assign({},this.client.authStore.record,s);a&&(o.expand=Object.assign(a,s.expand)),this.client.authStore.save(this.client.authStore.token,o)}return s}))}async delete(e,t){return super.delete(e,t).then((i=>(!i||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),i)))}authResponse(e){const t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,t,i){let s;i=Object.assign({method:"POST",body:{identity:e,password:t}},i),this.isSuperusers&&(s=i.autoRefreshThreshold,delete i.autoRefreshThreshold,i.autoRefresh||yc(this.client));let a=await this.client.send(this.baseCollectionPath+"/auth-with-password",i);return a=this.authResponse(a),s&&this.isSuperusers&&(function(l,c,u,d){yc(l);const f=l.beforeSend,h=l.authStore.record,v=l.authStore.onChange(((_,p)=>{(!_||p?.id!=h?.id||(p?.collectionId||h?.collectionId)&&p?.collectionId!=h?.collectionId)&&yc(l)}));l._resetAutoRefresh=function(){v(),l.beforeSend=f,delete l._resetAutoRefresh},l.beforeSend=async(_,p)=>{const m=l.authStore.token;if(p.query?.autoRefresh)return f?f(_,p):{url:_,sendOptions:p};let w=l.authStore.isValid;if(w&&jl(l.authStore.token,c))try{await u()}catch{w=!1}w||await d();const k=p.headers||{};for(let $ in k)if($.toLowerCase()=="authorization"&&m==k[$]&&l.authStore.token){k[$]=l.authStore.token;break}return p.headers=k,f?f(_,p):{url:_,sendOptions:p}}})(this.client,s,(()=>this.authRefresh({autoRefresh:!0})),(()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i)))),a}async authWithOAuth2Code(e,t,i,s,a,o,l){let c={method:"POST",body:{provider:e,code:t,codeVerifier:i,redirectURL:s,createData:a}};return c=Rr("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",c,o,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then((u=>this.authResponse(u)))}authWithOAuth2(...e){if(e.length>1||typeof e?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(e?.[0]||"",e?.[1]||"",e?.[2]||"",e?.[3]||"",e?.[4]||{},e?.[5]||{},e?.[6]||{});const t=e?.[0]||{};let i=null;t.urlCallback||(i=Bf(void 0));const s=new Ym(this.client);function a(){i?.close(),s.unsubscribe()}const o={},l=t.requestKey;return l&&(o.requestKey=l),this.listAuthMethods(o).then((c=>{const u=c.oauth2.providers.find((f=>f.name===t.provider));if(!u)throw new Fn(new Error(`Missing or invalid provider "${t.provider}".`));const d=this.client.buildURL("/api/oauth2-redirect");return new Promise((async(f,h)=>{const v=l?this.client.cancelControllers?.[l]:void 0;v&&(v.signal.onabort=()=>{a(),h(new Fn({isAbort:!0,message:"manually cancelled"}))}),s.onDisconnect=_=>{_.length&&h&&(a(),h(new Fn(new Error("realtime connection interrupted"))))};try{await s.subscribe("@oauth2",(async w=>{const k=s.clientId;try{if(!w.state||k!==w.state)throw new Error("State parameters don't match.");if(w.error||!w.code)throw new Error("OAuth2 redirect error or missing code: "+w.error);const $=Object.assign({},t);delete $.provider,delete $.scopes,delete $.createData,delete $.urlCallback,v?.signal?.onabort&&(v.signal.onabort=null);const D=await this.authWithOAuth2Code(u.name,w.code,u.codeVerifier,d,t.createData,$);f(D)}catch($){h(new Fn($))}a()}));const _={state:s.clientId};t.scopes?.length&&(_.scope=t.scopes.join(" "));const p=this._replaceQueryParams(u.authURL+d,_);await(t.urlCallback||function(w){i?i.location.href=w:i=Bf(w)})(p)}catch(_){v?.signal?.onabort&&(v.signal.onabort=null),a(),h(new Fn(_))}}))})).catch((c=>{throw a(),c}))}async authRefresh(e,t){let i={method:"POST"};return i=Rr("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then((s=>this.authResponse(s)))}async requestPasswordReset(e,t,i){let s={method:"POST",body:{email:e}};return s=Rr("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then((()=>!0))}async confirmPasswordReset(e,t,i,s,a){let o={method:"POST",body:{token:e,password:t,passwordConfirm:i}};return o=Rr("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,s,a),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then((()=>!0))}async requestVerification(e,t,i){let s={method:"POST",body:{email:e}};return s=Rr("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/request-verification",s).then((()=>!0))}async confirmVerification(e,t,i){let s={method:"POST",body:{token:e}};return s=Rr("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then((()=>{const a=ea(e),o=this.client.authStore.record;return o&&!o.verified&&o.id===a.id&&o.collectionId===a.collectionId&&(o.verified=!0,this.client.authStore.save(this.client.authStore.token,o)),!0}))}async requestEmailChange(e,t,i){let s={method:"POST",body:{newEmail:e}};return s=Rr("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/request-email-change",s).then((()=>!0))}async confirmEmailChange(e,t,i,s){let a={method:"POST",body:{token:e,password:t}};return a=Rr("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",a,i,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",a).then((()=>{const o=ea(e),l=this.client.authStore.record;return l&&l.id===o.id&&l.collectionId===o.collectionId&&this.client.authStore.clear(),!0}))}async listExternalAuths(e,t){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,t,i){const s=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(s.id,i).then((()=>!0))}async requestOTP(e,t){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)}async authWithOTP(e,t,i){return i=Object.assign({method:"POST",body:{otpId:e,password:t}},i),this.client.send(this.baseCollectionPath+"/auth-with-otp",i).then((s=>this.authResponse(s)))}async impersonate(e,t,i){(i=Object.assign({method:"POST",body:{duration:t}},i)).headers=i.headers||{},i.headers.Authorization||(i.headers.Authorization=this.client.authStore.token);const s=new _o(this.client.baseURL,new hd,this.client.lang),a=await s.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),i);return s.authStore.save(a?.token,this.decode(a?.record||{})),s}_replaceQueryParams(e,t={}){let i=e,s="";e.indexOf("?")>=0&&(i=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?")+1));const a={},o=s.split("&");for(const l of o){if(l=="")continue;const c=l.split("=");a[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete a[l]:a[l]=t[l]);s="";for(let l in a)a.hasOwnProperty(l)&&(s!=""&&(s+="&"),s+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(a[l].replace(/%20/g,"+")));return s!=""?i+"?"+s:i}}function Bf(n){if(typeof window>"u"||!window?.open)throw new Fn(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,i=window.innerWidth,s=window.innerHeight;e=e>i?i:e,t=t>s?s:t;let a=i/2-e/2,o=s/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+o+",left="+a+",resizable,menubar=no")}class X1 extends Km{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,i){return i=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},i),this.client.send(this.baseCrudPath+"/import",i).then((()=>!0))}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then((()=>!0))}}class Q1 extends Cr{async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send("/api/logs",i)}async getOne(e,t){if(!e)throw new Fn({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class e0 extends Cr{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class t0 extends Cr{getUrl(e,t,i={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,i)}getURL(e,t,i={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return"";const s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(e.collectionId||e.collectionName)),s.push(encodeURIComponent(e.id)),s.push(encodeURIComponent(t));let a=this.client.buildURL(s.join("/"));i.download===!1&&delete i.download;const o=pd(i);return o&&(a+=(a.includes("?")?"&":"?")+o),a}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then((t=>t?.token||""))}}class n0 extends Cr{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then((()=>!0))}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then((()=>!0))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then((()=>!0))}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then((()=>!0))}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class i0 extends Cr{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then((()=>!0))}}function bu(n){return typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File||n!==null&&typeof n=="object"&&n.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function yu(n){return n&&(n.constructor?.name==="FormData"||typeof FormData<"u"&&n instanceof FormData)}function Hf(n){for(const e in n){const t=Array.isArray(n[e])?n[e]:[n[e]];for(const i of t)if(bu(i))return!0}return!1}const r0=/^[\-\.\d]+$/;function Wf(n){if(typeof n!="string")return n;if(n=="true")return!0;if(n=="false")return!1;if((n[0]==="-"||n[0]>="0"&&n[0]<="9")&&r0.test(n)){let e=+n;if(""+e===n)return e}return n}class s0 extends Cr{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new a0(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,i=[];for(let s=0;s<this.requests.length;s++){const a=this.requests[s];if(i.push({method:a.method,url:a.url,headers:a.headers,body:a.json}),a.files)for(let o in a.files){const l=a.files[o]||[];for(let c of l)t.append("requests."+s+"."+o,c)}}return t.append("@jsonPayload",JSON.stringify({requests:i})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)}}class a0{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const i={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}create(e,t){t=Object.assign({body:e||{}},t);const i={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}update(e,t,i){i=Object.assign({body:t||{}},i);const s={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(s,i),this.requests.push(s)}delete(e,t){t=Object.assign({},t);const i={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(i,t),this.requests.push(i)}prepareRequest(e,t){if(vd(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){const s=pd(t.query);s&&(e.url+=(e.url.includes("?")?"&":"?")+s)}let i=t.body;yu(i)&&(i=(function(a){let o={};return a.forEach(((l,c)=>{if(c==="@jsonPayload"&&typeof l=="string")try{let u=JSON.parse(l);Object.assign(o,u)}catch(u){console.warn("@jsonPayload error:",u)}else o[c]!==void 0?(Array.isArray(o[c])||(o[c]=[o[c]]),o[c].push(Wf(l))):o[c]=Wf(l)})),o})(i));for(const s in i){const a=i[s];if(bu(a))e.files[s]=e.files[s]||[],e.files[s].push(a);else if(Array.isArray(a)){const o=[],l=[];for(const c of a)bu(c)?o.push(c):l.push(c);if(o.length>0&&o.length==a.length){e.files[s]=e.files[s]||[];for(let c of o)e.files[s].push(c)}else if(e.json[s]=l,o.length>0){let c=s;s.startsWith("+")||s.endsWith("+")||(c+="+"),e.files[c]=e.files[c]||[];for(let u of o)e.files[c].push(u)}}else e.json[s]=a}}}class _o{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=i,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new hd:this.authStore=new Wm,this.collections=new X1(this),this.files=new t0(this),this.logs=new Q1(this),this.settings=new K1(this),this.realtime=new Ym(this),this.health=new e0(this),this.backups=new n0(this),this.crons=new i0(this)}get admins(){return this.collection("_superusers")}createBatch(){return new s0(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new G1(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let i in t){let s=t[i];switch(typeof s){case"boolean":case"number":s=""+s;break;case"string":s="'"+s.replace(/'/g,"\\'")+"'";break;default:s=s===null?"null":s instanceof Date?"'"+s.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(s).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+i+"}",s)}return e}getFileUrl(e,t,i={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,i)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let i=this.buildURL(e);if(this.beforeSend){const s=Object.assign({},await this.beforeSend(i,t));s.url!==void 0||s.options!==void 0?(i=s.url||i,t=s.options||t):Object.keys(s).length&&(t=s,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const s=pd(t.query);s&&(i+=(i.includes("?")?"&":"?")+s),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(i,t).then((async s=>{let a={};try{a=await s.json()}catch(o){if(t.signal?.aborted||o?.name=="AbortError"||o?.message=="Aborted")throw o}if(this.afterSend&&(a=await this.afterSend(s,a,t)),s.status>=400)throw new Fn({url:s.url,status:s.status,data:a});return a})).catch((s=>{throw new Fn(s)}))}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=(function(s){if(typeof FormData>"u"||s===void 0||typeof s!="object"||s===null||yu(s)||!Hf(s))return s;const a=new FormData;for(const o in s){const l=s[o];if(l!==void 0)if(typeof l!="object"||Hf({data:l})){const c=Array.isArray(l)?l:[l];for(let u of c)a.append(o,u)}else{let c={};c[o]=l,a.append("@jsonPayload",JSON.stringify(c))}}return a})(t.body),vd(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||yu(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const i=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(i);const s=new AbortController;this.cancelControllers[i]=s,t.signal=s.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let i in e)if(i.toLowerCase()==t)return e[i];return null}}const Gn=ci([]),Wi=ci({}),to=ci(!1),Jm=ci({}),Ul=ci({});let _u;typeof BroadcastChannel<"u"&&(_u=new BroadcastChannel("collections"),_u.onmessage=()=>{md(Qu(Wi)?.id)});function Zm(){_u?.postMessage("reload")}function Yf(n){Gn.update(e=>{const t=e.find(i=>i.id==n||i.name==n);return t?Wi.set(t):e.length&&Wi.set(e.find(i=>!i.system)||e[0]),e})}function o0(n){Wi.update(e=>F.isEmpty(e?.id)||e.id===n.id?n:e),Gn.update(e=>(F.pushOrReplaceByKey(e,n,"id"),gd(),Zm(),F.sortCollections(e)))}function l0(n){Gn.update(e=>(F.removeByKey(e,"id",n.id),Wi.update(t=>t.id===n.id?e.find(i=>!i.system)||e[0]:t),gd(),Zm(),e))}async function c0(){Ul.set(await De.collections.getScaffolds())}async function md(n=null){to.set(!0);try{const e=[];e.push(De.collections.getScaffolds()),e.push(De.collections.getFullList());let[t,i]=await Promise.all(e);Ul.set(t),i=F.sortCollections(i),Gn.set(i);const s=n&&i.find(a=>a.id==n||a.name==n);s?Wi.set(s):i.length&&Wi.set(i.find(a=>!a.system)||i[0]),gd()}catch(e){De.error(e)}to.set(!1)}function gd(){Jm.update(n=>(Gn.update(e=>{for(let t of e)n[t.id]=!!t.fields?.find(i=>i.type=="file"&&i.protected);return e}),n))}function Gm(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,s,a,o=[],l="",c=n.split("/");for(c[0]||c.shift();s=c.shift();)t=s[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(i=s.indexOf("?",1),a=s.indexOf(".",1),o.push(s.substring(1,~i?i:~a?a:s.length)),l+=~i&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~i?"?":"")+"\\"+s.substring(a))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function Kf(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let i="";return t>-1&&(i=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:i}}const Vl=Rp(null,function(e){e(Kf());const t=()=>{e(Kf())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}});Fp(Vl,n=>n.location);const bd=Fp(Vl,n=>n.querystring),Jf=ci(void 0);async function la(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await $n();const e=(n.charAt(0)=="#"?"":"#")+n;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function ii(n,e){if(e=Gf(e),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Zf(n,e),{update(t){t=Gf(t),Zf(n,t)}}}function u0(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Zf(n,e){let t=e.href||n.getAttribute("href");if(t&&t.charAt(0)=="/")t="#"+t;else if(!t||t.length<2||t.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+t);n.setAttribute("href",t),n.addEventListener("click",i=>{i.preventDefault(),e.disabled||d0(i.currentTarget.getAttribute("href"))})}function Gf(n){return n&&typeof n=="string"?{href:n}:n||{}}function d0(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function f0(n,e){Re(e,!1);let t=ee(e,"routes",24,()=>({})),i=ee(e,"prefix",8,""),s=ee(e,"restoreScrollState",8,!1);class a{constructor(E,T){if(!T||typeof T!="function"&&(typeof T!="object"||T._sveltesparouter!==!0))throw Error("Invalid component object");if(!E||typeof E=="string"&&(E.length<1||E.charAt(0)!="/"&&E.charAt(0)!="*")||typeof E=="object"&&!(E instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:C,keys:O}=Gm(E);this.path=E,typeof T=="object"&&T._sveltesparouter===!0?(this.component=T.component,this.conditions=T.conditions||[],this.userData=T.userData,this.props=T.props||{}):(this.component=()=>Promise.resolve(T),this.conditions=[],this.props={}),this._pattern=C,this._keys=O}match(E){if(i()){if(typeof i()=="string")if(E.startsWith(i()))E=E.substr(i().length)||"/";else return null;else if(i()instanceof RegExp){const P=E.match(i());if(P&&P[0])E=E.substr(P[0].length)||"/";else return null}}const T=this._pattern.exec(E);if(T===null)return null;if(this._keys===!1)return T;const C={};let O=0;for(;O<this._keys.length;){try{C[this._keys[O]]=decodeURIComponent(T[O+1]||"")||null}catch{C[this._keys[O]]=null}O++}return C}async checkConditions(E){for(let T=0;T<this.conditions.length;T++)if(!await this.conditions[T](E))return!1;return!0}}const o=[];t()instanceof Map?t().forEach((I,E)=>{o.push(new a(E,I))}):Object.keys(t()).forEach(I=>{o.push(new a(I,t()[I]))});let l=M(null),c=M(null),u=M({});const d=Ut();async function f(I,E){await $n(),d(I,E)}let h=null,v=null;s()&&(v=I=>{I.state&&(I.state.__svelte_spa_router_scrollY||I.state.__svelte_spa_router_scrollX)?h=I.state:h=null},window.addEventListener("popstate",v),f_(()=>{u0(h)}));let _=null,p=null;const m=Vl.subscribe(async I=>{_=I;let E=0;for(;E<o.length;){const T=o[E].match(I.location);if(!T){E++;continue}const C={route:o[E].path,location:I.location,querystring:I.querystring,userData:o[E].userData,params:T&&typeof T=="object"&&Object.keys(T).length?T:null};if(!await o[E].checkConditions(C)){y(l,null),p=null,f("conditionsFailed",C);return}f("routeLoading",Object.assign({},C));const O=o[E].component;if(p!=O){O.loading?(y(l,O.loading),p=O,y(c,O.loadingParams),y(u,{}),f("routeLoaded",Object.assign({},C,{component:r(l),name:r(l).name,params:r(c)}))):(y(l,null),p=null);const P=await O();if(I!=_)return;y(l,P&&P.default||P),p=O}T&&typeof T=="object"&&Object.keys(T).length?y(c,T):y(c,null),y(u,o[E].props),f("routeLoaded",Object.assign({},C,{component:r(l),name:r(l).name,params:r(c)})).then(()=>{Jf.set(r(c))});return}y(l,null),p=null,Jf.set(void 0)});vo(()=>{m(),v&&window.removeEventListener("popstate",v)}),re(()=>L(s()),()=>{history.scrollRestoration=s()?"manual":"auto"}),lt(),ze();var w=kt(),k=V(w);{var $=I=>{var E=kt(),T=V(E);mi(T,()=>r(l),(C,O)=>{O(C,nn({get params(){return r(c)}},()=>r(u),{$$events:{routeEvent(P){Qe.call(this,e,P)}}}))}),b(I,E)},D=I=>{var E=kt(),T=V(E);mi(T,()=>r(l),(C,O)=>{O(C,nn(()=>r(u),{$$events:{routeEvent(P){Qe.call(this,e,P)}}}))}),b(I,E)};te(k,I=>{r(c)?I($):I(D,!1)})}b(n,w),Fe()}const _c="pb_superuser_file_token";_o.prototype.logout=function(n=!0){this.authStore.clear(),n&&la("/login")};_o.prototype.error=function(n,e=!0,t=""){if(!n||!(n instanceof Error)||n.isAbort)return;const i=n?.status<<0||400,s=n?.data||{},a=s.message||n.message||t;if(e&&a&&lr(a),F.isEmpty(s.data)||sn(s.data),i===401)return this.cancelAllRequests(),this.logout();if(i===403)return this.cancelAllRequests(),la("/")};_o.prototype.getSuperuserFileToken=async function(n=""){let e=!0;if(n){const i=Qu(Jm);e=typeof i[n]<"u"?i[n]:!0}if(!e)return"";let t=localStorage.getItem(_c)||"";return(!t||jl(t,10))&&(t&&localStorage.removeItem(_c),this._superuserFileTokenRequest||(this._superuserFileTokenRequest=this.files.getToken()),t=await this._superuserFileTokenRequest,localStorage.setItem(_c,t),this._superuserFileTokenRequest=null),t};class h0 extends Wm{constructor(e="__pb_superuser_auth__"){super(e),this.save(this.token,this.record)}save(e,t){super.save(e,t),t?.collectionName=="_superusers"&&jf(t)}clear(){super.clear(),jf(null)}}const De=new _o("../",new h0);De.authStore.isValid&&De.collection(De.authStore.record.collectionName||"_superusers").authRefresh().catch(n=>{console.warn("Failed to refresh the existing auth token:",n);const e=n?.status<<0;(e==401||e==403)&&De.authStore.clear()});const il=[];let Xm;function Qm(n){const e=n.pattern.test(Xm);Xf(n,n.className,e),Xf(n,n.inactiveClassName,!e)}function Xf(n,e,t){(e||"").split(" ").forEach(i=>{i&&(n.node.classList.remove(i),t&&n.node.classList.add(i))})}Vl.subscribe(n=>{Xm=n.location+(n.querystring?"?"+n.querystring:""),il.map(Qm)});function Qi(n,e){if(e&&(typeof e=="string"||typeof e=="object"&&e instanceof RegExp)?e={path:e}:e=e||{},!e.path&&n.hasAttribute("href")&&(e.path=n.getAttribute("href"),e.path&&e.path.length>1&&e.path.charAt(0)=="#"&&(e.path=e.path.substring(1))),e.className||(e.className="active"),!e.path||typeof e.path=="string"&&(e.path.length<1||e.path.charAt(0)!="/"&&e.path.charAt(0)!="*"))throw Error('Invalid value for "path" argument');const{pattern:t}=typeof e.path=="string"?Gm(e.path):{pattern:e.path},i={node:n,className:e.className,inactiveClassName:e.inactiveClassName,pattern:t};return il.push(i),Qm(i),{destroy(){il.splice(il.indexOf(i),1)}}}const v0="modulepreload",p0=function(n,e){return new URL(n,e).href},Qf={},Wt=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=u(t.map(d=>{if(d=p0(d,i),d in Qf)return;Qf[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(i)for(let _=o.length-1;_>=0;_--){const p=o[_];if(p.href===d&&(!f||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":v0,f||(v.as="script"),v.crossOrigin="",v.href=d,c&&v.setAttribute("nonce",c),document.head.appendChild(v),f)return new Promise((_,p)=>{v.addEventListener("load",_),v.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};function m0(n,e){Re(e,!1),t();function t(){De.authStore.isValid?la("/collections"):De.logout()}ze(),Fe()}var g0=x('<div class="form-field-addon inline-error-icon"><i class="ri-error-warning-fill txt-danger"></i></div>'),b0=x('<div class="help-block help-block-error"><pre> </pre></div>'),y0=x("<div><!> <!></div>");function Ce(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt(),a="field_"+F.randomString(7),o="Invalid value";let l=ee(e,"name",8,""),c=ee(e,"inlineError",8,!1),u=ee(e,"class",8,void 0),d=M(),f=M([]);function h(){Zn(l())}fn(()=>(r(d).addEventListener("input",h),r(d).addEventListener("change",h),()=>{r(d).removeEventListener("input",h),r(d).removeEventListener("change",h)}));function v(E){return typeof E=="object"?E?.message||E?.code||o:E||o}re(()=>(t(),L(l())),()=>{y(f,F.toArray(F.getNestedVal(t(),l())))}),lt();var _={changed:h};ze();var p=y0();let m;var w=S(p);Qt(w,e,"default",{get uniqueId(){return a}},null);var k=g(w,2);{var $=E=>{var T=g0(),C=S(T);We(C,(O,P)=>ct?.(O,P),()=>({position:"left",text:r(f).map(v).join(`
`)})),Ot(3,C,()=>zn,()=>({duration:150,start:.7})),b(E,T)},D=E=>{var T=kt(),C=V(T);ht(C,1,()=>r(f),At,(O,P)=>{var N=b0(),R=S(N),q=S(R);j(B=>Se(q,B),[()=>(r(P),A(()=>v(r(P))))]),Ot(3,N,()=>pn,()=>({duration:150})),b(O,N)}),b(E,T)};te(k,E=>{L(c()),r(f),A(()=>c()&&r(f).length)?E($):E(D,!1)})}ft(p,E=>y(d,E),()=>r(d)),j(()=>m=Me(p,1,In(u()),null,m,{error:r(f).length})),ie("click",p,function(E){Qe.call(this,e,E)}),b(n,p),yt(e,"changed",h);var I=Fe(_);return s(),I}var _0=x('<a target="_blank" rel="noopener noreferrer"><i class="ri-book-open-line txt-sm"></i> <span class="txt">Docs</span></a> <span class="delimiter">|</span> <a target="_blank" rel="noopener noreferrer" title="Releases"><span class="txt"> </span></a>',1),x0=x('<div><main class="page-content"><!></main> <footer class="page-footer"><!> <!></footer></div>');function Ei(n,e){Re(e,!1);const t=()=>Ct(zl,"$superuser",i),[i,s]=Nt();let a=ee(e,"center",8,!1),o=ee(e,"class",8,"");ze();var l=x0();let c;var u=S(l),d=S(u);Qt(d,e,"default",{},null);var f=g(u,2),h=S(f);Qt(h,e,"footer",{},null);var v=g(h,2);{var _=p=>{var m=_0(),w=V(m),k=g(w,4),$=S(k),D=S($);j(()=>{W(w,"href",A(()=>"https://pocketbase.io/docs")),W(k,"href",A(()=>"https://github.com/pocketbase/pocketbase/releases")),Se(D,`PocketBase ${A(()=>"v0.36.5")??""}`)}),b(p,m)};te(v,p=>{t(),A(()=>t()?.id)&&p(_)})}j(()=>c=Me(l,1,`page-wrapper ${o()??""}`,null,c,{"center-content":a()})),b(n,l),Fe(),s()}var w0=x('<input type="text"/>'),k0=x('<button type="submit" class="btn btn-expanded-sm btn-sm btn-warning"><span class="txt">Search</span></button>'),S0=x('<button type="button" class="btn btn-transparent btn-sm btn-hint p-l-xs p-r-xs m-l-10"><span class="txt">Clear</span></button>'),T0=x('<form class="searchbar"><label class="m-l-10 txt-xl"><i class="ri-search-line"></i></label> <!> <!> <!></form>');function Bl(n,e){Re(e,!1);const t=Ut(),i="search_"+F.randomString(7);let s=ee(e,"value",12,""),a=ee(e,"placeholder",8,'Search term or filter like created > "2022-01-01"...'),o=ee(e,"autocompleteCollection",8,null),l=ee(e,"extraAutocompleteKeys",24,()=>[]),c=M(),u=M(!1),d=M(),f=M("");function h(C=!0){y(f,""),C&&r(d)?.focus(),t("clear")}function v(){s(r(f)),t("submit",s())}async function _(){r(c)||r(u)||(y(u,!0),y(c,(await Wt(async()=>{const{default:C}=await import("./FilterAutocompleteInput-DaWy_bqh.js");return{default:C}},__vite__mapDeps([0,1]),import.meta.url)).default),y(u,!1))}fn(()=>{_()}),re(()=>L(s()),()=>{typeof s()=="string"&&y(f,s())}),lt(),ze();var p=T0(),m=S(p),w=g(m,2);{var k=C=>{var O=kt(),P=V(O);{let N=ne(()=>s()||a());mi(P,()=>r(c),(R,q)=>{q(R,{get id(){return i},singleLine:!0,disableRequestKeys:!0,disableCollectionJoinKeys:!0,get extraAutocompleteKeys(){return l()},get baseCollection(){return o()},get placeholder(){return r(N)},get value(){return r(f)},set value(B){y(f,B)},$$events:{submit:v},$$legacy:!0})})}b(C,O)},$=C=>{var O=w0();ft(O,P=>y(d,P),()=>r(d)),j(()=>{W(O,"id",i),W(O,"placeholder",s()||a())}),xt(O,()=>r(f),P=>y(f,P)),b(C,O)};te(w,C=>{r(c)&&!r(u)?C(k):C($,!1)})}var D=g(w,2);{var I=C=>{var O=k0();Ot(3,O,()=>Qr,()=>({duration:150,x:5})),b(C,O)};te(D,C=>{L(s()),r(f),A(()=>(s().length||r(f).length)&&r(f)!=s())&&C(I)})}var E=g(D,2);{var T=C=>{var O=S0();Ot(3,O,()=>Qr,()=>({duration:150,x:5})),ie("click",O,()=>{h(!1),v()}),b(C,O)};te(E,C=>{L(s()),r(f),A(()=>s().length||r(f).length)&&C(T)})}j(()=>W(m,"for",i)),ie("click",p,hn(function(C){Qe.call(this,e,C)})),ie("submit",p,Et(v)),b(n,p),Fe()}var $0=x('<button type="button" aria-label="Refresh"><i class="ri-refresh-line svelte-1y422nj"></i></button>');function Hl(n,e){Re(e,!1);const t=Ut();let i=ee(e,"tooltip",28,()=>({text:"Refresh",position:"right"})),s=ee(e,"class",8,""),a=M(null);function o(){t("refresh");const u=i();i(null),clearTimeout(r(a)),y(a,setTimeout(()=>{y(a,null),i(u)},150))}fn(()=>()=>clearTimeout(r(a))),ze();var l=$0();let c;We(l,(u,d)=>ct?.(u,d),i),Ft(()=>ie("click",l,o)),j(()=>c=Me(l,1,`btn btn-transparent btn-circle ${s()??""}`,"svelte-1y422nj",c,{refreshing:r(a)})),b(n,l),Fe()}var I0=x('<div class="scroller-wrapper svelte-1nx51co"><!> <div><!></div> <!></div>');function yd(n,e){Re(e,!1);const t=Ut();let i=ee(e,"class",8,""),s=ee(e,"vThreshold",12,0),a=ee(e,"hThreshold",12,0),o=ee(e,"dispatchOnNoScroll",8,!0),l=M(null),c=M(""),u=null,d,f,h,v,_;function p(){r(l)&&ot(l,r(l).scrollTop=0)}function m(){r(l)&&ot(l,r(l).scrollLeft=0)}function w(){r(l)&&(y(c,""),h=r(l).clientWidth+2,v=r(l).clientHeight+2,d=r(l).scrollWidth-h,f=r(l).scrollHeight-v,f>0?(y(c,r(c)+" v-scroll"),s()>=v&&s(0),r(l).scrollTop-s()<=0&&(y(c,r(c)+" v-scroll-start"),t("vScrollStart")),r(l).scrollTop+s()>=f&&(y(c,r(c)+" v-scroll-end"),t("vScrollEnd"))):o()&&t("vScrollEnd"),d>0?(y(c,r(c)+" h-scroll"),a()>=h&&a(0),r(l).scrollLeft-a()<=0&&(y(c,r(c)+" h-scroll-start"),t("hScrollStart")),r(l).scrollLeft+a()>=d&&(y(c,r(c)+" h-scroll-end"),t("hScrollEnd"))):o()&&t("hScrollEnd"))}function k(){u||(u=setTimeout(()=>{w(),u=null},150))}fn(()=>(k(),_=new MutationObserver(k),_.observe(r(l),{attributeFilter:["width","height"],childList:!0,subtree:!0}),()=>{_?.disconnect(),clearTimeout(u)}));var $={resetVerticalScroll:p,resetHorizontalScroll:m,refresh:w,throttleRefresh:k};ze();var D=I0();ie("resize",kr,k);var I=S(D);Qt(I,e,"before",{},null);var E=g(I,2),T=S(E);Qt(T,e,"default",{},null),ft(E,O=>y(l,O),()=>r(l));var C=g(E,2);return Qt(C,e,"after",{},null),j(()=>Me(E,1,`scroller ${i()??""} ${r(c)??""}`,"svelte-1nx51co")),ie("scroll",E,k),b(n,D),yt(e,"resetVerticalScroll",p),yt(e,"resetHorizontalScroll",m),yt(e,"refresh",w),yt(e,"throttleRefresh",k),Fe($)}var C0=x('<th tabindex="0"><!></th>');function rl(n,e){let t=ee(e,"class",8,""),i=ee(e,"name",8),s=ee(e,"sort",12,""),a=ee(e,"disable",8,!1);function o(){a()||("-"+i()===s()?s("+"+i()):s("-"+i()))}var l=C0();let c;var u=S(l);Qt(u,e,"default",{},null),j(()=>{W(l,"title",i()),c=Me(l,1,`col-sort ${t()??""}`,null,c,{"col-sort-disabled":a(),"sort-active":s()==="-"+i()||s()==="+"+i(),"sort-desc":s()==="-"+i(),"sort-asc":s()==="+"+i()})}),ie("click",l,()=>o()),ie("keydown",l,d=>{(d.code==="Enter"||d.code==="Space")&&(d.preventDefault(),o())}),b(n,l)}var E0=x('<span class="txt-nowrap"> </span>');function eg(n,e){Re(e,!1);let t=ee(e,"date",8);const i={get text(){return F.formatToLocalDate(t(),"yyyy-MM-dd HH:mm:ss.SSS")+" Local"}};ze();var s=E0(),a=S(s);We(s,(o,l)=>ct?.(o,l),()=>i),j(o=>Se(a,o),[()=>(L(t()),A(()=>t().replace("Z"," UTC")))]),b(n,s),Fe()}var O0=x('<div><span class="txt"> </span></div>');function tg(n,e){Re(e,!1);const t=M();let i=ee(e,"level",8);re(()=>L(i()),()=>{y(t,jm.find(l=>l.level==i())?.label)}),lt(),ze();var s=O0(),a=S(s),o=S(a);j(()=>{Me(s,1,`label log-level-label level-${i()??""}`,"svelte-18jvlpw"),Se(o,`${(r(t)||"UNKN")??""} (${i()??""})`)}),b(n,s),Fe()}var D0=x('<span class="loader loader-sm"></span>'),P0=x('<div class="form-field"><input type="checkbox" id="checkbox_0"/> <label for="checkbox_0"></label></div>'),M0=x('<div class="col-header-content"><i class="ri-bookmark-line"></i> <span class="txt">level</span></div>'),A0=x('<div class="col-header-content"><i class="ri-file-list-2-line"></i> <span class="txt">message</span></div>'),L0=x('<div class="col-header-content"><i></i> <span class="txt">created</span></div>'),N0=x("<span><!></span>"),R0=x('<div class="flex flex-wrap flex-gap-10 m-t-10"></div>'),F0=x('<tr tabindex="0" class="row-handle"><td class="bulk-select-col min-width"><div class="form-field"><input type="checkbox"/> <label></label></div></td><td class="col-type-text col-field-level min-width svelte-wy1nz"><!></td><td class="col-type-text col-field-message svelte-wy1nz"><div class="flex flex-gap-10"><span class="txt-ellipsis"> </span></div> <!></td><td class="col-type-date col-field-created"><!></td><td class="col-type-action min-width"><i class="ri-arrow-right-line"></i></td></tr>'),q0=x('<tr><td colspan="99" class="p-xs"><span class="skeleton-loader m-0"></span></td></tr>'),z0=x('<button type="button" class="btn btn-hint btn-expanded m-t-sm"><span class="txt">Clear filters</span></button>'),j0=x('<tr><td colspan="99" class="txt-center txt-hint p-xs"><h6>No logs found.</h6> <!></td></tr>'),U0=x('<table><thead><tr><th class="bulk-select-col min-width"><!></th><!><!><!><th class="col-type-action min-width"></th></tr></thead><tbody></tbody></table>'),V0=x('<div class="block txt-center m-t-sm"><button type="button"><span class="txt">Load more</span></button></div>'),B0=x('<div class="bulkbar svelte-wy1nz"><div class="txt">Selected <strong> </strong> </div> <button type="button" class="btn btn-xs btn-transparent btn-outline p-l-5 p-r-5"><span class="txt">Reset</span></button> <div class="flex-fill"></div> <button type="button" class="btn btn-sm"><span class="txt">Download as JSON</span></button></div>'),H0=x("<!> <!> <!>",1);function W0(n,e){Re(e,!1);const t=M(),i=M(),s=M(),a=Ut(),o=50;let l=ee(e,"filter",12,""),c=ee(e,"presets",8,""),u=ee(e,"zoom",24,()=>({})),d=ee(e,"sort",12,"-@rowid"),f=M([]),h=M(1),v=M(0),_=M(!1),p=0,m=M({});async function w(K=1,U=!0){y(_,!0);const J=[c(),F.normalizeLogsFilter(l())];return u().min&&u().max&&J.push(`created >= "${u().min}" && created <= "${u().max}"`),De.logs.getList(K,o,{sort:d(),skipTotal:1,filter:J.filter(Boolean).map(se=>"("+se+")").join("&&")}).then(async se=>{K<=1&&k();const le=F.toArray(se.items);if(y(_,!1),y(h,se.page),y(v,se.items?.length||0),a("load",r(f).concat(le)),U){const ce=++p;for(;le.length&&p==ce;){const ve=le.splice(0,10);for(let be of ve)F.pushOrReplaceByKey(r(f),be);y(f,r(f)),await F.yieldToMain()}}else{for(let ce of le)F.pushOrReplaceByKey(r(f),ce);y(f,r(f))}}).catch(se=>{se?.isAbort||(y(_,!1),console.warn(se),k(),De.error(se,!J||se?.status!=400))})}function k(){y(f,[]),y(m,{}),y(h,1),y(v,0)}function $(){r(s)?D():I()}function D(){y(m,{})}function I(){for(const K of r(f))ot(m,r(m)[K.id]=K);y(m,r(m))}function E(K){r(m)[K.id]?delete r(m)[K.id]:ot(m,r(m)[K.id]=K),y(m,r(m))}const T=/[-:\. ]/gi;function C(){const K=Object.values(r(m)).sort((se,le)=>se.created<le.created?1:se.created>le.created?-1:0);if(!K.length)return;if(K.length==1)return F.downloadJson(K[0],"log_"+K[0].created.replaceAll(T,"")+".json");const U=K[0].created.replaceAll(T,""),J=K[K.length-1].created.replaceAll(T,"");return F.downloadJson(K,`${K.length}_logs_${J}_to_${U}.json`)}function O(K){let U=[];if(!K.data)return U;if(K.data.type=="request"){const J=["status","execTime","auth","authId","userIP"];for(let se of J)typeof K.data[se]<"u"&&U.push({key:se});K.data.referer&&!K.data.referer.includes(window.location.host)&&U.push({key:"referer"})}else{const J=Object.keys(K.data);for(const se of J)se!="error"&&se!="details"&&U.length<6&&U.push({key:se})}return K.data.error&&U.push({key:"error",label:"label-danger"}),K.data.details&&U.push({key:"details",label:"label-warning"}),U}re(()=>(L(d()),L(l()),L(c()),L(u())),()=>{(typeof d()<"u"||typeof l()<"u"||typeof c()<"u"||typeof u()<"u")&&(k(),w(1))}),re(()=>r(v),()=>{y(t,r(v)>=o)}),re(()=>r(m),()=>{y(i,Object.keys(r(m)).length)}),re(()=>(r(f),r(i)),()=>{y(s,r(f).length&&r(i)===r(f).length)}),lt();var P={load:w};ze();var N=H0(),R=V(N);yd(R,{class:"table-wrapper",children:(K,U)=>{var J=U0();let se;var le=S(J),ce=S(le),ve=S(ce),be=S(ve);{var he=ke=>{var ae=D0();b(ke,ae)},xe=ke=>{var ae=P0(),_e=S(ae);j(()=>{_e.disabled=(r(f),A(()=>!r(f).length)),Wr(_e,r(s))}),ie("change",_e,()=>$()),b(ke,ae)};te(be,ke=>{r(_)?ke(he):ke(xe,!1)})}var Te=g(ve);rl(Te,{disable:!0,class:"col-field-level min-width",name:"level",get sort(){return d()},set sort(ke){d(ke)},children:(ke,ae)=>{var _e=M0();b(ke,_e)},$$slots:{default:!0},$$legacy:!0});var pe=g(Te);rl(pe,{disable:!0,class:"col-type-text col-field-message",name:"data",get sort(){return d()},set sort(ke){d(ke)},children:(ke,ae)=>{var _e=A0();b(ke,_e)},$$slots:{default:!0},$$legacy:!0});var ue=g(pe);rl(ue,{disable:!0,class:"col-type-date col-field-created",name:"created",get sort(){return d()},set sort(ke){d(ke)},children:(ke,ae)=>{var _e=L0(),oe=S(_e);j(me=>Me(oe,1,me,"svelte-wy1nz"),[()=>In((L(F),A(()=>F.getFieldTypeIcon("date"))))]),b(ke,_e)},$$slots:{default:!0},$$legacy:!0});var we=g(le);ht(we,5,()=>r(f),ke=>ke.id,(ke,ae)=>{const _e=ne(()=>(r(ae),A(()=>r(ae).data?.type=="request"))),oe=ne(()=>(r(ae),A(()=>O(r(ae)))));var me=F0(),Q=S(me),ye=S(Q),Ee=S(ye),Ae=g(Ee,2),Ne=g(Q),je=S(Ne);tg(je,{get level(){return r(ae),A(()=>r(ae).level)}});var He=g(Ne),dt=S(He),$e=S(dt),Be=S($e),Ze=g(dt,2);{var Je=Ke=>{var qe=R0();ht(qe,5,()=>r(oe),At,(Le,Ve)=>{var et=N0(),nt=S(et);{var wt=tt=>{var Ge=Is();j(()=>Se(Ge,`${r(Ve),A(()=>r(Ve).key)??""}: ${r(ae),r(Ve),A(()=>r(ae).data[r(Ve).key])??""}ms`)),b(tt,Ge)},pt=tt=>{var Ge=Is();j(gt=>Se(Ge,`${r(Ve),A(()=>r(Ve).key)??""}: ${gt??""}`),[()=>(L(F),r(ae),r(Ve),A(()=>F.stringifyValue(r(ae).data[r(Ve).key],"N/A",80)))]),b(tt,Ge)};te(nt,tt=>{L(r(_e)),r(Ve),A(()=>r(_e)&&r(Ve).key=="execTime")?tt(wt):tt(pt,!1)})}j(()=>Me(et,1,`label label-sm ${r(Ve),A(()=>r(Ve).label||"")??""}`,"svelte-wy1nz")),b(Le,et)}),b(Ke,qe)};te(Ze,Ke=>{L(r(oe)),A(()=>r(oe).length)&&Ke(Je)})}var st=g(He),Ye=S(st);eg(Ye,{get date(){return r(ae),A(()=>r(ae).created)}}),j(()=>{W(Ee,"id",`checkbox_${r(ae),A(()=>r(ae).id)??""}`),Wr(Ee,(r(m),r(ae),A(()=>r(m)[r(ae).id]))),W(Ae,"for",`checkbox_${r(ae),A(()=>r(ae).id)??""}`),Se(Be,(r(ae),A(()=>r(ae).message)))}),ie("change",Ee,()=>E(r(ae))),ie("click",ye,hn(function(Ke){Qe.call(this,e,Ke)})),ie("click",me,()=>a("select",r(ae))),ie("keydown",me,Ke=>{Ke.code==="Enter"&&(Ke.preventDefault(),a("select",r(ae)))}),b(ke,me)},ke=>{var ae=kt(),_e=V(ae);{var oe=Q=>{var ye=q0();b(Q,ye)},me=Q=>{var ye=j0(),Ee=S(ye),Ae=g(S(Ee),2);{var Ne=je=>{var He=z0();ie("click",He,()=>l("")),b(je,He)};te(Ae,je=>{L(l()),A(()=>l()?.length)&&je(Ne)})}b(Q,ye)};te(_e,Q=>{r(_)?Q(oe):Q(me,!1)})}b(ke,ae)}),j(()=>se=Me(J,1,"table",null,se,{"table-loading":r(_)})),b(K,J)},$$slots:{default:!0}});var q=g(R,2);{var B=K=>{var U=V0(),J=S(U);let se;j(()=>se=Me(J,1,"btn btn-lg btn-secondary btn-expanded",null,se,{"btn-loading":r(_),"btn-disabled":r(_)})),ie("click",J,()=>w(r(h)+1)),b(K,U)};te(q,K=>{r(f),r(t),A(()=>r(f).length&&r(t))&&K(B)})}var Y=g(q,2);{var z=K=>{var U=B0(),J=S(U),se=g(S(J)),le=S(se),ce=g(se),ve=g(J,2),be=g(ve,4);j(()=>{Se(le,r(i)),Se(ce,` ${r(i)===1?"log":"logs"}`)}),ie("click",ve,()=>D()),ie("click",be,C),Ot(3,U,()=>Qr,()=>({duration:150,y:5})),b(K,U)};te(Y,K=>{r(i)&&K(z)})}return b(n,N),yt(e,"load",w),Fe(P)}function xo(n){return n+.5|0}const Ur=(n,e,t)=>Math.max(Math.min(n,t),e);function qa(n){return Ur(xo(n*2.55),0,255)}function Jr(n){return Ur(xo(n*255),0,255)}function yr(n){return Ur(xo(n/2.55)/100,0,1)}function eh(n){return Ur(xo(n*100),0,100)}const wi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xu=[..."0123456789ABCDEF"],Y0=n=>xu[n&15],K0=n=>xu[(n&240)>>4]+xu[n&15],No=n=>(n&240)>>4===(n&15),J0=n=>No(n.r)&&No(n.g)&&No(n.b)&&No(n.a);function Z0(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&wi[n[1]]*17,g:255&wi[n[2]]*17,b:255&wi[n[3]]*17,a:e===5?wi[n[4]]*17:255}:(e===7||e===9)&&(t={r:wi[n[1]]<<4|wi[n[2]],g:wi[n[3]]<<4|wi[n[4]],b:wi[n[5]]<<4|wi[n[6]],a:e===9?wi[n[7]]<<4|wi[n[8]]:255})),t}const G0=(n,e)=>n<255?e(n):"";function X0(n){var e=J0(n)?Y0:K0;return n?"#"+e(n.r)+e(n.g)+e(n.b)+G0(n.a,e):void 0}const Q0=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ng(n,e,t){const i=e*Math.min(t,1-t),s=(a,o=(a+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function ew(n,e,t){const i=(s,a=(s+n/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function tw(n,e,t){const i=ng(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function nw(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function _d(n){const t=n.r/255,i=n.g/255,s=n.b/255,a=Math.max(t,i,s),o=Math.min(t,i,s),l=(a+o)/2;let c,u,d;return a!==o&&(d=a-o,u=l>.5?d/(2-a-o):d/(a+o),c=nw(t,i,s,d,a),c=c*60+.5),[c|0,u||0,l]}function xd(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Jr)}function wd(n,e,t){return xd(ng,n,e,t)}function iw(n,e,t){return xd(tw,n,e,t)}function rw(n,e,t){return xd(ew,n,e,t)}function ig(n){return(n%360+360)%360}function sw(n){const e=Q0.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?qa(+e[5]):Jr(+e[5]));const s=ig(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=iw(s,a,o):e[1]==="hsv"?i=rw(s,a,o):i=wd(s,a,o),{r:i[0],g:i[1],b:i[2],a:t}}function aw(n,e){var t=_d(n);t[0]=ig(t[0]+e),t=wd(t),n.r=t[0],n.g=t[1],n.b=t[2]}function ow(n){if(!n)return;const e=_d(n),t=e[0],i=eh(e[1]),s=eh(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${yr(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const th={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},nh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function lw(){const n={},e=Object.keys(nh),t=Object.keys(th);let i,s,a,o,l;for(i=0;i<e.length;i++){for(o=l=e[i],s=0;s<t.length;s++)a=t[s],l=l.replace(a,th[a]);a=parseInt(nh[o],16),n[l]=[a>>16&255,a>>8&255,a&255]}return n}let Ro;function cw(n){Ro||(Ro=lw(),Ro.transparent=[0,0,0,0]);const e=Ro[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const uw=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function dw(n){const e=uw.exec(n);let t=255,i,s,a;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?qa(o):Ur(o*255,0,255)}return i=+e[1],s=+e[3],a=+e[5],i=255&(e[2]?qa(i):Ur(i,0,255)),s=255&(e[4]?qa(s):Ur(s,0,255)),a=255&(e[6]?qa(a):Ur(a,0,255)),{r:i,g:s,b:a,a:t}}}function fw(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${yr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const xc=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Vs=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function hw(n,e,t){const i=Vs(yr(n.r)),s=Vs(yr(n.g)),a=Vs(yr(n.b));return{r:Jr(xc(i+t*(Vs(yr(e.r))-i))),g:Jr(xc(s+t*(Vs(yr(e.g))-s))),b:Jr(xc(a+t*(Vs(yr(e.b))-a))),a:n.a+t*(e.a-n.a)}}function Fo(n,e,t){if(n){let i=_d(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=wd(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function rg(n,e){return n&&Object.assign(e||{},n)}function ih(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Jr(n[3]))):(e=rg(n,{r:0,g:0,b:0,a:1}),e.a=Jr(e.a)),e}function vw(n){return n.charAt(0)==="r"?dw(n):sw(n)}class no{constructor(e){if(e instanceof no)return e;const t=typeof e;let i;t==="object"?i=ih(e):t==="string"&&(i=Z0(e)||cw(e)||vw(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=rg(this._rgb);return e&&(e.a=yr(e.a)),e}set rgb(e){this._rgb=ih(e)}rgbString(){return this._valid?fw(this._rgb):void 0}hexString(){return this._valid?X0(this._rgb):void 0}hslString(){return this._valid?ow(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let a;const o=t===a?.5:t,l=2*o-1,c=i.a-s.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;a=1-u,i.r=255&u*i.r+a*s.r+.5,i.g=255&u*i.g+a*s.g+.5,i.b=255&u*i.b+a*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=hw(this._rgb,e._rgb,t)),this}clone(){return new no(this.rgb)}alpha(e){return this._rgb.a=Jr(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=xo(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Fo(this._rgb,2,e),this}darken(e){return Fo(this._rgb,2,-e),this}saturate(e){return Fo(this._rgb,1,e),this}desaturate(e){return Fo(this._rgb,1,-e),this}rotate(e){return aw(this._rgb,e),this}}function pr(){}const pw=(()=>{let n=0;return()=>n++})();function tn(n){return n==null}function Tn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Bt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Un(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Zi(n,e){return Un(n)?n:e}function Zt(n,e){return typeof n>"u"?e:n}const mw=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Mt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function zt(n,e,t,i){let s,a,o;if(Tn(n))for(a=n.length,s=0;s<a;s++)e.call(t,n[s],s);else if(Bt(n))for(o=Object.keys(n),a=o.length,s=0;s<a;s++)e.call(t,n[o[s]],o[s])}function yl(n,e){let t,i,s,a;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],a=e[t],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function _l(n){if(Tn(n))return n.map(_l);if(Bt(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=_l(n[t[s]]);return e}return n}function sg(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function gw(n,e,t,i){if(!sg(n))return;const s=e[n],a=t[n];Bt(s)&&Bt(a)?io(s,a,i):e[n]=_l(a)}function io(n,e,t){const i=Tn(e)?e:[e],s=i.length;if(!Bt(n))return n;t=t||{};const a=t.merger||gw;let o;for(let l=0;l<s;++l){if(o=i[l],!Bt(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)a(c[u],n,o,t)}return n}function Wa(n,e){return io(n,e,{merger:bw})}function bw(n,e,t){if(!sg(n))return;const i=e[n],s=t[n];Bt(i)&&Bt(s)?Wa(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=_l(s))}const rh={"":n=>n,x:n=>n.x,y:n=>n.y};function yw(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function _w(n){const e=yw(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function xl(n,e){return(rh[e]||(rh[e]=_w(e)))(n)}function kd(n){return n.charAt(0).toUpperCase()+n.slice(1)}const wl=n=>typeof n<"u",es=n=>typeof n=="function",sh=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function xw(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const jn=Math.PI,or=2*jn,ww=or+jn,kl=Number.POSITIVE_INFINITY,kw=jn/180,ji=jn/2,cs=jn/4,ah=jn*2/3,ag=Math.log10,ts=Math.sign;function ks(n,e,t){return Math.abs(n-e)<t}function oh(n){const e=Math.round(n);n=ks(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(ag(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Sw(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,a)=>s-a).pop(),e}function Tw(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ro(n){return!Tw(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function $w(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function Iw(n,e,t){let i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function bs(n){return n*(jn/180)}function Cw(n){return n*(180/jn)}function lh(n){if(!Un(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Ew(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let a=Math.atan2(i,t);return a<-.5*jn&&(a+=or),{angle:a,distance:s}}function wu(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Ow(n,e){return(n-e+ww)%or-jn}function er(n){return(n%or+or)%or}function og(n,e,t,i){const s=er(n),a=er(e),o=er(t),l=er(a-s),c=er(o-s),u=er(s-a),d=er(s-o);return s===a||s===o||i&&a===o||l>c&&u<d}function Ui(n,e,t){return Math.max(e,Math.min(t,n))}function Dw(n){return Ui(n,-32768,32767)}function lg(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Sd(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,s=0,a;for(;i-s>1;)a=s+i>>1,t(a)?s=a:i=a;return{lo:s,hi:i}}const ys=(n,e,t,i)=>Sd(n,t,i?s=>{const a=n[s][e];return a<t||a===t&&n[s+1][e]===t}:s=>n[s][e]<t),Pw=(n,e,t)=>Sd(n,t,i=>n[i][e]>=t);function Mw(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const cg=["push","pop","shift","splice","unshift"];function Aw(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),cg.forEach(t=>{const i="_onData"+kd(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...a){const o=s.apply(this,a);return n._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...a)}),o}})})}function ch(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(cg.forEach(a=>{delete n[a]}),delete n._chartjs)}function Lw(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const ug=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function dg(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,ug.call(window,()=>{i=!1,n.apply(e,t)}))}}function Nw(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const Rw=n=>n==="start"?"left":n==="end"?"right":"center",uh=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2;function Fw(n,e,t){const i=e.length;let s=0,a=i;if(n._sorted){const{iScale:o,vScale:l,_parsed:c}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=o.axis,{min:f,max:h,minDefined:v,maxDefined:_}=o.getUserBounds();if(v){if(s=Math.min(ys(c,d,f).lo,t?i:ys(e,d,o.getPixelForValue(f)).lo),u){const p=c.slice(0,s+1).reverse().findIndex(m=>!tn(m[l.axis]));s-=Math.max(0,p)}s=Ui(s,0,i-1)}if(_){let p=Math.max(ys(c,o.axis,h,!0).hi+1,t?0:ys(e,d,o.getPixelForValue(h),!0).hi+1);if(u){const m=c.slice(p-1).findIndex(w=>!tn(w[l.axis]));p+=Math.max(0,m)}a=Ui(p,s,i)-s}else a=i-s}return{start:s,count:a}}function qw(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const a=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),a}const qo=n=>n===0||n===1,dh=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*or/t)),fh=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*or/t)+1,Ya={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ji)+1,easeOutSine:n=>Math.sin(n*ji),easeInOutSine:n=>-.5*(Math.cos(jn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>qo(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>qo(n)?n:dh(n,.075,.3),easeOutElastic:n=>qo(n)?n:fh(n,.075,.3),easeInOutElastic(n){return qo(n)?n:n<.5?.5*dh(n*2,.1125,.45):.5+.5*fh(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ya.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ya.easeInBounce(n*2)*.5:Ya.easeOutBounce(n*2-1)*.5+.5};function Td(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function hh(n){return Td(n)?n:new no(n)}function wc(n){return Td(n)?n:new no(n).saturate(.5).darken(.1).hexString()}const zw=["x","y","borderWidth","radius","tension"],jw=["color","borderColor","backgroundColor"];function Uw(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:jw},numbers:{type:"number",properties:zw}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Vw(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const vh=new Map;function Bw(n,e){e=e||{};const t=n+JSON.stringify(e);let i=vh.get(t);return i||(i=new Intl.NumberFormat(n,e),vh.set(t,i)),i}function fg(n,e,t){return Bw(e,t).format(n)}const Hw={values(n){return Tn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,a=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),a=Ww(n,t)}const o=ag(Math.abs(a)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),fg(n,i,c)}};function Ww(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var hg={formatters:Hw};function Yw(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Cs=Object.create(null),ku=Object.create(null);function Ka(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const a=t[i];n=n[a]||(n[a]=Object.create(null))}return n}function kc(n,e,t){return typeof e=="string"?io(Ka(n,e),t):io(Ka(n,""),e)}class Kw{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>wc(s.backgroundColor),this.hoverBorderColor=(i,s)=>wc(s.borderColor),this.hoverColor=(i,s)=>wc(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return kc(this,e,t)}get(e){return Ka(this,e)}describe(e,t){return kc(ku,e,t)}override(e,t){return kc(Cs,e,t)}route(e,t,i,s){const a=Ka(this,e),o=Ka(this,i),l="_"+t;Object.defineProperties(a,{[l]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],u=o[s];return Bt(c)?Object.assign({},u,c):Zt(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var _n=new Kw({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Uw,Vw,Yw]);function Jw(n){return!n||tn(n.size)||tn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ph(n,e,t,i,s){let a=e[s];return a||(a=e[s]=n.measureText(s).width,t.push(s)),a>i&&(i=a),i}function us(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function mh(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Su(n,e,t,i){Zw(n,e,t,i)}function Zw(n,e,t,i,s){let a,o,l,c,u,d,f,h;const v=e.pointStyle,_=e.rotation,p=e.radius;let m=(_||0)*kw;if(v&&typeof v=="object"&&(a=v.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),v){default:n.arc(t,i,p,0,or),n.closePath();break;case"triangle":d=p,n.moveTo(t+Math.sin(m)*d,i-Math.cos(m)*p),m+=ah,n.lineTo(t+Math.sin(m)*d,i-Math.cos(m)*p),m+=ah,n.lineTo(t+Math.sin(m)*d,i-Math.cos(m)*p),n.closePath();break;case"rectRounded":u=p*.516,c=p-u,o=Math.cos(m+cs)*c,f=Math.cos(m+cs)*c,l=Math.sin(m+cs)*c,h=Math.sin(m+cs)*c,n.arc(t-f,i-l,u,m-jn,m-ji),n.arc(t+h,i-o,u,m-ji,m),n.arc(t+f,i+l,u,m,m+ji),n.arc(t-h,i+o,u,m+ji,m+jn),n.closePath();break;case"rect":if(!_){c=Math.SQRT1_2*p,d=c,n.rect(t-d,i-c,2*d,2*c);break}m+=cs;case"rectRot":f=Math.cos(m)*p,o=Math.cos(m)*p,l=Math.sin(m)*p,h=Math.sin(m)*p,n.moveTo(t-f,i-l),n.lineTo(t+h,i-o),n.lineTo(t+f,i+l),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":m+=cs;case"cross":f=Math.cos(m)*p,o=Math.cos(m)*p,l=Math.sin(m)*p,h=Math.sin(m)*p,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":f=Math.cos(m)*p,o=Math.cos(m)*p,l=Math.sin(m)*p,h=Math.sin(m)*p,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),m+=cs,f=Math.cos(m)*p,o=Math.cos(m)*p,l=Math.sin(m)*p,h=Math.sin(m)*p,n.moveTo(t-f,i-l),n.lineTo(t+f,i+l),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=Math.cos(m)*p,l=Math.sin(m)*p,n.moveTo(t-o,i-l),n.lineTo(t+o,i+l);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*p,i+Math.sin(m)*p);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ca(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function $d(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Id(n){n.restore()}function Gw(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const a=(e.x+t.x)/2;n.lineTo(a,e.y),n.lineTo(a,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Xw(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function Qw(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),tn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function ek(n,e,t,i,s){if(s.strikethrough||s.underline){const a=n.measureText(i),o=e-a.actualBoundingBoxLeft,l=e+a.actualBoundingBoxRight,c=t-a.actualBoundingBoxAscent,u=t+a.actualBoundingBoxDescent,d=s.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,d),n.lineTo(l,d),n.stroke()}}function tk(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function gh(n,e,t,i,s,a={}){const o=Tn(e)?e:[e],l=a.strokeWidth>0&&a.strokeColor!=="";let c,u;for(n.save(),n.font=s.string,Qw(n,a),c=0;c<o.length;++c)u=o[c],a.backdrop&&tk(n,a.backdrop),l&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),tn(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(u,t,i,a.maxWidth)),n.fillText(u,t,i,a.maxWidth),ek(n,t,i,u,a),i+=Number(s.lineHeight);n.restore()}function bh(n,e){const{x:t,y:i,w:s,h:a,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*jn,jn,!0),n.lineTo(t,i+a-o.bottomLeft),n.arc(t+o.bottomLeft,i+a-o.bottomLeft,o.bottomLeft,jn,ji,!0),n.lineTo(t+s-o.bottomRight,i+a),n.arc(t+s-o.bottomRight,i+a-o.bottomRight,o.bottomRight,ji,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-ji,!0),n.lineTo(t+o.topLeft,i)}const nk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ik=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function rk(n,e){const t=(""+n).match(nk);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const sk=n=>+n||0;function vg(n,e){const t={},i=Bt(e),s=i?Object.keys(e):e,a=Bt(n)?i?o=>Zt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=sk(a(o));return t}function ak(n){return vg(n,{top:"y",right:"x",bottom:"y",left:"x"})}function sl(n){return vg(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ns(n){const e=ak(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ir(n,e){n=n||{},e=e||_n.font;let t=Zt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Zt(n.style,e.style);i&&!(""+i).match(ik)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Zt(n.family,e.family),lineHeight:rk(Zt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Zt(n.weight,e.weight),string:""};return s.string=Jw(s),s}function zo(n,e,t,i){let s,a,o;for(s=0,a=n.length;s<a;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function ok(n,e,t){const{min:i,max:s}=n,a=mw(e,(s-i)/2),o=(l,c)=>t&&l===0?0:l+c;return{min:o(i,-Math.abs(a)),max:o(s,a)}}function As(n,e){return Object.assign(Object.create(n),e)}function Cd(n,e=[""],t,i,s=()=>n[0]){const a=t||n;typeof i>"u"&&(i=bg("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:s,override:l=>Cd([l,...n],e,a,i)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete n[0][c],!0},get(l,c){return mg(l,c,()=>pk(c,e,n,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(l,c){return _h(l).includes(c)},ownKeys(l){return _h(l)},set(l,c,u){const d=l._storage||(l._storage=s());return l[c]=d[c]=u,delete l._keys,!0}})}function ua(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:pg(n,i),setContext:a=>ua(n,a,t,i),override:a=>ua(n.override(a),e,t,i)};return new Proxy(s,{deleteProperty(a,o){return delete a[o],delete n[o],!0},get(a,o,l){return mg(a,o,()=>ck(a,o,l))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(a,o,l){return n[o]=l,delete a[o],!0}})}function pg(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:es(t)?t:()=>t,isIndexable:es(i)?i:()=>i}}const lk=(n,e)=>n?n+kd(e):e,Ed=(n,e)=>Bt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function mg(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function ck(n,e,t){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;let l=i[e];return es(l)&&o.isScriptable(e)&&(l=uk(e,l,n,t)),Tn(l)&&l.length&&(l=dk(e,l,n,o.isIndexable)),Ed(e,l)&&(l=ua(l,s,a&&a[e],o)),l}function uk(n,e,t,i){const{_proxy:s,_context:a,_subProxy:o,_stack:l}=t;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let c=e(a,o||i);return l.delete(n),Ed(n,c)&&(c=Od(s._scopes,s,n,c)),c}function dk(n,e,t,i){const{_proxy:s,_context:a,_subProxy:o,_descriptors:l}=t;if(typeof a.index<"u"&&i(n))return e[a.index%e.length];if(Bt(e[0])){const c=e,u=s._scopes.filter(d=>d!==c);e=[];for(const d of c){const f=Od(u,s,n,d);e.push(ua(f,a,o&&o[n],l))}}return e}function gg(n,e,t){return es(n)?n(e,t):n}const fk=(n,e)=>n===!0?e:typeof n=="string"?xl(e,n):void 0;function hk(n,e,t,i,s){for(const a of e){const o=fk(t,a);if(o){n.add(o);const l=gg(o._fallback,t,s);if(typeof l<"u"&&l!==t&&l!==i)return l}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function Od(n,e,t,i){const s=e._rootScopes,a=gg(e._fallback,t,i),o=[...n,...s],l=new Set;l.add(i);let c=yh(l,o,t,a||t,i);return c===null||typeof a<"u"&&a!==t&&(c=yh(l,o,a,c,i),c===null)?!1:Cd(Array.from(l),[""],s,a,()=>vk(e,t,i))}function yh(n,e,t,i,s){for(;t;)t=hk(n,e,t,i,s);return t}function vk(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return Tn(s)&&Bt(t)?t:s||{}}function pk(n,e,t,i){let s;for(const a of e)if(s=bg(lk(a,n),t),typeof s<"u")return Ed(n,s)?Od(t,i,n,s):s}function bg(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function _h(n){let e=n._keys;return e||(e=n._keys=mk(n._scopes)),e}function mk(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const gk=Number.EPSILON||1e-14,da=(n,e)=>e<n.length&&!n[e].skip&&n[e],yg=n=>n==="x"?"y":"x";function bk(n,e,t,i){const s=n.skip?e:n,a=e,o=t.skip?e:t,l=wu(a,s),c=wu(o,a);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=i*u,h=i*d;return{previous:{x:a.x-f*(o.x-s.x),y:a.y-f*(o.y-s.y)},next:{x:a.x+h*(o.x-s.x),y:a.y+h*(o.y-s.y)}}}function yk(n,e,t){const i=n.length;let s,a,o,l,c,u=da(n,0);for(let d=0;d<i-1;++d)if(c=u,u=da(n,d+1),!(!c||!u)){if(ks(e[d],0,gk)){t[d]=t[d+1]=0;continue}s=t[d]/e[d],a=t[d+1]/e[d],l=Math.pow(s,2)+Math.pow(a,2),!(l<=9)&&(o=3/Math.sqrt(l),t[d]=s*o*e[d],t[d+1]=a*o*e[d])}}function _k(n,e,t="x"){const i=yg(t),s=n.length;let a,o,l,c=da(n,0);for(let u=0;u<s;++u){if(o=l,l=c,c=da(n,u+1),!l)continue;const d=l[t],f=l[i];o&&(a=(d-o[t])/3,l[`cp1${t}`]=d-a,l[`cp1${i}`]=f-a*e[u]),c&&(a=(c[t]-d)/3,l[`cp2${t}`]=d+a,l[`cp2${i}`]=f+a*e[u])}}function xk(n,e="x"){const t=yg(e),i=n.length,s=Array(i).fill(0),a=Array(i);let o,l,c,u=da(n,0);for(o=0;o<i;++o)if(l=c,c=u,u=da(n,o+1),!!c){if(u){const d=u[e]-c[e];s[o]=d!==0?(u[t]-c[t])/d:0}a[o]=l?u?ts(s[o-1])!==ts(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}yk(n,s,a),_k(n,a,e)}function jo(n,e,t){return Math.max(Math.min(n,t),e)}function wk(n,e){let t,i,s,a,o,l=ca(n[0],e);for(t=0,i=n.length;t<i;++t)o=a,a=l,l=t<i-1&&ca(n[t+1],e),a&&(s=n[t],o&&(s.cp1x=jo(s.cp1x,e.left,e.right),s.cp1y=jo(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=jo(s.cp2x,e.left,e.right),s.cp2y=jo(s.cp2y,e.top,e.bottom)))}function kk(n,e,t,i,s){let a,o,l,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")xk(n,s);else{let u=i?n[n.length-1]:n[0];for(a=0,o=n.length;a<o;++a)l=n[a],c=bk(u,l,n[Math.min(a+1,o-(i?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&wk(n,t)}function Dd(){return typeof window<"u"&&typeof document<"u"}function Pd(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Sl(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Wl=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Sk(n,e){return Wl(n).getPropertyValue(e)}const Tk=["top","right","bottom","left"];function Ss(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const a=Tk[s];i[a]=parseFloat(n[e+"-"+a+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const $k=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Ik(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:a}=i;let o=!1,l,c;if($k(s,a,n.target))l=s,c=a;else{const u=e.getBoundingClientRect();l=i.clientX-u.left,c=i.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function tr(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=Wl(t),a=s.boxSizing==="border-box",o=Ss(s,"padding"),l=Ss(s,"border","width"),{x:c,y:u,box:d}=Ik(n,t),f=o.left+(d&&l.left),h=o.top+(d&&l.top);let{width:v,height:_}=e;return a&&(v-=o.width+l.width,_-=o.height+l.height),{x:Math.round((c-f)/v*t.width/i),y:Math.round((u-h)/_*t.height/i)}}function Ck(n,e,t){let i,s;if(e===void 0||t===void 0){const a=n&&Pd(n);if(!a)e=n.clientWidth,t=n.clientHeight;else{const o=a.getBoundingClientRect(),l=Wl(a),c=Ss(l,"border","width"),u=Ss(l,"padding");e=o.width-u.width-c.width,t=o.height-u.height-c.height,i=Sl(l.maxWidth,a,"clientWidth"),s=Sl(l.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:i||kl,maxHeight:s||kl}}const Vr=n=>Math.round(n*10)/10;function Ek(n,e,t,i){const s=Wl(n),a=Ss(s,"margin"),o=Sl(s.maxWidth,n,"clientWidth")||kl,l=Sl(s.maxHeight,n,"clientHeight")||kl,c=Ck(n,e,t);let{width:u,height:d}=c;if(s.boxSizing==="content-box"){const h=Ss(s,"border","width"),v=Ss(s,"padding");u-=v.width+h.width,d-=v.height+h.height}return u=Math.max(0,u-a.width),d=Math.max(0,i?u/i:d-a.height),u=Vr(Math.min(u,o,c.maxWidth)),d=Vr(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Vr(u/2)),(e!==void 0||t!==void 0)&&i&&c.height&&d>c.height&&(d=c.height,u=Vr(Math.floor(d*i))),{width:u,height:d}}function xh(n,e,t){const i=e||1,s=Vr(n.height*i),a=Vr(n.width*i);n.height=Vr(n.height),n.width=Vr(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==a?(n.currentDevicePixelRatio=i,o.height=s,o.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Ok=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Dd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function wh(n,e){const t=Sk(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function fs(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Dk(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function Pk(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},a={x:e.cp1x,y:e.cp1y},o=fs(n,s,t),l=fs(s,a,t),c=fs(a,e,t),u=fs(o,l,t),d=fs(l,c,t);return fs(u,d,t)}const Mk=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},Ak=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Sc(n,e,t){return n?Mk(e,t):Ak()}function Lk(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function Nk(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function _g(n){return n==="angle"?{between:og,compare:Ow,normalize:er}:{between:lg,compare:(e,t)=>e-t,normalize:e=>e}}function kh({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function Rk(n,e,t){const{property:i,start:s,end:a}=t,{between:o,normalize:l}=_g(i),c=e.length;let{start:u,end:d,loop:f}=n,h,v;if(f){for(u+=c,d+=c,h=0,v=c;h<v&&o(l(e[u%c][i]),s,a);++h)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:n.style}}function xg(n,e,t){if(!t)return[n];const{property:i,start:s,end:a}=t,o=e.length,{compare:l,between:c,normalize:u}=_g(i),{start:d,end:f,loop:h,style:v}=Rk(n,e,t),_=[];let p=!1,m=null,w,k,$;const D=()=>c(s,$,w)&&l(s,$)!==0,I=()=>l(a,w)===0||c(a,$,w),E=()=>p||D(),T=()=>!p||I();for(let C=d,O=d;C<=f;++C)k=e[C%o],!k.skip&&(w=u(k[i]),w!==$&&(p=c(w,s,a),m===null&&E()&&(m=l(w,s)===0?C:O),m!==null&&T()&&(_.push(kh({start:m,end:C,loop:h,count:o,style:v})),m=null),O=C,$=w));return m!==null&&_.push(kh({start:m,end:f,loop:h,count:o,style:v})),_}function wg(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const a=xg(i[s],n.points,e);a.length&&t.push(...a)}return t}function Fk(n,e,t,i){let s=0,a=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(a+=s);a>s&&n[a%e].skip;)a--;return a%=e,{start:s,end:a}}function qk(n,e,t,i){const s=n.length,a=[];let o=e,l=n[e],c;for(c=e+1;c<=t;++c){const u=n[c%s];u.skip||u.stop?l.skip||(i=!1,a.push({start:e%s,end:(c-1)%s,loop:i}),e=o=u.stop?c:null):(o=c,l.skip&&(e=c)),l=u}return o!==null&&a.push({start:e%s,end:o%s,loop:i}),a}function zk(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const a=!!n._loop,{start:o,end:l}=Fk(t,s,a,i);if(i===!0)return Sh(n,[{start:o,end:l,loop:a}],t,e);const c=l<o?l+s:l,u=!!n._fullLoop&&o===0&&l===s-1;return Sh(n,qk(t,o,c,u),t,e)}function Sh(n,e,t,i){return!i||!i.setContext||!t?e:jk(n,e,t,i)}function jk(n,e,t,i){const s=n._chart.getContext(),a=Th(n.options),{_datasetIndex:o,options:{spanGaps:l}}=n,c=t.length,u=[];let d=a,f=e[0].start,h=f;function v(_,p,m,w){const k=l?-1:1;if(_!==p){for(_+=c;t[_%c].skip;)_-=k;for(;t[p%c].skip;)p+=k;_%c!==p%c&&(u.push({start:_%c,end:p%c,loop:m,style:w}),d=w,f=p%c)}}for(const _ of e){f=l?f:_.start;let p=t[f%c],m;for(h=f+1;h<=_.end;h++){const w=t[h%c];m=Th(i.setContext(As(s,{type:"segment",p0:p,p1:w,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),Uk(m,d)&&v(f,h-1,_.loop,d),p=w,d=m}f<h-1&&v(f,h-1,_.loop,d)}return u}function Th(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Uk(n,e){if(!e)return!1;const t=[],i=function(s,a){return Td(a)?(t.includes(a)||t.push(a),t.indexOf(a)):a};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Uo(n,e,t){return n.options.clip?n[t]:e[t]}function Vk(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Uo(t,e,"left"),right:Uo(t,e,"right"),top:Uo(i,e,"top"),bottom:Uo(i,e,"bottom")}:e}function kg(n,e){const t=e._clip;if(t.disabled)return!1;const i=Vk(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}class Bk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const a=t.listeners[s],o=t.duration;a.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ug.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const a=i.items;let o=a.length-1,l=!1,c;for(;o>=0;--o)c=a[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),l=!0):(a[o]=a[a.length-1],a.pop());l&&(s.draw(),this._notify(s,i,e,"progress")),a.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var mr=new Bk;const $h="transparent",Hk={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=hh(n||$h),s=i.valid&&hh(e||$h);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Wk{constructor(e,t,i,s){const a=t[i];s=zo([e.to,s,a,e.from]);const o=zo([e.from,a,s]);this._active=!0,this._fn=e.fn||Hk[e.type||typeof o],this._easing=Ya[e.easing]||Ya.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,o=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=zo([e.to,t,s,e.from]),this._from=zo([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,a=this._from,o=this._loop,l=this._to;let c;if(this._active=a!==l&&(o||t<i),!this._active){this._target[s]=l,this._notify(!0);return}if(t<0){this._target[s]=a;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(a,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class Sg{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Bt(e))return;const t=Object.keys(_n.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const a=e[s];if(!Bt(a))return;const o={};for(const l of t)o[l]=a[l];(Tn(a.properties)&&a.properties||[s]).forEach(l=>{(l===s||!i.has(l))&&i.set(l,o)})})}_animateOptions(e,t){const i=t.options,s=Kk(e,i);if(!s)return[];const a=this._createAnimations(s,i);return i.$shared&&Yk(e.options.$animations,i).then(()=>{e.options=i},()=>{}),a}_createAnimations(e,t){const i=this._properties,s=[],a=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,t));continue}const d=t[u];let f=a[u];const h=i.get(u);if(f)if(h&&f.active()){f.update(h,d,l);continue}else f.cancel();if(!h||!h.duration){e[u]=d;continue}a[u]=f=new Wk(h,e,u,d),s.push(f)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return mr.add(this._chart,i),!0}}function Yk(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const a=n[i[s]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function Kk(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Ih(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:i?a:s,end:i?s:a}}function Jk(n,e,t){if(t===!1)return!1;const i=Ih(n,t),s=Ih(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function Zk(n){let e,t,i,s;return Bt(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function Tg(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,a;for(s=0,a=i.length;s<a;++s)t.push(i[s].index);return t}function Ch(n,e,t,i={}){const s=n.keys,a=i.mode==="single";let o,l,c,u;if(e===null)return;let d=!1;for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===t){if(d=!0,i.all)continue;break}u=n.values[c],Un(u)&&(a||e===0||ts(e)===ts(u))&&(e+=u)}return!d&&!i.all?0:e}function Gk(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",o=Object.keys(n),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[s]:d,[a]:n[d]};return l}function Tc(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Xk(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Qk(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function e2(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function Eh(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const a=n[s.index];if(t&&a>0||!t&&a<0)return s.index}return null}function Oh(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:a,vScale:o,index:l}=i,c=a.axis,u=o.axis,d=Xk(a,o,i),f=e.length;let h;for(let v=0;v<f;++v){const _=e[v],{[c]:p,[u]:m}=_,w=_._stacks||(_._stacks={});h=w[u]=e2(s,d,p),h[l]=m,h._top=Eh(h,o,!0,i.type),h._bottom=Eh(h,o,!1,i.type);const k=h._visualValues||(h._visualValues={});k[l]=m}}function $c(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function t2(n,e){return As(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function n2(n,e,t){return As(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ea(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const a=s._stacks;if(!a||a[i]===void 0||a[i][t]===void 0)return;delete a[i][t],a[i]._visualValues!==void 0&&a[i]._visualValues[t]!==void 0&&delete a[i]._visualValues[t]}}}const Ic=n=>n==="reset"||n==="none",Dh=(n,e)=>e?n:Object.assign({},n),i2=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:Tg(t,!0),values:null};class $g{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Tc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ea(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(f,h,v,_)=>f==="x"?h:f==="r"?_:v,a=t.xAxisID=Zt(i.xAxisID,$c(e,"x")),o=t.yAxisID=Zt(i.yAxisID,$c(e,"y")),l=t.rAxisID=Zt(i.rAxisID,$c(e,"r")),c=t.indexAxis,u=t.iAxisID=s(c,a,o,l),d=t.vAxisID=s(c,o,a,l);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ch(this._data,this),e._stacked&&Ea(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Bt(t)){const s=this._cachedMeta;this._data=Gk(t,s)}else if(i!==t){if(i){ch(i,this);const s=this._cachedMeta;Ea(s),s._parsed=[]}t&&Object.isExtensible(t)&&Aw(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=t._stacked;t._stacked=Tc(t.vScale,t),t.stack!==i.stack&&(s=!0,Ea(t),t.stack=i.stack),this._resyncElements(e),(s||a!==t._stacked)&&(Oh(this,t._parsed),t._stacked=Tc(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:o}=i,l=a.axis;let c=e===0&&t===s.length?!0:i._sorted,u=e>0&&i._parsed[e-1],d,f,h;if(this._parsing===!1)i._parsed=s,i._sorted=!0,h=s;else{Tn(s[e])?h=this.parseArrayData(i,s,e,t):Bt(s[e])?h=this.parseObjectData(i,s,e,t):h=this.parsePrimitiveData(i,s,e,t);const v=()=>f[l]===null||u&&f[l]<u[l];for(d=0;d<t;++d)i._parsed[d+e]=f=h[d],c&&(v()&&(c=!1),u=f);i._sorted=c}o&&Oh(this,h)}parsePrimitiveData(e,t,i,s){const{iScale:a,vScale:o}=e,l=a.axis,c=o.axis,u=a.getLabels(),d=a===o,f=new Array(s);let h,v,_;for(h=0,v=s;h<v;++h)_=h+i,f[h]={[l]:d||a.parse(u[_],_),[c]:o.parse(t[_],_)};return f}parseArrayData(e,t,i,s){const{xScale:a,yScale:o}=e,l=new Array(s);let c,u,d,f;for(c=0,u=s;c<u;++c)d=c+i,f=t[d],l[c]={x:a.parse(f[0],d),y:o.parse(f[1],d)};return l}parseObjectData(e,t,i,s){const{xScale:a,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let d,f,h,v;for(d=0,f=s;d<f;++d)h=d+i,v=t[h],u[d]={x:a.parse(xl(v,l),h),y:o.parse(xl(v,c),h)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,a=this._cachedMeta,o=t[e.axis],l={keys:Tg(s,!0),values:t._stacks[e.axis]._visualValues};return Ch(l,o,a.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const a=i[t.axis];let o=a===null?NaN:a;const l=s&&i._stacks[t.axis];s&&l&&(s.values=l,o=Ch(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&e===i.iScale,o=s.length,l=this._getOtherScale(e),c=i2(t,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=Qk(l);let h,v;function _(){v=s[h];const p=v[l.axis];return!Un(v[e.axis])||d>p||f<p}for(h=0;h<o&&!(!_()&&(this.updateRangeFromParsed(u,e,v,c),a));++h);if(a){for(h=o-1;h>=0;--h)if(!_()){this.updateRangeFromParsed(u,e,v,c);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,a,o;for(s=0,a=t.length;s<a;++s)o=t[s][e.axis],Un(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,a=this.getParsed(e);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Zk(Zt(this.options.clip,Jk(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],a=t.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(e,a,l,c),d=l;d<l+c;++d){const f=s[d];f.hidden||(f.active&&u?o.push(f):f.draw(e,a))}for(d=0;d<o.length;++d)o[d].draw(e,a)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=n2(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=t2(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=i,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",a=this._cachedDataOpts,o=e+"-"+t,l=a[o],c=this.enableOptionSharing&&wl(i);if(l)return Dh(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],h=u.getOptionScopes(this.getDataset(),d),v=Object.keys(_n.elements[e]),_=()=>this.getContext(i,s,t),p=u.resolveNamedOptions(h,v,_,f);return p.$shared&&(p.$shared=c,a[o]=Object.freeze(Dh(p,c))),p}_resolveAnimations(e,t,i){const s=this.chart,a=this._cachedDataOpts,o=`animation-${t}`,l=a[o];if(l)return l;let c;if(s.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,t),h=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(h,this.getContext(e,i,t))}const u=new Sg(s,c&&c.animations);return c&&c._cacheable&&(a[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ic(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,a=this.getSharedOptions(i),o=this.includeOptions(t,a)||a!==s;return this.updateSharedOptions(a,t,i),{sharedOptions:a,includeOptions:o}}updateElement(e,t,i,s){Ic(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!Ic(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const a=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=i.length,a=t.length,o=Math.min(a,s);o&&this.parse(0,o),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,t,i=!0){const s=this._cachedMeta,a=s.data,o=e+t;let l;const c=u=>{for(u.length+=t,l=u.length-1;l>=o;l--)u[l]=u[l-t]};for(c(a),l=e;l<o;++l)a[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,t),i&&this.updateElements(a,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&Ea(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class r2 extends $g{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:a}=t,o=this.chart._animationsDisabled;let{start:l,count:c}=Fw(t,s,o);this._drawStart=l,this._drawCount=c,qw(t)&&(l=0,c=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(s,l,c,e)}updateElements(e,t,i,s){const a=s==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(t,s),h=o.axis,v=l.axis,{spanGaps:_,segment:p}=this.options,m=ro(_)?_:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||a||s==="none",k=t+i,$=e.length;let D=t>0&&this.getParsed(t-1);for(let I=0;I<$;++I){const E=e[I],T=w?E:{};if(I<t||I>=k){T.skip=!0;continue}const C=this.getParsed(I),O=tn(C[v]),P=T[h]=o.getPixelForValue(C[h],I),N=T[v]=a||O?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[v],I);T.skip=isNaN(P)||isNaN(N)||O,T.stop=I>0&&Math.abs(C[h]-D[h])>m,p&&(T.parsed=C,T.raw=u.data[I]),f&&(T.options=d||this.resolveDataElementOptions(I,E.active?"active":s)),w||this.updateElement(E,I,T,s),D=C}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const a=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,a,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function ds(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Md{static override(e){Object.assign(Md.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ds()}parse(){return ds()}format(){return ds()}add(){return ds()}diff(){return ds()}startOf(){return ds()}endOf(){return ds()}}var Ig={_date:Md};function s2(n,e,t,i){const{controller:s,data:a,_sorted:o}=n,l=s._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&a.length){const u=l._reversePixels?Pw:ys;if(i){if(s._sharedOptions){const d=a[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const h=u(a,e,t-f),v=u(a,e,t+f);return{lo:h.lo,hi:v.hi}}}}else{const d=u(a,e,t);if(c){const{vScale:f}=s._cachedMeta,{_parsed:h}=n,v=h.slice(0,d.lo+1).reverse().findIndex(p=>!tn(p[f.axis]));d.lo-=Math.max(0,v);const _=h.slice(d.hi).findIndex(p=>!tn(p[f.axis]));d.hi+=Math.max(0,_)}return d}}return{lo:0,hi:a.length-1}}function Yl(n,e,t,i,s){const a=n.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,c=a.length;l<c;++l){const{index:u,data:d}=a[l],{lo:f,hi:h}=s2(a[l],e,o,s);for(let v=f;v<=h;++v){const _=d[v];_.skip||i(_,u,v)}}}function a2(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const a=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function Cc(n,e,t,i,s){const a=[];return!s&&!n.isPointInArea(e)||Yl(n,t,e,function(l,c,u){!s&&!ca(l,n.chartArea,0)||l.inRange(e.x,e.y,i)&&a.push({element:l,datasetIndex:c,index:u})},!0),a}function o2(n,e,t,i){let s=[];function a(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:f}=Ew(o,{x:e.x,y:e.y});og(f,u,d)&&s.push({element:o,datasetIndex:l,index:c})}return Yl(n,t,e,a),s}function l2(n,e,t,i,s,a){let o=[];const l=a2(t);let c=Number.POSITIVE_INFINITY;function u(d,f,h){const v=d.inRange(e.x,e.y,s);if(i&&!v)return;const _=d.getCenterPoint(s);if(!(!!a||n.isPointInArea(_))&&!v)return;const m=l(e,_);m<c?(o=[{element:d,datasetIndex:f,index:h}],c=m):m===c&&o.push({element:d,datasetIndex:f,index:h})}return Yl(n,t,e,u),o}function Ec(n,e,t,i,s,a){return!a&&!n.isPointInArea(e)?[]:t==="r"&&!i?o2(n,e,t,s):l2(n,e,t,i,s,a)}function Ph(n,e,t,i,s){const a=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return Yl(n,t,e,(c,u,d)=>{c[o]&&c[o](e[t],s)&&(a.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(e.x,e.y,s))}),i&&!l?[]:a}var c2={modes:{index(n,e,t,i){const s=tr(e,n),a=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?Cc(n,s,a,i,o):Ec(n,s,a,!1,i,o),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(n,e,t,i){const s=tr(e,n),a=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?Cc(n,s,a,i,o):Ec(n,s,a,!1,i,o);if(l.length>0){const c=l[0].datasetIndex,u=n.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(n,e,t,i){const s=tr(e,n),a=t.axis||"xy",o=t.includeInvisible||!1;return Cc(n,s,a,i,o)},nearest(n,e,t,i){const s=tr(e,n),a=t.axis||"xy",o=t.includeInvisible||!1;return Ec(n,s,a,t.intersect,i,o)},x(n,e,t,i){const s=tr(e,n);return Ph(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=tr(e,n);return Ph(n,s,"y",t.intersect,i)}}};const Cg=["left","top","right","bottom"];function Oa(n,e){return n.filter(t=>t.pos===e)}function Mh(n,e){return n.filter(t=>Cg.indexOf(t.pos)===-1&&t.box.axis===e)}function Da(n,e){return n.sort((t,i)=>{const s=e?i:t,a=e?t:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function u2(n){const e=[];let t,i,s,a,o,l;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:a,options:{stack:o,stackWeight:l=1}}=s,e.push({index:t,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&a+o,stackWeight:l});return e}function d2(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:a}=t;if(!i||!Cg.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function f2(n,e){const t=d2(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let a,o,l;for(a=0,o=n.length;a<o;++a){l=n[a];const{fullSize:c}=l.box,u=t[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*i:c&&e.availableWidth,l.height=s):(l.width=i,l.height=d?d*s:c&&e.availableHeight)}return t}function h2(n){const e=u2(n),t=Da(e.filter(u=>u.box.fullSize),!0),i=Da(Oa(e,"left"),!0),s=Da(Oa(e,"right")),a=Da(Oa(e,"top"),!0),o=Da(Oa(e,"bottom")),l=Mh(e,"x"),c=Mh(e,"y");return{fullSize:t,leftAndTop:i.concat(a),rightAndBottom:s.concat(c).concat(o).concat(l),chartArea:Oa(e,"chartArea"),vertical:i.concat(s).concat(c),horizontal:a.concat(o).concat(l)}}function Ah(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function Eg(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function v2(n,e,t,i){const{pos:s,box:a}=t,o=n.maxPadding;if(!Bt(s)){t.size&&(n[s]-=t.size);const f=i[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?a.height:a.width),t.size=f.size/f.count,n[s]+=t.size}a.getPadding&&Eg(o,a.getPadding());const l=Math.max(0,e.outerWidth-Ah(o,n,"left","right")),c=Math.max(0,e.outerHeight-Ah(o,n,"top","bottom")),u=l!==n.w,d=c!==n.h;return n.w=l,n.h=c,t.horizontal?{same:u,other:d}:{same:d,other:u}}function p2(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function m2(n,e){const t=e.maxPadding;function i(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{a[o]=Math.max(e[o],t[o])}),a}return i(n?["left","right"]:["top","bottom"])}function za(n,e,t,i){const s=[];let a,o,l,c,u,d;for(a=0,o=n.length,u=0;a<o;++a){l=n[a],c=l.box,c.update(l.width||e.w,l.height||e.h,m2(l.horizontal,e));const{same:f,other:h}=v2(e,t,l,i);u|=f&&s.length,d=d||h,c.fullSize||s.push(l)}return u&&za(s,e,t,i)||d}function Vo(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function Lh(n,e,t,i){const s=t.padding;let{x:a,y:o}=e;for(const l of n){const c=l.box,u=i[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const f=e.w*d,h=u.size||c.height;wl(u.start)&&(o=u.start),c.fullSize?Vo(c,s.left,o,t.outerWidth-s.right-s.left,h):Vo(c,e.left+u.placed,o,f,h),u.start=o,u.placed+=f,o=c.bottom}else{const f=e.h*d,h=u.size||c.width;wl(u.start)&&(a=u.start),c.fullSize?Vo(c,a,s.top,h,t.outerHeight-s.bottom-s.top):Vo(c,a,e.top+u.placed,h,f),u.start=a,u.placed+=f,a=c.right}}e.x=a,e.y=o}var Bo={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=ns(n.options.layout.padding),a=Math.max(e-s.width,0),o=Math.max(t-s.height,0),l=h2(n.boxes),c=l.vertical,u=l.horizontal;zt(n.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const d=c.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},s);Eg(h,ns(i));const v=Object.assign({maxPadding:h,w:a,h:o,x:s.left,y:s.top},s),_=f2(c.concat(u),f);za(l.fullSize,v,f,_),za(c,v,f,_),za(u,v,f,_)&&za(c,v,f,_),p2(v),Lh(l.leftAndTop,v,f,_),v.x+=v.w,v.y+=v.h,Lh(l.rightAndBottom,v,f,_),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},zt(l.chartArea,p=>{const m=p.box;Object.assign(m,n.chartArea),m.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class Og{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class g2 extends Og{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const al="$chartjs",b2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Nh=n=>n===null||n==="";function y2(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[al]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Nh(s)){const a=wh(n,"width");a!==void 0&&(n.width=a)}if(Nh(i))if(n.style.height==="")n.height=n.width/(e||2);else{const a=wh(n,"height");a!==void 0&&(n.height=a)}return n}const Dg=Ok?{passive:!0}:!1;function _2(n,e,t){n&&n.addEventListener(e,t,Dg)}function x2(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,Dg)}function w2(n,e){const t=b2[n.type]||n.type,{x:i,y:s}=tr(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Tl(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function k2(n,e,t){const i=n.canvas,s=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||Tl(l.addedNodes,i),o=o&&!Tl(l.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function S2(n,e,t){const i=n.canvas,s=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||Tl(l.removedNodes,i),o=o&&!Tl(l.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const so=new Map;let Rh=0;function Pg(){const n=window.devicePixelRatio;n!==Rh&&(Rh=n,so.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function T2(n,e){so.size||window.addEventListener("resize",Pg),so.set(n,e)}function $2(n){so.delete(n),so.size||window.removeEventListener("resize",Pg)}function I2(n,e,t){const i=n.canvas,s=i&&Pd(i);if(!s)return;const a=dg((l,c)=>{const u=s.clientWidth;t(l,c),u<s.clientWidth&&t()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||a(u,d)});return o.observe(s),T2(n,a),o}function Oc(n,e,t){t&&t.disconnect(),e==="resize"&&$2(n)}function C2(n,e,t){const i=n.canvas,s=dg(a=>{n.ctx!==null&&t(w2(a,n))},n);return _2(i,e,s),s}class E2 extends Og{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(y2(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[al])return!1;const i=t[al].initial;["height","width"].forEach(a=>{const o=i[a];tn(o)?t.removeAttribute(a):t.setAttribute(a,o)});const s=i.style||{};return Object.keys(s).forEach(a=>{t.style[a]=s[a]}),t.width=t.width,delete t[al],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),o={attach:k2,detach:S2,resize:I2}[t]||C2;s[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:Oc,detach:Oc,resize:Oc}[t]||x2)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return Ek(e,t,i,s)}isAttached(e){const t=e&&Pd(e);return!!(t&&t.isConnected)}}function O2(n){return!Dd()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?g2:E2}let wo=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return ro(this.x)&&ro(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(a=>{s[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),s}};function D2(n,e){const t=n.options.ticks,i=P2(n),s=Math.min(t.maxTicksLimit||i,i),a=t.major.enabled?A2(e):[],o=a.length,l=a[0],c=a[o-1],u=[];if(o>s)return L2(e,u,a,o/s),u;const d=M2(a,e,s);if(o>0){let f,h;const v=o>1?Math.round((c-l)/(o-1)):null;for(Ho(e,u,d,tn(v)?0:l-v,l),f=0,h=o-1;f<h;f++)Ho(e,u,d,a[f],a[f+1]);return Ho(e,u,d,c,tn(v)?e.length:c+v),u}return Ho(e,u,d),u}function P2(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function M2(n,e,t){const i=N2(n),s=e.length/t;if(!i)return Math.max(s,1);const a=Sw(i);for(let o=0,l=a.length-1;o<l;o++){const c=a[o];if(c>s)return c}return Math.max(s,1)}function A2(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function L2(n,e,t,i){let s=0,a=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===a&&(e.push(n[o]),s++,a=t[s*i])}function Ho(n,e,t,i,s){const a=Zt(i,0),o=Math.min(Zt(s,n.length),n.length);let l=0,c,u,d;for(t=Math.ceil(t),s&&(c=s-i,t=c/Math.floor(c/t)),d=a;d<0;)l++,d=Math.round(a+l*t);for(u=Math.max(a,0);u<o;u++)u===d&&(e.push(n[u]),l++,d=Math.round(a+l*t))}function N2(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const R2=n=>n==="left"?"right":n==="right"?"left":n,Fh=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,qh=(n,e)=>Math.min(e||n,n);function zh(n,e){const t=[],i=n.length/e,s=n.length;let a=0;for(;a<s;a+=i)t.push(n[Math.floor(a)]);return t}function F2(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),a=n._startPixel,o=n._endPixel,l=1e-6;let c=n.getPixelForTick(s),u;if(!(t&&(i===1?u=Math.max(c-a,o-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(s-1))/2,c+=s<e?u:-u,c<a-l||c>o+l)))return c}function q2(n,e){zt(n,t=>{const i=t.gc,s=i.length/2;let a;if(s>e){for(a=0;a<s;++a)delete t.data[i[a]];i.splice(0,s)}})}function Pa(n){return n.drawTicks?n.tickLength:0}function jh(n,e){if(!n.display)return 0;const t=ir(n.font,e),i=ns(n.padding);return(Tn(n.text)?n.text.length:1)*t.lineHeight+i.height}function z2(n,e){return As(n,{scale:e,type:"scale"})}function j2(n,e,t){return As(n,{tick:t,index:e,type:"tick"})}function U2(n,e,t){let i=Rw(n);return(t&&e!=="right"||!t&&e==="right")&&(i=R2(i)),i}function V2(n,e,t,i){const{top:s,left:a,bottom:o,right:l,chart:c}=n,{chartArea:u,scales:d}=c;let f=0,h,v,_;const p=o-s,m=l-a;if(n.isHorizontal()){if(v=uh(i,a,l),Bt(t)){const w=Object.keys(t)[0],k=t[w];_=d[w].getPixelForValue(k)+p-e}else t==="center"?_=(u.bottom+u.top)/2+p-e:_=Fh(n,t,e);h=l-a}else{if(Bt(t)){const w=Object.keys(t)[0],k=t[w];v=d[w].getPixelForValue(k)-m+e}else t==="center"?v=(u.left+u.right)/2-m+e:v=Fh(n,t,e);_=uh(i,o,s),f=t==="left"?-ji:ji}return{titleX:v,titleY:_,maxWidth:h,rotation:f}}class ko extends wo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=Zi(e,Number.POSITIVE_INFINITY),t=Zi(t,Number.NEGATIVE_INFINITY),i=Zi(i,Number.POSITIVE_INFINITY),s=Zi(s,Number.NEGATIVE_INFINITY),{min:Zi(e,i),max:Zi(t,s),minDefined:Un(e),maxDefined:Un(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:a}=this.getUserBounds(),o;if(s&&a)return{min:t,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),a||(i=Math.max(i,o.max));return t=a&&t>i?i:t,i=s&&t>i?t:i,{min:Zi(t,Zi(i,t)),max:Zi(i,Zi(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Mt(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:a,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ok(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?zh(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=D2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Mt(this.options.afterUpdate,[this])}beforeSetDimensions(){Mt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Mt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Mt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Mt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,a;for(i=0,s=e.length;i<s;i++)a=e[i],a.label=Mt(t.callback,[a.value,i,e],this)}afterTickToLabelConversion(){Mt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Mt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=qh(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,a=t.maxRotation;let o=s,l,c,u;if(!this._isVisible()||!t.display||s>=a||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),f=d.widest.width,h=d.highest.height,v=Ui(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/i:v/(i-1),f+6>l&&(l=v/(i-(e.offset?.5:1)),c=this.maxHeight-Pa(e.grid)-t.padding-jh(e.title,this.chart.options.font),u=Math.sqrt(f*f+h*h),o=Cw(Math.min(Math.asin(Ui((d.highest.height+6)/l,-1,1)),Math.asin(Ui(c/u,-1,1))-Math.asin(Ui(h/u,-1,1)))),o=Math.max(s,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){Mt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Mt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:a}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=jh(s,t.options.font);if(l?(e.width=this.maxWidth,e.height=Pa(a)+c):(e.height=this.maxHeight,e.width=Pa(a)+c),i.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:h}=this._getLabelSizes(),v=i.padding*2,_=bs(this.labelRotation),p=Math.cos(_),m=Math.sin(_);if(l){const w=i.mirror?0:m*f.width+p*h.height;e.height=Math.min(this.maxHeight,e.height+w+v)}else{const w=i.mirror?0:p*f.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+w+v)}this._calculatePadding(u,d,m,p)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:a,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,v=0;c?u?(h=s*e.width,v=i*t.height):(h=i*e.height,v=s*t.width):a==="start"?v=t.width:a==="end"?h=e.width:a!=="inner"&&(h=e.width/2,v=t.width/2),this.paddingLeft=Math.max((h-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((v-f+o)*this.width/(this.width-f),0)}else{let d=t.height/2,f=e.height/2;a==="start"?(d=0,f=e.height):a==="end"&&(d=t.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Mt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)tn(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=zh(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:a}=this,o=[],l=[],c=Math.floor(t/qh(t,i));let u=0,d=0,f,h,v,_,p,m,w,k,$,D,I;for(f=0;f<t;f+=c){if(_=e[f].label,p=this._resolveTickFontOptions(f),s.font=m=p.string,w=a[m]=a[m]||{data:{},gc:[]},k=p.lineHeight,$=D=0,!tn(_)&&!Tn(_))$=ph(s,w.data,w.gc,$,_),D=k;else if(Tn(_))for(h=0,v=_.length;h<v;++h)I=_[h],!tn(I)&&!Tn(I)&&($=ph(s,w.data,w.gc,$,I),D+=k);o.push($),l.push(D),u=Math.max($,u),d=Math.max(D,d)}q2(a,t);const E=o.indexOf(u),T=l.indexOf(d),C=O=>({width:o[O]||0,height:l[O]||0});return{first:C(0),last:C(t-1),widest:C(E),highest:C(T),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Dw(this._alignToPixels?us(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=j2(this.getContext(),e,i))}return this.$context||(this.$context=z2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=bs(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,l=a?a.widest.width+o:0,c=a?a.highest.height+o:0;return this.isHorizontal()?c*i>l*s?l/i:c/s:c*s<l*i?c/i:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:a,position:o,border:l}=s,c=a.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),h=Pa(a),v=[],_=l.setContext(this.getContext()),p=_.display?_.width:0,m=p/2,w=function(z){return us(i,z,p)};let k,$,D,I,E,T,C,O,P,N,R,q;if(o==="top")k=w(this.bottom),T=this.bottom-h,O=k-m,N=w(e.top)+m,q=e.bottom;else if(o==="bottom")k=w(this.top),N=e.top,q=w(e.bottom)-m,T=k+m,O=this.top+h;else if(o==="left")k=w(this.right),E=this.right-h,C=k-m,P=w(e.left)+m,R=e.right;else if(o==="right")k=w(this.left),P=e.left,R=w(e.right)-m,E=k+m,C=this.left+h;else if(t==="x"){if(o==="center")k=w((e.top+e.bottom)/2+.5);else if(Bt(o)){const z=Object.keys(o)[0],K=o[z];k=w(this.chart.scales[z].getPixelForValue(K))}N=e.top,q=e.bottom,T=k+m,O=T+h}else if(t==="y"){if(o==="center")k=w((e.left+e.right)/2);else if(Bt(o)){const z=Object.keys(o)[0],K=o[z];k=w(this.chart.scales[z].getPixelForValue(K))}E=k-m,C=E-h,P=e.left,R=e.right}const B=Zt(s.ticks.maxTicksLimit,f),Y=Math.max(1,Math.ceil(f/B));for($=0;$<f;$+=Y){const z=this.getContext($),K=a.setContext(z),U=l.setContext(z),J=K.lineWidth,se=K.color,le=U.dash||[],ce=U.dashOffset,ve=K.tickWidth,be=K.tickColor,he=K.tickBorderDash||[],xe=K.tickBorderDashOffset;D=F2(this,$,c),D!==void 0&&(I=us(i,D,J),u?E=C=P=R=I:T=O=N=q=I,v.push({tx1:E,ty1:T,tx2:C,ty2:O,x1:P,y1:N,x2:R,y2:q,width:J,color:se,borderDash:le,borderDashOffset:ce,tickWidth:ve,tickColor:be,tickBorderDash:he,tickBorderDashOffset:xe}))}return this._ticksLength=f,this._borderValue=k,v}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:a}=i,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=a,h=Pa(i.grid),v=h+d,_=f?-d:v,p=-bs(this.labelRotation),m=[];let w,k,$,D,I,E,T,C,O,P,N,R,q="middle";if(s==="top")E=this.bottom-_,T=this._getXAxisLabelAlignment();else if(s==="bottom")E=this.top+_,T=this._getXAxisLabelAlignment();else if(s==="left"){const Y=this._getYAxisLabelAlignment(h);T=Y.textAlign,I=Y.x}else if(s==="right"){const Y=this._getYAxisLabelAlignment(h);T=Y.textAlign,I=Y.x}else if(t==="x"){if(s==="center")E=(e.top+e.bottom)/2+v;else if(Bt(s)){const Y=Object.keys(s)[0],z=s[Y];E=this.chart.scales[Y].getPixelForValue(z)+v}T=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")I=(e.left+e.right)/2-v;else if(Bt(s)){const Y=Object.keys(s)[0],z=s[Y];I=this.chart.scales[Y].getPixelForValue(z)}T=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?q="top":c==="end"&&(q="bottom"));const B=this._getLabelSizes();for(w=0,k=l.length;w<k;++w){$=l[w],D=$.label;const Y=a.setContext(this.getContext(w));C=this.getPixelForTick(w)+a.labelOffset,O=this._resolveTickFontOptions(w),P=O.lineHeight,N=Tn(D)?D.length:1;const z=N/2,K=Y.color,U=Y.textStrokeColor,J=Y.textStrokeWidth;let se=T;o?(I=C,T==="inner"&&(w===k-1?se=this.options.reverse?"left":"right":w===0?se=this.options.reverse?"right":"left":se="center"),s==="top"?u==="near"||p!==0?R=-N*P+P/2:u==="center"?R=-B.highest.height/2-z*P+P:R=-B.highest.height+P/2:u==="near"||p!==0?R=P/2:u==="center"?R=B.highest.height/2-z*P:R=B.highest.height-N*P,f&&(R*=-1),p!==0&&!Y.showLabelBackdrop&&(I+=P/2*Math.sin(p))):(E=C,R=(1-N)*P/2);let le;if(Y.showLabelBackdrop){const ce=ns(Y.backdropPadding),ve=B.heights[w],be=B.widths[w];let he=R-ce.top,xe=0-ce.left;switch(q){case"middle":he-=ve/2;break;case"bottom":he-=ve;break}switch(T){case"center":xe-=be/2;break;case"right":xe-=be;break;case"inner":w===k-1?xe-=be:w>0&&(xe-=be/2);break}le={left:xe,top:he,width:be+ce.width,height:ve+ce.height,color:Y.backdropColor}}m.push({label:D,font:O,textOffset:R,options:{rotation:p,color:K,strokeColor:U,strokeWidth:J,textAlign:se,textBaseline:q,translation:[I,E],backdrop:le}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-bs(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:a}}=this.options,o=this._getLabelSizes(),l=e+a,c=o.widest.width;let u,d;return t==="left"?s?(d=this.right+a,i==="near"?u="left":i==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,i==="near"?u="right":i==="center"?(u="center",d-=c/2):(u="left",d=this.left)):t==="right"?s?(d=this.left+a,i==="near"?u="right":i==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,i==="near"?u="left":i==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:a,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,a,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(a=>a.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const l=(c,u,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(t.display)for(a=0,o=s.length;a<o;++a){const c=s[a];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),o=i.display?a.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,h;this.isHorizontal()?(u=us(e,this.left,o)-o/2,d=us(e,this.right,l)+l/2,f=h=c):(f=us(e,this.top,o)-o/2,h=us(e,this.bottom,l)+l/2,u=d=c),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(u,f),t.lineTo(d,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&$d(i,s);const a=this.getLabelItems(e);for(const o of a){const l=o.options,c=o.font,u=o.label,d=o.textOffset;gh(i,u,0,d,c,l)}s&&Id(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const a=ir(i.font),o=ns(i.padding),l=i.align;let c=a.lineHeight/2;t==="bottom"||t==="center"||Bt(t)?(c+=o.bottom,Tn(i.text)&&(c+=a.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:f,rotation:h}=V2(this,c,t,l);gh(e,i.text,0,0,a,{color:i.color,maxWidth:f,rotation:h,textAlign:U2(l,t,s),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Zt(e.grid&&e.grid.z,-1),s=Zt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ko.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let a,o;for(a=0,o=t.length;a<o;++a){const l=t[a];l[i]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return ir(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Wo{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;W2(t)&&(i=this.register(t));const s=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in s||(s[a]=e,B2(e,o,i),this.override&&_n.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in _n[s]&&(delete _n[s][i],this.override&&delete Cs[i])}}function B2(n,e,t){const i=io(Object.create(null),[t?_n.get(t):{},_n.get(e),n.defaults]);_n.set(e,i),n.defaultRoutes&&H2(e,n.defaultRoutes),n.descriptors&&_n.describe(e,n.descriptors)}function H2(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),a=[n].concat(i).join("."),o=e[t].split("."),l=o.pop(),c=o.join(".");_n.route(a,s,c,l)})}function W2(n){return"id"in n&&"defaults"in n}class Y2{constructor(){this.controllers=new Wo($g,"datasets",!0),this.elements=new Wo(wo,"elements"),this.plugins=new Wo(Object,"plugins"),this.scales=new Wo(ko,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const a=i||this._getRegistryForType(s);i||a.isForType(s)||a===this.plugins&&s.id?this._exec(e,a,s):zt(s,o=>{const l=i||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,i){const s=kd(e);Mt(i["before"+s],[],i),t[e](i),Mt(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Xi=new Y2;class K2{constructor(){this._init=void 0}notify(e,t,i,s){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const a=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(a,e,t,i);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,i,s){s=s||{};for(const a of e){const o=a.plugin,l=o[i],c=[t,s,a.options];if(Mt(l,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){tn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=Zt(i.options&&i.options.plugins,{}),a=J2(i);return s===!1&&!t?[]:G2(e,a,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(a,o)=>a.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function J2(n){const e={},t=[],i=Object.keys(Xi.plugins.items);for(let a=0;a<i.length;a++)t.push(Xi.getPlugin(i[a]));const s=n.plugins||[];for(let a=0;a<s.length;a++){const o=s[a];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Z2(n,e){return!e&&n===!1?null:n===!0?{}:n}function G2(n,{plugins:e,localIds:t},i,s){const a=[],o=n.getContext();for(const l of e){const c=l.id,u=Z2(i[c],s);u!==null&&a.push({plugin:l,options:X2(n.config,{plugin:l,local:t[c]},u,o)})}return a}function X2(n,{plugin:e,local:t},i,s){const a=n.pluginScopeKeys(e),o=n.getOptionScopes(i,a);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Tu(n,e){const t=_n.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Q2(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function eS(n,e){return n===e?"_index_":"_value_"}function Uh(n){if(n==="x"||n==="y"||n==="r")return n}function tS(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function $u(n,...e){if(Uh(n))return n;for(const t of e){const i=t.axis||tS(t.position)||n.length>1&&Uh(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Vh(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function nS(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Vh(n,"x",t[0])||Vh(n,"y",t[0])}return{}}function iS(n,e){const t=Cs[n.type]||{scales:{}},i=e.scales||{},s=Tu(n.type,e),a=Object.create(null);return Object.keys(i).forEach(o=>{const l=i[o];if(!Bt(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=$u(o,l,nS(o,n),_n.scales[l.type]),u=eS(c,s),d=t.scales||{};a[o]=Wa(Object.create(null),[{axis:c},l,d[c],d[u]])}),n.data.datasets.forEach(o=>{const l=o.type||n.type,c=o.indexAxis||Tu(l,e),d=(Cs[l]||{}).scales||{};Object.keys(d).forEach(f=>{const h=Q2(f,c),v=o[h+"AxisID"]||h;a[v]=a[v]||Object.create(null),Wa(a[v],[{axis:h},i[v],d[f]])})}),Object.keys(a).forEach(o=>{const l=a[o];Wa(l,[_n.scales[l.type],_n.scale])}),a}function Mg(n){const e=n.options||(n.options={});e.plugins=Zt(e.plugins,{}),e.scales=iS(n,e)}function Ag(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function rS(n){return n=n||{},n.data=Ag(n.data),Mg(n),n}const Bh=new Map,Lg=new Set;function Yo(n,e){let t=Bh.get(n);return t||(t=e(),Bh.set(n,t),Lg.add(t)),t}const Ma=(n,e,t)=>{const i=xl(e,t);i!==void 0&&n.add(i)};class sS{constructor(e){this._config=rS(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ag(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Mg(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Yo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Yo(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Yo(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Yo(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:a}=this,o=this._cachedScopes(e,i),l=o.get(t);if(l)return l;const c=new Set;t.forEach(d=>{e&&(c.add(e),d.forEach(f=>Ma(c,e,f))),d.forEach(f=>Ma(c,s,f)),d.forEach(f=>Ma(c,Cs[a]||{},f)),d.forEach(f=>Ma(c,_n,f)),d.forEach(f=>Ma(c,ku,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),Lg.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,Cs[t]||{},_n.datasets[t]||{},{type:t},_n,ku]}resolveNamedOptions(e,t,i,s=[""]){const a={$shared:!0},{resolver:o,subPrefixes:l}=Hh(this._resolverCache,e,s);let c=o;if(oS(o,t)){a.$shared=!1,i=es(i)?i():i;const u=this.createResolver(e,i,l);c=ua(o,i,u)}for(const u of t)a[u]=c[u];return a}createResolver(e,t,i=[""],s){const{resolver:a}=Hh(this._resolverCache,e,i);return Bt(t)?ua(a,t,void 0,s):a}}function Hh(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let a=i.get(s);return a||(a={resolver:Cd(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},i.set(s,a)),a}const aS=n=>Bt(n)&&Object.getOwnPropertyNames(n).some(e=>es(n[e]));function oS(n,e){const{isScriptable:t,isIndexable:i}=pg(n);for(const s of e){const a=t(s),o=i(s),l=(o||a)&&n[s];if(a&&(es(l)||aS(l))||o&&Tn(l))return!0}return!1}var lS="4.5.1";const cS=["top","bottom","left","right","chartArea"];function Wh(n,e){return n==="top"||n==="bottom"||cS.indexOf(n)===-1&&e==="x"}function Yh(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function Kh(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Mt(t&&t.onComplete,[n],e)}function uS(n){const e=n.chart,t=e.options.animation;Mt(t&&t.onProgress,[n],e)}function Ng(n){return Dd()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ol={},Jh=n=>{const e=Ng(n);return Object.values(ol).filter(t=>t.canvas===e).pop()};function dS(n,e,t){const i=Object.keys(n);for(const s of i){const a=+s;if(a>=e){const o=n[s];delete n[s],(t>0||a>e)&&(n[a+t]=o)}}}function fS(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}class ll{static defaults=_n;static instances=ol;static overrides=Cs;static registry=Xi;static version=lS;static getChart=Jh;static register(...e){Xi.add(...e),Zh()}static unregister(...e){Xi.remove(...e),Zh()}constructor(e,t){const i=this.config=new sS(t),s=Ng(e),a=Jh(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||O2(s)),this.platform.updateConfig(i);const l=this.platform.acquireContext(s,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=pw(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new K2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Nw(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],ol[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}mr.listen(this,"complete",Kh),mr.listen(this,"progress",uS),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:a}=this;return tn(e)?t&&a?a:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Xi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mh(this.canvas,this.ctx),this}stop(){return mr.stop(this),this}resize(e,t){mr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,t,a),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,xh(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Mt(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};zt(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,l)=>(o[l]=!1,o),{});let a=[];t&&(a=a.concat(Object.keys(t).map(o=>{const l=t[o],c=$u(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),zt(a,o=>{const l=o.options,c=l.id,u=$u(c,l),d=Zt(l.type,o.dtype);(l.position===void 0||Wh(l.position,u)!==Wh(o.dposition))&&(l.position=o.dposition),s[c]=!0;let f=null;if(c in i&&i[c].type===d)f=i[c];else{const h=Xi.getScale(d);f=new h({id:c,type:d,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(l,e)}),zt(s,(o,l)=>{o||delete i[l]}),zt(i,o=>{Bo.configure(this,o,o.options),Bo.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,a)=>s.index-a.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Yh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const a=t[i];let o=this.getDatasetMeta(i);const l=a.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=l,o.indexAxis=a.indexAxis||Tu(l,this.options),o.order=a.order||0,o.index=i,o.label=""+a.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=Xi.getController(l),{datasetElementType:u,dataElementType:d}=_n.datasets[l];Object.assign(c,{dataElementType:Xi.getElement(d),datasetElementType:u&&Xi.getElement(u)}),o.controller=new c(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){zt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),h=!s&&a.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||zt(a,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Yh("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){zt(this.scales,e=>{Bo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!sh(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of t){const o=i==="_removeElements"?-a:a;dS(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=a=>new Set(e.filter(o=>o[0]===a).map((o,l)=>l+","+o.splice(1).join(","))),s=i(0);for(let a=1;a<t;a++)if(!sh(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bo.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],zt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,es(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(mr.has(this)?this.attached&&!mr.running(this)&&mr.start(this):(this.draw(),Kh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,a;for(s=0,a=t.length;s<a;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=kg(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&$d(t,s),e.controller.draw(),s&&Id(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return ca(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const a=c2.modes[t];return typeof a=="function"?a(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(a=>a&&a._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=As(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,s);wl(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(a,{visible:i}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),mr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),mh(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ol[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(a,o)=>{t.addEventListener(this,a,o),e[a]=o},s=(a,o,l)=>{a.offsetX=o,a.offsetY=l,this._eventHandler(a)};zt(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(c,u)=>{t.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(t.removeEventListener(this,c,u),delete e[c])},a=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),i("resize",a),i("detach",o)};o=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){zt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},zt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let a,o,l,c;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:a,index:o})=>{const l=this.getDatasetMeta(a);if(!l)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:l.data[o],index:o}});!yl(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,a=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=a(t,e),l=i?e:a(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const a=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:a}=this,o=t,l=this._getActiveElements(e,s,i,o),c=xw(e),u=fS(e,this._lastEvent,i,c);i&&(this._lastEvent=null,Mt(a.onHover,[e,l,this],this),c&&Mt(a.onClick,[e,l,this],this));const d=!yl(l,s);return(d||t)&&(this._active=l,this._updateHoverStyles(l,s,t)),this._lastEvent=u,d}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}}function Zh(){return zt(ll.instances,n=>n._plugins.invalidate())}function Rg(n,e,t=e){n.lineCap=Zt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Zt(t.borderDash,e.borderDash)),n.lineDashOffset=Zt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Zt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Zt(t.borderWidth,e.borderWidth),n.strokeStyle=Zt(t.borderColor,e.borderColor)}function hS(n,e,t){n.lineTo(t.x,t.y)}function vS(n){return n.stepped?Gw:n.tension||n.cubicInterpolationMode==="monotone"?Xw:hS}function Fg(n,e,t={}){const i=n.length,{start:s=0,end:a=i-1}=t,{start:o,end:l}=e,c=Math.max(s,o),u=Math.min(a,l),d=s<o&&a<o||s>l&&a>l;return{count:i,start:c,loop:e.loop,ilen:u<c&&!d?i+u-c:u-c}}function pS(n,e,t,i){const{points:s,options:a}=e,{count:o,start:l,loop:c,ilen:u}=Fg(s,t,i),d=vS(a);let{move:f=!0,reverse:h}=i||{},v,_,p;for(v=0;v<=u;++v)_=s[(l+(h?u-v:v))%o],!_.skip&&(f?(n.moveTo(_.x,_.y),f=!1):d(n,p,_,h,a.stepped),p=_);return c&&(_=s[(l+(h?u:0))%o],d(n,p,_,h,a.stepped)),!!c}function mS(n,e,t,i){const s=e.points,{count:a,start:o,ilen:l}=Fg(s,t,i),{move:c=!0,reverse:u}=i||{};let d=0,f=0,h,v,_,p,m,w;const k=D=>(o+(u?l-D:D))%a,$=()=>{p!==m&&(n.lineTo(d,m),n.lineTo(d,p),n.lineTo(d,w))};for(c&&(v=s[k(0)],n.moveTo(v.x,v.y)),h=0;h<=l;++h){if(v=s[k(h)],v.skip)continue;const D=v.x,I=v.y,E=D|0;E===_?(I<p?p=I:I>m&&(m=I),d=(f*d+D)/++f):($(),n.lineTo(D,I),_=E,f=0,p=m=I),w=I}$()}function Iu(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?mS:pS}function gS(n){return n.stepped?Dk:n.tension||n.cubicInterpolationMode==="monotone"?Pk:fs}function bS(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),Rg(n,e.options),n.stroke(s)}function yS(n,e,t,i){const{segments:s,options:a}=e,o=Iu(e);for(const l of s)Rg(n,a,l.style),n.beginPath(),o(n,e,l,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const _S=typeof Path2D=="function";function xS(n,e,t,i){_S&&!e.options.segment?bS(n,e,t,i):yS(n,e,t,i)}class Kl extends wo{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;kk(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=zk(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],a=this.points,o=wg(this,{property:t,start:s,end:s});if(!o.length)return;const l=[],c=gS(i);let u,d;for(u=0,d=o.length;u<d;++u){const{start:f,end:h}=o[u],v=a[f],_=a[h];if(v===_){l.push(v);continue}const p=Math.abs((s-v[t])/(_[t]-v[t])),m=c(v,_,p,i.stepped);m[t]=e[t],l.push(m)}return l.length===1?l[0]:l}pathSegment(e,t,i){return Iu(this)(e,this,t,i)}path(e,t,i){const s=this.segments,a=Iu(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const l of s)o&=a(e,this,l,{start:t,end:t+i-1});return!!o}draw(e,t,i,s){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),xS(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Gh(n,e,t,i){const s=n.options,{[t]:a}=n.getProps([t],i);return Math.abs(e-a)<s.radius+s.hitRadius}class wS extends wo{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(t-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return Gh(this,e,"x",t)}inYRange(e,t){return Gh(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!ca(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Su(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function kS(n,e,t){const i=n.segments,s=n.points,a=e.points,o=[];for(const l of i){let{start:c,end:u}=l;u=Jl(c,u,s);const d=Cu(t,s[c],s[u],l.loop);if(!e.segments){o.push({source:l,target:d,start:s[c],end:s[u]});continue}const f=wg(e,d);for(const h of f){const v=Cu(t,a[h.start],a[h.end],h.loop),_=xg(l,s,v);for(const p of _)o.push({source:p,target:h,start:{[t]:Xh(d,v,"start",Math.max)},end:{[t]:Xh(d,v,"end",Math.min)}})}}return o}function Cu(n,e,t,i){if(i)return;let s=e[n],a=t[n];return n==="angle"&&(s=er(s),a=er(a)),{property:n,start:s,end:a}}function SS(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,a=[];return e.segments.forEach(({start:o,end:l})=>{l=Jl(o,l,s);const c=s[o],u=s[l];i!==null?(a.push({x:c.x,y:i}),a.push({x:u.x,y:i})):t!==null&&(a.push({x:t,y:c.y}),a.push({x:t,y:u.y}))}),a}function Jl(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Xh(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function qg(n,e){let t=[],i=!1;return Tn(n)?(i=!0,t=n):t=SS(n,e),t.length?new Kl({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function Qh(n){return n&&n.fill!==!1}function TS(n,e,t){let s=n[e].fill;const a=[e];let o;if(!t)return s;for(;s!==!1&&a.indexOf(s)===-1;){if(!Un(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;a.push(s),s=o.fill}return!1}function $S(n,e,t){const i=OS(n);if(Bt(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Un(s)&&Math.floor(s)===s?IS(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function IS(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function CS(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Bt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function ES(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:Bt(n)?i=n.value:i=e.getBaseValue(),i}function OS(n){const e=n.options,t=e.fill;let i=Zt(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function DS(n){const{scale:e,index:t,line:i}=n,s=[],a=i.segments,o=i.points,l=PS(e,t);l.push(qg({x:null,y:e.bottom},i));for(let c=0;c<a.length;c++){const u=a[c];for(let d=u.start;d<=u.end;d++)MS(s,o[d],l)}return new Kl({points:s,options:{}})}function PS(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const a=i[s];if(a.index===e)break;a.hidden||t.unshift(a.dataset)}return t}function MS(n,e,t){const i=[];for(let s=0;s<t.length;s++){const a=t[s],{first:o,last:l,point:c}=AS(a,e,"x");if(!(!c||o&&l)){if(o)i.unshift(c);else if(n.push(c),!l)break}}n.push(...i)}function AS(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],a=n.segments,o=n.points;let l=!1,c=!1;for(let u=0;u<a.length;u++){const d=a[u],f=o[d.start][t],h=o[d.end][t];if(lg(s,f,h)){l=s===f,c=s===h;break}}return{first:l,last:c,point:i}}class zg{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:a,radius:o}=this;return t=t||{start:0,end:or},e.arc(s,a,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,a=e.angle;return{x:t+Math.cos(a)*s,y:i+Math.sin(a)*s,angle:a}}}function LS(n){const{chart:e,fill:t,line:i}=n;if(Un(t))return NS(e,t);if(t==="stack")return DS(n);if(t==="shape")return!0;const s=RS(n);return s instanceof zg?s:qg(s,i)}function NS(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function RS(n){return(n.scale||{}).getPointPositionForValue?qS(n):FS(n)}function FS(n){const{scale:e={},fill:t}=n,i=CS(t,e);if(Un(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function qS(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,a=i.reverse?e.max:e.min,o=ES(t,e,a),l=[];if(i.grid.circular){const c=e.getPointPositionForValue(0,a);return new zg({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<s;++c)l.push(e.getPointPositionForValue(c,o));return l}function Dc(n,e,t){const i=LS(e),{chart:s,index:a,line:o,scale:l,axis:c}=e,u=o.options,d=u.fill,f=u.backgroundColor,{above:h=f,below:v=f}=d||{},_=s.getDatasetMeta(a),p=kg(s,_);i&&o.points.length&&($d(n,t),zS(n,{line:o,target:i,above:h,below:v,area:t,scale:l,axis:c,clip:p}),Id(n))}function zS(n,e){const{line:t,target:i,above:s,below:a,area:o,scale:l,clip:c}=e,u=t._loop?"angle":e.axis;n.save();let d=a;a!==s&&(u==="x"?(ev(n,i,o.top),Pc(n,{line:t,target:i,color:s,scale:l,property:u,clip:c}),n.restore(),n.save(),ev(n,i,o.bottom)):u==="y"&&(tv(n,i,o.left),Pc(n,{line:t,target:i,color:a,scale:l,property:u,clip:c}),n.restore(),n.save(),tv(n,i,o.right),d=s)),Pc(n,{line:t,target:i,color:d,scale:l,property:u,clip:c}),n.restore()}function ev(n,e,t){const{segments:i,points:s}=e;let a=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:u}=l,d=s[c],f=s[Jl(c,u,s)];a?(n.moveTo(d.x,d.y),a=!1):(n.lineTo(d.x,t),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(f.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function tv(n,e,t){const{segments:i,points:s}=e;let a=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:u}=l,d=s[c],f=s[Jl(c,u,s)];a?(n.moveTo(d.x,d.y),a=!1):(n.lineTo(t,d.y),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(t,f.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function Pc(n,e){const{line:t,target:i,property:s,color:a,scale:o,clip:l}=e,c=kS(t,i,s);for(const{source:u,target:d,start:f,end:h}of c){const{style:{backgroundColor:v=a}={}}=u,_=i!==!0;n.save(),n.fillStyle=v,jS(n,o,l,_&&Cu(s,f,h)),n.beginPath();const p=!!t.pathSegment(n,u);let m;if(_){p?n.closePath():nv(n,i,h,s);const w=!!i.pathSegment(n,d,{move:p,reverse:!0});m=p&&w,m||nv(n,i,f,s)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function jS(n,e,t,i){const s=e.chart.chartArea,{property:a,start:o,end:l}=i||{};if(a==="x"||a==="y"){let c,u,d,f;a==="x"?(c=o,u=s.top,d=l,f=s.bottom):(c=s.left,u=o,d=s.right,f=l),n.beginPath(),t&&(c=Math.max(c,t.left),d=Math.min(d,t.right),u=Math.max(u,t.top),f=Math.min(f,t.bottom)),n.rect(c,u,d-c,f-u),n.clip()}}function nv(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var US={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let a,o,l,c;for(o=0;o<i;++o)a=n.getDatasetMeta(o),l=a.dataset,c=null,l&&l.options&&l instanceof Kl&&(c={visible:n.isDatasetVisible(o),index:o,fill:$S(l,o,i),chart:n,axis:a.controller.options.indexAxis,scale:a.vScale,line:l}),a.$filler=c,s.push(c);for(o=0;o<i;++o)c=s[o],!(!c||c.fill===!1)&&(c.fill=TS(s,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),a=n.chartArea;for(let o=s.length-1;o>=0;--o){const l=s[o].$filler;l&&(l.line.updateControlPoints(a,l.axis),i&&l.fill&&Dc(n.ctx,l,a))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const a=i[s].$filler;Qh(a)&&Dc(n.ctx,a,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!Qh(i)||t.drawTime!=="beforeDatasetDraw"||Dc(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ja={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,a=0;for(e=0,t=n.length;e<t;++e){const l=n[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),s+=c.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:s/a}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,a,o,l;for(a=0,o=n.length;a<o;++a){const c=n[a].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=wu(e,u);d<s&&(s=d,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function Gi(n,e){return e&&(Tn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function gr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function VS(n,e){const{element:t,datasetIndex:i,index:s}=e,a=n.getDatasetMeta(i).controller,{label:o,value:l}=a.getLabelAndValue(s);return{chart:n,label:o,parsed:a.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:l,dataset:a.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function iv(n,e){const t=n.chart.ctx,{body:i,footer:s,title:a}=n,{boxWidth:o,boxHeight:l}=e,c=ir(e.bodyFont),u=ir(e.titleFont),d=ir(e.footerFont),f=a.length,h=s.length,v=i.length,_=ns(e.padding);let p=_.height,m=0,w=i.reduce((D,I)=>D+I.before.length+I.lines.length+I.after.length,0);if(w+=n.beforeBody.length+n.afterBody.length,f&&(p+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),w){const D=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;p+=v*D+(w-v)*c.lineHeight+(w-1)*e.bodySpacing}h&&(p+=e.footerMarginTop+h*d.lineHeight+(h-1)*e.footerSpacing);let k=0;const $=function(D){m=Math.max(m,t.measureText(D).width+k)};return t.save(),t.font=u.string,zt(n.title,$),t.font=c.string,zt(n.beforeBody.concat(n.afterBody),$),k=e.displayColors?o+2+e.boxPadding:0,zt(i,D=>{zt(D.before,$),zt(D.lines,$),zt(D.after,$)}),k=0,t.font=d.string,zt(n.footer,$),t.restore(),m+=_.width,{width:m,height:p}}function BS(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function HS(n,e,t,i){const{x:s,width:a}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&s+a+o>e.width||n==="right"&&s-a-o<0)return!0}function WS(n,e,t,i){const{x:s,width:a}=t,{width:o,chartArea:{left:l,right:c}}=n;let u="center";return i==="center"?u=s<=(l+c)/2?"left":"right":s<=a/2?u="left":s>=o-a/2&&(u="right"),HS(u,n,e,t)&&(u="center"),u}function rv(n,e,t){const i=t.yAlign||e.yAlign||BS(n,t);return{xAlign:t.xAlign||e.xAlign||WS(n,e,t,i),yAlign:i}}function YS(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function KS(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function sv(n,e,t,i){const{caretSize:s,caretPadding:a,cornerRadius:o}=n,{xAlign:l,yAlign:c}=t,u=s+a,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:v}=sl(o);let _=YS(e,l);const p=KS(e,c,u);return c==="center"?l==="left"?_+=u:l==="right"&&(_-=u):l==="left"?_-=Math.max(d,h)+s:l==="right"&&(_+=Math.max(f,v)+s),{x:Ui(_,0,i.width-e.width),y:Ui(p,0,i.height-e.height)}}function Ko(n,e,t){const i=ns(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function av(n){return Gi([],gr(n))}function JS(n,e,t){return As(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function ov(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const jg={beforeTitle:pr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:pr,beforeBody:pr,beforeLabel:pr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return tn(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:pr,afterBody:pr,beforeFooter:pr,footer:pr,afterFooter:pr};function Qn(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?jg[e].call(t,i):s}class lv extends wo{static positioners=ja;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,a=new Sg(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=JS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=Qn(i,"beforeTitle",this,e),a=Qn(i,"title",this,e),o=Qn(i,"afterTitle",this,e);let l=[];return l=Gi(l,gr(s)),l=Gi(l,gr(a)),l=Gi(l,gr(o)),l}getBeforeBody(e,t){return av(Qn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return zt(e,a=>{const o={before:[],lines:[],after:[]},l=ov(i,a);Gi(o.before,gr(Qn(l,"beforeLabel",this,a))),Gi(o.lines,Qn(l,"label",this,a)),Gi(o.after,gr(Qn(l,"afterLabel",this,a))),s.push(o)}),s}getAfterBody(e,t){return av(Qn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=Qn(i,"beforeFooter",this,e),a=Qn(i,"footer",this,e),o=Qn(i,"afterFooter",this,e);let l=[];return l=Gi(l,gr(s)),l=Gi(l,gr(a)),l=Gi(l,gr(o)),l}_createItems(e){const t=this._active,i=this.chart.data,s=[],a=[],o=[];let l=[],c,u;for(c=0,u=t.length;c<u;++c)l.push(VS(this.chart,t[c]));return e.filter&&(l=l.filter((d,f,h)=>e.filter(d,f,h,i))),e.itemSort&&(l=l.sort((d,f)=>e.itemSort(d,f,i))),zt(l,d=>{const f=ov(e.callbacks,d);s.push(Qn(f,"labelColor",this,d)),a.push(Qn(f,"labelPointStyle",this,d)),o.push(Qn(f,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let a,o=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const l=ja[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=iv(this,i),u=Object.assign({},l,c),d=rv(this.chart,i,u),f=sv(i,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,a={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const a=this.getCaretPosition(e,i,s);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:a}=this,{caretSize:o,cornerRadius:l}=i,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=sl(l),{x:h,y:v}=e,{width:_,height:p}=t;let m,w,k,$,D,I;return a==="center"?(D=v+p/2,s==="left"?(m=h,w=m-o,$=D+o,I=D-o):(m=h+_,w=m+o,$=D-o,I=D+o),k=m):(s==="left"?w=h+Math.max(c,d)+o:s==="right"?w=h+_-Math.max(u,f)-o:w=this.caretX,a==="top"?($=v,D=$-o,m=w-o,k=w+o):($=v+p,D=$+o,m=w+o,k=w-o),I=$),{x1:m,x2:w,x3:k,y1:$,y2:D,y3:I}}drawTitle(e,t,i){const s=this.title,a=s.length;let o,l,c;if(a){const u=Sc(i.rtl,this.x,this.width);for(e.x=Ko(this,i.titleAlign,i),t.textAlign=u.textAlign(i.titleAlign),t.textBaseline="middle",o=ir(i.titleFont),l=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,c=0;c<a;++c)t.fillText(s[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===a&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,t,i,s,a){const o=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:u}=a,d=ir(a.bodyFont),f=Ko(this,"left",a),h=s.x(f),v=c<d.lineHeight?(d.lineHeight-c)/2:0,_=t.y+v;if(a.usePointStyle){const p={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},m=s.leftForLtr(h,u)+u/2,w=_+c/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Su(e,p,m,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Su(e,p,m,w)}else{e.lineWidth=Bt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=s.leftForLtr(h,u),m=s.leftForLtr(s.xPlus(h,1),u-2),w=sl(o.borderRadius);Object.values(w).some(k=>k!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,bh(e,{x:p,y:_,w:u,h:c,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),bh(e,{x:m,y:_+1,w:u-2,h:c-2,radius:w}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(p,_,u,c),e.strokeRect(p,_,u,c),e.fillStyle=o.backgroundColor,e.fillRect(m,_+1,u-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:a,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=i,f=ir(i.bodyFont);let h=f.lineHeight,v=0;const _=Sc(i.rtl,this.x,this.width),p=function(C){t.fillText(C,_.x(e.x+v),e.y+h/2),e.y+=h+a},m=_.textAlign(o);let w,k,$,D,I,E,T;for(t.textAlign=o,t.textBaseline="middle",t.font=f.string,e.x=Ko(this,m,i),t.fillStyle=i.bodyColor,zt(this.beforeBody,p),v=l&&m!=="right"?o==="center"?u/2+d:u+2+d:0,D=0,E=s.length;D<E;++D){for(w=s[D],k=this.labelTextColors[D],t.fillStyle=k,zt(w.before,p),$=w.lines,l&&$.length&&(this._drawColorBox(t,e,D,_,i),h=Math.max(f.lineHeight,c)),I=0,T=$.length;I<T;++I)p($[I]),h=f.lineHeight;zt(w.after,p)}v=0,h=f.lineHeight,zt(this.afterBody,p),e.y-=a}drawFooter(e,t,i){const s=this.footer,a=s.length;let o,l;if(a){const c=Sc(i.rtl,this.x,this.width);for(e.x=Ko(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=c.textAlign(i.footerAlign),t.textBaseline="middle",o=ir(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,l=0;l<a;++l)t.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:a,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:d}=i,{topLeft:f,topRight:h,bottomLeft:v,bottomRight:_}=sl(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(l+f,c),o==="top"&&this.drawCaret(e,t,i,s),t.lineTo(l+u-h,c),t.quadraticCurveTo(l+u,c,l+u,c+h),o==="center"&&a==="right"&&this.drawCaret(e,t,i,s),t.lineTo(l+u,c+d-_),t.quadraticCurveTo(l+u,c+d,l+u-_,c+d),o==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(l+v,c+d),t.quadraticCurveTo(l,c+d,l,c+d-v),o==="center"&&a==="left"&&this.drawCaret(e,t,i,s),t.lineTo(l,c+f),t.quadraticCurveTo(l,c,l+f,c),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const o=ja[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=iv(this,e),c=Object.assign({},o,this._size),u=rv(t,e,c),d=sv(e,c,u,t);(s._to!==d.x||a._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ns(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(a,e,s,t),Lk(e,t.textDirection),a.y+=o.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),Nk(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),a=!yl(i,s),o=this._positionChanged(s,t);(a||o)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],o=this._getActiveElements(e,a,t,i),l=this._positionChanged(o,e),c=t||!yl(o,a)||l;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,i,s){const a=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,a.mode,a,i);return a.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:s,options:a}=this,o=ja[a.position].call(this,e,t);return o!==!1&&(i!==o.x||s!==o.y)}}var ZS={id:"tooltip",_element:lv,positioners:ja,afterInit(n,e,t){t&&(n.tooltip=new lv({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function GS(n,e){const t=[],{bounds:s,step:a,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:h}=n,v=a||1,_=d-1,{min:p,max:m}=e,w=!tn(o),k=!tn(l),$=!tn(u),D=(m-p)/(f+1);let I=oh((m-p)/_/v)*v,E,T,C,O;if(I<1e-14&&!w&&!k)return[{value:p},{value:m}];O=Math.ceil(m/I)-Math.floor(p/I),O>_&&(I=oh(O*I/_/v)*v),tn(c)||(E=Math.pow(10,c),I=Math.ceil(I*E)/E),s==="ticks"?(T=Math.floor(p/I)*I,C=Math.ceil(m/I)*I):(T=p,C=m),w&&k&&a&&$w((l-o)/a,I/1e3)?(O=Math.round(Math.min((l-o)/I,d)),I=(l-o)/O,T=o,C=l):$?(T=w?o:T,C=k?l:C,O=u-1,I=(C-T)/O):(O=(C-T)/I,ks(O,Math.round(O),I/1e3)?O=Math.round(O):O=Math.ceil(O));const P=Math.max(lh(I),lh(T));E=Math.pow(10,tn(c)?P:c),T=Math.round(T*E)/E,C=Math.round(C*E)/E;let N=0;for(w&&(h&&T!==o?(t.push({value:o}),T<o&&N++,ks(Math.round((T+N*I)*E)/E,o,cv(o,D,n))&&N++):T<o&&N++);N<O;++N){const R=Math.round((T+N*I)*E)/E;if(k&&R>l)break;t.push({value:R})}return k&&h&&C!==l?t.length&&ks(t[t.length-1].value,l,cv(l,D,n))?t[t.length-1].value=l:t.push({value:l}):(!k||C===l)&&t.push({value:C}),t}function cv(n,e,{horizontal:t,minRotation:i}){const s=bs(i),a=(t?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+n).length;return Math.min(e/a,o)}class XS extends ko{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return tn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:a}=this;const o=c=>s=t?s:c,l=c=>a=i?a:c;if(e){const c=ts(s),u=ts(a);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(s===a){let c=a===0?1:Math.abs(a*.05);l(a+c),e||o(s-c)}this.min=s,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,o=GS(s,a);return e.bounds==="ticks"&&Iw(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return fg(e,this.chart.options.locale,this.options.ticks.format)}}class QS extends XS{static id="linear";static defaults={ticks:{callback:hg.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Un(e)?e:0,this.max=Un(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=bs(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Zl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},oi=Object.keys(Zl);function uv(n,e){return n-e}function dv(n,e){if(tn(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:a}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Un(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(s&&(o=s==="week"&&(ro(a)||a===!0)?t.startOf(o,"isoWeek",a):t.startOf(o,s)),+o)}function fv(n,e,t,i){const s=oi.length;for(let a=oi.indexOf(n);a<s-1;++a){const o=Zl[oi[a]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=i)return oi[a]}return oi[s-1]}function eT(n,e,t,i,s){for(let a=oi.length-1;a>=oi.indexOf(t);a--){const o=oi[a];if(Zl[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return oi[t?oi.indexOf(t):0]}function tT(n){for(let e=oi.indexOf(n)+1,t=oi.length;e<t;++e)if(Zl[oi[e]].common)return oi[e]}function hv(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=Sd(t,e),a=t[i]>=e?t[i]:t[s];n[a]=!0}}function nT(n,e,t,i){const s=n._adapter,a=+s.startOf(e[0].value,i),o=e[e.length-1].value;let l,c;for(l=a;l<=o;l=+s.add(l,1,i))c=t[l],c>=0&&(e[c].major=!0);return e}function vv(n,e,t){const i=[],s={},a=e.length;let o,l;for(o=0;o<a;++o)l=e[o],s[l]=o,i.push({value:l,major:!1});return a===0||!t?i:nT(n,i,s,t)}class Eu extends ko{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new Ig._date(e.adapters.date);s.init(t),Wa(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:dv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:a,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(a=Math.max(a,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Un(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),a=Un(a)&&!isNaN(a)?a:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,o=this.max,l=Mw(s,a,o);return this._unit=t.unit||(i.autoSkip?fv(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):eT(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:tT(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),vv(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,a;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?i=a:i=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Ui(t,0,o),i=Ui(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,a=s.time,o=a.unit||fv(a.minUnit,t,i,this._getLabelCapacity(t)),l=Zt(s.ticks.stepSize,1),c=o==="week"?a.isoWeekday:!1,u=ro(c)||c===!0,d={};let f=t,h,v;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":o),e.diff(i,t,o)>1e5*l)throw new Error(t+" and "+i+" are too far apart with stepSize of "+l+" "+o);const _=s.ticks.source==="data"&&this.getDataTimestamps();for(h=f,v=0;h<i;h=+e.add(h,l,o),v++)hv(d,h,_);return(h===i||s.bounds==="ticks"||v===1)&&hv(d,h,_),Object.keys(d).sort(uv).map(p=>+p)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,a=this._unit,o=t||s[a];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,s){const a=this.options,o=a.ticks.callback;if(o)return Mt(o,[e,t,i],this);const l=a.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],f=u&&l[u],h=i[t],v=u&&f&&h&&h.major;return this._adapter.format(e,s||(v?f:d))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=bs(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:i*a+l*o,h:i*o+l*a}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,a=this._tickFormatFunction(e,0,vv(this,[e],this._majorUnit),s),o=this._getLabelSize(a),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(dv(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Lw(e.sort(uv))}}function Jo(n,e,t){let i=0,s=n.length-1,a,o,l,c;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=ys(n,"pos",e)),{pos:a,time:l}=n[i],{pos:o,time:c}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=ys(n,"time",e)),{time:a,pos:l}=n[i],{time:o,pos:c}=n[s]);const u=o-a;return u?l+(c-l)*(e-a)/u:l}class Y4 extends Eu{static id="timeseries";static defaults=Eu.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Jo(t,this.min),this._tableRange=Jo(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],a=[];let o,l,c,u,d;for(o=0,l=e.length;o<l;++o)u=e[o],u>=t&&u<=i&&s.push(u);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,l=s.length;o<l;++o)d=s[o+1],c=s[o-1],u=s[o],Math.round((d+c)/2)!==u&&a.push({time:u,pos:o/(l-1)});return a}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,a)=>s-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Jo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Jo(this._table,i*this._tableRange+this._minPos,!0)}}const iT={datetime:$t.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:$t.TIME_WITH_SECONDS,minute:$t.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};Ig._date.override({_id:"luxon",_create:function(n){return $t.fromMillis(n,this.options)},init(n){this.options.locale||(this.options.locale=n.locale)},formats:function(){return iT},parse:function(n,e){const t=this.options,i=typeof n;return n===null||i==="undefined"?null:(i==="number"?n=this._create(n):i==="string"?typeof e=="string"?n=$t.fromFormat(n,e,t):n=$t.fromISO(n,t):n instanceof Date?n=$t.fromJSDate(n,t):i==="object"&&!(n instanceof $t)&&(n=$t.fromObject(n,t)),n.isValid?n.valueOf():null)},format:function(n,e){const t=this._create(n);return typeof e=="string"?t.toFormat(e):t.toLocaleString(e)},add:function(n,e,t){const i={};return i[t]=e,this._create(n).plus(i).valueOf()},diff:function(n,e,t){return this._create(n).diff(this._create(e)).as(t).valueOf()},startOf:function(n,e,t){if(e==="isoWeek"){t=Math.trunc(Math.min(Math.max(0,t),6));const i=this._create(n);return i.minus({days:(i.weekday-t+7)%7}).startOf("day").valueOf()}return e?this._create(n).startOf(e).valueOf():n},endOf:function(n,e){return this._create(n).endOf(e).valueOf()}});function rT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Mc={exports:{}};var pv;function sT(){return pv||(pv=1,(function(n){(function(e,t,i,s){var a=["","webkit","Moz","MS","ms","o"],o=t.createElement("div"),l="function",c=Math.round,u=Math.abs,d=Date.now;function f(Z,X,fe){return setTimeout($(Z,fe),X)}function h(Z,X,fe){return Array.isArray(Z)?(v(Z,fe[X],fe),!0):!1}function v(Z,X,fe){var Pe;if(Z)if(Z.forEach)Z.forEach(X,fe);else if(Z.length!==s)for(Pe=0;Pe<Z.length;)X.call(fe,Z[Pe],Pe,Z),Pe++;else for(Pe in Z)Z.hasOwnProperty(Pe)&&X.call(fe,Z[Pe],Pe,Z)}function _(Z,X,fe){var Pe="DEPRECATED METHOD: "+X+`
`+fe+` AT 
`;return function(){var it=new Error("get-stack-trace"),St=it&&it.stack?it.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",qt=e.console&&(e.console.warn||e.console.log);return qt&&qt.call(e.console,Pe,St),Z.apply(this,arguments)}}var p;typeof Object.assign!="function"?p=function(X){if(X===s||X===null)throw new TypeError("Cannot convert undefined or null to object");for(var fe=Object(X),Pe=1;Pe<arguments.length;Pe++){var it=arguments[Pe];if(it!==s&&it!==null)for(var St in it)it.hasOwnProperty(St)&&(fe[St]=it[St])}return fe}:p=Object.assign;var m=_(function(X,fe,Pe){for(var it=Object.keys(fe),St=0;St<it.length;)(!Pe||Pe&&X[it[St]]===s)&&(X[it[St]]=fe[it[St]]),St++;return X},"extend","Use `assign`."),w=_(function(X,fe){return m(X,fe,!0)},"merge","Use `assign`.");function k(Z,X,fe){var Pe=X.prototype,it;it=Z.prototype=Object.create(Pe),it.constructor=Z,it._super=Pe,fe&&p(it,fe)}function $(Z,X){return function(){return Z.apply(X,arguments)}}function D(Z,X){return typeof Z==l?Z.apply(X&&X[0]||s,X):Z}function I(Z,X){return Z===s?X:Z}function E(Z,X,fe){v(P(X),function(Pe){Z.addEventListener(Pe,fe,!1)})}function T(Z,X,fe){v(P(X),function(Pe){Z.removeEventListener(Pe,fe,!1)})}function C(Z,X){for(;Z;){if(Z==X)return!0;Z=Z.parentNode}return!1}function O(Z,X){return Z.indexOf(X)>-1}function P(Z){return Z.trim().split(/\s+/g)}function N(Z,X,fe){if(Z.indexOf&&!fe)return Z.indexOf(X);for(var Pe=0;Pe<Z.length;){if(fe&&Z[Pe][fe]==X||!fe&&Z[Pe]===X)return Pe;Pe++}return-1}function R(Z){return Array.prototype.slice.call(Z,0)}function q(Z,X,fe){for(var Pe=[],it=[],St=0;St<Z.length;){var qt=Z[St][X];N(it,qt)<0&&Pe.push(Z[St]),it[St]=qt,St++}return Pe=Pe.sort(function(En,Hn){return En[X]>Hn[X]}),Pe}function B(Z,X){for(var fe,Pe,it=X[0].toUpperCase()+X.slice(1),St=0;St<a.length;){if(fe=a[St],Pe=fe?fe+it:X,Pe in Z)return Pe;St++}return s}var Y=1;function z(){return Y++}function K(Z){var X=Z.ownerDocument||Z;return X.defaultView||X.parentWindow||e}var U=/mobile|tablet|ip(ad|hone|od)|android/i,J="ontouchstart"in e,se=B(e,"PointerEvent")!==s,le=J&&U.test(navigator.userAgent),ce="touch",ve="pen",be="mouse",he="kinect",xe=25,Te=1,pe=2,ue=4,we=8,ke=1,ae=2,_e=4,oe=8,me=16,Q=ae|_e,ye=oe|me,Ee=Q|ye,Ae=["x","y"],Ne=["clientX","clientY"];function je(Z,X){var fe=this;this.manager=Z,this.callback=X,this.element=Z.element,this.target=Z.options.inputTarget,this.domHandler=function(Pe){D(Z.options.enable,[Z])&&fe.handler(Pe)},this.init()}je.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(K(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(K(this.element),this.evWin,this.domHandler)}};function He(Z){var X,fe=Z.options.inputClass;return fe?X=fe:se?X=Oe:le?X=at:J?X=Lt:X=tt,new X(Z,dt)}function dt(Z,X,fe){var Pe=fe.pointers.length,it=fe.changedPointers.length,St=X&Te&&Pe-it===0,qt=X&(ue|we)&&Pe-it===0;fe.isFirst=!!St,fe.isFinal=!!qt,St&&(Z.session={}),fe.eventType=X,$e(Z,fe),Z.emit("hammer.input",fe),Z.recognize(fe),Z.session.prevInput=fe}function $e(Z,X){var fe=Z.session,Pe=X.pointers,it=Pe.length;fe.firstInput||(fe.firstInput=Je(X)),it>1&&!fe.firstMultiple?fe.firstMultiple=Je(X):it===1&&(fe.firstMultiple=!1);var St=fe.firstInput,qt=fe.firstMultiple,Sn=qt?qt.center:St.center,En=X.center=st(Pe);X.timeStamp=d(),X.deltaTime=X.timeStamp-St.timeStamp,X.angle=Le(Sn,En),X.distance=qe(Sn,En),Be(fe,X),X.offsetDirection=Ke(X.deltaX,X.deltaY);var Hn=Ye(X.deltaTime,X.deltaX,X.deltaY);X.overallVelocityX=Hn.x,X.overallVelocityY=Hn.y,X.overallVelocity=u(Hn.x)>u(Hn.y)?Hn.x:Hn.y,X.scale=qt?et(qt.pointers,Pe):1,X.rotation=qt?Ve(qt.pointers,Pe):0,X.maxPointers=fe.prevInput?X.pointers.length>fe.prevInput.maxPointers?X.pointers.length:fe.prevInput.maxPointers:X.pointers.length,Ze(fe,X);var Ji=Z.element;C(X.srcEvent.target,Ji)&&(Ji=X.srcEvent.target),X.target=Ji}function Be(Z,X){var fe=X.center,Pe=Z.offsetDelta||{},it=Z.prevDelta||{},St=Z.prevInput||{};(X.eventType===Te||St.eventType===ue)&&(it=Z.prevDelta={x:St.deltaX||0,y:St.deltaY||0},Pe=Z.offsetDelta={x:fe.x,y:fe.y}),X.deltaX=it.x+(fe.x-Pe.x),X.deltaY=it.y+(fe.y-Pe.y)}function Ze(Z,X){var fe=Z.lastInterval||X,Pe=X.timeStamp-fe.timeStamp,it,St,qt,Sn;if(X.eventType!=we&&(Pe>xe||fe.velocity===s)){var En=X.deltaX-fe.deltaX,Hn=X.deltaY-fe.deltaY,Ji=Ye(Pe,En,Hn);St=Ji.x,qt=Ji.y,it=u(Ji.x)>u(Ji.y)?Ji.x:Ji.y,Sn=Ke(En,Hn),Z.lastInterval=X}else it=fe.velocity,St=fe.velocityX,qt=fe.velocityY,Sn=fe.direction;X.velocity=it,X.velocityX=St,X.velocityY=qt,X.direction=Sn}function Je(Z){for(var X=[],fe=0;fe<Z.pointers.length;)X[fe]={clientX:c(Z.pointers[fe].clientX),clientY:c(Z.pointers[fe].clientY)},fe++;return{timeStamp:d(),pointers:X,center:st(X),deltaX:Z.deltaX,deltaY:Z.deltaY}}function st(Z){var X=Z.length;if(X===1)return{x:c(Z[0].clientX),y:c(Z[0].clientY)};for(var fe=0,Pe=0,it=0;it<X;)fe+=Z[it].clientX,Pe+=Z[it].clientY,it++;return{x:c(fe/X),y:c(Pe/X)}}function Ye(Z,X,fe){return{x:X/Z||0,y:fe/Z||0}}function Ke(Z,X){return Z===X?ke:u(Z)>=u(X)?Z<0?ae:_e:X<0?oe:me}function qe(Z,X,fe){fe||(fe=Ae);var Pe=X[fe[0]]-Z[fe[0]],it=X[fe[1]]-Z[fe[1]];return Math.sqrt(Pe*Pe+it*it)}function Le(Z,X,fe){fe||(fe=Ae);var Pe=X[fe[0]]-Z[fe[0]],it=X[fe[1]]-Z[fe[1]];return Math.atan2(it,Pe)*180/Math.PI}function Ve(Z,X){return Le(X[1],X[0],Ne)+Le(Z[1],Z[0],Ne)}function et(Z,X){return qe(X[0],X[1],Ne)/qe(Z[0],Z[1],Ne)}var nt={mousedown:Te,mousemove:pe,mouseup:ue},wt="mousedown",pt="mousemove mouseup";function tt(){this.evEl=wt,this.evWin=pt,this.pressed=!1,je.apply(this,arguments)}k(tt,je,{handler:function(X){var fe=nt[X.type];fe&Te&&X.button===0&&(this.pressed=!0),fe&pe&&X.which!==1&&(fe=ue),this.pressed&&(fe&ue&&(this.pressed=!1),this.callback(this.manager,fe,{pointers:[X],changedPointers:[X],pointerType:be,srcEvent:X}))}});var Ge={pointerdown:Te,pointermove:pe,pointerup:ue,pointercancel:we,pointerout:we},gt={2:ce,3:ve,4:be,5:he},vt="pointerdown",rt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(vt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel");function Oe(){this.evEl=vt,this.evWin=rt,je.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}k(Oe,je,{handler:function(X){var fe=this.store,Pe=!1,it=X.type.toLowerCase().replace("ms",""),St=Ge[it],qt=gt[X.pointerType]||X.pointerType,Sn=qt==ce,En=N(fe,X.pointerId,"pointerId");St&Te&&(X.button===0||Sn)?En<0&&(fe.push(X),En=fe.length-1):St&(ue|we)&&(Pe=!0),!(En<0)&&(fe[En]=X,this.callback(this.manager,St,{pointers:fe,changedPointers:[X],pointerType:qt,srcEvent:X}),Pe&&fe.splice(En,1))}});var H={touchstart:Te,touchmove:pe,touchend:ue,touchcancel:we},G="touchstart",de="touchstart touchmove touchend touchcancel";function ge(){this.evTarget=G,this.evWin=de,this.started=!1,je.apply(this,arguments)}k(ge,je,{handler:function(X){var fe=H[X.type];if(fe===Te&&(this.started=!0),!!this.started){var Pe=Ue.call(this,X,fe);fe&(ue|we)&&Pe[0].length-Pe[1].length===0&&(this.started=!1),this.callback(this.manager,fe,{pointers:Pe[0],changedPointers:Pe[1],pointerType:ce,srcEvent:X})}}});function Ue(Z,X){var fe=R(Z.touches),Pe=R(Z.changedTouches);return X&(ue|we)&&(fe=q(fe.concat(Pe),"identifier")),[fe,Pe]}var Xe={touchstart:Te,touchmove:pe,touchend:ue,touchcancel:we},Tt="touchstart touchmove touchend touchcancel";function at(){this.evTarget=Tt,this.targetIds={},je.apply(this,arguments)}k(at,je,{handler:function(X){var fe=Xe[X.type],Pe=_t.call(this,X,fe);Pe&&this.callback(this.manager,fe,{pointers:Pe[0],changedPointers:Pe[1],pointerType:ce,srcEvent:X})}});function _t(Z,X){var fe=R(Z.touches),Pe=this.targetIds;if(X&(Te|pe)&&fe.length===1)return Pe[fe[0].identifier]=!0,[fe,fe];var it,St,qt=R(Z.changedTouches),Sn=[],En=this.target;if(St=fe.filter(function(Hn){return C(Hn.target,En)}),X===Te)for(it=0;it<St.length;)Pe[St[it].identifier]=!0,it++;for(it=0;it<qt.length;)Pe[qt[it].identifier]&&Sn.push(qt[it]),X&(ue|we)&&delete Pe[qt[it].identifier],it++;if(Sn.length)return[q(St.concat(Sn),"identifier"),Sn]}var ut=2500,mt=25;function Lt(){je.apply(this,arguments);var Z=$(this.handler,this);this.touch=new at(this.manager,Z),this.mouse=new tt(this.manager,Z),this.primaryTouch=null,this.lastTouches=[]}k(Lt,je,{handler:function(X,fe,Pe){var it=Pe.pointerType==ce,St=Pe.pointerType==be;if(!(St&&Pe.sourceCapabilities&&Pe.sourceCapabilities.firesTouchEvents)){if(it)xn.call(this,fe,Pe);else if(St&&ui.call(this,Pe))return;this.callback(X,fe,Pe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function xn(Z,X){Z&Te?(this.primaryTouch=X.changedPointers[0].identifier,on.call(this,X)):Z&(ue|we)&&on.call(this,X)}function on(Z){var X=Z.changedPointers[0];if(X.identifier===this.primaryTouch){var fe={x:X.clientX,y:X.clientY};this.lastTouches.push(fe);var Pe=this.lastTouches,it=function(){var St=Pe.indexOf(fe);St>-1&&Pe.splice(St,1)};setTimeout(it,ut)}}function ui(Z){for(var X=Z.srcEvent.clientX,fe=Z.srcEvent.clientY,Pe=0;Pe<this.lastTouches.length;Pe++){var it=this.lastTouches[Pe],St=Math.abs(X-it.x),qt=Math.abs(fe-it.y);if(St<=mt&&qt<=mt)return!0}return!1}var It=B(o.style,"touchAction"),Rt=It!==s,gn="compute",Bn="auto",Or="manipulation",Xn="none",ur="pan-x",yi="pan-y",dr=Gl();function Dr(Z,X){this.manager=Z,this.set(X)}Dr.prototype={set:function(Z){Z==gn&&(Z=this.compute()),Rt&&this.manager.element.style&&dr[Z]&&(this.manager.element.style[It]=Z),this.actions=Z.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Z=[];return v(this.manager.recognizers,function(X){D(X.options.enable,[X])&&(Z=Z.concat(X.getTouchAction()))}),ka(Z.join(" "))},preventDefaults:function(Z){var X=Z.srcEvent,fe=Z.offsetDirection;if(this.manager.session.prevented){X.preventDefault();return}var Pe=this.actions,it=O(Pe,Xn)&&!dr[Xn],St=O(Pe,yi)&&!dr[yi],qt=O(Pe,ur)&&!dr[ur];if(it){var Sn=Z.pointers.length===1,En=Z.distance<2,Hn=Z.deltaTime<250;if(Sn&&En&&Hn)return}if(!(qt&&St)&&(it||St&&fe&Q||qt&&fe&ye))return this.preventSrc(X)},preventSrc:function(Z){this.manager.session.prevented=!0,Z.preventDefault()}};function ka(Z){if(O(Z,Xn))return Xn;var X=O(Z,ur),fe=O(Z,yi);return X&&fe?Xn:X||fe?X?ur:yi:O(Z,Or)?Or:Bn}function Gl(){if(!Rt)return!1;var Z={},X=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(fe){Z[fe]=X?e.CSS.supports("touch-action",fe):!0}),Z}var Rs=1,_i=2,Fs=4,Pr=8,fr=Pr,Sa=16,Ki=32;function hr(Z){this.options=p({},this.defaults,Z||{}),this.id=z(),this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=Rs,this.simultaneous={},this.requireFail=[]}hr.prototype={defaults:{},set:function(Z){return p(this.options,Z),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Z){if(h(Z,"recognizeWith",this))return this;var X=this.simultaneous;return Z=So(Z,this),X[Z.id]||(X[Z.id]=Z,Z.recognizeWith(this)),this},dropRecognizeWith:function(Z){return h(Z,"dropRecognizeWith",this)?this:(Z=So(Z,this),delete this.simultaneous[Z.id],this)},requireFailure:function(Z){if(h(Z,"requireFailure",this))return this;var X=this.requireFail;return Z=So(Z,this),N(X,Z)===-1&&(X.push(Z),Z.requireFailure(this)),this},dropRequireFailure:function(Z){if(h(Z,"dropRequireFailure",this))return this;Z=So(Z,this);var X=N(this.requireFail,Z);return X>-1&&this.requireFail.splice(X,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Z){return!!this.simultaneous[Z.id]},emit:function(Z){var X=this,fe=this.state;function Pe(it){X.manager.emit(it,Z)}fe<Pr&&Pe(X.options.event+jd(fe)),Pe(X.options.event),Z.additionalEvent&&Pe(Z.additionalEvent),fe>=Pr&&Pe(X.options.event+jd(fe))},tryEmit:function(Z){if(this.canEmit())return this.emit(Z);this.state=Ki},canEmit:function(){for(var Z=0;Z<this.requireFail.length;){if(!(this.requireFail[Z].state&(Ki|Rs)))return!1;Z++}return!0},recognize:function(Z){var X=p({},Z);if(!D(this.options.enable,[this,X])){this.reset(),this.state=Ki;return}this.state&(fr|Sa|Ki)&&(this.state=Rs),this.state=this.process(X),this.state&(_i|Fs|Pr|Sa)&&this.tryEmit(X)},process:function(Z){},getTouchAction:function(){},reset:function(){}};function jd(Z){return Z&Sa?"cancel":Z&Pr?"end":Z&Fs?"move":Z&_i?"start":""}function Ud(Z){return Z==me?"down":Z==oe?"up":Z==ae?"left":Z==_e?"right":""}function So(Z,X){var fe=X.manager;return fe?fe.get(Z):Z}function Ai(){hr.apply(this,arguments)}k(Ai,hr,{defaults:{pointers:1},attrTest:function(Z){var X=this.options.pointers;return X===0||Z.pointers.length===X},process:function(Z){var X=this.state,fe=Z.eventType,Pe=X&(_i|Fs),it=this.attrTest(Z);return Pe&&(fe&we||!it)?X|Sa:Pe||it?fe&ue?X|Pr:X&_i?X|Fs:_i:Ki}});function To(){Ai.apply(this,arguments),this.pX=null,this.pY=null}k(To,Ai,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ee},getTouchAction:function(){var Z=this.options.direction,X=[];return Z&Q&&X.push(yi),Z&ye&&X.push(ur),X},directionTest:function(Z){var X=this.options,fe=!0,Pe=Z.distance,it=Z.direction,St=Z.deltaX,qt=Z.deltaY;return it&X.direction||(X.direction&Q?(it=St===0?ke:St<0?ae:_e,fe=St!=this.pX,Pe=Math.abs(Z.deltaX)):(it=qt===0?ke:qt<0?oe:me,fe=qt!=this.pY,Pe=Math.abs(Z.deltaY))),Z.direction=it,fe&&Pe>X.threshold&&it&X.direction},attrTest:function(Z){return Ai.prototype.attrTest.call(this,Z)&&(this.state&_i||!(this.state&_i)&&this.directionTest(Z))},emit:function(Z){this.pX=Z.deltaX,this.pY=Z.deltaY;var X=Ud(Z.direction);X&&(Z.additionalEvent=this.options.event+X),this._super.emit.call(this,Z)}});function Xl(){Ai.apply(this,arguments)}k(Xl,Ai,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Xn]},attrTest:function(Z){return this._super.attrTest.call(this,Z)&&(Math.abs(Z.scale-1)>this.options.threshold||this.state&_i)},emit:function(Z){if(Z.scale!==1){var X=Z.scale<1?"in":"out";Z.additionalEvent=this.options.event+X}this._super.emit.call(this,Z)}});function Ql(){hr.apply(this,arguments),this._timer=null,this._input=null}k(Ql,hr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Bn]},process:function(Z){var X=this.options,fe=Z.pointers.length===X.pointers,Pe=Z.distance<X.threshold,it=Z.deltaTime>X.time;if(this._input=Z,!Pe||!fe||Z.eventType&(ue|we)&&!it)this.reset();else if(Z.eventType&Te)this.reset(),this._timer=f(function(){this.state=fr,this.tryEmit()},X.time,this);else if(Z.eventType&ue)return fr;return Ki},reset:function(){clearTimeout(this._timer)},emit:function(Z){this.state===fr&&(Z&&Z.eventType&ue?this.manager.emit(this.options.event+"up",Z):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}});function ec(){Ai.apply(this,arguments)}k(ec,Ai,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Xn]},attrTest:function(Z){return this._super.attrTest.call(this,Z)&&(Math.abs(Z.rotation)>this.options.threshold||this.state&_i)}});function tc(){Ai.apply(this,arguments)}k(tc,Ai,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Q|ye,pointers:1},getTouchAction:function(){return To.prototype.getTouchAction.call(this)},attrTest:function(Z){var X=this.options.direction,fe;return X&(Q|ye)?fe=Z.overallVelocity:X&Q?fe=Z.overallVelocityX:X&ye&&(fe=Z.overallVelocityY),this._super.attrTest.call(this,Z)&&X&Z.offsetDirection&&Z.distance>this.options.threshold&&Z.maxPointers==this.options.pointers&&u(fe)>this.options.velocity&&Z.eventType&ue},emit:function(Z){var X=Ud(Z.offsetDirection);X&&this.manager.emit(this.options.event+X,Z),this.manager.emit(this.options.event,Z)}});function $o(){hr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}k($o,hr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Or]},process:function(Z){var X=this.options,fe=Z.pointers.length===X.pointers,Pe=Z.distance<X.threshold,it=Z.deltaTime<X.time;if(this.reset(),Z.eventType&Te&&this.count===0)return this.failTimeout();if(Pe&&it&&fe){if(Z.eventType!=ue)return this.failTimeout();var St=this.pTime?Z.timeStamp-this.pTime<X.interval:!0,qt=!this.pCenter||qe(this.pCenter,Z.center)<X.posThreshold;this.pTime=Z.timeStamp,this.pCenter=Z.center,!qt||!St?this.count=1:this.count+=1,this._input=Z;var Sn=this.count%X.taps;if(Sn===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=fr,this.tryEmit()},X.interval,this),_i):fr}return Ki},failTimeout:function(){return this._timer=f(function(){this.state=Ki},this.options.interval,this),Ki},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==fr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Mr(Z,X){return X=X||{},X.recognizers=I(X.recognizers,Mr.defaults.preset),new nc(Z,X)}Mr.VERSION="2.0.7",Mr.defaults={domEvents:!1,touchAction:gn,enable:!0,inputTarget:null,inputClass:null,preset:[[ec,{enable:!1}],[Xl,{enable:!1},["rotate"]],[tc,{direction:Q}],[To,{direction:Q},["swipe"]],[$o],[$o,{event:"doubletap",taps:2},["tap"]],[Ql]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,Vd=2;function nc(Z,X){this.options=p({},Mr.defaults,X||{}),this.options.inputTarget=this.options.inputTarget||Z,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Z,this.input=He(this),this.touchAction=new Dr(this,this.options.touchAction),Bd(this,!0),v(this.options.recognizers,function(fe){var Pe=this.add(new fe[0](fe[1]));fe[2]&&Pe.recognizeWith(fe[2]),fe[3]&&Pe.requireFailure(fe[3])},this)}nc.prototype={set:function(Z){return p(this.options,Z),Z.touchAction&&this.touchAction.update(),Z.inputTarget&&(this.input.destroy(),this.input.target=Z.inputTarget,this.input.init()),this},stop:function(Z){this.session.stopped=Z?Vd:ub},recognize:function(Z){var X=this.session;if(!X.stopped){this.touchAction.preventDefaults(Z);var fe,Pe=this.recognizers,it=X.curRecognizer;(!it||it&&it.state&fr)&&(it=X.curRecognizer=null);for(var St=0;St<Pe.length;)fe=Pe[St],X.stopped!==Vd&&(!it||fe==it||fe.canRecognizeWith(it))?fe.recognize(Z):fe.reset(),!it&&fe.state&(_i|Fs|Pr)&&(it=X.curRecognizer=fe),St++}},get:function(Z){if(Z instanceof hr)return Z;for(var X=this.recognizers,fe=0;fe<X.length;fe++)if(X[fe].options.event==Z)return X[fe];return null},add:function(Z){if(h(Z,"add",this))return this;var X=this.get(Z.options.event);return X&&this.remove(X),this.recognizers.push(Z),Z.manager=this,this.touchAction.update(),Z},remove:function(Z){if(h(Z,"remove",this))return this;if(Z=this.get(Z),Z){var X=this.recognizers,fe=N(X,Z);fe!==-1&&(X.splice(fe,1),this.touchAction.update())}return this},on:function(Z,X){if(Z!==s&&X!==s){var fe=this.handlers;return v(P(Z),function(Pe){fe[Pe]=fe[Pe]||[],fe[Pe].push(X)}),this}},off:function(Z,X){if(Z!==s){var fe=this.handlers;return v(P(Z),function(Pe){X?fe[Pe]&&fe[Pe].splice(N(fe[Pe],X),1):delete fe[Pe]}),this}},emit:function(Z,X){this.options.domEvents&&db(Z,X);var fe=this.handlers[Z]&&this.handlers[Z].slice();if(!(!fe||!fe.length)){X.type=Z,X.preventDefault=function(){X.srcEvent.preventDefault()};for(var Pe=0;Pe<fe.length;)fe[Pe](X),Pe++}},destroy:function(){this.element&&Bd(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Bd(Z,X){var fe=Z.element;if(fe.style){var Pe;v(Z.options.cssProps,function(it,St){Pe=B(fe.style,St),X?(Z.oldCssProps[Pe]=fe.style[Pe],fe.style[Pe]=it):fe.style[Pe]=Z.oldCssProps[Pe]||""}),X||(Z.oldCssProps={})}}function db(Z,X){var fe=t.createEvent("Event");fe.initEvent(Z,!0,!0),fe.gesture=X,X.target.dispatchEvent(fe)}p(Mr,{INPUT_START:Te,INPUT_MOVE:pe,INPUT_END:ue,INPUT_CANCEL:we,STATE_POSSIBLE:Rs,STATE_BEGAN:_i,STATE_CHANGED:Fs,STATE_ENDED:Pr,STATE_RECOGNIZED:fr,STATE_CANCELLED:Sa,STATE_FAILED:Ki,DIRECTION_NONE:ke,DIRECTION_LEFT:ae,DIRECTION_RIGHT:_e,DIRECTION_UP:oe,DIRECTION_DOWN:me,DIRECTION_HORIZONTAL:Q,DIRECTION_VERTICAL:ye,DIRECTION_ALL:Ee,Manager:nc,Input:je,TouchAction:Dr,TouchInput:at,MouseInput:tt,PointerEventInput:Oe,TouchMouseInput:Lt,SingleTouchInput:ge,Recognizer:hr,AttrRecognizer:Ai,Tap:$o,Pan:To,Swipe:tc,Pinch:Xl,Rotate:ec,Press:Ql,on:E,off:T,each:v,merge:w,extend:m,assign:p,inherit:k,bindFn:$,prefixed:B});var fb=typeof e<"u"?e:typeof self<"u"?self:{};fb.Hammer=Mr,n.exports?n.exports=Mr:e[i]=Mr})(window,document,"Hammer")})(Mc)),Mc.exports}var aT=sT();const Ja=rT(aT);const ao=n=>n&&n.enabled&&n.modifierKey,Ug=(n,e)=>n&&e[n+"Key"],Ad=(n,e)=>n&&!e[n+"Key"];function is(n,e,t){return n===void 0?!0:typeof n=="string"?n.indexOf(e)!==-1:typeof n=="function"?n({chart:t}).indexOf(e)!==-1:!1}function Ac(n,e){return typeof n=="function"&&(n=n({chart:e})),typeof n=="string"?{x:n.indexOf("x")!==-1,y:n.indexOf("y")!==-1}:{x:!1,y:!1}}function oT(n,e){let t;return function(){return clearTimeout(t),t=setTimeout(n,e),e}}function lT({x:n,y:e},t){const i=t.scales,s=Object.keys(i);for(let a=0;a<s.length;a++){const o=i[s[a]];if(e>=o.top&&e<=o.bottom&&n>=o.left&&n<=o.right)return o}return null}function Vg(n,e,t){const{mode:i="xy",scaleMode:s,overScaleMode:a}=n||{},o=lT(e,t),l=Ac(i,t),c=Ac(s,t);if(a){const d=Ac(a,t);for(const f of["x","y"])d[f]&&(c[f]=l[f],l[f]=!1)}if(o&&c[o.axis])return[o];const u=[];return zt(t.scales,function(d){l[d.axis]&&u.push(d)}),u}const Ou=new WeakMap;function an(n){let e=Ou.get(n);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},Ou.set(n,e)),e}function cT(n){Ou.delete(n)}function Bg(n,e,t,i){const s=Math.max(0,Math.min(1,(n-e)/t||0)),a=1-s;return{min:i*s,max:i*a}}function Hg(n,e){const t=n.isHorizontal()?e.x:e.y;return n.getValueForPixel(t)}function Wg(n,e,t){const i=n.max-n.min,s=i*(e-1),a=Hg(n,t);return Bg(a,n.min,i,s)}function uT(n,e,t){const i=Hg(n,t);if(i===void 0)return{min:n.min,max:n.max};const s=Math.log10(n.min),a=Math.log10(n.max),o=Math.log10(i),l=a-s,c=l*(e-1),u=Bg(o,s,l,c);return{min:Math.pow(10,s+u.min),max:Math.pow(10,a-u.max)}}function dT(n,e){return e&&(e[n.id]||e[n.axis])||{}}function mv(n,e,t,i,s){let a=t[i];if(a==="original"){const o=n.originalScaleLimits[e.id][i];a=Zt(o.options,o.scale)}return Zt(a,s)}function fT(n,e,t){const i=n.getValueForPixel(e),s=n.getValueForPixel(t);return{min:Math.min(i,s),max:Math.max(i,s)}}function hT(n,{min:e,max:t,minLimit:i,maxLimit:s},a){const o=(n-t+e)/2;e-=o,t+=o;const l=a.min.options??a.min.scale,c=a.max.options??a.max.scale,u=n/1e6;return ks(e,l,u)&&(e=l),ks(t,c,u)&&(t=c),e<i?(e=i,t=Math.min(i+n,s)):t>s&&(t=s,e=Math.max(s-n,i)),{min:e,max:t}}function Ls(n,{min:e,max:t},i,s=!1){const a=an(n.chart),{options:o}=n,l=dT(n,i),{minRange:c=0}=l,u=mv(a,n,l,"min",-1/0),d=mv(a,n,l,"max",1/0);if(s==="pan"&&(e<u||t>d))return!0;const f=n.max-n.min,h=s?Math.max(t-e,c):f;if(s&&h===c&&f<=c)return!0;const v=hT(h,{min:e,max:t,minLimit:u,maxLimit:d},a.originalScaleLimits[n.id]);return o.min=v.min,o.max=v.max,a.updatedScaleLimits[n.id]=v,n.parse(v.min)!==n.min||n.parse(v.max)!==n.max}function vT(n,e,t,i){const s=Wg(n,e,t),a={min:n.min+s.min,max:n.max-s.max};return Ls(n,a,i,!0)}function pT(n,e,t,i){const s=uT(n,e,t);return Ls(n,s,i,!0)}function mT(n,e,t,i){Ls(n,fT(n,e,t),i,!0)}const gv=n=>n===0||isNaN(n)?0:n<0?Math.min(Math.round(n),-1):Math.max(Math.round(n),1);function gT(n){const t=n.getLabels().length-1;n.min>0&&(n.min-=1),n.max<t&&(n.max+=1)}function bT(n,e,t,i){const s=Wg(n,e,t);n.min===n.max&&e<1&&gT(n);const a={min:n.min+gv(s.min),max:n.max-gv(s.max)};return Ls(n,a,i,!0)}function yT(n){return n.isHorizontal()?n.width:n.height}function _T(n,e,t){const s=n.getLabels().length-1;let{min:a,max:o}=n;const l=Math.max(o-a,1),c=Math.round(yT(n)/Math.max(l,10)),u=Math.round(Math.abs(e/c));let d;return e<-c?(o=Math.min(o+u,s),a=l===1?o:o-l,d=o===s):e>c&&(a=Math.max(0,a-u),o=l===1?a:a+l,d=a===0),Ls(n,{min:a,max:o},t)||d}const xT={second:500,minute:30*1e3,hour:1800*1e3,day:720*60*1e3,week:3.5*24*60*60*1e3,month:360*60*60*1e3,quarter:1440*60*60*1e3,year:4368*60*60*1e3};function Yg(n,e,t,i=!1){const{min:s,max:a,options:o}=n,l=o.time&&o.time.round,c=xT[l]||0,u=n.getValueForPixel(n.getPixelForValue(s+c)-e),d=n.getValueForPixel(n.getPixelForValue(a+c)-e);return isNaN(u)||isNaN(d)?!0:Ls(n,{min:u,max:d},t,i?"pan":!1)}function bv(n,e,t){return Yg(n,e,t,!0)}const Du={category:bT,default:vT,logarithmic:pT},Pu={default:mT},Mu={category:_T,default:Yg,logarithmic:bv,timeseries:bv};function wT(n,e,t){const{id:i,options:{min:s,max:a}}=n;if(!e[i]||!t[i])return!0;const o=t[i];return o.min!==s||o.max!==a}function yv(n,e){zt(n,(t,i)=>{e[i]||delete n[i]})}function wa(n,e){const{scales:t}=n,{originalScaleLimits:i,updatedScaleLimits:s}=e;return zt(t,function(a){wT(a,i,s)&&(i[a.id]={min:{scale:a.min,options:a.options.min},max:{scale:a.max,options:a.options.max}})}),yv(i,t),yv(s,t),i}function _v(n,e,t,i){const s=Du[n.type]||Du.default;Mt(s,[n,e,t,i])}function xv(n,e,t,i){const s=Pu[n.type]||Pu.default;Mt(s,[n,e,t,i])}function kT(n){const e=n.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Ld(n,e,t="none",i="api"){const{x:s=1,y:a=1,focalPoint:o=kT(n)}=typeof e=="number"?{x:e,y:e}:e,l=an(n),{options:{limits:c,zoom:u}}=l;wa(n,l);const d=s!==1,f=a!==1,h=Vg(u,o,n);zt(h||n.scales,function(v){v.isHorizontal()&&d?_v(v,s,o,c):!v.isHorizontal()&&f&&_v(v,a,o,c)}),n.update(t),Mt(u.onZoom,[{chart:n,trigger:i}])}function Kg(n,e,t,i="none",s="api"){const a=an(n),{options:{limits:o,zoom:l}}=a,{mode:c="xy"}=l;wa(n,a);const u=is(c,"x",n),d=is(c,"y",n);zt(n.scales,function(f){f.isHorizontal()&&u?xv(f,e.x,t.x,o):!f.isHorizontal()&&d&&xv(f,e.y,t.y,o)}),n.update(i),Mt(l.onZoom,[{chart:n,trigger:s}])}function ST(n,e,t,i="none",s="api"){const a=an(n);wa(n,a);const o=n.scales[e];Ls(o,t,void 0,!0),n.update(i),Mt(a.options.zoom?.onZoom,[{chart:n,trigger:s}])}function TT(n,e="default"){const t=an(n),i=wa(n,t);zt(n.scales,function(s){const a=s.options;i[s.id]?(a.min=i[s.id].min.options,a.max=i[s.id].max.options):(delete a.min,delete a.max),delete t.updatedScaleLimits[s.id]}),n.update(e),Mt(t.options.zoom.onZoomComplete,[{chart:n}])}function $T(n,e){const t=n.originalScaleLimits[e];if(!t)return;const{min:i,max:s}=t;return Zt(s.options,s.scale)-Zt(i.options,i.scale)}function IT(n){const e=an(n);let t=1,i=1;return zt(n.scales,function(s){const a=$T(e,s.id);if(a){const o=Math.round(a/(s.max-s.min)*100)/100;t=Math.min(t,o),i=Math.max(i,o)}}),t<1?t:i}function wv(n,e,t,i){const{panDelta:s}=i,a=s[n.id]||0;ts(a)===ts(e)&&(e+=a);const o=Mu[n.type]||Mu.default;Mt(o,[n,e,t])?s[n.id]=0:s[n.id]=e}function Jg(n,e,t,i="none"){const{x:s=0,y:a=0}=typeof e=="number"?{x:e,y:e}:e,o=an(n),{options:{pan:l,limits:c}}=o,{onPan:u}=l||{};wa(n,o);const d=s!==0,f=a!==0;zt(t||n.scales,function(h){h.isHorizontal()&&d?wv(h,s,c,o):!h.isHorizontal()&&f&&wv(h,a,c,o)}),n.update(i),Mt(u,[{chart:n}])}function Zg(n){const e=an(n);wa(n,e);const t={};for(const i of Object.keys(n.scales)){const{min:s,max:a}=e.originalScaleLimits[i]||{min:{},max:{}};t[i]={min:s.scale,max:a.scale}}return t}function CT(n){const e=an(n),t={};for(const i of Object.keys(n.scales))t[i]=e.updatedScaleLimits[i];return t}function ET(n){const e=Zg(n);for(const t of Object.keys(n.scales)){const{min:i,max:s}=e[t];if(i!==void 0&&n.scales[t].min!==i||s!==void 0&&n.scales[t].max!==s)return!0}return!1}function kv(n){const e=an(n);return e.panning||e.dragging}const Sv=(n,e,t)=>Math.min(t,Math.max(e,n));function si(n,e){const{handlers:t}=an(n),i=t[e];i&&i.target&&(i.target.removeEventListener(e,i),delete t[e])}function Za(n,e,t,i){const{handlers:s,options:a}=an(n),o=s[t];if(o&&o.target===e)return;si(n,t),s[t]=c=>i(n,c,a),s[t].target=e;const l=t==="wheel"?!1:void 0;e.addEventListener(t,s[t],{passive:l})}function OT(n,e){const t=an(n);t.dragStart&&(t.dragging=!0,t.dragEnd=e,n.update("none"))}function DT(n,e){const t=an(n);!t.dragStart||e.key!=="Escape"||(si(n,"keydown"),t.dragging=!1,t.dragStart=t.dragEnd=null,n.update("none"))}function Au(n,e){if(n.target!==e.canvas){const t=e.canvas.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}return tr(n,e)}function Gg(n,e,t){const{onZoomStart:i,onZoomRejected:s}=t;if(i){const a=Au(e,n);if(Mt(i,[{chart:n,event:e,point:a}])===!1)return Mt(s,[{chart:n,event:e}]),!1}}function PT(n,e){if(n.legend){const a=tr(e,n);if(ca(a,n.legend))return}const t=an(n),{pan:i,zoom:s={}}=t.options;if(e.button!==0||Ug(ao(i),e)||Ad(ao(s.drag),e))return Mt(s.onZoomRejected,[{chart:n,event:e}]);Gg(n,e,s)!==!1&&(t.dragStart=e,Za(n,n.canvas.ownerDocument,"mousemove",OT),Za(n,window.document,"keydown",DT))}function MT({begin:n,end:e},t){let i=e.x-n.x,s=e.y-n.y;const a=Math.abs(i/s);a>t?i=Math.sign(i)*Math.abs(s*t):a<t&&(s=Math.sign(s)*Math.abs(i/t)),e.x=n.x+i,e.y=n.y+s}function Tv(n,e,t,{min:i,max:s,prop:a}){n[i]=Sv(Math.min(t.begin[a],t.end[a]),e[i],e[s]),n[s]=Sv(Math.max(t.begin[a],t.end[a]),e[i],e[s])}function AT(n,e,t){const i={begin:Au(e.dragStart,n),end:Au(e.dragEnd,n)};if(t){const s=n.chartArea.width/n.chartArea.height;MT(i,s)}return i}function Xg(n,e,t,i){const s=is(e,"x",n),a=is(e,"y",n),{top:o,left:l,right:c,bottom:u,width:d,height:f}=n.chartArea,h={top:o,left:l,right:c,bottom:u},v=AT(n,t,i&&s&&a);s&&Tv(h,n.chartArea,v,{min:"left",max:"right",prop:"x"}),a&&Tv(h,n.chartArea,v,{min:"top",max:"bottom",prop:"y"});const _=h.right-h.left,p=h.bottom-h.top;return{...h,width:_,height:p,zoomX:s&&_?1+(d-_)/d:1,zoomY:a&&p?1+(f-p)/f:1}}function LT(n,e){const t=an(n);if(!t.dragStart)return;si(n,"mousemove");const{mode:i,onZoomComplete:s,drag:{threshold:a=0,maintainAspectRatio:o}}=t.options.zoom,l=Xg(n,i,{dragStart:t.dragStart,dragEnd:e},o),c=is(i,"x",n)?l.width:0,u=is(i,"y",n)?l.height:0,d=Math.sqrt(c*c+u*u);if(t.dragStart=t.dragEnd=null,d<=a){t.dragging=!1,n.update("none");return}Kg(n,{x:l.left,y:l.top},{x:l.right,y:l.bottom},"zoom","drag"),t.dragging=!1,t.filterNextClick=!0,Mt(s,[{chart:n}])}function NT(n,e,t){if(Ad(ao(t.wheel),e)){Mt(t.onZoomRejected,[{chart:n,event:e}]);return}if(Gg(n,e,t)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function RT(n,e){const{handlers:{onZoomComplete:t},options:{zoom:i}}=an(n);if(!NT(n,e,i))return;const s=e.target.getBoundingClientRect(),a=i.wheel.speed,o=e.deltaY>=0?2-1/(1-a):1+a,l={x:o,y:o,focalPoint:{x:e.clientX-s.left,y:e.clientY-s.top}};Ld(n,l,"zoom","wheel"),Mt(t,[{chart:n}])}function FT(n,e,t,i){t&&(an(n).handlers[e]=oT(()=>Mt(t,[{chart:n}]),i))}function qT(n,e){const t=n.canvas,{wheel:i,drag:s,onZoomComplete:a}=e.zoom;i.enabled?(Za(n,t,"wheel",RT),FT(n,"onZoomComplete",a,250)):si(n,"wheel"),s.enabled?(Za(n,t,"mousedown",PT),Za(n,t.ownerDocument,"mouseup",LT)):(si(n,"mousedown"),si(n,"mousemove"),si(n,"mouseup"),si(n,"keydown"))}function zT(n){si(n,"mousedown"),si(n,"mousemove"),si(n,"mouseup"),si(n,"wheel"),si(n,"click"),si(n,"keydown")}function jT(n,e){return function(t,i){const{pan:s,zoom:a={}}=e.options;if(!s||!s.enabled)return!1;const o=i&&i.srcEvent;return o&&!e.panning&&i.pointerType==="mouse"&&(Ad(ao(s),o)||Ug(ao(a.drag),o))?(Mt(s.onPanRejected,[{chart:n,event:i}]),!1):!0}}function UT(n,e){const t=Math.abs(n.clientX-e.clientX),i=Math.abs(n.clientY-e.clientY),s=t/i;let a,o;return s>.3&&s<1.7?a=o=!0:t>i?a=!0:o=!0,{x:a,y:o}}function Qg(n,e,t){if(e.scale){const{center:i,pointers:s}=t,a=1/e.scale*t.scale,o=t.target.getBoundingClientRect(),l=UT(s[0],s[1]),c=e.options.zoom.mode,u={x:l.x&&is(c,"x",n)?a:1,y:l.y&&is(c,"y",n)?a:1,focalPoint:{x:i.x-o.left,y:i.y-o.top}};Ld(n,u,"zoom","pinch"),e.scale=t.scale}}function VT(n,e,t){if(e.options.zoom.pinch.enabled){const i=tr(t,n);Mt(e.options.zoom.onZoomStart,[{chart:n,event:t,point:i}])===!1?(e.scale=null,Mt(e.options.zoom.onZoomRejected,[{chart:n,event:t}])):e.scale=1}}function BT(n,e,t){e.scale&&(Qg(n,e,t),e.scale=null,Mt(e.options.zoom.onZoomComplete,[{chart:n}]))}function eb(n,e,t){const i=e.delta;i&&(e.panning=!0,Jg(n,{x:t.deltaX-i.x,y:t.deltaY-i.y},e.panScales),e.delta={x:t.deltaX,y:t.deltaY})}function HT(n,e,t){const{enabled:i,onPanStart:s,onPanRejected:a}=e.options.pan;if(!i)return;const o=t.target.getBoundingClientRect(),l={x:t.center.x-o.left,y:t.center.y-o.top};if(Mt(s,[{chart:n,event:t,point:l}])===!1)return Mt(a,[{chart:n,event:t}]);e.panScales=Vg(e.options.pan,l,n),e.delta={x:0,y:0},eb(n,e,t)}function WT(n,e){e.delta=null,e.panning&&(e.panning=!1,e.filterNextClick=!0,Mt(e.options.pan.onPanComplete,[{chart:n}]))}const Lu=new WeakMap;function $v(n,e){const t=an(n),i=n.canvas,{pan:s,zoom:a}=e,o=new Ja.Manager(i);a&&a.pinch.enabled&&(o.add(new Ja.Pinch),o.on("pinchstart",l=>VT(n,t,l)),o.on("pinch",l=>Qg(n,t,l)),o.on("pinchend",l=>BT(n,t,l))),s&&s.enabled&&(o.add(new Ja.Pan({threshold:s.threshold,enable:jT(n,t)})),o.on("panstart",l=>HT(n,t,l)),o.on("panmove",l=>eb(n,t,l)),o.on("panend",()=>WT(n,t))),Lu.set(n,o)}function Iv(n){const e=Lu.get(n);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),Lu.delete(n))}function YT(n,e){const{pan:t,zoom:i}=n,{pan:s,zoom:a}=e;return i?.zoom?.pinch?.enabled!==a?.zoom?.pinch?.enabled||t?.enabled!==s?.enabled||t?.threshold!==s?.threshold}var KT="2.2.0";function Zo(n,e,t){const i=t.zoom.drag,{dragStart:s,dragEnd:a}=an(n);if(i.drawTime!==e||!a)return;const{left:o,top:l,width:c,height:u}=Xg(n,t.zoom.mode,{dragStart:s,dragEnd:a},i.maintainAspectRatio),d=n.ctx;d.save(),d.beginPath(),d.fillStyle=i.backgroundColor||"rgba(225,225,225,0.3)",d.fillRect(o,l,c,u),i.borderWidth>0&&(d.lineWidth=i.borderWidth,d.strokeStyle=i.borderColor||"rgba(225,225,225)",d.strokeRect(o,l,c,u)),d.restore()}var JT={id:"zoom",version:KT,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(n,e,t){const i=an(n);i.options=t,Object.prototype.hasOwnProperty.call(t.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(t.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(t.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),Ja&&$v(n,t),n.pan=(s,a,o)=>Jg(n,s,a,o),n.zoom=(s,a)=>Ld(n,s,a),n.zoomRect=(s,a,o)=>Kg(n,s,a,o),n.zoomScale=(s,a,o)=>ST(n,s,a,o),n.resetZoom=s=>TT(n,s),n.getZoomLevel=()=>IT(n),n.getInitialScaleBounds=()=>Zg(n),n.getZoomedScaleBounds=()=>CT(n),n.isZoomedOrPanned=()=>ET(n),n.isZoomingOrPanning=()=>kv(n)},beforeEvent(n,{event:e}){if(kv(n))return!1;if(e.type==="click"||e.type==="mouseup"){const t=an(n);if(t.filterNextClick)return t.filterNextClick=!1,!1}},beforeUpdate:function(n,e,t){const i=an(n),s=i.options;i.options=t,YT(s,t)&&(Iv(n),$v(n,t)),qT(n,t)},beforeDatasetsDraw(n,e,t){Zo(n,"beforeDatasetsDraw",t)},afterDatasetsDraw(n,e,t){Zo(n,"afterDatasetsDraw",t)},beforeDraw(n,e,t){Zo(n,"beforeDraw",t)},afterDraw(n,e,t){Zo(n,"afterDraw",t)},stop:function(n){zT(n),Ja&&Iv(n),cT(n)},panFunctions:Mu,zoomFunctions:Du,zoomRectFunctions:Pu},ZT=x('<div class="chart-loader loader svelte-yac6bn"></div>'),GT=x('<button type="button" class="btn btn-secondary btn-sm btn-chart-zoom svelte-yac6bn">Reset zoom</button>'),XT=x('<div><div> </div> <!> <canvas class="chart-canvas svelte-yac6bn"></canvas> <!></div>');function QT(n,e){Re(e,!1);let t=ee(e,"filter",8,""),i=ee(e,"zoom",28,()=>({})),s=ee(e,"presets",8,""),a=M(),o=M(),l=M([]),c=M(0),u=M(!1),d=M(!1);async function f(){y(u,!0);const O=[s(),F.normalizeLogsFilter(t())].filter(Boolean).map(P=>"("+P+")").join("&&");return De.logs.getStats({filter:O}).then(P=>{h(),P=F.toArray(P);for(let N of P)r(l).push({x:new Date(N.date),y:N.total}),y(c,r(c)+N.total)}).catch(P=>{P?.isAbort||(h(),console.warn(P),De.error(P,!O||P?.status!=400))}).finally(()=>{y(u,!1)})}function h(){y(l,[]),y(c,0)}function v(){r(o)?.resetZoom()}fn(()=>(ll.register(Kl,wS,r2,QS,Eu,US,ZS),ll.register(JT),y(o,new ll(r(a),{type:"line",data:{datasets:[{label:"Total requests",data:r(l),borderColor:"#e34562",pointBackgroundColor:"#e34562",backgroundColor:"rgb(239,69,101,0.05)",borderWidth:2,pointRadius:1,pointBorderWidth:0,fill:!0}]},options:{resizeDelay:250,maintainAspectRatio:!1,animation:!1,interaction:{intersect:!1,mode:"index"},scales:{y:{beginAtZero:!0,grid:{color:"#edf0f3"},border:{color:"#e4e9ec"},ticks:{precision:0,maxTicksLimit:4,autoSkip:!0,color:"#666f75"}},x:{type:"time",time:{unit:"hour",tooltipFormat:"DD h a"},grid:{color:O=>O.tick?.major?"#edf0f3":""},color:"#e4e9ec",ticks:{maxTicksLimit:15,autoSkip:!0,maxRotation:0,major:{enabled:!0},color:O=>O.tick?.major?"#16161a":"#666f75"}}},plugins:{legend:{display:!1},zoom:{enabled:!0,zoom:{mode:"x",pinch:{enabled:!0},drag:{enabled:!0,backgroundColor:"rgba(255, 99, 132, 0.2)",borderWidth:0,threshold:10},limits:{x:{minRange:1e8},y:{minRange:1e8}},onZoomComplete:({chart:O})=>{y(d,O.isZoomedOrPanned()),r(d)?(i(i().min=F.formatToUTCDate(O.scales.x.min,"yyyy-MM-dd HH")+":00:00.000Z",!0),i(i().max=F.formatToUTCDate(O.scales.x.max,"yyyy-MM-dd HH")+":59:59.999Z",!0)):(i().min||i().max)&&i({})}}}}}})),()=>r(o)?.destroy())),re(()=>(L(t()),L(s())),()=>{(typeof t()<"u"||typeof s()<"u")&&f()}),re(()=>(r(l),r(o)),()=>{typeof r(l)<"u"&&r(o)&&(ot(o,r(o).data.datasets[0].data=r(l)),r(o).update())}),lt();var _={load:f};ze();var p=XT();let m;var w=S(p);let k;var $=S(w),D=g(w,2);{var I=O=>{var P=ZT();Ot(3,P,()=>zn,()=>({duration:150})),b(O,P)};te(D,O=>{r(u)&&O(I)})}var E=g(D,2);ft(E,O=>y(a,O),()=>r(a));var T=g(E,2);{var C=O=>{var P=GT();ie("click",P,v),b(O,P)};te(T,O=>{r(d)&&O(C)})}return j(()=>{m=Me(p,1,"chart-wrapper svelte-yac6bn",null,m,{loading:r(u)}),k=Me(w,1,"total-logs entrance-right svelte-yac6bn",null,k,{hidden:r(u)}),Se($,`Found ${r(c)??""}
        ${r(c)==1?"log":"logs"}`)}),ie("dblclick",E,v),b(n,p),yt(e,"load",f),Fe(_)}var e$=x('<div><code class="svelte-110ul6k"><!></code></div>');function Nu(n,e){Re(e,!1);let t=ee(e,"content",8,""),i=ee(e,"language",8,"javascript"),s=ee(e,"class",8,""),a=M("");function o(d){return d=typeof d=="string"?d:"",d=Prism.plugins.NormalizeWhitespace.normalize(d,{"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0}),Prism.highlight(d,Prism.languages[i()]||Prism.languages.javascript,i())}re(()=>L(t()),()=>{typeof Prism<"u"&&t()&&y(a,o(t()))}),lt();var l=e$(),c=S(l),u=S(c);Uy(u,()=>r(a)),j(()=>Me(l,1,`code-wrapper prism-light ${s()??""}`,"svelte-110ul6k")),b(n,l),Fe()}var t$=x('<i tabindex="-1" role="button"></i>');function nr(n,e){Re(e,!1);let t=ee(e,"value",8,""),i=ee(e,"tooltip",8,"Copy"),s=ee(e,"idleClasses",8,"ri-file-copy-line txt-sm link-hint"),a=ee(e,"successClasses",8,"ri-check-line txt-sm txt-success"),o=ee(e,"successDuration",8,500),l=M();function c(){F.isEmpty(t())||(F.copyToClipboard(t()),clearTimeout(r(l)),y(l,setTimeout(()=>{clearTimeout(r(l)),y(l,null)},o())))}fn(()=>()=>{r(l)&&clearTimeout(r(l))}),ze();var u=t$();W(u,"aria-label","Copy to clipboard"),We(u,(d,f)=>ct?.(d,f),()=>r(l)?void 0:i()),Ft(()=>ie("click",u,hn(c))),j(()=>Me(u,1,In(r(l)?a():s()))),b(n,u),Fe()}var n$=x('<div class="block txt-center"><span class="loader"></span></div>'),i$=x('<span class="txt"> </span> <div class="copy-icon-wrapper svelte-zosojj"><!></div>',1),r$=x('<span class="txt txt-hint">N/A</span>'),s$=x('<tr class="svelte-zosojj"><td class="min-width txt-hint txt-bold">message</td><td class="svelte-zosojj"><!></td></tr>'),a$=x('<span class="txt txt-hint">N/A</span>'),o$=x('<span class="label label-danger log-error-label svelte-zosojj"> </span>'),l$=x('<span class="txt"> </span>'),c$=x('<div class="copy-icon-wrapper svelte-zosojj"><!></div>'),u$=x('<tr class="svelte-zosojj"><td> </td><td class="svelte-zosojj"><!> <!></td></tr>'),d$=x('<table class="table-border svelte-zosojj"><tbody class="svelte-zosojj"><tr class="svelte-zosojj"><td class="min-width txt-hint txt-bold">id</td><td class="svelte-zosojj"><span class="txt"> </span> <div class="copy-icon-wrapper svelte-zosojj"><!></div></td></tr><tr class="svelte-zosojj"><td class="min-width txt-hint txt-bold">level</td><td class="svelte-zosojj"><!> <div class="copy-icon-wrapper svelte-zosojj"><!></div></td></tr><tr class="svelte-zosojj"><td class="min-width txt-hint txt-bold">created</td><td class="svelte-zosojj"><!> <div class="copy-icon-wrapper svelte-zosojj"><!></div></td></tr><!><!></tbody></table>'),f$=x("<h4>Log details</h4>"),h$=x('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button> <button type="button" class="btn btn-primary"><i class="ri-download-line"></i> <span class="txt">Download as JSON</span></button>',1);function v$(n,e){Re(e,!1);const t=M(),i="log_view",s=Ut();let a=M(),o=M({}),l=M(!1);function c(w){return d(w).then(k=>{y(o,k),_()}),r(a)?.show()}function u(){return De.cancelRequest(i),r(a)?.hide()}async function d(w){if(w&&typeof w!="string")return y(l,!1),w;y(l,!0);let k={};try{k=await De.logs.getOne(w,{requestKey:i})}catch($){$.isAbort||(u(),console.warn("resolveModel:",$),lr(`Unable to load log with id "${w}"`))}return y(l,!1),k}const f=["execTime","type","auth","authId","status","method","url","referer","remoteIP","userIP","userAgent","error","details"];function h(w){if(!w)return[];let k=[];for(let D of f)typeof w[D]<"u"&&k.push(D);const $=Object.keys(w);for(let D of $)k.includes(D)||k.push(D);return k}function v(){F.downloadJson(r(o),"log_"+r(o).created.replaceAll(/[-:\. ]/gi,"")+".json")}function _(){s("show",r(o))}function p(){s("hide",r(o)),y(o,{})}re(()=>r(o),()=>{y(t,r(o).data?.type=="request")}),lt();var m={show:c,hide:u};return ze(),ft(mn(n,{class:"overlay-panel-lg log-panel",$$events:{hide:p},children:(w,k)=>{var $=kt(),D=V($);{var I=T=>{var C=n$();b(T,C)},E=T=>{var C=d$(),O=S(C),P=S(O),N=g(S(P)),R=S(N),q=S(R),B=g(R,2),Y=S(B);nr(Y,{get value(){return r(o),A(()=>r(o).id)}});var z=g(P),K=g(S(z)),U=S(K);tg(U,{get level(){return r(o),A(()=>r(o).level)}});var J=g(U,2),se=S(J);nr(se,{get value(){return r(o),A(()=>r(o).level)}});var le=g(z),ce=g(S(le)),ve=S(ce);eg(ve,{get date(){return r(o),A(()=>r(o).created)}});var be=g(ve,2),he=S(be);nr(he,{get value(){return r(o),A(()=>r(o).created)}});var xe=g(le);{var Te=ue=>{var we=s$(),ke=g(S(we)),ae=S(ke);{var _e=me=>{var Q=i$(),ye=V(Q),Ee=S(ye),Ae=g(ye,2),Ne=S(Ae);nr(Ne,{get value(){return r(o),A(()=>r(o).message)}}),j(()=>Se(Ee,(r(o),A(()=>r(o).message)))),b(me,Q)},oe=me=>{var Q=r$();b(me,Q)};te(ae,me=>{r(o),A(()=>r(o).message)?me(_e):me(oe,!1)})}b(ue,we)};te(xe,ue=>{r(t)||ue(Te)})}var pe=g(xe);ht(pe,1,()=>(r(o),A(()=>h(r(o).data))),At,(ue,we)=>{const ke=ne(()=>(r(o),r(we),A(()=>r(o).data[r(we)]))),ae=ne(()=>(L(F),L(r(ke)),A(()=>F.isEmpty(r(ke))))),_e=ne(()=>!r(ae)&&r(ke)!==null&&typeof r(ke)=="object");var oe=u$(),me=S(oe);let Q;var ye=S(me),Ee=g(me),Ae=S(Ee);{var Ne=Je=>{var st=a$();b(Je,st)},je=Je=>{{let st=ne(()=>(L(r(ke)),A(()=>JSON.stringify(r(ke),null,2))));Nu(Je,{get content(){return r(st)}})}},He=Je=>{var st=o$(),Ye=S(st);j(()=>Se(Ye,r(ke))),b(Je,st)},dt=Je=>{Nu(Je,{get content(){return r(ke)},language:"html"})},$e=Je=>{var st=l$(),Ye=S(st);j(()=>Se(Ye,`${r(ke)??""}${r(t)&&r(we)=="execTime"?"ms":""}`)),b(Je,st)};te(Ae,Je=>{r(ae)?Je(Ne):r(_e)?Je(je,1):r(we)=="error"?Je(He,2):r(we)=="details"?Je(dt,3):Je($e,!1)})}var Be=g(Ae,2);{var Ze=Je=>{var st=c$(),Ye=S(st);nr(Ye,{get value(){return r(ke)}}),b(Je,st)};te(Be,Je=>{r(ae)||Je(Ze)})}j(()=>{Q=Me(me,1,"min-width txt-hint txt-bold",null,Q,{"v-align-top":r(_e)}),Se(ye,`data.${r(we)??""}`)}),b(ue,oe)}),j(()=>Se(q,(r(o),A(()=>r(o).id)))),b(T,C)};te(D,T=>{r(l)?T(I):(r(o),A(()=>r(o)?.id)&&T(E,1))})}b(w,$)},$$slots:{default:!0,header:(w,k)=>{var $=f$();b(w,$)},footer:(w,k)=>{var $=h$(),D=V($),I=g(D,2);j(()=>I.disabled=r(l)),ie("click",D,()=>u()),ie("click",I,()=>v()),b(w,$)}},$$legacy:!0}),w=>y(a,w),()=>r(a)),yt(e,"show",c),yt(e,"hide",u),Fe(m)}var p$=x('<code class="txt-xs"> </code>'),m$=x('<div>Default log levels: <div class="inline-flex flex-gap-5"></div></div>');function tb(n,e){let t=ee(e,"class",8,"");var i=m$(),s=g(S(i));ht(s,5,()=>jm,At,(a,o)=>{var l=p$(),c=S(l);j(()=>Se(c,`${r(o),A(()=>r(o).level)??""}:${r(o),A(()=>r(o).label)??""}`)),b(a,l)}),j(()=>Me(i,1,In(t()))),b(n,i)}var g$=x('<div class="block txt-center"><div class="loader"></div></div>'),b$=x('<label>Max days retention</label> <input type="number" required=""/> <div class="help-block">Set to <code>0</code> to disable logs persistence.</div>',1),y$=x('<label>Min log level</label> <input type="number" required="" min="-100" max="100"/> <div class="help-block"><p>Logs with level below the minimum will be ignored.</p> <!></div>',1),_$=x('<input type="checkbox"/> <label>Enable IP logging</label>',1),x$=x('<input type="checkbox"/> <label>Enable Auth Id logging</label>',1),w$=x('<form class="grid" autocomplete="off"><!> <!> <!> <!></form>'),k$=x("<h4>Logs settings</h4>"),S$=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Save changes</span></button>',1);function T$(n,e){Re(e,!1);const t=M(),i=M(),s=Ut(),a="logs_settings_"+F.randomString(3);let o=M(),l=M(!1),c=M(!1),u=M({}),d=M({});function f(){return v(),_(),r(o)?.show()}function h(){return r(o)?.hide()}function v(){sn(),y(u,{}),y(d,JSON.parse(JSON.stringify(r(u)||{})))}async function _(){y(c,!0);try{const k=await De.settings.getAll()||{};m(k)}catch(k){De.error(k)}y(c,!1)}async function p(){if(r(i)){y(l,!0);try{const k=await De.settings.update(F.filterRedactedProps(r(d)));m(k),y(l,!1),h(),vn("Successfully saved logs settings."),s("save",k)}catch(k){y(l,!1),De.error(k)}}}function m(k={}){y(d,{logs:k?.logs||{}}),y(u,JSON.parse(JSON.stringify(r(d))))}re(()=>r(u),()=>{y(t,JSON.stringify(r(u)))}),re(()=>(r(t),r(d)),()=>{y(i,r(t)!=JSON.stringify(r(d)))}),lt();var w={show:f,hide:h};return ze(),ft(mn(n,{popup:!0,class:"superuser-panel",beforeHide:()=>!r(l),$$events:{hide(k){Qe.call(this,e,k)},show(k){Qe.call(this,e,k)}},children:(k,$)=>{var D=kt(),I=V(D);{var E=C=>{var O=g$();b(C,O)},T=C=>{var O=w$(),P=S(O);Ce(P,{class:"form-field required",name:"logs.maxDays",children:Ie,$$slots:{default:(B,Y)=>{const z=ne(()=>Y.uniqueId);var K=b$(),U=V(K),J=g(U,2);j(()=>{W(U,"for",r(z)),W(J,"id",r(z))}),xt(J,()=>r(d).logs.maxDays,se=>ot(d,r(d).logs.maxDays=se)),b(B,K)}}});var N=g(P,2);Ce(N,{class:"form-field",name:"logs.minLevel",children:Ie,$$slots:{default:(B,Y)=>{const z=ne(()=>Y.uniqueId);var K=y$(),U=V(K),J=g(U,2),se=g(J,2),le=g(S(se),2);tb(le,{}),j(()=>W(U,"for",r(z))),xt(J,()=>r(d).logs.minLevel,ce=>ot(d,r(d).logs.minLevel=ce)),b(B,K)}}});var R=g(N,2);Ce(R,{class:"form-field form-field-toggle",name:"logs.logIP",children:Ie,$$slots:{default:(B,Y)=>{const z=ne(()=>Y.uniqueId);var K=_$(),U=V(K),J=g(U,2);j(()=>{W(U,"id",r(z)),W(J,"for",r(z))}),en(U,()=>r(d).logs.logIP,se=>ot(d,r(d).logs.logIP=se)),b(B,K)}}});var q=g(R,2);Ce(q,{class:"form-field form-field-toggle",name:"logs.logAuthId",children:Ie,$$slots:{default:(B,Y)=>{const z=ne(()=>Y.uniqueId);var K=x$(),U=V(K),J=g(U,2);j(()=>{W(U,"id",r(z)),W(J,"for",r(z))}),en(U,()=>r(d).logs.logAuthId,se=>ot(d,r(d).logs.logAuthId=se)),b(B,K)}}}),j(()=>W(O,"id",a)),ie("submit",O,Et(p)),b(C,O)};te(I,C=>{r(c)?C(E):C(T,!1)})}b(k,D)},$$slots:{default:!0,header:(k,$)=>{var D=k$();b(k,D)},footer:(k,$)=>{var D=S$(),I=V(D),E=g(I,2);let T;j(()=>{I.disabled=r(l),W(E,"form",a),T=Me(E,1,"btn btn-expanded",null,T,{"btn-loading":r(l)}),E.disabled=!r(i)||r(l)}),ie("click",I,h),b(k,D)}},$$legacy:!0}),k=>y(o,k),()=>r(o)),yt(e,"show",f),yt(e,"hide",h),Fe(w)}var $$=x('<input type="checkbox"/> <label>Include requests by superusers</label>',1),I$=x('<div class="page-header-wrapper m-b-0"><header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item"> </div></nav> <button type="button" aria-label="Logs settings" class="btn btn-transparent btn-circle"><i class="ri-settings-4-line"></i></button> <!> <div class="flex-fill"></div> <div class="inline-flex"><!></div></header> <!> <!> <!></div> <!>',1),C$=x("<!> <!> <!>",1);function E$(n,e){Re(e,!1);const t=()=>Ct(Cn,"$pageTitle",s),i=()=>Ct(bd,"$querystring",s),[s,a]=Nt(),o=M();Kn(Cn,"Logs");const l="logId",c="superuserRequests",u="superuserLogRequests",d=new URLSearchParams(i());let f=M(),h=M(),v=M(1),_=M(d.get("filter")||""),p=M({}),m=M((d.get(c)||window.localStorage?.getItem(u))<<0),w=M(r(m));function k(){wr(v)}function $(C={}){let O={};O.filter=r(_)||null,O[c]=r(m)<<0||null,F.replaceHashQueryParams(Object.assign(O,C))}re(()=>r(f),()=>{d.get(l)&&r(f)&&r(f).show(d.get(l))}),re(()=>r(m),()=>{y(o,r(m)?"":'data.auth!="_superusers"')}),re(()=>(r(w),r(m)),()=>{r(w)!=r(m)&&(y(w,r(m)),window.localStorage?.setItem(u,r(m)<<0),$())}),re(()=>r(_),()=>{typeof r(_)<"u"&&$()}),lt(),ze();var D=C$(),I=V(D);Ei(I,{children:(C,O)=>{var P=I$(),N=V(P),R=S(N),q=S(R),B=S(q),Y=S(B),z=g(q,2);We(z,(be,he)=>ct?.(be,he),()=>({text:"Logs settings",position:"right"})),Ft(()=>ie("click",z,()=>r(h)?.show()));var K=g(z,2);Hl(K,{$$events:{refresh:()=>k()}});var U=g(K,4),J=S(U);Ce(J,{class:"form-field form-field-toggle m-0",children:Ie,$$slots:{default:(be,he)=>{const xe=ne(()=>he.uniqueId);var Te=$$(),pe=V(Te),ue=g(pe,2);j(()=>{W(pe,"id",r(xe)),W(ue,"for",r(xe))}),en(pe,()=>r(m),we=>y(m,we)),b(be,Te)}}});var se=g(R,2);Bl(se,{get value(){return r(_)},placeholder:"Search term or filter like `level > 0 && data.auth = 'guest'`",extraAutocompleteKeys:["level","message","data."],$$events:{submit:be=>y(_,be.detail)}});var le=g(se,2);tb(le,{class:"block txt-sm txt-hint m-t-xs m-b-base"});var ce=g(le,2);Qd(ce,()=>r(v),be=>{QT(be,{get filter(){return r(_)},get presets(){return r(o)},get zoom(){return r(p)},set zoom(he){y(p,he)},$$legacy:!0})});var ve=g(N,2);Qd(ve,()=>r(v),be=>{W0(be,{get presets(){return r(o)},get filter(){return r(_)},set filter(he){y(_,he)},get zoom(){return r(p)},set zoom(he){y(p,he)},$$events:{select:he=>r(f)?.show(he?.detail)},$$legacy:!0})}),j(()=>Se(Y,t())),b(C,P)},$$slots:{default:!0}});var E=g(I,2);ft(v$(E,{$$events:{show:C=>{let O={};O[l]=C.detail?.id||null,F.replaceHashQueryParams(O)},hide:()=>{let C={};C[l]=null,F.replaceHashQueryParams(C)}},$$legacy:!0}),C=>y(f,C),()=>r(f));var T=g(E,2);ft(T$(T,{$$events:{save:k},$$legacy:!0}),C=>y(h,C),()=>r(h)),b(n,D),Fe(),a()}var O$=x('<hr class="m-t-sm m-b-sm"/>'),D$=x('<div class="sidebar-item disabled"> </div>'),P$=x('<button type="button"> </button>'),M$=x("<!> <!>",1),A$=x('<div class="docs-content-wrapper"><aside><nav class="sidebar-content"></nav></aside> <div class="docs-content"></div></div>'),L$=x('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button>');function N$(n,e){Re(e,!1);const t={list:{label:"List/Search",component:Wt(()=>import("./ListApiDocs-D7f_9Wpo.js"),__vite__mapDeps([2,3,4]),import.meta.url)},view:{label:"View",component:Wt(()=>import("./ViewApiDocs-CRvyHNgc.js"),__vite__mapDeps([5,3]),import.meta.url)},create:{label:"Create",component:Wt(()=>import("./CreateApiDocs-CxJi3rzZ.js"),__vite__mapDeps([6,3]),import.meta.url)},update:{label:"Update",component:Wt(()=>import("./UpdateApiDocs-Xg0NBQdn.js"),__vite__mapDeps([7,3]),import.meta.url)},delete:{label:"Delete",component:Wt(()=>import("./DeleteApiDocs-BdFk0W_V.js"),[],import.meta.url)},realtime:{label:"Realtime",component:Wt(()=>import("./RealtimeApiDocs-D8E3bpmp.js"),[],import.meta.url)},batch:{label:"Batch",component:Wt(()=>import("./BatchApiDocs-CEK1J351.js"),[],import.meta.url)}},i={"list-auth-methods":{label:"List auth methods",component:Wt(()=>import("./AuthMethodsDocs-5JRyrLZW.js"),__vite__mapDeps([8,3]),import.meta.url)},"auth-with-password":{label:"Auth with password",component:Wt(()=>import("./AuthWithPasswordDocs-eY-KrkHK.js"),__vite__mapDeps([9,3]),import.meta.url)},"auth-with-oauth2":{label:"Auth with OAuth2",component:Wt(()=>import("./AuthWithOAuth2Docs-B0j_25O8.js"),__vite__mapDeps([10,3]),import.meta.url)},"auth-with-otp":{label:"Auth with OTP",component:Wt(()=>import("./AuthWithOtpDocs-mLaStqgN.js"),__vite__mapDeps([11,3]),import.meta.url)},refresh:{label:"Auth refresh",component:Wt(()=>import("./AuthRefreshDocs-wFd7ThUy.js"),__vite__mapDeps([12,3]),import.meta.url)},verification:{label:"Verification",component:Wt(()=>import("./VerificationDocs-Bgjx67cd.js"),[],import.meta.url)},"password-reset":{label:"Password reset",component:Wt(()=>import("./PasswordResetDocs-CS_8uuM5.js"),[],import.meta.url)},"email-change":{label:"Email change",component:Wt(()=>import("./EmailChangeDocs-DgDnsiQn.js"),[],import.meta.url)}};let s=M(),a=M({}),o=M(),l=M([]);r(l).length&&y(o,Object.keys(r(l))[0]);function c(h){return y(a,h),d(Object.keys(r(l))[0]),r(s)?.show()}function u(){return r(s)?.hide()}function d(h){y(o,h)}re(()=>(r(a),r(l)),()=>{r(a).type==="auth"?(y(l,Object.assign({},t,i)),ot(l,r(l)["auth-with-password"].disabled=!r(a).passwordAuth.enabled),ot(l,r(l)["auth-with-oauth2"].disabled=!r(a).oauth2.enabled),ot(l,r(l)["auth-with-otp"].disabled=!r(a).otp.enabled)):r(a).type==="view"?(y(l,Object.assign({},t)),delete r(l).create,delete r(l).update,delete r(l).delete,delete r(l).realtime,delete r(l).batch):y(l,Object.assign({},t))}),lt();var f={show:c,hide:u,changeTab:d};return ze(),ft(mn(n,{class:"docs-panel",$$events:{hide(h){Qe.call(this,e,h)},show(h){Qe.call(this,e,h)}},children:(h,v)=>{var _=A$(),p=S(_);let m;var w=S(p);ht(w,7,()=>(r(l),A(()=>Object.entries(r(l)))),([$,D])=>$,($,D,I)=>{var E=rn(()=>Zs(r(D),2));let T=()=>r(E)[0],C=()=>r(E)[1];var O=M$(),P=V(O);{var N=z=>{var K=O$();b(z,K)},R=rn(()=>(L(r(I)),A(()=>r(I)===Object.keys(t).length)));te(P,z=>{r(R)&&z(N)})}var q=g(P,2);{var B=z=>{var K=D$(),U=S(K);We(K,(J,se)=>ct?.(J,se),()=>({position:"left",text:"Not enabled for the collection"})),j(()=>Se(U,(C(),A(()=>C().label)))),b(z,K)},Y=z=>{var K=P$();let U;var J=S(K);j(()=>{U=Me(K,1,"sidebar-item",null,U,{active:r(o)===T()}),Se(J,(C(),A(()=>C().label)))}),ie("click",K,()=>d(T())),b(z,K)};te(q,z=>{C(),A(()=>C().disabled)?z(B):z(Y,!1)})}b($,O)});var k=g(p,2);ht(k,5,()=>(r(l),A(()=>Object.entries(r(l)))),([$,D])=>$,($,D)=>{var I=rn(()=>Zs(r(D),2));let E=()=>r(I)[0],T=()=>r(I)[1];var C=kt(),O=V(C);{var P=N=>{var R=kt(),q=V(R);Ry(q,()=>(T(),A(()=>T().component)),null,(B,Y)=>{var z=ne(()=>{var{default:U}=r(Y);return{TabComponent:U}}),K=ne(()=>r(z).TabComponent);r(K)(B,{get collection(){return r(a)}})}),b(N,R)};te(O,N=>{r(o)===E()&&N(P)})}b($,C)}),j(()=>m=Me(p,1,"docs-sidebar",null,m,{compact:r(a)?.type==="auth"})),b(h,_)},$$slots:{default:!0,footer:(h,v)=>{var _=L$();ie("click",_,()=>u()),b(h,_)}},$$legacy:!0}),h=>y(s,h),()=>r(s)),yt(e,"show",c),yt(e,"hide",u),yt(e,"changeTab",d),Fe(f)}var R$=x('<div class="accordion-content"><!></div>'),F$=x('<div><button type="button"><!></button> <!></div>');function Er(n,e){Re(e,!1);const t=Ut();let i=M(),s=M(),a=ee(e,"class",8,""),o=ee(e,"draggable",8,!1),l=ee(e,"active",12,!1),c=ee(e,"interactive",8,!0),u=ee(e,"single",8,!1),d=M(!1);function f(){return!!l()}function h(){p(),l(!0),t("expand")}function v(){l(!1),clearTimeout(r(s)),t("collapse")}function _(){t("toggle"),l()?v():h()}function p(){if(u()&&r(i).closest(".accordions")){const C=r(i).closest(".accordions").querySelectorAll(".accordion.active .accordion-header.interactive");for(const O of C)O.click()}}fn(()=>()=>clearTimeout(r(s))),re(()=>(L(l()),r(s),r(i)),()=>{l()&&(clearTimeout(r(s)),y(s,setTimeout(()=>{r(i)?.scrollIntoViewIfNeeded?r(i).scrollIntoViewIfNeeded():r(i)?.scrollIntoView&&r(i).scrollIntoView({behavior:"smooth",block:"nearest"})},200)))}),lt();var m={isExpanded:f,expand:h,collapse:v,toggle:_,collapseSiblings:p};ze();var w=F$();let k;var $=S(w);let D;var I=S($);Qt(I,e,"header",{get active(){return l()}},null);var E=g($,2);{var T=C=>{var O=R$(),P=S(O);Qt(P,e,"default",{},null),Ot(3,O,()=>pn,()=>({delay:10,duration:150})),b(C,O)};te(E,C=>{l()&&C(T)})}return ft(w,C=>y(i,C),()=>r(i)),j(()=>{k=Me(w,1,`accordion ${r(d)?"drag-over":""} ${a()??""}`,null,k,{active:l()}),D=Me($,1,"accordion-header",null,D,{interactive:c()}),W($,"draggable",o()),W($,"aria-expanded",l())}),ie("click",$,Et(()=>c()&&_())),ie("drop",$,Et(C=>{o()&&(y(d,!1),p(),t("drop",C))})),ie("dragstart",$,C=>o()&&t("dragstart",C)),ie("dragenter",$,C=>{o()&&(y(d,!0),t("dragenter",C))}),ie("dragleave",$,C=>{o()&&(y(d,!1),t("dragleave",C))}),ie("dragover",$,Et(function(C){Qe.call(this,e,C)})),b(n,w),yt(e,"isExpanded",f),yt(e,"expand",h),yt(e,"collapse",v),yt(e,"toggle",_),yt(e,"collapseSiblings",p),Fe(m)}let Cv;var q$=x('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),z$=x('<div class="help-block">Available placeholder parameters: <!></div>'),j$=x('<label>Subject</label> <input type="text" spellcheck="false" required=""/> <!>',1),U$=x('<textarea class="txt-mono" spellcheck="false" rows="14" required=""></textarea>'),V$=x('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),B$=x('<div class="help-block">Available placeholder parameters: <!></div>'),H$=x("<label>Body (HTML)</label> <!> <!>",1),W$=x("<!> <!>",1),Y$=x('<i class="ri-error-warning-fill txt-danger"></i>'),K$=x('<div class="inline-flex"><i class="ri-draft-line"></i> <span class="txt"> </span></div> <div class="flex-fill"></div> <!>',1);function J$(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["expand","collapse","collapseSiblings","key","title","config","placeholders"]);Re(e,!1);const s=()=>Ct(Vn,"$errors",a),[a,o]=Nt(),l=M();let c=ee(e,"key",8),u=ee(e,"title",8),d=ee(e,"config",28,()=>({})),f=ee(e,"placeholders",24,()=>[]),h=M(),v=M(Cv),_=M(!1);function p(){r(h)?.expand()}function m(){r(h)?.collapse()}function w(){r(h)?.collapseSiblings()}async function k(){r(v)||r(_)||(y(_,!0),y(v,(await Wt(async()=>{const{default:E}=await import("./CodeEditor-UHXdE3Dc.js");return{default:E}},__vite__mapDeps([13,1]),import.meta.url)).default),Cv=r(v),y(_,!1))}function $(E){E=E.replace("*",""),F.copyToClipboard(E),oa(`Copied ${E} to clipboard`,2e3)}k(),re(()=>(s(),L(c())),()=>{y(l,!F.isEmpty(F.getNestedVal(s(),c())))}),re(()=>(L(d()),L(c())),()=>{d().enabled||Zn(c())}),lt();var D={expand:p,collapse:m,collapseSiblings:w};ze(),ft(Er(n,nn(()=>i,{$$events:{expand(E){Qe.call(this,e,E)},collapse(E){Qe.call(this,e,E)},toggle(E){Qe.call(this,e,E)}},children:(E,T)=>{var C=W$(),O=V(C);Ce(O,{class:"form-field required",get name(){return`${c()??""}.subject`},children:Ie,$$slots:{default:(N,R)=>{const q=ne(()=>R.uniqueId);var B=j$(),Y=V(B),z=g(Y,2),K=g(z,2);{var U=J=>{var se=z$(),le=g(S(se));ht(le,1,f,At,(ce,ve)=>{var be=q$(),he=V(be),xe=S(he);j(()=>Se(xe,"{"+r(ve)+"}")),ie("click",he,()=>$("{"+r(ve)+"}")),b(ce,be)}),b(J,se)};te(K,J=>{L(f()),A(()=>f()?.length>0)&&J(U)})}j(()=>{W(Y,"for",r(q)),W(z,"id",r(q))}),xt(z,()=>d().subject,J=>d(d().subject=J,!0)),b(N,B)}}});var P=g(O,2);Ce(P,{class:"form-field m-0 required",get name(){return`${c()??""}.body`},children:Ie,$$slots:{default:(N,R)=>{const q=ne(()=>R.uniqueId);var B=H$(),Y=V(B),z=g(Y,2);{var K=le=>{var ce=kt(),ve=V(ce);mi(ve,()=>r(v),(be,he)=>{he(be,{get id(){return r(q)},language:"html",get value(){return d().body},set value(xe){d(d().body=xe,!0)},$$legacy:!0})}),b(le,ce)},U=le=>{var ce=U$();j(()=>W(ce,"id",r(q))),xt(ce,()=>d().body,ve=>d(d().body=ve,!0)),b(le,ce)};te(z,le=>{r(v)&&!r(_)?le(K):le(U,!1)})}var J=g(z,2);{var se=le=>{var ce=B$(),ve=g(S(ce));ht(ve,1,f,At,(be,he)=>{var xe=V$(),Te=V(xe),pe=S(Te);j(()=>Se(pe,"{"+r(he)+"}")),ie("click",Te,()=>$("{"+r(he)+"}")),b(be,xe)}),b(le,ce)};te(J,le=>{L(f()),A(()=>f()?.length>0)&&le(se)})}j(()=>W(Y,"for",r(q))),b(N,B)}}}),b(E,C)},$$slots:{default:!0,header:(E,T)=>{var C=K$(),O=V(C),P=g(S(O),2),N=S(P),R=g(O,4);{var q=B=>{var Y=Y$();We(Y,(z,K)=>ct?.(z,K),()=>({text:"Has errors",position:"left"})),Ot(3,Y,()=>zn,()=>({duration:150,start:.7})),b(B,Y)};te(R,B=>{r(l)&&B(q)})}j(()=>Se(N,u())),b(E,C)}},$$legacy:!0})),E=>y(h,E),()=>r(h)),yt(e,"expand",p),yt(e,"collapse",m),yt(e,"collapseSiblings",w);var I=Fe(D);return o(),I}var Z$=x('<label> </label> <input type="number" required="" placeholder="No change"/> <div class="help-block"><span>Invalidate all previously issued tokens</span></div>',1);function G$(n,e){Re(e,!1);let t=ee(e,"key",8),i=ee(e,"label",8),s=ee(e,"duration",12),a=ee(e,"secret",12);ze(),Ce(n,{class:"form-field required",get name(){return`${t()??""}.duration`},children:Ie,$$slots:{default:(o,l)=>{const c=ne(()=>l.uniqueId);var u=Z$(),d=V(u),f=S(d),h=g(d,2),v=g(h,2),_=S(v);let p;j(()=>{W(d,"for",r(c)),Se(f,`${i()??""} duration (in seconds)`),W(h,"id",r(c)),p=Me(_,1,"link-primary",null,p,{"txt-success":!!a()})}),xt(h,s),ie("click",_,()=>{a()?a(void 0):a(F.randomSecret(50))}),b(o,u)}}}),Fe()}var X$=x('<div class="col-sm-6"><!></div>'),Q$=x('<div class="grid"></div>'),eI=x('<i class="ri-error-warning-fill txt-danger"></i>'),tI=x('<div class="inline-flex"><i class="ri-key-2-line"></i> <span class="txt">Tokens options (invalidate, duration)</span></div> <div class="flex-fill"></div> <!>',1);function nI(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt(),a=M(),o=M();let l=ee(e,"collection",12),c=M([]);function u(d){if(F.isEmpty(d))return!1;for(let f of r(c))if(d[f.key])return!0;return!1}re(()=>L(l()),()=>{y(a,l()?.system&&l()?.name==="_superusers")}),re(()=>r(a),()=>{y(c,r(a)?[{key:"authToken",label:"Auth"},{key:"passwordResetToken",label:"Password reset"},{key:"fileToken",label:"Protected file access"}]:[{key:"authToken",label:"Auth"},{key:"verificationToken",label:"Email verification"},{key:"passwordResetToken",label:"Password reset"},{key:"emailChangeToken",label:"Email change"},{key:"fileToken",label:"Protected file access"}])}),re(()=>t(),()=>{y(o,u(t()))}),lt(),ze(),Er(n,{single:!0,children:(d,f)=>{var h=Q$();ht(h,5,()=>r(c),v=>v.key,(v,_)=>{var p=X$(),m=S(p);G$(m,{get key(){return r(_),A(()=>r(_).key)},get label(){return r(_),A(()=>r(_).label)},get duration(){return l()[r(_).key].duration},set duration(w){l(l()[r(_).key].duration=w,!0)},get secret(){return l()[r(_).key].secret},set secret(w){l(l()[r(_).key].secret=w,!0)},$$legacy:!0}),b(v,p)}),b(d,h)},$$slots:{default:!0,header:(d,f)=>{var h=tI(),v=g(V(h),4);{var _=p=>{var m=eI();We(m,(w,k)=>ct?.(w,k),()=>({text:"Has errors",position:"left"})),Ot(3,m,()=>zn,()=>({duration:150,start:.7})),b(p,m)};te(v,p=>{r(o)&&p(_)})}b(d,h)}}}),Fe(),s()}let Ev;var iI=x('<div class="txt-center"><span class="loader"></span></div>'),rI=x('<button type="button" class="btn btn-sm btn-transparent btn-hint lock-toggle svelte-gmv44s"><i class="ri-lock-line" aria-hidden="true"></i> <span class="txt">Set Superusers only</span></button>'),sI=x('<small class="txt svelte-gmv44s">Unlock and set custom rule</small>'),aI=x('<button type="button" class="unlock-overlay svelte-gmv44s"><!> <div class="icon svelte-gmv44s" aria-hidden="true"><i class="ri-lock-unlock-line svelte-gmv44s"></i></div></button>'),oI=x('<div class="input-wrapper svelte-gmv44s"><label><!> <span> </span> <!> <!></label> <!> <!></div> <div class="help-block"><!></div>',1);function Fr(n,e){Re(e,!1);const t=M(),i=M();let s=ee(e,"collection",8,null),a=ee(e,"rule",12,null),o=ee(e,"label",8,"Rule"),l=ee(e,"formKey",8,"rule"),c=ee(e,"required",8,!1),u=ee(e,"disabled",8,!1),d=ee(e,"superuserToggle",8,!0),f=ee(e,"placeholder",8,"Leave empty to grant everyone access..."),h=M(null),v=null,_=M(Ev),p=M(!1);m();async function m(){r(_)||r(p)||(y(p,!0),y(_,(await Wt(async()=>{const{default:T}=await import("./FilterAutocompleteInput-DaWy_bqh.js");return{default:T}},__vite__mapDeps([0,1]),import.meta.url)).default),Ev=r(_),y(p,!1))}async function w(){a(v||""),await $n(),r(h)?.focus()}function k(){v=a(),a(null)}re(()=>(L(d()),L(a())),()=>{y(t,d()&&a()===null)}),re(()=>(L(u()),L(s())),()=>{y(i,u()||s().system)}),lt(),ze();var $=kt(),D=V($);{var I=T=>{var C=iI();b(T,C)},E=T=>{{let C=ne(()=>c()?"requied":""),O=ne(()=>r(t)?"disabled":"");Ce(T,{get class(){return`form-field rule-field ${r(C)??""} ${r(O)??""}`},get name(){return l()},children:Ie,$$slots:{default:(P,N)=>{const R=ne(()=>N.uniqueId);var q=oI(),B=V(q),Y=S(B),z=S(Y);Qt(z,e,"beforeLabel",{get isSuperuserOnly(){return r(t)}},null);var K=g(z,2);let U;var J=S(K),se=g(K,2);Qt(se,e,"afterLabel",{get isSuperuserOnly(){return r(t)}},null);var le=g(se,2);{var ce=pe=>{var ue=rI();j(()=>{W(ue,"aria-hidden",r(i)),ue.disabled=r(i)}),ie("click",ue,k),b(pe,ue)};te(le,pe=>{d()&&!r(t)&&pe(ce)})}var ve=g(Y,2);{let pe=ne(()=>r(i)||r(t)),ue=ne(()=>r(t)?"":f());mi(ve,()=>r(_),(we,ke)=>{ft(ke(we,{get id(){return r(R)},get baseCollection(){return s()},get disabled(){return r(pe)},get placeholder(){return r(ue)},get value(){return a()},set value(ae){a(ae)},$$legacy:!0}),ae=>y(h,ae),()=>r(h))})}var be=g(ve,2);{var he=pe=>{var ue=aI(),we=S(ue);{var ke=ae=>{var _e=sI();b(ae,_e)};te(we,ae=>{r(i)||ae(ke)})}j(()=>{ue.disabled=r(i),W(ue,"aria-hidden",r(i))}),Ot(3,ue,()=>zn,()=>({duration:150,start:.98})),ie("click",ue,w),b(pe,ue)};te(be,pe=>{d()&&r(t)&&pe(he)})}We(B,(pe,ue)=>ct?.(pe,ue),()=>s().system?{text:"System collection rule cannot be changed.",position:"top"}:void 0);var xe=g(B,2),Te=S(xe);Qt(Te,e,"default",{get isSuperuserOnly(){return r(t)}},null),j(()=>{W(Y,"for",r(R)),U=Me(K,1,"txt",null,U,{"txt-hint":r(t)}),Se(J,`${o()??""}
                    ${r(t)?"- Superusers only":""}`)}),b(P,q)}}})}};te(D,T=>{r(p)?T(I):T(E,!1)})}b(n,$),Fe()}var lI=x('<input type="checkbox"/> <label><span class="txt">Enable</span></label>',1),cI=x("<p>This optional rule could be used to enable/disable MFA per account basis.</p> <p>For example, to require MFA only for accounts with non-empty email you can set it to <code>email != ''</code>.</p> <p>Leave the rule empty to require MFA for everyone.</p>",1),uI=x(`<div class="content m-b-sm"><p class="txt-bold">This feature is experimental and may change in the future.</p> <p>Multi-factor authentication (MFA) requires the user to authenticate with any 2 different auth
            methods (otp, identity/password, oauth2) before issuing an auth token. <a target="_blank" rel="noopener noreferrer" class="txt-sm link-hint" title="Learn more"><em>(Learn more)</em></a>.</p></div> <div class="grid"><!> <div><!></div></div>`,1),dI=x('<span class="label label-success">Enabled</span>'),fI=x('<span class="label">Disabled</span>'),hI=x('<i class="ri-error-warning-fill txt-danger"></i>'),vI=x('<div class="inline-flex"><i class="ri-shield-check-line"></i> <span class="txt">Multi-factor authentication (MFA)</span></div> <div class="flex-fill"></div> <!> <!>',1);function pI(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt(),a=M();let o=ee(e,"collection",12);re(()=>t(),()=>{y(a,!F.isEmpty(t()?.mfa))}),lt(),ze(),Er(n,{single:!0,children:(l,c)=>{var u=uI(),d=V(u),f=g(S(d),2),h=g(S(f)),v=g(d,2),_=S(v);Ce(_,{class:"form-field form-field-toggle",name:"mfa.enabled",children:Ie,$$slots:{default:(k,$)=>{const D=ne(()=>$.uniqueId);var I=lI(),E=V(I),T=g(E,2);j(()=>{W(E,"id",r(D)),W(T,"for",r(D))}),en(E,()=>o().mfa.enabled,C=>o(o().mfa.enabled=C,!0)),b(k,I)}}});var p=g(_,2);let m;var w=S(p);{let k=ne(()=>(L(o()),A(()=>!o().mfa.enabled)));Fr(w,{label:"MFA rule",formKey:"mfa.rule",superuserToggle:!1,get disabled(){return r(k)},placeholder:"Leave empty to require MFA for everyone",get collection(){return o()},get rule(){return o().mfa.rule},set rule($){o(o().mfa.rule=$,!0)},children:($,D)=>{var I=cI();b($,I)},$$slots:{default:!0},$$legacy:!0})}j(()=>{W(h,"href",A(()=>"https://pocketbase.io/docs/authentication#multi-factor-authentication")),m=Me(p,1,"content",null,m,{fade:!o().mfa.enabled})}),b(l,u)},$$slots:{default:!0,header:(l,c)=>{var u=vI(),d=g(V(u),4);{var f=p=>{var m=dI();b(p,m)},h=p=>{var m=fI();b(p,m)};te(d,p=>{L(o()),A(()=>o().mfa.enabled)?p(f):p(h,!1)})}var v=g(d,2);{var _=p=>{var m=hI();We(m,(w,k)=>ct?.(w,k),()=>({text:"Has errors",position:"left"})),Ot(3,m,()=>zn,()=>({duration:150,start:.7})),b(p,m)};te(v,p=>{r(a)&&p(_)})}b(l,u)}}}),Fe(),s()}var mI=x('<span class="txt"> </span>'),gI=x('<span class="clear"><i class="ri-close-line"></i></span>'),bI=x('<div class="option"><!> <!></div>'),yI=x("<div> </div>"),_I=x('<div class="addon suffix p-r-5"><button type="button" class="btn btn-sm btn-circle btn-transparent clear" aria-label="Clear"><i class="ri-close-line"></i></button></div>'),xI=x('<div class="form-field form-field-sm options-search"><label class="input-group"><div class="addon p-r-0"><i class="ri-search-line"></i></div> <input type="text"/> <!></label></div>'),wI=x('<div tabindex="0" role="menuitem"><!></div>'),kI=x('<div class="txt-missing"> </div>'),SI=x('<!> <!> <div class="options-list"></div> <!>',1),TI=x('<div><div role="button"></div> <!></div>');function Js(n,e){Re(e,!1);const t=M(),i=M();let s=ee(e,"id",8,""),a=ee(e,"noOptionsText",8,"No options found"),o=ee(e,"selectPlaceholder",8,"- Select -"),l=ee(e,"searchPlaceholder",8,"Search..."),c=ee(e,"items",24,()=>[]),u=ee(e,"multiple",8,!1),d=ee(e,"disabled",8,!1),f=ee(e,"readonly",8,!1),h=ee(e,"upside",8,!1),v=ee(e,"zeroFunc",8,()=>u()?[]:void 0),_=ee(e,"selected",28,()=>v()()),p=ee(e,"toggle",24,u),m=ee(e,"closable",8,!0),w=ee(e,"labelComponent",8,void 0),k=ee(e,"labelComponentProps",24,()=>({})),$=ee(e,"optionComponent",8,void 0),D=ee(e,"optionComponentProps",24,()=>({})),I=ee(e,"searchable",8,!1),E=ee(e,"searchFunc",8,void 0);const T=Ut();let C=ee(e,"class",8,""),O=M(),P=M(""),N=M(void 0),R=M(void 0);function q(oe){if(F.isEmpty(_()))return;let me=F.toArray(_());F.inArray(me,oe)&&(F.removeByValue(me,oe),_(u()?me:me?.[0]||v()())),T("change",{selected:_()}),r(N)?.dispatchEvent(new CustomEvent("change",{detail:_(),bubbles:!0}))}function B(oe){if(u()){let me=F.toArray(_());F.inArray(me,oe)||_([...me,oe])}else _(oe);T("change",{selected:_()}),r(N)?.dispatchEvent(new CustomEvent("change",{detail:_(),bubbles:!0}))}function Y(oe){return r(i)(oe)?q(oe):B(oe)}function z(){_(v()()),T("change",{selected:_()}),r(N)?.dispatchEvent(new CustomEvent("change",{detail:_(),bubbles:!0}))}function K(){r(O)?.show&&r(O)?.show()}function U(){r(O)?.hide&&r(O)?.hide()}function J(){if(F.isEmpty(_())||F.isEmpty(c()))return;let oe=F.toArray(_()),me=[];for(const Q of oe)F.inArray(c(),Q)||me.push(Q);if(me.length){for(const Q of me)F.removeByValue(oe,Q);_(u()?oe:oe[0])}}function se(oe,me){let Q=(""+me).replace(/\s+/g,"").toLowerCase(),ye=oe;try{typeof oe=="object"&&oe!==null&&(ye=JSON.stringify(oe))}catch{}return(""+ye).replace(/\s+/g,"").toLowerCase().includes(Q)}function le(){y(P,"")}function ce(oe,me){oe=oe||[];const Q=E()||se;return oe.filter(ye=>Q(ye,me))||[]}function ve(oe,me){oe.preventDefault(),p()&&u()?Y(me):B(me)}function be(oe,me){(oe.code==="Enter"||oe.code==="Space")&&(ve(oe,me),m()&&U())}function he(){le(),setTimeout(()=>{const oe=r(N)?.querySelector(".dropdown-item.option.selected");oe&&(oe.focus(),oe.scrollIntoView({block:"nearest"}))},0)}function xe(oe){oe.stopPropagation(),!f()&&!d()&&r(O)?.toggle()}fn(()=>{const oe=document.querySelectorAll(`label[for="${s()}"]`);for(const me of oe)me.addEventListener("click",xe);return()=>{for(const me of oe)me.removeEventListener("click",xe)}}),re(()=>L(c()),()=>{c()&&(J(),le())}),re(()=>(L(c()),r(P)),()=>{y(t,ce(c(),r(P)))}),re(()=>L(_()),()=>{y(i,function(oe){const me=F.toArray(_());return F.inArray(me,oe)})}),lt();var Te={deselectItem:q,selectItem:B,toggleItem:Y,reset:z,showDropdown:K,hideDropdown:U};ze();var pe=TI();let ue;var we=S(pe);let ke;ht(we,5,()=>(L(F),L(_()),A(()=>F.toArray(_()))),At,(oe,me)=>{var Q=bI(),ye=S(Q);{var Ee=He=>{var dt=kt(),$e=V(dt);mi($e,w,(Be,Ze)=>{Ze(Be,nn({get item(){return r(me)}},k))}),b(He,dt)},Ae=He=>{var dt=mI(),$e=S(dt);j(()=>Se($e,r(me))),b(He,dt)};te(ye,He=>{w()?He(Ee):He(Ae,!1)})}var Ne=g(ye,2);{var je=He=>{var dt=gI();We(dt,($e,Be)=>ct?.($e,Be),()=>"Clear"),Ft(()=>ie("click",dt,Et(hn(()=>q(r(me)))))),b(He,dt)};te(Ne,He=>{(u()||p())&&He(je)})}b(oe,Q)},oe=>{var me=yI();let Q;var ye=S(me);j(()=>{Q=Me(me,1,"block txt-placeholder",null,Q,{"link-hint":!d()&&!f()}),Se(ye,o())}),b(oe,me)}),ft(we,oe=>y(R,oe),()=>r(R));var ae=g(we,2);{var _e=oe=>{{let me=ne(()=>h()?"dropdown-upside":"");ft(Jn(oe,{get class(){return`dropdown dropdown-block options-dropdown dropdown-left ${r(me)??""}`},get trigger(){return r(R)},$$events:{show:he,hide(Q){Qe.call(this,e,Q)}},children:(Q,ye)=>{var Ee=SI(),Ae=V(Ee);{var Ne=$e=>{var Be=xI(),Ze=S(Be),Je=g(S(Ze),2);Bi(Je,!0);var st=g(Je,2);{var Ye=Ke=>{var qe=_I(),Le=S(qe);ie("click",Le,Et(hn(le))),b(Ke,qe)};te(st,Ke=>{r(P),A(()=>r(P).length)&&Ke(Ye)})}j(()=>W(Je,"placeholder",l())),xt(Je,()=>r(P),Ke=>y(P,Ke)),b($e,Be)};te(Ae,$e=>{I()&&$e(Ne)})}var je=g(Ae,2);Qt(je,e,"beforeOptions",{},null);var He=g(je,2);ht(He,5,()=>r(t),At,($e,Be)=>{var Ze=wI();let Je;var st=S(Ze);{var Ye=qe=>{var Le=kt(),Ve=V(Le);mi(Ve,$,(et,nt)=>{nt(et,nn({get item(){return r(Be)}},D))}),b(qe,Le)},Ke=qe=>{var Le=Is();j(()=>Se(Le,r(Be))),b(qe,Le)};te(st,qe=>{$()?qe(Ye):qe(Ke,!1)})}j(qe=>Je=Me(Ze,1,"dropdown-item option",null,Je,qe),[()=>({closable:m(),selected:r(i)(r(Be))})]),ie("click",Ze,qe=>ve(qe,r(Be))),ie("keydown",Ze,qe=>be(qe,r(Be))),b($e,Ze)},$e=>{var Be=kt(),Ze=V(Be);{var Je=st=>{var Ye=kI(),Ke=S(Ye);j(()=>Se(Ke,a())),b(st,Ye)};te(Ze,st=>{a()&&st(Je)})}b($e,Be)});var dt=g(He,2);Qt(dt,e,"afterOptions",{},null),b(Q,Ee)},$$slots:{default:!0},$$legacy:!0}),Q=>y(O,Q),()=>r(O))}};te(ae,oe=>{!d()&&!f()&&oe(_e)})}return ft(pe,oe=>y(N,oe),()=>r(N)),j(()=>{ue=Me(pe,1,`select ${C()??""}`,null,ue,{upside:h(),multiple:u(),disabled:d(),readonly:f()}),W(we,"tabindex",d()||f()?"-1":"0"),ke=Me(we,1,"selected-container",null,ke,{disabled:d(),readonly:f()})}),b(n,pe),yt(e,"deselectItem",q),yt(e,"selectItem",B),yt(e,"toggleItem",Y),yt(e,"reset",z),yt(e,"showDropdown",K),yt(e,"hideDropdown",U),Fe(Te)}var $I=x('<div class="form-field-addon"><button type="button" class="btn btn-transparent btn-circle" aria-label="Toggle password visibility"><i class="ri-key-line"></i></button></div> <input/>',1),II=x("<input/>");function Nd(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["value","mask"]);Re(e,!1);let s=ee(e,"value",12,void 0),a=ee(e,"mask",12,!1),o=M();async function l(){s(""),a(!1),await $n(),r(o)?.focus()}ze();var c=kt(),u=V(c);{var d=h=>{var v=$I(),_=V(v),p=S(_);We(p,(w,k)=>ct?.(w,k),()=>({position:"left",text:"Set new value"})),Ft(()=>ie("click",p,Et(l)));var m=g(_,2);sa(m,()=>({disabled:!0,type:"text",placeholder:"******",...i}),void 0,void 0,void 0,void 0,!0),b(h,v)},f=h=>{var v=II();sa(v,()=>({type:"password",autocomplete:"new-password",...i}),void 0,void 0,void 0,void 0,!0),ft(v,_=>y(o,_),()=>r(o)),xt(v,s),b(h,v)};te(u,h=>{a()?h(d):h(f,!1)})}b(n,c),Fe()}var CI=x('<label>Client ID</label> <input type="text"/>',1),EI=x("<label>Client secret</label> <!>",1),OI=x('<div class="col-lg-12"><!></div>'),DI=x('<form autocomplete="off"><!> <!> <!></form>'),PI=x("<img/>"),MI=x('<i class="ri-puzzle-line txt-sm txt-hint"></i>'),AI=x('<figure class="provider-logo"><!></figure> <h4 class="center txt-break"> <small class="txt-hint"> </small></h4>',1),LI=x('<button type="button" class="btn btn-transparent btn-circle btn-hint btn-sm" aria-label="Remove provider"><i class="ri-delete-bin-7-line" aria-hidden="true"></i></button> <div class="flex-fill"></div>',1),NI=x('<!> <button type="button" class="btn btn-transparent">Cancel</button> <button type="submit" class="btn btn-expanded"><span class="txt">Set provider config</span></button>',1);function RI(n,e){Re(e,!1);const t=M(),i=M(),s=Ut(),a="provider_popup_"+F.randomString(5);let o=M(),l=M({}),c=M({}),u=M(!1),d=M(""),f=M(!1),h=M(0);function v(k,$,D){y(h,D||0),y(u,F.isEmpty($)),y(l,Object.assign({},k)),y(c,Object.assign({},$)),y(f,!!r(c).clientId),y(d,JSON.stringify(r(c))),r(o)?.show()}function _(){Zn(r(i)),r(o)?.hide()}async function p(){s("submit",{uiOptions:r(l),config:r(c)}),_()}async function m(){Rn(`Do you really want to remove the "${r(l).title}" OAuth2 provider from the collection?`,()=>{s("remove",{uiOptions:r(l)}),_()})}re(()=>(r(c),r(d)),()=>{y(t,JSON.stringify(r(c))!=r(d))}),re(()=>r(h),()=>{y(i,"oauth2.providers."+r(h))}),lt();var w={show:v,hide:_};return ze(),ft(mn(n,{btnClose:!1,$$events:{show(k){Qe.call(this,e,k)},hide(k){Qe.call(this,e,k)}},children:(k,$)=>{var D=DI(),I=S(D);Ce(I,{class:"form-field required",get name(){return`${r(i)??""}.clientId`},children:Ie,$$slots:{default:(O,P)=>{const N=ne(()=>P.uniqueId);var R=CI(),q=V(R),B=g(q,2);j(()=>{W(q,"for",r(N)),W(B,"id",r(N))}),xt(B,()=>r(c).clientId,Y=>ot(c,r(c).clientId=Y)),b(O,R)}}});var E=g(I,2);Ce(E,{class:"form-field required",get name(){return`${r(i)??""}.clientSecret`},children:Ie,$$slots:{default:(O,P)=>{const N=ne(()=>P.uniqueId);var R=EI(),q=V(R),B=g(q,2);Nd(B,{get id(){return r(N)},get mask(){return r(f)},set mask(Y){y(f,Y)},get value(){return r(c).clientSecret},set value(Y){ot(c,r(c).clientSecret=Y)},$$legacy:!0}),j(()=>W(q,"for",r(N))),b(O,R)}}});var T=g(E,2);{var C=O=>{var P=OI(),N=S(P);mi(N,()=>r(l).optionsComponent,(R,q)=>{q(R,nn({get key(){return r(i)}},()=>r(l).optionsComponentProps||{},{get config(){return r(c)},set config(B){y(c,B)},$$legacy:!0}))}),b(O,P)};te(T,O=>{r(l),A(()=>r(l).optionsComponent)&&O(C)})}j(()=>W(D,"id",a)),ie("submit",D,Et(()=>p())),b(k,D)},$$slots:{default:!0,header:(k,$)=>{var D=AI(),I=V(D),E=S(I);{var T=q=>{var B=PI();j(()=>{W(B,"src",`${A(()=>"./")??""}images/oauth2/${r(l),A(()=>r(l).logo)??""}`),W(B,"alt",`${r(l),A(()=>r(l).title)??""} logo`)}),b(q,B)},C=q=>{var B=MI();b(q,B)};te(E,q=>{r(l),A(()=>r(l).logo)?q(T):q(C,!1)})}var O=g(I,2),P=S(O),N=g(P),R=S(N);j(()=>{Se(P,`${r(l),A(()=>r(l).title)??""} `),Se(R,`(${r(l),A(()=>r(l).key)??""})`)}),b(k,D)},footer:(k,$)=>{var D=NI(),I=V(D);{var E=O=>{var P=LI(),N=V(P);We(N,(R,q)=>ct?.(R,q),()=>({text:"Remove provider",position:"right"})),Ft(()=>ie("click",N,m)),b(O,P)};te(I,O=>{r(u)||O(E)})}var T=g(I,2),C=g(T,2);j(()=>{W(C,"form",a),C.disabled=!r(t)}),ie("click",T,_),b(k,D)}},$$legacy:!0}),k=>y(o,k),()=>r(o)),yt(e,"show",v),yt(e,"hide",_),Fe(w)}var FI=x('<label>Client ID</label> <input type="text" required=""/>',1),qI=x('<label>Team ID</label> <input type="text" required=""/>',1),zI=x('<label>Key ID</label> <input type="text" required=""/>',1),jI=x('<label><span class="txt">Duration (in seconds)</span> <i class="ri-information-line link-hint"></i></label> <input type="number" required=""/>',1),UI=x('<label>Private key</label> <textarea required="" rows="8"></textarea> <div class="help-block">The key is not stored on the server and it is used only for generating the signed JWT.</div>',1),VI=x('<form autocomplete="off"><div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <!></div></form>'),BI=x('<h4 class="center txt-break">Generate Apple client secret</h4>'),HI=x('<button type="button" class="btn btn-transparent">Close</button> <button type="submit"><i class="ri-key-line"></i> <span class="txt">Generate and set secret</span></button>',1);function WI(n,e){Re(e,!1);const t=M(),i=Ut(),s="apple_secret_"+F.randomString(5),a=15777e3;let o=M(),l=M(),c=M(),u=M(),d=M(),f=M(),h=M(!1);function v(w={}){y(l,w.clientId||""),y(c,w.teamId||""),y(u,w.keyId||""),y(d,w.privateKey||""),y(f,w.duration||a),sn({}),r(o)?.show()}function _(){return r(o)?.hide()}async function p(){y(h,!0);try{const w=await De.settings.generateAppleClientSecret(r(l),r(c),r(u),r(d).trim(),r(f));y(h,!1),vn("Successfully generated client secret."),i("submit",w),r(o)?.hide()}catch(w){De.error(w)}y(h,!1)}re(()=>{},()=>{y(t,!0)}),lt();var m={show:v,hide:_};ze();{let w=ne(()=>!r(h)),k=ne(()=>!r(h));ft(mn(n,{get overlayClose(){return r(w)},get escClose(){return r(k)},beforeHide:()=>!r(h),popup:!0,$$events:{show($){Qe.call(this,e,$)},hide($){Qe.call(this,e,$)}},children:($,D)=>{var I=VI(),E=S(I),T=S(E),C=S(T);Ce(C,{class:"form-field required",name:"clientId",children:Ie,$$slots:{default:(z,K)=>{const U=ne(()=>K.uniqueId);var J=FI(),se=V(J),le=g(se,2);j(()=>{W(se,"for",r(U)),W(le,"id",r(U))}),xt(le,()=>r(l),ce=>y(l,ce)),b(z,J)}}});var O=g(T,2),P=S(O);Ce(P,{class:"form-field required",name:"teamId",children:Ie,$$slots:{default:(z,K)=>{const U=ne(()=>K.uniqueId);var J=qI(),se=V(J),le=g(se,2);j(()=>{W(se,"for",r(U)),W(le,"id",r(U))}),xt(le,()=>r(c),ce=>y(c,ce)),b(z,J)}}});var N=g(O,2),R=S(N);Ce(R,{class:"form-field required",name:"keyId",children:Ie,$$slots:{default:(z,K)=>{const U=ne(()=>K.uniqueId);var J=zI(),se=V(J),le=g(se,2);j(()=>{W(se,"for",r(U)),W(le,"id",r(U))}),xt(le,()=>r(u),ce=>y(u,ce)),b(z,J)}}});var q=g(N,2),B=S(q);Ce(B,{class:"form-field required",name:"duration",children:Ie,$$slots:{default:(z,K)=>{const U=ne(()=>K.uniqueId);var J=jI(),se=V(J),le=g(S(se),2);We(le,(ve,be)=>ct?.(ve,be),()=>({text:`Max ${a} seconds (~${a/(3600*24*30)<<0} months).`,position:"top"}));var ce=g(se,2);W(ce,"max",a),j(()=>{W(se,"for",r(U)),W(ce,"id",r(U))}),xt(ce,()=>r(f),ve=>y(f,ve)),b(z,J)}}});var Y=g(q,2);Ce(Y,{class:"form-field required",name:"privateKey",children:Ie,$$slots:{default:(z,K)=>{const U=ne(()=>K.uniqueId);var J=UI(),se=V(J),le=g(se,2);W(le,"placeholder",`-----BEGIN PRIVATE KEY-----
...
-----END PRIVATE KEY-----`),j(()=>{W(se,"for",r(U)),W(le,"id",r(U))}),xt(le,()=>r(d),ce=>y(d,ce)),b(z,J)}}}),j(()=>W(I,"id",s)),ie("submit",I,Et(()=>p())),b($,I)},$$slots:{default:!0,header:($,D)=>{var I=BI();b($,I)},footer:($,D)=>{var I=HI(),E=V(I),T=g(E,2);let C;j(()=>{E.disabled=r(h),W(T,"form",s),C=Me(T,1,"btn btn-expanded",null,C,{"btn-loading":r(h)}),T.disabled=!r(t)||r(h)}),ie("click",E,_),b($,I)}},$$legacy:!0}),$=>y(o,$),()=>r(o))}return yt(e,"show",v),yt(e,"hide",_),Fe(m)}var YI=x('<button type="button"><i class="ri-key-line"></i> <span class="txt">Generate secret</span></button> <!>',1);function KI(n,e){Re(e,!1);let t=ee(e,"key",8,""),i=ee(e,"config",28,()=>({})),s=M();ze();var a=YI(),o=V(a),l=g(o,2);ft(WI(l,{$$events:{submit:c=>{i(i().clientSecret=c.detail?.secret||"",!0)}},$$legacy:!0}),c=>y(s,c),()=>r(s)),j(()=>Me(o,1,`btn btn-sm btn-secondary btn-provider-${t()??""}`)),ie("click",o,()=>r(s)?.show({clientId:i().clientId})),b(n,a),Fe()}var JI=x("<i></i>"),ZI=x('<!> <span class="txt"> </span>',1);function Ov(n,e){Re(e,!1);let t=ee(e,"item",24,()=>({}));ze();var i=ZI(),s=V(i);{var a=c=>{var u=JI();j(()=>Me(u,1,`icon ${L(t()),A(()=>t().icon)??""}`)),b(c,u)};te(s,c=>{L(t()),A(()=>t().icon)&&c(a)})}var o=g(s,2),l=S(o);j(()=>Se(l,(L(t()),A(()=>t().label||t().name||t().title||t().id||t().value)))),b(n,i),Fe()}function On(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["items","multiple","selected","labelComponent","optionComponent","selectionKey","keyOfSelected"]);Re(e,!1);let s=ee(e,"items",24,()=>[]),a=ee(e,"multiple",8,!1),o=ee(e,"selected",28,()=>a()?[]:void 0),l=ee(e,"labelComponent",8,Ov),c=ee(e,"optionComponent",8,Ov),u=ee(e,"selectionKey",8,"value"),d=ee(e,"keyOfSelected",28,()=>a()?[]:void 0),f=JSON.stringify(d());function h(_){_=F.toArray(_,!0);let p=[];for(let m of _){const w=F.findByKey(s(),u(),m);w&&p.push(w)}_.length&&!p.length||o(a()?p:p[0])}async function v(_){if(!s().length)return;let p=F.toArray(_,!0).map(w=>w[u()]),m=a()?p:p[0];JSON.stringify(m)!=f&&(d(m),f=JSON.stringify(d()))}re(()=>(L(s()),L(d())),()=>{s()&&h(d())}),re(()=>L(o()),()=>{v(o())}),lt(),ze(),Js(n,nn({get items(){return s()},get multiple(){return a()},get labelComponent(){return l()},get optionComponent(){return c()}},()=>i,{get selected(){return o()},set selected(_){o(_)},$$events:{show(_){Qe.call(this,e,_)},hide(_){Qe.call(this,e,_)},change(_){Qe.call(this,e,_)}},$$slots:{afterOptions:(_,p)=>{var m=kt(),w=V(m);Qt(w,e,"afterOptions",{},null),b(_,m)}},$$legacy:!0})),Fe()}var GI=x("<label>Site</label> <!>",1),XI=x(`<!> <div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content">Note that the Lark user's <strong>Union ID</strong> will be used for the association with the
        PocketBase user (see <a href="https://open.feishu.cn/document/platform-overveiw/basic-concepts/user-identity-introduction/introduction#3f2d4b63" target="_blank" rel="noopener noreferrer">Different Types of Lark IDs</a> ).</div></div>`,1);function QI(n,e){Re(e,!1);let t=ee(e,"config",28,()=>({}));const i="feishu.cn",s="larksuite.com",a=[{label:"Feishu (China)",value:i},{label:"Lark (International)",value:s}];let o=M(i);t().authURL?.includes(s)&&y(o,s),re(()=>r(o),()=>{t(t().authURL=`https://accounts.${r(o)}/open-apis/authen/v1/authorize`,!0),t(t().tokenURL=`https://open.${r(o)}/open-apis/authen/v2/oauth/token`,!0),t(t().userInfoURL=`https://open.${r(o)}/open-apis/authen/v1/user_info`,!0)}),lt(),ze();var l=XI(),c=V(l);Ce(c,{class:"form-field",children:Ie,$$slots:{default:(u,d)=>{const f=ne(()=>d.uniqueId);var h=GI(),v=V(h),_=g(v,2);On(_,{get id(){return r(f)},get items(){return a},get keyOfSelected(){return r(o)},set keyOfSelected(p){y(o,p)},$$legacy:!0}),j(()=>W(v,"for",r(f))),b(u,h)}}}),b(n,l),Fe()}var eC=x('<label>Auth URL</label> <input type="url" required=""/> <div class="help-block"></div>',1),tC=x('<label>Token URL</label> <input type="url" required=""/> <div class="help-block"></div>',1),nC=x('<div class="section-title">Azure AD endpoints</div> <!> <!>',1);function iC(n,e){Re(e,!1);let t=ee(e,"key",8,""),i=ee(e,"config",28,()=>({}));ze();var s=nC(),a=g(V(s),2);Ce(a,{class:"form-field required",get name(){return`${t()??""}.authURL`},children:Ie,$$slots:{default:(l,c)=>{const u=ne(()=>c.uniqueId);var d=eC(),f=V(d),h=g(f,2),v=g(h,2);v.textContent="Ex. https://login.microsoftonline.com/YOUR_DIRECTORY_TENANT_ID/oauth2/v2.0/authorize",j(()=>{W(f,"for",r(u)),W(h,"id",r(u))}),xt(h,()=>i().authURL,_=>i(i().authURL=_,!0)),b(l,d)}}});var o=g(a,2);Ce(o,{class:"form-field required",get name(){return`${t()??""}.tokenURL`},children:Ie,$$slots:{default:(l,c)=>{const u=ne(()=>c.uniqueId);var d=tC(),f=V(d),h=g(f,2),v=g(h,2);v.textContent="Ex. https://login.microsoftonline.com/YOUR_DIRECTORY_TENANT_ID/oauth2/v2.0/token",j(()=>{W(f,"for",r(u)),W(h,"id",r(u))}),xt(h,()=>i().tokenURL,_=>i(i().tokenURL=_,!0)),b(l,d)}}}),b(n,s),Fe()}var rC=x("<input/>");function oo(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["value","separator","readonly","disabled"]);Re(e,!1);const s=M();let a=ee(e,"value",28,()=>[]),o=ee(e,"separator",8,","),l=ee(e,"readonly",8,null),c=ee(e,"disabled",8,null);re(()=>(L(a()),L(o())),()=>{y(s,F.joinNonEmpty(a(),o()+" "))}),lt(),ze();var u=rC();sa(u,()=>({type:(L(i),A(()=>i.type||"text")),value:r(s),disabled:c(),readonly:l(),...i}),void 0,void 0,void 0,void 0,!0),ie("input",u,d=>{a(F.splitNonEmpty(d.target.value,o()))}),b(n,u),Fe()}var sC=x('<label>Display name</label> <input type="text" required=""/>',1),aC=x('<label>Auth URL</label> <input type="url" required=""/>',1),oC=x('<label>Token URL</label> <input type="url" required=""/>',1),lC=x("<label>Fetch user info from</label> <!>",1),cC=x('<label>User info URL</label> <input type="url" required=""/>',1),uC=x('<div class="content"><!></div>'),dC=x('<label><span class="txt">JWKS verification URL</span> <i class="ri-information-line link-hint"></i></label> <input type="url"/>',1),fC=x('<label><span class="txt">Issuers</span> <i class="ri-information-line link-hint"></i></label> <!>',1),hC=x('<div class="content"><p class="txt-hint txt-sm m-b-xs"><em>Both fields are considered optional because the parsed <code>id_token</code> is a direct result of the trusted server code->token exchange response.</em></p> <!> <!></div>'),vC=x('<input type="checkbox"/> <label><span class="txt">Support PKCE</span> <i class="ri-information-line link-hint"></i></label>',1),pC=x('<!> <div class="section-title">Endpoints</div> <!> <!> <!> <div class="sub-panel m-b-base"><!></div> <!>',1);function Lc(n,e){Re(e,!1);let t=ee(e,"key",8,""),i=ee(e,"config",28,()=>({}));const s=[{label:"User info URL",value:!0},{label:"ID Token",value:!1}];let a=M(!!i().userInfoURL);F.isEmpty(i().pkce)&&i(i().pkce=!0,!0),i().displayName||i(i().displayName="OIDC",!0),i().extra||(i(i().extra={},!0),y(a,!0));function o(){r(a)?i(i().extra={},!0):(i(i().userInfoURL="",!0),i(i().extra=i().extra||{},!0))}re(()=>r(a),()=>{typeof r(a)!==void 0&&o()}),lt(),ze();var l=pC(),c=V(l);Ce(c,{class:"form-field required",get name(){return`${t()??""}.displayName`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=sC(),I=V(D),E=g(I,2);j(()=>{W(I,"for",r($)),W(E,"id",r($))}),xt(E,()=>i().displayName,T=>i(i().displayName=T,!0)),b(w,D)}}});var u=g(c,4);Ce(u,{class:"form-field required",get name(){return`${t()??""}.authURL`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=aC(),I=V(D),E=g(I,2);j(()=>{W(I,"for",r($)),W(E,"id",r($))}),xt(E,()=>i().authURL,T=>i(i().authURL=T,!0)),b(w,D)}}});var d=g(u,2);Ce(d,{class:"form-field required",get name(){return`${t()??""}.tokenURL`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=oC(),I=V(D),E=g(I,2);j(()=>{W(I,"for",r($)),W(E,"id",r($))}),xt(E,()=>i().tokenURL,T=>i(i().tokenURL=T,!0)),b(w,D)}}});var f=g(d,2);Ce(f,{class:"form-field m-b-xs",children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=lC(),I=V(D),E=g(I,2);On(E,{get id(){return r($)},get items(){return s},get keyOfSelected(){return r(a)},set keyOfSelected(T){y(a,T)},$$legacy:!0}),j(()=>W(I,"for",r($))),b(w,D)}}});var h=g(f,2),v=S(h);{var _=w=>{var k=uC(),$=S(k);Ce($,{class:"form-field required",get name(){return`${t()??""}.userInfoURL`},children:Ie,$$slots:{default:(D,I)=>{const E=ne(()=>I.uniqueId);var T=cC(),C=V(T),O=g(C,2);j(()=>{W(C,"for",r(E)),W(O,"id",r(E))}),xt(O,()=>i().userInfoURL,P=>i(i().userInfoURL=P,!0)),b(D,T)}}}),Ot(3,k,()=>pn,()=>({delay:10,duration:150})),b(w,k)},p=w=>{var k=hC(),$=g(S(k),2);Ce($,{class:"form-field m-b-xs",get name(){return`${t()??""}.extra.jwksURL`},children:Ie,$$slots:{default:(I,E)=>{const T=ne(()=>E.uniqueId);var C=dC(),O=V(C),P=g(S(O),2);We(P,(R,q)=>ct?.(R,q),()=>({text:"URL to the public token verification keys.",position:"top"}));var N=g(O,2);j(()=>{W(O,"for",r(T)),W(N,"id",r(T))}),xt(N,()=>i().extra.jwksURL,R=>i(i().extra.jwksURL=R,!0)),b(I,C)}}});var D=g($,2);Ce(D,{class:"form-field",get name(){return`${t()??""}.extra.issuers`},children:Ie,$$slots:{default:(I,E)=>{const T=ne(()=>E.uniqueId);var C=fC(),O=V(C),P=g(S(O),2);We(P,(R,q)=>ct?.(R,q),()=>({text:"Comma separated list of accepted values for the iss token claim validation.",position:"top"}));var N=g(O,2);oo(N,{get id(){return r(T)},get value(){return i().extra.issuers},set value(R){i(i().extra.issuers=R,!0)},$$legacy:!0}),j(()=>W(O,"for",r(T))),b(I,C)}}}),Ot(3,k,()=>pn,()=>({delay:10,duration:150})),b(w,k)};te(v,w=>{r(a)?w(_):w(p,!1)})}var m=g(h,2);Ce(m,{class:"form-field",get name(){return`${t()??""}.pkce`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=vC(),I=V(D),E=g(I,2),T=g(S(E),2);We(T,(C,O)=>ct?.(C,O),()=>({text:"Usually it should be safe to be always enabled as most providers will just ignore the extra query parameters if they don't support PKCE.",position:"right"})),j(()=>{W(I,"id",r($)),W(E,"for",r($))}),en(I,()=>i().pkce,C=>i(i().pkce=C,!0)),b(w,D)}}}),b(n,l),Fe()}var mC=x('<label>Auth URL</label> <input type="url"/>',1),gC=x('<label>Token URL</label> <input type="url"/>',1),bC=x('<label>User info URL</label> <input type="url"/>',1),yC=x('<div class="section-title"> </div> <!> <!> <!>',1);function Nc(n,e){Re(e,!1);const t=M();let i=ee(e,"key",8,""),s=ee(e,"config",28,()=>({})),a=ee(e,"required",8,!1),o=ee(e,"title",8,"Provider endpoints");re(()=>(L(a()),L(s())),()=>{y(t,a()&&s()?.enabled)}),lt(),ze();var l=yC(),c=V(l),u=S(c),d=g(c,2);{let v=ne(()=>r(t)?"required":"");Ce(d,{get class(){return`form-field ${r(v)??""}`},get name(){return`${i()??""}.authURL`},children:Ie,$$slots:{default:(_,p)=>{const m=ne(()=>p.uniqueId);var w=mC(),k=V(w),$=g(k,2);j(()=>{W(k,"for",r(m)),W($,"id",r(m)),$.required=r(t)}),xt($,()=>s().authURL,D=>s(s().authURL=D,!0)),b(_,w)}}})}var f=g(d,2);{let v=ne(()=>r(t)?"required":"");Ce(f,{get class(){return`form-field ${r(v)??""}`},get name(){return`${i()??""}.tokenURL`},children:Ie,$$slots:{default:(_,p)=>{const m=ne(()=>p.uniqueId);var w=gC(),k=V(w),$=g(k,2);j(()=>{W(k,"for",r(m)),W($,"id",r(m)),$.required=r(t)}),xt($,()=>s().tokenURL,D=>s(s().tokenURL=D,!0)),b(_,w)}}})}var h=g(f,2);{let v=ne(()=>r(t)?"required":"");Ce(h,{get class(){return`form-field ${r(v)??""}`},get name(){return`${i()??""}.userInfoURL`},children:Ie,$$slots:{default:(_,p)=>{const m=ne(()=>p.uniqueId);var w=bC(),k=V(w),$=g(k,2);j(()=>{W(k,"for",r(m)),W($,"id",r(m)),$.required=r(t)}),xt($,()=>s().userInfoURL,D=>s(s().userInfoURL=D,!0)),b(_,w)}}})}j(()=>Se(u,o())),b(n,l),Fe()}const Rd=[{key:"apple",title:"Apple",logo:"apple.svg",optionsComponent:KI},{key:"google",title:"Google",logo:"google.svg"},{key:"microsoft",title:"Microsoft",logo:"microsoft.svg",optionsComponent:iC},{key:"yandex",title:"Yandex",logo:"yandex.svg"},{key:"facebook",title:"Facebook",logo:"facebook.svg"},{key:"instagram2",title:"Instagram",logo:"instagram.svg"},{key:"github",title:"GitHub",logo:"github.svg"},{key:"gitlab",title:"GitLab",logo:"gitlab.svg",optionsComponent:Nc,optionsComponentProps:{title:"Self-hosted endpoints (optional)"}},{key:"bitbucket",title:"Bitbucket",logo:"bitbucket.svg"},{key:"gitee",title:"Gitee",logo:"gitee.svg"},{key:"gitea",title:"Gitea",logo:"gitea.svg",optionsComponent:Nc,optionsComponentProps:{title:"Self-hosted endpoints (optional)"}},{key:"discord",title:"Discord",logo:"discord.svg"},{key:"twitter",title:"X/Twitter",logo:"twitter.svg"},{key:"kakao",title:"Kakao",logo:"kakao.svg"},{key:"vk",title:"VK",logo:"vk.svg"},{key:"linear",title:"Linear",logo:"linear.svg"},{key:"notion",title:"Notion",logo:"notion.svg"},{key:"monday",title:"monday.com",logo:"monday.svg"},{key:"lark",title:"Lark",logo:"lark.svg",optionsComponent:QI},{key:"box",title:"Box",logo:"box.svg"},{key:"spotify",title:"Spotify",logo:"spotify.svg"},{key:"trakt",title:"Trakt",logo:"trakt.svg"},{key:"twitch",title:"Twitch",logo:"twitch.svg"},{key:"patreon",title:"Patreon (v2)",logo:"patreon.svg"},{key:"strava",title:"Strava",logo:"strava.svg"},{key:"wakatime",title:"WakaTime",logo:"wakatime.svg"},{key:"livechat",title:"LiveChat",logo:"livechat.svg"},{key:"mailcow",title:"mailcow",logo:"mailcow.svg",optionsComponent:Nc,optionsComponentProps:{required:!0}},{key:"planningcenter",title:"Planning Center",logo:"planningcenter.svg"},{key:"oidc",title:"OpenID Connect",logo:"oidc.svg",optionsComponent:Lc},{key:"oidc2",title:"(2) OpenID Connect",logo:"oidc.svg",optionsComponent:Lc},{key:"oidc3",title:"(3) OpenID Connect",logo:"oidc.svg",optionsComponent:Lc}];var _C=x('<button type="button" class="btn btn-transparent btn-sm btn-hint p-l-xs p-r-xs m-l-10"><span class="txt">Clear</span></button>'),xC=x('<label class="m-l-10 txt-xl"><i class="ri-search-line"></i></label> <input type="text" placeholder="Search provider"/> <!>',1),wC=x("<img/>"),kC=x('<div class="col-6"><button type="button" class="provider-card handle"><figure class="provider-logo"><!></figure> <div class="content"><div class="title"> </div> <em class="txt-hint txt-sm m-r-auto"> </em></div></button></div>'),SC=x('<button type="button" class="btn btn-sm btn-secondary">Clear filter</button>'),TC=x('<div class="flex inline-flex"><span class="txt-hint">No providers to select.</span> <!></div>'),$C=x('<!> <div class="grid grid-sm"></div>',1),IC=x('<h4 class="center txt-break">Add OAuth2 provider</h4>'),CC=x('<button type="button" class="btn btn-transparent">Cancel</button>');function EC(n,e){Re(e,!1);const t=Ut();let i=ee(e,"disabled",24,()=>[]),s=M(),a=M(""),o=M([]);function l(){f(),r(s)?.show()}function c(){return r(s)?.hide()}function u(v){t("select",v),c()}function d(){const v=(r(a)||"").toLowerCase();return Rd.filter(_=>!i().includes(_.key)&&(v==""||_.key.toLowerCase().includes(v)||_.title.toLowerCase().includes(v)))}function f(){y(a,"")}re(()=>(r(a),L(i())),()=>{(r(a)!==-1||i()!==-1)&&y(o,d())}),lt();var h={show:l,hide:c};return ze(),ft(mn(n,{btnClose:!1,$$events:{show(v){Qe.call(this,e,v)},hide(v){Qe.call(this,e,v)}},children:(v,_)=>{var p=$C(),m=V(p);Ce(m,{class:"searchbar m-b-sm",children:Ie,$$slots:{default:(k,$)=>{const D=ne(()=>$.uniqueId);var I=xC(),E=V(I),T=g(E,2),C=g(T,2);{var O=P=>{var N=_C();Ot(3,N,()=>Qr,()=>({duration:150,x:5})),ie("click",N,()=>y(a,"")),b(P,N)};te(C,P=>{r(a)!=""&&P(O)})}j(()=>{W(E,"for",r(D)),W(T,"id",r(D))}),xt(T,()=>r(a),P=>y(a,P)),b(k,I)}}});var w=g(m,2);ht(w,5,()=>r(o),k=>k.key,(k,$)=>{var D=kC(),I=S(D),E=S(I),T=S(E);{var C=B=>{var Y=wC();j(()=>{W(Y,"src",`${A(()=>"./")??""}images/oauth2/${r($),A(()=>r($).logo)??""}`),W(Y,"alt",`${r($),A(()=>r($).title)??""} logo`)}),b(B,Y)};te(T,B=>{r($),A(()=>r($).logo)&&B(C)})}var O=g(E,2),P=S(O),N=S(P),R=g(P,2),q=S(R);j(()=>{Se(N,(r($),A(()=>r($).title))),Se(q,(r($),A(()=>r($).key)))}),ie("click",I,()=>u(r($))),b(k,D)},k=>{var $=TC(),D=g(S($),2);{var I=E=>{var T=SC();ie("click",T,f),b(E,T)};te(D,E=>{r(a)!=""&&E(I)})}b(k,$)}),b(v,p)},$$slots:{default:!0,header:(v,_)=>{var p=IC();b(v,p)},footer:(v,_)=>{var p=CC();ie("click",p,c),b(v,p)}},$$legacy:!0}),v=>y(s,v),()=>r(s)),yt(e,"show",l),yt(e,"hide",c),Fe(h)}var OC=x('<input type="checkbox"/> <label>Enable</label>',1),DC=x("<img/>"),PC=x('<i class="ri-puzzle-line txt-sm txt-hint"></i>'),MC=x('<button type="button" class="btn btn-circle btn-hint btn-transparent" aria-label="Provider settings"><i class="ri-settings-4-line"></i></button>'),AC=x('<div class="col-lg-6"><div><figure class="provider-logo"><!></figure> <div class="content"><div class="title"> </div> <em class="txt-hint txt-sm m-r-auto"> </em></div> <!></div></div>'),LC=x('<i class="ri-arrow-up-s-line txt-sm"></i>'),NC=x('<i class="ri-arrow-down-s-line txt-sm"></i>'),RC=x("<label>OAuth2 full name</label> <!>",1),FC=x("<label>OAuth2 avatar</label> <!>",1),qC=x("<label>OAuth2 id</label> <!>",1),zC=x("<label>OAuth2 username</label> <!>",1),jC=x('<div class="block"><div class="grid grid-sm p-t-xs"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div></div>'),UC=x('<!> <div class="grid grid-sm"><!> <div class="col-lg-6"><button class="btn btn-block btn-lg btn-secondary txt-base"><i class="ri-add-line"></i> <span class="txt">Add provider</span></button></div></div> <button type="button"><strong class="txt"> </strong> <!></button> <!>',1),VC=x('<span> </span> <span class="label label-success">Enabled</span>',1),BC=x('<span class="label">Disabled</span>'),HC=x('<i class="ri-error-warning-fill txt-danger"></i>'),WC=x('<div class="inline-flex"><i class="ri-pass-expired-line"></i> <span class="txt">OAuth2</span></div> <div class="flex-fill"></div> <!> <!>',1),YC=x("<!> <!> <!>",1);function KC(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt(),a=M(),o=M();let l=ee(e,"collection",12);const c=["id","email","emailVisibility","verified","tokenKey","password"],u=["text","editor","url","email","json"],d=u.concat("file");let f=M(),h=M(),v=M(!1),_=M([]),p=M([]);function m(E=[]){y(_,E?.filter(T=>u.includes(T.type)&&!c.includes(T.name))?.map(T=>T.name)||[]),y(p,E?.filter(T=>d.includes(T.type)&&!c.includes(T.name))?.map(T=>T.name)||[])}function w(E){for(let T of Rd)if(T.key==E)return T;return null}re(()=>L(l()),()=>{m(l().fields)}),re(()=>L(l()),()=>{F.isEmpty(l().oauth2)&&l(l().oauth2={enabled:!1,mappedFields:{},providers:[]},!0)}),re(()=>t(),()=>{y(a,!F.isEmpty(t()?.oauth2))}),re(()=>L(l()),()=>{y(o,l().oauth2?.providers?.length||0)}),lt(),ze();var k=YC(),$=V(k);Er($,{single:!0,children:(E,T)=>{var C=UC(),O=V(C);Ce(O,{class:"form-field form-field-toggle",name:"oauth2.enabled",children:Ie,$$slots:{default:(ce,ve)=>{const be=ne(()=>ve.uniqueId);var he=OC(),xe=V(he),Te=g(xe,2);j(()=>{W(xe,"id",r(be)),W(Te,"for",r(be))}),en(xe,()=>l().oauth2.enabled,pe=>l(l().oauth2.enabled=pe,!0)),b(ce,he)}}});var P=g(O,2),N=S(P);ht(N,3,()=>(L(l()),A(()=>l().oauth2.providers)),ce=>ce.name,(ce,ve,be)=>{const he=ne(()=>(r(ve),A(()=>w(r(ve).name))));var xe=AC(),Te=S(xe);let pe;var ue=S(Te),we=S(ue);{var ke=Ne=>{var je=DC();j(()=>{W(je,"src",`${A(()=>"./")??""}images/oauth2/${L(r(he)),A(()=>r(he).logo)??""}`),W(je,"alt",`${L(r(he)),A(()=>r(he).title)??""} logo`)}),b(Ne,je)},ae=Ne=>{var je=PC();b(Ne,je)};te(we,Ne=>{L(r(he)),A(()=>r(he)?.logo)?Ne(ke):Ne(ae,!1)})}var _e=g(ue,2),oe=S(_e),me=S(oe),Q=g(oe,2),ye=S(Q),Ee=g(_e,2);{var Ae=Ne=>{var je=MC();We(je,(He,dt)=>ct?.(He,dt),()=>({text:"Edit config",position:"left"})),Ft(()=>ie("click",je,()=>{r(h)?.show(r(he),r(ve),r(be))})),b(Ne,je)};te(Ee,Ne=>{r(he)&&Ne(Ae)})}j(Ne=>{pe=Me(Te,1,"provider-card",null,pe,Ne),Se(me,(r(ve),L(r(he)),A(()=>r(ve).displayName||r(he)?.title||"Custom"))),Se(ye,(r(ve),A(()=>r(ve).name)))},[()=>({error:!F.isEmpty(t()?.oauth2?.providers?.[r(be)])})]),b(ce,xe)});var R=g(N,2),q=S(R),B=g(P,2),Y=S(B),z=S(Y),K=g(Y,2);{var U=ce=>{var ve=LC();b(ce,ve)},J=ce=>{var ve=NC();b(ce,ve)};te(K,ce=>{r(v)?ce(U):ce(J,!1)})}var se=g(B,2);{var le=ce=>{var ve=jC(),be=S(ve),he=S(be),xe=S(he);Ce(xe,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.name",children:Ie,$$slots:{default:(_e,oe)=>{const me=ne(()=>oe.uniqueId);var Q=RC(),ye=V(Q),Ee=g(ye,2);Js(Ee,{get id(){return r(me)},get items(){return r(_)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.name},set selected(Ae){l(l().oauth2.mappedFields.name=Ae,!0)},$$legacy:!0}),j(()=>W(ye,"for",r(me))),b(_e,Q)}}});var Te=g(he,2),pe=S(Te);Ce(pe,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.avatarURL",children:Ie,$$slots:{default:(_e,oe)=>{const me=ne(()=>oe.uniqueId);var Q=FC(),ye=V(Q),Ee=g(ye,2);Js(Ee,{get id(){return r(me)},get items(){return r(p)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.avatarURL},set selected(Ae){l(l().oauth2.mappedFields.avatarURL=Ae,!0)},$$legacy:!0}),j(()=>W(ye,"for",r(me))),b(_e,Q)}}});var ue=g(Te,2),we=S(ue);Ce(we,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.id",children:Ie,$$slots:{default:(_e,oe)=>{const me=ne(()=>oe.uniqueId);var Q=qC(),ye=V(Q),Ee=g(ye,2);Js(Ee,{get id(){return r(me)},get items(){return r(_)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.id},set selected(Ae){l(l().oauth2.mappedFields.id=Ae,!0)},$$legacy:!0}),j(()=>W(ye,"for",r(me))),b(_e,Q)}}});var ke=g(ue,2),ae=S(ke);Ce(ae,{class:"form-field form-field-toggle",name:"oauth2.mappedFields.username",children:Ie,$$slots:{default:(_e,oe)=>{const me=ne(()=>oe.uniqueId);var Q=zC(),ye=V(Q),Ee=g(ye,2);Js(Ee,{get id(){return r(me)},get items(){return r(_)},toggle:!0,zeroFunc:()=>"",selectPlaceholder:"Select field",get selected(){return l().oauth2.mappedFields.username},set selected(Ae){l(l().oauth2.mappedFields.username=Ae,!0)},$$legacy:!0}),j(()=>W(ye,"for",r(me))),b(_e,Q)}}}),Ot(3,ve,()=>pn,()=>({duration:150})),b(ce,ve)};te(se,ce=>{r(v)&&ce(le)})}j(()=>{Me(B,1,`m-t-25 btn btn-sm ${r(v)?"btn-secondary":"btn-hint btn-transparent"}`),Se(z,`Optional ${L(l()),A(()=>l().name)??""} create fields map`)}),ie("click",q,()=>r(f)?.show()),ie("click",B,()=>y(v,!r(v))),b(E,C)},$$slots:{default:!0,header:(E,T)=>{var C=WC(),O=g(V(C),4);{var P=B=>{var Y=VC(),z=V(Y);let K;var U=S(z);j(()=>{K=Me(z,1,"label",null,K,{"label-warning":!r(o),"label-info":r(o)>0}),Se(U,`${r(o)??""}
                ${r(o)==1?"provider":"providers"}`)}),b(B,Y)},N=B=>{var Y=BC();b(B,Y)};te(O,B=>{L(l()),A(()=>l().oauth2.enabled)?B(P):B(N,!1)})}var R=g(O,2);{var q=B=>{var Y=HC();We(Y,(z,K)=>ct?.(z,K),()=>({text:"Has errors",position:"left"})),Ot(3,Y,()=>zn,()=>({duration:150,start:.7})),b(B,Y)};te(R,B=>{r(a)&&B(q)})}b(E,C)}}});var D=g($,2);{let E=ne(()=>(L(l()),A(()=>l().oauth2?.providers?.map(T=>T.name)||[])));ft(EC(D,{get disabled(){return r(E)},$$events:{select:T=>{r(h).show(T.detail,{},l().oauth2?.providers?.length||0)}},$$legacy:!0}),T=>y(f,T),()=>r(f))}var I=g(D,2);ft(RI(I,{$$events:{remove:E=>{const T=E.detail.uiOptions;F.removeByKey(l().oauth2.providers,"name",T.key),l(l().oauth2.providers=l().oauth2.providers,!0)},submit:E=>{const T=E.detail.uiOptions,C=E.detail.config;l(l().oauth2.providers=l().oauth2.providers||[],!0),F.pushOrReplaceByKey(l().oauth2.providers,Object.assign({name:T.key},C),"name"),l(l().oauth2.providers=l().oauth2.providers,!0)}},$$legacy:!0}),E=>y(h,E),()=>r(h)),b(n,k),Fe(),s()}var JC=x('<i class="ri-information-line link-hint"></i>'),ZC=x('<input type="checkbox"/> <label>Enable</label> <!>',1),GC=x('<label>Duration (in seconds)</label> <input type="number" min="0" step="1" required=""/>',1),XC=x('<label>Generated password length</label> <input type="number" min="0" step="1" required=""/>',1),QC=x('<!> <div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>',1),eE=x('<span class="label label-success">Enabled</span>'),tE=x('<span class="label">Disabled</span>'),nE=x('<i class="ri-error-warning-fill txt-danger"></i>'),iE=x('<div class="inline-flex"><i class="ri-time-line"></i> <span class="txt">One-time password (OTP)</span></div> <div class="flex-fill"></div> <!> <!>',1);function rE(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt(),a=M(),o=M();let l=ee(e,"collection",12);re(()=>L(l()),()=>{y(a,l()?.system&&l()?.name==="_superusers")}),re(()=>L(l()),()=>{F.isEmpty(l().otp)&&l(l().otp={enabled:!0,duration:300,length:8},!0)}),re(()=>t(),()=>{y(o,!F.isEmpty(t()?.otp))}),lt(),ze(),Er(n,{single:!0,children:(c,u)=>{var d=QC(),f=V(d);Ce(f,{class:"form-field form-field-toggle",name:"otp.enabled",children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=ZC(),I=V(D),E=g(I,2),T=g(E,2);{var C=O=>{var P=JC();We(P,(N,R)=>ct?.(N,R),()=>({text:"Superusers can have OTP only as part of Two-factor authentication.",position:"right"})),b(O,P)};te(T,O=>{r(a)&&O(C)})}j(()=>{W(I,"id",r($)),W(E,"for",r($))}),en(I,()=>l().otp.enabled,O=>l(l().otp.enabled=O,!0)),ie("change",I,O=>{r(a)&&l(l().mfa.enabled=O.target.checked,!0)}),b(w,D)}}});var h=g(f,2),v=S(h),_=S(v);Ce(_,{class:"form-field form-field-toggle required",name:"otp.duration",children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=GC(),I=V(D),E=g(I,2);j(()=>{W(I,"for",r($)),W(E,"id",r($))}),xt(E,()=>l().otp.duration,T=>l(l().otp.duration=T,!0)),b(w,D)}}});var p=g(v,2),m=S(p);Ce(m,{class:"form-field form-field-toggle required",name:"otp.length",children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=XC(),I=V(D),E=g(I,2);j(()=>{W(I,"for",r($)),W(E,"id",r($))}),xt(E,()=>l().otp.length,T=>l(l().otp.length=T,!0)),b(w,D)}}}),b(c,d)},$$slots:{default:!0,header:(c,u)=>{var d=iE(),f=g(V(d),4);{var h=m=>{var w=eE();b(m,w)},v=m=>{var w=tE();b(m,w)};te(f,m=>{L(l()),A(()=>l().otp.enabled)?m(h):m(v,!1)})}var _=g(f,2);{var p=m=>{var w=nE();We(w,(k,$)=>ct?.(k,$),()=>({text:"Has errors",position:"left"})),Ot(3,w,()=>zn,()=>({duration:150,start:.7})),b(m,w)};te(_,m=>{r(o)&&m(p)})}b(c,d)}}}),Fe(),s()}var sE=x('<i class="ri-information-line link-hint"></i>'),aE=x('<input type="checkbox"/> <label>Enable</label> <!>',1),oE=x('<label><span class="txt">Unique identity fields</span></label> <!>',1),lE=x("<!> <!>",1),cE=x('<span class="label label-success">Enabled</span>'),uE=x('<span class="label">Disabled</span>'),dE=x('<i class="ri-error-warning-fill txt-danger"></i>'),fE=x('<div class="inline-flex"><i class="ri-lock-password-line"></i> <span class="txt">Identity/Password</span></div> <div class="flex-fill"></div> <!> <!>',1);function hE(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt(),a=M(),o=M();let l=ee(e,"collection",12),c=M([]),u=M("");function d(){y(c,[{value:"email"}]);const f=l()?.fields||[],h=l()?.indexes||[];y(u,h.join(""));for(let v of h){const _=F.parseIndex(v);if(!_.unique||_.columns.length!=1||_.columns[0].name=="email")continue;const p=f.find(m=>!m.hidden&&m.name.toLowerCase()==_.columns[0].name.toLowerCase());p&&r(c).push({value:p.name})}}re(()=>L(l()),()=>{y(a,l()?.system&&l()?.name==="_superusers")}),re(()=>L(l()),()=>{F.isEmpty(l()?.passwordAuth)&&l(l().passwordAuth={enabled:!0,identityFields:["email"]},!0)}),re(()=>t(),()=>{y(o,!F.isEmpty(t()?.passwordAuth))}),re(()=>(L(l()),r(u)),()=>{l()&&r(u)!=l().indexes.join("")&&d()}),lt(),ze(),Er(n,{single:!0,children:(f,h)=>{var v=lE(),_=V(v);Ce(_,{class:"form-field form-field-toggle",name:"passwordAuth.enabled",children:Ie,$$slots:{default:(m,w)=>{const k=ne(()=>w.uniqueId);var $=aE(),D=V($),I=g(D,2),E=g(I,2);{var T=C=>{var O=sE();We(O,(P,N)=>ct?.(P,N),()=>({text:"Superusers are required to have password auth enabled.",position:"right"})),b(C,O)};te(E,C=>{r(a)&&C(T)})}j(()=>{W(D,"id",r(k)),D.disabled=r(a),W(I,"for",r(k))}),en(D,()=>l().passwordAuth.enabled,C=>l(l().passwordAuth.enabled=C,!0)),b(m,$)}}});var p=g(_,2);Ce(p,{class:"form-field required m-0",name:"passwordAuth.identityFields",children:Ie,$$slots:{default:(m,w)=>{const k=ne(()=>w.uniqueId);var $=oE(),D=V($),I=g(D,2);On(I,{get items(){return r(c)},multiple:!0,get keyOfSelected(){return l().passwordAuth.identityFields},set keyOfSelected(E){l(l().passwordAuth.identityFields=E,!0)},$$legacy:!0}),j(()=>W(D,"for",r(k))),b(m,$)}}}),b(f,v)},$$slots:{default:!0,header:(f,h)=>{var v=fE(),_=g(V(v),4);{var p=$=>{var D=cE();b($,D)},m=$=>{var D=uE();b($,D)};te(_,$=>{L(l()),A(()=>l().passwordAuth.enabled)?$(p):$(m,!1)})}var w=g(_,2);{var k=$=>{var D=dE();We(D,(I,E)=>ct?.(I,E),()=>({text:"Has errors",position:"left"})),Ot(3,D,()=>zn,()=>({duration:150,start:.7})),b($,D)};te(w,$=>{r(o)&&$(k)})}b(f,v)}}}),Fe(),s()}var vE=x('<div class="form-field-block"><input type="radio" name="template"/> <label> </label></div>'),pE=x("<label>Auth collection</label> <!>",1),mE=x('<label>To email address</label> <input type="email" required=""/>',1),gE=x('<form autocomplete="off"><!> <!> <!></form>'),bE=x('<h4 class="center txt-break">Send test email</h4>'),yE=x('<button type="button" class="btn btn-transparent">Close</button> <button type="submit"><i class="ri-mail-send-line"></i> <span class="txt">Send</span></button>',1);function nb(n,e){Re(e,!1);const t=M(),i=[],s=Ut(),a="email_test_"+F.randomString(5),o="last_email_test",l="email_test_request",c=[{label:"Verification",value:"verification"},{label:"Password reset",value:"password-reset"},{label:"Confirm email change",value:"email-change"},{label:"OTP",value:"otp"},{label:"Login alert",value:"login-alert"}];let u=M(),d=M(""),f=M(localStorage.getItem(o)),h=M(c[0].value),v=M(!1),_=null,p=M([]),m=M(!1),w=M(!1);function k(T="",C="",O=""){sn({}),y(w,!1),y(d,T||""),r(d)||I(),y(f,C||localStorage.getItem(o)),y(h,O||c[0].value),r(u)?.show()}function $(){return clearTimeout(_),r(u)?.hide()}async function D(){if(!(!r(t)||r(v)||!r(d))){y(v,!0),localStorage?.setItem(o,r(f)),clearTimeout(_),_=setTimeout(()=>{De.cancelRequest(l),lr("Test email send timeout.")},3e4);try{await De.settings.testEmail(r(d),r(f),r(h),{$cancelKey:l}),vn("Successfully sent test email."),s("submit"),y(v,!1),await $n(),$()}catch(T){y(v,!1),De.error(T)}clearTimeout(_)}}async function I(){y(w,!0),y(m,!0);try{y(p,await De.collections.getFullList({filter:"type='auth'",sort:"+name",requestKey:a+"_collections_loading"})),y(d,r(p)[0]?.id||""),y(m,!1)}catch(T){T.isAbort||(y(m,!1),De.error(T))}}re(()=>(r(f),r(h),r(d)),()=>{y(t,!!r(f)&&!!r(h)&&!!r(d))}),lt();var E={show:k,hide:$};ze();{let T=ne(()=>!r(v)),C=ne(()=>!r(v));ft(mn(n,{class:"overlay-panel-sm email-test-popup",get overlayClose(){return r(T)},get escClose(){return r(C)},beforeHide:()=>!r(v),popup:!0,$$events:{show(O){Qe.call(this,e,O)},hide(O){Qe.call(this,e,O)}},children:(O,P)=>{var N=gE(),R=S(N);Ce(R,{class:"form-field required",name:"template",children:Ie,$$slots:{default:(z,K)=>{const U=ne(()=>K.uniqueId);var J=kt(),se=V(J);ht(se,1,()=>c,le=>le.value,(le,ce)=>{var ve=vE(),be=S(ve),he,xe=g(be,2),Te=S(xe);j(()=>{W(be,"id",(L(r(U)),r(ce),A(()=>r(U)+r(ce).value))),he!==(he=(r(ce),A(()=>r(ce).value)))&&(be.value=(be.__value=(r(ce),A(()=>r(ce).value)))??""),W(xe,"for",(L(r(U)),r(ce),A(()=>r(U)+r(ce).value))),Se(Te,(r(ce),A(()=>r(ce).label)))}),a_(i,[],be,()=>(r(ce),A(()=>r(ce).value),r(h)),pe=>y(h,pe)),b(le,ve)}),b(z,J)}}});var q=g(R,2);{var B=z=>{Ce(z,{class:"form-field required",name:"collection",children:Ie,$$slots:{default:(K,U)=>{const J=ne(()=>U.uniqueId);var se=pE(),le=V(se),ce=g(le,2);{let ve=ne(()=>r(m)?"Loading auth collections...":"Select auth collection");On(ce,{get id(){return r(J)},get selectPlaceholder(){return r(ve)},noOptionsText:"No auth collections found",selectionKey:"id",get items(){return r(p)},get keyOfSelected(){return r(d)},set keyOfSelected(be){y(d,be)},$$legacy:!0})}j(()=>W(le,"for",r(J))),b(K,se)}}})};te(q,z=>{r(w)&&z(B)})}var Y=g(q,2);Ce(Y,{class:"form-field required m-0",name:"email",children:Ie,$$slots:{default:(z,K)=>{const U=ne(()=>K.uniqueId);var J=mE(),se=V(J),le=g(se,2);Bi(le,!0),j(()=>{W(se,"for",r(U)),W(le,"id",r(U))}),xt(le,()=>r(f),ce=>y(f,ce)),b(z,J)}}}),j(()=>W(N,"id",a)),ie("submit",N,Et(()=>D())),b(O,N)},$$slots:{default:!0,header:(O,P)=>{var N=bE();b(O,N)},footer:(O,P)=>{var N=yE(),R=V(N),q=g(R,2);let B;j(()=>{R.disabled=r(v),W(q,"form",a),B=Me(q,1,"btn btn-expanded",null,B,{"btn-loading":r(v)}),q.disabled=!r(t)||r(v)}),ie("click",R,$),b(O,N)}},$$legacy:!0}),O=>y(u,O),()=>r(u))}return yt(e,"show",k),yt(e,"hide",$),Fe(E)}var _E=x('<input type="checkbox"/> <label>Send email alert for new logins</label>',1),xE=x('<h4 class="section-title"><div class="flex"><span class="txt">Auth methods</span> <div class="m-l-auto handle"><!></div></div></h4> <div class="accordions m-b-35"><!> <!> <!> <!></div> <h4 class="section-title"><span class="txt">Mail templates</span> <button type="button" class="btn btn-xs m-l-auto btn-secondary">Send test email</button></h4> <div class="accordions m-b-35"><div class="accordions"></div></div> <h4 class="section-title">Other</h4> <div class="accordions m-b-base"><!></div> <!>',1);function wE(n,e){Re(e,!1);const t=M(),i=M(),s=M(),a=M(),o=M(),l=M();let c=ee(e,"collection",12),u=M([]),d=M();re(()=>L(c()),()=>{y(t,c().system&&c().name==="_superusers")}),re(()=>L(c()),()=>{typeof c().otp?.emailTemplate>"u"&&(c(c().otp=c().otp||{},!0),c(c().otp.emailTemplate={},!0))}),re(()=>L(c()),()=>{typeof c().authAlert?.emailTemplate>"u"&&(c(c().authAlert=c().authAlert||{},!0),c(c().authAlert.emailTemplate={},!0))}),re(()=>L(c()),()=>{y(i,{key:"resetPasswordTemplate",label:"Default Password reset email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().resetPasswordTemplate})}),re(()=>L(c()),()=>{y(s,{key:"verificationTemplate",label:"Default Verification email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().verificationTemplate})}),re(()=>L(c()),()=>{y(a,{key:"confirmEmailChangeTemplate",label:"Default Confirm email change email template",placeholders:["APP_NAME","APP_URL","RECORD:*","TOKEN"],config:c().confirmEmailChangeTemplate})}),re(()=>L(c()),()=>{y(o,{key:"otp.emailTemplate",label:"Default OTP email template",placeholders:["APP_NAME","APP_URL","RECORD:*","OTP","OTP_ID"],config:c().otp.emailTemplate})}),re(()=>L(c()),()=>{y(l,{key:"authAlert.emailTemplate",label:"Default Login alert email template",placeholders:["APP_NAME","APP_URL","RECORD:*","ALERT_INFO"],config:c().authAlert.emailTemplate})}),re(()=>(r(t),r(i),r(o),r(l),r(s),r(a)),()=>{y(u,r(t)?[r(i),r(o),r(l)]:[r(s),r(i),r(a),r(o),r(l)])}),lt(),ze();var f=xE(),h=V(f),v=S(h),_=g(S(v),2),p=S(_);Ce(p,{class:"form-field form-field-sm form-field-toggle m-0",name:"authAlert.enabled",inlineError:!0,children:Ie,$$slots:{default:(q,B)=>{const Y=ne(()=>B.uniqueId);var z=_E(),K=V(z),U=g(K,2);j(()=>{W(K,"id",r(Y)),W(U,"for",r(Y))}),en(K,()=>c().authAlert.enabled,J=>c(c().authAlert.enabled=J,!0)),b(q,z)}}});var m=g(h,2),w=S(m);hE(w,{get collection(){return c()},set collection(q){c(q)},$$legacy:!0});var k=g(w,2);{var $=q=>{KC(q,{get collection(){return c()},set collection(B){c(B)},$$legacy:!0})};te(k,q=>{r(t)||q($)})}var D=g(k,2);rE(D,{get collection(){return c()},set collection(q){c(q)},$$legacy:!0});var I=g(D,2);pI(I,{get collection(){return c()},set collection(q){c(q)},$$legacy:!0});var E=g(m,2),T=g(S(E),2),C=g(E,2),O=S(C);ht(O,5,()=>r(u),q=>q.key,(q,B,Y)=>{{let z=ne(()=>(r(B),A(()=>r(B)?.placeholders)));J$(q,{single:!0,get key(){return r(B),A(()=>r(B).key)},get title(){return r(B),A(()=>r(B).label)},get placeholders(){return r(z)},get config(){return r(B).config},set config(K){r(B).config=K,Ys(()=>r(u))},$$legacy:!0})}});var P=g(C,4),N=S(P);nI(N,{get collection(){return c()},set collection(q){c(q)},$$legacy:!0});var R=g(P,2);ft(nb(R,{$$legacy:!0}),q=>y(d,q),()=>r(d)),ie("click",T,()=>r(d)?.show(c().id)),b(n,f),Fe()}var kE=x("<div><!></div>");function fa(n,e){Re(e,!1);const t=Ut();let i=ee(e,"index",8),s=ee(e,"list",28,()=>[]),a=ee(e,"group",8,"default"),o=ee(e,"disabled",8,!1),l=ee(e,"dragHandleClass",8,""),c=M(!1),u=M(!1);function d(p,m){if(!(!p||o())){if(l()&&!p.target.classList.contains(l())){y(u,!1),y(c,!1),p.preventDefault();return}y(c,!0),p.dataTransfer.effectAllowed="move",p.dataTransfer.dropEffect="move",p.dataTransfer.setData("text/plain",JSON.stringify({index:m,group:a()})),t("drag",p)}}function f(p,m){if(y(u,!1),y(c,!1),!p||o())return;p.dataTransfer.dropEffect="move";let w={};try{w=JSON.parse(p.dataTransfer.getData("text/plain"))}catch{}if(w.group!=a())return;const k=w.index<<0;k<m?(s().splice(m+1,0,s()[k]),s().splice(k,1)):(s().splice(m,0,s()[k]),s().splice(k+1,1)),s(s()),t("sort",{oldIndex:k,newIndex:m,list:s()})}ze();var h=kE();let v;var _=S(h);Qt(_,e,"default",{get dragging(){return r(c)},get dragover(){return r(u)}},null),j(()=>{W(h,"draggable",!o()),v=Me(h,1,"draggable svelte-1d7vg8v",null,v,{dragging:r(c),dragover:r(u)})}),ie("dragover",h,Et(()=>{y(u,!0)})),ie("dragleave",h,Et(()=>{y(u,!1)})),ie("dragend",h,()=>{y(u,!1),y(c,!1)}),ie("dragstart",h,p=>d(p,i())),ie("drop",h,p=>f(p,i())),b(n,h),Fe()}var SE=x('<input type="checkbox"/> <label>Unique</label>',1),TE=x('<textarea disabled="" rows="7" placeholder="Loading..."></textarea>'),$E=x('<button type="button"> </button>'),IE=x('<div class="inline-flex gap-10"><span class="txt txt-hint">Presets</span> <!></div>'),CE=x("<!> <!> <!>",1),EE=x("<h4> </h4>"),OE=x('<button type="button" class="btn btn-sm btn-circle btn-hint btn-transparent m-r-auto" aria-label="Delete"><i class="ri-delete-bin-7-line"></i></button>'),DE=x('<!> <button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button"><span class="txt">Set index</span></button>',1);function PE(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["show","hide","collection"]);Re(e,!1);const s=M(),a=M(),o=M(),l=Ut();let c=ee(e,"collection",8),u=M(),d=M(""),f=M(""),h=M(""),v=M(),_=M(!1);function p(E,T){return y(h,F.isEmpty(T)?"":T),y(d,E||w()),y(f,r(d)),r(u)?.show()}function m(){return r(u)?.hide()}function w(){const E=F.parseIndex("");return E.tableName=c()?.name||"",F.buildIndex(E)}function k(){l("remove",r(d)),m()}function $(){r(o).length&&(l("submit",{old:r(d),new:r(f)}),m())}function D(E){const T=F.clone(r(a)),C=E.toLowerCase(),O=T.columns.findIndex(P=>P.name.toLowerCase()==C);O>=0?T.columns.splice(O,1):F.pushUnique(T.columns,{name:E}),y(f,F.buildIndex(T))}fn(async()=>{y(_,!0);try{y(v,(await Wt(async()=>{const{default:E}=await import("./CodeEditor-UHXdE3Dc.js");return{default:E}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(E){console.warn(E)}y(_,!1)}),re(()=>L(c()),()=>{y(s,c()?.fields?.filter(E=>!E.toDelete&&E.name!="id")?.map(E=>E.name)||[])}),re(()=>r(f),()=>{y(a,F.parseIndex(r(f)))}),re(()=>r(a),()=>{y(o,r(a).columns?.map(E=>E.name.toLowerCase())||[])}),lt();var I={show:p,hide:m};return ze(),ft(mn(n,nn({popup:!0},()=>i,{$$events:{hide(E){Qe.call(this,e,E)},show(E){Qe.call(this,e,E)}},children:(E,T)=>{var C=CE(),O=V(C);Ce(O,{class:"form-field form-field-toggle m-b-sm",children:Ie,$$slots:{default:(q,B)=>{const Y=ne(()=>B.uniqueId);var z=SE(),K=V(z),U=g(K,2);j(()=>{W(K,"id",r(Y)),Wr(K,(r(a),A(()=>r(a).unique))),W(U,"for",r(Y))}),ie("change",K,J=>{ot(a,r(a).unique=J.target.checked),ot(a,r(a).tableName=r(a).tableName||c()?.name),y(f,F.buildIndex(r(a)))}),b(q,z)}}});var P=g(O,2);{let q=ne(()=>`indexes.${r(h)||""}`);Ce(P,{class:"form-field required m-b-sm",get name(){return r(q)},children:Ie,$$slots:{default:(B,Y)=>{const z=ne(()=>Y.uniqueId);var K=kt(),U=V(K);{var J=le=>{var ce=TE();b(le,ce)},se=le=>{var ce=kt(),ve=V(ce);{let be=ne(()=>(L(c()),A(()=>`eg. CREATE INDEX idx_test on ${c()?.name} (created)`)));mi(ve,()=>r(v),(he,xe)=>{xe(he,{get id(){return r(z)},get placeholder(){return r(be)},language:"sql-create-index",minHeight:"85",get value(){return r(f)},set value(Te){y(f,Te)},$$legacy:!0})})}b(le,ce)};te(U,le=>{r(_)?le(J):le(se,!1)})}b(B,K)}}})}var N=g(P,2);{var R=q=>{var B=IE(),Y=g(S(B),2);ht(Y,1,()=>r(s),At,(z,K)=>{var U=$E();let J;var se=S(U);j(le=>{J=Me(U,1,"label link-primary",null,J,le),Se(se,r(K))},[()=>({"label-info":r(o).includes(r(K).toLowerCase())})]),ie("click",U,()=>D(r(K))),b(z,U)}),b(q,B)};te(N,q=>{r(s),A(()=>r(s).length>0)&&q(R)})}b(E,C)},$$slots:{default:!0,header:(E,T)=>{var C=EE(),O=S(C);j(()=>Se(O,`${r(d)?"Update":"Create"} index`)),b(E,C)},footer:(E,T)=>{var C=DE(),O=V(C);{var P=B=>{var Y=OE();We(Y,(z,K)=>ct?.(z,K),()=>({text:"Delete",position:"top"})),Ft(()=>ie("click",Y,()=>k())),b(B,Y)};te(O,B=>{r(d)!=""&&B(P)})}var N=g(O,2),R=g(N,2);let q;j(()=>q=Me(R,1,"btn",null,q,{"btn-disabled":r(o).length<=0})),ie("click",N,()=>m()),ie("click",R,()=>$()),b(E,C)}},$$legacy:!0})),E=>y(u,E),()=>r(u)),yt(e,"show",p),yt(e,"hide",m),Fe(I)}var ME=x('<i class="ri-error-warning-fill txt-danger"></i>'),AE=x("<strong>Unique:</strong>"),LE=x('<button type="button"><!> <span class="txt"> </span></button>'),NE=x('<div class="section-title"> <!></div> <div class="indexes-list svelte-175w4t2"><!> <button type="button" class="btn btn-xs btn-transparent btn-pill btn-outline"><span class="txt">+</span> <span class="txt">New index</span></button></div> <!>',1);function RE(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt();let a=ee(e,"collection",12),o=M();function l(w,k){for(let $=0;$<a().indexes.length;$++)if(a().indexes[$]==w){a(a().indexes[$]=k,!0),Zn("indexes."+$);return}a().indexes.push(k),a(a().indexes=a().indexes,!0)}ze();var c=NE(),u=V(c),d=S(u),f=g(d);{var h=w=>{var k=ME();We(k,($,D)=>ct?.($,D),()=>t()?.indexes.message),Ot(3,k,()=>zn,()=>({duration:150})),b(w,k)};te(f,w=>{t(),A(()=>t()?.indexes?.message)&&w(h)})}var v=g(u,2),_=S(v);ht(_,1,()=>(L(a()),A(()=>a()?.indexes||[])),At,(w,k,$)=>{const D=ne(()=>(L(F),r(k),A(()=>F.parseIndex(r(k)))));var I=LE(),E=S(I);{var T=P=>{var N=AE();b(P,N)};te(E,P=>{L(r(D)),A(()=>r(D).unique)&&P(T)})}var C=g(E,2),O=S(C);We(I,(P,N)=>ct?.(P,N),()=>t().indexes?.[$]?.message||""),Ft(()=>ie("click",I,()=>r(o)?.show(r(k),$))),j(P=>{Me(I,1,`label link-primary ${t(),A(()=>t().indexes?.[$]?.message?"label-danger":"")??""}`,"svelte-175w4t2"),Se(O,P)},[()=>(L(r(D)),A(()=>r(D).columns?.map(P=>P.name).join(", ")))]),b(w,I)});var p=g(_,2),m=g(v,2);ft(PE(m,{get collection(){return a()},set collection(w){a(w)},$$events:{remove:w=>{for(let k=0;k<a().indexes.length;k++)if(a().indexes[k]==w.detail){a().indexes.splice(k,1),Zn("indexes."+k);break}a(a().indexes=a().indexes,!0)},submit:w=>{t().indexes?.message&&Zn("indexes"),l(w.detail.old,w.detail.new)}},$$legacy:!0}),w=>y(o,w),()=>r(o)),j(()=>Se(d,`Unique constraints and indexes (${L(a()),A(()=>a()?.indexes?.length||0)??""}) `)),ie("click",p,()=>r(o)?.show()),b(n,c),Fe(),s()}var FE=x('<button type="button" role="menuitem" class="dropdown-item svelte-167hycg"><i aria-hidden="true"></i> <span class="txt"> </span></button>'),qE=x('<div tabindex="0" role="button"><i class="ri-add-line" aria-hidden="true"></i> <div class="txt">New field</div> <!></div>');function zE(n,e){Re(e,!1);let t=ee(e,"class",8,"");const i=Ut(),s=[{label:"Plain text",value:"text",icon:F.getFieldTypeIcon("text")},{label:"Rich editor",value:"editor",icon:F.getFieldTypeIcon("editor")},{label:"Number",value:"number",icon:F.getFieldTypeIcon("number")},{label:"Bool",value:"bool",icon:F.getFieldTypeIcon("bool")},{label:"Email",value:"email",icon:F.getFieldTypeIcon("email")},{label:"URL",value:"url",icon:F.getFieldTypeIcon("url")},{label:"Datetime",value:"date",icon:F.getFieldTypeIcon("date")},{label:"Autodate",value:"autodate",icon:F.getFieldTypeIcon("autodate")},{label:"Select",value:"select",icon:F.getFieldTypeIcon("select")},{label:"File",value:"file",icon:F.getFieldTypeIcon("file")},{label:"Relation",value:"relation",icon:F.getFieldTypeIcon("relation")},{label:"JSON",value:"json",icon:F.getFieldTypeIcon("json")},{label:"Geo Point",value:"geoPoint",icon:F.getFieldTypeIcon("geoPoint")}];function a(c){i("select",c)}ze();var o=qE(),l=g(S(o),4);Jn(l,{class:"dropdown field-types-dropdown",children:(c,u)=>{var d=kt(),f=V(d);ht(f,1,()=>s,At,(h,v)=>{var _=FE(),p=S(_),m=g(p,2),w=S(m);j(()=>{Me(p,1,`icon ${r(v),A(()=>r(v).icon)??""}`,"svelte-167hycg"),Se(w,(r(v),A(()=>r(v).label)))}),ie("click",_,()=>a(r(v).value)),b(h,_)}),b(c,d)},$$slots:{default:!0}}),j(()=>Me(o,1,`field-types-btn ${t()??""}`,"svelte-167hycg")),b(n,o),Fe()}let Rc=[];var jE=x('<div class="drag-handle-wrapper" aria-label="Sort"><span class="drag-handle"></span></div>'),UE=x('<span class="label label-success"> </span>'),VE=x('<span class="label label-danger">Hidden</span>'),BE=x('<div class="field-labels"><!> <!></div>  <div><i></i></div> <input type="text" required="" spellcheck="false" placeholder="Field name"/>',1),HE=x('<span class="separator"></span>'),WE=x('<button type="button" class="btn btn-sm btn-circle btn-success btn-transparent options-trigger" aria-label="Restore"><i class="ri-restart-line"></i></button>'),YE=x('<button type="button"><i class="ri-settings-3-line"></i></button>'),KE=x('<input type="checkbox"/> <label><span class="txt"> </span> <i class="ri-information-line link-hint"></i></label>',1),JE=x('<input type="checkbox"/> <label><span class="txt">Hidden</span> <i class="ri-information-line link-hint"></i></label>',1),ZE=x('<input type="checkbox"/> <label><span class="txt">Presentable</span> <i></i></label>',1),GE=x('<button type="button" class="dropdown-item" role="menuitem"><span class="txt">Remove</span></button>'),XE=x('<button type="button" class="dropdown-item" role="menuitem"><span class="txt">Duplicate</span></button> <!>',1),QE=x('<div class="m-l-auto txt-right"><div class="inline-flex flex-gap-sm flex-nowrap"><div tabindex="0" role="button" title="More field options" class="btn btn-circle btn-sm btn-transparent"><i class="ri-more-line" aria-hidden="true"></i> <!></div></div></div>'),eO=x('<div class="schema-field-options"><div class="hidden-empty m-b-sm"><!></div> <div class="schema-field-options-footer"><!> <!> <!> <!> <!></div></div>'),tO=x('<div><div class="schema-field-header"><!> <!> <!> <!></div> <!></div>');function gi(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt(),a=M(),o=M(),l=M(),c=M(),u="f_"+F.randomString(8),d=Ut(),f={bool:"Nonfalsey",number:"Nonzero"},h=["password","tokenKey","id","autodate"],v=["password","tokenKey","id","email"],_=["password","tokenKey"];let p=ee(e,"key",8,""),m=ee(e,"field",28,()=>F.initSchemaField()),w=ee(e,"draggable",8,!0),k=ee(e,"collection",24,()=>({})),$=M(),D=M(!1);function I(){m().id?m(m()._toDelete=!0,!0):(P(),d("remove"))}function E(he){if(!he)return;const xe=m().name;m(m().name=F.slugify(he.value),!0),he.value=m().name,d("rename",{oldName:xe,newName:m().name})}function T(){m(m()._toDelete=!1,!0),sn({})}function C(){m()._toDelete||(P(),d("duplicate"))}function O(){y(D,!0),R()}function P(){y(D,!1)}function N(){r(D)?P():O()}function R(){for(let he of Rc)he.id!=u&&he.collapse()}fn(()=>(Rc.push({id:u,collapse:P}),m().onMountSelect&&(m(m().onMountSelect=!1,!0),r($)?.select()),()=>{F.removeByKey(Rc,"id",u)})),re(()=>L(k()),()=>{y(a,k()?.type=="auth")}),re(()=>L(m()),()=>{m()._toDelete&&m()._originalName&&m().name!==m()._originalName&&m(m().name=m()._originalName,!0)}),re(()=>L(m()),()=>{!m()._originalName&&m().name&&m(m()._originalName=m().name,!0)}),re(()=>L(m()),()=>{typeof m()._toDelete>"u"&&m(m()._toDelete=!1,!0)}),re(()=>L(m()),()=>{m().required&&m(m().nullable=!1,!0)}),re(()=>L(m()),()=>{y(o,!m()._toDelete)}),re(()=>(t(),L(p())),()=>{y(l,!F.isEmpty(F.getNestedVal(t(),`fields.${p()}`)))}),re(()=>L(m()),()=>{y(c,f[m()?.type]||"Nonempty")}),lt(),ze();var q=tO();let B;var Y=S(q),z=S(Y);{var K=he=>{var xe=jE();W(xe,"draggable",!0),b(he,xe)};te(z,he=>{r(o)&&w()&&he(K)})}var U=g(z,2);{let he=ne(()=>r(o)?"":"disabled");Ce(U,{get class(){return`form-field required m-0 ${r(he)??""}`},get name(){return`fields.${p()??""}.name`},inlineError:!0,children:(xe,Te)=>{var pe=BE(),ue=V(pe),we=S(ue);{var ke=Ee=>{var Ae=UE(),Ne=S(Ae);j(()=>Se(Ne,r(c))),b(Ee,Ae)};te(we,Ee=>{L(m()),A(()=>m().required)&&Ee(ke)})}var ae=g(we,2);{var _e=Ee=>{var Ae=VE();b(Ee,Ae)};te(ae,Ee=>{L(m()),A(()=>m().hidden)&&Ee(_e)})}var oe=g(ue,2);let me;var Q=S(oe);We(oe,(Ee,Ae)=>ct?.(Ee,Ae),()=>m().type+(m().system?" (system)":"")),Ft(()=>ie("click",oe,()=>r($)?.focus()));var ye=g(oe,2);ft(ye,Ee=>y($,Ee),()=>r($)),j(Ee=>{me=Me(oe,1,"form-field-addon prefix field-type-icon",null,me,{"txt-disabled":!r(o)||m().system}),Me(Q,1,Ee),ye.disabled=(r(o),L(m()),A(()=>!r(o)||m().system)),qn(ye,(L(m()),A(()=>m().name)))},[()=>In((L(F),L(m()),A(()=>F.getFieldTypeIcon(m().type))))]),ie("compositionend",ye,Ee=>{Ee.data&&E(Ee.target)}),ie("input",ye,Ee=>{Ee.isComposing||E(Ee.target)}),b(xe,pe)},$$slots:{default:!0}})}var J=g(U,2);Qt(J,e,"default",{get interactive(){return r(o)},get hasErrors(){return r(l)}},he=>{var xe=HE();b(he,xe)});var se=g(J,2);{var le=he=>{var xe=WE();We(xe,(Te,pe)=>ct?.(Te,pe),()=>"Restore"),Ft(()=>ie("click",xe,T)),b(he,xe)},ce=he=>{var xe=YE();let Te;j(()=>{W(xe,"aria-label",`Toggle ${L(m()),A(()=>m().name)??""} field options`),Te=Me(xe,1,`btn btn-sm btn-circle options-trigger ${r(D)?"btn-secondary":"btn-transparent"}`,null,Te,{"btn-hint":!r(D)&&!r(l),"btn-danger":r(l)}),W(xe,"aria-expanded",r(D))}),ie("click",xe,N),b(he,xe)};te(se,he=>{L(m()),A(()=>m()._toDelete)?he(le):r(o)&&he(ce,1)})}var ve=g(Y,2);{var be=he=>{var xe=eO(),Te=S(xe),pe=S(Te);Qt(pe,e,"options",{get interactive(){return r(o)},get hasErrors(){return r(l)}},null);var ue=g(Te,2),we=S(ue);{var ke=He=>{Ce(He,{class:"form-field form-field-toggle",name:"requried",children:Ie,$$slots:{default:(dt,$e)=>{const Be=ne(()=>$e.uniqueId);var Ze=KE(),Je=V(Ze),st=g(Je,2),Ye=S(st),Ke=S(Ye),qe=g(Ye,2);We(qe,(Le,Ve)=>ct?.(Le,Ve),()=>({text:`Requires the field value NOT to be ${F.zeroDefaultStr(m())}.`})),j(()=>{W(Je,"id",r(Be)),W(st,"for",r(Be)),Se(Ke,r(c))}),en(Je,()=>m().required,Le=>m(m().required=Le,!0)),b(dt,Ze)}}})},ae=rn(()=>(L(m()),r(a),A(()=>!m().primaryKey&&m().type!="autodate"&&(!r(a)||!h.includes(m().name)))));te(we,He=>{r(ae)&&He(ke)})}var _e=g(we,2);{var oe=He=>{Ce(He,{class:"form-field form-field-toggle",name:"hidden",children:Ie,$$slots:{default:(dt,$e)=>{const Be=ne(()=>$e.uniqueId);var Ze=JE(),Je=V(Ze),st=g(Je,2),Ye=g(S(st),2);We(Ye,(Ke,qe)=>ct?.(Ke,qe),()=>({text:"Hide from the JSON API response and filters."})),j(()=>{W(Je,"id",r(Be)),W(st,"for",r(Be))}),en(Je,()=>m().hidden,Ke=>m(m().hidden=Ke,!0)),ie("change",Je,Ke=>{Ke.target.checked&&m(m().presentable=!1,!0)}),b(dt,Ze)}}})},me=rn(()=>(L(m()),r(a),A(()=>!m().primaryKey&&(!r(a)||!v.includes(m().name)))));te(_e,He=>{r(me)&&He(oe)})}var Q=g(_e,2);{var ye=He=>{Ce(He,{class:"form-field form-field-toggle m-0",name:"presentable",children:Ie,$$slots:{default:(dt,$e)=>{const Be=ne(()=>$e.uniqueId);var Ze=ZE(),Je=V(Ze),st=g(Je,2),Ye=g(S(st),2);We(Ye,(Ke,qe)=>ct?.(Ke,qe),()=>({text:"Whether the field should be preferred in the Superuser UI relation listings (default to auto)."})),j(()=>{W(Je,"id",r(Be)),Je.disabled=(L(m()),A(()=>m().hidden)),W(st,"for",r(Be)),Me(Ye,1,`ri-information-line ${L(m()),A(()=>m().hidden?"txt-disabled":"link-hint")??""}`)}),en(Je,()=>m().presentable,Ke=>m(m().presentable=Ke,!0)),b(dt,Ze)}}})},Ee=rn(()=>(r(a),L(m()),A(()=>!r(a)||!_.includes(m().name))));te(Q,He=>{r(Ee)&&He(ye)})}var Ae=g(Q,2);Qt(Ae,e,"optionsFooter",{get interactive(){return r(o)},get hasErrors(){return r(l)}},null);var Ne=g(Ae,2);{var je=He=>{var dt=QE(),$e=S(dt),Be=S($e),Ze=g(S(Be),2);Jn(Ze,{class:"dropdown dropdown-sm dropdown-upside dropdown-right dropdown-nowrap no-min-width",children:(Je,st)=>{var Ye=XE(),Ke=V(Ye),qe=g(Ke,2);{var Le=Ve=>{var et=GE();ie("click",et,Et(I)),b(Ve,et)};te(qe,Ve=>{L(m()),A(()=>!m().system)&&Ve(Le)})}ie("click",Ke,Et(C)),b(Je,Ye)},$$slots:{default:!0}}),b(He,dt)};te(Ne,He=>{L(m()),A(()=>!m()._toDelete&&!m().primaryKey)&&He(je)})}Ot(3,xe,()=>pn,()=>({delay:10,duration:150})),b(he,xe)};te(ve,he=>{r(o)&&r(D)&&he(be)})}j(()=>B=Me(q,1,"schema-field",null,B,{required:m().required,expanded:r(o)&&r(D),deleted:m()._toDelete})),Ot(3,q,()=>pn,()=>({duration:150})),b(n,q),Fe(),s()}var nO=x("<div><!></div>"),iO=x('<div class="separator"></div> <!> <div class="separator"></div>',1);function rO(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);const s=1,a=2,o=3,l=[{label:"Create",value:s},{label:"Update",value:a},{label:"Create/Update",value:o}];let c=ee(e,"field",12),u=ee(e,"key",8,""),d=M(f());function f(){return c().onCreate&&c().onUpdate?o:c().onUpdate?a:s}function h(v){switch(v){case s:c(c().onCreate=!0,!0),c(c().onUpdate=!1,!0);break;case a:c(c().onCreate=!1,!0),c(c().onUpdate=!0,!0);break;case o:c(c().onCreate=!0,!0),c(c().onUpdate=!0,!0);break}}re(()=>r(d),()=>{h(r(d))}),lt(),ze(),gi(n,nn({get key(){return u()}},()=>i,{get field(){return c()},set field(v){c(v)},$$events:{rename(v){Qe.call(this,e,v)},remove(v){Qe.call(this,e,v)},duplicate(v){Qe.call(this,e,v)}},children:Ie,$$slots:{default:(v,_)=>{const p=ne(()=>_.interactive);var m=iO(),w=g(V(m),2);{let k=ne(()=>r(p)?"":"readonly");Ce(w,{get class(){return`form-field form-field-single-multiple-select form-field-autodate-select ${r(k)??""}`},inlineError:!0,children:Ie,$$slots:{default:($,D)=>{const I=ne(()=>D.uniqueId);var E=nO(),T=S(E);{let C=ne(()=>!r(p));On(T,{get id(){return r(I)},get items(){return l},get disabled(){return L(c()),A(()=>c().system)},get readonly(){return r(C)},get keyOfSelected(){return r(d)},set keyOfSelected(O){y(d,O)},$$legacy:!0})}We(E,(C,O)=>ct?.(C,O),()=>({text:"Auto set on:",position:"top"})),b($,E)}}})}b(v,m)}},$$legacy:!0})),Fe()}function sO(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);let s=ee(e,"field",12),a=ee(e,"key",8,"");gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(o){s(o)},$$events:{rename(o){Qe.call(this,e,o)},remove(o){Qe.call(this,e,o)},duplicate(o){Qe.call(this,e,o)}},$$legacy:!0}))}var Fc=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ta={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},lo={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ri=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},ki=function(n){return n===!0?1:0};function Dv(n,e){var t;return function(){var i=this,s=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(i,s)},e)}}var qc=function(n){return n instanceof Array?n:[n]};function Wn(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function Jt(n,e,t){var i=window.document.createElement(n);return e=e||"",t=t||"",i.className=e,t!==void 0&&(i.textContent=t),i}function Go(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function ib(n,e){if(e(n))return n;if(n.parentNode)return ib(n.parentNode,e)}function Xo(n,e){var t=Jt("div","numInputWrapper"),i=Jt("input","numInput "+n),s=Jt("span","arrowUp"),a=Jt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),e!==void 0)for(var o in e)i.setAttribute(o,e[o]);return t.appendChild(i),t.appendChild(s),t.appendChild(a),t}function di(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var zc=function(){},$l=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},aO={D:zc,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*ki(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var i=parseInt(e),s=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return s.setDate(s.getDate()-s.getDay()+t.firstDayOfWeek),s},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:zc,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:zc,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},hs={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Ga={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[Ga.w(n,e,t)]},F:function(n,e,t){return $l(Ga.n(n,e,t)-1,!1,e)},G:function(n,e,t){return ri(Ga.h(n,e,t))},H:function(n){return ri(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[ki(n.getHours()>11)]},M:function(n,e){return $l(n.getMonth(),!0,e)},S:function(n){return ri(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return ri(n.getFullYear(),4)},d:function(n){return ri(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ri(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return ri(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},rb=function(n){var e=n.config,t=e===void 0?ta:e,i=n.l10n,s=i===void 0?lo:i,a=n.isMobile,o=a===void 0?!1:a;return function(l,c,u){var d=u||s;return t.formatDate!==void 0&&!o?t.formatDate(l,c,d):c.split("").map(function(f,h,v){return Ga[f]&&v[h-1]!=="\\"?Ga[f](l,d,t):f!=="\\"?f:""}).join("")}},Ru=function(n){var e=n.config,t=e===void 0?ta:e,i=n.l10n,s=i===void 0?lo:i;return function(a,o,l,c){if(!(a!==0&&!a)){var u=c||s,d,f=a;if(a instanceof Date)d=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)d=new Date(a);else if(typeof a=="string"){var h=o||(t||ta).dateFormat,v=String(a).trim();if(v==="today")d=new Date,l=!0;else if(t&&t.parseDate)d=t.parseDate(a,h);else if(/Z$/.test(v)||/GMT$/.test(v))d=new Date(a);else{for(var _=void 0,p=[],m=0,w=0,k="";m<h.length;m++){var $=h[m],D=$==="\\",I=h[m-1]==="\\"||D;if(hs[$]&&!I){k+=hs[$];var E=new RegExp(k).exec(a);E&&(_=!0)&&p[$!=="Y"?"push":"unshift"]({fn:aO[$],val:E[++w]})}else D||(k+=".")}d=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),p.forEach(function(T){var C=T.fn,O=T.val;return d=C(d,O,u)||d}),d=_?d:void 0}}if(!(d instanceof Date&&!isNaN(d.getTime()))){t.errorHandler(new Error("Invalid date provided: "+f));return}return l===!0&&d.setHours(0,0,0,0),d}}};function fi(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var oO=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},jc=function(n,e,t){return n*3600+e*60+t},lO=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},cO={DAY:864e5};function Uc(n){var e=n.defaultHour,t=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var s=n.minDate.getHours(),a=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<s&&(e=s),e===s&&t<a&&(t=a),e===s&&t===a&&i<o&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var l=n.maxDate.getHours(),c=n.maxDate.getMinutes();e=Math.min(e,l),e===l&&(t=Math.min(c,t)),e===l&&t===c&&(i=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(l){l&&Object.keys(l).forEach(function(c){return n[c]=l[c]})},s=0,a=e;s<a.length;s++){var o=a[s];i(o)}return n});var Ln=function(){return Ln=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Ln.apply(this,arguments)},Pv=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),s=0,e=0;e<t;e++)for(var a=arguments[e],o=0,l=a.length;o<l;o++,s++)i[s]=a[o];return i},uO=300;function dO(n,e){var t={config:Ln(Ln({},ta),yn.defaultConfig),l10n:lo};t.parseDate=Ru({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=p,t._setHoursFromDate=h,t._positionCalendar=Ae,t.changeMonth=le,t.changeYear=Te,t.clear=ce,t.close=ve,t.onMouseOver=ae,t._createElement=Jt,t.createDay=E,t.destroy=be,t.isEnabled=pe,t.jumpToDate=k,t.updateValue=vt,t.open=oe,t.redraw=He,t.set=Ze,t.setDate=st,t.toggle=et;function i(){t.utils={getDaysInMonth:function(H,G){return H===void 0&&(H=t.currentMonth),G===void 0&&(G=t.currentYear),H===1&&(G%4===0&&G%100!==0||G%400===0)?29:t.l10n.daysInMonth[H]}}}function s(){t.element=t.input=n,t.isOpen=!1,Q(),Ee(),qe(),Ke(),i(),t.isMobile||I(),w(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&h(t.config.noCalendar?t.latestSelectedDateObj:void 0),vt(!1)),l();var H=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&H&&Ae(),nt("onReady")}function a(){var H;return((H=t.calendarContainer)===null||H===void 0?void 0:H.getRootNode()).activeElement||document.activeElement}function o(H){return H.bind(t)}function l(){var H=t.config;H.weekNumbers===!1&&H.showMonths===1||H.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var G=(t.days.offsetWidth+1)*H.showMonths;t.daysContainer.style.width=G+"px",t.calendarContainer.style.width=G+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function c(H){if(t.selectedDates.length===0){var G=t.config.minDate===void 0||fi(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),de=Uc(t.config);G.setHours(de.hours,de.minutes,de.seconds,G.getMilliseconds()),t.selectedDates=[G],t.latestSelectedDateObj=G}H!==void 0&&H.type!=="blur"&&Oe(H);var ge=t._input.value;f(),vt(),t._input.value!==ge&&t._debouncedChange()}function u(H,G){return H%12+12*ki(G===t.l10n.amPM[1])}function d(H){switch(H%24){case 0:case 12:return 12;default:return H%12}}function f(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var H=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,G=(parseInt(t.minuteElement.value,10)||0)%60,de=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(H=u(H,t.amPM.textContent));var ge=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&fi(t.latestSelectedDateObj,t.config.minDate,!0)===0,Ue=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&fi(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var Xe=jc(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Tt=jc(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),at=jc(H,G,de);if(at>Tt&&at<Xe){var _t=lO(Xe);H=_t[0],G=_t[1],de=_t[2]}}else{if(Ue){var ut=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;H=Math.min(H,ut.getHours()),H===ut.getHours()&&(G=Math.min(G,ut.getMinutes())),G===ut.getMinutes()&&(de=Math.min(de,ut.getSeconds()))}if(ge){var mt=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;H=Math.max(H,mt.getHours()),H===mt.getHours()&&G<mt.getMinutes()&&(G=mt.getMinutes()),G===mt.getMinutes()&&(de=Math.max(de,mt.getSeconds()))}}v(H,G,de)}}function h(H){var G=H||t.latestSelectedDateObj;G&&G instanceof Date&&v(G.getHours(),G.getMinutes(),G.getSeconds())}function v(H,G,de){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(H%24,G,de||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=ri(t.config.time_24hr?H:(12+H)%12+12*ki(H%12===0)),t.minuteElement.value=ri(G),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[ki(H>=12)]),t.secondElement!==void 0&&(t.secondElement.value=ri(de)))}function _(H){var G=di(H),de=parseInt(G.value)+(H.delta||0);(de/1e3>1||H.key==="Enter"&&!/[^\d]/.test(de.toString()))&&Te(de)}function p(H,G,de,ge){if(G instanceof Array)return G.forEach(function(Ue){return p(H,Ue,de,ge)});if(H instanceof Array)return H.forEach(function(Ue){return p(Ue,G,de,ge)});H.addEventListener(G,de,ge),t._handlers.push({remove:function(){return H.removeEventListener(G,de,ge)}})}function m(){nt("onChange")}function w(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(de){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+de+"]"),function(ge){return p(ge,"click",t[de])})}),t.isMobile){Ve();return}var H=Dv(_e,50);if(t._debouncedChange=Dv(m,uO),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&p(t.daysContainer,"mouseover",function(de){t.config.mode==="range"&&ae(di(de))}),p(t._input,"keydown",ke),t.calendarContainer!==void 0&&p(t.calendarContainer,"keydown",ke),!t.config.inline&&!t.config.static&&p(window,"resize",H),window.ontouchstart!==void 0?p(window.document,"touchstart",xe):p(window.document,"mousedown",xe),p(window.document,"focus",xe,{capture:!0}),t.config.clickOpens===!0&&(p(t._input,"focus",t.open),p(t._input,"click",t.open)),t.daysContainer!==void 0&&(p(t.monthNav,"click",rt),p(t.monthNav,["keyup","increment"],_),p(t.daysContainer,"click",$e)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var G=function(de){return di(de).select()};p(t.timeContainer,["increment"],c),p(t.timeContainer,"blur",c,{capture:!0}),p(t.timeContainer,"click",$),p([t.hourElement,t.minuteElement],["focus","click"],G),t.secondElement!==void 0&&p(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&p(t.amPM,"click",function(de){c(de)})}t.config.allowInput&&p(t._input,"blur",we)}function k(H,G){var de=H!==void 0?t.parseDate(H):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),ge=t.currentYear,Ue=t.currentMonth;try{de!==void 0&&(t.currentYear=de.getFullYear(),t.currentMonth=de.getMonth())}catch(Xe){Xe.message="Invalid date supplied: "+de,t.config.errorHandler(Xe)}G&&t.currentYear!==ge&&(nt("onYearChange"),q()),G&&(t.currentYear!==ge||t.currentMonth!==Ue)&&nt("onMonthChange"),t.redraw()}function $(H){var G=di(H);~G.className.indexOf("arrow")&&D(H,G.classList.contains("arrowUp")?1:-1)}function D(H,G,de){var ge=H&&di(H),Ue=de||ge&&ge.parentNode&&ge.parentNode.firstChild,Xe=wt("increment");Xe.delta=G,Ue&&Ue.dispatchEvent(Xe)}function I(){var H=window.document.createDocumentFragment();if(t.calendarContainer=Jt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(H.appendChild(z()),t.innerContainer=Jt("div","flatpickr-innerContainer"),t.config.weekNumbers){var G=se(),de=G.weekWrapper,ge=G.weekNumbers;t.innerContainer.appendChild(de),t.weekNumbers=ge,t.weekWrapper=de}t.rContainer=Jt("div","flatpickr-rContainer"),t.rContainer.appendChild(U()),t.daysContainer||(t.daysContainer=Jt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),R(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),H.appendChild(t.innerContainer)}t.config.enableTime&&H.appendChild(K()),Wn(t.calendarContainer,"rangeMode",t.config.mode==="range"),Wn(t.calendarContainer,"animate",t.config.animate===!0),Wn(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(H);var Ue=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!Ue&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var Xe=Jt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(Xe,t.element),Xe.appendChild(t.element),t.altInput&&Xe.appendChild(t.altInput),Xe.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function E(H,G,de,ge){var Ue=pe(G,!0),Xe=Jt("span",H,G.getDate().toString());return Xe.dateObj=G,Xe.$i=ge,Xe.setAttribute("aria-label",t.formatDate(G,t.config.ariaDateFormat)),H.indexOf("hidden")===-1&&fi(G,t.now)===0&&(t.todayDateElem=Xe,Xe.classList.add("today"),Xe.setAttribute("aria-current","date")),Ue?(Xe.tabIndex=-1,pt(G)&&(Xe.classList.add("selected"),t.selectedDateElem=Xe,t.config.mode==="range"&&(Wn(Xe,"startRange",t.selectedDates[0]&&fi(G,t.selectedDates[0],!0)===0),Wn(Xe,"endRange",t.selectedDates[1]&&fi(G,t.selectedDates[1],!0)===0),H==="nextMonthDay"&&Xe.classList.add("inRange")))):Xe.classList.add("flatpickr-disabled"),t.config.mode==="range"&&tt(G)&&!pt(G)&&Xe.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&H!=="prevMonthDay"&&ge%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(G)+"</span>"),nt("onDayCreate",Xe),Xe}function T(H){H.focus(),t.config.mode==="range"&&ae(H)}function C(H){for(var G=H>0?0:t.config.showMonths-1,de=H>0?t.config.showMonths:-1,ge=G;ge!=de;ge+=H)for(var Ue=t.daysContainer.children[ge],Xe=H>0?0:Ue.children.length-1,Tt=H>0?Ue.children.length:-1,at=Xe;at!=Tt;at+=H){var _t=Ue.children[at];if(_t.className.indexOf("hidden")===-1&&pe(_t.dateObj))return _t}}function O(H,G){for(var de=H.className.indexOf("Month")===-1?H.dateObj.getMonth():t.currentMonth,ge=G>0?t.config.showMonths:-1,Ue=G>0?1:-1,Xe=de-t.currentMonth;Xe!=ge;Xe+=Ue)for(var Tt=t.daysContainer.children[Xe],at=de-t.currentMonth===Xe?H.$i+G:G<0?Tt.children.length-1:0,_t=Tt.children.length,ut=at;ut>=0&&ut<_t&&ut!=(G>0?_t:-1);ut+=Ue){var mt=Tt.children[ut];if(mt.className.indexOf("hidden")===-1&&pe(mt.dateObj)&&Math.abs(H.$i-ut)>=Math.abs(G))return T(mt)}t.changeMonth(Ue),P(C(Ue),0)}function P(H,G){var de=a(),ge=ue(de||document.body),Ue=H!==void 0?H:ge?de:t.selectedDateElem!==void 0&&ue(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&ue(t.todayDateElem)?t.todayDateElem:C(G>0?1:-1);Ue===void 0?t._input.focus():ge?O(Ue,G):T(Ue)}function N(H,G){for(var de=(new Date(H,G,1).getDay()-t.l10n.firstDayOfWeek+7)%7,ge=t.utils.getDaysInMonth((G-1+12)%12,H),Ue=t.utils.getDaysInMonth(G,H),Xe=window.document.createDocumentFragment(),Tt=t.config.showMonths>1,at=Tt?"prevMonthDay hidden":"prevMonthDay",_t=Tt?"nextMonthDay hidden":"nextMonthDay",ut=ge+1-de,mt=0;ut<=ge;ut++,mt++)Xe.appendChild(E("flatpickr-day "+at,new Date(H,G-1,ut),ut,mt));for(ut=1;ut<=Ue;ut++,mt++)Xe.appendChild(E("flatpickr-day",new Date(H,G,ut),ut,mt));for(var Lt=Ue+1;Lt<=42-de&&(t.config.showMonths===1||mt%7!==0);Lt++,mt++)Xe.appendChild(E("flatpickr-day "+_t,new Date(H,G+1,Lt%Ue),Lt,mt));var xn=Jt("div","dayContainer");return xn.appendChild(Xe),xn}function R(){if(t.daysContainer!==void 0){Go(t.daysContainer),t.weekNumbers&&Go(t.weekNumbers);for(var H=document.createDocumentFragment(),G=0;G<t.config.showMonths;G++){var de=new Date(t.currentYear,t.currentMonth,1);de.setMonth(t.currentMonth+G),H.appendChild(N(de.getFullYear(),de.getMonth()))}t.daysContainer.appendChild(H),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&ae()}}function q(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var H=function(ge){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&ge<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&ge>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var G=0;G<12;G++)if(H(G)){var de=Jt("option","flatpickr-monthDropdown-month");de.value=new Date(t.currentYear,G).getMonth().toString(),de.textContent=$l(G,t.config.shorthandCurrentMonth,t.l10n),de.tabIndex=-1,t.currentMonth===G&&(de.selected=!0),t.monthsDropdownContainer.appendChild(de)}}}function B(){var H=Jt("div","flatpickr-month"),G=window.document.createDocumentFragment(),de;t.config.showMonths>1||t.config.monthSelectorType==="static"?de=Jt("span","cur-month"):(t.monthsDropdownContainer=Jt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),p(t.monthsDropdownContainer,"change",function(Tt){var at=di(Tt),_t=parseInt(at.value,10);t.changeMonth(_t-t.currentMonth),nt("onMonthChange")}),q(),de=t.monthsDropdownContainer);var ge=Xo("cur-year",{tabindex:"-1"}),Ue=ge.getElementsByTagName("input")[0];Ue.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&Ue.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(Ue.setAttribute("max",t.config.maxDate.getFullYear().toString()),Ue.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var Xe=Jt("div","flatpickr-current-month");return Xe.appendChild(de),Xe.appendChild(ge),G.appendChild(Xe),H.appendChild(G),{container:H,yearElement:Ue,monthElement:de}}function Y(){Go(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var H=t.config.showMonths;H--;){var G=B();t.yearElements.push(G.yearElement),t.monthElements.push(G.monthElement),t.monthNav.appendChild(G.container)}t.monthNav.appendChild(t.nextMonthNav)}function z(){return t.monthNav=Jt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Jt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Jt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,Y(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(H){t.__hidePrevMonthArrow!==H&&(Wn(t.prevMonthNav,"flatpickr-disabled",H),t.__hidePrevMonthArrow=H)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(H){t.__hideNextMonthArrow!==H&&(Wn(t.nextMonthNav,"flatpickr-disabled",H),t.__hideNextMonthArrow=H)}}),t.currentYearElement=t.yearElements[0],Ge(),t.monthNav}function K(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var H=Uc(t.config);t.timeContainer=Jt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var G=Jt("span","flatpickr-time-separator",":"),de=Xo("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=de.getElementsByTagName("input")[0];var ge=Xo("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=ge.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=ri(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?H.hours:d(H.hours)),t.minuteElement.value=ri(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():H.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(de),t.timeContainer.appendChild(G),t.timeContainer.appendChild(ge),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var Ue=Xo("flatpickr-second");t.secondElement=Ue.getElementsByTagName("input")[0],t.secondElement.value=ri(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():H.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Jt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(Ue)}return t.config.time_24hr||(t.amPM=Jt("span","flatpickr-am-pm",t.l10n.amPM[ki((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function U(){t.weekdayContainer?Go(t.weekdayContainer):t.weekdayContainer=Jt("div","flatpickr-weekdays");for(var H=t.config.showMonths;H--;){var G=Jt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(G)}return J(),t.weekdayContainer}function J(){if(t.weekdayContainer){var H=t.l10n.firstDayOfWeek,G=Pv(t.l10n.weekdays.shorthand);H>0&&H<G.length&&(G=Pv(G.splice(H,G.length),G.splice(0,H)));for(var de=t.config.showMonths;de--;)t.weekdayContainer.children[de].innerHTML=`
      <span class='flatpickr-weekday'>
        `+G.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function se(){t.calendarContainer.classList.add("hasWeeks");var H=Jt("div","flatpickr-weekwrapper");H.appendChild(Jt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var G=Jt("div","flatpickr-weeks");return H.appendChild(G),{weekWrapper:H,weekNumbers:G}}function le(H,G){G===void 0&&(G=!0);var de=G?H:H-t.currentMonth;de<0&&t._hidePrevMonthArrow===!0||de>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=de,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,nt("onYearChange"),q()),R(),nt("onMonthChange"),Ge())}function ce(H,G){if(H===void 0&&(H=!0),G===void 0&&(G=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,G===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var de=Uc(t.config),ge=de.hours,Ue=de.minutes,Xe=de.seconds;v(ge,Ue,Xe)}t.redraw(),H&&nt("onChange")}function ve(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),nt("onClose")}function be(){t.config!==void 0&&nt("onDestroy");for(var H=t._handlers.length;H--;)t._handlers[H].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var G=t.calendarContainer.parentNode;if(G.lastChild&&G.removeChild(G.lastChild),G.parentNode){for(;G.firstChild;)G.parentNode.insertBefore(G.firstChild,G);G.parentNode.removeChild(G)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(de){try{delete t[de]}catch{}})}function he(H){return t.calendarContainer.contains(H)}function xe(H){if(t.isOpen&&!t.config.inline){var G=di(H),de=he(G),ge=G===t.input||G===t.altInput||t.element.contains(G)||H.path&&H.path.indexOf&&(~H.path.indexOf(t.input)||~H.path.indexOf(t.altInput)),Ue=!ge&&!de&&!he(H.relatedTarget),Xe=!t.config.ignoredFocusElements.some(function(Tt){return Tt.contains(G)});Ue&&Xe&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&c(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function Te(H){if(!(!H||t.config.minDate&&H<t.config.minDate.getFullYear()||t.config.maxDate&&H>t.config.maxDate.getFullYear())){var G=H,de=t.currentYear!==G;t.currentYear=G||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),de&&(t.redraw(),nt("onYearChange"),q())}}function pe(H,G){var de;G===void 0&&(G=!0);var ge=t.parseDate(H,void 0,G);if(t.config.minDate&&ge&&fi(ge,t.config.minDate,G!==void 0?G:!t.minDateHasTime)<0||t.config.maxDate&&ge&&fi(ge,t.config.maxDate,G!==void 0?G:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(ge===void 0)return!1;for(var Ue=!!t.config.enable,Xe=(de=t.config.enable)!==null&&de!==void 0?de:t.config.disable,Tt=0,at=void 0;Tt<Xe.length;Tt++){if(at=Xe[Tt],typeof at=="function"&&at(ge))return Ue;if(at instanceof Date&&ge!==void 0&&at.getTime()===ge.getTime())return Ue;if(typeof at=="string"){var _t=t.parseDate(at,void 0,!0);return _t&&_t.getTime()===ge.getTime()?Ue:!Ue}else if(typeof at=="object"&&ge!==void 0&&at.from&&at.to&&ge.getTime()>=at.from.getTime()&&ge.getTime()<=at.to.getTime())return Ue}return!Ue}function ue(H){return t.daysContainer!==void 0?H.className.indexOf("hidden")===-1&&H.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(H):!1}function we(H){var G=H.target===t._input,de=t._input.value.trimEnd()!==gt();G&&de&&!(H.relatedTarget&&he(H.relatedTarget))&&t.setDate(t._input.value,!0,H.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function ke(H){var G=di(H),de=t.config.wrap?n.contains(G):G===t._input,ge=t.config.allowInput,Ue=t.isOpen&&(!ge||!de),Xe=t.config.inline&&de&&!ge;if(H.keyCode===13&&de){if(ge)return t.setDate(t._input.value,!0,G===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),G.blur();t.open()}else if(he(G)||Ue||Xe){var Tt=!!t.timeContainer&&t.timeContainer.contains(G);switch(H.keyCode){case 13:Tt?(H.preventDefault(),c(),dt()):$e(H);break;case 27:H.preventDefault(),dt();break;case 8:case 46:de&&!t.config.allowInput&&(H.preventDefault(),t.clear());break;case 37:case 39:if(!Tt&&!de){H.preventDefault();var at=a();if(t.daysContainer!==void 0&&(ge===!1||at&&ue(at))){var _t=H.keyCode===39?1:-1;H.ctrlKey?(H.stopPropagation(),le(_t),P(C(1),0)):P(void 0,_t)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:H.preventDefault();var ut=H.keyCode===40?1:-1;t.daysContainer&&G.$i!==void 0||G===t.input||G===t.altInput?H.ctrlKey?(H.stopPropagation(),Te(t.currentYear-ut),P(C(1),0)):Tt||P(void 0,ut*7):G===t.currentYearElement?Te(t.currentYear-ut):t.config.enableTime&&(!Tt&&t.hourElement&&t.hourElement.focus(),c(H),t._debouncedChange());break;case 9:if(Tt){var mt=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(on){return on}),Lt=mt.indexOf(G);if(Lt!==-1){var xn=mt[Lt+(H.shiftKey?-1:1)];H.preventDefault(),(xn||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(G)&&H.shiftKey&&(H.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&G===t.amPM)switch(H.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],f(),vt();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],f(),vt();break}(de||he(G))&&nt("onKeyDown",H)}function ae(H,G){if(G===void 0&&(G="flatpickr-day"),!(t.selectedDates.length!==1||H&&(!H.classList.contains(G)||H.classList.contains("flatpickr-disabled")))){for(var de=H?H.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),ge=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),Ue=Math.min(de,t.selectedDates[0].getTime()),Xe=Math.max(de,t.selectedDates[0].getTime()),Tt=!1,at=0,_t=0,ut=Ue;ut<Xe;ut+=cO.DAY)pe(new Date(ut),!0)||(Tt=Tt||ut>Ue&&ut<Xe,ut<ge&&(!at||ut>at)?at=ut:ut>ge&&(!_t||ut<_t)&&(_t=ut));var mt=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+G));mt.forEach(function(Lt){var xn=Lt.dateObj,on=xn.getTime(),ui=at>0&&on<at||_t>0&&on>_t;if(ui){Lt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(It){Lt.classList.remove(It)});return}else if(Tt&&!ui)return;["startRange","inRange","endRange","notAllowed"].forEach(function(It){Lt.classList.remove(It)}),H!==void 0&&(H.classList.add(de<=t.selectedDates[0].getTime()?"startRange":"endRange"),ge<de&&on===ge?Lt.classList.add("startRange"):ge>de&&on===ge&&Lt.classList.add("endRange"),on>=at&&(_t===0||on<=_t)&&oO(on,ge,de)&&Lt.classList.add("inRange"))})}}function _e(){t.isOpen&&!t.config.static&&!t.config.inline&&Ae()}function oe(H,G){if(G===void 0&&(G=t._positionElement),t.isMobile===!0){if(H){H.preventDefault();var de=di(H);de&&de.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),nt("onOpen");return}else if(t._input.disabled||t.config.inline)return;var ge=t.isOpen;t.isOpen=!0,ge||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),nt("onOpen"),Ae(G)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(H===void 0||!t.timeContainer.contains(H.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function me(H){return function(G){var de=t.config["_"+H+"Date"]=t.parseDate(G,t.config.dateFormat),ge=t.config["_"+(H==="min"?"max":"min")+"Date"];de!==void 0&&(t[H==="min"?"minDateHasTime":"maxDateHasTime"]=de.getHours()>0||de.getMinutes()>0||de.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(Ue){return pe(Ue)}),!t.selectedDates.length&&H==="min"&&h(de),vt()),t.daysContainer&&(He(),de!==void 0?t.currentYearElement[H]=de.getFullYear().toString():t.currentYearElement.removeAttribute(H),t.currentYearElement.disabled=!!ge&&de!==void 0&&ge.getFullYear()===de.getFullYear())}}function Q(){var H=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],G=Ln(Ln({},JSON.parse(JSON.stringify(n.dataset||{}))),e),de={};t.config.parseDate=G.parseDate,t.config.formatDate=G.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(mt){t.config._enable=Ye(mt)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(mt){t.config._disable=Ye(mt)}});var ge=G.mode==="time";if(!G.dateFormat&&(G.enableTime||ge)){var Ue=yn.defaultConfig.dateFormat||ta.dateFormat;de.dateFormat=G.noCalendar||ge?"H:i"+(G.enableSeconds?":S":""):Ue+" H:i"+(G.enableSeconds?":S":"")}if(G.altInput&&(G.enableTime||ge)&&!G.altFormat){var Xe=yn.defaultConfig.altFormat||ta.altFormat;de.altFormat=G.noCalendar||ge?"h:i"+(G.enableSeconds?":S K":" K"):Xe+(" h:i"+(G.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:me("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:me("max")});var Tt=function(mt){return function(Lt){t.config[mt==="min"?"_minTime":"_maxTime"]=t.parseDate(Lt,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Tt("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Tt("max")}),G.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,de,G);for(var at=0;at<H.length;at++)t.config[H[at]]=t.config[H[at]]===!0||t.config[H[at]]==="true";Fc.filter(function(mt){return t.config[mt]!==void 0}).forEach(function(mt){t.config[mt]=qc(t.config[mt]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var at=0;at<t.config.plugins.length;at++){var _t=t.config.plugins[at](t)||{};for(var ut in _t)Fc.indexOf(ut)>-1?t.config[ut]=qc(_t[ut]).map(o).concat(t.config[ut]):typeof G[ut]>"u"&&(t.config[ut]=_t[ut])}G.altInputClass||(t.config.altInputClass=ye().className+" "+t.config.altInputClass),nt("onParseConfig")}function ye(){return t.config.wrap?n.querySelector("[data-input]"):n}function Ee(){typeof t.config.locale!="object"&&typeof yn.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Ln(Ln({},yn.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?yn.l10ns[t.config.locale]:void 0),hs.D="("+t.l10n.weekdays.shorthand.join("|")+")",hs.l="("+t.l10n.weekdays.longhand.join("|")+")",hs.M="("+t.l10n.months.shorthand.join("|")+")",hs.F="("+t.l10n.months.longhand.join("|")+")",hs.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var H=Ln(Ln({},e),JSON.parse(JSON.stringify(n.dataset||{})));H.time_24hr===void 0&&yn.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=rb(t),t.parseDate=Ru({config:t.config,l10n:t.l10n})}function Ae(H){if(typeof t.config.position=="function")return void t.config.position(t,H);if(t.calendarContainer!==void 0){nt("onPreCalendarPosition");var G=H||t._positionElement,de=Array.prototype.reduce.call(t.calendarContainer.children,(function(Dr,ka){return Dr+ka.offsetHeight}),0),ge=t.calendarContainer.offsetWidth,Ue=t.config.position.split(" "),Xe=Ue[0],Tt=Ue.length>1?Ue[1]:null,at=G.getBoundingClientRect(),_t=window.innerHeight-at.bottom,ut=Xe==="above"||Xe!=="below"&&_t<de&&at.top>de,mt=window.pageYOffset+at.top+(ut?-de-2:G.offsetHeight+2);if(Wn(t.calendarContainer,"arrowTop",!ut),Wn(t.calendarContainer,"arrowBottom",ut),!t.config.inline){var Lt=window.pageXOffset+at.left,xn=!1,on=!1;Tt==="center"?(Lt-=(ge-at.width)/2,xn=!0):Tt==="right"&&(Lt-=ge-at.width,on=!0),Wn(t.calendarContainer,"arrowLeft",!xn&&!on),Wn(t.calendarContainer,"arrowCenter",xn),Wn(t.calendarContainer,"arrowRight",on);var ui=window.document.body.offsetWidth-(window.pageXOffset+at.right),It=Lt+ge>window.document.body.offsetWidth,Rt=ui+ge>window.document.body.offsetWidth;if(Wn(t.calendarContainer,"rightMost",It),!t.config.static)if(t.calendarContainer.style.top=mt+"px",!It)t.calendarContainer.style.left=Lt+"px",t.calendarContainer.style.right="auto";else if(!Rt)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=ui+"px";else{var gn=Ne();if(gn===void 0)return;var Bn=window.document.body.offsetWidth,Or=Math.max(0,Bn/2-ge/2),Xn=".flatpickr-calendar.centerMost:before",ur=".flatpickr-calendar.centerMost:after",yi=gn.cssRules.length,dr="{left:"+at.left+"px;right:auto;}";Wn(t.calendarContainer,"rightMost",!1),Wn(t.calendarContainer,"centerMost",!0),gn.insertRule(Xn+","+ur+dr,yi),t.calendarContainer.style.left=Or+"px",t.calendarContainer.style.right="auto"}}}}function Ne(){for(var H=null,G=0;G<document.styleSheets.length;G++){var de=document.styleSheets[G];if(de.cssRules){try{de.cssRules}catch{continue}H=de;break}}return H??je()}function je(){var H=document.createElement("style");return document.head.appendChild(H),H.sheet}function He(){t.config.noCalendar||t.isMobile||(q(),Ge(),R())}function dt(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function $e(H){H.preventDefault(),H.stopPropagation();var G=function(mt){return mt.classList&&mt.classList.contains("flatpickr-day")&&!mt.classList.contains("flatpickr-disabled")&&!mt.classList.contains("notAllowed")},de=ib(di(H),G);if(de!==void 0){var ge=de,Ue=t.latestSelectedDateObj=new Date(ge.dateObj.getTime()),Xe=(Ue.getMonth()<t.currentMonth||Ue.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=ge,t.config.mode==="single")t.selectedDates=[Ue];else if(t.config.mode==="multiple"){var Tt=pt(Ue);Tt?t.selectedDates.splice(parseInt(Tt),1):t.selectedDates.push(Ue)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=Ue,t.selectedDates.push(Ue),fi(Ue,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(mt,Lt){return mt.getTime()-Lt.getTime()}));if(f(),Xe){var at=t.currentYear!==Ue.getFullYear();t.currentYear=Ue.getFullYear(),t.currentMonth=Ue.getMonth(),at&&(nt("onYearChange"),q()),nt("onMonthChange")}if(Ge(),R(),vt(),!Xe&&t.config.mode!=="range"&&t.config.showMonths===1?T(ge):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var _t=t.config.mode==="single"&&!t.config.enableTime,ut=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(_t||ut)&&dt()}m()}}var Be={locale:[Ee,J],showMonths:[Y,l,U],minDate:[k],maxDate:[k],positionElement:[Le],clickOpens:[function(){t.config.clickOpens===!0?(p(t._input,"focus",t.open),p(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function Ze(H,G){if(H!==null&&typeof H=="object"){Object.assign(t.config,H);for(var de in H)Be[de]!==void 0&&Be[de].forEach(function(ge){return ge()})}else t.config[H]=G,Be[H]!==void 0?Be[H].forEach(function(ge){return ge()}):Fc.indexOf(H)>-1&&(t.config[H]=qc(G));t.redraw(),vt(!0)}function Je(H,G){var de=[];if(H instanceof Array)de=H.map(function(ge){return t.parseDate(ge,G)});else if(H instanceof Date||typeof H=="number")de=[t.parseDate(H,G)];else if(typeof H=="string")switch(t.config.mode){case"single":case"time":de=[t.parseDate(H,G)];break;case"multiple":de=H.split(t.config.conjunction).map(function(ge){return t.parseDate(ge,G)});break;case"range":de=H.split(t.l10n.rangeSeparator).map(function(ge){return t.parseDate(ge,G)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(H)));t.selectedDates=t.config.allowInvalidPreload?de:de.filter(function(ge){return ge instanceof Date&&pe(ge,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(ge,Ue){return ge.getTime()-Ue.getTime()})}function st(H,G,de){if(G===void 0&&(G=!1),de===void 0&&(de=t.config.dateFormat),H!==0&&!H||H instanceof Array&&H.length===0)return t.clear(G);Je(H,de),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),k(void 0,G),h(),t.selectedDates.length===0&&t.clear(!1),vt(G),G&&nt("onChange")}function Ye(H){return H.slice().map(function(G){return typeof G=="string"||typeof G=="number"||G instanceof Date?t.parseDate(G,void 0,!0):G&&typeof G=="object"&&G.from&&G.to?{from:t.parseDate(G.from,void 0),to:t.parseDate(G.to,void 0)}:G}).filter(function(G){return G})}function Ke(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var H=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);H&&Je(H,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function qe(){if(t.input=ye(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Jt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Le()}function Le(){t._positionElement=t.config.positionElement||t._input}function Ve(){var H=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Jt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=H,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=H==="datetime-local"?"Y-m-d\\TH:i:S":H==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}p(t.mobileInput,"change",function(G){t.setDate(di(G).value,!1,t.mobileFormatStr),nt("onChange"),nt("onClose")})}function et(H){if(t.isOpen===!0)return t.close();t.open(H)}function nt(H,G){if(t.config!==void 0){var de=t.config[H];if(de!==void 0&&de.length>0)for(var ge=0;de[ge]&&ge<de.length;ge++)de[ge](t.selectedDates,t.input.value,t,G);H==="onChange"&&(t.input.dispatchEvent(wt("change")),t.input.dispatchEvent(wt("input")))}}function wt(H){var G=document.createEvent("Event");return G.initEvent(H,!0,!0),G}function pt(H){for(var G=0;G<t.selectedDates.length;G++){var de=t.selectedDates[G];if(de instanceof Date&&fi(de,H)===0)return""+G}return!1}function tt(H){return t.config.mode!=="range"||t.selectedDates.length<2?!1:fi(H,t.selectedDates[0])>=0&&fi(H,t.selectedDates[1])<=0}function Ge(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(H,G){var de=new Date(t.currentYear,t.currentMonth,1);de.setMonth(t.currentMonth+G),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[G].textContent=$l(de.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=de.getMonth().toString(),H.value=de.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function gt(H){var G=H||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(de){return t.formatDate(de,G)}).filter(function(de,ge,Ue){return t.config.mode!=="range"||t.config.enableTime||Ue.indexOf(de)===ge}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function vt(H){H===void 0&&(H=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=gt(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=gt(t.config.altFormat)),H!==!1&&nt("onValueUpdate")}function rt(H){var G=di(H),de=t.prevMonthNav.contains(G),ge=t.nextMonthNav.contains(G);de||ge?le(de?-1:1):t.yearElements.indexOf(G)>=0?G.select():G.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):G.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function Oe(H){H.preventDefault();var G=H.type==="keydown",de=di(H),ge=de;t.amPM!==void 0&&de===t.amPM&&(t.amPM.textContent=t.l10n.amPM[ki(t.amPM.textContent===t.l10n.amPM[0])]);var Ue=parseFloat(ge.getAttribute("min")),Xe=parseFloat(ge.getAttribute("max")),Tt=parseFloat(ge.getAttribute("step")),at=parseInt(ge.value,10),_t=H.delta||(G?H.which===38?1:-1:0),ut=at+Tt*_t;if(typeof ge.value<"u"&&ge.value.length===2){var mt=ge===t.hourElement,Lt=ge===t.minuteElement;ut<Ue?(ut=Xe+ut+ki(!mt)+(ki(mt)&&ki(!t.amPM)),Lt&&D(void 0,-1,t.hourElement)):ut>Xe&&(ut=ge===t.hourElement?ut-Xe-ki(!t.amPM):Ue,Lt&&D(void 0,1,t.hourElement)),t.amPM&&mt&&(Tt===1?ut+at===23:Math.abs(ut-at)>Tt)&&(t.amPM.textContent=t.l10n.amPM[ki(t.amPM.textContent===t.l10n.amPM[0])]),ge.value=ri(ut)}}return s(),t}function na(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),i=[],s=0;s<t.length;s++){var a=t[s];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=dO(a,e||{}),i.push(a._flatpickr)}catch(o){console.error(o)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return na(this,n)},HTMLElement.prototype.flatpickr=function(n){return na([this],n)});var yn=function(n,e){return typeof n=="string"?na(window.document.querySelectorAll(n),e):n instanceof Node?na([n],e):na(n,e)};yn.defaultConfig={};yn.l10ns={en:Ln({},lo),default:Ln({},lo)};yn.localize=function(n){yn.l10ns.default=Ln(Ln({},yn.l10ns.default),n)};yn.setDefaults=function(n){yn.defaultConfig=Ln(Ln({},yn.defaultConfig),n)};yn.parseDate=Ru({});yn.formatDate=rb({});yn.compareDates=fi;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return na(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=yn);var fO=x("<input/>");function Fu(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["value","formattedValue","element","dateFormat","options","input","flatpickr"]);Re(e,!1);const s=new Set(["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"]);let a=ee(e,"value",12,void 0),o=ee(e,"formattedValue",12,""),l=ee(e,"element",8,void 0),c=ee(e,"dateFormat",8,void 0),u=ee(e,"options",24,()=>({})),d=M(!1),f=ee(e,"input",12,void 0),h=ee(e,"flatpickr",12,void 0);fn(()=>{const I=l()??f(),E=_(u());return E.onReady.push((T,C,O)=>{a()===void 0&&p(T,C,O),$n().then(()=>{y(d,!0)})}),h(yn(I,Object.assign(E,l()?{wrap:!0}:{}))),()=>{h().destroy()}});const v=Ut();function _(I={}){I=Object.assign({},I);for(const E of s){const T=(C,O,P)=>{v(m(E),[C,O,P])};E in I?(Array.isArray(I[E])||(I[E]=[I[E]]),I[E].push(T)):I[E]=[T]}return I.onChange&&!I.onChange.includes(p)&&I.onChange.push(p),I}function p(I,E,T){const C=w(T,I);!k(a(),C)&&(a()||C)&&a(C),o(E)}function m(I){return I.charAt(2).toLowerCase()+I.substring(3)}function w(I,E){return(I?.config?.mode??"single")==="single"?E[0]:E}function k(I,E){return!!(I==E||I instanceof Date&&E instanceof Date&&I.valueOf()===E.valueOf()||Array.isArray(I)&&Array.isArray(E)&&I.length===E.length&&I.every((T,C)=>T===E[C]))}re(()=>(L(h()),r(d),L(a()),L(c())),()=>{h()&&r(d)&&(k(a(),w(h(),h().selectedDates))||h().setDate(a(),!0,c()))}),re(()=>(L(h()),r(d),L(u())),()=>{if(h()&&r(d))for(const[I,E]of Object.entries(_(u())))h().set(I,E)}),lt(),ze();var $=kt(),D=V($);Qt(D,e,"default",{},I=>{var E=fO();sa(E,()=>({...i}),void 0,void 0,void 0,void 0,!0),ft(E,T=>f(T),()=>f()),b(I,E)}),b(n,$),Fe()}var hO=x("<label>Min date (UTC)</label> <!>",1),vO=x("<label>Max date (UTC)</label> <!>",1),pO=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function mO(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);let s=ee(e,"field",12),a=ee(e,"key",8,""),o=M(s()?.min),l=M(s()?.max);function c(u,d){u.detail&&u.detail.length==3&&s(s()[d]=u.detail[1],!0)}re(()=>(r(o),L(s())),()=>{r(o)!=s()?.min&&y(o,s()?.min)}),re(()=>(r(l),L(s())),()=>{r(l)!=s()?.max&&y(l,s()?.max)}),lt(),ze(),gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(u){s(u)},$$events:{rename(u){Qe.call(this,e,u)},remove(u){Qe.call(this,e,u)},duplicate(u){Qe.call(this,e,u)}},$$slots:{options:(u,d)=>{var f=pO(),h=S(f),v=S(h);Ce(v,{class:"form-field",get name(){return`fields.${a()??""}.min`},children:Ie,$$slots:{default:(m,w)=>{const k=ne(()=>w.uniqueId);var $=hO(),D=V($),I=g(D,2);{let E=ne(()=>(L(F),A(()=>F.defaultFlatpickrOptions())));Fu(I,{get id(){return r(k)},get options(){return r(E)},get value(){return r(o)},set value(T){y(o,T)},get formattedValue(){return s().min},set formattedValue(T){s(s().min=T,!0)},$$events:{close:T=>c(T,"min")},$$legacy:!0})}j(()=>W(D,"for",r(k))),b(m,$)}}});var _=g(h,2),p=S(_);Ce(p,{class:"form-field",get name(){return`fields.${a()??""}.max`},children:Ie,$$slots:{default:(m,w)=>{const k=ne(()=>w.uniqueId);var $=vO(),D=V($),I=g(D,2);{let E=ne(()=>(L(F),A(()=>F.defaultFlatpickrOptions())));Fu(I,{get id(){return r(k)},get options(){return r(E)},get value(){return r(l)},set value(T){y(l,T)},get formattedValue(){return s().max},set formattedValue(T){s(s().max=T,!0)},$$events:{close:T=>c(T,"max")},$$legacy:!0})}j(()=>W(D,"for",r(k))),b(m,$)}}}),b(u,f)}},$$legacy:!0})),Fe()}var gO=x('<label>Max size <small>(bytes)</small></label> <input type="number" step="1" min="0" placeholder="Default to max ~5MB"/>',1),bO=x('<input type="checkbox"/> <label><span class="txt">Strip urls domain</span> <i class="ri-information-line link-hint"></i></label>',1),yO=x("<!> <!>",1);function _O(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);let s=ee(e,"field",12),a=ee(e,"key",8,"");ze(),gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(o){s(o)},$$events:{rename(o){Qe.call(this,e,o)},remove(o){Qe.call(this,e,o)},duplicate(o){Qe.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=yO(),u=V(c);Ce(u,{class:"form-field m-b-sm",get name(){return`fields.${a()??""}.maxSize`},children:Ie,$$slots:{default:(f,h)=>{const v=ne(()=>h.uniqueId);var _=gO(),p=V(_),m=g(p,2);W(m,"max",A(()=>Number.MAX_SAFE_INTEGER)),j(()=>{W(p,"for",r(v)),W(m,"id",r(v)),qn(m,(L(s()),A(()=>s().maxSize||"")))}),ie("input",m,w=>s(s().maxSize=parseInt(w.target.value,10),!0)),b(f,_)}}});var d=g(u,2);Ce(d,{class:"form-field form-field-toggle",get name(){return`fields.${a()??""}.convertURLs`},children:Ie,$$slots:{default:(f,h)=>{const v=ne(()=>h.uniqueId);var _=bO(),p=V(_),m=g(p,2),w=g(S(m),2);We(w,(k,$)=>ct?.(k,$),()=>({text:"This could help making the editor content more portable between environments since there will be no local base url to replace."})),j(()=>{W(p,"id",r(v)),W(m,"for",r(v))}),en(p,()=>s().convertURLs,k=>s(s().convertURLs=k,!0)),b(f,_)}}}),b(o,c)}},$$legacy:!0})),Fe()}var xO=x('<label><span class="txt">Except domains</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block">Use comma as separator.</div>',1),wO=x('<label><span class="txt">Only domains</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block">Use comma as separator.</div>',1),kO=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function sb(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);let s=ee(e,"field",12),a=ee(e,"key",8,"");ze(),gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(o){s(o)},$$events:{rename(o){Qe.call(this,e,o)},remove(o){Qe.call(this,e,o)},duplicate(o){Qe.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=kO(),u=S(c),d=S(u);Ce(d,{class:"form-field",get name(){return`fields.${a()??""}.exceptDomains`},children:Ie,$$slots:{default:(v,_)=>{const p=ne(()=>_.uniqueId);var m=xO(),w=V(m),k=g(S(w),2);We(k,(D,I)=>ct?.(D,I),()=>({text:`List of domains that are NOT allowed. 
 This field is disabled if "Only domains" is set.`,position:"top"}));var $=g(w,2);{let D=ne(()=>(L(F),L(s()),A(()=>!F.isEmpty(s().onlyDomains))));oo($,{get id(){return r(p)},get disabled(){return r(D)},get value(){return s().exceptDomains},set value(I){s(s().exceptDomains=I,!0)},$$legacy:!0})}j(()=>W(w,"for",r(p))),b(v,m)}}});var f=g(u,2),h=S(f);Ce(h,{class:"form-field",get name(){return`fields.${a()??""}.onlyDomains`},children:Ie,$$slots:{default:(v,_)=>{const p=ne(()=>_.uniqueId);var m=wO(),w=V(m),k=g(S(w),2);We(k,(D,I)=>ct?.(D,I),()=>({text:`List of domains that are ONLY allowed. 
 This field is disabled if "Except domains" is set.`,position:"top"}));var $=g(w,2);{let D=ne(()=>(L(F),L(s()),A(()=>!F.isEmpty(s().exceptDomains))));oo($,{get id(){return`${r(p)??""}.onlyDomains`},get disabled(){return r(D)},get value(){return s().onlyDomains},set value(I){s(s().onlyDomains=I,!0)},$$legacy:!0})}j(()=>W(w,"for",`${r(p)??""}.onlyDomains`)),b(v,m)}}}),b(o,c)}},$$legacy:!0})),Fe()}var SO=x('<span class="txt"> </span> <small class="txt-hint"> </small>',1);function Mv(n,e){Re(e,!1);let t=ee(e,"item",24,()=>({}));ze();var i=SO(),s=V(i),a=S(s),o=g(s,2),l=S(o);j(()=>{Se(a,(L(t()),A(()=>t().ext||"N/A"))),Se(l,(L(t()),A(()=>t().mimeType)))}),b(n,i),Fe()}const TO=[{ext:"",mimeType:"application/octet-stream"},{ext:".xpm",mimeType:"image/x-xpixmap"},{ext:".7z",mimeType:"application/x-7z-compressed"},{ext:".zip",mimeType:"application/zip"},{ext:".xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{ext:".docx",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{ext:".pptx",mimeType:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{ext:".epub",mimeType:"application/epub+zip"},{ext:".apk",mimeType:"application/vnd.android.package-archive"},{ext:".jar",mimeType:"application/jar"},{ext:".odt",mimeType:"application/vnd.oasis.opendocument.text"},{ext:".ott",mimeType:"application/vnd.oasis.opendocument.text-template"},{ext:".ods",mimeType:"application/vnd.oasis.opendocument.spreadsheet"},{ext:".ots",mimeType:"application/vnd.oasis.opendocument.spreadsheet-template"},{ext:".odp",mimeType:"application/vnd.oasis.opendocument.presentation"},{ext:".otp",mimeType:"application/vnd.oasis.opendocument.presentation-template"},{ext:".odg",mimeType:"application/vnd.oasis.opendocument.graphics"},{ext:".otg",mimeType:"application/vnd.oasis.opendocument.graphics-template"},{ext:".odf",mimeType:"application/vnd.oasis.opendocument.formula"},{ext:".odc",mimeType:"application/vnd.oasis.opendocument.chart"},{ext:".sxc",mimeType:"application/vnd.sun.xml.calc"},{ext:".pdf",mimeType:"application/pdf"},{ext:".fdf",mimeType:"application/vnd.fdf"},{ext:"",mimeType:"application/x-ole-storage"},{ext:".msi",mimeType:"application/x-ms-installer"},{ext:".aaf",mimeType:"application/octet-stream"},{ext:".msg",mimeType:"application/vnd.ms-outlook"},{ext:".xls",mimeType:"application/vnd.ms-excel"},{ext:".pub",mimeType:"application/vnd.ms-publisher"},{ext:".ppt",mimeType:"application/vnd.ms-powerpoint"},{ext:".doc",mimeType:"application/msword"},{ext:".ps",mimeType:"application/postscript"},{ext:".psd",mimeType:"image/vnd.adobe.photoshop"},{ext:".p7s",mimeType:"application/pkcs7-signature"},{ext:".ogg",mimeType:"application/ogg"},{ext:".oga",mimeType:"audio/ogg"},{ext:".ogv",mimeType:"video/ogg"},{ext:".png",mimeType:"image/png"},{ext:".png",mimeType:"image/vnd.mozilla.apng"},{ext:".jpg",mimeType:"image/jpeg"},{ext:".jxl",mimeType:"image/jxl"},{ext:".jp2",mimeType:"image/jp2"},{ext:".jpf",mimeType:"image/jpx"},{ext:".jpm",mimeType:"image/jpm"},{ext:".jxs",mimeType:"image/jxs"},{ext:".gif",mimeType:"image/gif"},{ext:".webp",mimeType:"image/webp"},{ext:".exe",mimeType:"application/vnd.microsoft.portable-executable"},{ext:"",mimeType:"application/x-elf"},{ext:"",mimeType:"application/x-object"},{ext:"",mimeType:"application/x-executable"},{ext:".so",mimeType:"application/x-sharedlib"},{ext:"",mimeType:"application/x-coredump"},{ext:".a",mimeType:"application/x-archive"},{ext:".deb",mimeType:"application/vnd.debian.binary-package"},{ext:".tar",mimeType:"application/x-tar"},{ext:".xar",mimeType:"application/x-xar"},{ext:".bz2",mimeType:"application/x-bzip2"},{ext:".fits",mimeType:"application/fits"},{ext:".tiff",mimeType:"image/tiff"},{ext:".bmp",mimeType:"image/bmp"},{ext:".ico",mimeType:"image/x-icon"},{ext:".mp3",mimeType:"audio/mpeg"},{ext:".flac",mimeType:"audio/flac"},{ext:".midi",mimeType:"audio/midi"},{ext:".ape",mimeType:"audio/ape"},{ext:".mpc",mimeType:"audio/musepack"},{ext:".amr",mimeType:"audio/amr"},{ext:".wav",mimeType:"audio/wav"},{ext:".aiff",mimeType:"audio/aiff"},{ext:".au",mimeType:"audio/basic"},{ext:".mpeg",mimeType:"video/mpeg"},{ext:".mov",mimeType:"video/quicktime"},{ext:".mp4",mimeType:"video/mp4"},{ext:".avif",mimeType:"image/avif"},{ext:".3gp",mimeType:"video/3gpp"},{ext:".3g2",mimeType:"video/3gpp2"},{ext:".mp4",mimeType:"audio/mp4"},{ext:".mqv",mimeType:"video/quicktime"},{ext:".m4a",mimeType:"audio/x-m4a"},{ext:".m4v",mimeType:"video/x-m4v"},{ext:".heic",mimeType:"image/heic"},{ext:".heic",mimeType:"image/heic-sequence"},{ext:".heif",mimeType:"image/heif"},{ext:".heif",mimeType:"image/heif-sequence"},{ext:".mj2",mimeType:"video/mj2"},{ext:".dvb",mimeType:"video/vnd.dvb.file"},{ext:".webm",mimeType:"video/webm"},{ext:".avi",mimeType:"video/x-msvideo"},{ext:".flv",mimeType:"video/x-flv"},{ext:".mkv",mimeType:"video/x-matroska"},{ext:".asf",mimeType:"video/x-ms-asf"},{ext:".aac",mimeType:"audio/aac"},{ext:".voc",mimeType:"audio/x-unknown"},{ext:".m3u",mimeType:"application/vnd.apple.mpegurl"},{ext:".rmvb",mimeType:"application/vnd.rn-realmedia-vbr"},{ext:".gz",mimeType:"application/gzip"},{ext:".class",mimeType:"application/x-java-applet"},{ext:".swf",mimeType:"application/x-shockwave-flash"},{ext:".crx",mimeType:"application/x-chrome-extension"},{ext:".ttf",mimeType:"font/ttf"},{ext:".woff",mimeType:"font/woff"},{ext:".woff2",mimeType:"font/woff2"},{ext:".otf",mimeType:"font/otf"},{ext:".ttc",mimeType:"font/collection"},{ext:".eot",mimeType:"application/vnd.ms-fontobject"},{ext:".wasm",mimeType:"application/wasm"},{ext:".shx",mimeType:"application/vnd.shx"},{ext:".shp",mimeType:"application/vnd.shp"},{ext:".dbf",mimeType:"application/x-dbf"},{ext:".dcm",mimeType:"application/dicom"},{ext:".rar",mimeType:"application/x-rar-compressed"},{ext:".djvu",mimeType:"image/vnd.djvu"},{ext:".mobi",mimeType:"application/x-mobipocket-ebook"},{ext:".lit",mimeType:"application/x-ms-reader"},{ext:".bpg",mimeType:"image/bpg"},{ext:".cbor",mimeType:"application/cbor"},{ext:".sqlite",mimeType:"application/vnd.sqlite3"},{ext:".dwg",mimeType:"image/vnd.dwg"},{ext:".nes",mimeType:"application/vnd.nintendo.snes.rom"},{ext:".lnk",mimeType:"application/x-ms-shortcut"},{ext:".macho",mimeType:"application/x-mach-binary"},{ext:".qcp",mimeType:"audio/qcelp"},{ext:".icns",mimeType:"image/x-icns"},{ext:".hdr",mimeType:"image/vnd.radiance"},{ext:".mrc",mimeType:"application/marc"},{ext:".mdb",mimeType:"application/x-msaccess"},{ext:".accdb",mimeType:"application/x-msaccess"},{ext:".zst",mimeType:"application/zstd"},{ext:".cab",mimeType:"application/vnd.ms-cab-compressed"},{ext:".rpm",mimeType:"application/x-rpm"},{ext:".xz",mimeType:"application/x-xz"},{ext:".lz",mimeType:"application/lzip"},{ext:".torrent",mimeType:"application/x-bittorrent"},{ext:".cpio",mimeType:"application/x-cpio"},{ext:"",mimeType:"application/tzif"},{ext:".xcf",mimeType:"image/x-xcf"},{ext:".pat",mimeType:"image/x-gimp-pat"},{ext:".gbr",mimeType:"image/x-gimp-gbr"},{ext:".glb",mimeType:"model/gltf-binary"},{ext:".cab",mimeType:"application/x-installshield"},{ext:".jxr",mimeType:"image/jxr"},{ext:".parquet",mimeType:"application/vnd.apache.parquet"},{ext:".txt",mimeType:"text/plain"},{ext:".html",mimeType:"text/html"},{ext:".svg",mimeType:"image/svg+xml"},{ext:".xml",mimeType:"text/xml"},{ext:".rss",mimeType:"application/rss+xml"},{ext:".atom",mimeType:"application/atom+xml"},{ext:".x3d",mimeType:"model/x3d+xml"},{ext:".kml",mimeType:"application/vnd.google-earth.kml+xml"},{ext:".xlf",mimeType:"application/x-xliff+xml"},{ext:".dae",mimeType:"model/vnd.collada+xml"},{ext:".gml",mimeType:"application/gml+xml"},{ext:".gpx",mimeType:"application/gpx+xml"},{ext:".tcx",mimeType:"application/vnd.garmin.tcx+xml"},{ext:".amf",mimeType:"application/x-amf"},{ext:".3mf",mimeType:"application/vnd.ms-package.3dmanufacturing-3dmodel+xml"},{ext:".xfdf",mimeType:"application/vnd.adobe.xfdf"},{ext:".owl",mimeType:"application/owl+xml"},{ext:".php",mimeType:"text/x-php"},{ext:".js",mimeType:"text/javascript"},{ext:".lua",mimeType:"text/x-lua"},{ext:".pl",mimeType:"text/x-perl"},{ext:".py",mimeType:"text/x-python"},{ext:".json",mimeType:"application/json"},{ext:".geojson",mimeType:"application/geo+json"},{ext:".har",mimeType:"application/json"},{ext:".ndjson",mimeType:"application/x-ndjson"},{ext:".rtf",mimeType:"text/rtf"},{ext:".srt",mimeType:"application/x-subrip"},{ext:".tcl",mimeType:"text/x-tcl"},{ext:".csv",mimeType:"text/csv"},{ext:".tsv",mimeType:"text/tab-separated-values"},{ext:".vcf",mimeType:"text/vcard"},{ext:".ics",mimeType:"text/calendar"},{ext:".warc",mimeType:"application/warc"},{ext:".vtt",mimeType:"text/vtt"}];var $O=x('<div class="separator"></div> <!> <div class="separator"></div>',1),IO=x('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Images (jpg, png, svg, gif, webp)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Documents (pdf, doc/docx, xls/xlsx)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Videos (mp4, avi, mov, 3gp)</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Archives (zip, 7zip, rar)</span></button>',1),CO=x('<label><span class="txt">Allowed mime types</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block"><div tabindex="0" role="button" class="inline-flex flex-gap-0"><span class="txt link-primary">Choose presets</span> <i class="ri-arrow-drop-down-fill" aria-hidden="true"></i> <!></div></div>',1),EO=x('<ul class="m-0"><li><strong>WxH</strong> (e.g. 100x50) - crop to WxH viewbox (from center)</li> <li><strong>WxHt</strong> (e.g. 100x50t) - crop to WxH viewbox (from top)</li> <li><strong>WxHb</strong> (e.g. 100x50b) - crop to WxH viewbox (from bottom)</li> <li><strong>WxHf</strong> (e.g. 100x50f) - fit inside a WxH viewbox (without cropping)</li> <li><strong>0xH</strong> (e.g. 0x50) - resize to H height preserving the aspect ratio</li> <li><strong>Wx0</strong> (e.g. 100x0) - resize to W width preserving the aspect ratio</li></ul>'),OO=x('<label><span class="txt">Thumb sizes</span> <i class="ri-information-line link-hint"></i></label> <!> <div class="help-block"><span class="txt">Use comma as separator.</span> <button type="button" class="inline-flex flex-gap-0"><span class="txt link-primary">Supported formats</span> <i class="ri-arrow-drop-down-fill" aria-hidden="true"></i> <!></button></div>',1),DO=x('<label>Max file size</label> <input type="number" step="1" min="0" placeholder="Default to max ~5MB"/> <div class="help-block">Must be in bytes.</div>',1),PO=x('<label>Max select</label> <input type="number" step="1" min="2" required="" placeholder="Default to single"/>',1),MO=x('<div class="col-sm-3"><!></div>'),AO=x('<input type="checkbox"/> <label><span class="txt">Protected</span></label> <small class="txt-hint">it will require View API rule permissions and file token to be accessible <a class="toggle-info" target="_blank" rel="noopener">(Learn more)</a></small>',1),LO=x('<div class="grid grid-sm"><div class="col-sm-12"><!></div> <div><!></div> <div><!></div> <!> <!></div>');function NO(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);let s=ee(e,"field",12),a=ee(e,"key",8,"");const o=[{label:"Single",value:!0},{label:"Multiple",value:!1}];let l=M(TO.slice()),c=M(s().maxSelect<=1),u=M(r(c));function d(){s(s().maxSelect=1,!0),s(s().thumbs=[],!0),s(s().mimeTypes=[],!0),y(c,!0),y(u,r(c))}function f(){if(F.isEmpty(s().mimeTypes))return;const h=[];for(const v of s().mimeTypes)r(l).find(_=>_.mimeType===v)||h.push({mimeType:v});h.length&&y(l,r(l).concat(h))}re(()=>L(s()),()=>{typeof s().maxSelect>"u"?d():f()}),re(()=>(r(u),r(c)),()=>{r(u)!=r(c)&&(y(u,r(c)),r(c)?s(s().maxSelect=1,!0):s(s().maxSelect=99,!0))}),lt(),ze(),gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(h){s(h)},$$events:{rename(h){Qe.call(this,e,h)},remove(h){Qe.call(this,e,h)},duplicate(h){Qe.call(this,e,h)}},children:Ie,$$slots:{default:(h,v)=>{const _=ne(()=>v.interactive);var p=$O(),m=g(V(p),2);{let w=ne(()=>r(_)?"":"readonly");Ce(m,{get class(){return`form-field form-field-single-multiple-select ${r(w)??""}`},inlineError:!0,children:Ie,$$slots:{default:(k,$)=>{const D=ne(()=>$.uniqueId);{let I=ne(()=>!r(_));On(k,{get id(){return r(D)},get items(){return o},get readonly(){return r(I)},get keyOfSelected(){return r(c)},set keyOfSelected(E){y(c,E)},$$legacy:!0})}}}})}b(h,p)},options:(h,v)=>{var _=LO(),p=S(_),m=S(p);Ce(m,{class:"form-field",get name(){return`fields.${a()??""}.mimeTypes`},children:Ie,$$slots:{default:(C,O)=>{const P=ne(()=>O.uniqueId);var N=CO(),R=V(N),q=g(S(R),2);We(q,(U,J)=>ct?.(U,J),()=>({text:`Allow files ONLY with the listed mime types. 
 Leave empty for no restriction.`,position:"top"}));var B=g(R,2);On(B,{get id(){return r(P)},multiple:!0,searchable:!0,closable:!1,selectionKey:"mimeType",selectPlaceholder:"No restriction",get items(){return r(l)},get labelComponent(){return Mv},get optionComponent(){return Mv},get keyOfSelected(){return s().mimeTypes},set keyOfSelected(U){s(s().mimeTypes=U,!0)},$$legacy:!0});var Y=g(B,2),z=S(Y),K=g(S(z),4);Jn(K,{class:"dropdown dropdown-sm dropdown-nowrap dropdown-left",children:(U,J)=>{var se=IO(),le=V(se),ce=g(le,2),ve=g(ce,2),be=g(ve,2);ie("click",le,()=>{s(s().mimeTypes=["image/jpeg","image/png","image/svg+xml","image/gif","image/webp"],!0)}),ie("click",ce,()=>{s(s().mimeTypes=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],!0)}),ie("click",ve,()=>{s(s().mimeTypes=["video/mp4","video/x-ms-wmv","video/quicktime","video/3gpp"],!0)}),ie("click",be,()=>{s(s().mimeTypes=["application/zip","application/x-7z-compressed","application/x-rar-compressed"],!0)}),b(U,se)},$$slots:{default:!0}}),j(()=>W(R,"for",r(P))),b(C,N)}}});var w=g(p,2),k=S(w);Ce(k,{class:"form-field",get name(){return`fields.${a()??""}.thumbs`},children:Ie,$$slots:{default:(C,O)=>{const P=ne(()=>O.uniqueId);var N=OO(),R=V(N),q=g(S(R),2);We(q,(U,J)=>ct?.(U,J),()=>({text:"List of additional thumb sizes for image files, along with the default thumb size of 100x100. The thumbs are generated lazily on first access.",position:"top"}));var B=g(R,2);oo(B,{get id(){return r(P)},placeholder:"e.g. 50x50, 480x720",get value(){return s().thumbs},set value(U){s(s().thumbs=U,!0)},$$legacy:!0});var Y=g(B,2),z=g(S(Y),2),K=g(S(z),4);Jn(K,{class:"dropdown dropdown-sm dropdown-center dropdown-nowrap p-r-10",children:(U,J)=>{var se=EO();b(U,se)},$$slots:{default:!0}}),j(()=>W(R,"for",r(P))),b(C,N)}}});var $=g(w,2),D=S($);Ce(D,{class:"form-field",get name(){return`fields.${a()??""}.maxSize`},children:Ie,$$slots:{default:(C,O)=>{const P=ne(()=>O.uniqueId);var N=DO(),R=V(N),q=g(R,2);W(q,"max",A(()=>Number.MAX_SAFE_INTEGER)),j(()=>{W(R,"for",r(P)),W(q,"id",r(P)),qn(q,(L(s()),A(()=>s().maxSize||"")))}),ie("input",q,B=>s(s().maxSize=parseInt(B.target.value,10),!0)),b(C,N)}}});var I=g($,2);{var E=C=>{var O=MO(),P=S(O);Ce(P,{class:"form-field",get name(){return`fields.${a()??""}.maxSelect`},children:Ie,$$slots:{default:(N,R)=>{const q=ne(()=>R.uniqueId);var B=PO(),Y=V(B),z=g(Y,2);W(z,"max",A(()=>Number.MAX_SAFE_INTEGER)),j(()=>{W(Y,"for",r(q)),W(z,"id",r(q))}),xt(z,()=>s().maxSelect,K=>s(s().maxSelect=K,!0)),b(N,B)}}}),b(C,O)};te(I,C=>{r(c)||C(E)})}var T=g(I,2);Ce(T,{class:"form-field form-field-toggle",get name(){return`fields.${a()??""}.protected`},children:Ie,$$slots:{default:(C,O)=>{const P=ne(()=>O.uniqueId);var N=AO(),R=V(N),q=g(R,2),B=g(q,2),Y=g(S(B));j(()=>{W(R,"id",r(P)),W(q,"for",r(P)),W(Y,"href",A(()=>"https://pocketbase.io/docs/files-handling#protected-files"))}),en(R,()=>s().protected,z=>s(s().protected=z,!0)),b(C,N)}}}),j(()=>{Me(w,1,In(r(c)?"col-sm-8":"col-sm-6")),Me($,1,In(r(c)?"col-sm-4":"col-sm-3"))}),b(h,_)}},$$legacy:!0})),Fe()}var RO=x('<label>Max size <small>(bytes)</small></label> <input type="number" step="1" min="0" placeholder="Default to max ~1MB"/>',1),FO=x('<i class="ri-arrow-up-s-line txt-sm"></i>'),qO=x('<i class="ri-arrow-down-s-line txt-sm"></i>'),zO=x(`<div class="block"><div class="alert alert-warning m-b-0 m-t-10"><div class="content">In order to support seamlessly both <code>application/json</code> and <code>multipart/form-data</code> requests, the following normalization rules are applied if the <code>json</code> field
                        is a <strong>plain string</strong>: <ul><li>"true" is converted to the json <code>true</code></li> <li>"false" is converted to the json <code>false</code></li> <li>"null" is converted to the json <code>null</code></li> <li>"[1,2,3]" is converted to the json <code>[1,2,3]</code></li> <li> <code></code></li> <li>numeric strings are converted to json number</li> <li>double quoted strings are left as they are (aka. without normalizations)</li> <li>any other string (empty string too) is double quoted</li></ul> Alternatively, if you want to avoid the string value normalizations, you can wrap your
                        data inside an object, eg.<code></code></div></div></div>`),jO=x('<!> <button type="button"><strong class="txt">String value normalizations</strong> <!></button> <!>',1);function UO(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);let s=ee(e,"field",12),a=ee(e,"key",8,""),o=M(!1);ze(),gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(l){s(l)},$$events:{rename(l){Qe.call(this,e,l)},remove(l){Qe.call(this,e,l)},duplicate(l){Qe.call(this,e,l)}},$$slots:{options:(l,c)=>{var u=jO(),d=V(u);Ce(d,{class:"form-field m-b-sm",get name(){return`fields.${a()??""}.maxSize`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=RO(),I=V(D),E=g(I,2);W(E,"max",A(()=>Number.MAX_SAFE_INTEGER)),j(()=>{W(I,"for",r($)),W(E,"id",r($)),qn(E,(L(s()),A(()=>s().maxSize||"")))}),ie("input",E,T=>s(s().maxSize=parseInt(T.target.value,10),!0)),b(w,D)}}});var f=g(d,2),h=g(S(f),2);{var v=w=>{var k=FO();b(w,k)},_=w=>{var k=qO();b(w,k)};te(h,w=>{r(o)?w(v):w(_,!1)})}var p=g(f,2);{var m=w=>{var k=zO(),$=S(k),D=S($),I=g(S(D),9),E=g(S(I),8),T=S(E);T.nodeValue='"{"a":1,"b":2}" is converted to the json ';var C=g(T);C.textContent='{"a":1,"b":2}';var O=g(I,2);O.textContent='{"data": anything}',Ot(3,k,()=>pn,()=>({duration:150})),b(w,k)};te(p,w=>{r(o)&&w(m)})}j(()=>Me(f,1,`btn btn-sm ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),ie("click",f,()=>{y(o,!r(o))}),b(l,u)}},$$legacy:!0})),Fe()}var VO=x('<label>Min</label> <input type="number"/>',1),BO=x('<label>Max</label> <input type="number"/>',1),HO=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>'),WO=x('<input type="checkbox"/> <label><span class="txt">No decimals</span> <i class="ri-information-line link-hint"></i></label>',1);function YO(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);let s=ee(e,"field",12),a=ee(e,"key",8,"");ze(),gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(o){s(o)},$$events:{rename(o){Qe.call(this,e,o)},remove(o){Qe.call(this,e,o)},duplicate(o){Qe.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=HO(),u=S(c),d=S(u);Ce(d,{class:"form-field",get name(){return`fields.${a()??""}.min`},children:Ie,$$slots:{default:(v,_)=>{const p=ne(()=>_.uniqueId);var m=VO(),w=V(m),k=g(w,2);j(()=>{W(w,"for",r(p)),W(k,"id",r(p))}),xt(k,()=>s().min,$=>s(s().min=$,!0)),b(v,m)}}});var f=g(u,2),h=S(f);Ce(h,{class:"form-field",get name(){return`fields.${a()??""}.max`},children:Ie,$$slots:{default:(v,_)=>{const p=ne(()=>_.uniqueId);var m=BO(),w=V(m),k=g(w,2);j(()=>{W(w,"for",r(p)),W(k,"id",r(p)),W(k,"min",(L(s()),A(()=>s().min)))}),xt(k,()=>s().max,$=>s(s().max=$,!0)),b(v,m)}}}),b(o,c)},optionsFooter:(o,l)=>{Ce(o,{class:"form-field form-field-toggle",get name(){return`fields.${a()??""}.onlyInt`},children:Ie,$$slots:{default:(c,u)=>{const d=ne(()=>u.uniqueId);var f=WO(),h=V(f),v=g(h,2),_=g(S(v),2);We(_,(p,m)=>ct?.(p,m),()=>({text:"Existing decimal numbers will not be affected."})),j(()=>{W(h,"id",r(d)),W(v,"for",r(d))}),en(h,()=>s().onlyInt,p=>s(s().onlyInt=p,!0)),b(c,f)}}})}},$$legacy:!0})),Fe()}var KO=x('<label>Min length</label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),JO=x('<label>Max length</label> <input type="number" step="1" placeholder="Up to 71 chars" max="71"/>',1),ZO=x('<label>Bcrypt cost</label> <input type="number" placeholder="Default to 10" step="1" min="6" max="31"/>',1),GO=x('<label>Validation pattern</label> <input type="text" placeholder="ex. ^\\w+$"/>',1),XO=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function QO(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);let s=ee(e,"field",12),a=ee(e,"key",8,"");function o(){s(s().cost=11,!0)}re(()=>L(s()),()=>{F.isEmpty(s().id)&&o()}),lt(),ze(),gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(l){s(l)},$$events:{rename(l){Qe.call(this,e,l)},remove(l){Qe.call(this,e,l)},duplicate(l){Qe.call(this,e,l)}},$$slots:{options:(l,c)=>{var u=XO(),d=S(u),f=S(d);Ce(f,{class:"form-field",get name(){return`fields.${a()??""}.min`},children:Ie,$$slots:{default:(k,$)=>{const D=ne(()=>$.uniqueId);var I=KO(),E=V(I),T=g(E,2);j(()=>{W(E,"for",r(D)),W(T,"id",r(D)),qn(T,(L(s()),A(()=>s().min||"")))}),ie("input",T,C=>s(s().min=C.target.value<<0,!0)),b(k,I)}}});var h=g(d,2),v=S(h);Ce(v,{class:"form-field",get name(){return`fields.${a()??""}.max`},children:Ie,$$slots:{default:(k,$)=>{const D=ne(()=>$.uniqueId);var I=JO(),E=V(I),T=g(E,2);j(()=>{W(E,"for",r(D)),W(T,"id",r(D)),W(T,"min",(L(s()),A(()=>s().min||0))),qn(T,(L(s()),A(()=>s().max||"")))}),ie("input",T,C=>s(s().max=C.target.value<<0,!0)),b(k,I)}}});var _=g(h,2),p=S(_);Ce(p,{class:"form-field",get name(){return`fields.${a()??""}.cost`},children:Ie,$$slots:{default:(k,$)=>{const D=ne(()=>$.uniqueId);var I=ZO(),E=V(I),T=g(E,2);j(()=>{W(E,"for",r(D)),W(T,"id",r(D)),qn(T,(L(s()),A(()=>s().cost||"")))}),ie("input",T,C=>s(s().cost=C.target.value<<0,!0)),b(k,I)}}});var m=g(_,2),w=S(m);Ce(w,{class:"form-field",get name(){return`fields.${a()??""}.pattern`},children:Ie,$$slots:{default:(k,$)=>{const D=ne(()=>$.uniqueId);var I=GO(),E=V(I),T=g(E,2);j(()=>{W(E,"for",r(D)),W(T,"id",r(D))}),xt(T,()=>s().pattern,C=>s(s().pattern=C,!0)),b(k,I)}}}),b(l,u)}},$$legacy:!0})),Fe()}var eD=x('<hr/> <button type="button" class="btn btn-transparent btn-block btn-sm"><i class="ri-add-line"></i> <span class="txt">New collection</span></button>',1),tD=x('<!> <div class="separator"></div>',1),nD=x('<label><span class="txt">Allowed collections (optional, multi)</span> <i class="ri-information-line link-hint"></i></label> <!>',1),iD=x('<!> <div class="separator"></div>',1),rD=x('<div class="separator"></div> <!> <!> <div class="separator"></div>',1),sD=x('<label>Min select</label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),aD=x('<label>Max select</label> <input type="number" step="1" placeholder="Default to single"/>',1),oD=x('<div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div>',1),lD=x('<label><span class="txt">Cascade delete</span> <i class="ri-information-line link-hint"></i></label> <!>',1),cD=x('<div class="grid grid-sm"><!> <div class="col-sm-12"><!></div></div>'),uD=x("<!> <!>",1);function dD(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);const s=()=>Ct(Gn,"$collections",a),[a,o]=Nt(),l=M(),c=M(),u=M();let d=ee(e,"field",12),f=ee(e,"key",8,"");const h=[{label:"Single",value:!0},{label:"Multiple",value:!1}],v=[{label:"False",value:!1},{label:"True",value:!0}];let _=M(null),p=M(d().maxSelect<=1),m=M(r(p));function w(){d(d().maxSelect=1,!0),d(d().collectionId=null,!0),d(d().collectionIds=[],!0),d(d().cascadeDelete=!1,!0),y(p,!0),y(m,r(p))}re(()=>s(),()=>{y(l,s().filter(I=>!I.system&&I.type!="view"))}),re(()=>L(d()),()=>{typeof d().maxSelect>"u"&&w()}),re(()=>(r(m),r(p)),()=>{r(m)!=r(p)&&(y(m,r(p)),r(p)?(d(d().minSelect=0,!0),d(d().maxSelect=1,!0)):d(d().maxSelect=999,!0))}),re(()=>(s(),L(d())),()=>{y(c,s().find(I=>I.id==d().collectionId)||null)}),re(()=>L(d()),()=>{y(u,Array.isArray(d().collectionIds)&&d().collectionIds.length>0)}),lt(),ze();var k=uD(),$=V(k);gi($,nn({get key(){return f()}},()=>i,{get field(){return d()},set field(I){d(I)},$$events:{rename(I){Qe.call(this,e,I)},remove(I){Qe.call(this,e,I)},duplicate(I){Qe.call(this,e,I)}},children:Ie,$$slots:{default:(I,E)=>{const T=ne(()=>E.interactive);var C=rD(),O=g(V(C),2);{var P=q=>{var B=tD(),Y=V(B);{let z=ne(()=>r(T)?"":"readonly");Ce(Y,{get class(){return`form-field required ${r(z)??""}`},inlineError:!0,get name(){return`fields.${f()??""}.collectionId`},children:Ie,$$slots:{default:(K,U)=>{const J=ne(()=>U.uniqueId);{let se=ne(()=>(r(l),A(()=>r(l).length>5))),le=ne(()=>(L(r(T)),L(d()),A(()=>!r(T)||d().id)));On(K,{get id(){return r(J)},get searchable(){return r(se)},selectPlaceholder:"Select collection *",noOptionsText:"No collections found",selectionKey:"id",get items(){return r(l)},get readonly(){return r(le)},get keyOfSelected(){return d().collectionId},set keyOfSelected(ce){d(d().collectionId=ce,!0)},$$slots:{afterOptions:(ce,ve)=>{var be=eD(),he=g(V(be),2);ie("click",he,()=>r(_)?.show()),b(ce,be)}},$$legacy:!0})}}}})}b(q,B)},N=q=>{var B=iD(),Y=V(B);Ce(Y,{class:"form-field",get name(){return`fields.${f()??""}.collectionIds`},children:Ie,$$slots:{default:(z,K)=>{const U=ne(()=>K.uniqueId);var J=nD(),se=V(J),le=g(S(se),2);We(le,(ve,be)=>ct?.(ve,be),()=>({text:"If set, the relation can point to records from multiple collections. Values are stored as '<collectionId>:<id>'.",position:"top"}));var ce=g(se,2);{let ve=ne(()=>(r(l),A(()=>r(l).length>5))),be=ne(()=>(L(r(T)),L(d()),A(()=>!r(T)||d().id)));On(ce,{get id(){return r(U)},multiple:!0,get searchable(){return r(ve)},selectPlaceholder:"Select allowed collections",noOptionsText:"No collections found",selectionKey:"id",get items(){return r(l)},get readonly(){return r(be)},get keyOfSelected(){return d().collectionIds},set keyOfSelected(he){d(d().collectionIds=he,!0)},$$legacy:!0})}j(()=>W(se,"for",r(U))),b(z,J)}}}),b(q,B)};te(O,q=>{r(p)?q(P):q(N,!1)})}var R=g(O,2);{let q=ne(()=>r(T)?"":"readonly");Ce(R,{get class(){return`form-field form-field-single-multiple-select ${r(q)??""}`},inlineError:!0,children:Ie,$$slots:{default:(B,Y)=>{const z=ne(()=>Y.uniqueId);{let K=ne(()=>!r(T));On(B,{get id(){return r(z)},get items(){return h},get readonly(){return r(K)},get keyOfSelected(){return r(p)},set keyOfSelected(U){y(p,U)},$$legacy:!0})}}}})}b(I,C)},options:(I,E)=>{var T=cD(),C=S(T);{var O=R=>{var q=oD(),B=V(q),Y=S(B);Ce(Y,{class:"form-field",get name(){return`fields.${f()??""}.minSelect`},children:Ie,$$slots:{default:(U,J)=>{const se=ne(()=>J.uniqueId);var le=sD(),ce=V(le),ve=g(ce,2);j(()=>{W(ce,"for",r(se)),W(ve,"id",r(se)),qn(ve,(L(d()),A(()=>d().minSelect||"")))}),ie("input",ve,be=>d(d().minSelect=be.target.value<<0,!0)),b(U,le)}}});var z=g(B,2),K=S(z);Ce(K,{class:"form-field",get name(){return`fields.${f()??""}.maxSelect`},children:Ie,$$slots:{default:(U,J)=>{const se=ne(()=>J.uniqueId);var le=aD(),ce=V(le),ve=g(ce,2);j(()=>{W(ce,"for",r(se)),W(ve,"id",r(se)),W(ve,"min",(L(d()),A(()=>d().minSelect||1)))}),xt(ve,()=>d().maxSelect,be=>d(d().maxSelect=be,!0)),b(U,le)}}}),b(R,q)};te(C,R=>{r(p)||R(O)})}var P=g(C,2),N=S(P);Ce(N,{class:"form-field",get name(){return`fields.${f()??""}.cascadeDelete`},children:Ie,$$slots:{default:(R,q)=>{const B=ne(()=>q.uniqueId);var Y=lD(),z=V(Y),K=g(S(z),2);We(K,(J,se)=>ct?.(J,se),()=>({text:[`Whether on ${r(c)?.name||"relation"} record deletion to delete also the current corresponding collection record(s).`,r(p)?null:`For "Multiple" relation fields the cascade delete is triggered only when all ${r(c)?.name||"relation"} ids are removed from the corresponding record.`].filter(Boolean).join(`

`),position:"top"}));var U=g(z,2);On(U,{get id(){return r(B)},get items(){return v},get keyOfSelected(){return d().cascadeDelete},set keyOfSelected(J){d(d().cascadeDelete=J,!0)},$$legacy:!0}),j(()=>W(z,"for",r(B))),b(R,Y)}}}),b(I,T)}},$$legacy:!0}));var D=g($,2);ft(Fd(D,{$$events:{save:I=>{I?.detail?.collection?.id&&I.detail.collection.type!="view"&&d(d().collectionId=I.detail.collection.id,!0)}},$$legacy:!0}),I=>y(_,I),()=>r(_)),b(n,k),Fe(),o()}var fD=x('<div class="dropdown-item plain svelte-g7evcz"><span class="txt"> </span> <div class="flex-fill"></div> <button type="button" class="btn btn-circle btn-transparent btn-hint btn-xs" title="Remove"><i class="ri-close-line" aria-hidden="true"></i></button></div>'),hD=x('<div class="block"><!> <div class="new-item-form svelte-g7evcz"><div class="form-field form-field-sm m-0"><div class="input-group"><input type="text" class="new-item-input svelte-g7evcz"/> <div class="form-field-addon suffix"><button type="button" title="Add new"><i class="ri-add-line" aria-hidden="true"></i></button></div></div></div></div></div>'),vD=x('<div class="block"><input readonly="" type="text" class="formatted-value-input svelte-g7evcz"/> <!></div>');function pD(n,e){Re(e,!1);const t=M();let i=ee(e,"id",8,null),s=ee(e,"items",28,()=>[]),a=ee(e,"disabled",8,!1),o=ee(e,"emptyPlaceholder",8,"Add items"),l=ee(e,"newPlaceholder",8,"e.g. optionA"),c=M(),u=M("");function d(m){s(s()||[]),F.removeByValue(s(),m),s().length||r(c)?.focus()}function f(m){const w=m.trim();w.length&&(s(s()||[]),F.pushUnique(s(),w),y(u,""))}re(()=>L(s()),()=>{y(t,s().join(" â¢ "))}),lt(),ze();var h=vD(),v=S(h),_=g(v,2);{var p=m=>{Jn(m,{class:"dropdown dropdown-block options-dropdown dropdown-left m-t-0 p-0",$$events:{hide:()=>y(u,"")},children:(w,k)=>{var $=hD(),D=S($);ht(D,3,s,R=>R,(R,q,B)=>{{let Y=ne(()=>"options_"+i());fa(R,{get index(){return r(B)},get group(){return r(Y)},get list(){return s()},set list(z){s(z)},children:(z,K)=>{var U=fD(),J=S(U),se=S(J),le=g(J,4);j(()=>Se(se,r(q))),ie("click",le,hn(()=>d(r(q)))),b(z,U)},$$slots:{default:!0},$$legacy:!0})}});var I=g(D,2),E=S(I),T=S(E),C=S(T);Bi(C,!0),ft(C,R=>y(c,R),()=>r(c));var O=g(C,2),P=S(O);let N;j(()=>{W(C,"placeholder",l()),N=Me(P,1,"btn btn-transparent btn-xs btn-circle new-item-btn svelte-g7evcz",null,N,{"btn-disabled":!r(u).length})}),xt(C,()=>r(u),R=>y(u,R)),ie("keydown",C,R=>{R.code==="Enter"&&(R.preventDefault(),f(R.target.value))}),ie("click",P,()=>f(r(u))),ie("dragover",$,hn(function(R){Qe.call(this,e,R)})),ie("dragleave",$,hn(function(R){Qe.call(this,e,R)})),ie("dragend",$,hn(function(R){Qe.call(this,e,R)})),ie("dragstart",$,hn(function(R){Qe.call(this,e,R)})),ie("drop",$,hn(function(R){Qe.call(this,e,R)})),b(w,$)},$$slots:{default:!0}})};te(_,m=>{a()||m(p)})}j(()=>{W(v,"id",i()),v.disabled=a(),W(v,"placeholder",o()),qn(v,r(t)),W(v,"title",r(t))}),b(n,h),Fe()}var mD=x('<div class="separator"></div> <!> <div class="separator"></div> <!> <div class="separator"></div>',1),gD=x('<label>Max select</label> <input type="number" step="1" min="2" placeholder="Default to single"/>',1);function bD(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);let s=ee(e,"field",12),a=ee(e,"key",8,"");const o=[{label:"Single",value:!0},{label:"Multiple",value:!1}];let l=M(s().maxSelect<=1),c=M(r(l));function u(){s(s().maxSelect=1,!0),s(s().values=[],!0),y(l,!0),y(c,r(l))}re(()=>L(s()),()=>{typeof s().maxSelect>"u"&&u()}),re(()=>(r(c),r(l),L(s())),()=>{r(c)!=r(l)&&(y(c,r(l)),r(l)?s(s().maxSelect=1,!0):s(s().maxSelect=s().values?.length||2,!0))}),lt(),ze(),gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(d){s(d)},$$events:{rename(d){Qe.call(this,e,d)},remove(d){Qe.call(this,e,d)},duplicate(d){Qe.call(this,e,d)}},children:Ie,$$slots:{default:(d,f)=>{const h=ne(()=>f.interactive);var v=mD(),_=g(V(v),2);{let m=ne(()=>r(h)?"":"readonly");Ce(_,{get class(){return`form-field required ${r(m)??""}`},inlineError:!0,get name(){return`fields.${a()??""}.values`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);pD(w,{get id(){return r($)},emptyPlaceholder:"Add choices *",get items(){return s().values},set items(D){s(s().values=D,!0)},$$legacy:!0})}}})}var p=g(_,4);{let m=ne(()=>r(h)?"":"readonly");Ce(p,{get class(){return`form-field form-field-single-multiple-select ${r(m)??""}`},inlineError:!0,children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);{let D=ne(()=>!r(h));On(w,{get id(){return r($)},get items(){return o},get readonly(){return r(D)},get keyOfSelected(){return r(l)},set keyOfSelected(I){y(l,I)},$$legacy:!0})}}}})}b(d,v)},options:(d,f)=>{var h=kt(),v=V(h);{var _=p=>{Ce(p,{class:"form-field",get name(){return`fields.${a()??""}.maxSelect`},children:Ie,$$slots:{default:(m,w)=>{const k=ne(()=>w.uniqueId);var $=gD(),D=V($),I=g(D,2);j(()=>{W(D,"for",r(k)),W(I,"id",r(k)),W(I,"max",(L(s()),A(()=>s().values.length)))}),xt(I,()=>s().maxSelect,E=>s(s().maxSelect=E,!0)),b(m,$)}}})};te(v,p=>{r(l)||p(_)})}b(d,h)}},$$legacy:!0})),Fe()}var yD=x('<label><span class="txt">Min length</span> <i class="ri-information-line link-hint"></i></label> <input type="number" step="1" min="0" placeholder="No min limit"/>',1),_D=x('<label><span class="txt">Max length</span> <i class="ri-information-line link-hint"></i></label> <input type="number" step="1" placeholder="Default to max 5000 characters"/>',1),xD=x('<i class="ri-information-line link-hint"></i>'),wD=x('<label><span class="txt">Validation pattern</span> <!></label> <input type="text"/> <div class="help-block"><p>Ex. <code></code></p></div>',1),kD=x('<label><span class="txt">Autogenerate pattern</span> <i class="ri-information-line link-hint"></i></label> <input type="text"/> <div class="help-block"><p>Ex. <code></code></p></div>',1),SD=x('<div class="grid grid-sm"><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div>');function TD(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);Re(e,!1);let s=ee(e,"field",12),a=ee(e,"key",8,"");ze(),gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(o){s(o)},$$events:{rename(o){Qe.call(this,e,o)},remove(o){Qe.call(this,e,o)},duplicate(o){Qe.call(this,e,o)}},$$slots:{options:(o,l)=>{var c=SD(),u=S(c),d=S(u);Ce(d,{class:"form-field",get name(){return`fields.${a()??""}.min`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=yD(),I=V(D),E=g(S(I),2);We(E,(C,O)=>ct?.(C,O),()=>"Clear the field or set it to 0 for no limit.");var T=g(I,2);W(T,"max",A(()=>Number.MAX_SAFE_INTEGER)),j(()=>{W(I,"for",r($)),W(T,"id",r($)),qn(T,(L(s()),A(()=>s().min||"")))}),ie("input",T,C=>s(s().min=parseInt(C.target.value,10),!0)),b(w,D)}}});var f=g(u,2),h=S(f);Ce(h,{class:"form-field",get name(){return`fields.${a()??""}.max`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=_D(),I=V(D),E=g(S(I),2);We(E,(C,O)=>ct?.(C,O),()=>"Clear the field or set it to 0 to fallback to the default limit.");var T=g(I,2);W(T,"max",A(()=>Number.MAX_SAFE_INTEGER)),j(()=>{W(I,"for",r($)),W(T,"id",r($)),W(T,"min",(L(s()),A(()=>s().min||0))),qn(T,(L(s()),A(()=>s().max||"")))}),ie("input",T,C=>s(s().max=parseInt(C.target.value,10),!0)),b(w,D)}}});var v=g(f,2),_=S(v);Ce(_,{class:"form-field",get name(){return`fields.${a()??""}.pattern`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=wD(),I=V(D),E=g(S(I),2);{var T=R=>{var q=xD();We(q,(B,Y)=>ct?.(B,Y),()=>"All record ids have forbidden characters and unique case-insensitive (ASCII) validations in addition to the user defined regex pattern."),b(R,q)};te(E,R=>{L(s()),A(()=>s().primaryKey)&&R(T)})}var C=g(I,2),O=g(C,2),P=S(O),N=g(S(P));N.textContent="^[a-z0-9]+$",j(()=>{W(I,"for",r($)),W(C,"id",r($))}),xt(C,()=>s().pattern,R=>s(s().pattern=R,!0)),b(w,D)}}});var p=g(v,2),m=S(p);Ce(m,{class:"form-field",get name(){return`fields.${a()??""}.autogeneratePattern`},children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=kD(),I=V(D),E=g(S(I),2);We(E,(N,R)=>ct?.(N,R),()=>"Set and autogenerate text matching the pattern on missing record create value.");var T=g(I,2),C=g(T,2),O=S(C),P=g(S(O));P.textContent="[a-z0-9]{30}",j(()=>{W(I,"for",r($)),W(T,"id",r($))}),xt(T,()=>s().autogeneratePattern,N=>s(s().autogeneratePattern=N,!0)),b(w,D)}}}),b(o,c)}},$$legacy:!0})),Fe()}function $D(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);let s=ee(e,"field",12),a=ee(e,"key",8,"");sb(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(o){s(o)},$$events:{rename(o){Qe.call(this,e,o)},remove(o){Qe.call(this,e,o)},duplicate(o){Qe.call(this,e,o)}},$$legacy:!0}))}function ID(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["field","key"]);let s=ee(e,"field",12),a=ee(e,"key",8,"");gi(n,nn({get key(){return a()}},()=>i,{get field(){return s()},set field(o){s(o)},$$events:{rename(o){Qe.call(this,e,o)},remove(o){Qe.call(this,e,o)},duplicate(o){Qe.call(this,e,o)}},$$legacy:!0}))}var CD=x("<div></div> <!> <hr/> <!>",1);function ED(n,e){Re(e,!1);const t=()=>Ct(Ul,"$scaffolds",i),[i,s]=Nt(),a=M();let o=ee(e,"collection",12),l=M();const c={text:TD,number:YO,bool:sO,email:sb,url:$D,editor:_O,date:mO,select:bD,json:UO,file:NO,relation:dD,password:QO,autodate:rO,geoPoint:ID};function u(T){o().fields[T]&&(o().fields.splice(T,1),o(o().fields=o().fields,!0))}function d(T){const C=o().fields[T];if(!C)return;C.onMountSelect=!1;const O=structuredClone(C);O.id="",O.system=!1,O.name=h(O.name+"_copy"),O.onMountSelect=!0,o().fields.splice(T+1,0,O),o(o().fields=o().fields,!0)}function f(T="text"){const C=F.initSchemaField({name:h(),type:T});C.onMountSelect=!0;const O=o().fields.findLastIndex(P=>P.type!="autodate");C.type!="autodate"&&O>=0?o().fields.splice(O+1,0,C):o().fields.push(C),o(o().fields=o().fields,!0)}function h(T="field"){let C=T,O=2,P=T.match(/\d+$/)?.[0]||"",N=P?T.substring(0,T.length-P.length):T;for(;v(C);)C=N+((P<<0)+O),O++;return C}function v(T){return!!o()?.fields?.find(C=>C.name.toLowerCase()===T.toLowerCase())}function _(T){return r(a).findIndex(C=>C===T)}function p(T,C){!o()?.fields?.length||T===C||!C||o()?.fields?.find(O=>O.name==T&&!O._toDelete)||o(o().indexes=o().indexes.map(O=>F.replaceIndexColumn(O,T,C)),!0)}function m(){const T=structuredClone(t()[o().type]),C=o().fields||[],O=C.filter(P=>!P.system);o(o().fields=T.fields,!0);for(const P of C){if(!P.system)continue;const N=o().fields.findIndex(R=>R.name==P.name);N<0||o(o().fields[N]=Object.assign(o().fields[N],P),!0)}for(const P of O)o().fields.push(P);if(o(o().indexes=o().indexes||[],!0),o().indexes.length){const P=t()[r(l)]?.indexes||[];e:for(let N=o().indexes.length-1;N>=0;N--){const R=F.parseIndex(o().indexes[N]),q=R.indexName.toLowerCase();for(const B of P){const Y=F.parseIndex(B).indexName.toLowerCase();if(q==Y){o().indexes.splice(N,1);continue e}}for(const B of R.columns)if(!v(B.name)){o().indexes.splice(N,1);continue e}}}F.mergeUnique(o().indexes,T.indexes)}function w(T,C){if(T===C||!C)return;let O=o().passwordAuth?.identityFields||[];for(let P=0;P<O.length;P++)O[P]==T&&(O[P]=C)}function k(T,C){p(T,C),w(T,C)}re(()=>(L(o()),r(l)),()=>{!o().id&&r(l)!=o().type&&(m(),y(l,o().type))}),re(()=>L(o()),()=>{typeof o().fields>"u"&&o(o().fields=[],!0)}),re(()=>L(o()),()=>{y(a,o().fields.filter(T=>!T._toDelete))}),lt(),ze();var $=CD(),D=V($);ht(D,7,()=>(L(o()),A(()=>o().fields)),T=>T,(T,C,O)=>{fa(T,{get index(){return r(O)},get disabled(){return(L(o()),A(()=>o().fields))[r(O)],A(()=>(L(o()),A(()=>o().fields))[r(O)]._toDelete)},dragHandleClass:"drag-handle-wrapper",get list(){return o().fields},set list(P){o(o().fields=P,!0)},$$events:{drag:P=>{if(!P.detail)return;const N=P.detail.target;N.style.opacity=0,setTimeout(()=>{N?.style?.removeProperty("opacity")},0),P.detail.dataTransfer.setDragImage(N,0,0)},sort:()=>{sn({})}},children:(P,N)=>{var R=kt(),q=V(R);{let B=ne(()=>((L(o()),A(()=>o().fields))[r(O)],A(()=>_((L(o()),A(()=>o().fields))[r(O)]))));mi(q,()=>c[(L(o()),A(()=>o().fields))[r(O)].type],(Y,z)=>{z(Y,{get key(){return r(B)},get collection(){return o()},get field(){return(L(o()),A(()=>o().fields))[r(O)]},set field(K){(L(o()),A(()=>o().fields))[r(O)]=K,Ys(()=>o())},$$events:{remove:()=>u(r(O)),duplicate:()=>d(r(O)),rename:K=>k(K.detail.oldName,K.detail.newName)},$$legacy:!0})})}b(P,R)},$$slots:{default:!0},$$legacy:!0})});var I=g(D,2);zE(I,{class:"btn btn-block btn-outline",$$events:{select:T=>f(T.detail)}});var E=g(I,4);RE(E,{get collection(){return o()},set collection(T){o(T)},$$legacy:!0}),j(()=>Me(D,1,`schema-fields total-${L(o()),A(()=>o().fields.length)??""}`)),b(n,$),Fe(),s()}var OD=x('<textarea disabled="" rows="7" placeholder="Loading..."></textarea>'),DD=x("<p> </p>"),PD=x('<div class="help-block help-block-error"><div class="content"></div></div>'),MD=x(`<label><span class="txt">Select query</span></label> <!> <div class="help-block"><ul><li>Wildcard columns (<code>*</code>) are not supported.</li> <li>The query must have a unique <code>id</code> column. <br/> If your query doesn't have a suitable one, you can use the universal <code>(ROW_NUMBER() OVER()) as id</code>.</li> <li>Expressions must be aliased with a valid formatted field name, e.g. <code>MAX(balance) as maxBalance</code>.</li> <li>Combined/multi-spaced expressions must be wrapped in parenthesis, e.g. <code>(MAX(balance) + 1) as maxBalance</code>.</li></ul></div> <!>`,1);function AD(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt();let a=ee(e,"collection",12),o=M(),l=M(!1),c=M([]);function u(d){y(c,[]);const f=F.getNestedVal(d,"fields",null);if(F.isEmpty(f))return;if(f?.message){r(c).push(f?.message);return}const h=F.extractColumnsFromQuery(a()?.viewQuery);F.removeByValue(h,"id"),F.removeByValue(h,"created"),F.removeByValue(h,"updated");for(let v in f)for(let _ in f[v]){const p=f[v][_].message,m=h[v]||v;r(c).push(F.sentenize(m+": "+p))}}fn(async()=>{y(l,!0);try{y(o,(await Wt(async()=>{const{default:d}=await import("./CodeEditor-UHXdE3Dc.js");return{default:d}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(d){console.warn(d)}y(l,!1)}),re(()=>t(),()=>{u(t())}),lt(),ze();{let d=ne(()=>(r(c),A(()=>r(c).length?"error":"")));Ce(n,{get class(){return`form-field required ${r(d)??""}`},name:"viewQuery",children:Ie,$$slots:{default:(f,h)=>{const v=ne(()=>h.uniqueId);var _=MD(),p=V(_),m=g(p,2);{var w=I=>{var E=OD();b(I,E)},k=I=>{var E=kt(),T=V(E);mi(T,()=>r(o),(C,O)=>{O(C,{get id(){return r(v)},placeholder:"eg. SELECT id, name from posts",language:"sql-select",minHeight:"150",get value(){return a().viewQuery},set value(P){a(a().viewQuery=P,!0)},$$events:{change:()=>{r(c).length&&Zn("fields")}},$$legacy:!0})}),b(I,E)};te(m,I=>{r(l)?I(w):I(k,!1)})}var $=g(m,4);{var D=I=>{var E=PD(),T=S(E);ht(T,5,()=>r(c),At,(C,O)=>{var P=DD(),N=S(P);j(()=>Se(N,r(O))),b(C,P)}),b(I,E)};te($,I=>{r(c),A(()=>r(c).length)&&I(D)})}j(()=>W(p,"for",r(v))),b(f,_)}}})}Fe(),s()}var LD=x("<code> </code>"),ND=x('<div><div class="alert alert-warning m-0"><div class="content"><p class="m-b-0">The following record fields are available:</p> <div class="inline-flex flex-gap-5"></div> <hr class="m-t-10 m-b-5"/> <p class="m-b-0">The request fields could be accessed with the special <em>@request</em> filter:</p> <div class="inline-flex flex-gap-5"><code>@request.headers.*</code> <code>@request.query.*</code> <code>@request.body.*</code> <code>@request.auth.*</code></div> <hr class="m-t-10 m-b-5"/> <p class="m-b-0">You could also add constraints and query other collections using the <em>@collection</em> filter:</p> <div class="inline-flex flex-gap-5"><code>@collection.ANY_COLLECTION_NAME.*</code></div> <hr class="m-t-10 m-b-5"/> <p>Example rule: <br/> <code>@request.auth.id != "" && created > "2022-01-01 00:00:00"</code></p></div></div></div>'),RD=x('<i class="ri-information-line link-hint"></i>'),FD=x('<i class="ri-information-line link-hint"></i>'),qD=x("<!> <!> <!>",1),zD=x('<i class="ri-arrow-up-s-line txt-sm"></i>'),jD=x('<i class="ri-arrow-down-s-line txt-sm"></i>'),UD=x(`<p>This rule is executed every time before authentication allowing you to restrict who
                        can authenticate.</p> <p>For example, to allow only verified users you can set it to <code>verified = true</code>.</p> <p>Leave it empty to allow anyone with an account to authenticate.</p> <p>To disable authentication entirely you can change it to "Set superusers only".</p>`,1),VD=x(`<p>This rule is executed in addition to the <code>create</code> and <code>update</code> API
                        rules.</p> <p>It enables superuser-like permissions to allow fully managing the auth record(s), eg.
                        changing the password without requiring to enter the old one, directly updating the
                        verified state or email, etc.</p>`,1),BD=x('<div class="block"><!> <!></div>'),HD=x('<hr/> <button type="button"><strong class="txt">Additional auth collection rules</strong> <!></button> <!>',1),WD=x('<div class="block m-b-sm handle"><div class="flex txt-sm txt-hint m-b-5"><p>All rules follow the <a target="_blank" rel="noopener noreferrer">PocketBase filter syntax and operators</a>.</p> <button type="button" class="expand-handle txt-sm txt-bold txt-nowrap link-hint"> </button></div> <!></div> <!> <!> <!> <!>',1);function YD(n,e){Re(e,!1);const t=M(),i=M();let s=ee(e,"collection",12),a=M(!1),o=M(s().manageRule!==null||s().authRule!=="");re(()=>L(s()),()=>{y(t,F.getAllCollectionIdentifiers(s()))}),re(()=>L(s()),()=>{y(i,s().fields?.filter(E=>E.hidden).map(E=>E.name))}),lt(),ze();var l=WD(),c=V(l),u=S(c),d=S(u),f=g(S(d)),h=g(d,2),v=S(h),_=g(u,2);{var p=E=>{var T=ND(),C=S(T),O=S(C),P=g(S(O),2);ht(P,5,()=>r(t),At,(N,R)=>{var q=kt(),B=V(q);{var Y=K=>{var U=LD(),J=S(U);j(()=>Se(J,r(R))),b(K,U)},z=rn(()=>(r(i),r(R),A(()=>!r(i).includes(r(R)))));te(B,K=>{r(z)&&K(Y)})}b(N,q)}),Ot(3,T,()=>pn,()=>({duration:150})),b(E,T)};te(_,E=>{r(a)&&E(p)})}var m=g(c,2);Fr(m,{label:"List/Search rule",formKey:"listRule",get collection(){return s()},get rule(){return s().listRule},set rule(E){s(s().listRule=E,!0)},$$legacy:!0});var w=g(m,2);Fr(w,{label:"View rule",formKey:"viewRule",get collection(){return s()},get rule(){return s().viewRule},set rule(E){s(s().viewRule=E,!0)},$$legacy:!0});var k=g(w,2);{var $=E=>{var T=qD(),C=V(T);Fr(C,{label:"Create rule",formKey:"createRule",get collection(){return s()},get rule(){return s().createRule},set rule(N){s(s().createRule=N,!0)},$$slots:{afterLabel:(N,R)=>{const q=ne(()=>R.isSuperuserOnly);var B=kt(),Y=V(B);{var z=K=>{var U=RD();We(U,(J,se)=>ct?.(J,se),()=>({text:"The main record fields hold the values that are going to be inserted in the database.",position:"top"})),b(K,U)};te(Y,K=>{r(q)||K(z)})}b(N,B)}},$$legacy:!0});var O=g(C,2);Fr(O,{label:"Update rule",formKey:"updateRule",get collection(){return s()},get rule(){return s().updateRule},set rule(N){s(s().updateRule=N,!0)},$$slots:{afterLabel:(N,R)=>{const q=ne(()=>R.isSuperuserOnly);var B=kt(),Y=V(B);{var z=K=>{var U=FD();We(U,(J,se)=>ct?.(J,se),()=>({text:`The main record fields represent the old/existing record field values.
To target the newly submitted ones you can use @request.body.*`,position:"top"})),b(K,U)};te(Y,K=>{r(q)||K(z)})}b(N,B)}},$$legacy:!0});var P=g(O,2);Fr(P,{label:"Delete rule",formKey:"deleteRule",get collection(){return s()},get rule(){return s().deleteRule},set rule(N){s(s().deleteRule=N,!0)},$$legacy:!0}),b(E,T)};te(k,E=>{L(s()),A(()=>s()?.type!=="view")&&E($)})}var D=g(k,2);{var I=E=>{var T=HD(),C=g(V(T),2),O=g(S(C),2);{var P=B=>{var Y=zD();b(B,Y)},N=B=>{var Y=jD();b(B,Y)};te(O,B=>{r(o)?B(P):B(N,!1)})}var R=g(C,2);{var q=B=>{var Y=BD(),z=S(Y);Fr(z,{label:"Authentication rule",formKey:"authRule",placeholder:"",get collection(){return s()},get rule(){return s().authRule},set rule(U){s(s().authRule=U,!0)},children:(U,J)=>{var se=UD();b(U,se)},$$slots:{default:!0},$$legacy:!0});var K=g(z,2);{let U=ne(()=>(L(s()),A(()=>s().manageRule!==null)));Fr(K,{label:"Manage rule",formKey:"manageRule",placeholder:"",get required(){return r(U)},get collection(){return s()},get rule(){return s().manageRule},set rule(J){s(s().manageRule=J,!0)},children:(J,se)=>{var le=VD();b(J,le)},$$slots:{default:!0},$$legacy:!0})}Ot(3,Y,()=>pn,()=>({duration:150})),b(B,Y)};te(R,B=>{r(o)&&B(q)})}j(()=>Me(C,1,`btn btn-sm m-b-sm ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),ie("click",C,()=>{y(o,!r(o))}),b(E,T)};te(D,E=>{L(s()),A(()=>s()?.type==="auth")&&E(I)})}j(()=>{W(f,"href",A(()=>"https://pocketbase.io/docs/api-rules-and-filters")),Se(v,r(a)?"Hide available fields":"Show available fields")}),ie("click",h,()=>y(a,!r(a))),b(n,l),Fe()}var KD=x("<p>All data associated with the removed fields will be permanently deleted!</p>"),JD=x(`<div class="alert alert-warning"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content txt-bold"><p>If any of the collection changes is part of another collection rule, filter or view query,
                    you'll have to update it manually!</p> <!></div></div>`),ZD=x('<li class="svelte-b715vp"><div class="inline-flex">Renamed collection <strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div></li>'),GD=x('<li class="svelte-b715vp">Multiple to single value conversion of field <strong> </strong> <em class="txt-sm">(will keep only the last array item)</em></li>'),XD=x('<li class="svelte-b715vp"><div class="inline-flex">Renamed field <strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div></li>'),QD=x('<li class="txt-danger svelte-b715vp">Removed field <span class="txt-bold"> </span></li>'),eP=x("<!> <!> <!>",1),tP=x('<li class="svelte-b715vp">Changed API rule <code class="txt-sm"> </code>: <br/> <small class="txt-mono txt-hint"><strong>Old</strong>: <span class="txt-preline"> </span></small> <br/> <small class="txt-mono txt-success"><strong>New</strong>: <span class="txt-preline"> </span></small></li>'),nP=x(`<li class="svelte-b715vp">Changed <code> </code> host <div class="inline-flex m-l-5"><strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i> <strong class="txt"> </strong></div> <br/> <em class="txt-hint">If the old and new OIDC configuration is not for the same provider consider deleting
                        all old <code class="txt-sm">_externalAuths</code> records associated to the current
                        collection and provider, otherwise it may result in account linking errors. <a target="_blank">Review existing <code class="txt-sm">_externalAuths</code> records <i class="ri-external-link-line txt-sm"></i></a>.</em></li>`),iP=x('<h6>Changes:</h6> <ul class="changes-list svelte-b715vp"><!> <!> <!> <!></ul>',1),rP=x("<!> <!>",1),sP=x("<h4>Confirm collection changes</h4>"),aP=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button" class="btn btn-expanded"><span class="txt">Confirm</span></button>',1);function oP(n,e){Re(e,!1);const t=M(),i=M(),s=M(),a=M(),o=M(),l=M(),c=M(),u=Ut();let d=M(),f=M(),h=M(),v,_=M([]),p=M([]);async function m(O,P,N=!0){y(f,O),y(h,P),v=N,await D(),T(),await $n(),r(t)||r(a).length||r(o).length||r(l).length||r(_).length||r(p).length?r(d)?.show():k()}function w(){r(d)?.hide()}function k(){w(),u("confirm",v)}const $=["oidc","oidc2","oidc3"];async function D(){y(_,[]);for(let O of $){let P=r(f)?.oauth2?.providers?.find(B=>B.name==O),N=r(h)?.oauth2?.providers?.find(B=>B.name==O);if(!P||!N)continue;let R=new URL(P.authURL).host,q=new URL(N.authURL).host;R!=q&&await I(O)&&r(_).push({name:O,oldHost:R,newHost:q})}}async function I(O){try{return await De.collection("_externalAuths").getFirstListItem(De.filter("collectionRef={:collectionId} && provider={:provider}",{collectionId:r(h)?.id,provider:O})),!0}catch{}return!1}function E(O){return`#/collections?collection=_externalAuths&filter=collectionRef%3D%22${r(h)?.id}%22+%26%26+provider%3D%22${O}%22`}function T(){if(y(p,[]),window.location.protocol!="https:")return;const O=["listRule","viewRule"];r(i)||O.push("createRule","updateRule","deleteRule"),r(s)&&O.push("manageRule","authRule");let P,N;for(let R of O)P=r(f)?.[R],N=r(h)?.[R],P!==N&&r(p).push({prop:R,oldRule:P,newRule:N})}re(()=>(r(f),r(h)),()=>{y(t,r(f)?.name!=r(h)?.name)}),re(()=>r(h),()=>{y(i,r(h)?.type==="view")}),re(()=>r(h),()=>{y(s,r(h)?.type==="auth")}),re(()=>(r(i),r(h)),()=>{y(a,!r(i)&&r(h)?.fields?.filter(O=>O.id&&!O._toDelete&&O._originalName!=O.name)||[])}),re(()=>(r(i),r(h)),()=>{y(o,!r(i)&&r(h)?.fields?.filter(O=>O.id&&O._toDelete)||[])}),re(()=>(r(h),r(f)),()=>{y(l,r(h)?.fields?.filter(O=>{const P=r(f)?.fields?.find(N=>N.id==O.id);return P?P.maxSelect>1&&O.maxSelect<=1:!1})||[])}),re(()=>(r(i),r(t),r(p)),()=>{y(c,!r(i)||r(t)||r(p).length)}),lt();var C={show:m,hide:w};return ze(),ft(mn(n,{class:"confirm-changes-panel",popup:!0,$$events:{hide(O){Qe.call(this,e,O)},show(O){Qe.call(this,e,O)}},children:(O,P)=>{var N=rP(),R=V(N);{var q=z=>{var K=JD(),U=g(S(K),2),J=g(S(U),2);{var se=le=>{var ce=KD();b(le,ce)};te(J,le=>{r(o),A(()=>r(o).length)&&le(se)})}b(z,K)};te(R,z=>{r(t),r(o),r(a),A(()=>r(t)||r(o).length||r(a).length)&&z(q)})}var B=g(R,2);{var Y=z=>{var K=iP(),U=g(V(K),2),J=S(U);{var se=he=>{var xe=ZD(),Te=S(xe),pe=g(S(Te)),ue=S(pe),we=g(pe,4),ke=S(we);j(()=>{Se(ue,(r(f),A(()=>r(f)?.name))),Se(ke,(r(h),A(()=>r(h)?.name)))}),b(he,xe)};te(J,he=>{r(t)&&he(se)})}var le=g(J,2);{var ce=he=>{var xe=eP(),Te=V(xe);ht(Te,1,()=>r(l),At,(we,ke)=>{var ae=GD(),_e=g(S(ae)),oe=S(_e);j(()=>Se(oe,(r(ke),A(()=>r(ke).name)))),b(we,ae)});var pe=g(Te,2);ht(pe,1,()=>r(a),At,(we,ke)=>{var ae=XD(),_e=S(ae),oe=g(S(_e)),me=S(oe),Q=g(oe,4),ye=S(Q);j(()=>{Se(me,(r(ke),A(()=>r(ke)._originalName))),Se(ye,(r(ke),A(()=>r(ke).name)))}),b(we,ae)});var ue=g(pe,2);ht(ue,1,()=>r(o),At,(we,ke)=>{var ae=QD(),_e=g(S(ae)),oe=S(_e);j(()=>Se(oe,(r(ke),A(()=>r(ke).name)))),b(we,ae)}),b(he,xe)};te(le,he=>{r(i)||he(ce)})}var ve=g(le,2);ht(ve,1,()=>r(p),At,(he,xe)=>{var Te=tP(),pe=g(S(Te)),ue=S(pe),we=g(pe,4),ke=g(S(we),2),ae=S(ke),_e=g(we,4),oe=g(S(_e),2),me=S(oe);j(()=>{Se(ue,(r(xe),A(()=>r(xe).prop))),Se(ae,(r(xe),A(()=>r(xe).oldRule===null?"null (superusers only)":r(xe).oldRule||'""'))),Se(me,(r(xe),A(()=>r(xe).newRule===null?"null (superusers only)":r(xe).newRule||'""')))}),b(he,Te)});var be=g(ve,2);ht(be,1,()=>r(_),At,(he,xe)=>{var Te=nP(),pe=g(S(Te)),ue=S(pe),we=g(pe,2),ke=S(we),ae=S(ke),_e=g(ke,4),oe=S(_e),me=g(we,4),Q=g(S(me),3);j(ye=>{Se(ue,(r(xe),A(()=>r(xe).name))),Se(ae,(r(xe),A(()=>r(xe).oldHost))),Se(oe,(r(xe),A(()=>r(xe).newHost))),W(Q,"href",ye)},[()=>(r(xe),A(()=>E(r(xe).name)))]),b(he,Te)}),b(z,K)};te(B,z=>{r(c)&&z(Y)})}b(O,N)},$$slots:{default:!0,header:(O,P)=>{var N=sP();b(O,N)},footer:(O,P)=>{var N=aP(),R=V(N);Bi(R,!0);var q=g(R,2);ie("click",R,()=>w()),ie("click",q,()=>k()),b(O,N)}},$$legacy:!0}),O=>y(d,O),()=>r(d)),yt(e,"show",m),yt(e,"hide",w),Fe(C)}var lP=x('<div class="tab-item active"><!></div>'),cP=x("<div><!></div>"),uP=x('<div class="tabs-content svelte-f500a1"><div><!></div> <!> <!></div>'),dP=x('<button type="button" class="dropdown-item" role="menuitem"><i class="ri-file-copy-line" aria-hidden="true"></i> <span class="txt">Duplicate</span></button> <hr/>',1),fP=x('<button type="button" class="dropdown-item txt-danger" role="menuitem"><i class="ri-eraser-line" aria-hidden="true"></i> <span class="txt">Truncate</span></button>'),hP=x('<button type="button" class="dropdown-item txt-danger" role="menuitem"><i class="ri-delete-bin-7-line" aria-hidden="true"></i> <span class="txt">Delete</span></button>'),vP=x('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-braces-line" aria-hidden="true"></i> <span class="txt">Copy raw JSON</span></button> <!> <!> <!>',1),pP=x('<div class="flex-fill"></div> <div tabindex="0" role="button" aria-label="More collection options" class="btn btn-sm btn-circle btn-transparent flex-gap-0"><i class="ri-more-line" aria-hidden="true"></i> <!></div>',1),mP=x('<button type="button" role="menuitem"><i aria-hidden="true"></i> <span class="txt"> </span></button>'),gP=x('<i class="ri-arrow-down-s-fill" aria-hidden="true"></i> <!>',1),bP=x('<div class="help-block">System collection</div>'),yP=x('<label>Name</label> <input type="text" required="" spellcheck="false"/> <div class="form-field-addon"><div aria-label="View types"><span aria-hidden="true"></span> <span class="txt"> </span> <!></div></div> <!>',1),_P=x('<i class="ri-error-warning-fill txt-danger"></i>'),xP=x('<i class="ri-error-warning-fill txt-danger"></i>'),wP=x('<button type="button"><span class="txt">API Rules</span> <!></button>'),kP=x('<i class="ri-error-warning-fill txt-danger"></i>'),SP=x('<button type="button"><span class="txt">Options</span> <!></button>'),TP=x('<h4 class="upsert-panel-title svelte-f500a1"> </h4> <!> <form class="block"><!> <input type="submit" class="hidden" tabindex="-1"/></form> <div class="tabs-header stretched"><button type="button"><span class="txt"> </span> <!></button> <!> <!></div>',1),$P=x('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Save and continue</span></button>'),IP=x('<button type="button" class="btn p-l-5 p-r-5 flex-gap-0"><i class="ri-arrow-down-s-line" aria-hidden="true"></i> <!></button>'),CP=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <div class="btns-group no-gap"><button type="button" title="Save and close"><span class="txt"> </span></button> <!></div>',1),EP=x("<!> <!>",1);function Fd(n,e){Re(e,!1);const t=()=>Ct(Ul,"$scaffolds",s),i=()=>Ct(Vn,"$errors",s),[s,a]=Nt(),o=M(),l=M(),c=M(),u=M(),d=M(),f=M(),h="schema",v="api_rules",_="options",p="base",m="auth",w="view",k=M({});ot(k,r(k)[p]="Base"),ot(k,r(k)[w]="View"),ot(k,r(k)[m]="Auth");const $=Ut();let D=M(),I=M(),E=M(null),T=M({}),C=M(!1),O=M(!1),P=M(!1),N=M(h),R=M(he(r(T))),q=M(""),B=M([]);function Y(Q){y(N,Q)}function z(Q){return J(Q),y(P,!0),y(O,!1),y(C,!1),Y(h),r(D)?.show()}function K(){return r(D)?.hide()}function U(){y(P,!1),K()}async function J(Q){sn({}),typeof Q<"u"?(y(E,Q),y(T,structuredClone(Q))):(y(E,null),y(T,structuredClone(t().base)),r(T).fields.push({type:"autodate",name:"created",onCreate:!0}),r(T).fields.push({type:"autodate",name:"updated",onCreate:!0,onUpdate:!0})),ot(T,r(T).fields=r(T).fields||[]),ot(T,r(T)._originalName=r(T).name||""),await $n(),y(R,he(r(T)))}async function se(Q=!0){if(!r(O)){y(O,!0);try{r(T).id?await r(I)?.show(r(E),r(T),Q):await le(Q)}catch{}y(O,!1)}}async function le(Q=!0){if(r(C))return;y(C,!0);const ye=ce(),Ee=!r(T).id;try{let Ae;Ee?Ae=await De.collections.create(ye):Ae=await De.collections.update(r(T).id,ye),Ha(),o0(Ae),Q?(y(P,!1),K()):J(Ae),vn(r(T).id?"Successfully updated collection.":"Successfully created collection."),$("save",{isNew:Ee,collection:Ae}),Ee&&(Kn(Wi,Ae),await c0())}catch(Ae){De.error(Ae)}y(C,!1)}function ce(){const Q=Object.assign({},r(T));Q.fields=Q.fields.slice(0);for(let ye=Q.fields.length-1;ye>=0;ye--)Q.fields[ye]._toDelete&&Q.fields.splice(ye,1);return Q}function ve(){r(E)?.id&&Rn(`Do you really want to delete all "${r(E).name}" records, including their cascade delete references and files?`,()=>De.collections.truncate(r(E).id).then(()=>{U(),vn(`Successfully truncated collection "${r(E).name}".`),$("truncate")}).catch(Q=>{De.error(Q)}))}function be(){r(E)?.id&&Rn(`Do you really want to delete collection "${r(E).name}" and all its records?`,()=>De.collections.delete(r(E).id).then(()=>{U(),vn(`Successfully deleted collection "${r(E).name}".`),$("delete",r(E)),l0(r(E))}).catch(Q=>{De.error(Q)}))}function he(Q){return JSON.stringify(Q)}function xe(Q){ot(T,r(T).type=Q),y(T,Object.assign(structuredClone(t()[Q]),r(T))),Zn("fields")}function Te(){r(d)?Rn("You have unsaved changes. Do you really want to discard them?",()=>{pe()}):pe()}async function pe(){const Q=r(E)?structuredClone(r(E)):null;if(Q){if(Q.id="",Q.created="",Q.updated="",Q.name+="_duplicate",!F.isEmpty(Q.fields))for(const ye of Q.fields)ye.id="";if(!F.isEmpty(Q.indexes))for(let ye=0;ye<Q.indexes.length;ye++){const Ee=F.parseIndex(Q.indexes[ye]);Ee.indexName="idx_"+F.randomString(10),Ee.tableName=Q.name,Q.indexes[ye]=F.buildIndex(Ee)}}z(Q),await $n(),y(R,"")}function ue(Q,ye=[]){if(F.isEmpty(Q))return!1;const Ee=Object.keys(Q);for(let Ae of Ee)if(!ye.includes(Ae))return!0;return!1}function we(){F.copyToClipboard(JSON.stringify(r(E),null,2)),oa("The collection JSON was copied to your clipboard!",3e3)}re(()=>t(),()=>{y(B,Object.keys(t().base||{}))}),re(()=>r(T),()=>{y(o,r(T).type===m)}),re(()=>r(T),()=>{y(l,r(T).type===w)}),re(()=>(i(),F),()=>{i().fields||i().viewQuery||i().indexes?y(q,F.getNestedVal(i(),"fields.message")||"Has errors"):y(q,"")}),re(()=>r(T),()=>{y(c,!!r(T).id&&r(T).system)}),re(()=>r(T),()=>{y(u,!!r(T).id&&r(T).system&&r(T).name=="_superusers")}),re(()=>(r(R),r(T)),()=>{y(d,r(R)!=he(r(T)))}),re(()=>(r(T),r(d)),()=>{y(f,!r(T).id||r(d))}),re(()=>(r(N),r(T)),()=>{r(N)===_&&r(T).type!=="auth"&&Y(h)}),re(()=>r(T),()=>{r(T).type==="view"&&(ot(T,r(T).createRule=null),ot(T,r(T).updateRule=null),ot(T,r(T).deleteRule=null),ot(T,r(T).indexes=[]))}),re(()=>(r(T),r(E),F),()=>{r(T).name&&r(E)?.name!=r(T).name&&r(T).indexes.length>0&&ot(T,r(T).indexes=r(T).indexes?.map(Q=>F.replaceIndexTableName(Q,r(T).name)))}),lt();var ke={changeTab:Y,show:z,hide:K,forceHide:U};ze();var ae=EP(),_e=V(ae);{let Q=ne(()=>!r(C));ft(mn(_e,{class:"overlay-panel-lg colored-header collection-panel",escClose:!1,get overlayClose(){return r(Q)},beforeHide:()=>r(d)&&r(P)?(Rn("You have unsaved changes. Do you really want to close the panel?",()=>{y(P,!1),K()}),!1):!0,$$events:{hide(ye){Qe.call(this,e,ye)},show(ye){Qe.call(this,e,ye)}},children:(ye,Ee)=>{var Ae=uP(),Ne=S(Ae);let je;var He=S(Ne);{var dt=Ye=>{AD(Ye,{get collection(){return r(T)},set collection(Ke){y(T,Ke)},$$legacy:!0})},$e=Ye=>{ED(Ye,{get collection(){return r(T)},set collection(Ke){y(T,Ke)},$$legacy:!0})};te(He,Ye=>{r(l)?Ye(dt):Ye($e,!1)})}var Be=g(Ne,2);{var Ze=Ye=>{var Ke=lP(),qe=S(Ke);YD(qe,{get collection(){return r(T)},set collection(Le){y(T,Le)},$$legacy:!0}),b(Ye,Ke)};te(Be,Ye=>{!r(u)&&r(N)===v&&Ye(Ze)})}var Je=g(Be,2);{var st=Ye=>{var Ke=cP();let qe;var Le=S(Ke);wE(Le,{get collection(){return r(T)},set collection(Ve){y(T,Ve)},$$legacy:!0}),j(()=>qe=Me(Ke,1,"tab-item",null,qe,{active:r(N)===_})),b(Ye,Ke)};te(Je,Ye=>{r(o)&&Ye(st)})}j(()=>je=Me(Ne,1,"tab-item",null,je,{active:r(N)===h})),b(ye,Ae)},$$slots:{default:!0,header:(ye,Ee)=>{var Ae=TP(),Ne=V(Ae),je=S(Ne),He=g(Ne,2);{var dt=tt=>{var Ge=pP(),gt=g(V(Ge),2),vt=g(S(gt),2);Jn(vt,{class:"dropdown dropdown-right dropdown-nowrap",children:(rt,Oe)=>{var H=vP(),G=V(H),de=g(G,2);{var ge=_t=>{var ut=dP(),mt=V(ut);ie("click",mt,()=>Te()),b(_t,ut)};te(de,_t=>{r(T),A(()=>!r(T).system)&&_t(ge)})}var Ue=g(de,2);{var Xe=_t=>{var ut=fP();ie("click",ut,()=>ve()),b(_t,ut)};te(Ue,_t=>{r(l)||_t(Xe)})}var Tt=g(Ue,2);{var at=_t=>{var ut=hP();ie("click",ut,Et(hn(()=>be()))),b(_t,ut)};te(Tt,_t=>{r(T),A(()=>!r(T).system)&&_t(at)})}ie("click",G,()=>we()),b(rt,H)},$$slots:{default:!0}}),b(tt,Ge)};te(He,tt=>{r(T),r(l),A(()=>!!r(T).id&&(!r(T).system||!r(l)))&&tt(dt)})}var $e=g(He,2),Be=S($e);Ce(Be,{class:"form-field collection-field-name required m-b-0",name:"name",children:Ie,$$slots:{default:(tt,Ge)=>{const gt=ne(()=>Ge.uniqueId);var vt=yP(),rt=V(vt),Oe=g(rt,2);Bi(Oe,(r(T),A(()=>!r(T).id)));let H;var G=g(Oe,2),de=S(G);let ge;var Ue=g(S(de),2),Xe=S(Ue),Tt=g(Ue,2);{var at=mt=>{var Lt=gP(),xn=g(V(Lt),2);Jn(xn,{class:"dropdown dropdown-right dropdown-nowrap m-t-5",children:(on,ui)=>{var It=kt(),Rt=V(It);ht(Rt,1,()=>(r(k),A(()=>Object.entries(r(k)))),At,(gn,Bn)=>{var Or=rn(()=>Zs(r(Bn),2));let Xn=()=>r(Or)[0],ur=()=>r(Or)[1];var yi=mP();let dr;var Dr=S(yi),ka=g(Dr,2),Gl=S(ka);j(Rs=>{dr=Me(yi,1,"dropdown-item closable",null,dr,{selected:Xn()==r(T).type}),Me(Dr,1,Rs,"svelte-f500a1"),Se(Gl,`${ur()??""} collection`)},[()=>In((L(F),Xn(),A(()=>F.getCollectionTypeIcon(Xn()))))]),ie("click",yi,()=>xe(Xn())),b(gn,yi)}),b(on,It)},$$slots:{default:!0}}),b(mt,Lt)};te(Tt,mt=>{r(T),A(()=>!r(T).id)&&mt(at)})}var _t=g(G,2);{var ut=mt=>{var Lt=bP();b(mt,Lt)};te(_t,mt=>{r(T),A(()=>r(T).system)&&mt(ut)})}j(()=>{W(rt,"for",r(gt)),W(Oe,"id",r(gt)),Oe.disabled=r(c),W(Oe,"placeholder",r(o)?'eg. "users"':'eg. "posts"'),qn(Oe,(r(T),A(()=>r(T).name))),H=Me(Oe,1,"",null,H,{"txt-bold":r(T).system}),W(de,"tabindex",(r(T),A(()=>r(T).id?-1:0))),W(de,"role",(r(T),A(()=>r(T).id?"":"button"))),ge=Me(de,1,`btn btn-sm p-r-10 p-l-10 ${r(T),A(()=>r(T).id?"btn-transparent":"btn-outline")??""}`,null,ge,{"btn-disabled":!!r(T).id}),Se(Xe,`Type: ${r(k),r(T),A(()=>r(k)[r(T).type]||"N/A")??""}`)}),ie("compositionend",Oe,mt=>{mt.data&&(ot(T,r(T).name=F.slugify(mt.target.value)),mt.target.value=r(T).name)}),ie("input",Oe,mt=>{mt.isComposing||(ot(T,r(T).name=F.slugify(mt.target.value)),mt.target.value=r(T).name)}),b(tt,vt)}}});var Ze=g($e,2),Je=S(Ze);let st;var Ye=S(Je),Ke=S(Ye),qe=g(Ye,2);{var Le=tt=>{var Ge=_P();We(Ge,(gt,vt)=>ct?.(gt,vt),()=>r(q)),Ot(3,Ge,()=>zn,()=>({duration:150,start:.7})),b(tt,Ge)},Ve=rn(()=>(L(F),r(q),A(()=>!F.isEmpty(r(q)))));te(qe,tt=>{r(Ve)&&tt(Le)})}var et=g(Je,2);{var nt=tt=>{var Ge=wP();let gt;var vt=g(S(Ge),2);{var rt=H=>{var G=xP();We(G,(de,ge)=>ct?.(de,ge),()=>"Has errors"),Ot(3,G,()=>zn,()=>({duration:150,start:.7})),b(H,G)},Oe=rn(()=>(L(F),i(),A(()=>!F.isEmpty(i()?.listRule)||!F.isEmpty(i()?.viewRule)||!F.isEmpty(i()?.createRule)||!F.isEmpty(i()?.updateRule)||!F.isEmpty(i()?.deleteRule)||!F.isEmpty(i()?.authRule)||!F.isEmpty(i()?.manageRule))));te(vt,H=>{r(Oe)&&H(rt)})}j(()=>gt=Me(Ge,1,"tab-item",null,gt,{active:r(N)===v})),ie("click",Ge,()=>Y(v)),b(tt,Ge)};te(et,tt=>{r(u)||tt(nt)})}var wt=g(et,2);{var pt=tt=>{var Ge=SP();let gt;var vt=g(S(Ge),2);{var rt=H=>{var G=kP();We(G,(de,ge)=>ct?.(de,ge),()=>"Has errors"),Ot(3,G,()=>zn,()=>({duration:150,start:.7})),b(H,G)},Oe=rn(()=>(i(),r(B),A(()=>i()&&ue(i(),r(B).concat(["manageRule","authRule"])))));te(vt,H=>{r(Oe)&&H(rt)})}j(()=>gt=Me(Ge,1,"tab-item",null,gt,{active:r(N)===_})),ie("click",Ge,()=>Y(_)),b(tt,Ge)};te(wt,tt=>{r(o)&&tt(pt)})}j(()=>{Se(je,(r(T),A(()=>r(T).id?"Edit collection":"New collection"))),st=Me(Je,1,"tab-item",null,st,{active:r(N)===h}),Se(Ke,r(l)?"Query":"Fields")}),ie("submit",$e,Et(()=>{r(f)&&se()})),ie("click",Je,()=>Y(h)),b(ye,Ae)},footer:(ye,Ee)=>{var Ae=CP(),Ne=V(Ae),je=g(Ne,2),He=S(je);let dt;var $e=S(He),Be=S($e),Ze=g(He,2);{var Je=st=>{var Ye=IP(),Ke=g(S(Ye),2);Jn(Ke,{class:"dropdown dropdown-upside dropdown-right dropdown-nowrap m-b-5",children:(qe,Le)=>{var Ve=$P();ie("click",Ve,()=>se(!1)),b(qe,Ve)},$$slots:{default:!0}}),j(()=>Ye.disabled=!r(f)||r(C)||r(O)),b(st,Ye)};te(Ze,st=>{r(T),A(()=>r(T).id)&&st(Je)})}j(()=>{Ne.disabled=r(C),dt=Me(He,1,"btn",null,dt,{"btn-expanded":!r(T).id,"btn-expanded-sm":!!r(T).id,"btn-loading":r(C)||r(O)}),He.disabled=!r(f)||r(C)||r(O),Se(Be,(r(T),A(()=>r(T).id?"Save changes":"Create")))}),ie("click",Ne,()=>K()),ie("click",He,()=>se()),b(ye,Ae)}},$$legacy:!0}),ye=>y(D,ye),()=>r(D))}var oe=g(_e,2);ft(oP(oe,{$$events:{confirm:Q=>le(Q.detail)},$$legacy:!0}),Q=>y(I,Q),()=>r(I)),b(n,ae),yt(e,"changeTab",Y),yt(e,"show",z),yt(e,"hide",K),yt(e,"forceHide",U);var me=Fe(ke);return a(),me}var OP=x("<span></span>");function DP(n,e){Re(e,!1);const t=Ut();let i=ee(e,"tolerance",8,0),s=M(),a=0,o=0,l=0,c=0,u=M(!1);function d(p){p.stopPropagation(),a=p.clientX,o=p.clientY,l=p.clientX-r(s).offsetLeft,c=p.clientY-r(s).offsetTop,document.addEventListener("touchmove",h),document.addEventListener("mousemove",h),document.addEventListener("touchend",f),document.addEventListener("mouseup",f)}function f(p){r(u)&&(p.preventDefault(),y(u,!1),r(s).classList.remove("no-pointer-events"),t("dragstop",{event:p,elem:r(s)})),document.removeEventListener("touchmove",h),document.removeEventListener("mousemove",h),document.removeEventListener("touchend",f),document.removeEventListener("mouseup",f)}function h(p){let m=p.clientX-a,w=p.clientY-o,k=p.clientX-l,$=p.clientY-c;!r(u)&&Math.abs(k-r(s).offsetLeft)<i()&&Math.abs($-r(s).offsetTop)<i()||(p.preventDefault(),r(u)||(y(u,!0),r(s).classList.add("no-pointer-events"),t("dragstart",{event:p,elem:r(s)})),t("dragging",{event:p,elem:r(s),diffX:m,diffY:w}))}ze();var v=OP();let _;ft(v,p=>y(s,p),()=>r(s)),j(()=>_=Me(v,1,"dragline svelte-19mgcl6",null,_,{dragging:r(u)})),ie("mousedown",v,p=>{p.button==0&&d(p)}),ie("touchstart",v,d),b(n,v),Fe()}var PP=x("<aside><!></aside> <!>",1);function ab(n,e){Re(e,!1);const t="@superuserSidebarWidth";let i=ee(e,"class",8,""),s=M(),a=M(),o=M(localStorage.getItem(t)||null);re(()=>(r(o),r(s)),()=>{r(o)&&r(s)&&(ot(s,r(s).style.width=r(o)),localStorage.setItem(t,r(o)))}),lt(),ze();var l=PP(),c=V(l),u=S(c);Qt(u,e,"default",{},null),ft(c,f=>y(s,f),()=>r(s));var d=g(c,2);DP(d,{$$events:{dragstart:()=>{y(a,r(s).offsetWidth)},dragging:f=>{y(o,r(a)+f.detail.diffX+"px")},dragstop:()=>{F.triggerResize()}}}),j(()=>Me(c,1,`page-sidebar ${i()??""}`)),b(n,l),Fe()}var MP=x('<i class="ri-alert-line txt-sm link-hint" aria-hidden="true"></i>'),AP=x('<i class="ri-unpin-line svelte-1ew7kcp"></i>'),LP=x('<i class="ri-pushpin-line m-l-auto svelte-1ew7kcp"></i>'),NP=x('<a><i aria-hidden="true"></i> <span class="txt"> </span> <!>  <span class="btn btn-xs btn-circle btn-hint btn-transparent btn-pin-collection m-l-auto svelte-1ew7kcp" aria-hidden="true"><!></span></a>');function Vc(n,e){Re(e,!1);const t=()=>Ct(Wi,"$activeCollection",i),[i,s]=Nt(),a=M();let o=ee(e,"collection",8),l=ee(e,"pinnedIds",12);function c(D){l().includes(D.id)?F.removeByValue(l(),D.id):l().push(D.id),l(l())}re(()=>(L(l()),L(o())),()=>{y(a,l().includes(o().id))}),lt(),ze();var u=NP();let d;var f=S(u),h=g(f,2),v=S(h),_=g(h,2);{var p=D=>{var I=MP();We(I,(E,T)=>ct?.(E,T),()=>"OAuth2 auth is enabled but the collection doesn't have any registered providers"),b(D,I)};te(_,D=>{L(o()),A(()=>o().type=="auth"&&o().oauth2?.enabled&&!o().oauth2.providers?.length)&&D(p)})}var m=g(_,2);W(m,"aria-label","Pin collection");var w=S(m);{var k=D=>{var I=AP();b(D,I)},$=D=>{var I=LP();b(D,I)};te(w,D=>{r(a)?D(k):D($,!1)})}We(m,(D,I)=>ct?.(D,I),()=>({position:"right",text:(r(a)?"Unpin":"Pin")+" collection"})),Ft(()=>ie("click",m,Et(hn(()=>c(o()))))),We(u,D=>ii?.(D)),j(D=>{W(u,"href",`/collections?collection=${L(o()),A(()=>o().id)??""}`),d=Me(u,1,"sidebar-list-item svelte-1ew7kcp",null,d,{active:t()?.id===o().id}),W(u,"title",(L(o()),A(()=>o().name))),Me(f,1,D,"svelte-1ew7kcp"),Se(v,(L(o()),A(()=>o().name)))},[()=>In((L(F),L(o()),A(()=>F.getCollectionTypeIcon(o().type))))]),b(n,u),Fe(),s()}var RP=x('<div class="sidebar-title">Pinned</div> <!>',1),FP=x('<div class="sidebar-title">Others</div>'),qP=x("<!> <!>",1),zP=x('<i aria-hidden="true"></i>'),jP=x('<button type="button"><span class="txt">System</span> <!></button> <!>',1),UP=x('<p class="txt-hint m-t-10 m-b-10 txt-center">No collections found.</p>'),VP=x('<footer class="sidebar-footer"><button type="button" class="btn btn-block btn-outline"><i class="ri-add-line"></i> <span class="txt">New collection</span></button></footer>'),BP=x('<header class="sidebar-header"><div><div class="form-field-addon"><button type="button" aria-label="Clear search"><i class="ri-close-line"></i></button></div> <input type="text" placeholder="Search collections..." name="collections-search"/></div></header> <hr class="m-t-5 m-b-xs"/> <div><!> <!> <!> <!></div> <!>',1),HP=x("<!> <!>",1);function WP(n,e){Re(e,!1);const t=()=>Ct(Gn,"$collections",o),i=()=>Ct(Wi,"$activeCollection",o),s=()=>Ct(to,"$isCollectionsLoading",o),a=()=>Ct(yo,"$hideControls",o),[o,l]=Nt(),c=M(),u=M(),d=M(),f=M(),h=M(),v=M(),_="@pinnedCollections";let p=M(),m=M(""),w=M([]),k=M(!1),$=M();I();function D(){setTimeout(()=>{const P=document.querySelector(".collection-sidebar .sidebar-list-item.active");P&&P?.scrollIntoView({block:"nearest"})},0)}function I(){y(w,[]);try{const P=localStorage.getItem(_);P&&y(w,JSON.parse(P)||[])}catch{}}function E(){y(w,r(w).filter(P=>!!t().find(N=>N.id==P)))}re(()=>t(),()=>{t()&&(E(),D())}),re(()=>r(m),()=>{y(c,r(m).replace(/\s+/g,"").toLowerCase())}),re(()=>r(m),()=>{y(u,r(m)!=="")}),re(()=>r(w),()=>{r(w)&&localStorage.setItem(_,JSON.stringify(r(w)))}),re(()=>(t(),r(m),r(c)),()=>{y(d,t().filter(P=>P.id==r(m)||P.name?.replace(/\s+/g,"")?.toLowerCase()?.includes(r(c))))}),re(()=>(r(d),r(w)),()=>{y(f,r(d).filter(P=>r(w).includes(P.id)))}),re(()=>(r(d),r(w)),()=>{y(h,r(d).filter(P=>!P.system&&!r(w).includes(P.id)))}),re(()=>(r(d),r(w)),()=>{y(v,r(d).filter(P=>P.system&&!r(w).includes(P.id)))}),re(()=>(i(),r($),r(f)),()=>{i()?.id&&r($)!=i().id&&(y($,i().id),i().system&&!r(f).find(P=>P.id==i().id)?y(k,!0):y(k,!1))}),lt(),ze();var T=HP(),C=V(T);ab(C,{class:"collection-sidebar",children:(P,N)=>{var R=BP(),q=V(R),B=S(q);let Y;var z=S(B),K=S(z);let U;var J=g(z,2),se=g(q,4);let le;var ce=S(se);{var ve=ae=>{var _e=RP(),oe=g(V(_e),2);ht(oe,1,()=>r(f),me=>me.id,(me,Q)=>{Vc(me,{get collection(){return r(Q)},get pinnedIds(){return r(w)},set pinnedIds(ye){y(w,ye)},$$legacy:!0})}),b(ae,_e)};te(ce,ae=>{r(f),A(()=>r(f).length)&&ae(ve)})}var be=g(ce,2);{var he=ae=>{var _e=qP(),oe=V(_e);{var me=ye=>{var Ee=FP();b(ye,Ee)};te(oe,ye=>{r(f),A(()=>r(f).length)&&ye(me)})}var Q=g(oe,2);ht(Q,1,()=>r(h),ye=>ye.id,(ye,Ee)=>{Vc(ye,{get collection(){return r(Ee)},get pinnedIds(){return r(w)},set pinnedIds(Ae){y(w,Ae)},$$legacy:!0})}),b(ae,_e)};te(be,ae=>{r(h),A(()=>r(h).length)&&ae(he)})}var xe=g(be,2);{var Te=ae=>{var _e=jP(),oe=V(_e);let me;var Q=g(S(oe),2);{var ye=Ne=>{var je=zP();j(()=>Me(je,1,`ri-arrow-${r(k)?"up":"down"}-s-line`)),b(Ne,je)};te(Q,Ne=>{r(c),A(()=>!r(c).length)&&Ne(ye)})}var Ee=g(oe,2);{var Ae=Ne=>{var je=kt(),He=V(je);ht(He,1,()=>r(v),dt=>dt.id,(dt,$e)=>{Vc(dt,{get collection(){return r($e)},get pinnedIds(){return r(w)},set pinnedIds(Be){y(w,Be)},$$legacy:!0})}),b(Ne,je)};te(Ee,Ne=>{r(k),r(c),A(()=>r(k)||r(c).length)&&Ne(Ae)})}j(()=>{me=Me(oe,1,"sidebar-title m-b-xs",null,me,{"link-hint":!r(c).length}),W(oe,"aria-label",r(k)?"Expand system collections":"Collapse system collections"),W(oe,"aria-expanded",(r(k),r(c),A(()=>r(k)||r(c).length))),oe.disabled=(r(c),A(()=>r(c).length))}),ie("click",oe,()=>{r(c).length||y(k,!r(k))}),b(ae,_e)};te(xe,ae=>{r(v),A(()=>r(v).length)&&ae(Te)})}var pe=g(xe,2);{var ue=ae=>{var _e=UP();b(ae,_e)};te(pe,ae=>{r(c),r(d),A(()=>r(c).length&&!r(d).length)&&ae(ue)})}var we=g(se,2);{var ke=ae=>{var _e=VP(),oe=S(_e);ie("click",oe,()=>r(p)?.show()),b(ae,_e)};te(we,ae=>{a()||ae(ke)})}j(()=>{Y=Me(B,1,"form-field search",null,Y,{active:r(u)}),U=Me(K,1,"btn btn-xs btn-transparent btn-circle btn-clear",null,U,{hidden:!r(u)}),le=Me(se,1,"sidebar-content",null,le,{fade:s(),"sidebar-content-compact":r(d).length>20})}),ie("click",K,()=>y(m,"")),xt(J,()=>r(m),ae=>y(m,ae)),b(P,R)},$$slots:{default:!0}});var O=g(C,2);ft(Fd(O,{$$legacy:!0}),P=>y(p,P),()=>r(p)),b(n,T),Fe(),l()}var YP=x('<div class="datetime svelte-7gfk5e"><div class="date"> </div> <div class="time svelte-7gfk5e"> </div></div>'),KP=x('<span class="txt txt-hint">N/A</span>');function JP(n,e){Re(e,!1);const t=M(),i=M();let s=ee(e,"date",8,"");const a={get text(){return F.formatToLocalDate(s())+" Local"}};re(()=>L(s()),()=>{y(t,s()?s().substring(0,10):null)}),re(()=>L(s()),()=>{y(i,s()?s().substring(10,19):null)}),lt(),ze();var o=kt(),l=V(o);{var c=d=>{var f=YP(),h=S(f),v=S(h),_=g(h,2),p=S(_);We(f,(m,w)=>ct?.(m,w),()=>a),j(()=>{Se(v,r(t)),Se(p,`${r(i)??""} UTC`)}),b(d,f)},u=d=>{var f=KP();b(d,f)};te(l,d=>{s()?d(c):d(u,!1)})}b(n,o),Fe()}var ZP=x("<img/>"),GP=x("<object>Cannot preview the file.</object>"),XP=x('<button type="button" class="overlay-close" aria-label="Close"><i class="ri-close-line"></i></button>'),QP=x('<button type="button" class="link-hint txt-ellipsis inline-flex"> <i class="ri-external-link-line"></i></button> <div class="flex-fill"></div> <button type="button" class="btn btn-transparent">Close</button>',1);function eM(n,e){Re(e,!1);const t=M(),i=M(),s=M();let a=M(),o=M(""),l;async function c(v){l=v,l&&(y(o,await d()),r(a)?.show())}function u(){return r(a)?.hide()}async function d(){return typeof l=="function"?await l():await l}async function f(){try{y(o,await d()),window.open(r(o),"_blank","noreferrer,noopener")}catch(v){v.isAbort||console.warn("openInNewTab file token failure:",v)}}re(()=>r(o),()=>{y(t,r(o).indexOf("?"))}),re(()=>(r(o),r(t)),()=>{y(i,r(o).substring(r(o).lastIndexOf("/")+1,r(t)>0?r(t):void 0))}),re(()=>r(i),()=>{y(s,F.getFileType(r(i)))}),lt();var h={show:c,hide:u};return ze(),ft(mn(n,{get class(){return`preview preview-${r(s)??""}`},btnClose:!1,popup:!0,$$events:{show(v){Qe.call(this,e,v)},hide(v){Qe.call(this,e,v)}},children:(v,_)=>{var p=kt(),m=V(p);{var w=$=>{var D=kt(),I=V(D);{var E=C=>{var O=ZP();j(()=>{W(O,"src",r(o)),W(O,"alt",`Preview ${r(i)??""}`)}),b(C,O)},T=C=>{var O=GP();j(()=>{W(O,"title",r(i)),W(O,"data",r(o))}),b(C,O)};te(I,C=>{r(s)==="image"?C(E):C(T,!1)})}b($,D)},k=rn(()=>(r(a),A(()=>r(a)?.isActive())));te(m,$=>{r(k)&&$(w)})}b(v,p)},$$slots:{default:!0,header:(v,_)=>{var p=XP();ie("click",p,Et(u)),b(v,p)},footer:(v,_)=>{var p=QP(),m=V(p),w=S(m),k=g(m,4);j(()=>{W(m,"title",r(i)),Se(w,`${r(i)??""} `)}),ie("auxclick",m,f),ie("click",m,f),ie("click",k,u),b(v,p)}},$$legacy:!0}),v=>y(a,v),()=>r(a)),yt(e,"show",c),yt(e,"hide",u),Fe(h)}var tM=x("<div></div>"),nM=x('<img loading="lazy"/>'),iM=x('<i class="ri-video-line"></i>'),rM=x('<i class="ri-file-3-line"></i>'),sM=x('<button type="button"><!></button>'),aM=x("<!> <!>",1);function qd(n,e){Re(e,!1);const t=M(),i=M();let s=ee(e,"record",8,null),a=ee(e,"filename",8,""),o=ee(e,"size",8,""),l=M(),c=M(""),u=M(""),d=M(!0);f();async function f(){y(d,!0);try{y(u,await De.getSuperuserFileToken(s().collectionId))}catch($){console.warn("File token failure:",$)}y(d,!1)}function h(){y(c,"")}re(()=>L(a()),()=>{y(t,F.getFileType(a()))}),re(()=>(r(t),L(a())),()=>{y(i,["image","audio","video"].includes(r(t))||a().endsWith(".pdf"))}),re(()=>(r(d),L(s()),L(a()),r(u)),()=>{y(c,r(d)?"":De.files.getURL(s(),a(),{thumb:"100x100",token:r(u)}))}),lt(),ze();var v=aM(),_=V(v);{var p=$=>{var D=tM();j(()=>Me(D,1,`thumb ${o()?`thumb-${o()}`:""}`)),b($,D)},m=$=>{var D=sM();W(D,"draggable",!1);var I=S(D);{var E=O=>{var P=nM();W(P,"draggable",!1),j(()=>{W(P,"src",r(c)),W(P,"alt",a()),W(P,"title",`Preview ${a()??""}`)}),ie("error",P,h),b(O,P)},T=O=>{var P=iM();b(O,P)},C=O=>{var P=rM();b(O,P)};te(I,O=>{r(t)==="image"?O(E):r(t)==="video"||r(t)==="audio"?O(T,1):O(C,!1)})}j(()=>{Me(D,1,`thumb ${o()?`thumb-${o()}`:""} ${r(i)?"handle":""}`),W(D,"title",(r(i)?"Preview ":"")+a())}),ie("click",D,hn(async O=>{if(r(i))try{r(l)?.show(async()=>(y(u,await De.getSuperuserFileToken(s().collectionId)),De.files.getURL(s(),a(),{token:r(u)})))}catch(P){P.isAbort||console.warn("Preview file token failure:",P)}})),b($,D)};te(_,$=>{r(d)?$(p):$(m,!1)})}var w=g(_,2);{var k=$=>{ft(eM($,{$$legacy:!0}),D=>y(l,D),()=>r(l))};te(w,$=>{r(i)&&$(k)})}b(n,v),Fe()}var oM=x('<div class="txt"> </div>');function ob(n,e){Re(e,!1);let t=ee(e,"value",24,()=>({}));ze();var i=oM(),s=S(i);j(()=>Se(s,`${L(t()),A(()=>t()?.lon)??""}, ${L(t()),A(()=>t()?.lat)??""}`)),b(n,i),Fe()}var lM=x('<span class="delimiter">â¢</span>'),cM=x('<span class="expand-start"></span>'),uM=x('<span class="delimiter">|</span>'),dM=x("<!> <!>",1),fM=x('<span class="delimiter">|</span> <small class="delimiter txt-hint"> </small>',1),hM=x('<span class="expand-end"></span>'),vM=x("<!> <!> <!> <!>",1),pM=x('<span class="txt"> </span>'),mM=x("<!> <!>",1),gM=x('<span class="txt"> </span>'),bM=x("<!> <!>",1);function lb(n,e){Re(e,!1);const t=()=>Ct(Gn,"$collections",i),[i,s]=Nt(),a=M();let o=ee(e,"record",8),l=M([]),c=M([]);function u(){const v=r(a)?.fields||[];if(y(l,v.filter(_=>!_.hidden&&_.presentable&&_.type=="file")),y(c,v.filter(_=>!_.hidden&&_.presentable&&_.type!="file")),!r(l).length&&!r(c).length){const _=v.find(p=>!p.hidden&&p.type=="file"&&p.maxSelect==1&&p.mimeTypes?.find(m=>m.startsWith("image/")));_&&r(l).push(_)}}re(()=>(t(),L(o())),()=>{y(a,t()?.find(v=>v.id==o()?.collectionId))}),re(()=>r(a),()=>{r(a)&&u()}),lt(),ze();var d=bM(),f=V(d);ht(f,1,()=>r(l),At,(v,_)=>{const p=ne(()=>(L(F),L(o()),r(_),A(()=>F.toArray(o()[r(_).name]).slice(0,5))));var m=kt(),w=V(m);ht(w,1,()=>r(p),At,(k,$)=>{var D=kt(),I=V(D);{var E=C=>{qd(C,{get record(){return o()},get filename(){return r($)},size:"xs"})},T=rn(()=>(L(F),r($),A(()=>!F.isEmpty(r($)))));te(I,C=>{r(T)&&C(E)})}b(k,D)}),b(v,m)});var h=g(f,2);ht(h,1,()=>r(c),At,(v,_,p)=>{var m=mM(),w=V(m);{var k=T=>{var C=lM();b(T,C)};te(w,T=>{p>0&&T(k)})}var $=g(w,2);{var D=T=>{const C=ne(()=>(L(o()),r(_),A(()=>Array.isArray(o().expand?.[r(_).name])))),O=ne(()=>(L(F),L(o()),r(_),A(()=>F.toArray(o().expand?.[r(_).name]))));var P=vM(),N=V(P);{var R=U=>{var J=cM();J.textContent="[",b(U,J)};te(N,U=>{r(C)&&U(R)})}var q=g(N,2);ht(q,1,()=>(L(r(O)),A(()=>r(O).slice(0,2))),At,(U,J,se)=>{var le=dM(),ce=V(le);{var ve=he=>{var xe=uM();b(he,xe)};te(ce,he=>{se>0&&he(ve)})}var be=g(ce,2);lb(be,{get record(){return r(J)}}),b(U,le)});var B=g(q,2);{var Y=U=>{var J=fM(),se=g(V(J),2),le=S(se);j(()=>Se(le,`(${L(r(O)),A(()=>r(O).length-2)??""} more)`)),b(U,J)};te(B,U=>{L(r(O)),A(()=>r(O).length>2)&&U(Y)})}var z=g(B,2);{var K=U=>{var J=hM();J.textContent="]",b(U,J)};te(z,U=>{r(C)&&U(K)})}b(T,P)},I=T=>{ob(T,{get value(){return L(o()),r(_),A(()=>o()[r(_).name])}})},E=T=>{var C=pM(),O=S(C);j(P=>Se(O,P),[()=>(L(F),L(o()),r(_),A(()=>F.truncate(F.displayValue(o(),[r(_).name]),70)))]),b(T,C)};te($,T=>{r(_),L(o()),A(()=>r(_).type=="relation"&&o().expand?.[r(_).name])?T(D):(r(_),A(()=>r(_).type=="geoPoint")?T(I,1):T(E,!1))})}b(v,m)},v=>{var _=gM(),p=S(_);j(m=>Se(p,m),[()=>(L(F),L(o()),A(()=>F.truncate(F.displayValue(o(),[]),70)))]),b(v,_)}),b(n,d),Fe(),s()}var yM=x('<div class="record-info-excerpt"><div class="info-content"><!></div> <a target="_blank" aria-label="View record" class="record-link link-hint" rel="noopener noreferrer"><i class="ri-external-link-line txt-sm"></i></a></div>');function Il(n,e){Re(e,!1);let t=ee(e,"record",8);function i(c,...u){const d=Object.assign({},c);for(let f of u)delete d[f];return d}ze();var s=yM(),a=S(s),o=S(a);lb(o,{get record(){return t()}});var l=g(a,2);We(l,(c,u)=>ct?.(c,u),()=>({text:`Open relation record in new tab:
`+F.truncate(JSON.stringify(F.truncateObject(i(t(),"expand")),null,2),800,!0),class:"code",position:"left"})),Ft(()=>ie("click",l,hn(function(c){Qe.call(this,e,c)}))),Ft(()=>ie("keydown",l,hn(function(c){Qe.call(this,e,c)}))),j(()=>W(l,"href",`#/collections?collection=${L(t()),A(()=>t().collectionId)??""}&recordId=${L(t()),A(()=>t().id)??""}`)),b(n,s),Fe()}var _M=x('<span class="label label-warning">You</span>'),xM=x('<div class="label"><!> <div class="txt txt-ellipsis"> </div></div> <!>',1),wM=x('<span class="txt txt-ellipsis"> </span>'),kM=x('<span class="txt"> </span> <!>',1),SM=x('<span class="txt-hint">N/A</span>'),TM=x("<span> </span>"),$M=x('<span class="txt"> </span>'),IM=x('<a class="txt-ellipsis" target="_blank" rel="noopener noreferrer"> </a>'),CM=x('<span class="txt"> </span>'),EM=x('<span class="label"> </span>'),OM=x('<div class="inline-flex"></div>'),DM=x('<span class="label"><!></span>'),PM=x('<span class="label"> </span>'),MM=x("<div><!> <!></div>"),AM=x("<div><!> <!></div>"),LM=x('<div class="label"><!></div>'),NM=x('<span class="txt txt-ellipsis"> </span>'),RM=x('<div class="block txt-break fallback-block svelte-1b73nbl"> </div>');function qu(n,e){Re(e,!1);const t=()=>Ct(zl,"$superuser",i),[i,s]=Nt(),a=M();let o=ee(e,"record",8),l=ee(e,"field",8),c=ee(e,"short",8,!1);re(()=>(L(o()),L(l())),()=>{y(a,o()?.[l().name])}),lt(),ze();var u=kt(),d=V(u);{var f=P=>{var N=xM(),R=V(N),q=S(R);nr(q,{get value(){return r(a)}});var B=g(q,2),Y=S(B),z=g(R,2);{var K=U=>{var J=_M();b(U,J)};te(z,U=>{L(o()),t(),A(()=>o().collectionName=="_superusers"&&o().id==t().id)&&U(K)})}j(()=>Se(Y,r(a))),b(P,N)},h=P=>{const N=ne(()=>(L(F),r(a),A(()=>F.trimQuotedValue(JSON.stringify(r(a)))||'""')));var R=kt(),q=V(R);{var B=z=>{var K=wM(),U=S(K);j(J=>Se(U,J),[()=>(L(F),L(r(N)),A(()=>F.truncate(r(N))))]),b(z,K)},Y=z=>{var K=kM(),U=V(K),J=S(U),se=g(U,2);{var le=ce=>{{let ve=ne(()=>(r(a),A(()=>JSON.stringify(r(a),null,2))));nr(ce,{get value(){return r(ve)}})}};te(se,ce=>{L(r(N)),A(()=>r(N).length>500)&&ce(le)})}j(ce=>Se(J,ce),[()=>(L(F),L(r(N)),A(()=>F.truncate(r(N),500,!0)))]),b(z,K)};te(q,z=>{c()?z(B):z(Y,!1)})}b(P,R)},v=P=>{var N=SM();b(P,N)},_=rn(()=>(L(F),r(a),A(()=>F.isEmpty(r(a))))),p=P=>{var N=TM();let R;var q=S(N);j(()=>{R=Me(N,1,"label",null,R,{"label-success":!!r(a)}),Se(q,r(a)?"True":"False")}),b(P,N)},m=P=>{var N=$M(),R=S(N);j(()=>Se(R,r(a))),b(P,N)},w=P=>{var N=IM(),R=S(N);We(N,(q,B)=>ct?.(q,B),()=>"Open in new tab"),Ft(()=>ie("click",N,hn(function(q){Qe.call(this,e,q)}))),j(q=>{W(N,"href",r(a)),Se(R,q)},[()=>(L(F),r(a),A(()=>F.truncate(r(a))))]),b(P,N)},k=P=>{var N=kt(),R=V(N);{var q=Y=>{var z=CM(),K=S(z);j(U=>Se(K,U),[()=>(L(F),r(a),A(()=>F.truncate(F.plainText(r(a)),195)))]),b(Y,z)},B=Y=>{ud(Y,{cssClass:"tinymce-preview",conf:{branding:!1,promotion:!1,menubar:!1,statusbar:!1,min_height:30,height:59,max_height:500,autoresize_bottom_margin:5,resize:!1,content_style:"body { font-size: 14px }",toolbar:"",plugins:["autoresize"],skin:"pocketbase"},get value(){return r(a)},disabled:!0})};te(R,Y=>{c()?Y(q):Y(B,!1)})}b(P,N)},$=P=>{JP(P,{get date(){return r(a)}})},D=P=>{var N=OM();ht(N,7,()=>(L(F),r(a),A(()=>F.toArray(r(a)))),(R,q)=>q+R,(R,q)=>{var B=EM(),Y=S(B);j(()=>Se(Y,r(q))),b(R,B)}),b(P,N)},I=P=>{const N=ne(()=>(L(F),r(a),A(()=>F.toArray(r(a))))),R=ne(()=>(L(F),L(o()),L(l()),A(()=>F.toArray(o()?.expand?.[l().name])))),q=ne(()=>c()?20:500);var B=MM();let Y;var z=S(B);{var K=le=>{var ce=kt(),ve=V(ce);ht(ve,3,()=>(L(r(R)),L(r(q)),A(()=>r(R).slice(0,r(q)))),(be,he)=>he+be,(be,he)=>{var xe=DM(),Te=S(xe);Il(Te,{get record(){return r(he)}}),b(be,xe)}),b(le,ce)},U=le=>{var ce=kt(),ve=V(ce);ht(ve,1,()=>(L(r(N)),L(r(q)),A(()=>r(N).slice(0,r(q)))),At,(be,he)=>{var xe=PM(),Te=S(xe);j(()=>Se(Te,r(he))),b(be,xe)}),b(le,ce)};te(z,le=>{L(r(R)),A(()=>r(R).length)?le(K):le(U,!1)})}var J=g(z,2);{var se=le=>{var ce=Is("...");b(le,ce)};te(J,le=>{L(r(N)),L(r(q)),A(()=>r(N).length>r(q))&&le(se)})}j(()=>Y=Me(B,1,"rel-values svelte-1b73nbl",null,Y,{"inline-flex":c(),vertical:!c()})),b(P,B)},E=P=>{const N=ne(()=>(L(F),r(a),A(()=>F.toArray(r(a))))),R=ne(()=>c()?10:500);var q=AM();let B;var Y=S(q);ht(Y,3,()=>(L(r(N)),L(r(R)),A(()=>r(N).slice(0,r(R)))),(U,J)=>J+U,(U,J)=>{qd(U,{get record(){return o()},get filename(){return r(J)},size:"sm"})});var z=g(Y,2);{var K=U=>{var J=Is("...");b(U,J)};te(z,U=>{L(r(N)),L(r(R)),A(()=>r(N).length>r(R))&&U(K)})}j(()=>B=Me(q,1,"inline-flex",null,B,{multiple:l().maxSelect!=1})),b(P,q)},T=P=>{var N=LM(),R=S(N);ob(R,{get value(){return r(a)}}),b(P,N)},C=P=>{var N=NM(),R=S(N);j((q,B)=>{W(N,"title",q),Se(R,B)},[()=>(L(F),r(a),A(()=>F.truncate(r(a)))),()=>(L(F),r(a),A(()=>F.truncate(r(a))))]),b(P,N)},O=P=>{var N=RM(),R=S(N);j(()=>Se(R,r(a))),b(P,N)};te(d,P=>{L(l()),A(()=>l().primaryKey)?P(f):(L(l()),A(()=>l().type==="json")?P(h,1):r(_)?P(v,2):(L(l()),A(()=>l().type==="bool")?P(p,3):(L(l()),A(()=>l().type==="number")?P(m,4):(L(l()),A(()=>l().type==="url")?P(w,5):(L(l()),A(()=>l().type==="editor")?P(k,6):(L(l()),A(()=>l().type==="date"||l().type==="autodate")?P($,7):(L(l()),A(()=>l().type==="select")?P(D,8):(L(l()),A(()=>l().type==="relation")?P(I,9):(L(l()),A(()=>l().type==="file")?P(E,10):(L(l()),A(()=>l().type==="geoPoint")?P(T,11):c()?P(C,12):P(O,!1)))))))))))})}b(n,u),Fe(),s()}var FM=x('<tr><td class="min-width txt-hint txt-bold"> </td><td class="col-field svelte-1r0ghd8"><!></td></tr>'),qM=x("<table><tbody></tbody></table>"),zM=x("<h4><strong> </strong> record preview</h4>"),jM=x('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button>');function UM(n,e){Re(e,!1);const t=M();let i=ee(e,"collection",8),s=M(),a=M({}),o=M(!1);function l(h){return u(h),r(s)?.show()}function c(){return y(o,!1),r(s)?.hide()}async function u(h){y(a,{}),y(o,!0),y(a,await d(h)||{}),y(o,!1)}async function d(h){if(h&&typeof h=="string"){try{return await De.collection(i().id).getOne(h)}catch(v){v.isAbort||(c(),console.warn("resolveModel:",v),lr(`Unable to load record with id "${h}"`))}return null}return h}re(()=>L(i()),()=>{y(t,!!i()?.fields?.find(h=>h.type==="editor"))}),lt();var f={show:l,hide:c};ze();{let h=ne(()=>r(t)?"overlay-panel-xl":"overlay-panel-lg");ft(mn(n,{get class(){return`record-preview-panel ${r(h)??""}`},$$events:{hide(v){Qe.call(this,e,v)},show(v){Qe.call(this,e,v)}},children:(v,_)=>{var p=qM();let m;var w=S(p);ht(w,5,()=>(L(i()),A(()=>i()?.fields)),At,(k,$)=>{var D=FM(),I=S(D),E=S(I),T=g(I),C=S(T);qu(C,{get field(){return r($)},get record(){return r(a)}}),j(()=>Se(E,(r($),A(()=>r($).name)))),b(k,D)}),j(()=>m=Me(p,1,"table-border preview-table",null,m,{"table-loading":r(o)})),b(v,p)},$$slots:{default:!0,header:(v,_)=>{var p=zM(),m=S(p),w=S(m);j(()=>Se(w,(L(i()),A(()=>i()?.name)))),b(v,p)},footer:(v,_)=>{var p=jM();ie("click",p,()=>c()),b(v,p)}},$$legacy:!0}),v=>y(s,v),()=>r(s))}return yt(e,"show",l),yt(e,"hide",c),Fe(f)}var VM=x('<i class="ri-calendar-event-line txt-disabled"></i>');function BM(n,e){Re(e,!1);const t=()=>Ct(Gn,"$collections",i),[i,s]=Nt(),a=M(),o="yyyy-MM-dd HH:mm:ss.SSS";let l=ee(e,"record",8),c=M([]);function u(){y(c,[]);const f=r(a).fields||[];for(let h of f)h.type=="autodate"&&r(c).push(h.name+": "+F.formatToLocalDate(l()[h.name],o)+" Local")}re(()=>(L(l()),t()),()=>{y(a,l()&&t().find(f=>f.id==l().collectionId))}),re(()=>L(l()),()=>{l()&&u()}),lt(),ze();var d=VM();We(d,(f,h)=>ct?.(f,h),()=>({text:r(c).join(`
`),position:"left"})),b(n,d),Fe(),s()}var HM=x('<div class="block txt-center"><span class="loader"></span></div>'),WM=x('<div class="list-item"><figure class="provider-logo"><img alt="Provider logo"/></figure> <span class="txt"> </span> <div class="txt-hint"> </div> <button type="button" class="btn btn-transparent link-hint btn-circle btn-sm m-l-auto" aria-label="Unlink"><i class="ri-close-line"></i></button></div>'),YM=x('<div class="list"></div>'),KM=x('<h6 class="txt-hint txt-center m-t-sm m-b-sm">No linked OAuth2 providers.</h6>');function JM(n,e){Re(e,!1);const t=Ut();let i=ee(e,"record",8),s=M([]),a=M(!1);function o(p){return Rd.find(m=>m.key==p)||{}}function l(p){return o(p)?.title||F.sentenize(p,!1)}async function c(){if(!i()?.id){y(s,[]),y(a,!1);return}y(a,!0);try{y(s,await De.collection("_externalAuths").getFullList({filter:De.filter("collectionRef = {:collectionId} && recordRef = {:recordId}",{collectionId:i().collectionId,recordId:i().id})}))}catch(p){De.error(p)}y(a,!1)}function u(p){!i()?.id||!p||Rn(`Do you really want to unlink the ${l(p.provider)} provider?`,()=>De.collection("_externalAuths").delete(p.id).then(()=>{vn(`Successfully unlinked the ${l(p.provider)} provider.`),t("unlink",p.provider),c()}).catch(m=>{De.error(m)}))}c(),ze();var d=kt(),f=V(d);{var h=p=>{var m=HM();b(p,m)},v=p=>{var m=YM();ht(m,5,()=>r(s),At,(w,k)=>{var $=WM(),D=S($),I=S(D),E=g(D,2),T=S(E),C=g(E,2),O=S(C),P=g(C,2);j((N,R)=>{W(I,"src",`${A(()=>"./")??""}images/oauth2/${N??""}`),Se(T,R),Se(O,`ID: ${r(k),A(()=>r(k).providerId)??""}`)},[()=>(r(k),A(()=>o(r(k).provider)?.logo)),()=>(r(k),A(()=>l(r(k).provider)))]),ie("click",P,()=>u(r(k))),b(w,$)}),b(p,m)},_=p=>{var m=KM();b(p,m)};te(f,p=>{r(a)?p(h):(L(i()),r(s),A(()=>i()?.id&&r(s).length)?p(v,1):p(_,!1))})}b(n,d),Fe()}var ZM=x('<div class="flex flex-gap-5 p-5"><span class="secret svelte-1k2bs8d"> </span> <!>  <i class="ri-refresh-line txt-sm link-hint" aria-label="Refresh"></i></div>'),GM=x('<button tabindex="-1" type="button" aria-label="Generate"><i class="ri-sparkling-line" aria-hidden="true"></i> <!></button>');function XM(n,e){Re(e,!1);const t=Ut();let i=ee(e,"class",8,"btn-sm btn-hint btn-transparent"),s=ee(e,"length",8,32),a=M(""),o=M(),l=M(!1);async function c(){if(y(a,F.randomSecret(s())),t("generate",r(a)),await $n(),r(o)){let f=document.createRange();f.selectNode(r(o)),window.getSelection().removeAllRanges(),window.getSelection().addRange(f)}}ze();var u=GM(),d=g(S(u),2);Jn(d,{class:"dropdown dropdown-upside dropdown-center dropdown-nowrap",get active(){return r(l)},set active(f){y(l,f)},$$events:{show:c},children:(f,h)=>{var v=ZM(),_=S(v),p=S(_);ft(_,k=>y(o,k),()=>r(o));var m=g(_,2);nr(m,{get value(){return r(a)}});var w=g(m,2);We(w,(k,$)=>ct?.(k,$),()=>"Refresh"),Ft(()=>ie("click",w,c)),j(()=>Se(p,r(a))),b(f,v)},$$slots:{default:!0},$$legacy:!0}),We(u,(f,h)=>ct?.(f,h),()=>r(l)?"":"Generate"),j(()=>Me(u,1,`btn btn-circle ${i()??""}`,"svelte-1k2bs8d")),b(n,u),Fe()}var QM=x('<div class="form-field-addon email-visibility-addon svelte-nwd1ws"><button type="button"><span class="txt"> </span></button></div>'),eA=x('<label><i></i> <span class="txt">email</span></label> <!> <input type="email" autocomplete="off" class="svelte-nwd1ws"/>',1),tA=x('<input type="checkbox"/> <label>Change password</label>',1),nA=x('<label><i class="ri-lock-line"></i> <span class="txt">Password</span></label> <input type="password" autocomplete="new-password" required=""/> <div class="form-field-addon"><!></div>',1),iA=x('<label><i class="ri-lock-line"></i> <span class="txt">Password confirm</span></label> <input type="password" autocomplete="new-password" required=""/>',1),rA=x('<div class="block"><div><div class="col-sm-6"><!></div> <div class="col-sm-6"><!></div></div></div>'),sA=x('<input type="checkbox"/> <label>Verified</label>',1),aA=x('<div class="col-lg-12"><!></div>'),oA=x('<div class="grid m-b-base"><div class="col-lg-12"><!></div> <div class="col-lg-12"><!> <!></div> <!></div>');function lA(n,e){Re(e,!1);const t=M(),i=M(),s=M();let a=ee(e,"record",12),o=ee(e,"collection",8),l=ee(e,"isNew",24,()=>!a()?.id),c=M(!1);re(()=>L(o()),()=>{y(t,o()?.name=="_superusers")}),re(()=>L(o()),()=>{y(i,o()?.fields?.find($=>$.name=="email")||{})}),re(()=>L(o()),()=>{y(s,o()?.fields?.find($=>$.name=="password")||{})}),re(()=>(r(c),Zn),()=>{r(c)||(a(a().password=void 0,!0),a(a().passwordConfirm=void 0,!0),Zn("password"),Zn("passwordConfirm"))}),lt(),ze();var u=oA(),d=S(u),f=S(d);{let $=ne(()=>(r(i),A(()=>r(i)?.required?"required":"")));Ce(f,{get class(){return`form-field ${r($)??""}`},name:"email",children:Ie,$$slots:{default:(D,I)=>{const E=ne(()=>I.uniqueId);var T=eA(),C=V(T),O=S(C),P=g(C,2);{var N=q=>{var B=QM(),Y=S(B),z=S(Y),K=S(z);We(Y,(U,J)=>ct?.(U,J),()=>({text:"Make email public or private",position:"top-right"})),Ft(()=>ie("click",Y,Et(()=>a(a().emailVisibility=!a().emailVisibility,!0)))),j(()=>{Me(Y,1,`btn btn-sm btn-transparent ${L(a()),A(()=>a().emailVisibility?"btn-success":"btn-hint")??""}`),Se(K,`Public: ${L(a()),A(()=>a().emailVisibility?"On":"Off")??""}`)}),b(q,B)};te(P,q=>{r(t)||q(N)})}var R=g(P,2);Bi(R,l()),j(q=>{W(C,"for",r(E)),Me(O,1,q),W(R,"id",r(E)),R.required=(r(i),A(()=>r(i).required))},[()=>In((L(F),A(()=>F.getFieldTypeIcon("email"))))]),xt(R,()=>a().email,q=>a(a().email=q,!0)),b(D,T)}}})}var h=g(d,2),v=S(h);{var _=$=>{Ce($,{class:"form-field form-field-toggle",name:"verified",children:Ie,$$slots:{default:(D,I)=>{const E=ne(()=>I.uniqueId);var T=tA(),C=V(T),O=g(C,2);j(()=>{W(C,"id",r(E)),W(O,"for",r(E))}),en(C,()=>r(c),P=>y(c,P)),b(D,T)}}})};te(v,$=>{l()||$(_)})}var p=g(v,2);{var m=$=>{var D=rA(),I=S(D);let E;var T=S(I),C=S(T);Ce(C,{class:"form-field required",name:"password",children:Ie,$$slots:{default:(N,R)=>{const q=ne(()=>R.uniqueId);var B=nA(),Y=V(B),z=g(Y,2),K=g(z,2),U=S(K);{let J=ne(()=>(r(s),A(()=>Math.max(15,r(s).min||0))));XM(U,{get length(){return r(J)}})}j(()=>{W(Y,"for",r(q)),W(z,"id",r(q))}),xt(z,()=>a().password,J=>a(a().password=J,!0)),b(N,B)}}});var O=g(T,2),P=S(O);Ce(P,{class:"form-field required",name:"passwordConfirm",children:Ie,$$slots:{default:(N,R)=>{const q=ne(()=>R.uniqueId);var B=iA(),Y=V(B),z=g(Y,2);j(()=>{W(Y,"for",r(q)),W(z,"id",r(q))}),xt(z,()=>a().passwordConfirm,K=>a(a().passwordConfirm=K,!0)),b(N,B)}}}),j(()=>E=Me(I,1,"grid",null,E,{"p-t-xs":r(c)})),Ot(3,D,()=>pn,()=>({duration:150})),b($,D)};te(p,$=>{(l()||r(c))&&$(m)})}var w=g(h,2);{var k=$=>{var D=aA(),I=S(D);Ce(I,{class:"form-field form-field-toggle",name:"verified",children:Ie,$$slots:{default:(E,T)=>{const C=ne(()=>T.uniqueId);var O=sA(),P=V(O),N=g(P,2);j(()=>{W(P,"id",r(C)),W(N,"for",r(C))}),en(P,()=>a().verified,R=>a(a().verified=R,!0)),ie("change",P,Et(R=>{l()||Rn("Do you really want to manually change the verified account state?",()=>{},()=>{a(a().verified=!R.target.checked,!0)})})),b(E,O)}}}),b($,D)};te(w,$=>{r(t)||$(k)})}b(n,u),Fe()}var cA=x("<i></i>"),uA=x("<i></i>"),dA=x('<small class="label label-sm label-danger">Hidden</small>'),fA=x('<label><!> <span class="txt"> </span> <!> <!></label>');function bi(n,e){Re(e,!1);let t=ee(e,"uniqueId",8),i=ee(e,"field",8),s=ee(e,"icon",8,!0);ze();var a=fA(),o=S(a);{var l=v=>{var _=kt(),p=V(_);{var m=k=>{var $=cA();j(D=>Me($,1,D),[()=>In((L(F),A(()=>F.getFieldTypeIcon("primary"))))]),b(k,$)},w=k=>{var $=uA();j(D=>Me($,1,D),[()=>In((L(F),L(i()),A(()=>F.getFieldTypeIcon(i().type))))]),b(k,$)};te(p,k=>{L(i()),A(()=>i().primaryKey)?k(m):k(w,!1)})}b(v,_)};te(o,v=>{s()&&v(l)})}var c=g(o,2),u=S(c),d=g(c,2);{var f=v=>{var _=dA();b(v,_)};te(d,v=>{L(i()),A(()=>i().hidden)&&v(f)})}var h=g(d,2);Qt(h,e,"default",{},null),j(()=>{W(a,"for",t()),Se(u,(L(i()),A(()=>i().name)))}),b(n,a),Fe()}var hA=x('<input type="checkbox"/> <!>',1);function vA(n,e){Re(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,!1);ze();{let s=ne(()=>(L(t()),A(()=>t().required?"required":"")));Ce(n,{get class(){return`form-field form-field-toggle ${r(s)??""}`},get name(){return L(t()),A(()=>t().name)},children:Ie,$$slots:{default:(a,o)=>{const l=ne(()=>o.uniqueId);var c=hA(),u=V(c),d=g(u,2);bi(d,{get uniqueId(){return r(l)},get field(){return t()},icon:!1}),j(()=>W(u,"id",r(l))),en(u,i),b(a,c)}}})}Fe()}var pA=x('<div class="form-field-addon"><button type="button" class="link-hint clear-btn svelte-k8k05f" aria-label="Clear"><i class="ri-close-line"></i></button></div>'),mA=x("<!> <!> <!>",1);function gA(n,e){Re(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0),s=M(i());function a(l){l.detail&&l.detail.length==3&&i(l.detail[1])}function o(){i("")}re(()=>L(i()),()=>{i()&&i().length>19&&i(i().substring(0,19))}),re(()=>(r(s),L(i())),()=>{r(s)!=i()&&y(s,i())}),lt(),ze();{let l=ne(()=>(L(t()),A(()=>t().required?"required":"")));Ce(n,{get class(){return`form-field ${r(l)??""}`},get name(){return L(t()),A(()=>t().name)},children:Ie,$$slots:{default:(c,u)=>{const d=ne(()=>u.uniqueId);var f=mA(),h=V(f);bi(h,{get uniqueId(){return r(d)},get field(){return t()}});var v=g(h,2);{var _=m=>{var w=pA(),k=S(w);We(k,($,D)=>ct?.($,D),()=>"Clear"),Ft(()=>ie("click",k,()=>o())),b(m,w)};te(v,m=>{L(i()),L(t()),A(()=>i()&&!t().required)&&m(_)})}var p=g(v,2);{let m=ne(()=>(L(F),A(()=>F.defaultFlatpickrOptions())));Fu(p,{get id(){return r(d)},get options(){return r(m)},get value(){return r(s)},set value(w){y(s,w)},get formattedValue(){return i()},set formattedValue(w){i(w)},$$events:{close:a},$$legacy:!0})}b(c,f)}}})}Fe()}var bA=x(`<h6 class="txt-center txt-hint">You currently don't have any collection with <code>file</code> field.</h6>`),yA=x('<button type="button"> </button>'),_A=x('<img loading="lazy"/>'),xA=x('<i class="ri-file-3-line"></i>'),wA=x('<button type="button"><!></button>'),kA=x('<button type="button" class="btn btn-hint btn-sm"><span class="txt">Clear filter</span></button>'),SA=x('<div class="inline-flex"><span class="txt txt-hint">No records with images found.</span> <!></div>'),TA=x('<div class="block txt-center"><span class="loader loader-sm active"></span></div>'),$A=x("<!> <!>",1),IA=x('<div class="file-picker"><aside class="file-picker-sidebar"></aside> <div class="file-picker-content"><div class="flex m-b-base flex-gap-10"><!> <button type="button" class="btn btn-pill btn-transparent btn-hint p-l-xs p-r-xs"><div class="txt">New record</div></button></div> <!></div></div>'),CA=x("<h4> </h4>"),EA=x('<button type="button" class="btn btn-transparent m-r-auto"><span class="txt">Cancel</span></button> <!> <button type="button" class="btn btn-expanded"><span class="txt"> </span></button>',1),OA=x("<!> <!>",1);function DA(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["show","hide","title","submitText","fileTypes"]);Re(e,!1);const s=()=>Ct(Gn,"$collections",a),[a,o]=Nt(),l=M(),c=M(),u=M(),d=M(),f=Ut(),h="file_picker_"+F.randomString(5),v=50;let _=ee(e,"title",8,"Select a file"),p=ee(e,"submitText",8,"Insert"),m=ee(e,"fileTypes",24,()=>["image","document","video","audio","file"]),w=M(),k=M(),$=M(""),D=M([]),I=1,E=M(0),T=M(!1),C=M([]),O=M([]),P=M([]),N=M({}),R=M({}),q=M("");function B(){return U(!0),r(w)?.show()}function Y(){return r(w)?.hide()}function z(){y(D,[]),y(R,{}),y(q,"")}function K(){y($,"")}async function U(pe=!1){if(r(N)?.id){y(T,!0),pe&&z();try{const ue=pe?1:I+1,we=F.getAllCollectionIdentifiers(r(N));let ke=F.normalizeSearchFilter(r($),we)||"";ke&&(ke+=" && "),ke+="("+r(O).map(oe=>`${oe.name}:length>0`).join("||")+")";let ae="";r(N).type!="view"&&(ae="-@rowid");const _e=await De.collection(r(N).id).getList(ue,v,{filter:ke,sort:ae,fields:F.getExcerptCollectionFieldsList(r(N)),skipTotal:1,requestKey:h+"loadImagePicker"});y(D,F.filterDuplicatesByKey(r(D).concat(_e.items))),I=_e.page,y(E,_e.items.length),y(T,!1)}catch(ue){ue.isAbort||(De.error(ue),y(T,!1))}}}function J(){let pe=["100x100"];if(r(R)?.record?.id){for(const ue of r(O))if(F.toArray(r(R).record[ue.name]).includes(r(R).name)){pe=pe.concat(F.toArray(ue.thumbs));break}}y(P,[{label:"Original size",value:""}]);for(const ue of pe)r(P).push({label:`${ue} thumb`,value:ue});r(q)&&!pe.includes(r(q))&&y(q,"")}function se(pe){let ue=[];for(const we of r(O)){const ke=F.toArray(pe[we.name]);for(const ae of ke)m().includes(F.getFileType(ae))&&ue.push(ae)}return ue}function le(pe,ue){y(R,{record:pe,name:ue})}function ce(){r(d)&&(f("submit",Object.assign({size:r(q)},r(R))),Y())}re(()=>(s(),F),()=>{y(C,s().filter(pe=>pe.type!=="view"&&!!F.toArray(pe.fields).find(ue=>ue.type==="file"&&!ue.protected&&(!ue.mimeTypes?.length||!!ue.mimeTypes?.find(we=>we.startsWith("image/"))))))}),re(()=>(r(N),r(C)),()=>{!r(N)?.id&&r(C).length>0&&y(N,r(C)[0])}),re(()=>r(N),()=>{y(O,r(N)?.fields?.filter(pe=>pe.type==="file"&&!pe.protected))}),re(()=>r(N),()=>{r(N)?.id&&(K(),J())}),re(()=>r(R),()=>{r(R)?.name&&J()}),re(()=>(r($),r(N),r(w)),()=>{typeof r($)<"u"&&r(N)?.id&&r(w)?.isActive()&&U(!0)}),re(()=>r(R),()=>{y(l,(pe,ue)=>r(R)?.name==ue&&r(R)?.record?.id==pe.id)}),re(()=>r(D),()=>{y(c,r(D).find(pe=>se(pe).length>0))}),re(()=>(r(T),r(E)),()=>{y(u,!r(T)&&r(E)==v)}),re(()=>(r(T),r(R)),()=>{y(d,!r(T)&&!!r(R)?.name)}),lt();var ve={show:B,hide:Y};ze();var be=OA(),he=V(be);ft(mn(he,nn({popup:!0,class:"file-picker-popup"},()=>i,{$$events:{hide(pe){Qe.call(this,e,pe)},show(pe){Qe.call(this,e,pe)}},children:(pe,ue)=>{var we=kt(),ke=V(we);{var ae=oe=>{var me=bA();b(oe,me)},_e=oe=>{var me=IA(),Q=S(me);ht(Q,5,()=>r(C),He=>He.id,(He,dt)=>{var $e=yA();let Be;var Ze=S($e);j(()=>{Be=Me($e,1,"sidebar-item",null,Be,{active:r(N)?.id==r(dt).id}),Se(Ze,(r(dt),A(()=>r(dt).name)))}),ie("click",$e,Et(()=>{y(N,r(dt))})),b(He,$e)});var ye=g(Q,2),Ee=S(ye),Ae=S(Ee);Bl(Ae,{get value(){return r($)},placeholder:"Record search term or filter...",get autocompleteCollection(){return r(N)},$$events:{submit:He=>y($,He.detail)}});var Ne=g(Ae,2),je=g(Ee,2);yd(je,{class:"files-list",vThreshold:100,$$events:{vScrollEnd:()=>{r(u)&&U()}},children:(He,dt)=>{var $e=$A(),Be=V($e);{var Ze=Ke=>{var qe=kt(),Le=V(qe);ht(Le,1,()=>r(D),Ve=>Ve.id,(Ve,et)=>{const nt=ne(()=>(r(et),A(()=>se(r(et)))));var wt=kt(),pt=V(wt);ht(pt,1,()=>r(nt),At,(tt,Ge)=>{var gt=wA(),vt=rn(()=>le(r(et),r(Ge)));let rt;var Oe=S(gt);{var H=ge=>{var Ue=_A();j(Xe=>{W(Ue,"src",Xe),W(Ue,"alt",r(Ge))},[()=>(L(De),r(et),r(Ge),A(()=>De.files.getURL(r(et),r(Ge),{thumb:"100x100"})))]),b(ge,Ue)},G=rn(()=>(L(F),r(Ge),A(()=>F.hasImageExtension(r(Ge))))),de=ge=>{var Ue=xA();b(ge,Ue)};te(Oe,ge=>{r(G)?ge(H):ge(de,!1)})}We(gt,(ge,Ue)=>ct?.(ge,Ue),()=>r(Ge)+`
(record: `+r(et).id+")"),Ft(()=>ie("click",gt,Et(function(...ge){r(vt)?.apply(this,ge)}))),j(ge=>rt=Me(gt,1,"thumb handle",null,rt,ge),[()=>({"thumb-warning":r(l)(r(et),r(Ge))})]),b(tt,gt)}),b(Ve,wt)}),b(Ke,qe)},Je=Ke=>{var qe=SA(),Le=g(S(qe),2);{var Ve=et=>{var nt=kA();ie("click",nt,Et(K)),b(et,nt)};te(Le,et=>{r($),A(()=>r($)?.length)&&et(Ve)})}b(Ke,qe)};te(Be,Ke=>{r(c)?Ke(Ze):r(T)||Ke(Je,1)})}var st=g(Be,2);{var Ye=Ke=>{var qe=TA();b(Ke,qe)};te(st,Ke=>{r(T)&&Ke(Ye)})}b(He,$e)},$$slots:{default:!0}}),ie("click",Ne,()=>r(k)?.show()),b(oe,me)};te(ke,oe=>{r(C),A(()=>!r(C).length)?oe(ae):oe(_e,!1)})}b(pe,we)},$$slots:{default:!0,header:(pe,ue)=>{var we=CA(),ke=S(we);j(()=>Se(ke,_())),b(pe,we)},footer:(pe,ue)=>{var we=EA(),ke=V(we),ae=g(ke,2);{var _e=Ee=>{Ce(Ee,{class:"form-field file-picker-size-select",children:Ie,$$slots:{default:(Ae,Ne)=>{const je=ne(()=>Ne.uniqueId);{let He=ne(()=>!r(d));On(Ae,{upside:!0,get id(){return r(je)},get items(){return r(P)},get disabled(){return r(He)},selectPlaceholder:"Select size",get keyOfSelected(){return r(q)},set keyOfSelected(dt){y(q,dt)},$$legacy:!0})}}}})},oe=rn(()=>(L(F),r(R),A(()=>F.hasImageExtension(r(R)?.name))));te(ae,Ee=>{r(oe)&&Ee(_e)})}var me=g(ae,2),Q=S(me),ye=S(Q);j(()=>{ke.disabled=r(T),me.disabled=!r(d),Se(ye,p())}),ie("click",ke,Y),ie("click",me,ce),b(pe,we)}},$$legacy:!0})),pe=>y(w,pe),()=>r(w));var xe=g(he,2);ft(zd(xe,{get collection(){return r(N)},$$events:{save:pe=>{F.removeByKey(r(D),"id",pe.detail.record.id),r(D).unshift(pe.detail.record),y(D,r(D));const ue=se(pe.detail.record);ue.length>0&&le(pe.detail.record,ue[0])},delete:pe=>{r(R)?.record?.id==pe.detail.id&&y(R,{}),F.removeByKey(r(D),"id",pe.detail.id),y(D,r(D))}},$$legacy:!0}),pe=>y(k,pe),()=>r(k)),b(n,be),yt(e,"show",B),yt(e,"hide",Y);var Te=Fe(ve);return o(),Te}var PA=x('<div class="tinymce-wrapper"></div>'),MA=x("<!> <!>",1),AA=x("<!> <!>",1);function LA(n,e){Re(e,!1);const t=M();let i=ee(e,"field",8),s=ee(e,"value",12,""),a=M(),o=M(),l=M(!1),c=null;fn(async()=>(typeof s()>"u"&&s(""),c=setTimeout(()=>{y(l,!0)},100),()=>{clearTimeout(c)})),re(()=>L(i()),()=>{y(t,Object.assign(F.defaultEditorOptions(),{convert_urls:i().convertURLs,relative_urls:!1}))}),re(()=>L(s()),()=>{typeof s()>"u"&&s("")}),lt(),ze();var u=AA(),d=V(u);{let h=ne(()=>(L(i()),A(()=>i().required?"required":"")));Ce(d,{get class(){return`form-field form-field-editor ${r(h)??""}`},get name(){return L(i()),A(()=>i().name)},children:Ie,$$slots:{default:(v,_)=>{const p=ne(()=>_.uniqueId);var m=MA(),w=V(m);bi(w,{get uniqueId(){return r(p)},get field(){return i()}});var k=g(w,2);{var $=I=>{ud(I,{get id(){return r(p)},get conf(){return r(t)},get value(){return s()},set value(E){s(E)},$$events:{init:E=>{y(o,E.detail.editor),r(o).on("collections_file_picker",()=>{r(a)?.show()})}},$$legacy:!0})},D=I=>{var E=PA();b(I,E)};te(k,I=>{r(l)?I($):I(D,!1)})}b(v,m)}}})}var f=g(d,2);ft(DA(f,{title:"Select an image",fileTypes:["image"],$$events:{submit:h=>{r(o)?.execCommand("InsertImage",!1,De.files.getURL(h.detail.record,h.detail.name,{thumb:h.detail.size}))}},$$legacy:!0}),h=>y(a,h),()=>r(a)),b(n,u),Fe()}var NA=x('<!> <input type="email"/>',1);function RA(n,e){Re(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0);ze();{let s=ne(()=>(L(t()),A(()=>t().required?"required":"")));Ce(n,{get class(){return`form-field ${r(s)??""}`},get name(){return L(t()),A(()=>t().name)},children:Ie,$$slots:{default:(a,o)=>{const l=ne(()=>o.uniqueId);var c=NA(),u=V(c);bi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=g(u,2);j(()=>{W(d,"id",r(l)),d.required=(L(t()),A(()=>t().required))}),xt(d,i),b(a,c)}}})}Fe()}var FA=x("<img/>"),qA=x('<i class="ri-file-line"></i>');function zA(n,e){Re(e,!1);const t=M();let i=ee(e,"file",8),s=ee(e,"size",8,50);function a(){F.hasImageExtension(i()?.name)?F.generateThumb(i(),s(),s()).then(d=>{y(t,d)}).catch(d=>{y(t,""),console.warn("Unable to generate thumb: ",d)}):y(t,"")}re(()=>L(i()),()=>{typeof i()<"u"&&a()}),re(()=>{},()=>{y(t,"")}),lt(),ze();var o=kt(),l=V(o);{var c=d=>{var f=FA();W(f,"draggable",!1),j(()=>{W(f,"src",r(t)),W(f,"width",s()),W(f,"height",s()),W(f,"alt",(L(i()),A(()=>i().name)))}),b(d,f)},u=d=>{var f=qA();j(()=>W(f,"alt",(L(i()),A(()=>i().name)))),b(d,f)};te(l,d=>{r(t)?d(c):d(u,!1)})}b(n,o),Fe()}var jA=x('<button type="button" class="btn btn-sm btn-danger btn-transparent"><span class="txt">Restore</span></button>'),UA=x('<button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove" aria-label="Remove"><i class="ri-close-line"></i></button>'),VA=x('<div><div><!></div> <div class="content"><button type="button" title="Download"> </button></div> <div class="actions"><!></div></div>'),BA=x('<div><figure class="thumb"><!></figure> <div class="filename m-r-auto"><small class="label label-success m-r-5">New</small> <span class="txt"> </span></div> <button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove" aria-label="Remove"><i class="ri-close-line"></i></button></div>'),HA=x('<!> <div class="list"><!> <!> <div class="list-item list-item-btn"><input type="file" class="hidden"/> <button type="button" class="btn btn-transparent btn-sm btn-block"><i class="ri-upload-cloud-line"></i> <span class="txt">Upload new file</span></button></div></div>',1),WA=x('<div class="block"><!></div>');function YA(n,e){Re(e,!1);const t=M(),i=M(),s=M();let a=ee(e,"record",8),o=ee(e,"field",8),l=ee(e,"value",12,""),c=ee(e,"uploadedFiles",28,()=>[]),u=ee(e,"deletedFileNames",28,()=>[]),d=M(),f=M(),h=M(!1);function v(I){F.removeByValue(u(),I),u(u())}function _(I){F.pushUnique(u(),I),u(u())}function p(I){F.isEmpty(c()[I])||c().splice(I,1),c(c())}function m(){r(f)?.dispatchEvent(new CustomEvent("change",{detail:{value:l(),uploadedFiles:c(),deletedFileNames:u()},bubbles:!0}))}function w(I){I.preventDefault(),y(h,!1);const E=I.dataTransfer?.files||[];if(!(r(s)||!E.length)){for(const T of E){const C=r(i).length+c().length-u().length;if(o().maxSelect<=C)break;c().push(T)}c(c())}}async function k(I){try{let E=await De.getSuperuserFileToken(a().collectionId),T=De.files.getURL(a(),I,{token:E});window.open(T,"_blank","noreferrer, noopener")}catch(E){console.warn("openInNewTab file token failure:",E)}}re(()=>(L(c()),F),()=>{Array.isArray(c())||c(F.toArray(c()))}),re(()=>(L(u()),F),()=>{Array.isArray(u())||u(F.toArray(u()))}),re(()=>L(o()),()=>{y(t,o().maxSelect>1)}),re(()=>(L(l()),r(t)),()=>{F.isEmpty(l())&&l(r(t)?[]:"")}),re(()=>L(l()),()=>{y(i,F.toArray(l()))}),re(()=>(r(i),L(c()),L(o()),L(u())),()=>{y(s,(r(i).length||c().length)&&o().maxSelect<=r(i).length+c().length-u().length)}),re(()=>(L(c()),L(u())),()=>{(c()!==-1||u()!==-1)&&m()}),lt(),ze();var $=WA(),D=S($);{let I=ne(()=>(L(o()),A(()=>o().required?"required":""))),E=ne(()=>r(h)?"dragover":"");Ce(D,{get class(){return`
            form-field form-field-list form-field-file
            ${r(I)??""}
            ${r(E)??""}
        `},get name(){return L(o()),A(()=>o().name)},children:Ie,$$slots:{default:(T,C)=>{const O=ne(()=>C.uniqueId);var P=HA(),N=V(P);bi(N,{get uniqueId(){return r(O)},get field(){return o()}});var R=g(N,2),q=S(R);ht(q,3,()=>r(i),U=>U+a().id,(U,J,se)=>{const le=ne(()=>(L(u()),r(J),A(()=>u().includes(r(J)))));{let ce=ne(()=>(L(o()),A(()=>o().name+"_uploaded"))),ve=ne(()=>!r(t));fa(U,{get group(){return r(ce)},get index(){return r(se)},get disabled(){return r(ve)},get list(){return l()},set list(be){l(be)},children:Ie,$$slots:{default:(be,he)=>{const xe=ne(()=>he.dragging),Te=ne(()=>he.dragover);var pe=VA();let ue;var we=S(pe);let ke;var ae=S(we);qd(ae,{get record(){return a()},get filename(){return r(J)}});var _e=g(we,2),oe=S(_e);W(oe,"draggable",!1);var me=S(oe),Q=g(_e,2),ye=S(Q);{var Ee=Ne=>{var je=jA();ie("click",je,()=>v(r(J))),b(Ne,je)},Ae=Ne=>{var je=UA();We(je,(He,dt)=>ct?.(He,dt),()=>"Remove file"),Ft(()=>ie("click",je,()=>_(r(J)))),b(Ne,je)};te(ye,Ne=>{r(le)?Ne(Ee):Ne(Ae,!1)})}j(()=>{ue=Me(pe,1,"list-item",null,ue,{dragging:r(xe),dragover:r(Te)}),ke=Me(we,1,"",null,ke,{fade:r(le)}),Me(oe,1,`txt-ellipsis ${r(le)?"txt-strikethrough link-hint":"link-primary"}`),Se(me,r(J))}),ie("auxclick",oe,()=>k(r(J))),ie("click",oe,()=>k(r(J))),b(be,pe)}},$$legacy:!0})}});var B=g(q,2);ht(B,3,c,(U,J)=>U.name+J,(U,J,se)=>{{let le=ne(()=>(L(o()),A(()=>o().name+"_new"))),ce=ne(()=>!r(t));fa(U,{get group(){return r(le)},get index(){return r(se)},get disabled(){return r(ce)},get list(){return c()},set list(ve){c(ve)},children:Ie,$$slots:{default:(ve,be)=>{const he=ne(()=>be.dragging),xe=ne(()=>be.dragover);var Te=BA();let pe;var ue=S(Te),we=S(ue);zA(we,{get file(){return r(J)}});var ke=g(ue,2),ae=g(S(ke),2),_e=S(ae),oe=g(ke,2);We(oe,(me,Q)=>ct?.(me,Q),()=>"Remove file"),Ft(()=>ie("click",oe,()=>p(r(se)))),j(()=>{pe=Me(Te,1,"list-item",null,pe,{dragging:r(he),dragover:r(xe)}),W(ke,"title",(r(J),A(()=>r(J).name))),Se(_e,(r(J),A(()=>r(J).name)))}),b(ve,Te)}},$$legacy:!0})}});var Y=g(B,2),z=S(Y);ft(z,U=>y(d,U),()=>r(d));var K=g(z,2);ft(R,U=>y(f,U),()=>r(f)),j(U=>{W(z,"accept",U),z.multiple=r(t),K.disabled=r(s)},[()=>(L(o()),A(()=>o().mimeTypes?.join(",")||null))]),ie("change",z,()=>{for(let U of r(d).files)c().push(U);c(c()),ot(d,r(d).value=null)}),ie("click",K,()=>r(d)?.click()),b(T,P)}}})}ie("dragover",$,Et(()=>{y(h,!0)})),ie("dragleave",$,()=>{y(h,!1)}),ie("drop",$,w),b(n,$),Fe()}var KA=x('<i class="ri-checkbox-circle-fill txt-success"></i>'),JA=x('<i class="ri-error-warning-fill txt-danger"></i>'),ZA=x('<span class="json-state svelte-nmcohl"><!></span>'),GA=x('<input type="text" class="txt-mono" value="Loading..." disabled=""/>'),XA=x("<!> <!>",1);function QA(n,e){Re(e,!1);const t=M();let i=ee(e,"field",8),s=ee(e,"value",12,void 0),a=M(),o=M(l(s()));function l(u){return typeof u=="string"&&c(u)?u:JSON.stringify(typeof u>"u"?null:u,null,2)}function c(u){try{return JSON.parse(u===""?null:u),!0}catch{}return!1}fn(async()=>{try{y(a,(await Wt(async()=>{const{default:u}=await import("./CodeEditor-UHXdE3Dc.js");return{default:u}},__vite__mapDeps([13,1]),import.meta.url)).default)}catch(u){console.warn(u)}}),re(()=>(L(s()),r(o)),()=>{s()!==r(o)?.trim()&&(y(o,l(s())),s(r(o)))}),re(()=>r(o),()=>{y(t,c(r(o)))}),lt(),ze();{let u=ne(()=>(L(i()),A(()=>i().required?"required":"")));Ce(n,{get class(){return`form-field ${r(u)??""}`},get name(){return L(i()),A(()=>i().name)},children:Ie,$$slots:{default:(d,f)=>{const h=ne(()=>f.uniqueId);var v=XA(),_=V(v);bi(_,{get uniqueId(){return r(h)},get field(){return i()},children:(k,$)=>{var D=ZA(),I=S(D);{var E=C=>{var O=KA();b(C,O)},T=C=>{var O=JA();b(C,O)};te(I,C=>{r(t)?C(E):C(T,!1)})}We(D,(C,O)=>ct?.(C,O),()=>({position:"left",text:r(t)?"Valid JSON":"Invalid JSON"})),b(k,D)},$$slots:{default:!0}});var p=g(_,2);{var m=k=>{var $=kt(),D=V($);mi(D,()=>r(a),(I,E)=>{E(I,{get id(){return r(h)},maxHeight:"500",language:"json",get value(){return r(o)},$$events:{change:T=>{y(o,T.detail),s(r(o).trim())}}})}),b(k,$)},w=k=>{var $=GA();b(k,$)};te(p,k=>{r(a)?k(m):k(w,!1)})}b(d,v)}}})}Fe()}var eL=x('<!> <input type="number" step="any"/>',1);function tL(n,e){Re(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0);ze();{let s=ne(()=>(L(t()),A(()=>t().required?"required":"")));Ce(n,{get class(){return`form-field ${r(s)??""}`},get name(){return L(t()),A(()=>t().name)},children:Ie,$$slots:{default:(a,o)=>{const l=ne(()=>o.uniqueId);var c=eL(),u=V(c);bi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=g(u,2);j(()=>{W(d,"id",r(l)),d.required=(L(t()),A(()=>t().required)),W(d,"min",(L(t()),A(()=>t().min))),W(d,"max",(L(t()),A(()=>t().max)))}),xt(d,i),b(a,c)}}})}Fe()}var nL=x('<!> <input type="password" autocomplete="new-password"/>',1);function iL(n,e){Re(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0);ze();{let s=ne(()=>(L(t()),A(()=>t().required?"required":"")));Ce(n,{get class(){return`form-field ${r(s)??""}`},get name(){return L(t()),A(()=>t().name)},children:Ie,$$slots:{default:(a,o)=>{const l=ne(()=>o.uniqueId);var c=nL(),u=V(c);bi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=g(u,2);j(()=>{W(d,"id",r(l)),d.required=(L(t()),A(()=>t().required))}),xt(d,i),b(a,c)}}})}Fe()}function Av(n){return typeof n=="function"?{threshold:100,callback:n}:n||{}}function rL(n,e){e=Av(e),e?.callback&&e.callback();function t(i){if(!e?.callback)return;i.target.scrollHeight-i.target.clientHeight-i.target.scrollTop<=e.threshold&&e.callback()}return n.addEventListener("scroll",t),n.addEventListener("resize",t),{update(i){e=Av(i)},destroy(){n.removeEventListener("scroll",t),n.removeEventListener("resize",t)}}}var sL=x("<option> </option>"),aL=x('<div class="form-field"><label>Collection</label> <select class="input"></select></div>'),oL=x('<button type="button" class="btn btn-pill btn-transparent btn-hint p-l-xs p-r-xs"><div class="txt">New record</div></button>'),lL=x('<i class="ri-checkbox-circle-fill txt-success"></i>'),cL=x('<i class="ri-checkbox-blank-circle-line txt-disabled"></i>'),uL=x('<span class="loader loader-xs active"></span>'),dL=x('<div class="actions nonintrusive"><button type="button" class="btn btn-sm btn-circle btn-transparent btn-hint m-l-auto" aria-label="Remove"><i class="ri-pencil-line"></i></button></div>'),fL=x('<div tabindex="0"><!> <div class="content"><!></div> <!></div>'),hL=x('<button type="button" class="btn btn-hint btn-sm"><span class="txt">Clear filters</span></button>'),vL=x('<div class="list-item"><span class="txt txt-hint">No records found.</span> <!></div>'),pL=x('<div class="list-item"><div class="block txt-center"><span class="loader loader-sm active"></span></div></div>'),mL=x('<span class="loader loader-xs active"></span>'),gL=x('<span><!> <button type="button" title="Remove" class="btn btn-circle btn-transparent btn-hint btn-xs"><i class="ri-close-line"></i></button></span>'),bL=x('<div class="selected-list svelte-pzpxt1"></div>'),yL=x('<p class="txt-hint">No selected records.</p>'),_L=x('<div class="flex m-b-base flex-gap-10"><!> <!> <!></div> <div class="list picker-list m-b-base svelte-pzpxt1"><!> <!></div> <h5 class="section-title">Selected <!></h5> <!>',1),xL=x("<h4>Select <strong> </strong> records</h4>"),wL=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="button" class="btn"><span class="txt">Set selection</span></button>',1),kL=x("<!> <!>",1);function SL(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["show","hide","value","field"]);Re(e,!1);const s=()=>Ct(Gn,"$collections",a),[a,o]=Nt(),l=M(),c=M(),u=M(),d=M(),f=M(),h=M(),v=M(),_=M(),p=M(),m=M(),w=Ut(),k="picker_"+F.randomString(5),$=50;let D=ee(e,"value",8),I=ee(e,"field",8),E=M(),T=M(),C=M(""),O=M([]),P=M([]),N=M(1),R=M(0),q=M(!1),B=M(!1),Y=M({}),z=M();function K(){return y(C,""),y(O,[]),y(P,[]),r(u)&&!r(z)&&r(d)?.length&&y(z,r(d)[0].id),se(),le(!0),r(E)?.show()}function U(){return r(E)?.hide()}function J(){let ae=[];const _e=r(f)?.fields?.filter(oe=>!oe.hidden&&oe.presentable&&oe.type=="relation");for(const oe of _e)ae=ae.concat(F.getExpandPresentableRelFields(oe,s(),2));return ae.join(",")}async function se(){const ae=F.toArray(D());if(!ae.length)return;y(B,!0);let _e=[];if(r(u)){const oe={};for(const Q of ae){const ye=""+Q,Ee=ye.indexOf(":");if(Ee>0&&Ee<ye.length-1){const Ae=ye.slice(0,Ee),Ne=ye.slice(Ee+1);oe[Ae]=oe[Ae]||[],oe[Ae].push(Ne)}}const me=[];for(const Q in oe){const ye=oe[Q].slice();for(;ye.length>0;){const Ee=[];for(const Ae of ye.splice(0,$))Ee.push(`id="${Ae}"`);me.push(De.collection(Q).getFullList({batch:$,filter:Ee.join("||"),fields:"*:excerpt(200)",expand:J(),requestKey:null}))}}try{await Promise.all(me).then(Q=>{_e=_e.concat(...Q)});for(const Q of _e)Q.collectionId||(Q.collectionId=r(f)?.id||r(z));y(P,[]);for(const Q of ae){const ye=(""+Q).indexOf(":"),Ee=ye>0?(""+Q).slice(ye+1):""+Q,Ae=F.findByKey(_e,"id",Ee);Ae&&r(P).push(Ae)}r(C).trim()||y(O,F.filterDuplicatesByKey(r(P).concat(r(O)))),y(B,!1)}catch(Q){Q.isAbort||(De.error(Q),y(B,!1))}}else{if(!r(c)){y(B,!1);return}const oe=ae.slice(),me=[];for(;oe.length>0;){const Q=[];for(const ye of oe.splice(0,$))Q.push(`id="${ye}"`);me.push(De.collection(r(c)).getFullList({batch:$,filter:Q.join("||"),fields:"*:excerpt(200)",expand:J(),requestKey:null}))}try{await Promise.all(me).then(Q=>{_e=_e.concat(...Q)}),y(P,[]);for(const Q of ae){const ye=F.findByKey(_e,"id",Q);ye&&r(P).push(ye)}r(C).trim()||y(O,F.filterDuplicatesByKey(r(P).concat(r(O)))),y(B,!1)}catch(Q){Q.isAbort||(De.error(Q),y(B,!1))}}}async function le(ae=!1){if(!(!r(z)&&!r(c))&&!(r(q)&&!ae)){y(q,!0),ae&&(r(C).trim()?y(O,[]):y(O,F.toArray(r(P)).slice()));try{const _e=ae?1:r(N)+1,oe=F.getAllCollectionIdentifiers(r(f));let me="";r(h)||(me="-@rowid");const Q=r(z)||r(c),ye=await De.collection(Q).getList(_e,$,{filter:F.normalizeSearchFilter(r(C),oe),sort:me,fields:F.getExcerptCollectionFieldsList(r(f)),skipTotal:1,expand:J(),requestKey:k+"loadList"});y(O,F.filterDuplicatesByKey(r(O).concat(ye.items))),y(N,ye.page),y(R,ye.items.length),y(q,!1)}catch(_e){_e.isAbort||(De.error(_e),y(q,!1))}}}async function ce(ae){if(ae?.id){ot(Y,r(Y)[ae.id]=!0);try{const _e=r(z)||r(c),oe=await De.collection(_e).getOne(ae.id,{fields:"*:excerpt(200)",expand:J(),requestKey:k+"reload"+ae.id});F.pushOrReplaceByKey(r(P),oe),F.pushOrReplaceByKey(r(O),oe),y(P,r(P)),y(O,r(O)),ot(Y,r(Y)[ae.id]=!1)}catch(_e){_e.isAbort||(De.error(_e),ot(Y,r(Y)[ae.id]=!1))}}}function ve(ae){r(l)==1?y(P,[ae]):r(p)&&(F.pushOrReplaceByKey(r(P),ae),y(P,r(P)))}function be(ae){F.removeByKey(r(P),"id",ae.id),y(P,r(P))}function he(ae){r(m)(ae)?be(ae):ve(ae)}function xe(){w("save",r(P)),U()}re(()=>L(I()),()=>{y(l,I()?.maxSelect||1)}),re(()=>L(I()),()=>{y(c,I()?.collectionId)}),re(()=>L(I()),()=>{y(u,Array.isArray(I()?.collectionIds)&&I().collectionIds.length>0)}),re(()=>(r(u),s(),L(I()),r(c)),()=>{y(d,r(u)?s().filter(ae=>I().collectionIds.includes(ae.id)):s().filter(ae=>ae.id==r(c)))}),re(()=>(r(u),r(z),r(d),r(c)),()=>{r(u)?!r(z)&&r(d)?.length&&y(z,r(d)[0].id):r(z)!==r(c)&&y(z,r(c))}),re(()=>(s(),r(z)),()=>{y(f,s().find(ae=>ae.id==r(z))||null)}),re(()=>(r(C),r(E)),()=>{typeof r(C)<"u"&&r(E)?.isActive()&&le(!0)}),re(()=>r(f),()=>{y(h,r(f)?.type==="view")}),re(()=>(r(q),r(B)),()=>{y(v,r(q)||r(B))}),re(()=>r(R),()=>{y(_,r(R)==$)}),re(()=>(r(l),r(P)),()=>{y(p,r(l)>r(P).length)}),re(()=>r(P),()=>{y(m,function(ae){return F.findByKey(r(P),"id",ae.id)})}),lt();var Te={show:K,hide:U};ze();var pe=kL(),ue=V(pe);ft(mn(ue,nn({popup:!0,class:"overlay-panel-xl"},()=>i,{$$events:{hide(ae){Qe.call(this,e,ae)},show(ae){Qe.call(this,e,ae)}},children:(ae,_e)=>{var oe=_L(),me=V(oe),Q=S(me);{var ye=qe=>{var Le=aL(),Ve=S(Le),et=g(Ve,2);ht(et,5,()=>r(d),At,(nt,wt)=>{var pt=sL(),tt=S(pt),Ge={};j(()=>{Se(tt,(r(wt),A(()=>r(wt).name))),Ge!==(Ge=(r(wt),A(()=>r(wt).id)))&&(pt.value=(pt.__value=(r(wt),A(()=>r(wt).id)))??"")}),b(nt,pt)}),j(()=>{W(Ve,"for",k+"_collection"),W(et,"id",k+"_collection")}),e_(et,()=>r(z),nt=>y(z,nt)),ie("change",et,()=>{y(O,[]),y(N,1),le(!0)}),b(qe,Le)};te(Q,qe=>{r(u)&&qe(ye)})}var Ee=g(Q,2);Bl(Ee,{get value(){return r(C)},get autocompleteCollection(){return r(f)},$$events:{submit:qe=>y(C,qe.detail)}});var Ae=g(Ee,2);{var Ne=qe=>{var Le=oL();ie("click",Le,()=>r(T)?.show()),b(qe,Le)};te(Ae,qe=>{r(h)||qe(Ne)})}var je=g(me,2),He=S(je);ht(He,1,()=>r(O),qe=>qe.id,(qe,Le,Ve,et)=>{const nt=ne(()=>(r(m),r(Le),A(()=>r(m)(r(Le)))));var wt=fL();let pt;var tt=S(wt);{var Ge=ge=>{var Ue=lL();b(ge,Ue)},gt=ge=>{var Ue=cL();b(ge,Ue)};te(tt,ge=>{r(nt)?ge(Ge):ge(gt,!1)})}var vt=g(tt,2),rt=S(vt);{var Oe=ge=>{var Ue=uL();b(ge,Ue)},H=ge=>{Il(ge,{get record(){return r(Le)}})};te(rt,ge=>{r(Y),r(Le),A(()=>r(Y)[r(Le).id])?ge(Oe):ge(H,!1)})}var G=g(vt,2);{var de=ge=>{var Ue=dL(),Xe=S(Ue);We(Xe,(Tt,at)=>ct?.(Tt,at),()=>"Edit"),Ft(()=>ie("keydown",Xe,hn(function(Tt){Qe.call(this,e,Tt)}))),Ft(()=>ie("click",Xe,hn(()=>r(T)?.show(r(Le).id)))),b(ge,Ue)};te(G,ge=>{r(h)||ge(de)})}j(()=>pt=Me(wt,1,"list-item handle",null,pt,{selected:r(nt),disabled:r(Y)[r(Le).id]||!r(nt)&&r(l)>1&&!r(p)})),ie("click",wt,()=>he(r(Le))),ie("keydown",wt,ge=>{(ge.code==="Enter"||ge.code==="Space")&&(ge.preventDefault(),ge.stopPropagation(),he(r(Le)))}),b(qe,wt)},qe=>{var Le=kt(),Ve=V(Le);{var et=nt=>{var wt=vL(),pt=g(S(wt),2);{var tt=Ge=>{var gt=hL();ie("click",gt,()=>y(C,"")),b(Ge,gt)};te(pt,Ge=>{r(C),A(()=>r(C)?.length)&&Ge(tt)})}b(nt,wt)};te(Ve,nt=>{r(v)||nt(et)})}b(qe,Le)});var dt=g(He,2);{var $e=qe=>{var Le=pL();b(qe,Le)};te(dt,qe=>{r(v)&&qe($e)})}We(je,(qe,Le)=>rL?.(qe,Le),()=>()=>{r(_)&&!r(q)&&le()});var Be=g(je,2),Ze=g(S(Be));{var Je=qe=>{var Le=Is();j(()=>Se(Le,`(${r(P),A(()=>r(P).length)??""} of MAX ${r(l)??""})`)),b(qe,Le)};te(Ze,qe=>{r(l)>1&&qe(Je)})}var st=g(Be,2);{var Ye=qe=>{var Le=bL();ht(Le,5,()=>r(P),At,(Ve,et,nt)=>{fa(Ve,{index:nt,get list(){return r(P)},set list(wt){y(P,wt)},children:Ie,$$slots:{default:(wt,pt)=>{const tt=ne(()=>pt.dragging),Ge=ne(()=>pt.dragover);var gt=gL();let vt;var rt=S(gt);{var Oe=de=>{var ge=mL();b(de,ge)},H=de=>{Il(de,{get record(){return r(et)}})};te(rt,de=>{r(Y),r(et),A(()=>r(Y)[r(et).id])?de(Oe):de(H,!1)})}var G=g(rt,2);j(()=>vt=Me(gt,1,"label",null,vt,{"label-danger":r(tt),"label-warning":r(Ge)})),ie("click",G,()=>be(r(et))),b(wt,gt)}},$$legacy:!0})}),b(qe,Le)},Ke=qe=>{var Le=yL();b(qe,Le)};te(st,qe=>{r(P),A(()=>r(P).length)?qe(Ye):qe(Ke,!1)})}b(ae,oe)},$$slots:{default:!0,header:(ae,_e)=>{var oe=xL(),me=g(S(oe)),Q=S(me);j(()=>Se(Q,(r(f),A(()=>r(f)?.name||"")))),b(ae,oe)},footer:(ae,_e)=>{var oe=wL(),me=V(oe),Q=g(me,2);ie("click",me,()=>U()),ie("click",Q,()=>xe()),b(ae,oe)}},$$legacy:!0})),ae=>y(E,ae),()=>r(E));var we=g(ue,2);ft(zd(we,{get collection(){return r(f)},$$events:{save:ae=>{F.removeByKey(r(O),"id",ae.detail.record.id),r(O).unshift(ae.detail.record),y(O,r(O)),ve(ae.detail.record),ce(ae.detail.record)},delete:ae=>{F.removeByKey(r(O),"id",ae.detail.id),y(O,r(O)),be(ae.detail)}},$$legacy:!0}),ae=>y(T,ae),()=>r(T)),b(n,pe),yt(e,"show",K),yt(e,"hide",U);var ke=Fe(Te);return o(),ke}var TL=x('<i class="ri-error-warning-line link-hint m-l-auto flex-order-10"></i>'),$L=x('<div><div class="content"><!></div> <div class="actions"><button type="button" class="btn btn-transparent btn-hint btn-sm btn-circle btn-remove" aria-label="Remove"><i class="ri-close-line"></i></button></div></div>'),IL=x('<div class="list-item"><div class="skeleton-loader"></div></div>'),CL=x('<!> <div class="list"><div class="relations-list svelte-1j19dhz"></div> <div class="list-item list-item-btn"><button type="button" class="btn btn-transparent btn-sm btn-block"><i class="ri-magic-line"></i> <span class="txt">Open picker</span></button></div></div>',1),EL=x("<!> <!>",1);function OL(n,e){Re(e,!1);const t=()=>Ct(Gn,"$collections",i),[i,s]=Nt(),a=M(),o=M(),l=100;let c=ee(e,"field",8),u=ee(e,"value",12),d=ee(e,"picker",12),f=M(),h=M([]),v=M(!1),_=M(),p=M([]);function m(){if(r(v))return!1;const T=F.toArray(u());return y(h,r(h).filter(C=>{const O=C.id,P=C?.collectionId?`${C.collectionId}:${C.id}`:null;return T.includes(O)||P&&T.includes(P)})),T.length!=r(h).length}async function w(){const T=F.toArray(u());if(y(h,[]),y(p,[]),!c()?.collectionId&&!r(o)||!T.length){y(v,!1);return}y(v,!0);function C(R){let q=[];const B=t().find(Y=>Y.id==R)?.fields?.filter(Y=>!Y.hidden&&Y.presentable&&Y.type=="relation");for(const Y of B||[])q=q.concat(F.getExpandPresentableRelFields(Y,t(),2));return q.join(",")}const O={},P=[];for(const R of T){const q=(""+R).indexOf(":");if(q>0&&q<(""+R).length-1){const B=(""+R).slice(0,q),Y=(""+R).slice(q+1);O[B]=O[B]||[],O[B].push(Y)}else P.push(R)}P.length&&c().collectionId&&(O[c().collectionId]=(O[c().collectionId]||[]).concat(P));const N=[];for(const R in O){const q=O[R].slice();for(;q.length>0;){const B=[];for(const Y of q.splice(0,l))B.push(`id="${Y}"`);N.push(De.collection(R).getFullList(l,{filter:B.join("||"),fields:"*:excerpt(200)",expand:C(R),requestKey:null}))}}try{let R=[];await Promise.all(N).then(q=>{R=R.concat(...q)});for(const q of T){const B=(""+q).indexOf(":"),Y=B>0?(""+q).slice(B+1):""+q,z=F.findByKey(R,"id",Y);z?r(h).push(z):r(p).push(q)}y(h,r(h)),$()}catch(R){De.error(R)}y(v,!1)}function k(T){F.removeByKey(r(h),"id",T.id),y(h,r(h)),$()}function $(){const T=r(o)||r(h).some(C=>!!C?.collectionId&&(!c()?.collectionId||C.collectionId!==c().collectionId));if(r(a))u(r(h).map(C=>T?`${C.collectionId}:${C.id}`:C.id));else{const C=r(h)[0];u(C?T?`${C.collectionId}:${C.id}`:C.id:"")}}vo(()=>{clearTimeout(r(_))}),re(()=>L(c()),()=>{y(a,c().maxSelect>1)}),re(()=>L(c()),()=>{y(o,Array.isArray(c().collectionIds)&&c().collectionIds.length>0)}),re(()=>(L(u()),r(f)),()=>{typeof u()<"u"&&r(f)?.changed()}),re(()=>(r(h),L(u()),r(_)),()=>{m(r(h),u())&&(y(v,!0),clearTimeout(r(_)),y(_,setTimeout(w,0)))}),lt(),ze();var D=EL(),I=V(D);{let T=ne(()=>(L(c()),A(()=>c().required?"required":"")));ft(Ce(I,{get class(){return`form-field form-field-list ${r(T)??""}`},get name(){return L(c()),A(()=>c().name)},children:Ie,$$slots:{default:(C,O)=>{const P=ne(()=>O.uniqueId);var N=CL(),R=V(N);bi(R,{get uniqueId(){return r(P)},get field(){return c()},children:(K,U)=>{var J=kt(),se=V(J);{var le=ce=>{var ve=TL();We(ve,(be,he)=>ct?.(be,he),()=>({position:"left",text:"The following relation ids were removed from the list because they are missing or invalid: "+r(p).join(", ")})),b(ce,ve)};te(se,ce=>{r(p),A(()=>r(p).length)&&ce(le)})}b(K,J)},$$slots:{default:!0}});var q=g(R,2),B=S(q);ht(B,7,()=>r(h),K=>K.id,(K,U,J)=>{{let se=ne(()=>(L(c()),A(()=>c().name+"_relation"))),le=ne(()=>!r(a));fa(K,{get group(){return r(se)},get index(){return r(J)},get disabled(){return r(le)},get list(){return r(h)},set list(ce){y(h,ce)},$$events:{sort:()=>{$()}},children:Ie,$$slots:{default:(ce,ve)=>{const be=ne(()=>ve.dragging),he=ne(()=>ve.dragover);var xe=$L();let Te;var pe=S(xe),ue=S(pe);Il(ue,{get record(){return r(U)}});var we=g(pe,2),ke=S(we);We(ke,(ae,_e)=>ct?.(ae,_e),()=>"Remove"),Ft(()=>ie("click",ke,()=>k(r(U)))),j(()=>Te=Me(xe,1,"list-item",null,Te,{dragging:r(be),dragover:r(he)})),b(ce,xe)}},$$legacy:!0})}},K=>{var U=kt(),J=V(U);{var se=le=>{var ce=kt(),ve=V(ce);ht(ve,1,()=>(L(F),L(u()),A(()=>F.toArray(u()).slice(0,10))),At,(be,he)=>{var xe=IL();b(be,xe)}),b(le,ce)};te(J,le=>{r(v)&&le(se)})}b(K,U)});var Y=g(B,2),z=S(Y);ie("click",z,()=>d()?.show()),b(C,N)}},$$legacy:!0}),C=>y(f,C),()=>r(f))}var E=g(I,2);ft(SL(E,{get value(){return u()},get field(){return c()},$$events:{save:T=>{y(h,T.detail||[]),$()}},$$legacy:!0}),T=>d(T),()=>d()),b(n,D),Fe(),s()}var DL=x('<div class="help-block"> </div>'),PL=x("<!> <!> <!>",1);function ML(n,e){Re(e,!1);const t=M(),i=M();let s=ee(e,"field",8),a=ee(e,"value",12,void 0);re(()=>L(s()),()=>{y(t,s().maxSelect>1)}),re(()=>(L(a()),r(t)),()=>{typeof a()>"u"&&a(r(t)?[]:"")}),re(()=>L(s()),()=>{y(i,s().maxSelect||s().values.length)}),re(()=>(r(t),L(a()),L(s()),r(i)),()=>{r(t)&&Array.isArray(a())&&(a(a().filter(o=>s().values.includes(o))),a().length>r(i)&&a(a().slice(a().length-r(i))))}),lt(),ze();{let o=ne(()=>(L(s()),A(()=>s().required?"required":"")));Ce(n,{get class(){return`form-field ${r(o)??""}`},get name(){return L(s()),A(()=>s().name)},children:Ie,$$slots:{default:(l,c)=>{const u=ne(()=>c.uniqueId);var d=PL(),f=V(d);bi(f,{get uniqueId(){return r(u)},get field(){return s()}});var h=g(f,2);{let p=ne(()=>(L(s()),r(t),A(()=>!s().required||r(t)))),m=ne(()=>(r(t),L(a()),L(s()),A(()=>!r(t)||a()?.length>=s().maxSelect))),w=ne(()=>(L(s()),A(()=>s().values?.length>5)));Js(h,{get id(){return r(u)},get toggle(){return r(p)},get multiple(){return r(t)},get closable(){return r(m)},get items(){return L(s()),A(()=>s().values)},get searchable(){return r(w)},get selected(){return a()},set selected(k){a(k)},$$legacy:!0})}var v=g(h,2);{var _=p=>{var m=DL(),w=S(m);j(()=>Se(w,`Select up to ${r(i)??""} items.`)),b(p,m)};te(v,p=>{r(t)&&p(_)})}b(l,d)}}})}Fe()}var AL=x("<textarea></textarea>");function LL(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["value","maxHeight"]);Re(e,!1);let s=ee(e,"value",12,""),a=ee(e,"maxHeight",8,200),o=M(),l;function c(){clearTimeout(l),l=setTimeout(()=>{r(o)&&(ot(o,r(o).style.height=""),ot(o,r(o).style.height=Math.min(r(o).scrollHeight,a())+"px"))},0)}function u(f){if(f?.code==="Enter"&&!f?.shiftKey&&!f?.isComposing){f.preventDefault();const h=r(o).closest("form");h?.requestSubmit&&h.requestSubmit()}}fn(()=>(c(),()=>clearTimeout(l))),re(()=>L(s()),()=>{typeof s()!==void 0&&c()}),lt(),ze();var d=AL();sa(d,()=>({...i}),void 0,void 0,void 0,"svelte-1jv9ixr"),ft(d,f=>y(o,f),()=>r(o)),xt(d,s),ie("keydown",d,u),b(n,d),Fe()}var NL=x("<!> <!>",1);function RL(n,e){Re(e,!1);const t=M(),i=M();let s=ee(e,"original",8),a=ee(e,"field",8),o=ee(e,"value",12,void 0);re(()=>(L(a()),L(s())),()=>{y(t,!F.isEmpty(a().autogeneratePattern)&&!s()?.id)}),re(()=>(L(a()),r(t)),()=>{y(i,a().required&&!r(t))}),lt(),ze();{let l=ne(()=>r(i)?"required":"");Ce(n,{get class(){return`form-field ${r(l)??""}`},get name(){return L(a()),A(()=>a().name)},children:Ie,$$slots:{default:(c,u)=>{const d=ne(()=>u.uniqueId);var f=NL(),h=V(f);bi(h,{get uniqueId(){return r(d)},get field(){return a()}});var v=g(h,2);{let _=ne(()=>r(t)?"Leave empty to autogenerate...":"");LL(v,{get id(){return r(d)},get required(){return r(i)},get placeholder(){return r(_)},get value(){return o()},set value(p){o(p)},$$legacy:!0})}b(c,f)}}})}Fe()}var FL=x('<!> <input type="url"/>',1);function qL(n,e){Re(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0);ze();{let s=ne(()=>(L(t()),A(()=>t().required?"required":"")));Ce(n,{get class(){return`form-field ${r(s)??""}`},get name(){return L(t()),A(()=>t().name)},children:Ie,$$slots:{default:(a,o)=>{const l=ne(()=>o.uniqueId);var c=FL(),u=V(c);bi(u,{get uniqueId(){return r(l)},get field(){return t()}});var d=g(u,2);j(()=>{W(d,"id",r(l)),d.required=(L(t()),A(()=>t().required))}),xt(d,i),b(a,c)}}})}Fe()}var zL=x('<label>Longitude:</label> <input type="number" placeholder="0" step="any" min="-180" max="180"/>',1),jL=x('<label>Latitude:</label> <input type="number" placeholder="0" step="any" min="-90" max="90"/>',1),UL=x('<div class="block txt-center p-base"><span class="loader loader-sm"></span></div>'),VL=x('<div class="block" style="height:200px"><!></div>'),BL=x('<!> <div class="list"><div class="list-item svelte-mcf0v6"><!> <span class="separator svelte-mcf0v6"></span> <!> <span class="separator svelte-mcf0v6"></span> <button type="button" aria-label="Toggle map"><i class="ri-map-2-line"></i></button></div> <!></div>',1);function HL(n,e){Re(e,!1);let t=ee(e,"field",8),i=ee(e,"value",12,void 0),s=M(),a=M(!1),o=M(!1);function l(){i().lat>90&&i(i().lat=90,!0),i().lat<-90&&i(i().lat=-90,!0),i().lon>180&&i(i().lon=180,!0),i().lon<-180&&i(i().lon=-180,!0)}function c(){r(o)?d():u()}function u(){f(),y(o,!0)}function d(){y(o,!1)}async function f(){r(s)||r(a)||(y(a,!0),y(s,(await Wt(async()=>{const{default:h}=await import("./Leaflet-BiDYDjW6.js");return{default:h}},__vite__mapDeps([14,15]),import.meta.url)).default),y(a,!1))}re(()=>L(i()),()=>{typeof i()>"u"&&i({lat:0,lon:0})}),re(()=>L(i()),()=>{i()&&l()}),lt(),ze();{let h=ne(()=>(L(t()),A(()=>t().required?"required":"")));Ce(n,{get class(){return`form-field form-field-list ${r(h)??""}`},get name(){return L(t()),A(()=>t().name)},children:Ie,$$slots:{default:(v,_)=>{const p=ne(()=>_.uniqueId);var m=BL(),w=V(m);bi(w,{get uniqueId(){return r(p)},get field(){return t()}});var k=g(w,2),$=S(k),D=S($);Ce(D,{class:"form-field form-field-inline m-0",children:Ie,$$slots:{default:(O,P)=>{const N=ne(()=>P.uniqueId);var R=zL(),q=V(R),B=g(q,2);j(()=>{W(q,"for",r(N)),W(B,"id",r(N)),B.required=(L(t()),A(()=>t().required))}),xt(B,()=>i().lon,Y=>i(i().lon=Y,!0)),b(O,R)}}});var I=g(D,4);Ce(I,{class:"form-field form-field-inline m-0",children:Ie,$$slots:{default:(O,P)=>{const N=ne(()=>P.uniqueId);var R=jL(),q=V(R),B=g(q,2);j(()=>{W(q,"for",r(N)),W(B,"id",r(N)),B.required=(L(t()),A(()=>t().required))}),xt(B,()=>i().lat,Y=>i(i().lat=Y,!0)),b(O,R)}}});var E=g(I,4);We(E,(O,P)=>ct?.(O,P),()=>"Toggle map"),Ft(()=>ie("click",E,c));var T=g($,2);{var C=O=>{var P=VL(),N=S(P);{var R=B=>{var Y=UL();b(B,Y)},q=B=>{var Y=kt(),z=V(Y);mi(z,()=>r(s),(K,U)=>{U(K,{height:200,get point(){return i()},set point(J){i(J)},$$legacy:!0})}),b(B,Y)};te(N,B=>{r(a)?B(R):B(q,!1)})}Ot(3,P,()=>pn,()=>({duration:150})),b(O,P)};te(T,O=>{r(o)&&O(C)})}j(()=>Me(E,1,`btn btn-circle btn-sm btn-circle ${r(o)?"btn-secondary":"btn-hint btn-transparent"}`)),b(v,m)}}})}Fe()}var WL=x('<button><div class="txt"> </div></button>'),YL=x('<div><!> <div class="txt-right"><em class="txt-sm txt-hint"><a target="_blank" rel="noopener noreferrer"> </a></em></div></div>'),KL=x('<div><div class="tabs-header compact combined left svelte-tipgli"></div> <div class="tabs-content"></div></div>');function JL(n,e){Re(e,!1);const t=M(),i="pb_sdk_preference";let s=ee(e,"class",8,"m-b-sm"),a=ee(e,"js",8,""),o=ee(e,"dart",8,""),l=M(localStorage.getItem(i)||"javascript");re(()=>r(l),()=>{r(l)&&localStorage.setItem(i,r(l))}),re(()=>(L(a()),L(o())),()=>{y(t,[{title:"JavaScript",language:"javascript",content:a(),url:"https://github.com/pocketbase/js-sdk"},{title:"Dart",language:"dart",content:o(),url:"https://github.com/pocketbase/dart-sdk"}])}),lt(),ze();var c=KL(),u=S(c);ht(u,5,()=>r(t),f=>f.language,(f,h)=>{var v=WL();let _;var p=S(v),m=S(p);j(()=>{_=Me(v,1,"tab-item svelte-tipgli",null,_,{active:r(l)===r(h).language}),Se(m,(r(h),A(()=>r(h).title)))}),ie("click",v,()=>y(l,r(h).language)),b(f,v)});var d=g(u,2);ht(d,5,()=>r(t),f=>f.language,(f,h)=>{var v=YL();let _;var p=S(v);Nu(p,{get language(){return r(h),A(()=>r(h).language)},get content(){return r(h),A(()=>r(h).content)}});var m=g(p,2),w=S(m),k=S(w),$=S(k);j(()=>{_=Me(v,1,"tab-item",null,_,{active:r(l)===r(h).language}),W(k,"href",(r(h),A(()=>r(h).url))),Se($,`${r(h),A(()=>r(h).title)??""} SDK`)}),b(f,v)}),j(()=>Me(c,1,`tabs sdk-tabs ${s()??""}`,"svelte-tipgli")),b(n,c),Fe()}var ZL=x('<div class="alert alert-success"><div class="content txt-bold"><span class="txt token-holder svelte-1wdz2fq"> </span> <!></div></div> <!>',1),GL=x('<label>Token duration (in seconds)</label> <input type="number" min="0" step="1"/>',1),XL=x('<form><div class="content"><p>Generate a nonrenewable auth token for <strong> </strong></p></div> <!></form>'),QL=x('<div class="clearfix"></div> <!>',1),eN=x("<h4>Impersonate auth token</h4>"),tN=x('<button type="button" class="btn btn-secondary btn-expanded"><span class="txt">Generate a new one</span></button>'),nN=x('<button type="submit"><span class="txt">Generate token</span></button>'),iN=x('<button type="button" class="btn btn-transparent"><span class="txt">Close</span></button> <!>',1);function rN(n,e){Re(e,!1);const t=M(),i=Ut(),s="impersonate_"+F.randomString(5);let a=ee(e,"collection",8),o=ee(e,"record",8),l=M(),c=M(0),u=M(!1),d=M();function f(){o()&&(_(),r(l)?.show())}function h(){r(l)?.hide(),_()}async function v(){if(!(r(u)||!a()||!o())){y(u,!0);try{y(d,await De.collection(a().name).impersonate(o().id,r(c))),i("submit",r(d))}catch(m){De.error(m)}y(u,!1)}}function _(){y(c,0),y(d,void 0)}re(()=>r(d),()=>{y(t,F.getApiExampleUrl(r(d)?.baseURL))}),lt();var p={show:f,hide:h};ze();{let m=ne(()=>!r(u));ft(mn(n,{overlayClose:!1,get escClose(){return r(m)},beforeHide:()=>!r(u),popup:!0,$$events:{show(w){Qe.call(this,e,w)},hide(w){Qe.call(this,e,w)}},children:(w,k)=>{var $=QL(),D=g(V($),2);{var I=T=>{var C=ZL(),O=V(C),P=S(O),N=S(P),R=S(N),q=g(N,2);nr(q,{get value(){return r(d),A(()=>r(d).authStore.token)}});var B=g(O,2);{let Y=ne(()=>`
                import PocketBase from 'pocketbase';

                const token = "...";

                const pb = new PocketBase('${r(t)}');

                pb.authStore.save(token, null);
            `),z=ne(()=>`
                import 'package:pocketbase/pocketbase.dart';

                final token = "...";

                final pb = PocketBase('${r(t)}');

                pb.authStore.save(token, null);
            `);JL(B,{class:"m-b-0",get js(){return r(Y)},get dart(){return r(z)}})}j(()=>Se(R,(r(d),A(()=>r(d).authStore.token)))),b(T,C)},E=T=>{var C=XL(),O=S(C),P=S(O),N=g(S(P)),R=S(N),q=g(O,2);Ce(q,{class:"form-field m-b-xs m-t-sm",name:"duration",children:Ie,$$slots:{default:(B,Y)=>{const z=ne(()=>Y.uniqueId);var K=GL(),U=V(K),J=g(U,2);j(()=>{W(U,"for",r(z)),W(J,"id",r(z)),W(J,"placeholder",`Default to the collection setting (${L(a()),A(()=>a()?.authToken?.duration||0)??""}s)`),qn(J,r(c)||"")}),ie("input",J,se=>y(c,se.target.value<<0)),b(B,K)}}}),j(B=>{W(C,"id",s),Se(R,`${B??""}:`)},[()=>(L(F),L(o()),A(()=>F.displayValue(o())))]),ie("submit",C,Et(v)),b(T,C)};te(D,T=>{r(d),A(()=>r(d)?.authStore?.token)?T(I):T(E,!1)})}b(w,$)},$$slots:{default:!0,header:(w,k)=>{var $=eN();b(w,$)},footer:(w,k)=>{var $=iN(),D=V($),I=g(D,2);{var E=C=>{var O=tN();j(()=>O.disabled=r(u)),ie("click",O,()=>_()),b(C,O)},T=C=>{var O=nN();let P;j(()=>{W(O,"form",s),P=Me(O,1,"btn btn-expanded",null,P,{"btn-loading":r(u)}),O.disabled=r(u)}),ie("click",O,()=>v()),b(C,O)};te(I,C=>{r(d),A(()=>r(d)?.authStore?.token)?C(E):C(T,!1)})}j(()=>D.disabled=r(u)),ie("click",D,h),b(w,$)}},$$legacy:!0}),w=>y(l,w),()=>r(l))}return yt(e,"show",f),yt(e,"hide",h),Fe(p)}var sN=x('<div class="block"><div class="alert alert-info m-0"><div class="icon"><i class="ri-information-line"></i></div> <div class="flex flex-gap-xs">The record has previous unsaved changes. <button type="button" class="btn btn-sm btn-secondary">Restore draft</button></div> <button type="button" class="close" aria-label="Discard draft"><i class="ri-close-line"></i></button></div> <div class="clearfix p-b-base"></div></div>'),aN=x('<div class="form-field-addon"><!></div>'),oN=x('<label><i></i> <span class="txt">id</span> <span class="flex-fill"></span></label> <!> <input type="text"/>',1),lN=x("<hr/>"),cN=x("<!> <!>",1),uN=x("<div><!></div>"),dN=x('<div class="tabs-content no-animations"><form><!> <!> <!> <!></form> <!></div>'),fN=x('<span class="loader loader-sm"></span> <h4 class="panel-title txt-hint svelte-pvxyrt">Loading...</h4>',1),hN=x('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-mail-check-line" aria-hidden="true"></i> <span class="txt">Send verification email</span></button>'),vN=x('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-mail-lock-line" aria-hidden="true"></i> <span class="txt">Send password reset email</span></button>'),pN=x('<button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-id-card-line" aria-hidden="true"></i> <span class="txt">Impersonate</span></button>'),mN=x('<!> <!> <!> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-braces-line" aria-hidden="true"></i> <span class="txt">Copy raw JSON</span></button> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-file-copy-line" aria-hidden="true"></i> <span class="txt">Duplicate</span></button> <hr/> <button type="button" class="dropdown-item txt-danger closable" role="menuitem"><i class="ri-delete-bin-7-line" aria-hidden="true"></i> <span class="txt">Delete</span></button>',1),gN=x('<div class="flex-fill"></div> <div tabindex="0" role="button" aria-label="More record options" class="btn btn-sm btn-circle btn-transparent flex-gap-0"><i class="ri-more-line" aria-hidden="true"></i> <!></div>',1),bN=x('<h4 class="panel-title svelte-pvxyrt"> <strong> </strong> record</h4> <!>',1),yN=x('<div class="tabs-header stretched"><button type="button">Account</button> <button type="button">Authorized providers</button></div>'),_N=x("<!> <!>",1),xN=x('<button type="button" class="dropdown-item closable" role="menuitem"><span class="txt">Save and continue</span></button>'),wN=x('<button type="button" class="btn p-l-5 p-r-5 flex-gap-0"><i class="ri-arrow-down-s-line" aria-hidden="true"></i> <!></button>'),kN=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <div class="btns-group no-gap"><button type="submit" title="Save and close"><span class="txt"> </span></button> <!></div>',1),SN=x("<!> <!>",1);function zd(n,e){Re(e,!1);const t=M(),i=M(),s=M(),a=M(),o=M(),l=M(),c=M(),u=M(),d=Ut(),f="record_"+F.randomString(5),h="form",v="providers";let _=ee(e,"collection",8),p=M(),m=M(),w=M({}),k=M({}),$=M(null),D=M(!1),I=M(!1),E=M({}),T=M({}),C=M(JSON.stringify(r(w))),O=M(r(C)),P=M(h),N=M(!0),R=M(!0),q=M(_()),B=M([]);const Y=["id"],z=Y.concat("email","emailVisibility","verified","tokenKey","password");function K($e){return ce($e),y(I,!0),y(P,h),r(p)?.show()}function U(){return r(p)?.hide()}function J(){y(I,!1),U()}function se(){y(q,_()),r(p)?.isActive()&&(xe(JSON.stringify(r(k))),J())}async function le($e){if(!$e)return null;let Be=typeof $e=="string"?$e:$e?.id;if(Be)try{return await De.collection(_().id).getOne(Be)}catch(Ze){Ze.isAbort||(J(),console.warn("resolveModel:",Ze),lr(`Unable to load record with id "${Be}"`))}return typeof $e=="object"?$e:null}async function ce($e){y(R,!0),sn({}),y(E,{}),y(T,{}),y(w,typeof $e=="string"?{id:$e,collectionId:_()?.id,collectionName:_()?.name}:$e||{}),y(k,structuredClone(r(w))),y(w,await le($e)||{}),y(k,structuredClone(r(w))),await $n(),y($,he()),!r($)||pe(r(k),r($))?y($,null):(delete r($).password,delete r($).passwordConfirm),y(C,JSON.stringify(r(k))),y(R,!1)}async function ve($e){sn({}),y(w,$e||{}),y(E,{}),y(T,{});const Be=_()?.fields?.filter(Ze=>Ze.type!="file")?.map(Ze=>Ze.name)||[];for(let Ze in $e)Be.includes(Ze)||ot(k,r(k)[Ze]=$e[Ze]);await $n(),y(C,JSON.stringify(r(k))),ue()}function be(){return"record_draft_"+(_()?.id||"")+"_"+(r(w)?.id||"")}function he($e){try{const Be=window.localStorage.getItem(be());if(Be)return JSON.parse(Be)}catch{}return $e}function xe($e){try{window.localStorage.setItem(be(),$e)}catch(Be){console.warn("updateDraft failure:",Be),window.localStorage.removeItem(be())}}function Te(){r($)&&(y(k,r($)),y($,null))}function pe($e,Be){const Ze=structuredClone($e||{}),Je=structuredClone(Be||{}),st=_()?.fields?.filter(Ke=>Ke.type==="file");for(let Ke of st)delete Ze[Ke.name],delete Je[Ke.name];const Ye=["expand","password","passwordConfirm"];for(let Ke of Ye)delete Ze[Ke],delete Je[Ke];return JSON.stringify(Ze)==JSON.stringify(Je)}function ue(){y($,null),window.localStorage.removeItem(be())}async function we($e=!0){if(!(r(D)||!r(c)||!_()?.id)){y(D,!0);try{const Be=ae();let Ze;if(r(N)?Ze=await De.collection(_().id).create(Be):Ze=await De.collection(_().id).update(r(k).id,Be),vn(r(N)?"Successfully created record.":"Successfully updated record."),ue(),r(i)&&r(k)?.id==De.authStore.record?.id&&Be.get("password"))return De.logout();$e?J():ve(Ze),d("save",{isNew:r(N),record:Ze})}catch(Be){De.error(Be)}y(D,!1)}}function ke(){r(w)?.id&&Rn("Do you really want to delete the selected record?",()=>De.collection(r(w).collectionId).delete(r(w).id).then(()=>{J(),vn("Successfully deleted record."),d("delete",r(w))}).catch($e=>{De.error($e)}))}function ae(){const $e=structuredClone(r(k)||{}),Be=new FormData,Ze={},Je={};for(const st of _()?.fields||[])st.type=="autodate"||r(t)&&st.type=="password"||(Ze[st.name]=!0,st.type=="json"&&(Je[st.name]=!0));r(t)&&$e.password&&(Ze.password=!0),r(t)&&$e.passwordConfirm&&(Ze.passwordConfirm=!0);for(const st in $e)if(Ze[st]){if(typeof $e[st]>"u"&&($e[st]=null),Je[st]&&$e[st]!=="")try{JSON.parse($e[st])}catch(Ye){const Ke={};throw Ke[st]={code:"invalid_json",message:Ye.toString()},new Fn({status:400,response:{data:Ke}})}F.addValueToFormData(Be,st,$e[st])}for(const st in r(E)){const Ye=F.toArray(r(E)[st]);for(const Ke of Ye)Be.append(st+"+",Ke)}for(const st in r(T)){const Ye=F.toArray(r(T)[st]);for(const Ke of Ye)Be.append(st+"-",Ke)}return Be}function _e(){!_()?.id||!r(w)?.email||Rn(`Do you really want to sent verification email to ${r(w).email}?`,()=>De.collection(_().id).requestVerification(r(w).email).then(()=>{vn(`Successfully sent verification email to ${r(w).email}.`)}).catch($e=>{De.error($e)}))}function oe(){!_()?.id||!r(w)?.email||Rn(`Do you really want to sent password reset email to ${r(w).email}?`,()=>De.collection(_().id).requestPasswordReset(r(w).email).then(()=>{vn(`Successfully sent password reset email to ${r(w).email}.`)}).catch($e=>{De.error($e)}))}function me(){r(l)?Rn("You have unsaved changes. Do you really want to discard them?",()=>{Q()}):Q()}async function Q(){let $e=r(w)?structuredClone(r(w)):null;if($e){const Be=["file","autodate"],Ze=_()?.fields||[];for(const Je of Ze)Be.includes(Je.type)&&delete $e[Je.name];$e.id=""}ue(),K($e),await $n(),y(C,"")}function ye($e){($e.ctrlKey||$e.metaKey)&&$e.code=="KeyS"&&($e.preventDefault(),$e.stopPropagation(),we(!1))}function Ee(){F.copyToClipboard(JSON.stringify(r(w),null,2)),oa("The record JSON was copied to your clipboard!",3e3)}re(()=>L(_()),()=>{y(t,_()?.type==="auth")}),re(()=>L(_()),()=>{y(i,_()?.name==="_superusers")}),re(()=>L(_()),()=>{y(s,!!_()?.fields?.find($e=>$e.type==="editor"))}),re(()=>L(_()),()=>{y(a,_()?.fields?.find($e=>$e.name==="id"))}),re(()=>(r(E),r(T)),()=>{y(o,F.hasNonEmptyProps(r(E))||F.hasNonEmptyProps(r(T)))}),re(()=>r(k),()=>{y(O,JSON.stringify(r(k)))}),re(()=>(r(o),r(C),r(O)),()=>{y(l,r(o)||r(C)!=r(O))}),re(()=>r(w),()=>{y(N,!r(w)||!r(w).id)}),re(()=>(r(R),r(N),r(l)),()=>{y(c,!r(R)&&(r(N)||r(l)))}),re(()=>(r(R),r(O)),()=>{r(R)||xe(r(O))}),re(()=>(L(_()),r(q)),()=>{_()&&r(q)?.id!=_()?.id&&se()}),re(()=>r(t),()=>{y(u,r(t)?z:Y)}),re(()=>(L(_()),r(u)),()=>{y(B,_()?.fields?.filter($e=>!r(u).includes($e.name)&&$e.type!="autodate")||[])}),lt();var Ae={show:K,hide:U};ze();var Ne=SN(),je=V(Ne);{let $e=ne(()=>r(s)?"overlay-panel-xl":"overlay-panel-lg"),Be=ne(()=>r(t)&&!r(i)&&!r(N)?"colored-header":""),Ze=ne(()=>!r(R)),Je=ne(()=>!r(R)),st=ne(()=>!r(R));ft(mn(je,{get class(){return`
        record-panel
        ${r($e)??""}
        ${r(Be)??""}
    `},get btnClose(){return r(Ze)},get escClose(){return r(Je)},get overlayClose(){return r(st)},beforeHide:()=>r(l)&&r(I)?(Rn("You have unsaved changes. Do you really want to close the panel?",()=>{J()}),!1):(sn({}),ue(),!0),$$events:{hide(Ye){Qe.call(this,e,Ye)},show(Ye){Qe.call(this,e,Ye)}},children:(Ye,Ke)=>{var qe=dN(),Le=S(qe);let Ve;var et=S(Le);{var nt=rt=>{var Oe=sN(),H=S(Oe),G=g(S(H),2),de=g(S(G)),ge=g(G,2);We(ge,(Ue,Xe)=>ct?.(Ue,Xe),()=>"Discard draft"),Ft(()=>ie("click",ge,Et(()=>ue()))),ie("click",de,()=>Te()),Ot(2,Oe,()=>pn,()=>({duration:150})),b(rt,Oe)};te(et,rt=>{!r(l)&&r($)&&!r(R)&&rt(nt)})}var wt=g(et,2);{let rt=ne(()=>r(N)?"":"readonly");Ce(wt,{get class(){return`form-field ${r(rt)??""}`},name:"id",children:Ie,$$slots:{default:(Oe,H)=>{const G=ne(()=>H.uniqueId);var de=oN(),ge=V(de),Ue=S(ge),Xe=g(ge,2);{var Tt=_t=>{var ut=aN(),mt=S(ut);BM(mt,{get record(){return r(k)}}),b(_t,ut)};te(Xe,_t=>{r(N)||_t(Tt)})}var at=g(Xe,2);j((_t,ut)=>{W(ge,"for",r(G)),Me(Ue,1,_t,"svelte-pvxyrt"),W(at,"id",r(G)),W(at,"placeholder",ut),W(at,"minlength",(r(a),A(()=>r(a)?.min||null))),W(at,"maxlength",(r(a),A(()=>r(a)?.max||null))),at.readOnly=!r(N)},[()=>In((L(F),A(()=>F.getFieldTypeIcon("primary")))),()=>(r(R),L(F),r(a),A(()=>!r(R)&&!F.isEmpty(r(a)?.autogeneratePattern)?"Leave empty to auto generate...":""))]),xt(at,()=>r(k).id,_t=>ot(k,r(k).id=_t)),b(Oe,de)}}})}var pt=g(wt,2);{var tt=rt=>{var Oe=cN(),H=V(Oe);lA(H,{get isNew(){return r(N)},get collection(){return _()},get record(){return r(k)},set record(ge){y(k,ge)},$$legacy:!0});var G=g(H,2);{var de=ge=>{var Ue=lN();b(ge,Ue)};te(G,ge=>{r(B),A(()=>r(B).length)&&ge(de)})}b(rt,Oe)};te(pt,rt=>{r(t)&&rt(tt)})}var Ge=g(pt,2);ht(Ge,1,()=>r(B),rt=>rt.name,(rt,Oe)=>{var H=kt(),G=V(H);{var de=It=>{RL(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},ge=It=>{tL(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},Ue=It=>{vA(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},Xe=It=>{RA(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},Tt=It=>{qL(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},at=It=>{LA(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},_t=It=>{gA(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},ut=It=>{ML(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},mt=It=>{QA(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},Lt=It=>{YA(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},get uploadedFiles(){return r(E)[r(Oe).name]},set uploadedFiles(Rt){ot(E,r(E)[r(Oe).name]=Rt)},get deletedFileNames(){return r(T)[r(Oe).name]},set deletedFileNames(Rt){ot(T,r(T)[r(Oe).name]=Rt)},$$legacy:!0})},xn=It=>{OL(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},on=It=>{iL(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})},ui=It=>{HL(It,{get field(){return r(Oe)},get original(){return r(w)},get record(){return r(k)},get value(){return r(k)[r(Oe).name]},set value(Rt){ot(k,r(k)[r(Oe).name]=Rt)},$$legacy:!0})};te(G,It=>{r(Oe),A(()=>r(Oe).type==="text")?It(de):(r(Oe),A(()=>r(Oe).type==="number")?It(ge,1):(r(Oe),A(()=>r(Oe).type==="bool")?It(Ue,2):(r(Oe),A(()=>r(Oe).type==="email")?It(Xe,3):(r(Oe),A(()=>r(Oe).type==="url")?It(Tt,4):(r(Oe),A(()=>r(Oe).type==="editor")?It(at,5):(r(Oe),A(()=>r(Oe).type==="date")?It(_t,6):(r(Oe),A(()=>r(Oe).type==="select")?It(ut,7):(r(Oe),A(()=>r(Oe).type==="json")?It(mt,8):(r(Oe),A(()=>r(Oe).type==="file")?It(Lt,9):(r(Oe),A(()=>r(Oe).type==="relation")?It(xn,10):(r(Oe),A(()=>r(Oe).type==="password")?It(on,11):(r(Oe),A(()=>r(Oe).type==="geoPoint")&&It(ui,12)))))))))))))})}b(rt,H)});var gt=g(Le,2);{var vt=rt=>{var Oe=uN();let H;var G=S(Oe);JM(G,{get record(){return r(k)}}),j(()=>H=Me(Oe,1,"tab-item",null,H,{active:r(P)===v})),b(rt,Oe)};te(gt,rt=>{r(t)&&!r(i)&&!r(N)&&rt(vt)})}j(()=>{W(Le,"id",f),Ve=Me(Le,1,"tab-item",null,Ve,{"no-pointer-events":r(R),active:r(P)===h})}),ie("submit",Le,Et(we)),ie("keydown",Le,ye),b(Ye,qe)},$$slots:{default:!0,header:(Ye,Ke)=>{var qe=_N(),Le=V(qe);{var Ve=pt=>{var tt=fN();b(pt,tt)},et=pt=>{var tt=bN(),Ge=V(tt),gt=S(Ge),vt=g(gt),rt=S(vt),Oe=g(Ge,2);{var H=G=>{var de=gN(),ge=g(V(de),2),Ue=g(S(ge),2);Jn(Ue,{class:"dropdown dropdown-right dropdown-nowrap",children:(Xe,Tt)=>{var at=mN(),_t=V(at);{var ut=gn=>{var Bn=hN();ie("click",Bn,()=>_e()),b(gn,Bn)};te(_t,gn=>{r(t),r(w),A(()=>r(t)&&!r(w).verified&&r(w).email)&&gn(ut)})}var mt=g(_t,2);{var Lt=gn=>{var Bn=vN();ie("click",Bn,()=>oe()),b(gn,Bn)};te(mt,gn=>{r(t),r(w),A(()=>r(t)&&r(w).email)&&gn(Lt)})}var xn=g(mt,2);{var on=gn=>{var Bn=pN();ie("click",Bn,()=>r(m)?.show()),b(gn,Bn)};te(xn,gn=>{r(t)&&gn(on)})}var ui=g(xn,2),It=g(ui,2),Rt=g(It,4);ie("click",ui,()=>Ee()),ie("click",It,()=>me()),ie("click",Rt,Et(hn(()=>ke()))),b(Xe,at)},$$slots:{default:!0}}),b(G,de)};te(Oe,G=>{r(N)||G(H)})}j(()=>{Se(gt,`${r(N)?"New":"Edit"} `),Se(rt,(L(_()),A(()=>_()?.name)))}),b(pt,tt)};te(Le,pt=>{r(R)?pt(Ve):pt(et,!1)})}var nt=g(Le,2);{var wt=pt=>{var tt=yN(),Ge=S(tt);let gt;var vt=g(Ge,2);let rt;j(()=>{gt=Me(Ge,1,"tab-item",null,gt,{active:r(P)===h}),rt=Me(vt,1,"tab-item",null,rt,{active:r(P)===v})}),ie("click",Ge,()=>y(P,h)),ie("click",vt,()=>y(P,v)),b(pt,tt)};te(nt,pt=>{r(t)&&!r(i)&&!r(N)&&pt(wt)})}b(Ye,qe)},footer:(Ye,Ke)=>{var qe=kN(),Le=V(qe),Ve=g(Le,2),et=S(Ve);let nt;var wt=S(et),pt=S(wt),tt=g(et,2);{var Ge=gt=>{var vt=wN(),rt=g(S(vt),2);Jn(rt,{class:"dropdown dropdown-upside dropdown-right dropdown-nowrap m-b-5",children:(Oe,H)=>{var G=xN();ie("click",G,()=>we(!1)),b(Oe,G)},$$slots:{default:!0}}),j(()=>vt.disabled=!r(c)||r(D)),b(gt,vt)};te(tt,gt=>{r(N)||gt(Ge)})}j(()=>{Le.disabled=r(D)||r(R),W(et,"form",f),nt=Me(et,1,"btn",null,nt,{"btn-expanded":r(N),"btn-expanded-sm":!r(N),"btn-loading":r(D)||r(R)}),et.disabled=!r(c)||r(D),Se(pt,r(N)?"Create":"Save changes")}),ie("click",Le,()=>U()),b(Ye,qe)}},$$legacy:!0}),Ye=>y(p,Ye),()=>r(p))}var He=g(je,2);{var dt=$e=>{ft(rN($e,{get record(){return r(k)},get collection(){return _()},$$legacy:!0}),Be=>y(m,Be),()=>r(m))};te(He,$e=>{r(t)&&$e(dt)})}return b(n,Ne),yt(e,"show",K),yt(e,"hide",U),Fe(Ae)}var TN=x('<div><span class="txt">Total found:</span> <span class="txt"> </span></div>');function $N(n,e){Re(e,!1);const t=Ut();let i=ee(e,"collection",8),s=ee(e,"filter",8,""),a=ee(e,"totalCount",12,0),o=ee(e,"class",8,void 0),l=M(!1);async function c(){if(i()?.id){y(l,!0),a(0);try{const v=F.getAllCollectionIdentifiers(i()),_=await De.collection(i().id).getList(1,1,{filter:F.normalizeSearchFilter(s(),v),fields:"id",requestKey:"records_count"});a(_.totalItems),t("count",a()),y(l,!1)}catch(v){v?.isAbort||(y(l,!1),console.warn(v))}}}re(()=>(L(i()),L(s())),()=>{i()?.id&&s()!==-1&&c()}),lt();var u={reload:c};ze();var d=TN(),f=g(S(d),2),h=S(f);return j(()=>{Me(d,1,`inline-flex flex-gap-5 records-counter ${o()??""}`),Se(h,r(l)?"...":a())}),b(n,d),yt(e,"reload",c),Fe(u)}var IN=x('<span class="loader loader-sm"></span>'),CN=x('<div class="form-field"><input type="checkbox" id="checkbox_0"/> <label for="checkbox_0"></label></div>'),EN=x('<th class="bulk-select-col min-width"><!></th>'),ON=x("<i></i>"),DN=x("<i></i>"),PN=x('<div class="col-header-content"><!> <span class="txt"> </span></div>'),MN=x('<button type="button" aria-label="Toggle columns" class="btn btn-sm btn-transparent p-0"><i class="ri-more-line"></i></button>'),AN=x('<td class="bulk-select-col min-width"><div class="form-field"><input type="checkbox"/> <label></label></div></td>'),LN=x('<div class="relation-cell svelte-14l6jun"><!></div>'),NN=x("<td><!></td>"),RN=x('<tr tabindex="0" class="row-handle"><!><!><td class="col-type-action min-width"><i class="ri-arrow-right-line"></i></td></tr>'),FN=x('<tr><td colspan="99" class="p-xs"><span class="skeleton-loader m-0"></span></td></tr>'),qN=x('<button type="button" class="btn btn-hint btn-expanded m-t-sm"><span class="txt">Clear filters</span></button>'),zN=x('<button type="button" class="btn btn-secondary btn-expanded m-t-sm"><i class="ri-add-line"></i> <span class="txt">New record</span></button>'),jN=x('<tr><td colspan="99" class="txt-center txt-hint p-xs"><h6>No records found.</h6> <!></td></tr>'),UN=x('<tr><td colspan="99" class="txt-center"><button><span class="txt">Load more</span></button></td></tr>'),VN=x('<table><thead><tr><!><!><th class="col-type-action min-width"><!></th></tr></thead><tbody><!><!></tbody></table>'),BN=x('<input type="checkbox"/> <label> </label>',1),HN=x('<div class="txt-hint txt-sm p-5 m-b-5">Toggle columns</div> <!>',1),WN=x('<div class="bulkbar"><div class="txt">Selected <strong> </strong> </div> <button type="button"><span class="txt">Reset</span></button> <div class="flex-fill"></div> <button type="button"><span class="txt">Delete selected</span></button></div>'),YN=x("<!> <!>",1);function KN(n,e){Re(e,!1);const t=()=>Ct(to,"$isCollectionsLoading",s),i=()=>Ct(Gn,"$collections",s),[s,a]=Nt(),o=M(),l=M(),c=M(),u=M(),d=M(),f=M(),h=M(),v=M(),_=M(),p=Ut(),m=/^([\+\-])?(\w+)$/,w=40;let k=ee(e,"collection",8),$=ee(e,"sort",12,""),D=ee(e,"filter",12,""),I=M(),E=M([]),T=M(1),C=M(0),O=M({}),P=M(!0),N=M(!1),R=0,q=M(),B=M([]),Y=M([]),z=M("");const K=["verified","emailVisibility"];function U(){k()?.id&&(r(B).length?localStorage.setItem(r(z),JSON.stringify(r(B))):localStorage.removeItem(r(z)))}function J(){if(y(B,[]),!!k()?.id)try{const Q=localStorage.getItem(r(z));Q&&y(B,JSON.parse(Q)||[])}catch{}}function se(Q){return!!r(E).find(ye=>ye.id==Q)}async function le(){const Q=r(T);for(let ye=1;ye<=Q;ye++)(ye===1||r(h))&&await ce(ye,!1)}async function ce(Q=1,ye=!0){if(!k()?.id)return;y(P,!0);let Ee=$();const Ae=Ee.match(m),Ne=Ae?r(d).find($e=>$e.name===Ae[2]):null;if(Ae&&Ne){const $e=i()?.find(Ze=>Ze.id==Ne.collectionId)?.fields?.filter(Ze=>Ze.presentable)?.map(Ze=>Ze.name)||[],Be=[];for(const Ze of $e)Be.push((Ae[1]||"")+Ae[2]+"."+Ze);Be.length>0&&(Ee=Be.join(","))}const je=F.getAllCollectionIdentifiers(k()),He=r(u).map($e=>$e.name+":excerpt(200)").concat(r(d).map($e=>"expand."+$e.name+".*:excerpt(200)"));He.length&&He.unshift("*");let dt=[];for(const $e of r(d)){const Be=F.getExpandPresentableRelFields($e,i(),2);Be?.length&&(dt=dt.concat(Be)),F.pushUnique(dt,$e.name)}return De.collection(k().id).getList(Q,w,{sort:Ee,skipTotal:1,filter:F.normalizeSearchFilter(D(),je),expand:dt.join(","),fields:He.join(","),requestKey:"records_list"}).then(async $e=>{if(Q<=1&&ve(),y(P,!1),y(T,$e.page),y(C,$e.items.length),p("load",r(E).concat($e.items)),r(u).length)for(let Be of $e.items)Be._partial=!0;if(ye){const Be=++R;for(;$e.items?.length&&R==Be;){const Ze=$e.items.splice(0,20);for(let Je of Ze)F.pushOrReplaceByKey(r(E),Je);y(E,r(E)),await F.yieldToMain()}}else{for(let Be of $e.items)F.pushOrReplaceByKey(r(E),Be);y(E,r(E))}}).catch($e=>{$e?.isAbort||(y(P,!1),console.warn($e),ve(),De.error($e,!D()||$e?.status!=400))})}function ve(){r(I)?.resetVerticalScroll(),y(E,[]),y(T,1),y(C,0),y(O,{})}function be(){r(_)?he():xe()}function he(){y(O,{})}function xe(){for(const Q of r(E))ot(O,r(O)[Q.id]=Q);y(O,r(O))}function Te(Q){r(O)[Q.id]?delete r(O)[Q.id]:ot(O,r(O)[Q.id]=Q),y(O,r(O))}function pe(){const Q=`Do you really want to delete the selected ${r(v)===1?"record":"records"}?`;Rn(Q,ue)}async function ue(){if(r(N)||!r(v)||!k()?.id)return;let Q=[];for(const ye of Object.keys(r(O)))Q.push(De.collection(k().id).delete(ye));return y(N,!0),Promise.all(Q).then(()=>{vn(`Successfully deleted the selected ${r(v)===1?"record":"records"}.`),p("delete",r(O)),he()}).catch(ye=>{De.error(ye)}).finally(()=>(y(N,!1),le()))}re(()=>L(k()),()=>{k()?.id&&(y(z,k().id+"@hiddenColumns"),J(),ve())}),re(()=>L(k()),()=>{y(o,k()?.type==="view")}),re(()=>L(k()),()=>{y(l,k()?.type==="auth"&&k().name==="_superusers")}),re(()=>(L(k()),r(l)),()=>{y(c,(k()?.fields||[]).filter(Q=>!Q.hidden&&(!r(l)||!K.includes(Q.name))))}),re(()=>r(c),()=>{y(u,r(c).filter(Q=>Q.type==="editor"))}),re(()=>r(c),()=>{y(d,r(c).filter(Q=>Q.type==="relation"))}),re(()=>(r(c),r(B)),()=>{y(f,r(c).filter(Q=>!r(B).includes(Q.id)))}),re(()=>(t(),L(k()),L($()),L(D())),()=>{!t()&&k()?.id&&$()!==-1&&D()!==-1&&ce(1)}),re(()=>r(C),()=>{y(h,r(C)>=w)}),re(()=>r(O),()=>{y(v,Object.keys(r(O)).length)}),re(()=>(r(E),r(v)),()=>{y(_,r(E).length&&r(v)===r(E).length)}),re(()=>r(B),()=>{r(B)!==-1&&U()}),re(()=>r(c),()=>{y(Y,r(c).filter(Q=>!Q.primaryKey).map(Q=>({id:Q.id,name:Q.name})))}),lt();var we={hasRecord:se,reloadLoadedPages:le,load:ce};ze();var ke=YN(),ae=V(ke);ft(yd(ae,{class:"table-wrapper",children:(Q,ye)=>{var Ee=VN();let Ae;var Ne=S(Ee),je=S(Ne),He=S(je);{var dt=Le=>{var Ve=EN(),et=S(Ve);{var nt=pt=>{var tt=IN();b(pt,tt)},wt=pt=>{var tt=CN(),Ge=S(tt);j(()=>{Ge.disabled=(r(E),A(()=>!r(E).length)),Wr(Ge,r(_))}),ie("change",Ge,()=>be()),b(pt,tt)};te(et,pt=>{r(P)?pt(nt):pt(wt,!1)})}b(Le,Ve)};te(He,Le=>{r(o)||Le(dt)})}var $e=g(He);ht($e,1,()=>r(f),Le=>Le.id,(Le,Ve)=>{rl(Le,{get class(){return`col-type-${r(Ve),A(()=>r(Ve).type)??""} col-field-${r(Ve),A(()=>r(Ve).name)??""}`},get name(){return r(Ve),A(()=>r(Ve).name)},get sort(){return $()},set sort(et){$(et)},children:(et,nt)=>{var wt=PN(),pt=S(wt);{var tt=rt=>{var Oe=ON();j(H=>Me(Oe,1,H,"svelte-14l6jun"),[()=>In((L(F),A(()=>F.getFieldTypeIcon("primary"))))]),b(rt,Oe)},Ge=rt=>{var Oe=DN();j(H=>Me(Oe,1,H,"svelte-14l6jun"),[()=>In((L(F),r(Ve),A(()=>F.getFieldTypeIcon(r(Ve).type))))]),b(rt,Oe)};te(pt,rt=>{r(Ve),A(()=>r(Ve).primaryKey)?rt(tt):rt(Ge,!1)})}var gt=g(pt,2),vt=S(gt);j(()=>Se(vt,(r(Ve),A(()=>r(Ve).name)))),b(et,wt)},$$slots:{default:!0},$$legacy:!0})});var Be=g($e),Ze=S(Be);{var Je=Le=>{var Ve=MN();ft(Ve,et=>y(q,et),()=>r(q)),b(Le,Ve)};te(Ze,Le=>{r(Y),A(()=>r(Y).length)&&Le(Je)})}var st=g(Ne),Ye=S(st);ht(Ye,1,()=>r(E),Le=>r(o)?Le:Le.id,(Le,Ve)=>{var et=RN(),nt=S(et);{var wt=tt=>{var Ge=AN(),gt=S(Ge),vt=S(gt),rt=g(vt,2);j(()=>{W(vt,"id",`checkbox_${r(Ve),A(()=>r(Ve).id)??""}`),Wr(vt,(r(O),r(Ve),A(()=>r(O)[r(Ve).id]))),W(rt,"for",`checkbox_${r(Ve),A(()=>r(Ve).id)??""}`)}),ie("change",vt,()=>Te(r(Ve))),ie("click",gt,hn(function(Oe){Qe.call(this,e,Oe)})),b(tt,Ge)};te(nt,tt=>{r(o)||tt(wt)})}var pt=g(nt);ht(pt,1,()=>r(f),tt=>tt.id,(tt,Ge)=>{var gt=NN(),vt=S(gt);{var rt=H=>{var G=LN(),de=S(G);qu(de,{get record(){return r(Ve)},get field(){return r(Ge)}}),b(H,G)},Oe=H=>{qu(H,{short:!0,get record(){return r(Ve)},get field(){return r(Ge)}})};te(vt,H=>{r(Ge),A(()=>r(Ge).type==="relation")?H(rt):H(Oe,!1)})}j(()=>Me(gt,1,`col-type-${r(Ge),A(()=>r(Ge).type)??""} col-field-${r(Ge),A(()=>r(Ge).name)??""}`,"svelte-14l6jun")),b(tt,gt)}),ie("click",et,()=>p("select",r(Ve))),ie("keydown",et,tt=>{tt.code==="Enter"&&(tt.preventDefault(),p("select",r(Ve)))}),b(Le,et)},Le=>{var Ve=kt(),et=V(Ve);{var nt=pt=>{var tt=FN();b(pt,tt)},wt=pt=>{var tt=jN(),Ge=S(tt),gt=g(S(Ge),2);{var vt=Oe=>{var H=qN();ie("click",H,()=>D("")),b(Oe,H)},rt=Oe=>{var H=zN();ie("click",H,()=>p("new")),b(Oe,H)};te(gt,Oe=>{L(D()),A(()=>D()?.length)?Oe(vt):r(o)||Oe(rt,1)})}b(pt,tt)};te(et,pt=>{r(P)?pt(nt):pt(wt,!1)})}b(Le,Ve)});var Ke=g(Ye);{var qe=Le=>{var Ve=UN(),et=S(Ve),nt=S(et);let wt;j(()=>{wt=Me(nt,1,"btn btn-expanded-lg btn-secondary btn-horizontal-sticky",null,wt,{"btn-loading":r(P)}),nt.disabled=r(P)}),ie("click",nt,Et(()=>ce(r(T)+1))),b(Le,Ve)};te(Ke,Le=>{r(E),r(h),A(()=>r(E).length&&r(h))&&Le(qe)})}j(()=>Ae=Me(Ee,1,"table",null,Ae,{"table-loading":r(P)})),b(Q,Ee)},$$slots:{default:!0,before:(Q,ye)=>{var Ee=kt(),Ae=V(Ee);{var Ne=je=>{Jn(je,{class:"dropdown dropdown-right dropdown-nowrap columns-dropdown",get trigger(){return r(q)},children:(He,dt)=>{var $e=HN(),Be=g(V($e),2);ht(Be,1,()=>r(Y),Ze=>Ze.id+Ze.name,(Ze,Je)=>{Ce(Ze,{class:"form-field form-field-sm form-field-toggle m-0 p-5",children:Ie,$$slots:{default:(st,Ye)=>{const Ke=ne(()=>Ye.uniqueId);var qe=BN(),Le=V(qe),Ve=g(Le,2),et=S(Ve);j(nt=>{W(Le,"id",r(Ke)),Wr(Le,nt),W(Ve,"for",r(Ke)),Se(et,(r(Je),A(()=>r(Je).name)))},[()=>(r(B),r(Je),A(()=>!r(B).includes(r(Je).id)))]),ie("change",Le,nt=>{nt.target.checked?F.removeByValue(r(B),r(Je).id):F.pushUnique(r(B),r(Je).id),y(B,r(B))}),b(st,qe)}}})}),b(He,$e)},$$slots:{default:!0}})};te(Ae,je=>{r(q)&&je(Ne)})}b(Q,Ee)}},$$legacy:!0}),Q=>y(I,Q),()=>r(I));var _e=g(ae,2);{var oe=Q=>{var ye=WN(),Ee=S(ye),Ae=g(S(Ee)),Ne=S(Ae),je=g(Ae),He=g(Ee,2);let dt;var $e=g(He,4);let Be;j(()=>{Se(Ne,r(v)),Se(je,` ${r(v)===1?"record":"records"}`),dt=Me(He,1,"btn btn-xs btn-transparent btn-outline p-l-5 p-r-5",null,dt,{"btn-disabled":r(N)}),Be=Me($e,1,"btn btn-sm btn-transparent btn-danger",null,Be,{"btn-loading":r(N),"btn-disabled":r(N)})}),ie("click",He,()=>he()),ie("click",$e,()=>pe()),Ot(3,ye,()=>Qr,()=>({duration:150,y:5})),b(Q,ye)};te(_e,Q=>{r(v)&&Q(oe)})}b(n,ke),yt(e,"hasRecord",se),yt(e,"reloadLoadedPages",le),yt(e,"load",ce);var me=Fe(we);return a(),me}var JN=x('<div class="placeholder-section m-b-base"><span class="loader loader-lg"></span> <h1>Loading collections...</h1></div>'),ZN=x(`<h1 class="m-b-10">You don't have any collections yet.</h1>`),GN=x('<h1 class="m-b-10">Create your first collection to add records!</h1> <button type="button" class="btn btn-expanded-lg btn-lg"><i class="ri-add-line"></i> <span class="txt">Create new collection</span></button>',1),XN=x('<div class="placeholder-section m-b-base"><div class="icon"><i class="ri-database-2-line"></i></div> <!></div>'),QN=x('<button type="button" aria-label="Edit collection" class="btn btn-transparent btn-circle"><i class="ri-settings-4-line"></i></button>'),eR=x('<button type="button" class="btn btn-expanded"><i class="ri-add-line"></i> <span class="txt">New record</span></button>'),tR=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Collections</div> <div class="breadcrumb-item"> </div></nav> <div class="inline-flex gap-5"><!> <!></div> <div class="btns-group"><button type="button" class="btn btn-outline"><i class="ri-code-s-slash-line"></i> <span class="txt">API Preview</span></button> <!></div></header> <!> <div class="clearfix m-b-sm"></div> <!>',1),nR=x("<!> <!>",1),iR=x("<!> <!> <!> <!> <!>",1);function rR(n,e){Re(e,!1);const t=()=>Ct(bd,"$querystring",l),i=()=>Ct(Wi,"$activeCollection",l),s=()=>Ct(to,"$isCollectionsLoading",l),a=()=>Ct(Gn,"$collections",l),o=()=>Ct(yo,"$hideControls",l),[l,c]=Nt(),u=M(),d=M(),f=new URLSearchParams(t());let h=M(),v=M(),_=M(),p=M(),m=M(),w=M(),k=M(f.get("filter")||""),$=M(f.get("sort")||"-@rowid"),D=M(f.get("collection")||i()?.id),I=M(0);md(r(D));async function E(J){await $n(),i()?.type==="view"?r(p).show(J):r(_)?.show(J)}function T(){y(D,i()?.id),y(k,""),y($,"-@rowid"),C(),O({recordId:null}),r(h)?.forceHide(),r(v)?.hide()}async function C(){if(!r($))return;const J=F.getAllCollectionIdentifiers(i()),se=r($).split(",").map(le=>le.startsWith("+")||le.startsWith("-")?le.substring(1):le);se.filter(le=>J.includes(le)).length!=se.length&&(i()?.type!="view"?y($,"-@rowid"):J.includes("created")?y($,"-created"):y($,""))}function O(J={}){const se=Object.assign({collection:i()?.id||"",filter:r(k),sort:r($)},J);F.replaceHashQueryParams(se)}re(()=>t(),()=>{y(u,new URLSearchParams(t()))}),re(()=>r(u),()=>{y(d,r(u).get("collection"))}),re(()=>(s(),r(d),r(D),i(),Yf),()=>{!s()&&r(d)&&r(d)!=r(D)&&r(d)!=i()?.id&&r(d)!=i()?.name&&Yf(r(d))}),re(()=>(i(),r(D)),()=>{i()?.id&&r(D)!=i().id&&r(D)!=i().name&&T()}),re(()=>i(),()=>{i()?.id&&C()}),re(()=>s(),()=>{!s()&&f.get("recordId")&&E(f.get("recordId"))}),re(()=>(s(),r($),r(k),i()),()=>{!s()&&(r($)||r(k)||i()?.id)&&O()}),re(()=>i(),()=>{Kn(Cn,i()?.name||"Collections")}),lt(),ze();var P=iR(),N=V(P);{var R=J=>{Ei(J,{center:!0,children:(se,le)=>{var ce=JN();b(se,ce)},$$slots:{default:!0}})},q=J=>{Ei(J,{center:!0,children:(se,le)=>{var ce=XN(),ve=g(S(ce),2);{var be=xe=>{var Te=ZN();b(xe,Te)},he=xe=>{var Te=GN(),pe=g(V(Te),2);ie("click",pe,()=>r(h)?.show()),b(xe,Te)};te(ve,xe=>{o()?xe(be):xe(he,!1)})}b(se,ce)},$$slots:{default:!0}})},B=J=>{var se=nR(),le=V(se);WP(le,{});var ce=g(le,2);Ei(ce,{class:"flex-content",children:(ve,be)=>{var he=tR(),xe=V(he),Te=S(xe),pe=g(S(Te),2),ue=S(pe),we=g(Te,2),ke=S(we);{var ae=Ne=>{var je=QN();We(je,(He,dt)=>ct?.(He,dt),()=>({text:"Edit collection",position:"right"})),Ft(()=>ie("click",je,()=>r(h)?.show(i()))),b(Ne,je)};te(ke,Ne=>{o()||Ne(ae)})}var _e=g(ke,2);Hl(_e,{$$events:{refresh:()=>{r(m)?.load(),r(w)?.reload()}}});var oe=g(we,2),me=S(oe),Q=g(me,2);{var ye=Ne=>{var je=eR();ie("click",je,()=>r(_)?.show()),b(Ne,je)};te(Q,Ne=>{i(),A(()=>i().type!=="view")&&Ne(ye)})}var Ee=g(xe,2);Bl(Ee,{get value(){return r(k)},get autocompleteCollection(){return i()},$$events:{submit:Ne=>y(k,Ne.detail)}});var Ae=g(Ee,4);ft(KN(Ae,{get collection(){return i()},get filter(){return r(k)},set filter(Ne){y(k,Ne)},get sort(){return r($)},set sort(Ne){y($,Ne)},$$events:{select:Ne=>{O({recordId:Ne.detail.id});let je=Ne.detail._partial?Ne.detail.id:Ne.detail;i().type==="view"?r(p)?.show(je):r(_)?.show(je)},delete:()=>{r(w)?.reload()},new:()=>r(_)?.show()},$$legacy:!0}),Ne=>y(m,Ne),()=>r(m)),j(()=>Se(ue,(i(),A(()=>i().name)))),ie("click",me,()=>r(v)?.show(i())),b(ve,he)},$$slots:{default:!0,footer:(ve,be)=>{ft($N(ve,{class:"m-r-auto txt-sm txt-hint",get collection(){return i()},get filter(){return r(k)},get totalCount(){return r(I)},set totalCount(he){y(I,he)},$$legacy:!0}),he=>y(w,he),()=>r(w))}}}),b(J,se)};te(N,J=>{s(),a(),A(()=>s()&&!a().length)?J(R):(a(),A(()=>!a().length)?J(q,1):J(B,!1))})}var Y=g(N,2);ft(Fd(Y,{$$events:{truncate:()=>{r(m)?.load(),r(w)?.reload()}},$$legacy:!0}),J=>y(h,J),()=>r(h));var z=g(Y,2);ft(N$(z,{$$legacy:!0}),J=>y(v,J),()=>r(v));var K=g(z,2);ft(zd(K,{get collection(){return i()},$$events:{hide:()=>{O({recordId:null})},save:J=>{r(k)?r(w)?.reload():J.detail.isNew&&wr(I),r(m)?.reloadLoadedPages()},delete:J=>{(!r(k)||r(m)?.hasRecord(J.detail.id))&&wr(I,-1),r(m)?.reloadLoadedPages()}},$$legacy:!0}),J=>y(_,J),()=>r(_));var U=g(K,2);ft(UM(U,{get collection(){return i()},$$events:{hide:()=>{O({recordId:null})}},$$legacy:!0}),J=>y(p,J),()=>r(p)),b(n,P),Fe(),c()}var sR=x('<div class="sidebar-title"><span class="txt">Sync</span></div> <a href="/settings/export-collections" class="sidebar-list-item"><i class="ri-uninstall-line" aria-hidden="true"></i> <span class="txt">Export collections</span></a> <a href="/settings/import-collections" class="sidebar-list-item"><i class="ri-install-line" aria-hidden="true"></i> <span class="txt">Import collections</span></a>',1),aR=x('<div class="sidebar-content"><div class="sidebar-title">System</div> <a href="/settings" class="sidebar-list-item"><i class="ri-home-gear-line" aria-hidden="true"></i> <span class="txt">Application</span></a> <a href="/settings/mail" class="sidebar-list-item"><i class="ri-send-plane-2-line" aria-hidden="true"></i> <span class="txt">Mail settings</span></a> <a href="/settings/storage" class="sidebar-list-item"><i class="ri-archive-drawer-line" aria-hidden="true"></i> <span class="txt">Files storage</span></a> <a href="/settings/backups" class="sidebar-list-item"><i class="ri-archive-line" aria-hidden="true"></i> <span class="txt">Backups</span></a> <a href="/settings/crons" class="sidebar-list-item"><i class="ri-time-line" aria-hidden="true"></i> <span class="txt">Crons</span></a> <!></div>');function Ns(n){const e=()=>Ct(yo,"$hideControls",t),[t,i]=Nt();ab(n,{class:"settings-sidebar",children:(s,a)=>{var o=aR(),l=g(S(o),2);We(l,(_,p)=>Qi?.(_,p),()=>({path:"/settings"})),We(l,_=>ii?.(_));var c=g(l,2);We(c,(_,p)=>Qi?.(_,p),()=>({path:"/settings/mail/?.*"})),We(c,_=>ii?.(_));var u=g(c,2);We(u,(_,p)=>Qi?.(_,p),()=>({path:"/settings/storage/?.*"})),We(u,_=>ii?.(_));var d=g(u,2);We(d,(_,p)=>Qi?.(_,p),()=>({path:"/settings/backups/?.*"})),We(d,_=>ii?.(_));var f=g(d,2);We(f,(_,p)=>Qi?.(_,p),()=>({path:"/settings/crons/?.*"})),We(f,_=>ii?.(_));var h=g(f,2);{var v=_=>{var p=sR(),m=g(V(p),2);We(m,(k,$)=>Qi?.(k,$),()=>({path:"/settings/export-collections/?.*"})),We(m,k=>ii?.(k));var w=g(m,2);We(w,(k,$)=>Qi?.(k,$),()=>({path:"/settings/import-collections/?.*"})),We(w,k=>ii?.(k)),b(_,p)};te(h,_=>{e()||_(v)})}b(s,o)},$$slots:{default:!0}}),i()}var oR=x('<input type="checkbox"/> <label>Enable <small class="txt-hint">(experimental)</small></label>',1),lR=x('<label><span class="txt">Max requests in a batch</span> <i class="ri-information-line link-hint"></i></label> <input type="number" min="0" step="1"/>',1),cR=x('<label><span class="txt">Max processing time (in seconds)</span></label> <input type="number" min="0" step="1"/>',1),uR=x('<label>Max body size (in bytes)</label> <input type="number" min="0" step="1" placeholder="Default to 128MB"/>',1),dR=x('<!> <div class="grid"><div class="col-lg-4"><!></div> <div class="col-lg-4"><!></div> <div class="col-lg-4"><!></div></div>',1),fR=x('<span class="label label-success">Enabled</span>'),hR=x('<span class="label">Disabled</span>'),vR=x('<i class="ri-error-warning-fill txt-danger"></i>'),pR=x('<div class="inline-flex"><i class="ri-archive-stack-line"></i> <span class="txt">Batch API</span></div> <div class="flex-fill"></div> <!> <!>',1);function mR(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt(),a=M(),o=M();let l=ee(e,"formSettings",12);re(()=>t(),()=>{y(a,!F.isEmpty(t()?.batch))}),re(()=>L(l()),()=>{y(o,!!l().batch?.enabled)}),lt(),ze(),Er(n,{single:!0,children:(c,u)=>{var d=dR(),f=V(d);Ce(f,{class:"form-field form-field-toggle m-b-sm",name:"batch.enabled",children:Ie,$$slots:{default:($,D)=>{const I=ne(()=>D.uniqueId);var E=oR(),T=V(E),C=g(T,2);j(()=>{W(T,"id",r(I)),W(C,"for",r(I))}),en(T,()=>l().batch.enabled,O=>l(l().batch.enabled=O,!0)),b($,E)}}});var h=g(f,2),v=S(h),_=S(v);{let $=ne(()=>r(o)?"required":"");Ce(_,{get class(){return`form-field ${r($)??""}`},name:"batch.maxRequests",children:Ie,$$slots:{default:(D,I)=>{const E=ne(()=>I.uniqueId);var T=lR(),C=V(T),O=g(S(C),2);We(O,(N,R)=>ct?.(N,R),()=>({text:"Rate limiting (if enabled) also applies for the batch create/update/upsert/delete requests.",position:"right"}));var P=g(C,2);j(()=>{W(C,"for",r(E)),W(P,"id",r(E)),P.required=r(o)}),xt(P,()=>l().batch.maxRequests,N=>l(l().batch.maxRequests=N,!0)),b(D,T)}}})}var p=g(v,2),m=S(p);{let $=ne(()=>r(o)?"required":"");Ce(m,{get class(){return`form-field ${r($)??""}`},name:"batch.timeout",children:Ie,$$slots:{default:(D,I)=>{const E=ne(()=>I.uniqueId);var T=cR(),C=V(T),O=g(C,2);j(()=>{W(C,"for",r(E)),W(O,"id",r(E)),O.required=r(o)}),xt(O,()=>l().batch.timeout,P=>l(l().batch.timeout=P,!0)),b(D,T)}}})}var w=g(p,2),k=S(w);Ce(k,{class:"form-field",name:"batch.maxBodySize",children:Ie,$$slots:{default:($,D)=>{const I=ne(()=>D.uniqueId);var E=uR(),T=V(E),C=g(T,2);j(()=>{W(T,"for",r(I)),W(C,"id",r(I)),qn(C,(L(l()),A(()=>l().batch.maxBodySize||"")))}),ie("input",C,O=>l(l().batch.maxBodySize=O.target.value<<0,!0)),b($,E)}}}),b(c,d)},$$slots:{default:!0,header:(c,u)=>{var d=pR(),f=g(V(d),4);{var h=m=>{var w=fR();b(m,w)},v=m=>{var w=hR();b(m,w)};te(f,m=>{r(o)?m(h):m(v,!1)})}var _=g(f,2);{var p=m=>{var w=vR();We(w,(k,$)=>ct?.(k,$),()=>({text:"Has errors",position:"left"})),Ot(3,w,()=>zn,()=>({duration:150,start:.7})),b(m,w)};te(_,m=>{r(a)&&m(p)})}b(c,d)}}}),Fe(),s()}var gR=x('<button type="button" class="label label-sm link-primary txt-mono"> </button>&nbsp;',1),bR=x('<label>Trusted IP proxy headers</label> <!> <div class="form-field-addon"><button type="button">Clear</button></div> <div class="help-block"><p>Comma separated list of headers such as: <!></p></div>',1),yR=x('<label><span class="txt">IP priority selection</span> <i class="ri-information-line link-hint"></i></label> <!>',1),_R=x(`<div class="alert alert-info m-b-sm"><div class="content"><div class="inline-flex flex-gap-5"><span>Resolved user IP:</span> <strong> </strong> <i class="ri-information-line txt-sm link-hint"></i></div> <br/> <div class="inline-flex flex-gap-5"><span>Detected proxy header:</span> <strong> </strong></div></div></div> <div class="content m-b-sm"><p>When PocketBase is deployed on platforms like Fly or it is accessible through proxies such as
            NGINX, requests from different users will originate from the same IP address (the IP of the proxy
            connecting to your PocketBase app).</p> <p>In this case to retrieve the actual user IP (used for rate limiting, logging, etc.) you need to
            properly configure your proxy and list below the trusted headers that PocketBase could use to
            extract the user IP.</p> <p class="txt-bold">When using such proxy, to avoid spoofing it is recommended to:</p> <ul class="m-t-0 txt-bold"><li>use headers that are controlled only by the proxy and cannot be manually set by the users</li> <li>make sure that the PocketBase server can be accessed only through the proxy</li></ul> <p>You can clear the headers field if PocketBase is not deployed behind a proxy.</p></div> <div class="grid grid-sm"><div class="col-lg-9"><!></div> <div class="col-lg-3"><!></div></div>`,1),xR=x('<i class="ri-alert-line txt-sm txt-warning"></i>'),wR=x('<i class="ri-alert-line txt-sm txt-hint"></i>'),kR=x('<span class="label label-success">Enabled</span>'),SR=x('<span class="label">Disabled</span>'),TR=x('<i class="ri-error-warning-fill txt-danger"></i>'),$R=x('<div class="inline-flex"><i class="ri-route-line"></i> <span class="txt">User IP proxy headers</span> <!></div> <div class="flex-fill"></div> <!> <!>',1);function IR(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",i),[i,s]=Nt(),a=M(),o=M(),l=M(),c=M(),u=M(),d=["X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP"];let f=ee(e,"formSettings",12),h=ee(e,"healthData",8),v=M("");function _(m){f(f().trustedProxy.headers=[m],!0)}const p=[{label:"Use leftmost IP",value:!0},{label:"Use rightmost IP",value:!1}];re(()=>L(f()),()=>{y(a,JSON.stringify(f()))}),re(()=>(r(v),r(a)),()=>{r(v)!=r(a)&&y(v,r(a))}),re(()=>(r(v),r(a)),()=>{y(o,r(v)!=r(a))}),re(()=>t(),()=>{y(l,!F.isEmpty(t()?.trustedProxy))}),re(()=>L(f()),()=>{y(c,!F.isEmpty(f().trustedProxy.headers))}),re(()=>L(h()),()=>{y(u,h().possibleProxyHeader?[h().possibleProxyHeader].concat(d.filter(m=>m!=h().possibleProxyHeader)):d)}),lt(),ze(),Er(n,{single:!0,children:(m,w)=>{var k=_R(),$=V(k),D=S($),I=S(D),E=g(S(I),2),T=S(E),C=g(E,2);We(C,(K,U)=>ct?.(K,U),()=>`Must show your actual IP.
If not, set the correct proxy header.`);var O=g(I,4),P=g(S(O),2),N=S(P),R=g($,4),q=S(R),B=S(q);Ce(B,{class:"form-field m-b-0",name:"trustedProxy.headers",children:Ie,$$slots:{default:(K,U)=>{const J=ne(()=>U.uniqueId);var se=bR(),le=V(se),ce=g(le,2);oo(ce,{get id(){return r(J)},placeholder:"Leave empty to disable",get value(){return f().trustedProxy.headers},set value(ue){f(f().trustedProxy.headers=ue,!0)},$$legacy:!0});var ve=g(ce,2),be=S(ve);let he;var xe=g(ve,2),Te=S(xe),pe=g(S(Te));ht(pe,1,()=>r(u),At,(ue,we)=>{var ke=gR(),ae=V(ke),_e=S(ae);j(()=>Se(_e,r(we))),ie("click",ae,()=>_(r(we))),b(ue,ke)}),j(ue=>{W(le,"for",r(J)),he=Me(be,1,"btn btn-sm btn-hint btn-transparent btn-clear",null,he,ue)},[()=>({hidden:F.isEmpty(f().trustedProxy.headers)})]),ie("click",be,()=>f(f().trustedProxy.headers=[],!0)),b(K,se)}}});var Y=g(q,2),z=S(Y);Ce(z,{class:"form-field m-0",name:"trustedProxy.useLeftmostIP",children:Ie,$$slots:{default:(K,U)=>{const J=ne(()=>U.uniqueId);var se=yR(),le=V(se),ce=g(S(le),2);We(ce,(be,he)=>ct?.(be,he),()=>({text:"This is in case the proxy returns more than 1 IP as header value. The rightmost IP is usually considered to be the more trustworthy but this could vary depending on the proxy.",position:"right"}));var ve=g(le,2);On(ve,{get items(){return p},get keyOfSelected(){return f().trustedProxy.useLeftmostIP},set keyOfSelected(be){f(f().trustedProxy.useLeftmostIP=be,!0)},$$legacy:!0}),j(()=>W(le,"for",r(J))),b(K,se)}}}),j(()=>{Se(T,(L(h()),A(()=>h().realIP||"N/A"))),Se(N,(L(h()),A(()=>h().possibleProxyHeader||"N/A")))}),b(m,k)},$$slots:{default:!0,header:(m,w)=>{var k=$R(),$=V(k),D=g(S($),4);{var I=q=>{var B=xR();We(B,(Y,z)=>ct?.(Y,z),()=>`Detected proxy header.
It is recommend to list it as trusted.`),b(q,B)},E=q=>{var B=wR();We(B,(Y,z)=>ct?.(Y,z),()=>"The configured proxy header doesn't match with the detected one."),b(q,B)},T=rn(()=>(r(c),r(o),L(f()),L(h()),A(()=>r(c)&&!r(o)&&!f().trustedProxy.headers.includes(h().possibleProxyHeader))));te(D,q=>{r(c),L(h()),A(()=>!r(c)&&h().possibleProxyHeader)?q(I):r(T)&&q(E,1)})}var C=g($,4);{var O=q=>{var B=kR();b(q,B)},P=q=>{var B=SR();b(q,B)};te(C,q=>{r(c)?q(O):q(P,!1)})}var N=g(C,2);{var R=q=>{var B=TR();We(B,(Y,z)=>ct?.(Y,z),()=>({text:"Has errors",position:"left"})),Ot(3,B,()=>zn,()=>({duration:150,start:.7})),b(q,B)};te(N,q=>{r(l)&&q(R)})}b(m,k)}}}),Fe(),s()}var CR=x("<option> </option>"),ER=x("<input/> <datalist></datalist>",1);function OR(n,e){const t=Dt(e,["children","$$slots","$$events","$$legacy"]),i=Dt(t,["value","options"]);Re(e,!1);let s=ee(e,"value",12,""),a=ee(e,"options",24,()=>[]);const o="list_"+F.randomString(5);ze();var l=ER(),c=V(l);sa(c,()=>({type:(L(i),A(()=>i.type||"text")),list:o,value:s(),...i}),void 0,void 0,void 0,void 0,!0);var u=g(c,2);ht(u,5,a,At,(d,f)=>{var h=CR(),v=S(h),_={};j(()=>{Se(v,(r(f),A(()=>r(f).label||""))),_!==(_=(r(f),A(()=>r(f).value)))&&(h.value=(h.__value=(r(f),A(()=>r(f).value)))??"")}),b(d,h)}),j(()=>W(u,"id",o)),ie("input",c,d=>{s(d.target.value)}),b(n,l),Fe()}var DR=x('<input type="checkbox"/> <label>Enable <small class="txt-hint">(experimental)</small></label>',1),PR=x('<input type="number" required="" placeholder="Max requests*" min="1" step="1"/>'),MR=x('<input type="number" required="" placeholder="Interval*" min="1" step="1"/>'),AR=x('<tr class="rate-limit-row"><td class="col-label"><!></td><td class="col-requests"><!></td><td class="col-duration"><!></td><td class="col-audience"><!></td><td class="col-action"><button type="button" title="Remove rule" aria-label="Remove rule" class="btn btn-xs btn-circle btn-hint btn-transparent"><i class="ri-close-line"></i></button></td></tr>'),LR=x('<table class="rate-limit-table"><thead><tr><th class="col-label">Rate limit label</th><th class="col-requests">Max requests<br/><small>(per IP)</small></th><th class="col-duration">Interval<br/><small>(in seconds)</small></th><th class="col-audience">Targeted users</th><th></th></tr></thead><tbody></tbody></table>'),NR=x('<!> <!> <div class="flex m-t-sm"><button type="button"><i class="ri-add-line"></i> <span class="txt">Add rate limit rule</span></button> <button type="button" class="txt-nowrap txt-sm link-hint"><em>Learn more about the rate limit rules</em></button></div>',1),RR=x('<i class="ri-error-warning-fill txt-danger"></i>'),FR=x('<span class="label label-success">Enabled</span>'),qR=x('<span class="label">Disabled</span>'),zR=x('<div class="inline-flex"><i class="ri-pulse-fill"></i> <span class="txt">Rate limiting</span></div> <div class="flex-fill"></div> <!> <!>',1),jR=x('<em class="txt-hint"> </em>'),UR=x('<li class="m-0"> <!></li>'),VR=x(`<p>The rate limit rules are resolved in the following order (stops on the first match):</p> <ol><li>exact tag (e.g. <code>users:create</code>)</li> <li>wildcard tag (e.g. <code>*:create</code>)</li> <li>METHOD + exact path (e.g. <code>POST /a/b</code>)</li> <li>METHOD + prefix path (e.g. <code>POST /a/b<strong>/</strong></code>)</li> <li>exact path (e.g. <code>/a/b</code>)</li> <li>prefix path (e.g. <code>/a/b<strong>/</strong></code>)</li></ol> <p>In case of multiple rules with the same label but different target user audience (e.g. "guest" vs
        "auth"), only the matching audience rule is taken in consideration.</p> <hr class="m-t-xs m-b-xs"/> <p>The rate limit label could be in one of the following formats:</p> <ul><li class="m-b-sm"><code>[METHOD ]/my/path</code> - full exact route match ( <strong>must be without trailing slash</strong>; "METHOD" is optional). <br/> For example: <ul class="m-0"><li class="m-0"><code>/hello</code> - matches <code>GET /hello</code>, <code>POST /hello</code>, etc.</li> <li class="m-0"><code>POST /hello</code> - matches only <code>POST /hello</code></li></ul></li> <li class="m-b-sm"><code>[METHOD ]/my/prefix<strong>/</strong></code> - path prefix ( <strong>must end with trailing slash;</strong> "METHOD" is optional). For example: <ul class="m-0"><li class="m-0"><code>/hello/</code> - matches <code>GET /hello</code>, <code>POST /hello/a/b/c</code>, etc.</li> <li class="m-0"><code>POST /hello/</code> - matches <code>POST /hello</code>, <code>POST /hello/a/b/c</code>, etc.</li></ul></li> <li><code>collectionName:predefinedTag</code> - targets a specific action of a single collection. To
            apply the rule for all collections you can use the <code>*</code> wildcard. For example: <code>posts:create</code>, <code>users:listAuthMethods</code>, <code>*:auth</code>. <br/> The predifined collection tags are (<em>there should be autocomplete once you start typing</em>): <ul></ul></li></ul>`,1),BR=x('<h4 class="center txt-break">Rate limit label format</h4>'),HR=x('<button type="button" class="btn btn-transparent">Close</button>'),WR=x("<!> <!>",1);function YR(n,e){Re(e,!1);const t=()=>Ct(Vn,"$errors",s),i=()=>Ct(Gn,"$collections",s),[s,a]=Nt(),o=M();let l=ee(e,"formSettings",12);const c=[{value:"",label:"All"},{value:"@guest",label:"Guest only"},{value:"@auth",label:"Auth only"}],u=[{value:"*:list"},{value:"*:view"},{value:"*:create"},{value:"*:update"},{value:"*:delete"},{value:"*:file",description:"targets the files download endpoint"},{value:"*:listAuthMethods"},{value:"*:authRefresh"},{value:"*:auth",description:"targets all auth methods"},{value:"*:authWithPassword"},{value:"*:authWithOAuth2"},{value:"*:authWithOTP"},{value:"*:requestOTP"},{value:"*:requestPasswordReset"},{value:"*:confirmPasswordReset"},{value:"*:requestVerification"},{value:"*:confirmVerification"},{value:"*:requestEmailChange"},{value:"*:confirmEmailChange"}];let d=M(u),f=M();h();async function h(){await md(),y(d,[]);for(let k of i())k.system||(r(d).push({value:k.name+":list"}),r(d).push({value:k.name+":view"}),k.type!="view"&&(r(d).push({value:k.name+":create"}),r(d).push({value:k.name+":update"}),r(d).push({value:k.name+":delete"})),k.type=="auth"&&(r(d).push({value:k.name+":listAuthMethods"}),r(d).push({value:k.name+":authRefresh"}),r(d).push({value:k.name+":auth"}),r(d).push({value:k.name+":authWithPassword"}),r(d).push({value:k.name+":authWithOAuth2"}),r(d).push({value:k.name+":authWithOTP"}),r(d).push({value:k.name+":requestOTP"}),r(d).push({value:k.name+":requestPasswordReset"}),r(d).push({value:k.name+":confirmPasswordReset"}),r(d).push({value:k.name+":requestVerification"}),r(d).push({value:k.name+":confirmVerification"}),r(d).push({value:k.name+":requestEmailChange"}),r(d).push({value:k.name+":confirmEmailChange"})),k.fields.find($=>$.type=="file")&&r(d).push({value:k.name+":file"}));y(d,r(d).concat(u))}function v(){sn({}),Array.isArray(l().rateLimits.rules)||l(l().rateLimits.rules=[],!0),l().rateLimits.rules.push({label:"",maxRequests:300,duration:10,audience:""}),l(l().rateLimits.rules=l().rateLimits.rules,!0),l().rateLimits.rules.length==1&&l(l().rateLimits.enabled=!0,!0)}function _(k){sn({}),l().rateLimits.rules.splice(k,1),l(l().rateLimits.rules=l().rateLimits.rules,!0),l().rateLimits.rules.length||l(l().rateLimits.enabled=!1,!0)}re(()=>t(),()=>{y(o,!F.isEmpty(t()?.rateLimits))}),lt(),ze();var p=WR(),m=V(p);Er(m,{single:!0,children:(k,$)=>{var D=NR(),I=V(D);Ce(I,{class:"form-field form-field-toggle m-b-xs",name:"rateLimits.enabled",children:Ie,$$slots:{default:(q,B)=>{const Y=ne(()=>B.uniqueId);var z=DR(),K=V(z),U=g(K,2);j(()=>{W(K,"id",r(Y)),W(U,"for",r(Y))}),en(K,()=>l().rateLimits.enabled,J=>l(l().rateLimits.enabled=J,!0)),b(q,z)}}});var E=g(I,2);{var T=q=>{var B=LR(),Y=g(S(B));ht(Y,5,()=>(L(l()),A(()=>l().rateLimits.rules||[])),At,(z,K,U)=>{var J=AR(),se=S(J),le=S(se);Ce(le,{class:"form-field",name:"rateLimits.rules."+U+".label",inlineError:!0,children:(we,ke)=>{OR(we,{required:!0,placeholder:"tag (users:create) or path (/api/)",get options(){return r(d)},get value(){return r(K).label},set value(ae){r(K).label=ae,Ys(()=>l())},$$legacy:!0})},$$slots:{default:!0}});var ce=g(se),ve=S(ce);Ce(ve,{class:"form-field",name:"rateLimits.rules."+U+".maxRequests",inlineError:!0,children:(we,ke)=>{var ae=PR();xt(ae,()=>r(K).maxRequests,_e=>(r(K).maxRequests=_e,Ys(()=>l()))),b(we,ae)},$$slots:{default:!0}});var be=g(ce),he=S(be);Ce(he,{class:"form-field",name:"rateLimits.rules."+U+".duration",inlineError:!0,children:(we,ke)=>{var ae=MR();xt(ae,()=>r(K).duration,_e=>(r(K).duration=_e,Ys(()=>l()))),b(we,ae)},$$slots:{default:!0}});var xe=g(be),Te=S(xe);Ce(Te,{class:"form-field",name:"rateLimits.rules."+U+".audience",inlineError:!0,children:(we,ke)=>{On(we,{get items(){return c},get keyOfSelected(){return r(K).audience},set keyOfSelected(ae){r(K).audience=ae,Ys(()=>l())},$$events:{change:()=>{Zn("rateLimits.rules."+U)}},$$legacy:!0})},$$slots:{default:!0}});var pe=g(xe),ue=S(pe);ie("click",ue,()=>_(U)),b(z,J)}),b(q,B)},C=rn(()=>(L(F),L(l()),A(()=>!F.isEmpty(l().rateLimits.rules))));te(E,q=>{r(C)&&q(T)})}var O=g(E,2),P=S(O);let N;var R=g(P,2);j(()=>N=Me(P,1,"btn btn-sm btn-secondary m-r-auto",null,N,{"btn-danger":t()?.rateLimits?.rules?.message})),ie("click",P,()=>v()),ie("click",R,()=>r(f)?.show()),b(k,D)},$$slots:{default:!0,header:(k,$)=>{var D=zR(),I=g(V(D),4);{var E=P=>{var N=RR();We(N,(R,q)=>ct?.(R,q),()=>({text:"Has errors",position:"left"})),Ot(3,N,()=>zn,()=>({duration:150,start:.7})),b(P,N)};te(I,P=>{r(o)&&P(E)})}var T=g(I,2);{var C=P=>{var N=FR();b(P,N)},O=P=>{var N=qR();b(P,N)};te(T,P=>{L(l()),A(()=>l().rateLimits.enabled)?P(C):P(O,!1)})}b(k,D)}}});var w=g(m,2);ft(mn(w,{children:(k,$)=>{var D=VR(),I=g(V(D),10),E=g(S(I),4),T=g(S(E),14);ht(T,5,()=>u,At,(C,O)=>{var P=UR(),N=S(P),R=g(N);{var q=B=>{var Y=jR(),z=S(Y);j(()=>Se(z,`(${r(O),A(()=>r(O).description)??""})`)),b(B,Y)};te(R,B=>{r(O),A(()=>r(O).description)&&B(q)})}j(B=>Se(N,`${B??""} `),[()=>(r(O),A(()=>r(O).value.replace("*:",":")))]),b(C,P)}),b(k,D)},$$slots:{default:!0,header:(k,$)=>{var D=BR();b(k,D)},footer:(k,$)=>{var D=HR();ie("click",D,()=>r(f)?.hide()),b(k,D)}},$$legacy:!0}),k=>y(f,k),()=>r(f)),b(n,p),Fe(),a()}var KR=x('<div class="loader"></div>'),JR=x('<label>Application name</label> <input type="text" required=""/>',1),ZR=x('<label>Application URL</label> <input type="text" required=""/>',1),GR=x('<input type="checkbox"/> <label><span class="txt">Hide collection create and edit controls</span> <i class="ri-information-line link-hint"></i></label>',1),XR=x('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Cancel</span></button>'),QR=x('<div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"><div class="accordions"><!> <!> <!></div></div> <div class="col-lg-12"><!></div></div> <div class="flex m-t-base"><div class="flex-fill"></div> <!> <button type="submit"><span class="txt">Save changes</span></button></div>',1),eF=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item">Application</div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><!></form></div>',1),tF=x("<!> <!>",1);function nF(n,e){Re(e,!1);const[t,i]=Nt(),s=M();Kn(Cn,"Application settings");let a=M({}),o=M({}),l=M(!1),c=M(!1),u=M(""),d=M({});h();async function f(){try{y(d,(await De.health.check()||{})?.data||{})}catch(D){console.warn("Health check failed:",D)}}async function h(){y(l,!0);try{const D=await De.settings.getAll()||{};_(D),await f()}catch(D){De.error(D)}y(l,!1)}async function v(){if(!(r(c)||!r(s))){y(c,!0),ot(o,r(o).rateLimits.rules=m(r(o).rateLimits.rules));try{const D=await De.settings.update(F.filterRedactedProps(r(o)));_(D),await f(),sn({}),vn("Successfully saved application settings.")}catch(D){De.error(D)}y(c,!1)}}function _(D={}){Kn(gu,D?.meta?.appName),Kn(yo,!!D?.meta?.hideControls),y(o,{meta:D?.meta||{},batch:D.batch||{},trustedProxy:D.trustedProxy||{headers:[]},rateLimits:D.rateLimits||{rules:[]}}),m(r(o).rateLimits.rules),y(a,JSON.parse(JSON.stringify(r(o))))}function p(){y(o,JSON.parse(JSON.stringify(r(a)||{})))}function m(D){if(!D)return;let I=[{},{}];return D.sort((E,T)=>{I[0].length=E.label.length,I[0].isTag=E.label.includes(":")||!E.label.includes("/"),I[0].isWildcardTag=I[0].isTag&&E.label.startsWith("*"),I[0].isExactTag=I[0].isTag&&!I[0].isWildcardTag,I[0].isPrefix=!I[0].isTag&&E.label.endsWith("/"),I[0].hasMethod=!I[0].isTag&&E.label.includes(" /"),I[1].length=T.label.length,I[1].isTag=T.label.includes(":")||!T.label.includes("/"),I[1].isWildcardTag=I[1].isTag&&T.label.startsWith("*"),I[1].isExactTag=I[1].isTag&&!I[1].isWildcardTag,I[1].isPrefix=!I[1].isTag&&T.label.endsWith("/"),I[1].hasMethod=!I[1].isTag&&T.label.includes(" /");for(let C of I)C.priority=0,C.isTag?(C.priority+=1e3,C.isExactTag?C.priority+=10:C.priority+=5):(C.hasMethod&&(C.priority+=10),C.isPrefix||(C.priority+=5));return I[0].isPrefix&&I[1].isPrefix&&(I[0].hasMethod&&I[1].hasMethod||!I[0].hasMethod&&!I[1].hasMethod)&&(I[0].length>I[1].length?I[0].priority+=1:I[0].length<I[1].length&&(I[1].priority+=1)),I[0].priority>I[1].priority?-1:I[0].priority<I[1].priority?1:0}),D}re(()=>r(a),()=>{y(u,JSON.stringify(r(a)))}),re(()=>(r(u),r(o)),()=>{y(s,r(u)!=JSON.stringify(r(o)))}),lt(),ze();var w=tF(),k=V(w);Ns(k);var $=g(k,2);Ei($,{children:(D,I)=>{var E=eF(),T=g(V(E),2),C=S(T),O=S(C);{var P=R=>{var q=KR();b(R,q)},N=R=>{var q=QR(),B=V(q),Y=S(B),z=S(Y);Ce(z,{class:"form-field required",name:"meta.appName",children:Ie,$$slots:{default:(ke,ae)=>{const _e=ne(()=>ae.uniqueId);var oe=JR(),me=V(oe),Q=g(me,2);j(()=>{W(me,"for",r(_e)),W(Q,"id",r(_e))}),xt(Q,()=>r(o).meta.appName,ye=>ot(o,r(o).meta.appName=ye)),b(ke,oe)}}});var K=g(Y,2),U=S(K);Ce(U,{class:"form-field required",name:"meta.appURL",children:Ie,$$slots:{default:(ke,ae)=>{const _e=ne(()=>ae.uniqueId);var oe=ZR(),me=V(oe),Q=g(me,2);j(()=>{W(me,"for",r(_e)),W(Q,"id",r(_e))}),xt(Q,()=>r(o).meta.appURL,ye=>ot(o,r(o).meta.appURL=ye)),b(ke,oe)}}});var J=g(K,2),se=S(J),le=S(se);IR(le,{get healthData(){return r(d)},get formSettings(){return r(o)},set formSettings(ke){y(o,ke)},$$legacy:!0});var ce=g(le,2);YR(ce,{get formSettings(){return r(o)},set formSettings(ke){y(o,ke)},$$legacy:!0});var ve=g(ce,2);mR(ve,{get formSettings(){return r(o)},set formSettings(ke){y(o,ke)},$$legacy:!0});var be=g(J,2),he=S(be);Ce(he,{class:"form-field form-field-toggle m-0",name:"meta.hideControls",children:Ie,$$slots:{default:(ke,ae)=>{const _e=ne(()=>ae.uniqueId);var oe=GR(),me=V(oe),Q=g(me,2),ye=g(S(Q),2);We(ye,(Ee,Ae)=>ct?.(Ee,Ae),()=>({text:"This could prevent making accidental schema changes when in production environment.",position:"right"})),j(()=>{W(me,"id",r(_e)),W(Q,"for",r(_e))}),en(me,()=>r(o).meta.hideControls,Ee=>ot(o,r(o).meta.hideControls=Ee)),b(ke,oe)}}});var xe=g(B,2),Te=g(S(xe),2);{var pe=ke=>{var ae=XR();j(()=>ae.disabled=r(c)),ie("click",ae,()=>p()),b(ke,ae)};te(Te,ke=>{r(s)&&ke(pe)})}var ue=g(Te,2);let we;j(()=>{we=Me(ue,1,"btn btn-expanded",null,we,{"btn-loading":r(c)}),ue.disabled=!r(s)||r(c)}),ie("click",ue,()=>v()),b(R,q)};te(O,R=>{r(l)?R(P):R(N,!1)})}ie("submit",C,Et(v)),b(D,E)},$$slots:{default:!0}}),b(n,w),Fe(),i()}var iF=x('<label>Backup name</label> <input type="text" pattern="^[a-z0-9_-]+\\.zip$"/> <em class="help-block">Must be in the format [a-z0-9_-].zip</em>',1),rF=x(`<div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content"><p>Please note that during the backup other concurrent write requests may fail since the
                database will be temporary "locked" (this usually happens only during the ZIP generation).</p> <p class="txt-bold">If you are using S3 storage for the collections file upload, you'll have to backup them
                separately since they are not locally stored and will not be included in the final backup!</p></div></div> <form autocomplete="off"><!></form>`,1),sF=x('<h4 class="center txt-break">Initialize new backup</h4>'),aF=x('<button type="button" class="btn btn-transparent"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Start backup</span></button>',1);function oF(n,e){Re(e,!1);const t=Ut(),i="backup_create_"+F.randomString(5);let s=M(),a=M(""),o=M(!1),l;function c(h){sn({}),y(o,!1),y(a,h||""),r(s)?.show()}function u(){return r(s)?.hide()}async function d(){if(!r(o)){y(o,!0),clearTimeout(l),l=setTimeout(()=>{u()},1500);try{await De.backups.create(r(a),{$cancelKey:i}),y(o,!1),u(),t("submit"),vn("Successfully generated new backup.")}catch(h){h.isAbort||De.error(h)}clearTimeout(l),y(o,!1)}}vo(()=>{clearTimeout(l)});var f={show:c,hide:u};return ze(),ft(mn(n,{class:"backup-create-panel",beforeOpen:()=>r(o)?(oa("A backup has already been started, please wait."),!1):!0,beforeHide:()=>(r(o)&&oa("The backup was started but may take a while to complete. You can come back later.",4500),!0),popup:!0,$$events:{show(h){Qe.call(this,e,h)},hide(h){Qe.call(this,e,h)}},children:(h,v)=>{var _=rF(),p=g(V(_),2),m=S(p);Ce(m,{class:"form-field m-0",name:"name",children:Ie,$$slots:{default:(w,k)=>{const $=ne(()=>k.uniqueId);var D=iF(),I=V(D),E=g(I,2);W(E,"placeholder","Leave empty to autogenerate"),j(()=>{W(I,"for",r($)),W(E,"id",r($))}),xt(E,()=>r(a),T=>y(a,T)),b(w,D)}}}),j(()=>W(p,"id",i)),ie("submit",p,Et(d)),b(h,_)},$$slots:{default:!0,header:(h,v)=>{var _=sF();b(h,_)},footer:(h,v)=>{var _=aF(),p=V(_),m=g(p,2);let w;j(()=>{p.disabled=r(o),W(m,"form",i),w=Me(m,1,"btn btn-expanded",null,w,{"btn-loading":r(o)}),m.disabled=r(o)}),ie("click",p,u),b(h,_)}},$$legacy:!0}),h=>y(s,h),()=>r(s)),yt(e,"show",c),yt(e,"hide",u),Fe(f)}var lF=x('<label>Backup name</label> <input type="text" required=""/>',1),cF=x(`<div class="alert alert-danger"><div class="icon"><i class="ri-alert-line"></i></div> <div class="content"><p class="txt-bold">Please proceed with caution and use it only with trusted backups!</p> <p>Backup restore is experimental and works only on UNIX based systems.</p> <p>The restore operation will attempt to replace your existing <code>pb_data</code> with the one from
                the backup and will restart the application process.</p> <p>This means that on success all of your data (including app settings, users, superusers, etc.)
                will be replaced with the ones from the backup.</p> <p>Nothing will happen if the backup is invalid (ex. missing <code>data.db</code> file).</p> <p>Below is an oversimplified version of the restore flow:</p> <ol><li>Replaces the current <code>pb_data</code> with the content from the backup</li> <li>Triggers app restart</li> <li>Applies all migrations that are missing in the restored <code>pb_data</code></li> <li>Initializes the app server as usual</li></ol></div></div> <div class="content m-b-xs">Type the backup name <div class="label"><span class="txt"> </span> <!></div> to confirm:</div> <form autocomplete="off"><!></form>`,1),uF=x('<h4 class="popup-title txt-ellipsis svelte-1w0b49c">Restore <strong> </strong></h4>'),dF=x('<button type="button" class="btn btn-transparent">Cancel</button> <button type="submit"><span class="txt">Restore backup</span></button>',1);function fF(n,e){Re(e,!1);const t=M(),i="backup_restore_"+F.randomString(5);let s=M(),a=M(""),o=M(""),l=M(!1),c=null;function u(v){sn({}),y(o,""),y(a,v),y(l,!1),r(s)?.show()}function d(){return r(s)?.hide()}async function f(){if(!(!r(t)||r(l))){clearTimeout(c),y(l,!0);try{await De.backups.restore(r(a)),c=setTimeout(()=>{window.location.reload()},2e3)}catch(v){clearTimeout(c),v?.isAbort||(y(l,!1),lr(v.response?.message||v.message))}}}vo(()=>{clearTimeout(c)}),re(()=>(r(o),r(a)),()=>{y(t,r(o)!=""&&r(a)==r(o))}),lt();var h={show:u,hide:d};ze();{let v=ne(()=>!r(l)),_=ne(()=>!r(l));ft(mn(n,{class:"backup-restore-panel",get overlayClose(){return r(v)},get escClose(){return r(_)},beforeHide:()=>!r(l),popup:!0,$$events:{show(p){Qe.call(this,e,p)},hide(p){Qe.call(this,e,p)}},children:(p,m)=>{var w=cF(),k=g(V(w),2),$=g(S(k)),D=S($),I=S(D),E=g(D,2);nr(E,{get value(){return r(a)}});var T=g(k,2),C=S(T);Ce(C,{class:"form-field required m-0",name:"name",children:Ie,$$slots:{default:(O,P)=>{const N=ne(()=>P.uniqueId);var R=lF(),q=V(R),B=g(q,2);j(()=>{W(q,"for",r(N)),W(B,"id",r(N))}),xt(B,()=>r(o),Y=>y(o,Y)),b(O,R)}}}),j(()=>{Se(I,r(a)),W(T,"id",i)}),ie("submit",T,Et(f)),b(p,w)},$$slots:{default:!0,header:(p,m)=>{var w=uF(),k=g(S(w)),$=S(k);j(()=>Se($,r(a))),b(p,w)},footer:(p,m)=>{var w=dF(),k=V(w),$=g(k,2);let D;j(()=>{k.disabled=r(l),W($,"form",i),D=Me($,1,"btn btn-expanded",null,D,{"btn-loading":r(l)}),$.disabled=!r(t)||r(l)}),ie("click",k,d),b(p,w)}},$$legacy:!0}),p=>y(s,p),()=>r(s))}return yt(e,"show",u),yt(e,"hide",d),Fe(h)}var hF=x('<div class="list-item list-item-loader svelte-vt8muj"><span class="skeleton-loader"></span></div>'),vF=x('<div class="list-item svelte-vt8muj"><i class="ri-folder-zip-line"></i> <div class="content"><span class="name backup-name svelte-vt8muj"> </span> <span class="size txt-hint txt-nowrap"> </span></div> <div class="actions nonintrusive"><button type="button" aria-label="Download"><i class="ri-download-line"></i></button> <button type="button" class="btn btn-sm btn-circle btn-hint btn-transparent" aria-label="Restore"><i class="ri-restart-line"></i></button> <button type="button" aria-label="Delete"><i class="ri-delete-bin-7-line"></i></button></div></div>'),pF=x('<div class="list-item list-item-placeholder svelte-vt8muj"><span class="txt">No backups yet.</span></div>'),mF=x('<i class="ri-play-circle-line"></i> <span class="txt">Initialize new backup</span>',1),gF=x('<span class="loader loader-sm"></span> <span class="txt">Backup/restore operation is in process</span>',1),bF=x('<div class="list list-compact"><div class="list-content svelte-vt8muj"><!></div> <div class="list-item list-item-btn"><button type="button" class="btn btn-block btn-transparent"><!></button></div></div> <!> <!>',1);function yF(n,e){Re(e,!1);let t=M(),i=M(),s=M([]),a=M(!1),o=M({}),l=M({}),c=M(!0);u(),v();async function u(){y(a,!0);try{y(s,await De.backups.getFullList()),r(s).sort((R,q)=>R.modified<q.modified?1:R.modified>q.modified?-1:0),y(a,!1)}catch(R){R.isAbort||(De.error(R),y(a,!1))}}async function d(R){if(!r(o)[R]){ot(o,r(o)[R]=!0);try{const q=await De.getSuperuserFileToken();F.download(De.backups.getDownloadURL(q,R))}catch(q){q.isAbort||De.error(q)}delete r(o)[R],y(o,r(o))}}function f(R){Rn(`Do you really want to delete ${R}?`,()=>h(R))}async function h(R){if(!r(l)[R]){ot(l,r(l)[R]=!0);try{await De.backups.delete(R),u(),vn(`Successfully deleted ${R}.`)}catch(q){q.isAbort||De.error(q)}delete r(l)[R],y(l,r(l))}}async function v(){try{const R=await De.health.check({$autoCancel:!1}),q=r(c);y(c,R?.data?.canBackup||!1),q!=r(c)&&r(c)&&u()}catch{}}fn(()=>{let R=setInterval(()=>{v()},3e3);return()=>{clearInterval(R)}});var _={loadBackups:u};ze();var p=bF(),m=V(p),w=S(m),k=S(w);{var $=R=>{var q=kt(),B=V(q);ht(B,1,()=>Array(r(s).length||1),At,(Y,z)=>{var K=hF();b(Y,K)}),b(R,q)},D=R=>{var q=kt(),B=V(q);ht(B,1,()=>r(s),Y=>Y.key,(Y,z)=>{var K=vF(),U=g(S(K),2),J=S(U),se=S(J),le=g(J,2),ce=S(le),ve=g(U,2),be=S(ve);let he;We(be,(ue,we)=>ct?.(ue,we),()=>"Download"),Ft(()=>ie("click",be,Et(()=>d(r(z).key))));var xe=g(be,2);We(xe,(ue,we)=>ct?.(ue,we),()=>"Restore"),Ft(()=>ie("click",xe,Et(()=>r(i).show(r(z).key))));var Te=g(xe,2);let pe;We(Te,(ue,we)=>ct?.(ue,we),()=>"Delete"),Ft(()=>ie("click",Te,Et(()=>f(r(z).key)))),j(ue=>{W(J,"title",r(z).key),Se(se,r(z).key),Se(ce,`(${ue??""})`),he=Me(be,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,he,{"btn-loading":r(o)[r(z).key]}),be.disabled=r(l)[r(z).key]||r(o)[r(z).key],xe.disabled=r(l)[r(z).key],pe=Me(Te,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,pe,{"btn-loading":r(l)[r(z).key]}),Te.disabled=r(l)[r(z).key]},[()=>F.formattedFileSize(r(z).size)]),Ot(3,K,()=>pn,()=>({duration:150})),b(Y,K)},Y=>{var z=pF();b(Y,z)}),b(R,q)};te(k,R=>{r(a)?R($):R(D,!1)})}var I=g(w,2),E=S(I),T=S(E);{var C=R=>{var q=mF();b(R,q)},O=R=>{var q=gF();b(R,q)};te(T,R=>{r(c)?R(C):R(O,!1)})}var P=g(m,2);ft(oF(P,{$$events:{submit:()=>{u()}},$$legacy:!0}),R=>y(t,R),()=>r(t));var N=g(P,2);return ft(fF(N,{$$legacy:!0}),R=>y(i,R),()=>r(i)),j(()=>E.disabled=r(a)||!r(c)),ie("click",E,()=>r(t)?.show()),b(n,p),yt(e,"loadBackups",u),Fe(_)}var _F=x('<input type="checkbox" required=""/> <label> </label>',1),xF=x('<label>Endpoint</label> <input type="text" required=""/>',1),wF=x('<label>Bucket</label> <input type="text" required=""/>',1),kF=x('<label>Region</label> <input type="text" required=""/>',1),SF=x('<label>Access key</label> <input type="text" required=""/>',1),TF=x("<label>Secret</label> <!>",1),$F=x('<input type="checkbox"/> <label><span class="txt">Force path-style addressing</span> <i class="ri-information-line link-hint"></i></label>',1),IF=x('<div class="grid"><div class="col-lg-6"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"><!></div> <div class="col-lg-12"></div></div>'),CF=x("<!> <!> <!>",1);function cb(n,e){Re(e,!1);const t="s3_test_request";let i=ee(e,"originalConfig",24,()=>({})),s=ee(e,"config",28,()=>({})),a=ee(e,"configKey",8,"s3"),o=ee(e,"toggleLabel",8,"Enable S3"),l=ee(e,"testFilesystem",8,"storage"),c=ee(e,"testError",12,null),u=ee(e,"isTesting",12,!1),d=null,f=null,h=M(!1);function v(){y(h,!!i()?.accessKey)}function _(I){u(!0),clearTimeout(f),f=setTimeout(()=>{p()},I)}async function p(){if(c(null),!s().enabled)return u(!1),c();De.cancelRequest(t),clearTimeout(d),d=setTimeout(()=>{De.cancelRequest(t),c(new Error("S3 test connection timeout.")),u(!1)},3e4),u(!0);let I;try{await De.settings.testS3(l(),{$cancelKey:t})}catch(E){I=E}return I?.isAbort||(c(I),u(!1),clearTimeout(d)),c()}fn(()=>()=>{clearTimeout(d),clearTimeout(f)}),re(()=>L(i()),()=>{i()?.enabled&&(v(),_(100))}),re(()=>(L(s()),L(a())),()=>{s().enabled||Zn(a())}),lt(),ze();var m=CF(),w=V(m);Ce(w,{class:"form-field form-field-toggle",children:Ie,$$slots:{default:(I,E)=>{const T=ne(()=>E.uniqueId);var C=_F(),O=V(C),P=g(O,2),N=S(P);j(()=>{W(O,"id",r(T)),W(P,"for",r(T)),Se(N,o())}),en(O,()=>s().enabled,R=>s(s().enabled=R,!0)),b(I,C)}}});var k=g(w,2);Qt(k,e,"default",{get isTesting(){return u()},get testError(){return c()},get enabled(){return L(s()),A(()=>s().enabled)}},null);var $=g(k,2);{var D=I=>{var E=IF(),T=S(E),C=S(T);Ce(C,{class:"form-field required",get name(){return`${a()??""}.endpoint`},children:Ie,$$slots:{default:(J,se)=>{const le=ne(()=>se.uniqueId);var ce=xF(),ve=V(ce),be=g(ve,2);j(()=>{W(ve,"for",r(le)),W(be,"id",r(le))}),xt(be,()=>s().endpoint,he=>s(s().endpoint=he,!0)),b(J,ce)}}});var O=g(T,2),P=S(O);Ce(P,{class:"form-field required",get name(){return`${a()??""}.bucket`},children:Ie,$$slots:{default:(J,se)=>{const le=ne(()=>se.uniqueId);var ce=wF(),ve=V(ce),be=g(ve,2);j(()=>{W(ve,"for",r(le)),W(be,"id",r(le))}),xt(be,()=>s().bucket,he=>s(s().bucket=he,!0)),b(J,ce)}}});var N=g(O,2),R=S(N);Ce(R,{class:"form-field required",get name(){return`${a()??""}.region`},children:Ie,$$slots:{default:(J,se)=>{const le=ne(()=>se.uniqueId);var ce=kF(),ve=V(ce),be=g(ve,2);j(()=>{W(ve,"for",r(le)),W(be,"id",r(le))}),xt(be,()=>s().region,he=>s(s().region=he,!0)),b(J,ce)}}});var q=g(N,2),B=S(q);Ce(B,{class:"form-field required",get name(){return`${a()??""}.accessKey`},children:Ie,$$slots:{default:(J,se)=>{const le=ne(()=>se.uniqueId);var ce=SF(),ve=V(ce),be=g(ve,2);j(()=>{W(ve,"for",r(le)),W(be,"id",r(le))}),xt(be,()=>s().accessKey,he=>s(s().accessKey=he,!0)),b(J,ce)}}});var Y=g(q,2),z=S(Y);Ce(z,{class:"form-field required",get name(){return`${a()??""}.secret`},children:Ie,$$slots:{default:(J,se)=>{const le=ne(()=>se.uniqueId);var ce=TF(),ve=V(ce),be=g(ve,2);Nd(be,{required:!0,get id(){return r(le)},get mask(){return r(h)},set mask(he){y(h,he)},get value(){return s().secret},set value(he){s(s().secret=he,!0)},$$legacy:!0}),j(()=>W(ve,"for",r(le))),b(J,ce)}}});var K=g(Y,2),U=S(K);Ce(U,{class:"form-field",get name(){return`${a()??""}.forcePathStyle`},children:Ie,$$slots:{default:(J,se)=>{const le=ne(()=>se.uniqueId);var ce=$F(),ve=V(ce),be=g(ve,2),he=g(S(be),2);We(he,(xe,Te)=>ct?.(xe,Te),()=>({text:'Forces the request to use path-style addressing, eg. "https://s3.amazonaws.com/BUCKET/KEY" instead of the default "https://BUCKET.s3.amazonaws.com/KEY".',position:"top"})),j(()=>{W(ve,"id",r(le)),W(be,"for",r(le))}),en(ve,()=>s().forcePathStyle,xe=>s(s().forcePathStyle=xe,!0)),b(J,ce)}}}),Ot(3,E,()=>pn,()=>({duration:150})),b(I,E)};te($,I=>{L(s()),A(()=>s().enabled)&&I(D)})}b(n,m),Fe()}var EF=x('<button type="button" aria-label="Upload backup"><i class="ri-upload-cloud-line"></i></button> <input type="file" accept="application/zip" class="hidden"/>',1);function OF(n,e){Re(e,!1);const t=Ut(),i="upload_backup";let s=ee(e,"class",8,""),a=M(),o=M(!1);function l(){r(a)&&ot(a,r(a).value="")}function c(_){_&&Rn(`Note that we don't perform validations for the uploaded backup files. Proceed with caution and only if you trust the source.

Do you really want to upload "${_.name}"?`,()=>{u(_)},()=>{l()})}async function u(_){if(r(o)||!_)return;y(o,!0);const p=new FormData;p.set("file",_);try{await De.backups.upload(p,{requestKey:i}),y(o,!1),t("success"),vn("Successfully uploaded a new backup.")}catch(m){m.isAbort||(y(o,!1),m.response?.data?.file?.message?lr(m.response.data.file.message):De.error(m))}l()}vo(()=>{De.cancelRequest(i)}),ze();var d=EF(),f=V(d);let h;We(f,(_,p)=>ct?.(_,p),()=>"Upload backup"),Ft(()=>ie("click",f,()=>r(a)?.click()));var v=g(f,2);ft(v,_=>y(a,_),()=>r(a)),j(()=>h=Me(f,1,`btn btn-circle btn-transparent ${s()??""}`,null,h,{"btn-loading":r(o),"btn-disabled":r(o)})),ie("change",v,_=>{c(_?.target?.files?.[0])}),b(n,d),Fe()}var DF=x('<i class="ri-arrow-up-s-line"></i>'),PF=x('<i class="ri-arrow-down-s-line"></i>'),MF=x('<input type="checkbox"/> <label>Enable auto backups</label>',1),AF=x('<button type="button" class="dropdown-item closable"><span class="txt">Every day at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every sunday at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every Mon and Wed at 00:00h</span></button> <button type="button" class="dropdown-item closable"><span class="txt">Every first day of the month at 00:00h</span></button>',1),LF=x('<label>Cron expression</label> <input required="" type="text" class="txt-lg txt-mono" placeholder="* * * * *"/> <div class="form-field-addon"><button type="button" class="btn btn-sm btn-outline p-r-0"><span class="txt">Presets</span> <i class="ri-arrow-drop-down-fill"></i> <!></button></div> <div class="help-block"><p>Supports numeric list, steps, ranges or <span class="link-primary">macros</span>. <br/> The timezone is in UTC.</p></div>',1),NF=x('<label>Max @auto backups to keep</label> <input type="number" min="1"/>',1),RF=x('<div class="block"><div class="grid p-t-base p-b-sm"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div></div></div>'),FF=x('<span class="loader loader-sm"></span>'),qF=x('<div class="label label-sm label-warning entrance-right"><i class="ri-error-warning-line txt-warning"></i> <span class="txt">Failed to establish S3 connection</span></div>'),zF=x('<div class="label label-sm label-success entrance-right"><i class="ri-checkbox-circle-line txt-success"></i> <span class="txt">S3 connected successfully</span></div>'),jF=x('<button type="button" class="btn btn-hint btn-transparent"><span class="txt">Reset</span></button>'),UF=x('<form class="block" autocomplete="off"><!> <!> <div class="clearfix m-b-base"></div> <!> <div class="flex"><div class="flex-fill"></div> <!> <!> <button type="submit"><span class="txt">Save changes</span></button></div></form>'),VF=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel" autocomplete="off"><div class="flex m-b-sm flex-gap-10"><span class="txt-xl">Backup and restore your PocketBase data</span> <!> <!></div> <!> <hr/> <button type="button"><span class="txt">Backups options</span> <!></button> <!></div></div>',1),BF=x("<!> <!>",1);function HF(n,e){Re(e,!1);const t=()=>Ct(Cn,"$pageTitle",i),[i,s]=Nt(),a=M();Kn(Cn,"Backups");let o=M(),l=M({}),c=M({}),u=M(!1),d=M(!1),f=M(""),h=M(!1),v=M(!1),_=M(!1),p=M(null);m();async function m(){y(u,!0);try{const C=await De.settings.getAll()||{};k(C)}catch(C){De.error(C)}y(u,!1)}async function w(){if(!(r(d)||!r(a))){y(d,!0);try{const C=await De.settings.update(F.filterRedactedProps(r(c)));sn({}),await D(),k(C),vn("Successfully saved application settings.")}catch(C){De.error(C)}y(d,!1)}}function k(C={}){y(c,{backups:C?.backups||{}}),y(h,r(c).backups.cron!=""),y(l,JSON.parse(JSON.stringify(r(c))))}function $(){y(c,JSON.parse(JSON.stringify(r(l)||{backups:{}}))),y(h,r(c).backups.cron!="")}async function D(){return r(o)?.loadBackups()}re(()=>r(l),()=>{y(f,JSON.stringify(r(l)))}),re(()=>(r(f),r(c)),()=>{y(a,r(f)!=JSON.stringify(r(c)))}),re(()=>(r(h),r(c),Zn),()=>{!r(h)&&r(c)?.backups?.cron&&(Zn("backups.cron"),ot(c,r(c).backups.cron=""))}),lt(),ze();var I=BF(),E=V(I);Ns(E);var T=g(E,2);Ei(T,{children:(C,O)=>{var P=VF(),N=V(P),R=S(N),q=g(S(R),2),B=S(q),Y=g(N,2),z=S(Y),K=S(z),U=g(S(K),2);Hl(U,{class:"btn-sm",tooltip:"Refresh",$$events:{refresh:D}});var J=g(U,2);OF(J,{class:"btn-sm",$$events:{success:D}});var se=g(K,2);ft(yF(se,{$$legacy:!0}),pe=>y(o,pe),()=>r(o));var le=g(se,4);let ce;var ve=g(S(le),2);{var be=pe=>{var ue=DF();b(pe,ue)},he=pe=>{var ue=PF();b(pe,ue)};te(ve,pe=>{r(v)?pe(be):pe(he,!1)})}var xe=g(le,2);{var Te=pe=>{var ue=UF(),we=S(ue);Ce(we,{class:"form-field form-field-toggle m-t-base m-b-0",children:Ie,$$slots:{default:(je,He)=>{const dt=ne(()=>He.uniqueId);var $e=MF(),Be=V($e),Ze=g(Be,2);j(()=>{W(Be,"id",r(dt)),W(Ze,"for",r(dt))}),en(Be,()=>r(h),Je=>y(h,Je)),b(je,$e)}}});var ke=g(we,2);{var ae=je=>{var He=RF(),dt=S(He),$e=S(dt),Be=S($e);Ce(Be,{class:"form-field required",name:"backups.cron",children:Ie,$$slots:{default:(st,Ye)=>{const Ke=ne(()=>Ye.uniqueId);var qe=LF(),Le=V(qe),Ve=g(Le,2);Bi(Ve,(r(l),A(()=>!r(l)?.backups?.cron)));var et=g(Ve,2),nt=S(et),wt=g(S(nt),4);Jn(wt,{class:"dropdown dropdown-nowrap dropdown-right",children:(gt,vt)=>{var rt=AF(),Oe=V(rt),H=g(Oe,2),G=g(H,2),de=g(G,2);ie("click",Oe,()=>{ot(c,r(c).backups.cron="0 0 * * *")}),ie("click",H,()=>{ot(c,r(c).backups.cron="0 0 * * 0")}),ie("click",G,()=>{ot(c,r(c).backups.cron="0 0 * * 1,3")}),ie("click",de,()=>{ot(c,r(c).backups.cron="0 0 1 * *")}),b(gt,rt)},$$slots:{default:!0}});var pt=g(et,2),tt=S(pt),Ge=g(S(tt));We(Ge,(gt,vt)=>ct?.(gt,vt),()=>`@yearly
@annually
@monthly
@weekly
@daily
@midnight
@hourly`),j(()=>{W(Le,"for",r(Ke)),W(Ve,"id",r(Ke))}),xt(Ve,()=>r(c).backups.cron,gt=>ot(c,r(c).backups.cron=gt)),b(st,qe)}}});var Ze=g($e,2),Je=S(Ze);Ce(Je,{class:"form-field required",name:"backups.cronMaxKeep",children:Ie,$$slots:{default:(st,Ye)=>{const Ke=ne(()=>Ye.uniqueId);var qe=NF(),Le=V(qe),Ve=g(Le,2);j(()=>{W(Le,"for",r(Ke)),W(Ve,"id",r(Ke))}),xt(Ve,()=>r(c).backups.cronMaxKeep,et=>ot(c,r(c).backups.cronMaxKeep=et)),b(st,qe)}}}),Ot(3,He,()=>pn,()=>({duration:150})),b(je,He)};te(ke,je=>{r(h)&&je(ae)})}var _e=g(ke,4);{let je=ne(()=>(r(l),A(()=>r(l).backups?.s3)));cb(_e,{toggleLabel:"Store backups in S3 storage",testFilesystem:"backups",configKey:"backups.s3",get originalConfig(){return r(je)},get config(){return r(c).backups.s3},set config(He){ot(c,r(c).backups.s3=He)},get isTesting(){return r(_)},set isTesting(He){y(_,He)},get testError(){return r(p)},set testError(He){y(p,He)},$$legacy:!0})}var oe=g(_e,2),me=g(S(oe),2);{var Q=je=>{var He=kt(),dt=V(He);{var $e=Je=>{var st=FF();b(Je,st)},Be=Je=>{var st=qF();We(st,(Ye,Ke)=>ct?.(Ye,Ke),()=>r(p).data?.message),b(Je,st)},Ze=Je=>{var st=zF();b(Je,st)};te(dt,Je=>{r(_)?Je($e):r(p)?Je(Be,1):Je(Ze,!1)})}b(je,He)};te(me,je=>{r(c),r(a),r(d),A(()=>r(c).backups?.s3?.enabled&&!r(a)&&!r(d))&&je(Q)})}var ye=g(me,2);{var Ee=je=>{var He=jF();j(()=>He.disabled=!r(a)||r(d)),ie("click",He,()=>$()),b(je,He)};te(ye,je=>{r(a)&&je(Ee)})}var Ae=g(ye,2);let Ne;j(()=>{Ne=Me(Ae,1,"btn btn-expanded",null,Ne,{"btn-loading":r(d)}),Ae.disabled=!r(a)||r(d)}),ie("click",Ae,()=>w()),ie("submit",ue,Et(w)),Ot(3,ue,()=>pn,()=>({duration:150})),b(pe,ue)};te(xe,pe=>{r(v)&&!r(u)&&pe(Te)})}j(()=>{Se(B,t()),ce=Me(le,1,"btn btn-secondary",null,ce,{"btn-loading":r(u)}),le.disabled=r(u)}),ie("click",le,()=>y(v,!r(v))),ie("submit",z,Et(w)),b(C,P)},$$slots:{default:!0}}),b(n,I),Fe(),s()}var WF=x('<div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div> <div class="list-item list-item-loader"><span class="skeleton-loader skeleton-loader-lg"></span></div>',1),YF=x('<div class="list-item"><div class="content"><span class="txt"> </span></div> <span class="txt-hint txt-nowrap txt-mono cron-expr m-r-xs"> </span> <div class="actions"><button type="button" aria-label="Run"><i class="ri-play-large-line"></i></button></div></div>'),KF=x('<div class="list-item list-item-placeholder"><span class="txt">No app crons found.</span></div>'),JF=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel" autocomplete="off"><div class="flex m-b-sm flex-gap-10"><span class="txt-xl">Registered app cron jobs</span> <!></div> <div class="list list-compact"><div class="list-content"><!></div></div> <p class="txt-hint m-t-xs">App cron jobs can be registered only programmatically with <a target="_blank" rel="noopener noreferrer">Go</a> or <a target="_blank" rel="noopener noreferrer">JavaScript</a>.</p></div></div>',1),ZF=x("<!> <!>",1);function GF(n,e){Re(e,!1);const t=()=>Ct(Cn,"$pageTitle",i),[i,s]=Nt();Kn(Cn,"Crons");let a=M([]),o=M(!1),l=M({});c();async function c(){y(o,!0);try{y(a,await De.crons.getFullList()),y(o,!1)}catch(v){v.isAbort||(De.error(v),y(o,!1))}}async function u(v){ot(l,r(l)[v]=!0);try{await De.crons.run(v),vn(`Successfully triggered ${v}.`),ot(l,r(l)[v]=!1)}catch(_){_.isAbort||(De.error(_),ot(l,r(l)[v]=!1))}}ze();var d=ZF(),f=V(d);Ns(f);var h=g(f,2);Ei(h,{children:(v,_)=>{var p=JF(),m=V(p),w=S(m),k=g(S(w),2),$=S(k),D=g(m,2),I=S(D),E=S(I),T=g(S(E),2);Hl(T,{class:"btn-sm",tooltip:"Refresh",$$events:{refresh:c}});var C=g(E,2),O=S(C),P=S(O);{var N=z=>{var K=WF();b(z,K)},R=z=>{var K=kt(),U=V(K);ht(U,1,()=>r(a),J=>J.id,(J,se)=>{var le=YF(),ce=S(le),ve=S(ce),be=S(ve),he=g(ce,2),xe=S(he),Te=g(he,2),pe=S(Te);let ue;We(pe,(we,ke)=>ct?.(we,ke),()=>"Run"),Ft(()=>ie("click",pe,Et(()=>u(r(se).id)))),j(()=>{Se(be,r(se).id),Se(xe,r(se).expression),ue=Me(pe,1,"btn btn-sm btn-circle btn-hint btn-transparent",null,ue,{"btn-loading":r(l)[r(se).id]}),pe.disabled=r(l)[r(se).id]}),b(J,le)},J=>{var se=KF();b(J,se)}),b(z,K)};te(P,z=>{r(o)?z(N):z(R,!1)})}var q=g(C,2),B=g(S(q)),Y=g(B,2);j(()=>{Se($,t()),W(B,"href","https://pocketbase.io/docs/go-jobs-scheduling/"),W(Y,"href","https://pocketbase.io/docs/js-jobs-scheduling/")}),b(v,p)},$$slots:{default:!0}}),b(n,d),Fe(),s()}var XF=x('<div class="loader"></div>'),QF=x('<input type="checkbox"/> <label>Select all</label>',1),eq=x('<input type="checkbox"/> <label> </label>',1),tq=x('<div class="list-item list-item-collection"><!></div>'),nq=x(`<div class="content txt-xl m-b-base"><p>Below you'll find your current collections configuration that you could import in
                        another PocketBase environment.</p></div> <div class="export-panel"><div class="export-list"><div class="list-item list-item-section"><!></div> <!></div>  <div tabindex="0" class="export-preview"><button type="button" class="btn btn-sm btn-transparent fade copy-schema"><span class="txt">Copy</span></button> <pre class="code-wrapper"> </pre></div></div> <div class="flex m-t-base"><div class="flex-fill"></div> <button type="button" class="btn btn-expanded"><i class="ri-download-line"></i> <span class="txt">Download as JSON</span></button></div>`,1),iq=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel"><!></div></div>',1),rq=x("<!> <!>",1);function sq(n,e){Re(e,!1);const t=()=>Ct(Cn,"$pageTitle",i),[i,s]=Nt(),a=M(),o=M(),l=M();Kn(Cn,"Export collections");const c="export_"+F.randomString(5);let u=M(),d=M([]),f=M({}),h=M(!1);v();async function v(){y(h,!0);try{y(d,await De.collections.getFullList({batch:100,$cancelKey:c})),y(d,F.sortCollections(r(d)));for(let T of r(d))delete T.created,delete T.updated,delete T.oauth2?.providers;k()}catch(T){De.error(T)}y(h,!1)}function _(){F.downloadJson(Object.values(r(f)),"pb_schema")}function p(){F.copyToClipboard(r(a)),oa("The configuration was copied to your clipboard!",3e3)}function m(){r(l)?w():k()}function w(){y(f,{})}function k(){y(f,{});for(const T of r(d))ot(f,r(f)[T.id]=T)}function $(T){r(f)[T.id]?delete r(f)[T.id]:ot(f,r(f)[T.id]=T),y(f,r(f))}re(()=>r(f),()=>{y(a,JSON.stringify(Object.values(r(f)),null,4))}),re(()=>r(f),()=>{y(o,Object.keys(r(f)).length)}),re(()=>(r(d),r(o)),()=>{y(l,r(d).length&&r(o)===r(d).length)}),lt(),ze();var D=rq(),I=V(D);Ns(I);var E=g(I,2);Ei(E,{children:(T,C)=>{var O=iq(),P=V(O),N=S(P),R=g(S(N),2),q=S(R),B=g(P,2),Y=S(B),z=S(Y);{var K=J=>{var se=XF();b(J,se)},U=J=>{var se=nq(),le=g(V(se),2),ce=S(le),ve=S(ce),be=S(ve);Ce(be,{class:"form-field",children:Ie,$$slots:{default:(ae,_e)=>{const oe=ne(()=>_e.uniqueId);var me=QF(),Q=V(me),ye=g(Q,2);j(()=>{W(Q,"id",r(oe)),Q.disabled=(r(d),A(()=>!r(d).length)),Wr(Q,r(l)),W(ye,"for",r(oe))}),ie("change",Q,()=>m()),b(ae,me)}}});var he=g(ve,2);ht(he,1,()=>r(d),ae=>ae.id,(ae,_e)=>{var oe=tq(),me=S(oe);Ce(me,{class:"form-field",children:Ie,$$slots:{default:(Q,ye)=>{const Ee=ne(()=>ye.uniqueId);var Ae=eq(),Ne=V(Ae),je=g(Ne,2),He=S(je);j(()=>{W(Ne,"id",r(Ee)),Wr(Ne,(r(f),r(_e),A(()=>r(f)[r(_e).id]))),W(je,"for",r(Ee)),W(je,"title",(r(_e),A(()=>r(_e).name))),Se(He,(r(_e),A(()=>r(_e).name)))}),ie("change",Ne,()=>$(r(_e))),b(Q,Ae)}}}),b(ae,oe)});var xe=g(ce,2),Te=S(xe),pe=g(Te,2),ue=S(pe);ft(xe,ae=>y(u,ae),()=>r(u));var we=g(le,2),ke=g(S(we),2);j(()=>{Te.disabled=!r(o),Se(ue,r(a)),ke.disabled=!r(o)}),ie("click",Te,()=>p()),ie("keydown",xe,ae=>{if(ae.ctrlKey&&ae.code==="KeyA"){ae.preventDefault();const _e=window.getSelection(),oe=document.createRange();oe.selectNodeContents(r(u)),_e.removeAllRanges(),_e.addRange(oe)}}),ie("click",ke,()=>_()),b(J,se)};te(z,J=>{r(h)?J(K):J(U,!1)})}j(()=>Se(q,t())),b(T,O)},$$slots:{default:!0}}),b(n,D),Fe(),s()}var aq=x('<span class="label label-success">Added</span> <strong> </strong>',1),oq=x('<span class="label label-danger">Deleted</span> <strong> </strong>',1),lq=x('<span class="label label-warning">Changed</span>'),cq=x('<strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i>',1),uq=x('<div class="inline-flex fleg-gap-5"><!> <!> <strong class="txt"> </strong></div>'),dq=x('<tr><td class="min-width svelte-tt2158"><span> </span></td><td><pre class="txt diff-value svelte-tt2158"> </pre></td><td><pre class="txt diff-value svelte-tt2158"> </pre></td></tr>'),fq=x('<tr class="txt-primary svelte-tt2158"><td class="min-width field-key-col svelte-tt2158"> </td><td class="changed-old-col svelte-tt2158"><pre class="txt"> </pre></td><td class="changed-none-col svelte-tt2158"></td></tr>'),hq=x('<tr class="svelte-tt2158"><th class="min-width svelte-tt2158" colspan="3"><span class="txt"> </span> <span class="label label-danger m-l-5 svelte-tt2158">Deleted - <small>All stored data related to <strong> </strong> will be deleted!</small></span></th></tr> <!>',1),vq=x('<span class="label label-warning m-l-5 svelte-tt2158">Changed</span>'),pq=x('<tr><td class="min-width field-key-col svelte-tt2158"> </td><td><pre class="txt"> </pre></td><td><pre class="txt"> </pre></td></tr>'),mq=x('<tr class="svelte-tt2158"><th class="min-width svelte-tt2158" colspan="3"><span class="txt"> </span> <!></th></tr> <!>',1),gq=x('<tr class="txt-primary svelte-tt2158"><td class="min-width field-key-col svelte-tt2158"> </td><td class="changed-none-col svelte-tt2158"></td><td class="changed-new-col svelte-tt2158"><pre class="txt"> </pre></td></tr>'),bq=x('<tr class="svelte-tt2158"><th class="min-width svelte-tt2158" colspan="3"><span class="txt"> </span> <span class="label label-success m-l-5 svelte-tt2158">Added</span></th></tr> <!>',1),yq=x('<div class="section-title"><!></div> <table class="table collections-diff-table m-b-base svelte-tt2158"><thead class="svelte-tt2158"><tr class="svelte-tt2158"><th class="svelte-tt2158">Props</th><th width="10%" class="svelte-tt2158">Old</th><th width="10%" class="svelte-tt2158">New</th></tr></thead><tbody><!><!><!><!></tbody></table>',1);function _q(n,e){Re(e,!1);const t=M(),i=M(),s=M(),a=M();let o=ee(e,"collectionA",24,()=>({})),l=ee(e,"collectionB",24,()=>({})),c=ee(e,"deleteMissing",8,!1),u=M([]),d=M([]),f=M([]),h=M([]),v=M([]);function _(){y(d,Array.isArray(l()?.fields)?l()?.fields.concat():[]),c()||y(d,r(d).concat(r(u).filter(Y=>!r(d).find(z=>Y.id==z.id))))}function p(Y,z){Y=Y||[];for(let K of Y)if(K.id==z)return K;return null}function m(Y,z){return Y===z?!1:JSON.stringify(Y)!==JSON.stringify(z)}function w(Y){return typeof Y>"u"?"":F.isObject(Y)?JSON.stringify(Y,null,4):Y}re(()=>L(l()),()=>{y(t,!l()?.id&&!l()?.name)}),re(()=>(r(t),L(o())),()=>{y(i,!r(t)&&!o()?.id)}),re(()=>L(o()),()=>{y(u,Array.isArray(o()?.fields)?o()?.fields.concat():[])}),re(()=>(L(o()),L(l()),L(c())),()=>{(typeof o()?.fields<"u"||typeof l()?.fields<"u"||typeof c()<"u")&&_()}),re(()=>(r(u),r(d)),()=>{y(f,r(u).filter(Y=>!r(d).find(z=>Y.id==z.id)))}),re(()=>(r(d),r(u)),()=>{y(h,r(d).filter(Y=>r(u).find(z=>z.id==Y.id)))}),re(()=>(r(d),r(u)),()=>{y(v,r(d).filter(Y=>!r(u).find(z=>z.id==Y.id)))}),re(()=>(L(o()),L(l()),L(c())),()=>{y(s,F.hasCollectionChanges(o(),l(),c()))}),re(()=>(L(o()),L(l())),()=>{y(a,F.mergeUnique(Object.keys(o()||{}),Object.keys(l()||{})).filter(Y=>!["fields","created","updated"].includes(Y)))}),lt(),ze();var k=yq(),$=V(k),D=S($);{var I=Y=>{var z=aq(),K=g(V(z),2),U=S(K);j(()=>Se(U,(L(l()),A(()=>l()?.name)))),b(Y,z)},E=Y=>{var z=oq(),K=g(V(z),2),U=S(K);j(()=>Se(U,(L(o()),A(()=>o()?.name)))),b(Y,z)},T=Y=>{var z=uq(),K=S(z);{var U=ve=>{var be=lq();b(ve,be)};te(K,ve=>{r(s)&&ve(U)})}var J=g(K,2);{var se=ve=>{var be=cq(),he=V(be),xe=S(he);j(()=>Se(xe,(L(o()),A(()=>o().name)))),b(ve,be)};te(J,ve=>{L(o()),L(l()),A(()=>o().name!==l().name)&&ve(se)})}var le=g(J,2),ce=S(le);j(()=>Se(ce,(L(l()),A(()=>l().name)))),b(Y,z)};te(D,Y=>{L(o()),A(()=>!o()?.id)?Y(I):(L(l()),A(()=>!l()?.id)?Y(E,1):Y(T,!1))})}var C=g($,2),O=g(S(C)),P=S(O);ht(P,1,()=>r(a),At,(Y,z)=>{var K=dq();let U;var J=S(K),se=S(J),le=S(se),ce=g(J);let ve;var be=S(ce),he=S(be),xe=g(ce);let Te;var pe=S(xe),ue=S(pe);j((we,ke,ae,_e,oe)=>{U=Me(K,1,"svelte-tt2158",null,U,we),Se(le,r(z)),ve=Me(ce,1,"svelte-tt2158",null,ve,ke),Se(he,ae),Te=Me(xe,1,"svelte-tt2158",null,Te,_e),Se(ue,oe)},[()=>({"txt-primary":m(o()?.[r(z)],l()?.[r(z)])}),()=>({"changed-old-col":!r(i)&&m(o()?.[r(z)],l()?.[r(z)]),"changed-none-col":r(i)}),()=>(L(o()),r(z),A(()=>w(o()?.[r(z)]))),()=>({"changed-new-col":!r(t)&&m(o()?.[r(z)],l()?.[r(z)]),"changed-none-col":r(t)}),()=>(L(l()),r(z),A(()=>w(l()?.[r(z)])))]),b(Y,K)});var N=g(P);{var R=Y=>{var z=kt(),K=V(z);ht(K,1,()=>r(f),At,(U,J)=>{var se=hq(),le=V(se),ce=S(le),ve=S(ce),be=S(ve),he=g(ve,2),xe=g(S(he)),Te=g(S(xe)),pe=S(Te),ue=g(le,2);ht(ue,1,()=>(r(J),A(()=>Object.entries(r(J)))),At,(we,ke)=>{var ae=rn(()=>Zs(r(ke),2));let _e=()=>r(ae)[0],oe=()=>r(ae)[1];var me=fq(),Q=S(me),ye=S(Q),Ee=g(Q),Ae=S(Ee),Ne=S(Ae);j(je=>{Se(ye,_e()),Se(Ne,je)},[()=>(oe(),A(()=>w(oe())))]),b(we,me)}),j(()=>{Se(be,`field: ${r(J),A(()=>r(J).name)??""}`),Se(pe,(r(J),A(()=>r(J).name)))}),b(U,se)}),b(Y,z)};te(N,Y=>{(c()||r(t))&&Y(R)})}var q=g(N);ht(q,1,()=>r(h),At,(Y,z)=>{var K=mq(),U=V(K),J=S(U),se=S(J),le=S(se),ce=g(se,2);{var ve=xe=>{var Te=vq();b(xe,Te)},be=rn(()=>(r(u),r(z),r(d),A(()=>m(p(r(u),r(z).id),p(r(d),r(z).id)))));te(ce,xe=>{r(be)&&xe(ve)})}var he=g(U,2);ht(he,1,()=>(r(z),A(()=>Object.entries(r(z)))),At,(xe,Te)=>{var pe=rn(()=>Zs(r(Te),2));let ue=()=>r(pe)[0],we=()=>r(pe)[1];var ke=pq();let ae;var _e=S(ke),oe=S(_e),me=g(_e);let Q;var ye=S(me),Ee=S(ye),Ae=g(me);let Ne;var je=S(Ae),He=S(je);j((dt,$e,Be,Ze,Je)=>{ae=Me(ke,1,"svelte-tt2158",null,ae,dt),Se(oe,ue()),Q=Me(me,1,"svelte-tt2158",null,Q,$e),Se(Ee,Be),Ne=Me(Ae,1,"svelte-tt2158",null,Ne,Ze),Se(He,Je)},[()=>({"txt-primary":m(p(r(u),r(z).id)?.[ue()],we())}),()=>({"changed-old-col":m(p(r(u),r(z).id)?.[ue()],we())}),()=>(r(u),r(z),ue(),A(()=>w(p(r(u),r(z).id)?.[ue()]))),()=>({"changed-new-col":m(p(r(u),r(z).id)?.[ue()],we())}),()=>(we(),A(()=>w(we())))]),b(xe,ke)}),j(()=>Se(le,`field: ${r(z),A(()=>r(z).name)??""}`)),b(Y,K)});var B=g(q);ht(B,1,()=>r(v),At,(Y,z)=>{var K=bq(),U=V(K),J=S(U),se=S(J),le=S(se),ce=g(U,2);ht(ce,1,()=>(r(z),A(()=>Object.entries(r(z)))),At,(ve,be)=>{var he=rn(()=>Zs(r(be),2));let xe=()=>r(he)[0],Te=()=>r(he)[1];var pe=gq(),ue=S(pe),we=S(ue),ke=g(ue,2),ae=S(ke),_e=S(ae);j(oe=>{Se(we,xe()),Se(_e,oe)},[()=>(Te(),A(()=>w(Te())))]),b(ve,pe)}),j(()=>Se(le,`field: ${r(z),A(()=>r(z).name)??""}`)),b(Y,K)}),b(n,k),Fe()}var xq=x('<h4 class="center txt-break">Side-by-side diff</h4>'),wq=x('<button type="button" class="btn btn-transparent">Close</button> <button type="button"><span class="txt">Confirm and import</span></button>',1);function kq(n,e){Re(e,!1);const t=Ut();let i=M(),s=M([]),a=M([]),o=M([]),l=M(!1),c=M(!1);function u(p,m,w=!1){y(s,p),y(a,m),y(l,w),r(i)?.show()}function d(){return r(i)?.hide()}function f(){y(o,[]);for(const p of r(s)){const m=F.findByKey(r(a),"id",p.id)||null;(r(l)&&!m?.id||m?.id&&F.hasCollectionChanges(p,m,r(l)))&&r(o).push({old:p,new:m})}for(const p of r(a)){const m=F.findByKey(r(s),"id",p.id)||null;m?.id||r(o).push({old:m,new:p})}}function h(){const p=[];if(r(l))for(const m of r(s)){const w=F.findByKey(r(a),"id",m.id);if(!w)p.push(m.name+".*");else{const k=Array.isArray(m.fields)?m.fields:[];for(const $ of k)F.findByKey(w.fields,"id",$.id)||p.push(`${m.name}.${$.name} (${$.id})`)}}p.length?Rn(`Do you really want to delete the following collection fields and their related records data:
- ${p.join(`
- `)}`,()=>{v()}):v()}async function v(){if(!r(c)){y(c,!0);try{await De.collections.import(r(a),r(l)),vn("Successfully imported collections configuration."),t("submit")}catch(p){De.error(p)}y(c,!1),d()}}re(()=>(r(s),r(a)),()=>{Array.isArray(r(s))&&Array.isArray(r(a))&&f()}),lt();var _={show:u,hide:d};ze();{let p=ne(()=>!r(c));ft(mn(n,{class:"full-width-popup import-popup",overlayClose:!1,get escClose(){return r(p)},beforeHide:()=>!r(c),popup:!0,$$events:{show(m){Qe.call(this,e,m)},hide(m){Qe.call(this,e,m)}},children:(m,w)=>{var k=kt(),$=V(k);ht($,1,()=>r(o),At,(D,I)=>{_q(D,{get collectionA(){return r(I),A(()=>r(I).old)},get collectionB(){return r(I),A(()=>r(I).new)},get deleteMissing(){return r(l)}})}),b(m,k)},$$slots:{default:!0,header:(m,w)=>{var k=xq();b(m,k)},footer:(m,w)=>{var k=wq(),$=V(k),D=g($,2);let I;j(()=>{$.disabled=r(c),I=Me(D,1,"btn btn-expanded",null,I,{"btn-loading":r(c)}),D.disabled=r(c)}),ie("click",$,d),ie("click",D,()=>h()),b(m,k)}},$$legacy:!0}),m=>y(i,m),()=>r(i))}return yt(e,"show",u),yt(e,"hide",d),Fe(_)}var Sq=x('<div class="loader"></div>'),Tq=x('<div class="help-block help-block-error">Invalid collections configuration.</div>'),$q=x('<label class="p-b-10">Collections</label> <textarea class="code" spellcheck="false" rows="15" required=""></textarea> <!>',1),Iq=x('<input type="checkbox"/> <label>Merge with the existing collections</label>',1),Cq=x('<div class="alert alert-info"><div class="icon"><i class="ri-information-line"></i></div> <div class="content"><string>Your collections configuration is already up-to-date!</string></div></div>'),Eq=x('<small class="txt-hint"> </small>'),Oq=x('<div class="list-item"><span class="label label-danger list-label svelte-1s34amf">Deleted</span> <div class="inline-flex flex-gap-5"><strong> </strong> <!></div></div>'),Dq=x('<strong class="txt-strikethrough txt-hint"> </strong> <i class="ri-arrow-right-line txt-sm"></i>',1),Pq=x('<small class="txt-hint"> </small>'),Mq=x('<div class="list-item"><span class="label label-warning list-label svelte-1s34amf">Changed</span> <div class="inline-flex flex-gap-5"><!> <strong> </strong> <!></div></div>'),Aq=x('<small class="txt-hint"> </small>'),Lq=x('<div class="list-item"><span class="label label-success list-label svelte-1s34amf">Added</span> <div class="inline-flex flex-gap-5"><strong> </strong> <!></div></div>'),Nq=x('<h5 class="section-title">Detected changes</h5> <div class="list"><!> <!> <!></div>',1),Rq=x(`<div class="alert alert-warning m-t-base"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content"><string>Some of the imported collections share the same name and/or fields but are
                                imported with different IDs. You can replace them in the import if you want
                                to.</string></div> <button type="button" class="btn btn-warning btn-sm btn-outline"><span class="txt">Replace with original ids</span></button></div>`),Fq=x('<button type="button" class="btn btn-transparent link-hint"><span class="txt">Clear</span></button>'),qq=x('<input type="file" class="hidden" accept=".json"/> <div class="content txt-xl m-b-base"><p>Paste below the collections configuration you want to import or <button><span class="txt">Load from JSON file</span></button></p></div> <!> <!> <!> <!> <!> <!> <div class="flex m-t-base"><!> <div class="flex-fill"></div> <button type="button" class="btn btn-expanded btn-warning m-l-auto"><span class="txt">Review</span></button></div>',1),zq=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><div class="panel"><!></div></div>',1),jq=x("<!> <!> <!>",1);function Uq(n,e){Re(e,!1);const t=()=>Ct(Cn,"$pageTitle",i),[i,s]=Nt(),a=M(),o=M(),l=M(),c=M(),u=M(),d=M();Kn(Cn,"Import collections");let f=M(),h=M(),v=M(""),_=M(!1),p=M([]),m=M([]),w=M(!0),k=M([]),$=M(!1),D=M(!1);I();async function I(){y($,!0);try{y(m,await De.collections.getFullList(200));for(let z of r(m))delete z.created,delete z.updated,delete z.oauth2?.providers}catch(z){De.error(z)}y($,!1)}function E(){if(y(k,[]),!!r(a))for(let z of r(p)){const K=F.findByKey(r(m),"id",z.id);!K?.id||!F.hasCollectionChanges(K,z,r(w))||r(k).push({new:z,old:K})}}function T(){y(p,[]);try{y(p,JSON.parse(r(v)))}catch{}Array.isArray(r(p))?y(p,F.filterDuplicatesByKey(r(p))):y(p,[]);for(let z of r(p))delete z.created,delete z.updated,z.fields=F.filterDuplicatesByKey(z.fields)}function C(){for(let z of r(p)){const K=F.findByKey(r(m),"name",z.name)||F.findByKey(r(m),"id",z.id);if(!K)continue;const U=z.id,J=K.id;z.id=J;const se=Array.isArray(K.fields)?K.fields:[],le=Array.isArray(z.fields)?z.fields:[];for(const ce of le){const ve=F.findByKey(se,"name",ce.name);ve&&ve.id&&(ce.id=ve.id)}for(let ce of r(p))if(Array.isArray(ce.fields))for(let ve of ce.fields)ve.collectionId&&ve.collectionId===U&&(ve.collectionId=J);for(let ce=0;ce<z.indexes?.length;ce++)z.indexes[ce]=z.indexes[ce].replace(/create\s+(?:unique\s+)?\s*index\s*(?:if\s+not\s+exists\s+)?(\S*)\s+on/gim,ve=>ve.replace(U,J))}y(v,JSON.stringify(r(p),null,4))}function O(z){y(_,!0);const K=new FileReader;K.onload=async U=>{y(_,!1),ot(f,r(f).value=""),y(v,U.target.result),await $n(),r(p).length||(lr("Invalid collections configuration."),P())},K.onerror=U=>{console.warn(U),lr("Failed to load the imported JSON."),y(_,!1),ot(f,r(f).value="")},K.readAsText(z)}function P(){y(v,""),ot(f,r(f).value=""),sn({})}function N(){const z=r(D)?F.filterDuplicatesByKey(r(m).concat(r(p))):r(p);r(h)?.show(r(m),z,r(w))}re(()=>(r(v),r(D)),()=>{typeof r(v)<"u"&&r(D)!==null&&T(r(v))}),re(()=>(r(v),r(p)),()=>{y(a,!!r(v)&&r(p).length&&r(p).length===r(p).filter(z=>!!z.id&&!!z.name).length)}),re(()=>(r(m),r(a),r(D),r(w),r(p)),()=>{y(o,r(m).filter(z=>r(a)&&!r(D)&&r(w)&&!F.findByKey(r(p),"id",z.id)))}),re(()=>(r(p),r(a),r(m)),()=>{y(l,r(p).filter(z=>r(a)&&!F.findByKey(r(m),"id",z.id)))}),re(()=>(r(p),r(w)),()=>{(typeof r(p)<"u"||typeof r(w)<"u")&&E()}),re(()=>(r(v),r(o),r(l),r(k)),()=>{y(c,!!r(v)&&(r(o).length||r(l).length||r(k).length))}),re(()=>(r($),r(a),r(c)),()=>{y(u,!r($)&&r(a)&&r(c))}),re(()=>(r(p),r(m)),()=>{y(d,r(p).filter(z=>{let K=F.findByKey(r(m),"name",z.name)||F.findByKey(r(m),"id",z.id);if(!K)return!1;if(K.id!=z.id)return!0;const U=Array.isArray(K.fields)?K.fields:[],J=Array.isArray(z.fields)?z.fields:[];for(const se of J){if(F.findByKey(U,"id",se.id))continue;const ce=F.findByKey(U,"name",se.name);if(ce&&se.id!=ce.id)return!0}return!1}))}),lt(),ze();var R=jq(),q=V(R);Ns(q);var B=g(q,2);Ei(B,{children:(z,K)=>{var U=zq(),J=V(U),se=S(J),le=g(S(se),2),ce=S(le),ve=g(J,2),be=S(ve),he=S(be);{var xe=pe=>{var ue=Sq();b(pe,ue)},Te=pe=>{var ue=qq(),we=V(ue);ft(we,Ye=>y(f,Ye),()=>r(f));var ke=g(we,2),ae=S(ke),_e=g(S(ae));let oe;var me=g(ke,2);{let Ye=ne(()=>r(a)?"":"field-error");Ce(me,{get class(){return`form-field ${r(Ye)??""}`},name:"collections",children:Ie,$$slots:{default:(Ke,qe)=>{const Le=ne(()=>qe.uniqueId);var Ve=$q(),et=V(Ve),nt=g(et,2),wt=g(nt,2);{var pt=tt=>{var Ge=Tq();b(tt,Ge)};te(wt,tt=>{r(v)&&!r(a)&&tt(pt)})}j(()=>{W(et,"for",r(Le)),W(nt,"id",r(Le))}),xt(nt,()=>r(v),tt=>y(v,tt)),b(Ke,Ve)}}})}var Q=g(me,2);{var ye=Ye=>{Ce(Ye,{class:"form-field form-field-toggle",children:Ie,$$slots:{default:(Ke,qe)=>{const Le=ne(()=>qe.uniqueId);var Ve=Iq(),et=V(Ve),nt=g(et,2);j(()=>{W(et,"id",r(Le)),et.disabled=!r(a),W(nt,"for",r(Le))}),en(et,()=>r(D),wt=>y(D,wt)),b(Ke,Ve)}}})};te(Q,Ye=>{r(p),A(()=>r(p).length)&&Ye(ye)})}var Ee=g(Q,2);te(Ee,Ye=>{});var Ae=g(Ee,2);{var Ne=Ye=>{var Ke=Cq();b(Ye,Ke)};te(Ae,Ye=>{r(a),r(p),r(c),A(()=>r(a)&&r(p).length&&!r(c))&&Ye(Ne)})}var je=g(Ae,2);{var He=Ye=>{var Ke=Nq(),qe=g(V(Ke),2),Le=S(qe);{var Ve=tt=>{var Ge=kt(),gt=V(Ge);ht(gt,1,()=>r(o),vt=>vt.id,(vt,rt)=>{var Oe=Oq(),H=g(S(Oe),2),G=S(H),de=S(G),ge=g(G,2);{var Ue=Xe=>{var Tt=Eq(),at=S(Tt);j(()=>Se(at,(r(rt),A(()=>r(rt).id)))),b(Xe,Tt)};te(ge,Xe=>{r(rt),A(()=>r(rt).id)&&Xe(Ue)})}j(()=>Se(de,(r(rt),A(()=>r(rt).name)))),b(vt,Oe)}),b(tt,Ge)};te(Le,tt=>{r(o),A(()=>r(o).length)&&tt(Ve)})}var et=g(Le,2);{var nt=tt=>{var Ge=kt(),gt=V(Ge);ht(gt,1,()=>r(k),vt=>vt.old.id+vt.new.id,(vt,rt)=>{var Oe=Mq(),H=g(S(Oe),2),G=S(H);{var de=at=>{var _t=Dq(),ut=V(_t),mt=S(ut);j(()=>Se(mt,(r(rt),A(()=>r(rt).old.name)))),b(at,_t)};te(G,at=>{r(rt),A(()=>r(rt).old.name!==r(rt).new.name)&&at(de)})}var ge=g(G,2),Ue=S(ge),Xe=g(ge,2);{var Tt=at=>{var _t=Pq(),ut=S(_t);j(()=>Se(ut,(r(rt),A(()=>r(rt).new.id)))),b(at,_t)};te(Xe,at=>{r(rt),A(()=>r(rt).new.id)&&at(Tt)})}j(()=>Se(Ue,(r(rt),A(()=>r(rt).new.name)))),b(vt,Oe)}),b(tt,Ge)};te(et,tt=>{r(k),A(()=>r(k).length)&&tt(nt)})}var wt=g(et,2);{var pt=tt=>{var Ge=kt(),gt=V(Ge);ht(gt,1,()=>r(l),vt=>vt.id,(vt,rt)=>{var Oe=Lq(),H=g(S(Oe),2),G=S(H),de=S(G),ge=g(G,2);{var Ue=Xe=>{var Tt=Aq(),at=S(Tt);j(()=>Se(at,(r(rt),A(()=>r(rt).id)))),b(Xe,Tt)};te(ge,Xe=>{r(rt),A(()=>r(rt).id)&&Xe(Ue)})}j(()=>Se(de,(r(rt),A(()=>r(rt).name)))),b(vt,Oe)}),b(tt,Ge)};te(wt,tt=>{r(l),A(()=>r(l).length)&&tt(pt)})}b(Ye,Ke)};te(je,Ye=>{r(a),r(p),r(c),A(()=>r(a)&&r(p).length&&r(c))&&Ye(He)})}var dt=g(je,2);{var $e=Ye=>{var Ke=Rq(),qe=g(S(Ke),4);ie("click",qe,()=>C()),b(Ye,Ke)};te(dt,Ye=>{r(d),A(()=>r(d).length)&&Ye($e)})}var Be=g(dt,2),Ze=S(Be);{var Je=Ye=>{var Ke=Fq();ie("click",Ke,()=>P()),b(Ye,Ke)};te(Ze,Ye=>{r(v)&&Ye(Je)})}var st=g(Ze,4);j(()=>{oe=Me(_e,1,"btn btn-outline btn-sm m-l-5",null,oe,{"btn-loading":r(_)}),st.disabled=!r(u)}),ie("change",we,()=>{r(f).files.length&&O(r(f).files[0])}),ie("click",_e,()=>{r(f).click()}),ie("click",st,N),b(pe,ue)};te(he,pe=>{r($)?pe(xe):pe(Te,!1)})}j(()=>Se(ce,t())),b(z,U)},$$slots:{default:!0}});var Y=g(B,2);ft(kq(Y,{$$events:{submit:()=>{P(),I()}},$$legacy:!0}),z=>y(h,z),()=>r(h)),b(n,R),Fe(),s()}var Vq=x('<div class="loader"></div>'),Bq=x('<label>Sender name</label> <input type="text" required=""/>',1),Hq=x('<label>Sender address</label> <input type="email" required=""/>',1),Wq=x('<input type="checkbox" required=""/> <label><span class="txt">Use SMTP mail server <strong>(recommended)</strong></span> <i class="ri-information-line link-hint"></i></label>',1),Yq=x('<label>SMTP server host</label> <input type="text" required=""/>',1),Kq=x('<label>Port</label> <input type="number" required=""/>',1),Jq=x('<label>Username</label> <input type="text"/>',1),Zq=x("<label>Password</label> <!>",1),Gq=x('<span class="txt">Hide more options</span> <i class="ri-arrow-up-s-line"></i>',1),Xq=x('<span class="txt">Show more options</span> <i class="ri-arrow-down-s-line"></i>',1),Qq=x("<label>TLS encryption</label> <!>",1),e4=x("<label>AUTH method</label> <!>",1),t4=x('<label><span class="txt">EHLO/HELO domain</span> <i class="ri-information-line link-hint"></i></label> <input type="text" placeholder="Default to localhost"/>',1),n4=x('<div class="grid"><div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-6"><!></div> <div class="col-lg-12"></div></div>'),i4=x('<div><div class="grid"><div class="col-lg-4"><!></div> <div class="col-lg-2"><!></div> <div class="col-lg-3"><!></div> <div class="col-lg-3"><!></div></div> <button type="button" class="btn btn-sm btn-secondary m-t-sm m-b-sm"><!></button> <!></div>'),r4=x('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Cancel</span></button> <button type="submit"><span class="txt">Save changes</span></button>',1),s4=x('<button type="button" class="btn btn-expanded btn-outline"><i class="ri-mail-check-line"></i> <span class="txt">Send test email</span></button>'),a4=x('<div class="grid m-b-base"><div class="col-lg-6"><!></div> <div class="col-lg-6"><!></div></div> <!> <!> <div class="flex"><div class="flex-fill"></div> <!></div>',1),o4=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><div class="content txt-xl m-b-base"><p>Configure common settings for sending emails.</p></div> <!></form></div>',1),l4=x("<!> <!> <!>",1);function c4(n,e){Re(e,!1);const t=()=>Ct(Cn,"$pageTitle",i),[i,s]=Nt(),a=M(),o=M(),l=[{label:"Auto (StartTLS)",value:!1},{label:"Always",value:!0}],c=[{label:"PLAIN (default)",value:"PLAIN"},{label:"LOGIN",value:"LOGIN"}];Kn(Cn,"Mail settings");let u=M(),d=M({}),f=M({}),h=M(!1),v=M(!1),_=M(!1),p=M(!1);m();async function m(){y(h,!0);try{const C=await De.settings.getAll()||{};k(C)}catch(C){De.error(C)}y(h,!1)}async function w(){if(!(r(v)||!r(o))){y(v,!0);try{const C=await De.settings.update(F.filterRedactedProps(r(f)));k(C),sn({}),vn("Successfully saved mail settings.")}catch(C){De.error(C)}y(v,!1)}}function k(C={}){y(f,{meta:C?.meta||{},smtp:C?.smtp||{}}),r(f).smtp.authMethod||ot(f,r(f).smtp.authMethod=c[0].value),y(d,JSON.parse(JSON.stringify(r(f)))),y(_,!!r(f).smtp.username)}function $(){y(f,JSON.parse(JSON.stringify(r(d)||{})))}re(()=>r(d),()=>{y(a,JSON.stringify(r(d)))}),re(()=>(r(a),r(f)),()=>{y(o,r(a)!=JSON.stringify(r(f)))}),lt(),ze();var D=l4(),I=V(D);Ns(I);var E=g(I,2);Ei(E,{children:(C,O)=>{var P=o4(),N=V(P),R=S(N),q=g(S(R),2),B=S(q),Y=g(N,2),z=S(Y),K=g(S(z),2);{var U=se=>{var le=Vq();b(se,le)},J=se=>{var le=a4(),ce=V(le),ve=S(ce),be=S(ve);Ce(be,{class:"form-field required",name:"meta.senderName",children:Ie,$$slots:{default:(oe,me)=>{const Q=ne(()=>me.uniqueId);var ye=Bq(),Ee=V(ye),Ae=g(Ee,2);j(()=>{W(Ee,"for",r(Q)),W(Ae,"id",r(Q))}),xt(Ae,()=>r(f).meta.senderName,Ne=>ot(f,r(f).meta.senderName=Ne)),b(oe,ye)}}});var he=g(ve,2),xe=S(he);Ce(xe,{class:"form-field required",name:"meta.senderAddress",children:Ie,$$slots:{default:(oe,me)=>{const Q=ne(()=>me.uniqueId);var ye=Hq(),Ee=V(ye),Ae=g(Ee,2);j(()=>{W(Ee,"for",r(Q)),W(Ae,"id",r(Q))}),xt(Ae,()=>r(f).meta.senderAddress,Ne=>ot(f,r(f).meta.senderAddress=Ne)),b(oe,ye)}}});var Te=g(ce,2);Ce(Te,{class:"form-field form-field-toggle m-b-sm",children:Ie,$$slots:{default:(oe,me)=>{const Q=ne(()=>me.uniqueId);var ye=Wq(),Ee=V(ye),Ae=g(Ee,2),Ne=g(S(Ae),2);We(Ne,(je,He)=>ct?.(je,He),()=>({text:'By default PocketBase uses the unix "sendmail" command for sending emails. For better emails deliverability it is recommended to use a SMTP mail server.',position:"top"})),j(()=>{W(Ee,"id",r(Q)),W(Ae,"for",r(Q))}),en(Ee,()=>r(f).smtp.enabled,je=>ot(f,r(f).smtp.enabled=je)),b(oe,ye)}}});var pe=g(Te,2);{var ue=oe=>{var me=i4(),Q=S(me),ye=S(Q),Ee=S(ye);Ce(Ee,{class:"form-field required",name:"smtp.host",children:Ie,$$slots:{default:(qe,Le)=>{const Ve=ne(()=>Le.uniqueId);var et=Yq(),nt=V(et),wt=g(nt,2);j(()=>{W(nt,"for",r(Ve)),W(wt,"id",r(Ve))}),xt(wt,()=>r(f).smtp.host,pt=>ot(f,r(f).smtp.host=pt)),b(qe,et)}}});var Ae=g(ye,2),Ne=S(Ae);Ce(Ne,{class:"form-field required",name:"smtp.port",children:Ie,$$slots:{default:(qe,Le)=>{const Ve=ne(()=>Le.uniqueId);var et=Kq(),nt=V(et),wt=g(nt,2);j(()=>{W(nt,"for",r(Ve)),W(wt,"id",r(Ve))}),xt(wt,()=>r(f).smtp.port,pt=>ot(f,r(f).smtp.port=pt)),b(qe,et)}}});var je=g(Ae,2),He=S(je);Ce(He,{class:"form-field",name:"smtp.username",children:Ie,$$slots:{default:(qe,Le)=>{const Ve=ne(()=>Le.uniqueId);var et=Jq(),nt=V(et),wt=g(nt,2);j(()=>{W(nt,"for",r(Ve)),W(wt,"id",r(Ve))}),xt(wt,()=>r(f).smtp.username,pt=>ot(f,r(f).smtp.username=pt)),b(qe,et)}}});var dt=g(je,2),$e=S(dt);Ce($e,{class:"form-field",name:"smtp.password",children:Ie,$$slots:{default:(qe,Le)=>{const Ve=ne(()=>Le.uniqueId);var et=Zq(),nt=V(et),wt=g(nt,2);Nd(wt,{get id(){return r(Ve)},get mask(){return r(_)},set mask(pt){y(_,pt)},get value(){return r(f).smtp.password},set value(pt){ot(f,r(f).smtp.password=pt)},$$legacy:!0}),j(()=>W(nt,"for",r(Ve))),b(qe,et)}}});var Be=g(Q,2),Ze=S(Be);{var Je=qe=>{var Le=Gq();b(qe,Le)},st=qe=>{var Le=Xq();b(qe,Le)};te(Ze,qe=>{r(p)?qe(Je):qe(st,!1)})}var Ye=g(Be,2);{var Ke=qe=>{var Le=n4(),Ve=S(Le),et=S(Ve);Ce(et,{class:"form-field",name:"smtp.tls",children:Ie,$$slots:{default:(Ge,gt)=>{const vt=ne(()=>gt.uniqueId);var rt=Qq(),Oe=V(rt),H=g(Oe,2);On(H,{get id(){return r(vt)},get items(){return l},get keyOfSelected(){return r(f).smtp.tls},set keyOfSelected(G){ot(f,r(f).smtp.tls=G)},$$legacy:!0}),j(()=>W(Oe,"for",r(vt))),b(Ge,rt)}}});var nt=g(Ve,2),wt=S(nt);Ce(wt,{class:"form-field",name:"smtp.authMethod",children:Ie,$$slots:{default:(Ge,gt)=>{const vt=ne(()=>gt.uniqueId);var rt=e4(),Oe=V(rt),H=g(Oe,2);On(H,{get id(){return r(vt)},get items(){return c},get keyOfSelected(){return r(f).smtp.authMethod},set keyOfSelected(G){ot(f,r(f).smtp.authMethod=G)},$$legacy:!0}),j(()=>W(Oe,"for",r(vt))),b(Ge,rt)}}});var pt=g(nt,2),tt=S(pt);Ce(tt,{class:"form-field",name:"smtp.localName",children:Ie,$$slots:{default:(Ge,gt)=>{const vt=ne(()=>gt.uniqueId);var rt=t4(),Oe=V(rt),H=g(S(Oe),2);We(H,(de,ge)=>ct?.(de,ge),()=>({text:"Some SMTP servers, such as the Gmail SMTP-relay, requires a proper domain name in the inital EHLO/HELO exchange and will reject attempts to use localhost.",position:"top"}));var G=g(Oe,2);j(()=>{W(Oe,"for",r(vt)),W(G,"id",r(vt))}),xt(G,()=>r(f).smtp.localName,de=>ot(f,r(f).smtp.localName=de)),b(Ge,rt)}}}),Ot(3,Le,()=>pn,()=>({duration:150})),b(qe,Le)};te(Ye,qe=>{r(p)&&qe(Ke)})}ie("click",Be,Et(()=>{y(p,!r(p))})),Ot(3,me,()=>pn,()=>({duration:150})),b(oe,me)};te(pe,oe=>{r(f),A(()=>r(f).smtp.enabled)&&oe(ue)})}var we=g(pe,2),ke=g(S(we),2);{var ae=oe=>{var me=r4(),Q=V(me),ye=g(Q,2);let Ee;j(()=>{Q.disabled=r(v),Ee=Me(ye,1,"btn btn-expanded",null,Ee,{"btn-loading":r(v)}),ye.disabled=!r(o)||r(v)}),ie("click",Q,()=>$()),ie("click",ye,()=>w()),b(oe,me)},_e=oe=>{var me=s4();ie("click",me,()=>r(u)?.show()),b(oe,me)};te(ke,oe=>{r(o)?oe(ae):oe(_e,!1)})}b(se,le)};te(K,se=>{r(h)?se(U):se(J,!1)})}j(()=>Se(B,t())),ie("submit",z,Et(()=>w())),b(C,P)},$$slots:{default:!0}});var T=g(E,2);ft(nb(T,{$$legacy:!0}),C=>y(u,C),()=>r(u)),b(n,D),Fe(),s()}var u4=x('<div class="loader"></div>'),d4=x(`<div><div class="alert alert-warning m-0"><div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content">If you have existing uploaded files, you'll have to migrate them manually
                                    from the <strong> </strong> to the <strong> </strong>. <br/> There are numerous command line tools that can help you, such as: <a href="https://github.com/rclone/rclone" target="_blank" rel="noopener noreferrer" class="txt-bold">rclone</a>, <a href="https://github.com/peak/s5cmd" target="_blank" rel="noopener noreferrer" class="txt-bold">s5cmd</a>, etc.</div></div> <div class="clearfix m-t-base"></div></div>`),f4=x('<span class="loader loader-sm"></span>'),h4=x('<div class="label label-sm label-warning entrance-right"><i class="ri-error-warning-line txt-warning"></i> <span class="txt">Failed to establish S3 connection</span></div>'),v4=x('<div class="label label-sm label-success entrance-right"><i class="ri-checkbox-circle-line txt-success"></i> <span class="txt">S3 connected successfully</span></div>'),p4=x('<button type="button" class="btn btn-transparent btn-hint"><span class="txt">Reset</span></button>'),m4=x('<!> <div class="flex"><div class="flex-fill"></div> <!> <!> <button type="submit"><span class="txt">Save changes</span></button></div>',1),g4=x('<header class="page-header"><nav class="breadcrumbs"><div class="breadcrumb-item">Settings</div> <div class="breadcrumb-item"> </div></nav></header> <div class="wrapper"><form class="panel" autocomplete="off"><div class="content txt-xl m-b-base"><p>By default PocketBase uses the local file system to store uploaded files.</p> <p>If you have limited disk space, you could optionally connect to an S3 compatible storage.</p></div> <!></form></div>',1),b4=x("<!> <!>",1);function y4(n,e){Re(e,!1);const t=()=>Ct(Cn,"$pageTitle",i),[i,s]=Nt(),a=M(),o=M();Kn(Cn,"Files storage");const l="s3_test_request";let c=M({}),u=M({}),d=M(!1),f=M(!1),h=M(!1),v=M(null);_();async function _(){y(d,!0);try{const I=await De.settings.getAll()||{};m(I)}catch(I){De.error(I)}y(d,!1)}async function p(){if(!(r(f)||!r(o))){y(f,!0);try{De.cancelRequest(l);const I=await De.settings.update(F.filterRedactedProps(r(u)));sn({}),await m(I),Ha(),vn("Successfully saved storage settings.")}catch(I){De.error(I)}y(f,!1)}}async function m(I={}){y(u,{s3:I?.s3||{}}),y(c,JSON.parse(JSON.stringify(r(u))))}async function w(){y(u,JSON.parse(JSON.stringify(r(c)||{})))}re(()=>r(c),()=>{y(a,JSON.stringify(r(c)))}),re(()=>(r(a),r(u)),()=>{y(o,r(a)!=JSON.stringify(r(u)))}),lt(),ze();var k=b4(),$=V(k);Ns($);var D=g($,2);Ei(D,{children:(I,E)=>{var T=g4(),C=V(T),O=S(C),P=g(S(O),2),N=S(P),R=g(C,2),q=S(R),B=g(S(q),2);{var Y=K=>{var U=u4();b(K,U)},z=K=>{var U=m4(),J=V(U);cb(J,{toggleLabel:"Use S3 storage",get originalConfig(){return r(c),A(()=>r(c).s3)},get config(){return r(u).s3},set config(Te){ot(u,r(u).s3=Te)},get isTesting(){return r(h)},set isTesting(Te){y(h,Te)},get testError(){return r(v)},set testError(Te){y(v,Te)},children:(Te,pe)=>{var ue=kt(),we=V(ue);{var ke=ae=>{var _e=d4(),oe=S(_e),me=g(S(oe),2),Q=g(S(me)),ye=S(Q),Ee=g(Q,2),Ae=S(Ee);j(()=>{Se(ye,(r(c),A(()=>r(c).s3?.enabled?"S3 storage":"local file system"))),Se(Ae,(r(u),A(()=>r(u).s3.enabled?"S3 storage":"local file system")))}),Ot(3,_e,()=>pn,()=>({duration:150})),b(ae,_e)};te(we,ae=>{r(c),r(u),A(()=>r(c).s3?.enabled!=r(u).s3.enabled)&&ae(ke)})}b(Te,ue)},$$slots:{default:!0},$$legacy:!0});var se=g(J,2),le=g(S(se),2);{var ce=Te=>{var pe=kt(),ue=V(pe);{var we=_e=>{var oe=f4();b(_e,oe)},ke=_e=>{var oe=h4();We(oe,(me,Q)=>ct?.(me,Q),()=>r(v).data?.message),b(_e,oe)},ae=_e=>{var oe=v4();b(_e,oe)};te(ue,_e=>{r(h)?_e(we):r(v)?_e(ke,1):_e(ae,!1)})}b(Te,pe)};te(le,Te=>{r(u),r(o),r(f),A(()=>r(u).s3?.enabled&&!r(o)&&!r(f))&&Te(ce)})}var ve=g(le,2);{var be=Te=>{var pe=p4();j(()=>pe.disabled=r(f)),ie("click",pe,()=>w()),b(Te,pe)};te(ve,Te=>{r(o)&&Te(be)})}var he=g(ve,2);let xe;j(()=>{xe=Me(he,1,"btn btn-expanded",null,xe,{"btn-loading":r(f)}),he.disabled=!r(o)||r(f)}),ie("click",he,()=>p()),b(K,U)};te(B,K=>{r(d)?K(Y):K(z,!1)})}j(()=>Se(N,t())),ie("submit",q,Et(()=>p())),b(I,T)},$$slots:{default:!0}}),b(n,k),Fe(),s()}var _4=x('<div class="block txt-center m-b-lg"><figure class="logo"><img alt="PocketBase logo" width="40" height="40"/> <span class="txt">Pocket<strong>Base</strong></span></figure></div> <div class="clearfix"></div>',1),x4=x('<div class="wrapper wrapper-sm m-b-xl panel-wrapper svelte-nce1p0"><!> <!></div>');function w4(n,e){Re(e,!1);let t=ee(e,"nobranding",8,!1);ze(),Ei(n,{class:"full-page",center:!0,children:(i,s)=>{var a=x4(),o=S(a);{var l=u=>{var d=_4(),f=V(d),h=S(f),v=S(h);j(()=>W(v,"src",`${A(()=>"./")??""}images/logo.svg`)),b(u,d)};te(o,u=>{t()||u(l)})}var c=g(o,2);Qt(c,e,"default",{},null),b(i,a)},$$slots:{default:!0}}),Fe()}var k4=x('<div class="block txt-center"><span class="loader"></span></div>'),S4=x('<label> </label> <input required=""/>',1),T4=x('<label>Password</label> <input type="password" required=""/> <div class="help-block"><a href="/request-password-reset" class="link-hint">Forgotten password?</a></div>',1),$4=x('<form class="block"><!> <!> <button type="submit"><span class="txt"> </span> <i class="ri-arrow-right-line"></i></button></form>'),I4=x('<label>Email</label> <input type="email" required=""/>',1),C4=x('<form class="block"><!> <button type="submit"><i class="ri-mail-send-line"></i> <span class="txt">Send OTP</span></button></form>'),E4=x(`<div class="content txt-center m-b-sm"><p>Check your <strong> </strong> inbox and enter in the input below the received
                        One-time password (OTP).</p></div>`),O4=x('<label>Id</label> <input type="text" required=""/>',1),D4=x('<label>One-time password</label> <input type="password" required=""/>',1),P4=x('<!> <form class="block"><!> <!> <button type="submit"><span class="txt">Login</span> <i class="ri-arrow-right-line"></i></button></form> <div class="content txt-center m-t-sm"><button type="button" class="link-hint">Request another OTP</button></div>',1),M4=x('<div class="content txt-center m-b-base"><h4>Superuser login <!></h4></div> <!>',1);function A4(n,e){Re(e,!1);const t=()=>Ct(bd,"$querystring",i),[i,s]=Nt(),a=new URLSearchParams(t());let o=M(a.get("demoEmail")||""),l=M(a.get("demoPassword")||""),c=M({}),u=M(1),d=M(1),f=M(!1),h=M(!1),v=M(!1),_=M(!1),p=M(""),m=M(""),w=M(""),k=M(""),$=M("");D();async function D(){if(!r(_)){y(_,!0);try{y(c,await De.collection("_superusers").listAuthMethods())}catch(C){De.error(C)}y(_,!1)}}async function I(){if(!r(f)){y(f,!0);try{await De.collection("_superusers").authWithPassword(r(o),r(l)),Ha(),sn({}),la("/")}catch(C){C.status==401?(y(p,C.response.mfaId),r(c)?.password?.identityFields?.length==1&&r(c).password.identityFields[0]=="email"?(y(k,r(o)),await E()):/^[^@\s]+@[^@\s]+$/.test(r(o))&&y(k,r(o))):C.status!=400?De.error(C):lr("Invalid login credentials.")}y(f,!1)}}async function E(){if(!r(h)){y(h,!0);try{const C=await De.collection("_superusers").requestOTP(r(k));y(m,C.otpId),y(w,r(m)),Ha(),sn({})}catch(C){C.status==429&&y(m,r(w)),De.error(C)}y(h,!1)}}async function T(){if(!r(v)){y(v,!0);try{await De.collection("_superusers").authWithOTP(r(m)||r(w),r($),{mfaId:r(p)}),Ha(),sn({}),la("/")}catch(C){De.error(C)}y(v,!1)}}re(()=>(r(d),r(u),r(c),r(p),r(m)),()=>{y(d,1),y(u,1),r(c)?.mfa?.enabled&&wr(d),r(c)?.otp?.enabled&&wr(d),r(p)!=""&&wr(u),r(m)!=""&&wr(u)}),lt(),ze(),w4(n,{children:(C,O)=>{var P=M4(),N=V(P),R=S(N),q=g(S(R));{var B=J=>{var se=Is();j(()=>Se(se,`(${r(u)??""}/${r(d)??""})`)),b(J,se)};te(q,J=>{r(d)>1&&J(B)})}var Y=g(N,2);{var z=J=>{var se=k4();b(J,se)},K=J=>{var se=$4(),le=S(se);Ce(le,{class:"form-field required",name:"identity",children:Ie,$$slots:{default:(Te,pe)=>{const ue=ne(()=>pe.uniqueId);var we=S4(),ke=V(we),ae=S(ke),_e=g(ke,2);Bi(_e,!0),j(oe=>{W(ke,"for",r(ue)),Se(ae,oe),W(_e,"id",r(ue)),W(_e,"type",(r(c),A(()=>r(c).password.identityFields.length==1&&r(c).password.identityFields[0]=="email"?"email":"text"))),qn(_e,r(o))},[()=>(L(F),r(c),A(()=>F.sentenize(r(c).password.identityFields.join(" or "),!1)))]),ie("input",_e,oe=>{y(o,oe.target.value)}),b(Te,we)}}});var ce=g(le,2);Ce(ce,{class:"form-field required",name:"password",children:Ie,$$slots:{default:(Te,pe)=>{const ue=ne(()=>pe.uniqueId);var we=T4(),ke=V(we),ae=g(ke,2),_e=g(ae,2),oe=S(_e);We(oe,me=>ii?.(me)),j(()=>{W(ke,"for",r(ue)),W(ae,"id",r(ue))}),xt(ae,()=>r(l),me=>y(l,me)),b(Te,we)}}});var ve=g(ce,2);let be;var he=S(ve),xe=S(he);j(()=>{be=Me(ve,1,"btn btn-lg btn-block btn-next",null,be,{"btn-disabled":r(f),"btn-loading":r(f)}),Se(xe,r(d)>1?"Next":"Login")}),ie("submit",se,Et(I)),b(J,se)},U=J=>{var se=kt(),le=V(se);{var ce=be=>{var he=C4(),xe=S(he);Ce(xe,{class:"form-field required",name:"email",children:Ie,$$slots:{default:(ue,we)=>{const ke=ne(()=>we.uniqueId);var ae=I4(),_e=V(ae),oe=g(_e,2);j(()=>{W(_e,"for",r(ke)),W(oe,"id",r(ke))}),xt(oe,()=>r(k),me=>y(k,me)),b(ue,ae)}}});var Te=g(xe,2);let pe;j(()=>pe=Me(Te,1,"btn btn-lg btn-block btn-next",null,pe,{"btn-disabled":r(h),"btn-loading":r(h)})),ie("submit",he,Et(E)),b(be,he)},ve=be=>{var he=P4(),xe=V(he);{var Te=me=>{var Q=E4(),ye=S(Q),Ee=g(S(ye)),Ae=S(Ee);j(()=>Se(Ae,r(k))),b(me,Q)};te(xe,me=>{r(k)&&me(Te)})}var pe=g(xe,2),ue=S(pe);Ce(ue,{class:"form-field required",name:"otpId",children:Ie,$$slots:{default:(me,Q)=>{const ye=ne(()=>Q.uniqueId);var Ee=O4(),Ae=V(Ee),Ne=g(Ae,2);j(()=>{W(Ae,"for",r(ye)),W(Ne,"id",r(ye)),qn(Ne,r(m)),W(Ne,"placeholder",r(w))}),ie("change",Ne,je=>{y(m,je.target.value||r(w)),je.target.value=r(m)}),b(me,Ee)}}});var we=g(ue,2);Ce(we,{class:"form-field required",name:"password",children:Ie,$$slots:{default:(me,Q)=>{const ye=ne(()=>Q.uniqueId);var Ee=D4(),Ae=V(Ee),Ne=g(Ae,2);Bi(Ne,!0),j(()=>{W(Ae,"for",r(ye)),W(Ne,"id",r(ye))}),xt(Ne,()=>r($),je=>y($,je)),b(me,Ee)}}});var ke=g(we,2);let ae;var _e=g(pe,2),oe=S(_e);j(()=>{ae=Me(ke,1,"btn btn-lg btn-block btn-next",null,ae,{"btn-disabled":r(v),"btn-loading":r(v)}),oe.disabled=r(v)}),ie("submit",pe,Et(T)),ie("click",oe,()=>{y(m,"")}),b(be,he)};te(le,be=>{r(m)?be(ve,!1):be(ce)})}b(J,se)};te(Y,J=>{r(_)?J(z):(r(c),r(p),A(()=>r(c).password.enabled&&!r(p))?J(K,1):(r(c),A(()=>r(c).otp.enabled)&&J(U,2)))})}b(C,P)},$$slots:{default:!0}}),Fe(),s()}function ln(n){if(!n)throw Error("Parameter args is required");if(!n.component==!n.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(n.component&&(n.asyncComponent=()=>Promise.resolve(n.component)),typeof n.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(n.conditions){Array.isArray(n.conditions)||(n.conditions=[n.conditions]);for(let t=0;t<n.conditions.length;t++)if(!n.conditions[t]||typeof n.conditions[t]!="function")throw Error("Invalid parameter conditions["+t+"]")}return n.loadingComponent&&(n.asyncComponent.loading=n.loadingComponent,n.asyncComponent.loadingParams=n.loadingParams||void 0),{component:n.asyncComponent,userData:n.userData,conditions:n.conditions&&n.conditions.length?n.conditions:void 0,props:n.props&&Object.keys(n.props).length?n.props:{},_sveltesparouter:!0}}const L4={"/pbinstal/:token":ln({asyncComponent:()=>Wt(()=>import("./PageInstaller-BeBzWh5B.js"),[],import.meta.url),conditions:[n=>n.params.token&&!jl(n.params.token)],userData:{showAppSidebar:!1}}),"/login":ln({component:A4,conditions:[n=>!De.authStore.isValid],userData:{showAppSidebar:!1}}),"/request-password-reset":ln({asyncComponent:()=>Wt(()=>import("./PageSuperuserRequestPasswordReset-BCxfNl6p.js"),[],import.meta.url),conditions:[n=>!De.authStore.isValid],userData:{showAppSidebar:!1}}),"/confirm-password-reset/:token":ln({asyncComponent:()=>Wt(()=>import("./PageSuperuserConfirmPasswordReset-CukHC8Ce.js"),[],import.meta.url),conditions:[n=>!De.authStore.isValid],userData:{showAppSidebar:!1}}),"/collections":ln({component:rR,conditions:[n=>De.authStore.isValid],userData:{showAppSidebar:!0}}),"/logs":ln({component:E$,conditions:[n=>De.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings":ln({component:nF,conditions:[n=>De.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/mail":ln({component:c4,conditions:[n=>De.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/storage":ln({component:y4,conditions:[n=>De.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/export-collections":ln({component:sq,conditions:[n=>De.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/import-collections":ln({component:Uq,conditions:[n=>De.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/backups":ln({component:HF,conditions:[n=>De.authStore.isValid],userData:{showAppSidebar:!0}}),"/settings/crons":ln({component:GF,conditions:[n=>De.authStore.isValid],userData:{showAppSidebar:!0}}),"/users/confirm-password-reset/:token":ln({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmPasswordReset-DJgYkqhc.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-password-reset/:token":ln({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmPasswordReset-DJgYkqhc.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/users/confirm-verification/:token":ln({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmVerification-CI7S_hbR.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-verification/:token":ln({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmVerification-CI7S_hbR.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/users/confirm-email-change/:token":ln({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmEmailChange-C3EL43zS.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/confirm-email-change/:token":ln({asyncComponent:()=>Wt(()=>import("./PageRecordConfirmEmailChange-C3EL43zS.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/oauth2-redirect-success":ln({asyncComponent:()=>Wt(()=>import("./PageOAuth2RedirectSuccess-Beds__Wh.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"/auth/oauth2-redirect-failure":ln({asyncComponent:()=>Wt(()=>import("./PageOAuth2RedirectFailure-Cf-h6Bbv.js"),[],import.meta.url),userData:{showAppSidebar:!1}}),"*":ln({component:m0,userData:{showAppSidebar:!1}})};var N4=x('<link rel="shortcut icon" type="image/png"/>'),R4=x('<div class="txt-ellipsis current-superuser svelte-1n46o8q"> </div> <hr/> <a href="/collections?collection=_superusers" class="dropdown-item closable" role="menuitem"><i class="ri-shield-user-line" aria-hidden="true"></i> <span class="txt">Manage superusers</span></a> <button type="button" class="dropdown-item closable" role="menuitem"><i class="ri-logout-circle-line" aria-hidden="true"></i> <span class="txt">Logout</span></button>',1),F4=x('<i class="ri-sun-line" aria-hidden="true"></i>'),q4=x('<i class="ri-moon-line" aria-hidden="true"></i>'),z4=x('<aside class="app-sidebar"><a href="/" class="logo logo-sm"><img alt="PocketBase logo" width="40" height="40"/></a> <nav class="main-menu"><a href="/collections" class="menu-item" aria-label="Collections"><i class="ri-database-2-line"></i></a> <a href="/logs" class="menu-item" aria-label="Logs"><i class="ri-line-chart-line"></i></a> <a href="/settings" class="menu-item" aria-label="Settings"><i class="ri-tools-line"></i></a></nav> <div tabindex="0" role="button" aria-label="Logged superuser menu" class="thumb thumb-circle link-hint"><span class="initials"> </span> <!></div> <button class="btn btn-transparent btn-sm m-t-10" title="Toggle dark theme"><!></button></aside>'),j4=x('<div class="tinymce-preloader hidden"><!></div>'),U4=x('<div class="app-layout"><!> <div class="app-body"><!> <!></div></div> <!> <!>',1);function V4(n,e){Re(e,!1);const t=()=>Ct(zl,"$superuser",a),i=()=>Ct(Cn,"$pageTitle",a),s=()=>Ct(gu,"$appName",a),[a,o]=Nt();let l,c=M(!1);const u="pb_ui_theme";let d=M(!1);function f(q){y(d,!!q);try{const B=document.documentElement;r(d)?B.classList.add("dark"):B.classList.remove("dark")}catch{}}function h(){const q=window.localStorage?.getItem(u);if(q==="dark"||q==="light"){f(q==="dark");return}const B=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;f(B)}function v(){f(!r(d)),window.localStorage?.setItem(u,r(d)?"dark":"light")}let _=M(!1);function p(q){q?.detail?.location!==l&&(y(c,!!q?.detail?.userData?.showAppSidebar),l=q?.detail?.location,Kn(Cn,""),sn({}),Vm())}function m(){la("/")}async function w(){if(t()?.id)try{const q=await De.settings.getAll({$cancelKey:"initialAppSettings"});Kn(gu,q?.meta?.appName||""),Kn(yo,!!q?.meta?.hideControls)}catch(q){q?.isAbort||console.warn("Failed to load app settings.",q)}}fn(()=>{h()});function k(){De.logout()}re(()=>t(),()=>{t()?.id&&w()}),lt(),ze();var $=U4();Ky("1n46o8q",q=>{var B=kt(),Y=V(B);{var z=K=>{var U=N4();j(()=>W(U,"href",`${A(()=>"./")??""}images/favicon/favicon_prod.png`)),b(K,U)};te(Y,K=>{A(()=>window.location.protocol=="https:")&&K(z)})}my(K=>{op.title=K??""},[()=>(L(F),i(),s(),A(()=>F.joinNonEmpty([i(),s(),"PocketBase"]," - ",!1)))]),b(q,B)});var D=V($),I=S(D);{var E=q=>{var B=z4(),Y=S(B),z=S(Y);We(Y,ue=>ii?.(ue));var K=g(Y,2),U=S(K);We(U,ue=>ii?.(ue)),We(U,(ue,we)=>Qi?.(ue,we),()=>({path:"/collections/?.*",className:"current-route"})),We(U,(ue,we)=>ct?.(ue,we),()=>({text:"Collections",position:"right"}));var J=g(U,2);We(J,ue=>ii?.(ue)),We(J,(ue,we)=>Qi?.(ue,we),()=>({path:"/logs/?.*",className:"current-route"})),We(J,(ue,we)=>ct?.(ue,we),()=>({text:"Logs",position:"right"}));var se=g(J,2);We(se,ue=>ii?.(ue)),We(se,(ue,we)=>Qi?.(ue,we),()=>({path:"/settings/?.*",className:"current-route"})),We(se,(ue,we)=>ct?.(ue,we),()=>({text:"Settings",position:"right"}));var le=g(K,2),ce=S(le),ve=S(ce),be=g(ce,2);Jn(be,{class:"dropdown dropdown-nowrap dropdown-upside dropdown-left",children:(ue,we)=>{var ke=R4(),ae=V(ke),_e=S(ae),oe=g(ae,4);We(oe,Q=>ii?.(Q));var me=g(oe,2);j(()=>{W(ae,"title",(t(),A(()=>t().email))),Se(_e,(t(),A(()=>t().email)))}),ie("click",me,k),b(ue,ke)},$$slots:{default:!0}});var he=g(le,2),xe=S(he);{var Te=ue=>{var we=F4();b(ue,we)},pe=ue=>{var we=q4();b(ue,we)};te(xe,ue=>{r(d)?ue(Te):ue(pe,!1)})}j(ue=>{W(z,"src",`${A(()=>"./")??""}images/logo.svg`),W(le,"title",(t(),A(()=>t().email))),Se(ve,ue),W(he,"aria-pressed",r(d))},[()=>(L(F),t(),A(()=>F.getInitials(t().email)))]),ie("click",he,v),b(q,B)};te(I,q=>{t(),r(c),A(()=>t()?.id&&r(c))&&q(E)})}var T=g(I,2),C=S(T);f0(C,{get routes(){return L4},$$events:{routeLoading:p,conditionsFailed:m}});var O=g(C,2);j1(O,{});var P=g(D,2);$1(P,{});var N=g(P,2);{var R=q=>{var B=j4(),Y=S(B);{let z=ne(()=>(L(F),A(()=>F.defaultEditorOptions())));ud(Y,{get conf(){return r(z)},$$events:{init:()=>{y(_,!0)}}})}b(q,B)};te(N,q=>{r(c)&&!r(_)&&q(R)})}b(n,$),Fe(),o()}My(V4,{target:document.getElementById("app")});export{Nu as $,Rn as A,oa as B,ot as C,W as D,ne as E,w4 as F,Me as G,te as H,We as I,Bi as J,ii as K,Se as L,L as M,vn as N,F as O,kt as P,_o as Q,jl as R,Kn as S,fn as T,Nt as U,Cn as V,Ut as W,yt as X,Ct as Y,Gn as Z,JL as _,ee as a,ht as a0,At as a1,A as a2,rn as a3,Is as a4,mi as a5,Qy as a6,rT as a7,H4 as a8,ct as a9,Ft as aa,De as b,lr as c,r as d,lt as e,x as f,ea as g,V as h,ze as i,g as j,S as k,re as l,M as m,Ce as n,Ie as o,Re as p,ft as q,la as r,y as s,$n as t,j as u,xt as v,b as w,ie as x,Et as y,Fe as z};
